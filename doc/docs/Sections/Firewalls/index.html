<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Firewalls | FWCloud-UI</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="User's manual">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/manual/assets/css/0.styles.e6812339.css" as="style"><link rel="preload" href="/manual/assets/js/app.7d41c291.js" as="script"><link rel="preload" href="/manual/assets/js/2.54df04f9.js" as="script"><link rel="preload" href="/manual/assets/js/18.4ea0a655.js" as="script"><link rel="prefetch" href="/manual/assets/js/10.e3ad077c.js"><link rel="prefetch" href="/manual/assets/js/11.377ce0b0.js"><link rel="prefetch" href="/manual/assets/js/12.7ae1125f.js"><link rel="prefetch" href="/manual/assets/js/13.c8b2a44f.js"><link rel="prefetch" href="/manual/assets/js/14.9fc58c7a.js"><link rel="prefetch" href="/manual/assets/js/15.57deac4d.js"><link rel="prefetch" href="/manual/assets/js/16.16ef43b8.js"><link rel="prefetch" href="/manual/assets/js/17.81a14db2.js"><link rel="prefetch" href="/manual/assets/js/19.218825b1.js"><link rel="prefetch" href="/manual/assets/js/20.f376603d.js"><link rel="prefetch" href="/manual/assets/js/21.0f03f774.js"><link rel="prefetch" href="/manual/assets/js/22.4c075c17.js"><link rel="prefetch" href="/manual/assets/js/23.01fa35ac.js"><link rel="prefetch" href="/manual/assets/js/24.377641e4.js"><link rel="prefetch" href="/manual/assets/js/25.cf5ca6af.js"><link rel="prefetch" href="/manual/assets/js/26.8b3ef995.js"><link rel="prefetch" href="/manual/assets/js/27.c7dfa480.js"><link rel="prefetch" href="/manual/assets/js/28.de08fc5c.js"><link rel="prefetch" href="/manual/assets/js/29.ed1120c7.js"><link rel="prefetch" href="/manual/assets/js/3.4ad4875a.js"><link rel="prefetch" href="/manual/assets/js/30.d8f6f78d.js"><link rel="prefetch" href="/manual/assets/js/31.b32ae9d3.js"><link rel="prefetch" href="/manual/assets/js/32.6abe3701.js"><link rel="prefetch" href="/manual/assets/js/33.3966d962.js"><link rel="prefetch" href="/manual/assets/js/34.f68ba7a4.js"><link rel="prefetch" href="/manual/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/manual/assets/js/5.845fabbb.js"><link rel="prefetch" href="/manual/assets/js/6.fb974913.js"><link rel="prefetch" href="/manual/assets/js/7.bdbafc2a.js"><link rel="prefetch" href="/manual/assets/js/8.49c0ed0c.js"><link rel="prefetch" href="/manual/assets/js/9.5ff39350.js">
    <link rel="stylesheet" href="/manual/assets/css/0.styles.e6812339.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/manual/" class="home-link router-link-active"><img src="/manual/assets/img/fwcloud_q.png" alt="FWCloud-UI" class="logo"> <span class="site-name can-hide">FWCloud-UI</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/manual/docs/Sections/Introduction/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/manual/docs/Sections/FWClouds/" class="nav-link">
  FWClouds
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Firewalls
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Agent/" class="nav-link">
  Agent
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Objects/" class="nav-link">
  Objects
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Policy/" class="nav-link">
  Policy
</a></div><div class="nav-item"><a href="/manual/docs/Sections/VPN/" class="nav-link">
  VPN
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Routing/" class="nav-link">
  Routing
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/manual/docs/Sections/Introduction/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/manual/docs/Sections/FWClouds/" class="nav-link">
  FWClouds
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Firewalls
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Agent/" class="nav-link">
  Agent
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Objects/" class="nav-link">
  Objects
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Policy/" class="nav-link">
  Policy
</a></div><div class="nav-item"><a href="/manual/docs/Sections/VPN/" class="nav-link">
  VPN
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Routing/" class="nav-link">
  Routing
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Firewalls</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="active sidebar-link">Firewalls</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-firewall-cluster" class="sidebar-link">New firewall/Cluster</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-firewall" class="sidebar-link">New Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-cluster-of-firewalls" class="sidebar-link">New Cluster of Firewalls</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-folder" class="sidebar-link">New Folder</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#firewall-interfaces" class="sidebar-link">Firewall Interfaces</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#interfaces" class="sidebar-link">Interfaces</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#autodiscover" class="sidebar-link">Autodiscover</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile" class="sidebar-link">Compile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-one-firewall" class="sidebar-link">Compile One Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-a-firewall-cluster" class="sidebar-link">Compile a Firewall Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-all-firewalls" class="sidebar-link">Compile All Firewalls</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install" class="sidebar-link">Install</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-firewall" class="sidebar-link">Install Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-a-firewall-cluster" class="sidebar-link">Install a Firewall Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-all-fws" class="sidebar-link">Install All FWs</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#others-actions" class="sidebar-link">Others actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#edit-firewall" class="sidebar-link">Edit Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#edit-a-cluster-of-firewalls" class="sidebar-link">Edit a Cluster of Firewalls</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#policy-script" class="sidebar-link">Policy script</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#clone-firewall" class="sidebar-link">Clone Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#convert-to-cluster" class="sidebar-link">Convert to Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#delete-cluster" class="sidebar-link">Delete Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#delete-firewall" class="sidebar-link">Delete Firewall</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#import-export" class="sidebar-link">Import / Export</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#import-wizard" class="sidebar-link">Import wizard</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#iptables-save-import" class="sidebar-link">IPTables-save import</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#iptables-save-export" class="sidebar-link">IPTables-save export</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="firewalls"><a href="#firewalls" class="header-anchor">#</a> Firewalls</h1> <h2 id="new-firewall-cluster"><a href="#new-firewall-cluster" class="header-anchor">#</a> New firewall/Cluster</h2> <h3 id="new-firewall"><a href="#new-firewall" class="header-anchor">#</a> New Firewall</h3> <p>To create a new firewall just right click over the <code>Firewalls/clusters</code> tree root node and select <code>New firewall</code>from the menu.</p> <p><img src="/manual/assets/img/new_fw.png" alt="New Firewall"><br></p> <p>You will presented a form in which you should write the name of your new firewall. Also you can fill in the <code>Description</code>, and select the compiler.</p> <p>In the current version you can choose from the IPTables and NFTables as compiler formats. IPTables format is selected by default.</p> <p>Finally select the communication method to be used:</p> <p><img src="/manual/assets/img/new_fw-form-nftables-ssh.png" alt="New Firewall Form"><br></p> <p>FWCloud requires access to the firewall for managing it. This communication between FWCloud and the new firewall can be carried out in two ways: <code>SSH</code> and <code>FWCloud-Agent</code>. Each of them uses a different authentication mechanism.</p> <div class="custom-block tip"><p class="custom-block-title">SSH / FWCloud-Agent credentials</p> <p>In both methods the credentials sent from FWCloud-UI to FWCloud-API encrypted using strong PGP public key cryptography with key pairs generated on the fly for each session</p></div> <p>In the following sections we describe these two methods:</p> <h4 id="ssh-communication"><a href="#ssh-communication" class="header-anchor">#</a> SSH Communication</h4> <p>Communication via SSH protocol is the simplest since it does not require you to carry out any installation on the firewall to be managed, but it has the disadvantage that you are using a service such as SSH that allows full access to the managed firewall.</p> <p>Using this method when FWCloud needs access to this firewall it will use the SSH <code>User</code> and <code>Password</code> credentials defined in the firewall form. If you don't supply these credentials, they will be requested when needed.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For security you can keep the password field blank and the password will be asked every time when needed</p></div> <p><img src="/manual/assets/img/new_fw-form-nftables-ssh.png" alt="New Firewall Form"><br></p> <p>The security policy is loaded into the firewall using a SSH connection. Therefore, you need to have SSH access from the FWCloud server to the destination firewall. For this connection the IP address assigned to the interface configured in the firewall will be used.</p> <p>If your firewall is outside your premises, just use SSH over a VPN connection. In the VPN section you can see how easy is to create a VPN infrastructure using FWCloud-UI.</p> <h4 id="fwcloud-agent-communication"><a href="#fwcloud-agent-communication" class="header-anchor">#</a> FWCloud-Agent communication</h4> <p>By the other hand the communication option through <a href="/manual/docs/Sections/Agent/"> FWcloud-Agent </a> is the most recommended, since it simplifies and optimizes communication with the managed firewall.</p> <p>It is a service that is installed on the firewall through which the FWCloud console carries out the necessary actions on the managed firewalls. This service is installed using the .deb or .rpm packages corresponding to the Linux distribution that you are using. See <a href="/manual/docs/Sections/Agent/#installation"> FWcloud-Agent installation </a> for more information. Also you have a video demonstration at the bottom of that section.</p> <p>FWCloud-Agent improves security in the FWCloud – FireWalls interaction, since it does not require SSH credentials any more, instead of it an API Key is used. This key is automatically generated during the package installation process in the firewall.</p> <p>In addition, it is possible to restrict access to this service only from the IP of the FWCloud console.</p> <p>Using FWCloud-Agent instead of SSH also means that you restrict the actions that can be done on the firewall only to those that the FWCloud-Agent service allows. That is, you are not using a general scope protocol like SSH that allows you to do much more than what is needed in the FWCloud – FireWalls communication.</p> <p>Another additional advantage of using FWCloud-Agent is that it allows extra functionalities, such as the <a href="/manual/docs/Sections/VPN/#vpn-connection-history"> history of VPN connections </a>.</p> <p><img src="/manual/assets/img/new_fw-form-nftables-agent.png" alt="New Firewall Form"><br></p> <p>In both cases the firewall settings can be modified at any moment by double clicking the firewall or by right click and selecting <code>Edit firewall</code> from the context menu.</p> <p><img src="/manual/assets/img/edit_fw.png" alt="Edit Firewall"><br></p> <p>By editing the firewall settings you can select which interface, and IP address FWCloud-UI will use to access the firewall.</p> <p><img src="/manual/assets/img/edit_fw-form-iptables-ssh.png" alt="Edit Firewall Form"><br></p> <h3 id="new-cluster-of-firewalls"><a href="#new-cluster-of-firewalls" class="header-anchor">#</a> New Cluster of Firewalls</h3> <p>To create a new cluster of firewalls just right click and select <code>New cluster</code> from the context menu.</p> <p><img src="/manual/assets/img/new_cluster.png" alt="New Cluster"><br></p> <p>Give a name to the cluster and add as many nodes as your cluster has with their credentials and save the changes.</p> <p><img src="/manual/assets/img/new_cluster-form-iptables-mix.png" alt="New Cluster Form"><br></p> <div class="custom-block tip"><p class="custom-block-title">Communication method</p> <p>Note the icon on the left of the name of the nodes.
The communication method can be SSH or FWCloud-Agent, and not all nodes need to use the same method.</p></div> <p>The cluster settings can by modified at any time by double clicking on the cluster name or just right click and select <code>Edit</code> from the context menu.</p> <p>Also the setting of any of the nodes can be changed by double clicking over the node name.</p> <h3 id="new-folder"><a href="#new-folder" class="header-anchor">#</a> New Folder</h3> <p>For organizational purposes <code>Folders</code> can be created. Inside them you can place your firewalls, clusters of firewalls and even more folders, just drag an drop.</p> <p>Folders as many other elements in the FWCloud-UI can be collapsed of expanded to better focus in the parts you are working on.</p> <p>You can rename or remove any folder. In order to remove a folder it has to be empty.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In order to remove a folder it needs to be empty</p></div> <h2 id="firewall-interfaces"><a href="#firewall-interfaces" class="header-anchor">#</a> Firewall Interfaces</h2> <h3 id="interfaces"><a href="#interfaces" class="header-anchor">#</a> Interfaces</h3> <p>When configuring the firewall or firewalls cluster you have to set up its network interfaces.</p> <p>You do not need to set up all interfaces, for simplicity you only need to define the ones that are going to be used by the firewall's policy. But in order to be able to install the policy in the firewall, at least one interface needs to be defined. The loopback interface is automatically defined when a new firewall is created. This can be used if FWCloud and the firewall you are configuring are going to be in the same device. To select which interface it will use edit the settings of the firewall. See <a href="/manual/docs/Sections/Firewalls/#new-firewall"> Firewall </a>.</p> <p>To add a new interface just right click over <code>Interfaces</code> and select <code>New interface</code>.</p> <p><img src="/manual/assets/img/new_interface.png" alt="New Interface"><br></p> <p>A form pops up, where you can set up the object name, that is the interface names like eth0 or ens1, a label, the MAC address and a comment. Only the interface name is mandatory. Since this name can be included in the policy please use the real name of your device, if not the policy rules affected will not do what they are intended to do.</p> <p><img src="/manual/assets/img/new_interface-form.png" alt="New Interface Form"><br></p> <div class="custom-block danger"><p class="custom-block-title">The name of interface matters</p> <p>The name of the interface can be used in some of yours security policy rules</p></div> <div class="custom-block tip"><p class="custom-block-title">LABEL your interfaces</p> <p>If you want something more informative than the name of the interface then use the label field. Example labels: WAN1, WAN2, DMZ, LAN1, LAN2, etc.</p></div> <p>In order to simplify this tedious process of firewall interfaces and IP addresses creation, FWCloud has a very powerful feature called <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a>. It makes possible to connect to the firewall by means of an SSH connection and automatically get and create in FWCloud all the interfaces and IP addresses that it has.</p> <p>Once interfaces are added, they can be edited, duplicated or deleted. Right click on the interface name to get the context menu.
In this menu there is also a convenient action called <code>Where use</code>. It will head you to the policy rules or objects that use the selected interface. It comes very handy to find a rule.</p> <p>The interfaces can have configured IP addresses. They are set up by right clicking over the interface and selecting <code>New IP address</code></p> <p><img src="/manual/assets/img/new_ip.png" alt="New IP Address"><br></p> <p><img src="/manual/assets/img/new_ip-form.png" alt="New IP Address Form"><br></p> <h3 id="autodiscover"><a href="#autodiscover" class="header-anchor">#</a> Autodiscover</h3> <p>FWCloud has a very handy utility for the automatic discovery of the interfaces and IP addresses a firewall actually has and transfer them into the FWCloud configuration. When your are doing the initial configuration it can save you a lot of time and more importantly it avoids any misspelling in the data.</p> <div class="custom-block tip"><p class="custom-block-title">New interfaces or IPs</p> <p>You can use the &quot;Autodiscover&quot; feature every time you add new interfaces and/or IPs to your firewall/cluster as an easy way to incorporate them to FWCloud</p></div> <p>To access this utility double click on the firewall name and go to the <code>Interfaces/IPs</code> tab in the pop up window.</p> <p><img src="/manual/assets/img/fw_edit-tab2.png" alt="Edit Firewall Tab 2"><br></p> <p>Select the filters you want to apply and press <code>Discover</code> button. On the left side the new items discovered according to the filters applied will appear in a tree-shaped representation.</p> <p><img src="/manual/assets/img/discover-form1.png" alt="Discover select"><br></p> <p>If you hover the mouse over an interface name, a pencil icon <img src="/manual/assets/img/pencil.png" alt="pencil"> appears, if you click on it you can modify the properties of the interface or the IP address.</p> <p>It is possible too form this section to select the IP that will be used for firewall management. If you are in a cluster, you will be able to select the install IP for each cluster's node.</p> <p>In the &quot;Autodiscover&quot; tree select the items that you want to incorporate in your FWCloud firewall and, when you press the <code>Save changes</code> button, all the changes will be applied to the firewall/cluster you are editing.</p> <p><img src="/manual/assets/img/discover-form2.png" alt="Discover selected"><br></p> <p>A new windows will show a summary of the actions done and the new interfaces and IP addresses are now part of your firewall configuration. You can edit them or do all the actions interfaces allows.</p> <p><img src="/manual/assets/img/discover-summary.png" alt="Discover summary"><br></p> <p>Let's now see the &quot;Autodiscover&quot; utility in action:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/9HWP_wJl1Oc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>As we have explained this utility is quite useful using it on firewall clusters:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/R5hlAar0d-8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h2 id="compile"><a href="#compile" class="header-anchor">#</a> Compile</h2> <h3 id="compile-one-firewall"><a href="#compile-one-firewall" class="header-anchor">#</a> Compile One Firewall</h3> <p>The policy rules of the firewall need to be compiled prior to be installed into the firewall. That is, you are managing the firewall policy offline and, when ready, you can upload it to the corresponding firewall or firewalls cluster nodes.</p> <div class="custom-block tip"><p class="custom-block-title">Icons</p> <p>An orange <img src="/manual/assets/img/C.png" alt="C"> at the left of the firewall's name indicates that the firewall policy needs to be compiled</p></div> <p>This action will generate all IPTables/NFTables rules and chains needed by the policy specified graphically in the policy panel.</p> <p><img src="/manual/assets/img/compile_fw.png" alt="Compile Firewall"><br></p> <p>, and hit next</p> <p><img src="/manual/assets/img/compile_fw-form.png" alt="Compile Firewall Form"><br></p> <p>If no problems occur a green message will show the success.</p> <p><img src="/manual/assets/img/compiled_ok.png" alt="Successfully Compiled"><br></p> <h3 id="compile-a-firewall-cluster"><a href="#compile-a-firewall-cluster" class="header-anchor">#</a> Compile a Firewall Cluster</h3> <p>If you have a firewall cluster, you do not need to compile the rules for the nodes individually, the rules will be compiled once and installed on all nodes in the cluster.</p> <p><img src="/manual/assets/img/compile_cluster-form.png" alt="Compile Cluster Form"><br></p> <h3 id="compile-all-firewalls"><a href="#compile-all-firewalls" class="header-anchor">#</a> Compile All Firewalls</h3> <p>Instead of compiling all firewalls one by one you can save time and do it all together.</p> <p>From the menu option all firewalls and clusters within the managed cloud can be compiled.</p> <p><img src="/manual/assets/img/compile_all.png" alt="Compile All"><br></p> <p>, or using the upper button</p> <p><img src="/manual/assets/img/compile_all-btn.png" alt="Compile All bnt"><br></p> <p>You will be presented a form where you can select the firewalls and clusters you want to compile</p> <p><img src="/manual/assets/img/compile_all_fws-form.png" alt="Compile All Firewalls Form"><br></p> <p>and proceed with the compilation</p> <p><img src="/manual/assets/img/compiled_all_ok.png" alt="Successfully Compiled All"><br></p> <p>See also <a href="/manual/docs/Sections/Firewalls/#compile-one-firewall"> Compile One Firewall </a> section</p> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <h3 id="install-firewall"><a href="#install-firewall" class="header-anchor">#</a> Install Firewall</h3> <p>The security policy you have defined in FWCloud-UI needs to be installed in the firewall (or nodes that make up a firewalls cluster).</p> <div class="custom-block tip"><p class="custom-block-title">Icons</p> <p>An orange <img src="/manual/assets/img/I.png" alt="I"> at the left side of the firewall's name indicates there are changes in the policy pending to be installed</p></div> <p><img src="/manual/assets/img/install_fw.png" alt="Install Firewall"><br></p> <p>Previously to install it you need to compile the policy. This can be done by selecting Compile option in the firewall menu or directly when installing by marking the square box <code>Compile</code>. If the firewall requires policy compilation the checkbox will be checked automatically.</p> <p><img src="/manual/assets/img/install_fw-form.png" alt="Install Firewall Form"><br></p> <p>FWCloud will install the policy compilation script in the destination firewall by means of SSH and using the IP address you have setup in the Firewall configuration. This address can be modified editing the firewall settings.</p> <p>If no interface is set, the firewall will not be reachable and you will get an error.</p> <p><img src="/manual/assets/img/error_no_interfaces.png" alt="Error No Interfaces"><br></p> <p>Before the installation begins you will be asked to supply the SSH username and the password if not saved in the firewall's configuration. For security reasons we recommend not to save it.</p> <p>Once done you can see the result of the installation processes</p> <p><img src="/manual/assets/img/installed-ok.png" alt="Successfully Installed"><br></p> <h3 id="install-a-firewall-cluster"><a href="#install-a-firewall-cluster" class="header-anchor">#</a> Install a Firewall Cluster</h3> <p>If you have a firewall cluster, you do not need to install the rules for the nodes individually, the rules will be compiled once and installed on all nodes in the cluster.</p> <p><img src="/manual/assets/img/install_cluster-form.png" alt="Install Cluster Form"><br></p> <h3 id="install-all-fws"><a href="#install-all-fws" class="header-anchor">#</a> Install All FWs</h3> <p>Instead of installing all firewalls one by one you can save time and do it all together.</p> <p>From the menu option all firewalls and clusters within the managed cloud can be installed.</p> <p><img src="/manual/assets/img/install_all.png" alt="Install All"><br></p> <p>, or using the upper button</p> <p><img src="/manual/assets/img/install_all-btn.png" alt="Install All bnt"><br></p> <p>You can select which firewalls or cluster of firewalls you want to intall</p> <p><img src="/manual/assets/img/install_all-form.png" alt="All Install Form"><br></p> <p>The SSH username and the password of all firewalls will be asked if they are not saved in the firewall's configuration. For security reasons we recommend to not save them.</p> <p>You can review the result of the installation processes</p> <p><img src="/manual/assets/img/install_all-ok.png" alt="All Successfully Installed"><br></p> <p>See also <a href="/manual/docs/Sections/Firewalls/#install-firewall"> How to install the policy of a Firewall </a> section</p> <h2 id="others-actions"><a href="#others-actions" class="header-anchor">#</a> Others actions</h2> <h3 id="edit-firewall"><a href="#edit-firewall" class="header-anchor">#</a> Edit Firewall</h3> <p>You can edit the settings of the firewall by double clicking on the name of the firewall or right click on it and select <code>Edit firewall</code>.</p> <p><img src="/manual/assets/img/edit_fw.png" alt="Edit Firewall"><br></p> <p>A new window with four tabs pops up. The first tab is named &quot;Configuration&quot;. Here you can change the name of your firewall, add a description and choose the compiler is going to be used to generate the security policy. Currently you can choose among the two most popular formats in Linux distributions, the IPTables and NFTables formats.
Also you can select the communication mode from SSH or FWCloud-Agent. If SSH is selected then you can change the username and the password used to access the firewall when installing the policy or the VPN configurations. If you go to FWCloud-Agent instead, you can select the protocol, HTTPS or HTTP, used with the agent and modify the API Key.</p> <p>Next to this field you have the <code>Discover interfaces</code> button. You can use it to discover the interfaces and IP addresses the firewall has. FWCloud-UI will connect to the firewall and it will take you to the next tab showing the network information obtained. And finally in this tab you can select the interface, IP address and port to reach to the firewall. If the FWCloud-Agent is the communication method then you can also test the connection with the agent by pressing the <code>Test</code> button.</p> <p><img src="/manual/assets/img/edit_fw-form-iptables-agent.png" alt="Edit Firewall Tab 1]"><br></p> <p>In the second tab, named &quot;Interfaces/IPs&quot;, you can see a tree with all the network interfaces and IP addresses of the firewall or cluster of firewalls. If the firewall is being configured now it will only show the loopback interface until you perform a discover or manually add more interfaces. When hovering the mouse over an interface name, a pencil icon <img src="/manual/assets/img/pencil.png" alt="pencil"> appears, if you click on it you can modify the properties of the interface or the IP address. In this tab there is also a handy utility to discover the the interfaces and IP addresses that actually your firewall has and copy them into the firewall configuration in FWCloud-UI. See <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a> section upper in this help.</p> <p><img src="/manual/assets/img/fw_edit-tab2.png" alt="Edit Firewall Tab 2"><br></p> <p>In the third tab, &quot;Options&quot; you can set up several firewall options.</p> <p><img src="/manual/assets/img/fw_edit-tab3.png" alt="Edit Firewall Tab 3"><br></p> <p>You can decide if you want a stateless or a stateful firewall. A stateful firewall is able to tract the state of the connections, so you can use the conntrack module and the ctsstate option in the secure policy rules. By default when a new firewall is created in FWCloud-UI the option <code>Stateful firewall</code> is set and the traffic belonging to  established and related connections is allowed by the security policy. This option can also be set at rule level, visit <a href="/manual/docs/Sections/Policy/#edit-rule">Edit rule</a> section.</p> <p>Also you can enable or disable the firewall to forward traffic from one interface to another. By default it is enabled for IP version 4 and disabled for IP version 6.</p> <p>If you are having problems installing the security policy on the firewall checking the option <code>Activate debugging on policy script</code> is helpful for troubleshooting. The code executed and the output of the policy installation script will be displayed.</p> <p><img src="/manual/assets/img/fw_install-x.png" alt="Installation debug"><br></p> <p>With <code>Activate logging in all rules</code> option the traffic of the packets that match the rules of the policy are registered in the syslog file of the firewall. Also a limit of 60 packets per minute is established. The record is prefixed with &quot;RULE ID xxx&quot; where xxx is the number of the rule that is being hit. Logging packets only for an particular rule is also possible, visit <a href="/manual/docs/Sections/Policy/#edit-rule">Edit rule</a> section.</p> <p>When we manage the security policy from FWCloud we have to take into account the rules introduced by third part programs like Docker, CrowdSec or Fail2Ban. Otherwise, when installing the policy from FWCloud, these rules would be deleted and only those that are in FWCloud at the time of compilation and installation would be applied.</p> <p>Docker initially generates a set of securty rules suitable for the containers it runs and the configurations defined for them. If we use FWCloudUI to manage the security policy of the server where we run these containers, the rules automatically generated by Docker are removed when loading the FWCloud policy. And vice versa, Docker will generate IPTables rules that are not included in the security policy defined through our FWCloud console.</p> <p>The best option to avoid these conflicts is to disable the automatic generation of IPTables rules by Docker and generate the security policy that interests us from FWCloud-UI.
For more information visit this <a href="https://fwcloud.net/en/documentation/fwcloud-docker/" target="_blank" rel="noopener noreferrer">link<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>The option <code>Docker compatibility</code> of this tab has a link <a href="https://fwcloud.net/en/documentation/fwcloud-docker/" target="_blank" rel="noopener noreferrer">+info<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that address to section of FWCloud web site giving more detaled informaticon and an example showing how to manage the security policy from FWCloud for a server running two Docker containers.</p> <p>Checking the <code>CrowdSec compatibility</code> option FWClou-UI creates two new special rules that make use of the blacklist maintained by CrowdSec to block suspicious IPs. These rules are created on the INPUT chain and FORWARD chain for both IPv4 and IPv6 policy. They cannot be deleted. To eliminate them, simply uncheck the &quot;CrowdSec Compatibility&quot; box.</p> <p>Next there is a short video using this option:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/71IIKkvFcRg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>When we check the <code>Fail2Ban compatibility</code> option, a special rule is generated in the INPUT chain. It is a hoock script rule that restarts the Fail2Ban service. Fail2Ban at startup reloads its configuration and reads the data from its database and creates the necessary rules in the security policy.</p> <p>In this way the process is automated and Fail2Ban is operational even if we modify the policy and install it in our firewall.</p> <p>The video below shows the use of Fail2Ban compatibility option:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/DlPWUbu43Vs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>The fourth tab is called <code>Plugins</code>. This tab will be active only if the communication method with the firewall, chosen in the first tab, is FWCloud-Agent.</p> <p><img src="/manual/assets/img/fw_edit-tab4.png" alt="Edit Firewall Tab 4"><br></p> <p>We can access the Plugins tab directy from the context menu of the firewall.</p> <p><img src="/manual/assets/img/fw_Plugins.png" alt="Edit Firewall Plugins"><br></p> <p>Other third-party software products can be installed to extend the functionality of the firewalls. Despite not being part of FWCloud, we can control the installation of these security products from FWCloud-UI. In addition, installing or uninstalling them basically consists of checking or unchecking the corresponding box.
You can see a video about this functionality:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/FMh271afcx8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>Let's briefly describe these products:</p> <table><thead><tr><th><img src="/manual/assets/img/openvpn-logo.jpeg" alt="OpenVPN" width="60" height="50"></th> <th style="text-align:left;"><a href="https://openvpn.net/" target="_blank" rel="noopener noreferrer">OpenVPN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>OpenVPN</code> is the name of the open source project that provides secure access to your private, cloud, or on-premises business network. It allows you to create secure point-to-point or site-to-site connections in routed or bridged configurations and remote access installations. It implements both the client application and the server application.</p> <p>The OpenVPN protocol emerged to establish itself as a de facto standard in the open source networking space with over 50 million downloads.</p> <table><thead><tr><th><img src="/manual/assets/img/keepalived-logo.jpeg" alt="Keepalived" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.keepalived.org/" target="_blank" rel="noopener noreferrer">Keepalived<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Keealived</code>'s goal is to provide simple and robust installations for load balancing and high availability for Linux system and Linux-based infrastructures.</p> <p>Keepalived provides frameworks for both load balancing and high availability. Load Balancing is based on the Linux Virtual Server (IPVS) kernel module, which provides layer 4 load balancing. Keepalived implements a set of health checkers to dynamically and adaptively maintain and manage pools of servers with load balance according to its status. While high availability is achieved by Virtual Redundancy Routing Protocol (VRRP)</p> <table><thead><tr><th><img src="/manual/assets/img/geoip-logo.png" alt="GeoIP" width="90" height="50"></th> <th style="text-align:left;"><a href="https://dev.maxmind.com/geoip" target="_blank" rel="noopener noreferrer">GeoIP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>GeoIP</code> are a series of products, from MaxMind, that allow discovering information related to the geographic position of a specific IP address. We can use GeoIP databases, that are are regularly updated, to find the country an IP address or hostname originates from. The Geoip lookup program will return the country in which the indicated IP address is located.</p> <p>They allow us to have an approximate geographical vision of what is going on in the network connections that we are studying.</p> <p>The data can be used to identify high-risk activity in eCommerce payments, platform user activity, incentivized traffic, and more.</p> <p>As more of the world adopts a privacy-focused approach to web usage, IP geolocation fills an essential niche in customer analytics.</p> <table><thead><tr><th><img src="/manual/assets/img/crowdsec-logo.png" alt="CrowdSec" width="70" height="50"></th> <th style="text-align:left;"><a href="https://www.crowdsec.net/" target="_blank" rel="noopener noreferrer">CrowdSec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>CrowdSec</code> is a free, modern, collaborative behavioral detection engine coupled with a global IP reputation network. It's a lightweight open source software that allows you to detect peers behaving maliciously and block them from accessing your systems at various levels (infrastructure, system, application).</p> <p>To achieve this, CrowdSec reads logs from different sources (files, streams...) to analyze, normalize and enrich them before comparing them to threat patterns called scenarios.
Use the strength of the community to detect and stop attacks in real time based on your logs, allowing you to preemptively block known bad guys from accessing your information system.</p> <table><thead><tr><th><img src="/manual/assets/img/ntopng-logo.png" alt="ntopng" width="60" height="60"></th> <th style="text-align:left;"><a href="https://www.ntop.org" target="_blank" rel="noopener noreferrer">ntopng<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>ntopng</code> is the next generation version of the original ntop, a network traffic probe that monitors network usage. ntopng is based on libpcap/PF_RING and it has been written in a portable way in order to virtually run on every Unix platform, MacOS and on Windows as well.</p> <p>It provides a intuitive, encrypted web user interface for the exploration of realtime and historical traffic information. This interface is accessible using port 3000. Let's say the firewall we have installed has the IP address 192.168.1.1, we just have to point our browser to http://192.168.1.1:3000/</p> <table><thead><tr><th><img src="/manual/assets/img/websafety-logo.png" alt="Web Safety Proxy" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.diladele.com/" target="_blank" rel="noopener noreferrer">Web Safety Proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Web Safety</code> is a deep content inspection proxy that has access to actual contents of HTTP requests. This allows it to decrypt, secure and re-encrypt both incoming and outgoing TLS traffic. Questionable content is blocked easily.</p> <p>Intercepted browser request and remote site response get into Web Safety Proxy, are analyzed and access is allowed or denied based on configured policy settings by de administrator. Information about request and response is stored in the database.</p> <p>We access the administration web interface using the URL https://192.161.1.1:8095/ (replacing the IP address for the one that corresponds to our firewall).</p> <table><thead><tr><th><img src="/manual/assets/img/dnssafety-logo.png" alt="DNS Safety Proxy" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.diladele.com/" target="_blank" rel="noopener noreferrer">DNS Safety Proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>DNS Safety filter</code> is a DNS forwarding server (like dnsmasq, unbound, pi-hole) with extensive filtering capabilities. It allows administrator to filter access to domain names by categories, easily block access to user specified domains and provides different access policies for different groups of machines in your network.</p> <p>DNS Safety is supposed to be deployed as primary DNS server in your local network and can forward DNS requests to your ISP's DNS server, Google Public DNS, OpenDNS and other third party DNS providers. Internal DNS requests can be forwarded to internal DNS servers (for example Active Directory domain controllers).</p> <p>The management interface is accessible through https://192.161.1.1:8096/ (changing the IP address).</p> <table><thead><tr><th><img src="/manual/assets/img/ISC-Bind9-logo.jpeg" alt="ISC Bind9" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.isc.org/bind/" target="_blank" rel="noopener noreferrer">ISC Bind9<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p>In the plugins section you can activate <code>ISC Bind9</code>. Almost any Internet connection requires domain name resolution. If the configuration of a DNS server has been considered, you can use FWCloud to facilitate this task. ISC Bind9 is an open source DNS system licensed under the MPL 2.0 license and supported by a large community.</p> <table><thead><tr><th><img src="/manual/assets/img/suricata-logo.jpeg" alt="Suricata" width="80" height="60"></th> <th style="text-align:left;"><a href="https://suricata.io/" target="_blank" rel="noopener noreferrer">Suricata<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Suricata</code> is an open source cybersecurity tool used to monitor system network traffic and is capable of detecting malicious behavior. Suricata was developed and is currently maintained by OSIF (Open Information Security Foundation), a non-profit organization that is committed to keeping Suricata open source forever.</p> <p>Suricata can log HTTP requests, register and store TLS certificates, extract files from streams and store them on disk. Full pcap capture support allows for easy analysis. All of this makes Suricata a powerful engine for your Network Security Monitoring (NSM) ecosystem.</p> <p>Suricata implements a comprehensive signature language to match known threats, policy violations, and malicious behavior. It detects anomalies in the traffic it inspects.</p> <table><thead><tr><th><img src="/manual/assets/img/zeek-logo.png" alt="Zeek" width="80" height="50"></th> <th style="text-align:left;"><a href="https://zeek.org/" target="_blank" rel="noopener noreferrer">Zeek<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Zeek</code> has a long history in the open source and digital security worlds. Vern Paxson began developing the project in the 1990s under the name “Bro”.</p> <p>Zeek is not an active security device, like a firewall or intrusion prevention system. Rather, Zeek sits on a “sensor,” a hardware, software, virtual, or cloud platform that quietly and unobtrusively observes network traffic.</p> <p>Zeek interprets what it sees and creates compact, high-fidelity transaction logs, file content, and fully customized output, suitable for manual review on disk or in a more analyst-friendly tool like a security and information event management (SIEM) system.</p> <table><thead><tr><th><img src="/manual/assets/img/elasticsearch-logo.svg" alt="Elasticsearch" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.elastic.co/what-is/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Elasticsearch</code> is a free, open, and distributed search and analytics engine for all types of data, including textual, numeric, geospatial, structured, and unstructured, with multi-tenancy capabilities, RESTful APIs and JSON-based search engine.</p> <p>Elasticsearch is built on top of Apache Lucene and was first introduced in 2010 by Elasticsearch N.V. (now known as Elastic).</p> <p>Elasticsearch is the core component of the Elastic Stack, a free and open set of tools for data ingestion, enrichment, storage, analysis, and visualization. Commonly referred to as the ELK Stack (for Elasticsearch, Logstash and Kibana)</p> <table><thead><tr><th><img src="/manual/assets/img/kibana-logo.svg" alt="Kibana" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.elastic.co/guide/en/kibana/current/introduction.html" target="_blank" rel="noopener noreferrer">Kibana<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Kibana</code> is a data visualization and management tool for Elasticsearch that provides real-time histograms, line graphs, pie charts, and maps. Kibana also includes advanced applications such as Canvas, which allows users to create custom dynamic infographics based on their data, and Elastic Maps for visualizing geospatial data. It is a user interface that lets you visualize your Elasticsearch data and navigate the Elastic Stack.</p> <p>With Kibana, you can:</p> <p>Search, observe, and protect your data. From discovering documents to analyzing logs to finding security vulnerabilities, Kibana is your portal for accessing these capabilities and more.</p> <p>Analyze your data. Search for hidden insights, visualize what you’ve found in charts, gauges, maps, graphs, and more, and combine them in a dashboard.</p> <p>Manage, monitor, and secure the Elastic Stack. Manage your data, monitor the health of your Elastic Stack cluster, and control which users have access to which features.</p> <table><thead><tr><th><img src="/manual/assets/img/logstash-logo.png" alt="Logstash" width="40" height="50"></th> <th style="text-align:left;"><a href="https://www.elastic.co/guide/en/logstash/current/introduction.html" target="_blank" rel="noopener noreferrer">Logstash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Logstash</code>, one of the core products of the Elastic Stack, is used to aggregate and process data and send it to Elasticsearch. Logstash is an open source, server-side data processing pipeline that enables you to ingest data from multiple sources simultaneously and enrich and transform it before it is indexed into Elasticsearch.</p> <p>Logstash can dynamically unify data from disparate sources and normalize the data into destinations of your choice. Cleanse and democratize all your data for diverse advanced downstream analytics and visualization use cases.</p> <p>While Logstash originally drove innovation in log collection, its capabilities extend well beyond that use case. Any type of event can be enriched and transformed with a broad array of input, filter, and output plugins, with many native codecs further simplifying the ingestion process. Logstash accelerates your insights by harnessing a greater volume and variety of data.</p> <table><thead><tr><th><img src="/manual/assets/img/filebeat-logo.png" alt="Filebeat" width="60" height="60"></th> <th style="text-align:left;"><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-overview.html" target="_blank" rel="noopener noreferrer">Filebeat<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p><code>Filebeat</code> is a lightweight shipper for forwarding and centralizing log data. Installed as an agent on your servers, Filebeat monitors the log files or locations that you specify, collects log events, and forwards them either to Elasticsearch or Logstash for indexing. It is an Elastic Beat. It’s based on the libbeat framework.</p> <p>When you start Filebeat, it starts one or more inputs that look in the locations you’ve specified for log data. For each log that Filebeat locates, Filebeat starts a harvester. Each harvester reads a single log for new content and sends the new log data to libbeat, which aggregates the events and sends the aggregated data to the output that you’ve configured for Filebeat.</p> <table><thead><tr><th><img src="/manual/assets/img/ISC-DHCP-logo.jpeg" alt="ISC DHCP" width="60" height="50"></th> <th style="text-align:left;"><a href="https://www.isc.org/dhcp/" target="_blank" rel="noopener noreferrer">ISC DHCP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></th></tr></thead> <tbody></tbody></table> <p>Dynamic Host Configuration Protocol (DHCP) is a network protocol used to automatically assign IP addresses and basic settings to devices and computers on the local network that request them, reducing configuration time and facilitating administration. .</p> <p><code>ISC DHCP</code> offers a complete open source solution for implementing DHCP servers, relay agents and clients. ISC DHCP supports both IPv4 and IPv6, and is suitable for use in high-volume, high-reliability applications.</p> <p>The fifth tab is called <code>NGFW Tools</code>. Again this tab will be active only if the communication method with the firewall, chosen in the first tab, is FWCloud-Agent.</p> <p><img src="/manual/assets/img/fw_edit-tab5.png" alt="Edit Firewall Tab 5"><br></p> <p>We can access the NGFW Tools tab directy from the context menu of the firewall.</p> <p><img src="/manual/assets/img/fw_NGFW-Tools.png" alt="Edit Firewall NGFW Tools"><br></p> <p>From this tab we can access the administration of the NGFW features.
By clicking on the buttons we will be redirected in the browser. For the buttons to be active, it is necessary to have previously activated the corresponding plugins described in the previous tab</p> <h3 id="edit-a-cluster-of-firewalls"><a href="#edit-a-cluster-of-firewalls" class="header-anchor">#</a> Edit a Cluster of Firewalls</h3> <p>You can edit the settings of a cluster of firewalls, like name, description or compiler by double clicking on the name of the cluster or right click on it and select <code>Edit</code>.</p> <p>A new window with three tabs pops up. Note that now in the &quot;Configuration&quot; tab you can see the nodes that make up the cluster. Here you can change their names, the credentials to access them, and their interfaces, IP addresses and ports. Also you can completely remove a node by pressing the <img src="/manual/assets/img/minus.png" alt="-"> button, or add more nodes by pressing the <img src="/manual/assets/img/plus.png" alt="+"> button.</p> <p><img src="/manual/assets/img/edit_cluster-tab1-nftables-mix.png" alt="Edit Firewall Cluster Tab 1"><br></p> <p>Although normally all nodes of a cluster have the same communication method, this is not mandatory and you can choose with method to user for each node, like in the image above. You can change the method by pressing the <img src="/manual/assets/img/ssh-icon.png" alt="ssh"> button or the <img src="/manual/assets/img/FWCloud-agent-icon.png" alt="agent"> button. If FWCloud-Agent is picked you can test the communication by pressing the <img src="/manual/assets/img/plug-icon.png" alt="plug"> button.</p> <p>The interfaces of the nodes can be discovered by pressing the <img src="/manual/assets/img/mag.glass.png" alt="Magnifying glass"> button</p> <p>In the second tab, named &quot;Interfaces/IPs&quot;, you can see a tree with all network interfaces and associated IP addresses. You can edit and modify them quite similar as you have seen previously when editing a firewall.</p> <p><img src="/manual/assets/img/edit_cluster-tab2.png" alt="Edit Firewall Clustert Tab 2"><br></p> <p>However the difference here is that when you press <code>Discover</code> button a new form is presented in order to select from which node of the cluster members you want to perform the discover</p> <p><img src="/manual/assets/img/select_node.png" alt="Select Clustert Member"><br></p> <p>In the third tab, &quot;Options&quot;, you have the same options you have for individual firewalls explained before.
This the same for the fourth tab, &quot;Plugins&quot;.</p> <h3 id="policy-script"><a href="#policy-script" class="header-anchor">#</a> Policy script</h3> <p>The security policy is installed on the routers through a script. From the FWCloud-UI you can view and download the content of this script.</p> <p><img src="/manual/assets/img/fw_show-script.png" alt="Show policy script"><br></p> <p>The script is created or modified every time the policy is compiled. If the firewall has never been compiled you will get a warning when you try to display the policy script</p> <p><img src="/manual/assets/img/fw_script-warning.png" alt="Show policy warning"><br></p> <p>Right after the compilation of the policy has finished you can display the policy script</p> <p><img src="/manual/assets/img/fw_script-form-show.png" alt="Policy compiled"><br></p> <p>A popup windows showing the policy script is displayed</p> <p><img src="/manual/assets/img/fw_script-display.png" alt="Policy displayed"><br></p> <p>From this windows you have the option to copy it to the clipboard or download it as a text file.</p> <p>Also from the context menu of the firewall you can download a copy of the policy script.</p> <p><img src="/manual/assets/img/fw_download-script.png" alt="Download policy script"><br></p> <p>To be able to download the script the firewall has to be compiled previously.</p> <p>You also have the option to download the script immediately after the compilation has been done</p> <p><img src="/manual/assets/img/fw_script-form-download.png" alt="Download policy script"><br></p> <p>Next you have video showin this feature</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/k7PbaNiV2i0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h3 id="clone-firewall"><a href="#clone-firewall" class="header-anchor">#</a> Clone Firewall</h3> <p>If you are going to install a new firewall and it will have several similar characteristics and features to another one, you can make a clone of the actual firewall and configure the different parts to fit your new firewall.</p> <p><img src="/manual/assets/img/fw_clone.png" alt="Clone Firewall"><br></p> <p>This will ask you to name the new firewall and will create a copy.</p> <p><img src="/manual/assets/img/fw_clone-form.png" alt="Clone Firewall Form"><br></p> <h3 id="convert-to-cluster"><a href="#convert-to-cluster" class="header-anchor">#</a> Convert to Cluster</h3> <p>In order to have HA you can a have a cluster of firewalls. In FWCloud-UI you will manage the policy rules and the VPN connections for the cluster, although you can set specific rules that only affect to particular node of the cluster. If you have been using a firewall in FWCloud and now it belongs to a cluster you can convert it into a single node cluster.</p> <p><img src="/manual/assets/img/fw_convert.png" alt="Convert to Cluster"><br></p> <p>You will need to confirm the action.</p> <p><img src="/manual/assets/img/fw_convert-form.png" alt="Convert to Cluster Confirmation"><br></p> <p>It will be converted into a cluster of firewalls with only one node. You can edit the properties of the cluster and add the rest of nodes.</p> <p>Also a cluster of firewalls can be converted into a firewall if needed.</p> <h3 id="delete-cluster"><a href="#delete-cluster" class="header-anchor">#</a> Delete Cluster</h3> <p>You can remove a cluster of firewalls from FWCloud-UI by means of the corresponding menu option.</p> <p><img src="/manual/assets/img/delete_cluster.png" alt="Delete Firewall"><br></p> <p>It requires confirmation.</p> <p><img src="/manual/assets/img/delete_cluster-form.png" alt="Delete Firewall Form"><br></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If any of the cluster objects (interfaces, IPs, VPNs, etc.) are in use by other firewalls/clusters policy, it will not be possible to remove it and an error message will be displayed</p></div> <h3 id="delete-firewall"><a href="#delete-firewall" class="header-anchor">#</a> Delete Firewall</h3> <p>You can remove a firewall from FWCloud-UI from the contextual menu.</p> <p><img src="/manual/assets/img/delete_fw.png" alt="Delete Firewall"><br></p> <p>It requires confirmation.</p> <p><img src="/manual/assets/img/delete_fw-form.png" alt="Delete Firewall Form"><br></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If any of the cluster objects (interfaces, IPs, VPNs, etc.) are in use by other firewalls/clusters policy, it will not be possible to remove it and an error message will be displayed</p></div> <h2 id="import-export"><a href="#import-export" class="header-anchor">#</a> Import / Export</h2> <h3 id="import-wizard"><a href="#import-wizard" class="header-anchor">#</a> Import wizard</h3> <p>FWCloud-UI allows importing the secure policy from other firewalls platforms based in Netfilter/iptables. The recommended way to import a firewall is using the <code>Import wizard</code>.</p> <p>You can invoke this wizard from the contextual menu of &quot;Firewalls/cluster&quot;</p> <p><img src="/manual/assets/img/import_wizard-menu.png" alt="Import Wizard Menu"><br></p> <p>or pressing the upper button <code>Import wizard</code></p> <p><img src="/manual/assets/img/import_wizard-button.png" alt="Import Wizard Button"><br></p> <p>This wizard will guide you to all the necessary steps to create a new firewall or cluster of firewall importing the policy from another firewall or cluster, but also importing the necessary objects to FWCloud-UI infrastructure.
It will connect to the firewall to be imported using SSH. It is necessary that FWCloud-UI can have root access to the firewall.</p> <p><img src="/manual/assets/img/import_wizard-1.png" alt="Import Wizard Step 1"><br></p> <p>You need to specify if you are importing from a firewall or from a cluster of firewalls, and write the name of the new firewall or cluster</p> <p><img src="/manual/assets/img/import_wizard-2-fw.png" alt="Import Wizard Step 2 FW"><br> <br></p> <p>If you are importing from a cluster, you also have to provide the name for any of the nodes of the cluster. The master node name is required. You can add as many nodes as your cluster have pressing the <img src="/manual/assets/img/plus.png" alt="Add node"> button. After adding a node if you want to remove just press the <img src="/manual/assets/img/minus.png" alt="Remove node"> button next to its name.</p> <p><img src="/manual/assets/img/import_wizard-2-cluster.png" alt="Import Wizard Step 2 cluster"><br></p> <p>Next you have to provide the IP address, the username and the password to access the firewall you are importing from. If you are importing from a cluster you need to provide the address and the credentials for each node.</p> <p><img src="/manual/assets/img/import_wizard-3-ssh.png" alt="Import Wizard Step 3"><br></p> <p>When using SSH remember the user needs to be able to execute privileged commands in the remote firewall to collect the necessary information, or use FWCLoud-Agent method:</p> <p><img src="/manual/assets/img/import_wizard-3-agent.png" alt="Import Wizard Step 3"><br></p> <p>and press <code>Discover interfaces</code> button.</p> <p>FWClouds connects to the remote device and gets the name, the MAC and IP address (for IP version 4 and version 6) for each interface it has. By doing this FWCloud-UI is able to create the new interfaces in the new firewall you are creating and use them in the policy rules. You are presented a form with the collected information and you can select with interfaces and IP addresses you want to be included in the new firewall. For more information about this process review <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a> section upper in this manual.</p> <p><img src="/manual/assets/img/import_wizard-3-autodiscover.png" alt="Import Wizard Step 3 Autodiscover"><br></p> <p>Next you need to confirm the action. If you do the wizard will proceed and you can no go back in the wizard or cancel the action, although onces finished you always can delete the new created firewall or cluster if you regret of the import.</p> <p><img src="/manual/assets/img/import_wizard-3-confirm.png" alt="Import Wizard Step 3 Confirmation"><br></p> <p>The next step is a summary of the import and a warning that the security policy should always be reviewed before installing it, as this is an automatic process.</p> <p><img src="/manual/assets/img/import_wizard-4.png" alt="Import Wizard Step 4"><br></p> <p>If no problems occurs during the process the final form is displayed</p> <p><img src="/manual/assets/img/import_wizard-5.png" alt="Import Wizard Step 5"><br></p> <p>If you have imported from a firewall or cluster of firewalls created using FWCloud-UI all the visual features that FWCloud-UI has, like the background color of the rules or the grouping of rules, will also be included in the new firewall or cluster.</p> <p>In the next video you can see all these concepts about Import wizard when importing a firewall:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/FpnKTOOZdgA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>Now we show another example of using this wizard but this time we are going to import a firewall cluster:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/ZIwnvM5uVoc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h3 id="iptables-save-import"><a href="#iptables-save-import" class="header-anchor">#</a> IPTables-save import</h3> <p>If you now what you are doing you can import the firewall manually. In this case create first the new firewall or cluster and then select <code>iptables-save import</code> from its contextual menu.</p> <p>You will be presented a form with options to choose the way to import. This form changes dynamically according to the options you go for.</p> <p>You can paste the output of the command iptables-save command executed in the remote devices. This is useful if you do not have access from the FWCloud-UI computer to the remote firewall.</p> <p><img src="/manual/assets/img/iptables_save-import-form-paste-agent.png" alt="IPTables-save import form 1"><br></p> <p>You can upload a file you get as a result of a previous export.</p> <p><img src="/manual/assets/img/iptables_save-import-form-upload-agent.png" alt="IPTables-save import form 2"><br></p> <p>And you can make FWCloud to connect to the remote devices as it was in the case of the use of the &quot;Import wizard&quot;</p> <p><img src="/manual/assets/img/iptables_save-import-form-connect-agent.png" alt="IPTables-save import form 3"><br></p> <p>In all three cases you need to agree the warning that the current security policy of the firewall or cluster is going to be replaced by the new one.</p> <h3 id="iptables-save-export"><a href="#iptables-save-export" class="header-anchor">#</a> IPTables-save export</h3> <p>The entire secure policy can be exported. From the contextual menu of the firewall select <code>Iptables-save export</code> and provide the IP address and credential of the firewall you want to export</p> <p><img src="/manual/assets/img/iptables_save-export-form-agent.png" alt="IPTables-save export form"><br></p> <p>You can copy the result to the clipboard in order to quick import it in another FWCloud firewall or download it to a file to save it in a secure place and used later on.</p> <p><img src="/manual/assets/img/iptables_save-export-result.png" alt="IPTables-save export result"><br></p> <p>When exporting from FWCloud-UI the visual features are also included, but the generated file can also be used in any iptables-save format compatible firewall.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/manual/assets/js/app.7d41c291.js" defer></script><script src="/manual/assets/js/2.54df04f9.js" defer></script><script src="/manual/assets/js/18.4ea0a655.js" defer></script>
  </body>
</html>
