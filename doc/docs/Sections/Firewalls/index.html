<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Firewalls | FWCloud-UI</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="User&#39;s manual">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/manual/assets/css/0.styles.726cd4c7.css" as="style"><link rel="preload" href="/manual/assets/js/app.bd85ee5e.js" as="script"><link rel="preload" href="/manual/assets/js/2.81c34002.js" as="script"><link rel="preload" href="/manual/assets/js/1.9918cdf1.js" as="script"><link rel="preload" href="/manual/assets/js/38.361673f4.js" as="script"><link rel="prefetch" href="/manual/assets/js/10.18e280b2.js"><link rel="prefetch" href="/manual/assets/js/11.532fb960.js"><link rel="prefetch" href="/manual/assets/js/12.67238036.js"><link rel="prefetch" href="/manual/assets/js/13.d9bc12e0.js"><link rel="prefetch" href="/manual/assets/js/14.c1e18cc4.js"><link rel="prefetch" href="/manual/assets/js/15.fbba562b.js"><link rel="prefetch" href="/manual/assets/js/16.4574fd2a.js"><link rel="prefetch" href="/manual/assets/js/17.9e69dfdb.js"><link rel="prefetch" href="/manual/assets/js/18.99e6bfc2.js"><link rel="prefetch" href="/manual/assets/js/19.58d0e401.js"><link rel="prefetch" href="/manual/assets/js/20.d718e0a8.js"><link rel="prefetch" href="/manual/assets/js/21.4d2eb33f.js"><link rel="prefetch" href="/manual/assets/js/22.502e27ce.js"><link rel="prefetch" href="/manual/assets/js/23.170ad083.js"><link rel="prefetch" href="/manual/assets/js/24.64a9493f.js"><link rel="prefetch" href="/manual/assets/js/25.362e487a.js"><link rel="prefetch" href="/manual/assets/js/26.c6a2aeaa.js"><link rel="prefetch" href="/manual/assets/js/27.4fc045e1.js"><link rel="prefetch" href="/manual/assets/js/28.c9e64aad.js"><link rel="prefetch" href="/manual/assets/js/29.8860e752.js"><link rel="prefetch" href="/manual/assets/js/3.244f0799.js"><link rel="prefetch" href="/manual/assets/js/30.a377e902.js"><link rel="prefetch" href="/manual/assets/js/31.3092c650.js"><link rel="prefetch" href="/manual/assets/js/32.ec1f5379.js"><link rel="prefetch" href="/manual/assets/js/33.e63508dc.js"><link rel="prefetch" href="/manual/assets/js/34.ba49c4ba.js"><link rel="prefetch" href="/manual/assets/js/35.01358bce.js"><link rel="prefetch" href="/manual/assets/js/36.e56b8664.js"><link rel="prefetch" href="/manual/assets/js/37.28b031ab.js"><link rel="prefetch" href="/manual/assets/js/39.f4ed5897.js"><link rel="prefetch" href="/manual/assets/js/4.db06a48d.js"><link rel="prefetch" href="/manual/assets/js/40.55b31cee.js"><link rel="prefetch" href="/manual/assets/js/41.b623e49d.js"><link rel="prefetch" href="/manual/assets/js/42.db61dfeb.js"><link rel="prefetch" href="/manual/assets/js/43.2f639234.js"><link rel="prefetch" href="/manual/assets/js/44.2b5a1587.js"><link rel="prefetch" href="/manual/assets/js/45.75d65825.js"><link rel="prefetch" href="/manual/assets/js/46.97d1542c.js"><link rel="prefetch" href="/manual/assets/js/47.eb9a4631.js"><link rel="prefetch" href="/manual/assets/js/48.31f32cc7.js"><link rel="prefetch" href="/manual/assets/js/49.d683a3e8.js"><link rel="prefetch" href="/manual/assets/js/5.caca6451.js"><link rel="prefetch" href="/manual/assets/js/50.b62a3343.js"><link rel="prefetch" href="/manual/assets/js/51.502f044e.js"><link rel="prefetch" href="/manual/assets/js/52.edeb0c04.js"><link rel="prefetch" href="/manual/assets/js/53.18fe2aee.js"><link rel="prefetch" href="/manual/assets/js/54.a790c127.js"><link rel="prefetch" href="/manual/assets/js/55.3c60ad94.js"><link rel="prefetch" href="/manual/assets/js/56.d5726f03.js"><link rel="prefetch" href="/manual/assets/js/57.aa58712d.js"><link rel="prefetch" href="/manual/assets/js/58.5c567535.js"><link rel="prefetch" href="/manual/assets/js/59.b728d18e.js"><link rel="prefetch" href="/manual/assets/js/6.963cb6f5.js"><link rel="prefetch" href="/manual/assets/js/7.f5c742a4.js"><link rel="prefetch" href="/manual/assets/js/vendors~docsearch.cc58001a.js">
    <link rel="stylesheet" href="/manual/assets/css/0.styles.726cd4c7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/manual/" class="home-link router-link-active"><img src="/manual/assets/img/fwcloud_q.png" alt="FWCloud-UI" class="logo"> <span class="site-name can-hide">FWCloud-UI</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/manual/docs/Sections/Introduction/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/manual/docs/Sections/FWClouds/" class="nav-link">
  FWClouds
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Firewalls
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Plugins/" class="nav-link">
  Plugins
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Agent/" class="nav-link">
  Agent
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Objects/" class="nav-link">
  Objects
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Policy/" class="nav-link">
  Policy
</a></div><div class="nav-item"><a href="/manual/docs/Sections/VPN/" class="nav-link">
  VPN
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Routing/" class="nav-link">
  Routing
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/manual/docs/Sections/Introduction/" class="nav-link">
  Introduction
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Configuration/" class="nav-link">
  Configuration
</a></div><div class="nav-item"><a href="/manual/docs/Sections/FWClouds/" class="nav-link">
  FWClouds
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Firewalls
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Plugins/" class="nav-link">
  Plugins
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Agent/" class="nav-link">
  Agent
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Objects/" class="nav-link">
  Objects
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Policy/" class="nav-link">
  Policy
</a></div><div class="nav-item"><a href="/manual/docs/Sections/VPN/" class="nav-link">
  VPN
</a></div><div class="nav-item"><a href="/manual/docs/Sections/Routing/" class="nav-link">
  Routing
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Firewalls</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/manual/docs/Sections/Firewalls/" aria-current="page" class="active sidebar-link">Firewalls</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-firewall-cluster" class="sidebar-link">New firewall/Cluster</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-firewall" class="sidebar-link">New Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-cluster-of-firewalls" class="sidebar-link">New Cluster of Firewalls</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#new-folder" class="sidebar-link">New Folder</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#firewall-interfaces" class="sidebar-link">Firewall Interfaces</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#interfaces" class="sidebar-link">Interfaces</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#autodiscover" class="sidebar-link">Autodiscover</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile" class="sidebar-link">Compile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-one-firewall" class="sidebar-link">Compile One Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-a-firewall-cluster" class="sidebar-link">Compile a Firewall Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#compile-all-firewalls" class="sidebar-link">Compile All Firewalls</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install" class="sidebar-link">Install</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-firewall" class="sidebar-link">Install Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-a-firewall-cluster" class="sidebar-link">Install a Firewall Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#install-all-fws" class="sidebar-link">Install All FWs</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#others-actions" class="sidebar-link">Others actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#edit-firewall" class="sidebar-link">Edit Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#edit-a-cluster-of-firewalls" class="sidebar-link">Edit a Cluster of Firewalls</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#policy-script" class="sidebar-link">Policy script</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#clone-firewall" class="sidebar-link">Clone Firewall</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#convert-to-cluster" class="sidebar-link">Convert to Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#delete-cluster" class="sidebar-link">Delete Cluster</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#delete-firewall" class="sidebar-link">Delete Firewall</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#import-export" class="sidebar-link">Import / Export</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#import-wizard" class="sidebar-link">Import wizard</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#iptables-save-import" class="sidebar-link">IPTables-save import</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#iptables-save-export" class="sidebar-link">IPTables-save export</a></li></ul></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#system" class="sidebar-link">System</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#dhcp" class="sidebar-link">DHCP</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#keepalived" class="sidebar-link">Keepalived</a></li><li class="sidebar-sub-header"><a href="/manual/docs/Sections/Firewalls/#haproxy" class="sidebar-link">HAProxy</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="firewalls"><a href="#firewalls" class="header-anchor">#</a> Firewalls</h1> <h2 id="new-firewall-cluster"><a href="#new-firewall-cluster" class="header-anchor">#</a> New firewall/Cluster</h2> <h3 id="new-firewall"><a href="#new-firewall" class="header-anchor">#</a> New Firewall</h3> <p>To create a new firewall just right click over the <code>Firewalls/clusters</code> tree root node and select <code>New firewall</code>from the menu.</p> <p><img src="/manual/assets/img/new_fw.png" alt="New Firewall"><br></p> <p>You will presented a form in which you should write the name of your new firewall. Also you can fill in the <code>Description</code>, and select the compiler.</p> <p>In the current version you can choose from the IPTables and NFTables as compiler formats. IPTables format is selected by default.</p> <p>Finally select the communication method to be used:</p> <p><img src="/manual/assets/img/new_fw-form-iptables-ssh.png" alt="New Firewall Form"><br></p> <p>FWCloud requires access to the firewall for managing it. This communication between FWCloud and the new firewall can be carried out in two ways: <code>SSH</code> and <code>FWCloud-Agent</code>. Each of them uses a different authentication mechanism.</p> <div class="custom-block tip"><p class="custom-block-title">SSH / FWCloud-Agent credentials</p> <p>In both methods the credentials sent from FWCloud-UI to FWCloud-API encrypted using strong PGP public key cryptography with key pairs generated on the fly for each session</p></div> <p>In the following sections we describe these two methods:</p> <h4 id="ssh-communication"><a href="#ssh-communication" class="header-anchor">#</a> SSH Communication</h4> <p>Communication via SSH protocol is the simplest since it does not require you to carry out any installation on the firewall to be managed, but it has the disadvantage that you are using a service such as SSH that allows full access to the managed firewall.</p> <p>Using this method when FWCloud needs access to this firewall it will use the SSH <code>User</code> and <code>Password</code> credentials defined in the firewall form. If you don't supply these credentials, they will be requested when needed.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For security you can keep the password field blank and the password will be asked every time when needed</p></div> <p><img src="/manual/assets/img/new_fw-form-iptables-ssh.png" alt="New Firewall Form"><br></p> <p>The security policy is loaded into the firewall using a SSH connection. Therefore, you need to have SSH access from the FWCloud server to the destination firewall. For this connection the IP address assigned to the interface configured in the firewall will be used.</p> <p>If your firewall is outside your premises, just use SSH over a VPN connection. In the VPN section you can see how easy is to create a VPN infrastructure using FWCloud-UI.</p> <h4 id="fwcloud-agent-communication"><a href="#fwcloud-agent-communication" class="header-anchor">#</a> FWCloud-Agent communication</h4> <p>By the other hand the communication option through <a href="/manual/docs/Sections/Agent/"> FWcloud-Agent </a> is the most recommended, since it simplifies and optimizes communication with the managed firewall.</p> <p>It is a service that is installed on the firewall through which the FWCloud console carries out the necessary actions on the managed firewalls. This service is installed using the .deb or .rpm packages corresponding to the Linux distribution that you are using. See <a href="/manual/docs/Sections/Agent/#installation"> FWcloud-Agent installation </a> for more information. Also you have a video demonstration at the bottom of that section.</p> <p>FWCloud-Agent improves security in the FWCloud – FireWalls interaction, since it does not require SSH credentials any more, instead of it an API Key is used. This key is automatically generated during the package installation process in the firewall.</p> <p>In addition, it is possible to restrict access to this service only from the IP of the FWCloud console.</p> <p>Using FWCloud-Agent instead of SSH also means that you restrict the actions that can be done on the firewall only to those that the FWCloud-Agent service allows. That is, you are not using a general scope protocol like SSH that allows you to do much more than what is needed in the FWCloud – FireWalls communication.</p> <p>Another additional advantage of using FWCloud-Agent is that it allows extra functionalities, such as the <a href="/manual/docs/Sections/VPN/#vpn-connection-history"> history of VPN connections </a>.</p> <p><img src="/manual/assets/img/new_fw-form-iptables-agent.png" alt="New Firewall Form"><br></p> <p>In both cases the firewall settings can be modified at any moment by double clicking the firewall or by right click and selecting <code>Edit firewall</code> from the context menu.</p> <p><img src="/manual/assets/img/edit_fw.png" alt="Edit Firewall"><br></p> <p>By editing the firewall settings you can select which interface, and IP address FWCloud-UI will use to access the firewall.</p> <p><img src="/manual/assets/img/edit_fw-form-iptables-ssh.png" alt="Edit Firewall Form"><br></p> <h3 id="new-cluster-of-firewalls"><a href="#new-cluster-of-firewalls" class="header-anchor">#</a> New Cluster of Firewalls</h3> <p>To create a new cluster of firewalls just right click and select <code>New cluster</code> from the context menu.</p> <p><img src="/manual/assets/img/new_cluster.png" alt="New Cluster"><br></p> <p>Give a name to the cluster and add as many nodes as your cluster has with their credentials and save the changes.</p> <p><img src="/manual/assets/img/new_cluster-form-iptables-mix.png" alt="New Cluster Form"><br></p> <div class="custom-block tip"><p class="custom-block-title">Communication method</p> <p>Note the icon on the left of the name of the nodes.
The communication method can be SSH or FWCloud-Agent, and not all nodes need to use the same method.</p></div> <p>The cluster settings can by modified at any time by double clicking on the cluster name or just right click and select <code>Edit</code> from the context menu.</p> <p>Also the setting of any of the nodes can be changed by double clicking over the node name.</p> <h3 id="new-folder"><a href="#new-folder" class="header-anchor">#</a> New Folder</h3> <p>For organizational purposes <code>Folders</code> can be created. Inside them you can place your firewalls, clusters of firewalls and even more folders, just drag an drop.</p> <p>Folders as many other elements in the FWCloud-UI can be collapsed of expanded to better focus in the parts you are working on.</p> <p>You can rename or remove any folder. In order to remove a folder it has to be empty.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>In order to remove a folder it needs to be empty</p></div> <h2 id="firewall-interfaces"><a href="#firewall-interfaces" class="header-anchor">#</a> Firewall Interfaces</h2> <h3 id="interfaces"><a href="#interfaces" class="header-anchor">#</a> Interfaces</h3> <p>When configuring the firewall or firewalls cluster you have to set up its network interfaces.</p> <p>You do not need to set up all interfaces, for simplicity you only need to define the ones that are going to be used by the firewall's policy. But in order to be able to install the policy in the firewall, at least one interface needs to be defined. The loopback interface is automatically defined when a new firewall is created. This can be used if FWCloud and the firewall you are configuring are going to be in the same device. To select which interface it will use edit the settings of the firewall. See <a href="/manual/docs/Sections/Firewalls/#new-firewall"> Firewall </a>.</p> <p>To add a new interface just right click over <code>Interfaces</code> and select <code>New interface</code>.</p> <p><img src="/manual/assets/img/new_interface.png" alt="New Interface"><br></p> <p>A form pops up, where you can set up the object name, that is the interface names like eth0 or ens1, a label, the MAC address and a comment. Only the interface name is mandatory. Since this name can be included in the policy please use the real name of your device, if not the policy rules affected will not do what they are intended to do.</p> <p><img src="/manual/assets/img/new_interface-form.png" alt="New Interface Form"><br></p> <div class="custom-block danger"><p class="custom-block-title">The name of interface matters</p> <p>The name of the interface can be used in some of yours security policy rules</p></div> <div class="custom-block tip"><p class="custom-block-title">LABEL your interfaces</p> <p>If you want something more informative than the name of the interface then use the label field. Example labels: WAN1, WAN2, DMZ, LAN1, LAN2, etc.</p></div> <p>In order to simplify this tedious process of firewall interfaces and IP addresses creation, FWCloud has a very powerful feature called <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a>. It makes possible to connect to the firewall by means of an SSH connection and automatically get and create in FWCloud all the interfaces and IP addresses that it has.</p> <p>Once interfaces are added, they can be edited, duplicated or deleted. Right click on the interface name to get the context menu.
In this menu there is also a convenient action called <code>Where use</code>. It will head you to the policy rules or objects that use the selected interface. It comes very handy to find a rule.</p> <p>The interfaces can have configured IP addresses. They are set up by right clicking over the interface and selecting <code>New IP address</code></p> <p><img src="/manual/assets/img/new_ip.png" alt="New IP Address"><br></p> <p><img src="/manual/assets/img/new_ip-form.png" alt="New IP Address Form"><br></p> <h3 id="autodiscover"><a href="#autodiscover" class="header-anchor">#</a> Autodiscover</h3> <p>FWCloud has a very handy utility for the automatic discovery of the interfaces and IP addresses a firewall actually has and transfer them into the FWCloud configuration. When your are doing the initial configuration it can save you a lot of time and more importantly it avoids any misspelling in the data.</p> <div class="custom-block tip"><p class="custom-block-title">New interfaces or IPs</p> <p>You can use the &quot;Autodiscover&quot; feature every time you add new interfaces and/or IPs to your firewall/cluster as an easy way to incorporate them to FWCloud</p></div> <p>To access this utility double click on the firewall name and go to the <code>Interfaces/IPs</code> tab in the pop up window.</p> <p><img src="/manual/assets/img/fw_edit-tab2.png" alt="Edit Firewall Tab 2"><br></p> <p>Select the filters you want to apply and press <code>Discover</code> button. On the left side the new items discovered according to the filters applied will appear in a tree-shaped representation.</p> <p><img src="/manual/assets/img/discover-form1.png" alt="Discover select"><br></p> <p>If you hover the mouse over an interface name, a pencil icon <img src="/manual/assets/img/pencil.png" alt="pencil"> appears, if you click on it you can modify the properties of the interface or the IP address.</p> <p>It is also possible from this section to select the IP that will be used for firewall management. If you are in a cluster, you will be able to select the installation interface an IP address for each cluster's node.</p> <p>In the &quot;Autodiscover&quot; tree select the items that you want to incorporate in your FWCloud firewall and, when you press the <code>Save changes</code> button, all the changes will be applied to the firewall/cluster you are editing.</p> <p><img src="/manual/assets/img/discover-form2.png" alt="Discover selected"><br></p> <p>A new windows will show a summary of the actions done and the new interfaces and IP addresses are now part of your firewall configuration. You can edit them or do all the actions interfaces allows.</p> <p><img src="/manual/assets/img/discover-summary.png" alt="Discover summary"><br></p> <p>Let's now see the &quot;Autodiscover&quot; utility in action:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/9HWP_wJl1Oc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>As we have explained this utility is quite useful using it on firewall clusters:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/R5hlAar0d-8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h2 id="compile"><a href="#compile" class="header-anchor">#</a> Compile</h2> <h3 id="compile-one-firewall"><a href="#compile-one-firewall" class="header-anchor">#</a> Compile One Firewall</h3> <p>The policy rules of the firewall need to be compiled prior to be installed into the firewall. That is, you are managing the firewall policy offline and, when ready, you can upload it to the corresponding firewall or firewalls cluster nodes.</p> <div class="custom-block tip"><p class="custom-block-title">Icons</p> <p>An orange <img src="/manual/assets/img/C.png" alt="C"> at the left of the firewall's name indicates that the firewall policy needs to be compiled</p></div> <p>This action will generate all IPTables/NFTables rules and chains needed by the policy specified graphically in the policy panel.</p> <p><img src="/manual/assets/img/compile_fw.png" alt="Compile Firewall"><br></p> <p>, and hit next</p> <p><img src="/manual/assets/img/compile_fw-form.png" alt="Compile Firewall Form"><br></p> <p>If no problems occur a green message will show the success.</p> <p><img src="/manual/assets/img/compiled_ok.png" alt="Successfully Compiled"><br></p> <h3 id="compile-a-firewall-cluster"><a href="#compile-a-firewall-cluster" class="header-anchor">#</a> Compile a Firewall Cluster</h3> <p>If you have a firewall cluster, you do not need to compile the rules for the nodes individually, the rules will be compiled once and installed on all nodes in the cluster.</p> <p><img src="/manual/assets/img/compile_cluster-form.png" alt="Compile Cluster Form"><br></p> <h3 id="compile-all-firewalls"><a href="#compile-all-firewalls" class="header-anchor">#</a> Compile All Firewalls</h3> <p>Instead of compiling all firewalls one by one you can save time and do it all together.</p> <p>From the menu option all firewalls and clusters within the managed cloud can be compiled.</p> <p><img src="/manual/assets/img/compile_all.png" alt="Compile All"><br></p> <p>, or using the upper button</p> <p><img src="/manual/assets/img/compile_all-btn.png" alt="Compile All bnt"><br></p> <p>You will be presented a form where you can select the firewalls and clusters you want to compile</p> <p><img src="/manual/assets/img/compile_all_fws-form.png" alt="Compile All Firewalls Form"><br></p> <p>and proceed with the compilation</p> <p><img src="/manual/assets/img/compiled_all_ok.png" alt="Successfully Compiled All"><br></p> <p>See also <a href="/manual/docs/Sections/Firewalls/#compile-one-firewall"> Compile One Firewall </a> section</p> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <h3 id="install-firewall"><a href="#install-firewall" class="header-anchor">#</a> Install Firewall</h3> <p>The security policy you have defined in FWCloud-UI needs to be installed in the firewall (or nodes that make up a firewalls cluster).</p> <div class="custom-block tip"><p class="custom-block-title">Icons</p> <p>An orange <img src="/manual/assets/img/I.png" alt="I"> at the left side of the firewall's name indicates there are changes in the policy pending to be installed</p></div> <p><img src="/manual/assets/img/install_fw.png" alt="Install Firewall"><br></p> <p>Previously to install it you need to compile the policy. This can be done by selecting Compile option in the firewall menu or directly when installing by marking the square box <code>Compile</code>. If the firewall requires policy compilation the checkbox will be checked automatically.</p> <p><img src="/manual/assets/img/install_fw-form.png" alt="Install Firewall Form"><br></p> <p>FWCloud will install the policy compilation script in the destination firewall by means of SSH and using the IP address you have setup in the Firewall configuration. This address can be modified editing the firewall settings.</p> <p>If no interface is set, the firewall will not be reachable and you will get an error.</p> <p><img src="/manual/assets/img/error_no_interfaces.png" alt="Error No Interfaces"><br></p> <p>Before the installation begins you will be asked to supply the SSH username and the password if not saved in the firewall's configuration. For security reasons we recommend not to save it.</p> <p>Once done you can see the result of the installation processes</p> <p><img src="/manual/assets/img/installed-ok.png" alt="Successfully Installed"><br></p> <h3 id="install-a-firewall-cluster"><a href="#install-a-firewall-cluster" class="header-anchor">#</a> Install a Firewall Cluster</h3> <p>If you have a firewall cluster, you do not need to install the rules for the nodes individually, the rules will be compiled once and installed on all nodes in the cluster.</p> <p><img src="/manual/assets/img/install_cluster-form.png" alt="Install Cluster Form"><br></p> <h3 id="install-all-fws"><a href="#install-all-fws" class="header-anchor">#</a> Install All FWs</h3> <p>Instead of installing all firewalls one by one you can save time and do it all together.</p> <p>From the menu option all firewalls and clusters within the managed cloud can be installed.</p> <p><img src="/manual/assets/img/install_all.png" alt="Install All"><br></p> <p>, or using the upper button</p> <p><img src="/manual/assets/img/install_all-btn.png" alt="Install All bnt"><br></p> <p>You can select which firewalls or cluster of firewalls you want to intall</p> <p><img src="/manual/assets/img/install_all-form.png" alt="All Install Form"><br></p> <p>The SSH username and the password of all firewalls will be asked if they are not saved in the firewall's configuration. For security reasons we recommend to not save them.</p> <p>You can review the result of the installation processes</p> <p><img src="/manual/assets/img/install_all-ok.png" alt="All Successfully Installed"><br></p> <p>See also <a href="/manual/docs/Sections/Firewalls/#install-firewall"> How to install the policy of a Firewall </a> section</p> <h2 id="others-actions"><a href="#others-actions" class="header-anchor">#</a> Others actions</h2> <h3 id="edit-firewall"><a href="#edit-firewall" class="header-anchor">#</a> Edit Firewall</h3> <p>You can edit the settings of the firewall by double clicking on the name of the firewall or right click on it and select <code>Edit firewall</code>.</p> <p><img src="/manual/assets/img/edit_fw.png" alt="Edit Firewall"><br></p> <p>A new window with four tabs pops up. In the next subsections we are going to describe these tabs.</p> <h4 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h4> <p>The first tab is named &quot;Configuration&quot;. Here you can change the name of your firewall, add a description and choose the compiler is going to be used to generate the security policy. Currently you can choose among the two most popular formats in Linux distributions, the IPTables and NFTables formats.
Also you can select the communication mode from SSH or FWCloud-Agent. If SSH is selected then you can change the username and the password used to access the firewall when installing the policy or the VPN configurations. If you go to FWCloud-Agent instead, you can select the protocol, HTTPS or HTTP, used with the agent and modify the API Key.</p> <p>Next to this field you have the <code>Discover interfaces</code> button. You can use it to discover the interfaces and IP addresses the firewall has. FWCloud-UI will connect to the firewall and it will take you to the next tab showing the network information obtained. And finally in this tab you can select the interface, IP address and port to reach to the firewall. If the FWCloud-Agent is the communication method then you can also test the connection with the agent by pressing the <code>Test</code> button.</p> <p><img src="/manual/assets/img/edit_fw-form-iptables-agent.png" alt="Edit Firewall Tab 1]"><br></p> <h4 id="interfaces-ips"><a href="#interfaces-ips" class="header-anchor">#</a> Interfaces/IPs</h4> <p>In the second tab, named &quot;Interfaces/IPs&quot;, you can see a tree with all the network interfaces and IP addresses of the firewall or cluster of firewalls. If the firewall is being configured now it will only show the loopback interface until you perform a discover or manually add more interfaces. When hovering the mouse over an interface name, a pencil icon <img src="/manual/assets/img/pencil.png" alt="pencil"> appears, if you click on it you can modify the properties of the interface or the IP address. In this tab there is also a handy utility to discover the the interfaces and IP addresses that actually your firewall has and copy them into the firewall configuration in FWCloud-UI. See <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a> section upper in this help.</p> <p><img src="/manual/assets/img/fw_edit-tab2.png" alt="Edit Firewall Tab 2"><br></p> <h4 id="options"><a href="#options" class="header-anchor">#</a> Options</h4> <p>In the third tab, &quot;Options&quot; you can set up several firewall options.</p> <p><img src="/manual/assets/img/fw_edit-tab3.png" alt="Edit Firewall Tab 3"><br></p> <p>You can decide if you want a stateless or a stateful firewall. A stateful firewall is able to tract the state of the connections, so you can use the conntrack module and the ctsstate option in the secure policy rules. By default when a new firewall is created in FWCloud-UI the option <code>Stateful firewall</code> is set and the traffic belonging to  established and related connections is allowed by the security policy. This option can also be set at rule level, visit <a href="/manual/docs/Sections/Policy/#edit-rule">Edit rule</a> section.</p> <p>Also you can enable or disable the firewall to forward traffic from one interface to another. By default it is enabled for <code>IP version 4</code> and disabled for <code>IP version 6</code>.</p> <p>If you are having problems installing the security policy on the firewall checking the option <code>Activate debugging on policy script</code> is helpful for troubleshooting. The code executed and the output of the policy installation script will be displayed.</p> <p><img src="/manual/assets/img/fw_install-x.png" alt="Installation debug"><br></p> <p>With <code>Activate logging in all rules</code> option the traffic of the packets that match the rules of the policy are registered in the syslog file of the firewall. Also a limit of 60 packets per minute is established. The record is prefixed with &quot;RULE ID xxx&quot; where xxx is the number of the rule that is being hit. Logging packets only for an particular rule is also possible, visit <a href="/manual/docs/Sections/Policy/#edit-rule">Edit rule</a> section.</p> <p>When we manage the security policy from FWCloud we have to take into account the rules introduced by third part programs like Docker, CrowdSec or Fail2Ban. Otherwise, when installing the policy from FWCloud, these rules would be deleted and only those that are in FWCloud at the time of compilation and installation would be applied.</p> <p>Docker initially generates a set of security rules suitable for the containers it runs and the configurations defined for them. If we use FWCloudUI to manage the security policy of the server where we run these containers, the rules automatically generated by Docker are removed when loading the FWCloud policy. And vice versa, Docker will generate IPTables rules that are not included in the security policy defined through our FWCloud console.</p> <p>The best option to avoid these conflicts is to disable the automatic generation of IPTables rules by Docker and generate the security policy that interests us from FWCloud-UI.
For more information visit this <a href="https://fwcloud.net/en/documentation/fwcloud-docker/" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The option <code>Docker compatibility</code> of this tab has a link <a href="https://fwcloud.net/en/documentation/fwcloud-docker/" target="_blank" rel="noopener noreferrer">+info<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that address to section of FWCloud web site giving more detailed information and an example showing how to manage the security policy from FWCloud for a server running two Docker containers.</p> <p>Checking the <code>CrowdSec compatibility</code> option FWCloud-UI creates two new special rules that make use of the blacklist maintained by CrowdSec to block suspicious IPs. These rules are created on the INPUT chain and FORWARD chain for both IPv4 and IPv6 policy. They cannot be deleted. To eliminate them, simply uncheck the &quot;CrowdSec Compatibility&quot; box.</p> <p>Next there is a short video using this option:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/71IIKkvFcRg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>When we check the <code>Fail2Ban compatibility</code> option, a special rule is generated in the INPUT chain. It is a hook script rule that restarts the Fail2Ban service. Fail2Ban at startup reloads its configuration and reads the data from its database and creates the necessary rules in the security policy.</p> <p>In this way the process is automated and Fail2Ban is operational even if we modify the policy and install it in our firewall.</p> <p>The video below shows the use of Fail2Ban compatibility option:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/DlPWUbu43Vs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h5 id="security-policy-warnings"><a href="#security-policy-warnings" class="header-anchor">#</a> Security Policy Warnings</h5> <p>FWCloud provides automatic warnings when it detects that one or more rules defined within the security policy may compromise access control, be excessively permissive, or cause subsequent rules to have no effect. These situations may reduce the overall effectiveness of the security policy and lead to unintended behavior.</p> <p>Such warnings are intended to assist users in identifying rules that are incorrectly configured, incomplete, or no longer relevant. They are also useful for detecting rules that may have been unintentionally altered or left unfinished during previous configuration changes. By reviewing these warnings, users can ensure that the security policy remains consistent, effective, and aligned with its intended purpose.</p> <p>This functionality can be enabled or disabled from the Options tab, either at individual firewall level or at firewall cluster level. This allows the warning mechanism to be adapted to the specific operational requirements of each deployment.</p> <p>FWCloud supports two distinct warning levels. One level is used to highlight <code>potentially dangerous rules</code>, which may weaken the security policy or introduce unnecessary exposure. The second level is reserved for<code>potentially critical rules</code>, which are more likely to cause serious security issues or render other rules ineffective. This classification helps users to prioritize their review efforts and address the most significant risks first.</p> <p>Both warnings are shown when compiling the security policy:</p> <p><img src="/manual/assets/img/dangerous-rules-when-compiling.png" alt="Dangerous rules when compiling"><br></p> <p><img src="/manual/assets/img/critical-rules-when-compiling.png" alt="Critical rules when compiling"><br></p> <p>Warnings are displayed during the compilation of the security policy. Each warning identifies the specific rule or rules that trigger the alert, enabling the user to clearly understand the source of the issue.</p> <p>By double-clicking on a warning entry, direct access to the corresponding rule is provided, and the rules blinks for same seconds, allowing it to be reviewed or corrected where appropriate. Once the necessary changes have been made, the user may return, by clicking the <img src="/manual/assets/img/start-icon.png" alt="Start"> icon, to the compilation process to continue with the next flagged rule, or click <img src="/manual/assets/img/book-icon.png" alt="Book"> icon the to ultimately complete the compilation.</p> <p>These warnings are advisory in nature and are not mandatory. If required, the user may choose to proceed with the compilation and subsequent installation of the security policy despite the presence of warnings, doing so at their own discretion and responsibility.</p> <h4 id="plugins"><a href="#plugins" class="header-anchor">#</a> Plugins</h4> <p>The fourth tab is called <code>Plugins</code>.</p> <p><img src="/manual/assets/img/fw_edit-tab4.png" alt="Edit Firewall Tab 4"><br></p> <p>This tab will be active only if the communication method with the firewall, chosen in the first tab, is FWCloud-Agent.</p> <p><img src="/manual/assets/img/fw_edit-plugins_error.png" alt="Edit Firewall Tab 4 no agent"><br></p> <p>Also we can access the Plugins tab directly from the context menu of the firewall.</p> <p><img src="/manual/assets/img/fw_Plugins.png" alt="Edit Firewall NGFW Tools"><br>
From FWCloud-UI we can control the installation of these security products to extend the functionality of the firewalls.</p> <p>The description of the plugins included in FWCloud can be found in the <a href="/manual/docs/Sections/Plugins/"> Plugins </a> section.</p> <h4 id="ngfw-tools"><a href="#ngfw-tools" class="header-anchor">#</a> NGFW Tools</h4> <p>The fifth tab is called <code>NGFW Tools</code>. Again this tab will be active only if the communication method with the firewall, chosen in the first tab, is FWCloud-Agent.</p> <p><img src="/manual/assets/img/fw_edit-tab5.png" alt="Edit Firewall Tab 5"><br></p> <p>We can access the NGFW Tools tab directly from the context menu of the firewall.</p> <p><img src="/manual/assets/img/fw_NGFW-Tools.png" alt="Edit Firewall NGFW Tools"><br></p> <p>From this tab we can access the administration of the NGFW features.
By clicking on the buttons we will be redirected in the browser. For the buttons to be active, it is necessary to have previously activated the corresponding plugins described in the previous tab</p> <h3 id="edit-a-cluster-of-firewalls"><a href="#edit-a-cluster-of-firewalls" class="header-anchor">#</a> Edit a Cluster of Firewalls</h3> <p>You can edit the settings of a cluster of firewalls, like name, description or compiler by double clicking on the name of the cluster or right click on it and select <code>Edit</code>.</p> <p>A new window with three tabs pops up. Note that now in the &quot;Configuration&quot; tab you can see the nodes that make up the cluster. Here you can change their names, the credentials to access them, and their interfaces, IP addresses and ports. Also you can completely remove a node by pressing the <img src="/manual/assets/img/minus.png" alt="-"> button, or add more nodes by pressing the <img src="/manual/assets/img/plus.png" alt="+"> button.</p> <p><img src="/manual/assets/img/edit_cluster-tab1-nftables-mix.png" alt="Edit Firewall Cluster Tab 1"><br></p> <p>Although normally all nodes of a cluster have the same communication method, this is not mandatory and you can choose with method to user for each node, like in the image above. You can change the method by pressing the <img src="/manual/assets/img/ssh-icon.png" alt="ssh"> button or the <img src="/manual/assets/img/FWCloud-agent-icon.png" alt="agent"> button. If FWCloud-Agent is picked you can test the communication by pressing the <img src="/manual/assets/img/plug-icon.png" alt="plug"> button.</p> <p>The interfaces of the nodes can be discovered by pressing the <img src="/manual/assets/img/mag.glass.png" alt="Magnifying glass"> button</p> <p>In the second tab, named &quot;Interfaces/IPs&quot;, you can see a tree with all network interfaces and associated IP addresses. You can edit and modify them quite similar as you have seen previously when editing a firewall.</p> <p><img src="/manual/assets/img/edit_cluster-tab2.png" alt="Edit Firewall Cluster Tab 2"><br></p> <p>However the difference here is that when you press <code>Discover</code> button a new form is presented in order to select from which node of the cluster members you want to perform the discover</p> <p><img src="/manual/assets/img/select_node.png" alt="Select Cluster Member"><br></p> <p>In the third tab, &quot;Options&quot;, you have the same options you have for individual firewalls explained before.
This the same for the fourth tab, &quot;Plugins&quot;.</p> <h3 id="policy-script"><a href="#policy-script" class="header-anchor">#</a> Policy script</h3> <p>The security policy is installed on the routers through a script. From the FWCloud-UI you can view and download the content of this script.</p> <p><img src="/manual/assets/img/fw_show-script.png" alt="Show policy script"><br></p> <p>The script is created or modified every time the policy is compiled. If the firewall has never been compiled you will get a warning when you try to display the policy script</p> <p><img src="/manual/assets/img/fw_script-warning.png" alt="Show policy warning"><br></p> <p>Right after the compilation of the policy has finished you can display the policy script</p> <p><img src="/manual/assets/img/fw_script-form-show.png" alt="Policy compiled"><br></p> <p>A popup windows showing the policy script is displayed</p> <p><img src="/manual/assets/img/fw_script-display.png" alt="Policy displayed"><br></p> <p>From this windows you have the option to copy it to the clipboard or download it as a text file.</p> <p>Also from the context menu of the firewall you can download a copy of the policy script.</p> <p><img src="/manual/assets/img/fw_download-script.png" alt="Download policy script"><br></p> <p>To be able to download the script the firewall has to be compiled previously.</p> <p>You also have the option to download the script immediately after the compilation has been done</p> <p><img src="/manual/assets/img/fw_script-form-download.png" alt="Download policy script"><br></p> <p>Next you have video showin this feature</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/k7PbaNiV2i0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h3 id="clone-firewall"><a href="#clone-firewall" class="header-anchor">#</a> Clone Firewall</h3> <p>If you are going to install a new firewall and it will have several similar characteristics and features to another one, you can make a clone of the actual firewall and configure the different parts to fit your new firewall.</p> <p><img src="/manual/assets/img/fw_clone.png" alt="Clone Firewall"><br></p> <p>This will ask you to name the new firewall and will create a copy.</p> <p><img src="/manual/assets/img/fw_clone-form.png" alt="Clone Firewall Form"><br></p> <h3 id="convert-to-cluster"><a href="#convert-to-cluster" class="header-anchor">#</a> Convert to Cluster</h3> <p>In order to have HA you can a have a cluster of firewalls. In FWCloud-UI you will manage the policy rules and the VPN connections for the cluster, although you can set specific rules that only affect to particular node of the cluster. If you have been using a firewall in FWCloud and now it belongs to a cluster you can convert it into a single node cluster.</p> <p><img src="/manual/assets/img/fw_convert.png" alt="Convert to Cluster"><br></p> <p>You will need to confirm the action.</p> <p><img src="/manual/assets/img/fw_convert-form.png" alt="Convert to Cluster Confirmation"><br></p> <p>It will be converted into a cluster of firewalls with only one node. You can edit the properties of the cluster and add the rest of nodes.</p> <p>Also a cluster of firewalls can be converted into a firewall if needed.</p> <h3 id="delete-cluster"><a href="#delete-cluster" class="header-anchor">#</a> Delete Cluster</h3> <p>You can remove a cluster of firewalls from FWCloud-UI by means of the corresponding menu option.</p> <p><img src="/manual/assets/img/delete_cluster.png" alt="Delete Firewall"><br></p> <p>It requires confirmation.</p> <p><img src="/manual/assets/img/delete_cluster-form.png" alt="Delete Firewall Form"><br></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If any of the cluster objects (interfaces, IPs, VPNs, etc.) are in use by other firewalls/clusters policy, it will not be possible to remove it and an error message will be displayed</p></div> <h3 id="delete-firewall"><a href="#delete-firewall" class="header-anchor">#</a> Delete Firewall</h3> <p>You can remove a firewall from FWCloud-UI from the contextual menu.</p> <p><img src="/manual/assets/img/delete_fw.png" alt="Delete Firewall"><br></p> <p>It requires confirmation.</p> <p><img src="/manual/assets/img/delete_fw-form.png" alt="Delete Firewall Form"><br></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If any of the cluster objects (interfaces, IPs, VPNs, etc.) are in use by other firewalls/clusters policy, it will not be possible to remove it and an error message will be displayed</p></div> <h2 id="import-export"><a href="#import-export" class="header-anchor">#</a> Import / Export</h2> <h3 id="import-wizard"><a href="#import-wizard" class="header-anchor">#</a> Import wizard</h3> <p>FWCloud-UI allows importing the secure policy from other firewalls platforms based in Netfilter/iptables. The recommended way to import a firewall is using the <code>Import wizard</code>.</p> <p>You can invoke this wizard from the contextual menu of &quot;Firewalls/cluster&quot;</p> <p><img src="/manual/assets/img/import_wizard-menu.png" alt="Import Wizard Menu"><br></p> <p>or pressing the upper button <code>Import wizard</code></p> <p><img src="/manual/assets/img/import_wizard-button.png" alt="Import Wizard Button"><br></p> <p>This wizard will guide you to all the necessary steps to create a new firewall or cluster of firewall importing the policy from another firewall or cluster, but also importing the necessary objects to FWCloud-UI infrastructure.
It will connect to the firewall to be imported using SSH. It is necessary that FWCloud-UI can have root access to the firewall.</p> <p><img src="/manual/assets/img/import_wizard-1.png" alt="Import Wizard Step 1"><br></p> <p>You need to specify if you are importing from a firewall or from a cluster of firewalls, and write the name of the new firewall or cluster</p> <p><img src="/manual/assets/img/import_wizard-2-fw.png" alt="Import Wizard Step 2 FW"><br> <br></p> <p>If you are importing from a cluster, you also have to provide the name for any of the nodes of the cluster. The master node name is required. You can add as many nodes as your cluster have pressing the <img src="/manual/assets/img/plus.png" alt="Add node"> button. After adding a node if you want to remove just press the <img src="/manual/assets/img/minus.png" alt="Remove node"> button next to its name.</p> <p><img src="/manual/assets/img/import_wizard-2-cluster.png" alt="Import Wizard Step 2 cluster"><br></p> <p>Next you have to provide the IP address, the username and the password to access the firewall you are importing from. If you are importing from a cluster you need to provide the address and the credentials for each node.</p> <p><img src="/manual/assets/img/import_wizard-3-ssh.png" alt="Import Wizard Step 3"><br></p> <p>When using SSH remember the user needs to be able to execute privileged commands in the remote firewall to collect the necessary information, or use FWCLoud-Agent method:</p> <p><img src="/manual/assets/img/import_wizard-3-agent.png" alt="Import Wizard Step 3"><br></p> <p>and press <code>Discover interfaces</code> button.</p> <p>FWClouds connects to the remote device and gets the name, the MAC and IP address (for IP version 4 and version 6) for each interface it has. By doing this FWCloud-UI is able to create the new interfaces in the new firewall you are creating and use them in the policy rules. You are presented a form with the collected information and you can select with interfaces and IP addresses you want to be included in the new firewall. For more information about this process review <a href="/manual/docs/Sections/Firewalls/#autodiscover"> Autodiscover </a> section upper in this manual.</p> <p><img src="/manual/assets/img/import_wizard-3-autodiscover.png" alt="Import Wizard Step 3 Autodiscover"><br></p> <p>Next you need to confirm the action. If you do the wizard will proceed and you can no go back in the wizard or cancel the action, although onces finished you always can delete the new created firewall or cluster if you regret of the import.</p> <p><img src="/manual/assets/img/import_wizard-3-confirm.png" alt="Import Wizard Step 3 Confirmation"><br></p> <p>The next step is a summary of the import and a warning that the security policy should always be reviewed before installing it, as this is an automatic process.</p> <p><img src="/manual/assets/img/import_wizard-4.png" alt="Import Wizard Step 4"><br></p> <p>If no problems occurs during the process the final form is displayed</p> <p><img src="/manual/assets/img/import_wizard-5.png" alt="Import Wizard Step 5"><br></p> <p>If you have imported from a firewall or cluster of firewalls created using FWCloud-UI all the visual features that FWCloud-UI has, like the background color of the rules or the grouping of rules, will also be included in the new firewall or cluster.</p> <p>In the next video you can see all these concepts about Import wizard when importing a firewall:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/FpnKTOOZdgA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>Now we show another example of using this wizard but this time we are going to import a firewall cluster:</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/ZIwnvM5uVoc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h3 id="iptables-save-import"><a href="#iptables-save-import" class="header-anchor">#</a> IPTables-save import</h3> <p>If you now what you are doing you can import the firewall manually. In this case create first the new firewall or cluster and then select <code>iptables-save import</code> from its contextual menu.</p> <p>You will be presented a form with options to choose the way to import. This form changes dynamically according to the options you go for.</p> <p>You can paste the output of the command iptables-save command executed in the remote devices. This is useful if you do not have access from the FWCloud-UI computer to the remote firewall.</p> <p><img src="/manual/assets/img/iptables_save-import-form-paste-agent.png" alt="IPTables-save import form 1"><br></p> <p>You can upload a file you get as a result of a previous export.</p> <p><img src="/manual/assets/img/iptables_save-import-form-upload-agent.png" alt="IPTables-save import form 2"><br></p> <p>And you can make FWCloud to connect to the remote devices as it was in the case of the use of the &quot;Import wizard&quot;</p> <p><img src="/manual/assets/img/iptables_save-import-form-connect-agent.png" alt="IPTables-save import form 3"><br></p> <p>In all three cases you need to agree the warning that the current security policy of the firewall or cluster is going to be replaced by the new one.</p> <h3 id="iptables-save-export"><a href="#iptables-save-export" class="header-anchor">#</a> IPTables-save export</h3> <p>The entire secure policy can be exported. From the contextual menu of the firewall select <code>Iptables-save export</code> and provide the IP address and credential of the firewall you want to export</p> <p><img src="/manual/assets/img/iptables_save-export-form-agent.png" alt="IPTables-save export form"><br></p> <p>You can copy the result to the clipboard in order to quick import it in another FWCloud firewall or download it to a file to save it in a secure place and used later on.</p> <p><img src="/manual/assets/img/iptables_save-export-result.png" alt="IPTables-save export result"><br></p> <p>When exporting from FWCloud-UI the visual features are also included, but the generated file can also be used in any iptables-save format compatible firewall.</p> <h2 id="system"><a href="#system" class="header-anchor">#</a> System</h2> <p>Another important feature of FWCloud is the ability to control system services from the web console.</p> <p>If the target firewall's operating system supports Systemd, we can use the systemctl tool without opening the terminal.</p> <p>To illustrate this feature, we can review the complete lifecycle of OpenVPN service, which can also be installed from FWCloud as an add-on.</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/ShLjJ-IlSiE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <p>From the Policy panel, if we unfold the &quot;System section&quot;, we can manage three widely used plugins: ISC-DHCP, Keepalived and HAProxy.</p> <p><img src="/manual/assets/img/system.png" alt="System tree"><br></p> <p>To known how these services can be installed from FWCloud please review <a href="/manual/docs/Sections/Plugins/"> Plugins </a> section in this manual.</p> <h3 id="dhcp"><a href="#dhcp" class="header-anchor">#</a> DHCP</h3> <p>It is often common that some of our firewalls also handing IP addresses to the equipment of out networks.
We can install ISC-DCHP server from the <a href="/manual/docs/Sections/Plugins/"> Plugins </a> tab.</p> <p><img src="/manual/assets/img/dhcp-plugin.png" alt="DHCP Plugin"><br></p> <p>Let's see how we can manage all the ISC-DHCP configuration steps from FWCloud. For this service the configuration is rule-based.</p> <p>We have 3 types of rules we can use:</p> <h4 id="regular-rules"><a href="#regular-rules" class="header-anchor">#</a> Regular rules</h4> <p><img src="/manual/assets/img/dhcp_regular-rule.png" alt="DHCP Regular Rule"><br></p> <p>A regular rule consists of three fields: network, range and router
To compose a rule we only need to drag and drop the appropriate objects
If any of these fields is empty the rule cannot be saved.</p> <p><img src="/manual/assets/img/dhcp_regular-rule-form.png" alt="DHCP Regular Rule Form"><br></p> <p>We can use any network for the first field,
a range of IP addresses, which will be used to offer free IP addresses to the devices that request them
and finally the IP address of the router that the devices will get as a gateway.</p> <h4 id="manual-configuration-rules"><a href="#manual-configuration-rules" class="header-anchor">#</a> Manual configuration rules</h4> <p><img src="/manual/assets/img/dhcp_manual-rule.png" alt="DHCP Manual Rule"><br></p> <p>Allow us to freely insert any kind of configuration line. It also can be used to add comment lines.</p> <p><img src="/manual/assets/img/dhcp_manual-rule-form.png" alt="DHCP Manual Rule Form"><br></p> <h4 id="default-configuration-rules"><a href="#default-configuration-rules" class="header-anchor">#</a> Default configuration rules</h4> <p><img src="/manual/assets/img/dhcp_default-config-rule.png" alt="DHCP Default Config Rule"><br></p> <p>It is mainly use to add the default settings to the configuration file.</p> <p><img src="/manual/assets/img/dhcp_default-config-rule-form.png" alt="DHCP Default Config Rule Form"><br></p> <p>Once rules are added, they can be edited to fit our needs. We can use all of FWCloud's visual features for policies, such as grouping rules or coloring them.</p> <p>This is what the DHCP policy will look like after creating the example rules mentioned before:</p> <p><img src="/manual/assets/img/dhcp_policy-rules.png" alt="DHCP Policy"><br></p> <p>The rules can be compiled and installed from the options of the context menus.</p> <p><img src="/manual/assets/img/dhcp_rule-context-menu.png" alt="DHCP Rule Context Menu"><br>
From the system section of the firewall tree we can make the DHCP server always assign the same IP to a given network interface. Fixed IP address assignment is done based on the interface's MAC address.</p> <p><img src="/manual/assets/img/dhcp_fixed-ips_tree.png" alt="DHCP Fixed IP address section "><br></p> <p>And we create a new rule for that:</p> <p><img src="/manual/assets/img/dhcp_fixed-ip-address-form.png" alt="DHCP Manual Rule Form"><br></p> <p>Next we show a fixed IP address rule in the DHCP policy:</p> <p><img src="/manual/assets/img/dhcp_fixed-ip-address-policy-rule.png" alt="DHCP Fixed IP address policy"><br></p> <p>The whole DHCP policy can be compiled and installed from the context menus.</p> <p><img src="/manual/assets/img/dhcp-context-menu.png" alt="DHCP Server Context Menu"><br></p> <p>The Fixed IP address section always goes at the bottom of the configuration file.</p> <p>On our YouTube channel we have a video showing a small demonstration of the installation and configuration of a DHCP server</p> <iframe width="740" height="475" src="https://www.youtube.com/embed/AMp6bMmbY80" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen="allowfullscreen"></iframe> <h3 id="keepalived"><a href="#keepalived" class="header-anchor">#</a> Keepalived</h3> <p>Another add-on we can manage form FWCloud is keepalived.</p> <p><img src="/manual/assets/img/keepalived_plugin.png" alt="Keepalived Plugin"><br></p> <p>It should be noted that it is only configurable in clusters, if we try to configure it in a firewall we will receive the following message</p> <p><img src="/manual/assets/img/haproxy_error-only-for-clusters.png" alt="HAProxy Error Only for clusters"><br></p> <p>When keepalived is installed, at the nodes of a firewall cluster, the installation process creates some configuration templates in <code>/etc/keepalived</code> directory:</p> <div class="custom-block tip"><p class="custom-block-title">Keepalived configuration files</p> <table><thead><tr><th>Example file</th> <th style="text-align:left;"></th></tr></thead> <tbody><tr><td>keepalived.conf.FWCLOUD.MASTER</td> <td style="text-align:left;">For the master node</td></tr> <tr><td>keepalived.conf.FWCLOUD.SLAVE</td> <td style="text-align:left;">For the slave nodes</td></tr> <tr><td>StateChange.sh.FWCLOUD</td> <td style="text-align:left;">Script (all nodes)</td></tr></tbody></table></div> <p>We can use these files as a starting point for the configuration file that should be named <code>keepalived.conf</code>
The configuration calls the <code>StateChange.sh</code> script where we will define the actions we want to occur when the state of the cluster nodes changes, for example adding or removing a route.
The floating IPs addresses that will be set up on the node with the MASTER role are controlled directly by the keepalived service and it is not necessary to include any action in StateChange.sh.</p> <p>The configuration can be defined from FWCloud using rules. As before we have 3 types of rules:</p> <h4 id="keepalived-rules"><a href="#keepalived-rules" class="header-anchor">#</a> Keepalived rules</h4> <p><img src="/manual/assets/img/keepalived_regular-rule.png" alt="Keepalived Regular Rule"><br></p> <p>This is where we indicate the floating IP addresses that will be active on one node or another depending on the role they have</p> <p><img src="/manual/assets/img/keepalived_regular-rule_form.png" alt="Keepalived Regular Rule Form"><br></p> <h4 id="manual-configuration-rules-2"><a href="#manual-configuration-rules-2" class="header-anchor">#</a> Manual configuration rules</h4> <p><img src="/manual/assets/img/keepalived_manual-rule.png" alt="Keepalived Default Config Rule"><br></p> <p>They allow us to freely include any configuration or parameter that we want to put in the configuration</p> <p><img src="/manual/assets/img/keepalived_manual-rule_form.png" alt="Keepalived Default Config Rule Form"><br></p> <h4 id="default-configuration-rules-2"><a href="#default-configuration-rules-2" class="header-anchor">#</a> Default configuration rules</h4> <p><img src="/manual/assets/img/keepalived_default-config-rule.png" alt="Keepalived Manual Rule"><br></p> <p>This type of rules includes the initial global configuration of the service. Generally we will add this rule to the beginning of the keepalived policy.</p> <p><img src="/manual/assets/img/keepalived_default-config-rule_form.png" alt="Keepalived Manual Rule Form"><br></p> <h3 id="haproxy"><a href="#haproxy" class="header-anchor">#</a> HAProxy</h3> <p>Another useful service is HAProxy. It is used for load balancing and high availability of applications and web services.</p> <p>The <a href="/manual/docs/Sections/Plugins/"> Plugins </a> section details how to install it.</p> <p><img src="/manual/assets/img/haproxy_plugin.png" alt="HAProxy Plugin"><br></p> <p>Also in the Plugins section there is a <a href="/manual/docs/Sections/Plugins/#haproxy"> video </a> showing the actions during the life cycle of this service.</p> <p>From the Firewall tree we can create the HAProxy policy, as before, based on rules. Again we also have 3 types of rules we can use:</p> <h4 id="haproxy-rules"><a href="#haproxy-rules" class="header-anchor">#</a> HAProxy rules</h4> <p>These are the rules that allow us to balance services or applications.</p> <p><img src="/manual/assets/img/haproxy_regular-rule.png" alt="HAProxy Regular Rule"><br>
This type of rules requires 4 fields: The IP address where the service listens and the port, as well as the IP address or addresses to which incoming requests are redirected and their corresponding ports.</p> <p><img src="/manual/assets/img/haproxy_regular-rule_form.png" alt="HAProxy Regular Rule Form"><br></p> <p>Once the rule is created, we can add a comment that clarifies its purpose.</p> <h4 id="manual-configuration-rules-3"><a href="#manual-configuration-rules-3" class="header-anchor">#</a> Manual configuration rules</h4> <p>They allow us to freely add any parameters, advanced settings or just comments.</p> <p><img src="/manual/assets/img/haproxy_manual-rule.png" alt="HAProxy Manual Rule"><br></p> <p><img src="/manual/assets/img/haproxy_manual-rule_form.png" alt="HAProxy Manual Rule Form"><br></p> <h4 id="default-configuration-rules-3"><a href="#default-configuration-rules-3" class="header-anchor">#</a> Default configuration rules</h4> <p>They add initial configuration necessary for running the service.</p> <p><img src="/manual/assets/img/haproxy_default-config-rule.png" alt="HAProxy Default Configuration Rule"><br></p> <p><img src="/manual/assets/img/haproxy_default-config-rule_form.png" alt="HAProxy Default Configuration Rule"><br></p> <p>These can be edited and modified to customize the configuration</p> <p>We can add as many rules as we need for the services we want to provide through HAproxy.</p> <p><img src="/manual/assets/img/haproxy_policy.png" alt="HAProxy Policy"><br></p> <p>To see how the rules would look in the configuration we can compile them individually or all together.</p> <p><img src="/manual/assets/img/haproxy_menu.png" alt="HAProxy Menu"><br></p> <p>We can see the file with all the configuration and download it to have a backup copy.</p> <p>If we are satisfied with the configuration we can install it on the target firewall.</p> <p>The installation overrides any configuration in /etc/haproxy/haproxy.cfg with the configuration obtained from the rules we view in FWCloud.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/manual/assets/js/app.bd85ee5e.js" defer></script><script src="/manual/assets/js/2.81c34002.js" defer></script><script src="/manual/assets/js/1.9918cdf1.js" defer></script><script src="/manual/assets/js/38.361673f4.js" defer></script>
  </body>
</html>
