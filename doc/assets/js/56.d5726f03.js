(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{373:function(e,t,i){"use strict";i.r(t);var r=i(28),n=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"wireguard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wireguard"}},[e._v("#")]),e._v(" WireGuard")]),e._v(" "),t("p",[e._v("WireGuard is a modern Virtual Private Network (VPN) protocol designed to provide secure and efficient encrypted communications. It is characterized by its lightweight architecture, high performance, and simplified configuration compared to traditional VPN solutions.")]),e._v(" "),t("p",[e._v("WireGuard uses state-of-the-art cryptographic primitives and relies on a key-based authentication model. Each peer in a WireGuard VPN is identified by a public and private key pair, which is used to establish secure tunnels and authenticate communication endpoints. This approach reduces complexity while maintaining a high level of security.")]),e._v(" "),t("p",[e._v("In a WireGuard deployment, VPN connections are established between peers that have been explicitly authorized to communicate with each other. Once a secure tunnel is created, all traffic exchanged between peers is encrypted, ensuring confidentiality and integrity. WireGuard operates over UDP and is designed to perform efficiently even in high-latency or unstable network environments.")]),e._v(" "),t("p",[e._v("Due to its simplicity, performance, and strong security guarantees, WireGuard is increasingly adopted for both remote access and site-to-site VPN scenarios. Its integration within FWCloud enables administrators to deploy and manage WireGuard-based VPN connections through a centralized and streamlined configuration interface.")]),e._v(" "),t("h3",{attrs:{id:"server-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-configuration"}},[e._v("#")]),e._v(" Server Configuration")]),e._v(" "),t("p",[e._v("To use the server certificate drag it and drop it over the name of the firewall that is going to be the VPN server.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server-drag.png"),alt:"Server Drag"}}),t("br")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server-drop.png"),alt:"Server Drop"}}),t("br")]),e._v(" "),t("p",[e._v("Automatically a new form is opened. You need write down the network and the mask of the network the VPN server is going to hand IP addresses from. This object is called LAN-VPN-xxxx by default, where xxxx is the name of the Sever Certificate. The name of the object can be modified if you double click the name of the Sever Certificate on the right panel or if you right click and select "),t("code",[e._v("Edit configuration")]),e._v(".\nAlthough the configuration in this form is enough for the VPN Sever configuration you can modify these settings and modify, add or delete the allowed options, like the name of the file that will store this configuration or its folder or other options like verbosity level.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg_server-form.png"),alt:"Server Form"}}),t("br")]),e._v(" "),t("p",[e._v("For reference, next are the allowed options: Address, ListenPort, PrivateKey, DNS, MTU, Table, PreUp, PostUp, PreDown, PostDown, SaveConfig, FwMark. More information about the options can be found in "),t("a",{attrs:{href:"https://www.wireguard.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v(" WireGuard options "),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"install-sever-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-sever-configuration"}},[e._v("#")]),e._v(" Install Sever Configuration")]),e._v(" "),t("p",[e._v("Once the VPN Server configuration is created, it needs to be installed in the firewall. Right click over the server certificate and select "),t("code",[e._v("Install Configuration")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server_install.png"),alt:"Server Install"}}),t("br")]),e._v(" "),t("p",[e._v("If FWCloud access the target firewall via SSH and the credentials are not configured a pop up windows will ask for them, otherwise the installation will proceed.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/cert_server_install-form.png"),alt:"Server Install Form"}}),t("br")]),e._v(" "),t("p",[e._v('When using SSH access, the user provided also needs to be able to execute "sudo" commands, otherwise the next error will occur:')]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server_install-error.png"),alt:"Server Install Error"}}),t("br")]),e._v(" "),t("p",[e._v("If no problems occur the VPN Server configuration will be installed on the target firewall")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-server_install-success.png"),alt:"Server Install Success"}}),t("br")]),e._v(" "),t("h3",{attrs:{id:"client-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#client-configuration"}},[e._v("#")]),e._v(" Client Configuration")]),e._v(" "),t("p",[e._v("To use the client certificate drag it and drop it over the name of the VPN server. Note that the VPN server background turns green we you hover the certificate over it.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client-drag.png"),alt:"Client Drag"}}),t("br")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client-drop.png"),alt:"Client Drop"}}),t("br")]),e._v(" "),t("p",[e._v("If the VPN server already has another certificate with the same name you will receive a warning and the certificate will not be moved to the server. The name of the certificates must be unique within the VPN server scope.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_drop-error.png"),alt:"Client Drop Error"}}),t("br")]),e._v(" "),t("p",[e._v("If this the first certificate you drop, automatically a new form is opened where you can configure the OpenVPN options for the client.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client-form.png"),alt:"Client Form"}}),t("br")]),e._v(" "),t("p",[e._v("The most important option in this form you have to fill in is "),t("code",[e._v("endpoint")]),e._v(". It makes reference to the IP address the VPN clients connect to stablish the VPN tunnel. This is normally the public IP address you use to reach the firewall. You can write it in the "),t("code",[e._v("Value")]),e._v(" field or use the magnifier "),t("img",{attrs:{src:e.$withBase("/assets/img/mag.glass-grey.png"),alt:"Glass"}}),e._v(" icon in the Remote section.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client_remote-glass.png"),alt:"Client Cert Glass"}}),t("br")]),e._v(" "),t("p",[e._v("When you click that icon a new menu displays the IP addresses configured in FWCloud-UI in tree way. Select the appropriate one and click the "),t("img",{attrs:{src:e.$withBase("/assets/img/tick.png"),alt:"Tick"}}),e._v(" icon. Then modify the port if VPN server is not listening in the default one and finally click on the "),t("code",[e._v("+")]),e._v(" icon next to the port number. Only one endpoint can be configured.")]),e._v(" "),t("p",[e._v("In the VPN client configuration form you can also add, delete or modify options like PrivateKey, Address and DNS for the interface section, or Endpoint, AllowedIPs, PublicKey, PersistentKeepalive and PreSharedKey for the Peer section.")]),e._v(" "),t("p",[e._v("The options available here are: push, push-reset, iroute, iroute-ipv6, ifconfig-push, ifconfig-ipv6-push, disable, config, max-routes-per-client and comp-lzo.")]),e._v(" "),t("p",[e._v("When you have the VPN client configuration ready press "),t("code",[e._v("Save changes")]),e._v(" button in right bottom side of the form. The new client certificate appears in the FIREWALLS/CLUSTER side with an "),t("img",{attrs:{src:e.$withBase("/assets/img/I.png"),alt:"I"}}),e._v(" icon by his name. This indicates this certificate is not yet installed in the firewall.")]),e._v(" "),t("p",[e._v("When you drop the client certificate in the VPN server, if this already have other client certificates you will be asked if you want to clone the configuration from another client VPN configuration.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client-clone.png"),alt:"Clone Client Cert"}}),t("br")]),e._v(" "),t("p",[e._v("In this form you can choose from the drop down field which client configuration you want to copy its options from. When you are configuring multiple clients this save you a lot of time and avoid mistakes. After that the client configuration form will be opened.")]),e._v(" "),t("h3",{attrs:{id:"install-client-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-client-configuration"}},[e._v("#")]),e._v(" Install Client Configuration")]),e._v(" "),t("p",[e._v("Once the VPN Client configuration is created, it needs to be installed in the firewall by updating the VPN server configuration. Note that an "),t("img",{attrs:{src:e.$withBase("/assets/img/I.png"),alt:"I"}}),e._v(" icon appears by the server name. Right click on the server and select "),t("code",[e._v("Install Configuration")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server-client_install.png"),alt:"Client Install"}}),t("br")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-server-update-success.png"),alt:"Client Install Form"}}),t("br")]),e._v(" "),t("p",[e._v("When the certificate is installed in the firewall the "),t("img",{attrs:{src:e.$withBase("/assets/img/I.png"),alt:"I"}}),e._v(" icon is cleared.")]),e._v(" "),t("h3",{attrs:{id:"prefixes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prefixes"}},[e._v("#")]),e._v(" Prefixes")]),e._v(" "),t("p",[e._v("Prefixes can also be created in the FIREWALL/CLUSTER section.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_prefix-fws.png"),alt:"VPN FW Prefix"}}),t("br")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/ovpn_prefix-form.png"),alt:"VPN Prefix Form"}}),t("br")]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("Do not confuse with PKI prefixes")]),e._v(" "),t("p",[e._v("PKI prefixed are for organizational purposes only while WireGuard server prefixes can be used in the security policy.")])]),e._v(" "),t("p",[e._v("In the next figure you can see PKI prefixes on the left side are represented by "),t("img",{attrs:{src:e.$withBase("/assets/img/pki_prefix-icon.png"),alt:"PKI Prefix Icon"}}),e._v(" while the prefixes created in the WireGuard server have a different "),t("img",{attrs:{src:e.$withBase("/assets/img/ovpn_prefix-icon.png"),alt:"OpenVPN Prefix Icon"}}),e._v(" icon.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-prefix-types.png"),alt:"Prefix types"}}),t("br")]),e._v(" "),t("p",[e._v("You can use the "),t("code",[e._v("Prefix")]),e._v(" when creating the policy rules. Instead of needing to add all IP addresses of every VPN connections of any client which his certificate name starts with a common part (the prefix), you can add that "),t("code",[e._v("Prefix")]),e._v(" in the rule. The prefix can be dragged and dropped in the rule fields. Only non empty prefixes can be dropped.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-empty-prefix.png"),alt:"VPN Prefix Policy"}}),t("br")]),e._v(" "),t("p",[e._v("FWCloud-UI will display the prefixes in the Policy section when you expand the WireGuard branch inside the firewalls in the Firewalls group. Only VPN server prefixes will be displayed here.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_prefix_policy.png"),alt:"VPN Prefix Policy"}}),t("br")]),e._v(" "),t("p",[e._v("Here you have an example with two rules using prefixes")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/vpn_prefix-rule.png"),alt:"VPN Prefix Policy Rule"}}),t("br")]),e._v(" "),t("p",[e._v("In this case since we have two VPN client configurations with the prefix ENGINEERS, the rule number 10 refers to any connections established from this two VPN clients")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_prefix-tree.png"),alt:"VPN Prefix Policy Rule"}}),t("br")]),e._v(" "),t("p",[e._v("The use of prefixes makes the security policy more clear and easy to read. Also when you create new VPN client configurations with the same prefix you do not need to modify or create new rules. Although the policy needs to be compiled and installed again, since when it was installed in the firewall it did not yet have the new clients configurations.")]),e._v(" "),t("h3",{attrs:{id:"server-config-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-config-file"}},[e._v("#")]),e._v(" Server Config File")]),e._v(" "),t("p",[e._v("Although the VPN server configuration can be installed on the firewall from the FWCloud-UI, also you can get access to the file that stores this configuration, just right click and select "),t("code",[e._v("Configuration file")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_file.png"),alt:"Server VPN file"}}),t("br")]),e._v(" "),t("p",[e._v("A new form is opened where you can download or copy the content of the file to the clipboard.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_config_file.png"),alt:"Server VPN Config File"}}),t("br")]),e._v(" "),t("h3",{attrs:{id:"clients-config-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#clients-config-file"}},[e._v("#")]),e._v(" Clients Config File")]),e._v(" "),t("p",[e._v("The configuration file of the VPN clients can also be obtained by right clicking on the client configuration name and select "),t("code",[e._v("Configuration file")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_client_file.png"),alt:"Client VPN file"}}),t("br")]),e._v(" "),t("p",[e._v("A new form is opened where you can download or copy the content of the file to the clipboard.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vnp_client_config_file.png"),alt:"Client VPN Config File"}}),t("br")]),e._v(" "),t("p",[e._v("If you copy it to the clipboard a popup message in the right top corner will indicate when the copy has finished.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/vpn_client_copied.png"),alt:"Client VPN File Copied"}}),t("br")]),e._v(" "),t("p",[e._v("This file will be needed if you want to install the a VPN connection in the client equipment.")]),e._v(" "),t("h3",{attrs:{id:"edit-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#edit-configurations"}},[e._v("#")]),e._v(" Edit Configurations")]),e._v(" "),t("p",[e._v("In order to edit the VPN server configuration right click on the VPN server name and select "),t("code",[e._v("Edit configuration")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_edit.png"),alt:"Edit VPN Server"}}),t("br")]),e._v(" "),t("p",[e._v("The configuration form for the server is opened and you can make any notifications to it.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_server-form.png"),alt:"Server Form"}}),t("br")]),e._v(" "),t("p",[e._v("Also the VPN configuration of a client can be edited if you right click on the client configuration name and select "),t("code",[e._v("Edit configuration")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_client_edit.png"),alt:"Edit VPN Client"}}),t("br")]),e._v(" "),t("p",[e._v("The configuration form for the client is opened.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-cert_client-form2.png"),alt:"Client Form"}}),t("br")]),e._v(" "),t("h3",{attrs:{id:"block-unblock-client-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#block-unblock-client-configurations"}},[e._v("#")]),e._v(" Block / Unblock Client Configurations")]),e._v(" "),t("p",[e._v("When a VPN connection is not going to be used for a temporal period it can be blocked, not allowing the connection to be established")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/vpn-block.png"),alt:"Block VPN"}}),t("br")]),e._v(" "),t("p",[e._v("The process will install the new server configuration to start to blocking the connection. If the password of the the firewall is not stored it will be required.")]),e._v(" "),t("p",[e._v("A message informs the connection has been successfully blocked:")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-blocked-client-msg.png"),alt:"Block VPN Message"}}),t("br")]),e._v(" "),t("p",[e._v("Now the server configuration has the peer configuration commented out:")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-config-blocked.png"),alt:"Peer lines commented out"}}),t("br")]),e._v(" "),t("p",[e._v("VPN connections blocked are displayed in gray text and the icons change to reflect that.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn-blocked.png"),alt:"Blocked VPN connections"}}),t("br")]),e._v(" "),t("p",[e._v("Any blocked VPN connection can the unblocked from the context menu:")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/vpn-unblock.png"),alt:"Unblock VPN"}}),t("br")]),e._v(" "),t("p",[e._v("Again the modified server configuration will be installed in the firewall, and a message will inform it has been unblocked.")]),e._v(" "),t("h3",{attrs:{id:"uninstall-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uninstall-configurations"}},[e._v("#")]),e._v(" Uninstall Configurations")]),e._v(" "),t("p",[e._v("The VPN server configuration can be uninstalled from the firewall. All client configuration of the VPN server must be uninstalled first.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_uninstall.png"),alt:"Server VPN Uninstall"}}),t("br")]),e._v(" "),t("p",[e._v("FWCloud will check if there are client configurations for the server configuration. In that case it will not proceed and will show an error message.")]),e._v(" "),t("p",[e._v("XXXXXX\n"),t("img",{attrs:{src:e.$withBase("/assets/img/vpn_server_uninstall-warn.png"),alt:"Server VPN Uninstall Warn"}}),t("br")]),e._v(" "),t("h3",{attrs:{id:"delete-configurations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#delete-configurations"}},[e._v("#")]),e._v(" Delete Configurations")]),e._v(" "),t("p",[e._v("If a VPN configuration is no longer needed it can be removed. This can be done from the context menu of the configuration name. Right click and select "),t("code",[e._v("Delete configuration")]),e._v(".")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_delete.png"),alt:"VPN Server Delete"}}),t("br")]),e._v(" "),t("p",[e._v("A server configuration can only be deleted if there are no client configurations. FWCloud will detect if client configurations exist.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_server_delete-warn.png"),alt:"VPN Server Delete Warn"}}),t("br")]),e._v(" "),t("p",[e._v("To delete a client configuration select "),t("code",[e._v("Delete configuration")]),e._v(" from the client context menu.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_client_delete-menu.png"),alt:"VPN Client Delete Menu"}}),t("br")]),e._v(" "),t("p",[e._v("Again FWCloud will check first if there is any conflict that not allows the deletion and it will warn if that is the case.")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_client_delete-error.png"),alt:"Client VPN Delete Error"}}),t("br")]),e._v(" "),t("p",[e._v("Otherwise you can proceed with client configuration deletion")]),e._v(" "),t("p",[t("img",{attrs:{src:e.$withBase("/assets/img/wg-vpn_client_delete.png"),alt:"Client VPN Delete"}}),t("br")]),e._v(" "),t("p",[e._v("The server configuration is updated because the peer is removed and needs to be reinstalled, as reflected by the "),t("img",{attrs:{src:e.$withBase("/assets/img/I.png"),alt:"I"}}),e._v(" icon.")])])}),[],!1,null,null,null);t.default=n.exports}}]);