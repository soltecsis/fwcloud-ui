import{a as oe,b as ke,c as Kc,d as oE,e as ep,f as No,g as B}from"./chunk-GAL4ENT6.js";var NV=oE((ilt,Lte)=>{Lte.exports={name:"fwc-dashboard",version:"2.0.11",license:"MIT",scripts:{ng:"ng",start:"ng serve --proxy-config proxy.conf.json",build:"ng version && ng build --configuration production && node createDistVersionFile && node copyDistFiles",fresh_build_start:"clear && rm -rf node_modules package-lock.json build .angular && npm i && npm run build && npm run start",test:"ng test",lint:"ng lint","lint-fix":"ng lint --fix",e2e:"ng e2e"},private:!0,dependencies:{"@angular/animations":"18.2.13","@angular/cdk":"18.2.14","@angular/common":"18.2.13","@angular/compiler":"18.2.13","@angular/core":"18.2.13","@angular/forms":"18.2.13","@angular/platform-browser":"18.2.13","@angular/platform-browser-dynamic":"18.2.13","@angular/router":"18.2.13","@fortawesome/fontawesome-free":"7.0.0","@ngrx/effects":"18.1.1","@ngrx/entity":"18.1.1","@ngrx/store":"18.1.1","@ngrx/store-devtools":"18.1.1","@ngx-translate/core":"16.0.3","chart.js":"4.5.0","file-saver":"2.0.5","flag-icons":"7.5.0","ipaddr.js":"2.2.0",nanoid:"5.1.5","ngx-cookie-service":"18.0.0","ngx-markdown":"18.1.0","ngx-translate-multi-http-loader":"18.2.0",openpgp:"6.2.0",primeflex:"4.0.0",primeicons:"7.0.0",primeng:"17.18.15",rxjs:"7.8.2","socket.io-client":"4.8.1","zone.js":"0.14.10"},devDependencies:{"@angular-devkit/build-angular":"18.2.20","@angular/cli":"18.2.20","@angular/compiler-cli":"18.2.13","@angular/language-service":"18.2.13","@types/jest":"30.0.0","@types/mocha":"10.0.10","@types/node":"24.3.0","angular-eslint":"18.4.3",eslint:"9.33.0","fs-extra":"11.3.1","ts-node":"10.9.2",tslib:"2.8.1",typescript:"5.5.4","typescript-eslint":"8.40.0"}}});var _c=oE((sB,cv)=>{(function(i){"use strict";let n="(0?\\d+|0x[a-f0-9]+)",e={fourOctet:new RegExp(`^${n}\\.${n}\\.${n}\\.${n}$`,"i"),threeOctet:new RegExp(`^${n}\\.${n}\\.${n}$`,"i"),twoOctet:new RegExp(`^${n}\\.${n}$`,"i"),longValue:new RegExp(`^${n}$`,"i")},t=new RegExp("^0[0-7]+$","i"),r=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${s})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${n}\\.${n}\\.${n}\\.${n}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${s})|(?:::)(?:${s})?)${n}\\.${n}\\.${n}\\.${n}(${o})?$`,"i")};function l(C,I){if(C.indexOf("::")!==C.lastIndexOf("::"))return null;let b=0,E=-1,R=(C.match(a.zoneIndex)||[])[0],T,A;for(R&&(R=R.substring(1),C=C.replace(/%.+$/,""));(E=C.indexOf(":",E+1))>=0;)b++;if(C.substr(0,2)==="::"&&b--,C.substr(-2,2)==="::"&&b--,b>I)return null;for(A=I-b,T=":";A--;)T+="0:";return C=C.replace("::",T),C[0]===":"&&(C=C.slice(1)),C[C.length-1]===":"&&(C=C.slice(0,-1)),I=function(){let U=C.split(":"),z=[];for(let ee=0;ee<U.length;ee++)z.push(parseInt(U[ee],16));return z}(),{parts:I,zoneId:R}}function c(C,I,b,E){if(C.length!==I.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let R=0,T;for(;E>0;){if(T=b-E,T<0&&(T=0),C[R]>>T!==I[R]>>T)return!1;E-=b,R+=1}return!0}function d(C){if(r.test(C))return parseInt(C,16);if(C[0]==="0"&&!isNaN(parseInt(C[1],10))){if(t.test(C))return parseInt(C,8);throw new Error(`ipaddr: cannot parse ${C} as octal`)}return parseInt(C,10)}function h(C,I){for(;C.length<I;)C=`0${C}`;return C}let _={};_.IPv4=function(){function C(I){if(I.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let b,E;for(b=0;b<I.length;b++)if(E=I[b],!(0<=E&&E<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=I}return C.prototype.SpecialRanges={unspecified:[[new C([0,0,0,0]),8]],broadcast:[[new C([255,255,255,255]),32]],multicast:[[new C([224,0,0,0]),4]],linkLocal:[[new C([169,254,0,0]),16]],loopback:[[new C([127,0,0,0]),8]],carrierGradeNat:[[new C([100,64,0,0]),10]],private:[[new C([10,0,0,0]),8],[new C([172,16,0,0]),12],[new C([192,168,0,0]),16]],reserved:[[new C([192,0,0,0]),24],[new C([192,0,2,0]),24],[new C([192,88,99,0]),24],[new C([198,18,0,0]),15],[new C([198,51,100,0]),24],[new C([203,0,113,0]),24],[new C([240,0,0,0]),4]],as112:[[new C([192,175,48,0]),24],[new C([192,31,196,0]),24]],amt:[[new C([192,52,193,0]),24]]},C.prototype.kind=function(){return"ipv4"},C.prototype.match=function(I,b){let E;if(b===void 0&&(E=I,I=E[0],b=E[1]),I.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,I.octets,8,b)},C.prototype.prefixLengthFromSubnetMask=function(){let I=0,b=!1,E={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},R,T,A;for(R=3;R>=0;R-=1)if(T=this.octets[R],T in E){if(A=E[T],b&&A!==0)return null;A!==8&&(b=!0),I+=A}else return null;return 32-I},C.prototype.range=function(){return _.subnetMatch(this,this.SpecialRanges)},C.prototype.toByteArray=function(){return this.octets.slice(0)},C.prototype.toIPv4MappedAddress=function(){return _.IPv6.parse(`::ffff:${this.toString()}`)},C.prototype.toNormalizedString=function(){return this.toString()},C.prototype.toString=function(){return this.octets.join(".")},C}(),_.IPv4.broadcastAddressFromCIDR=function(C){try{let I=this.parseCIDR(C),b=I[0].toByteArray(),E=this.subnetMaskFromPrefixLength(I[1]).toByteArray(),R=[],T=0;for(;T<4;)R.push(parseInt(b[T],10)|parseInt(E[T],10)^255),T++;return new this(R)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},_.IPv4.isIPv4=function(C){return this.parser(C)!==null},_.IPv4.isValid=function(C){try{return new this(this.parser(C)),!0}catch{return!1}},_.IPv4.isValidCIDR=function(C){try{return this.parseCIDR(C),!0}catch{return!1}},_.IPv4.isValidFourPartDecimal=function(C){return!!(_.IPv4.isValid(C)&&C.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},_.IPv4.networkAddressFromCIDR=function(C){let I,b,E,R,T;try{for(I=this.parseCIDR(C),E=I[0].toByteArray(),T=this.subnetMaskFromPrefixLength(I[1]).toByteArray(),R=[],b=0;b<4;)R.push(parseInt(E[b],10)&parseInt(T[b],10)),b++;return new this(R)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},_.IPv4.parse=function(C){let I=this.parser(C);if(I===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(I)},_.IPv4.parseCIDR=function(C){let I;if(I=C.match(/^(.+)\/(\d+)$/)){let b=parseInt(I[2]);if(b>=0&&b<=32){let E=[this.parse(I[1]),b];return Object.defineProperty(E,"toString",{value:function(){return this.join("/")}}),E}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},_.IPv4.parser=function(C){let I,b,E;if(I=C.match(e.fourOctet))return function(){let R=I.slice(1,6),T=[];for(let A=0;A<R.length;A++)b=R[A],T.push(d(b));return T}();if(I=C.match(e.longValue)){if(E=d(I[1]),E>4294967295||E<0)throw new Error("ipaddr: address outside defined range");return function(){let R=[],T;for(T=0;T<=24;T+=8)R.push(E>>T&255);return R}().reverse()}else return(I=C.match(e.twoOctet))?function(){let R=I.slice(1,4),T=[];if(E=d(R[1]),E>16777215||E<0)throw new Error("ipaddr: address outside defined range");return T.push(d(R[0])),T.push(E>>16&255),T.push(E>>8&255),T.push(E&255),T}():(I=C.match(e.threeOctet))?function(){let R=I.slice(1,5),T=[];if(E=d(R[2]),E>65535||E<0)throw new Error("ipaddr: address outside defined range");return T.push(d(R[0])),T.push(d(R[1])),T.push(E>>8&255),T.push(E&255),T}():null},_.IPv4.subnetMaskFromPrefixLength=function(C){if(C=parseInt(C),C<0||C>32)throw new Error("ipaddr: invalid IPv4 prefix length");let I=[0,0,0,0],b=0,E=Math.floor(C/8);for(;b<E;)I[b]=255,b++;return E<4&&(I[E]=Math.pow(2,C%8)-1<<8-C%8),new this(I)},_.IPv6=function(){function C(I,b){let E,R;if(I.length===16)for(this.parts=[],E=0;E<=14;E+=2)this.parts.push(I[E]<<8|I[E+1]);else if(I.length===8)this.parts=I;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(E=0;E<this.parts.length;E++)if(R=this.parts[E],!(0<=R&&R<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");b&&(this.zoneId=b)}return C.prototype.SpecialRanges={unspecified:[new C([0,0,0,0,0,0,0,0]),128],linkLocal:[new C([65152,0,0,0,0,0,0,0]),10],multicast:[new C([65280,0,0,0,0,0,0,0]),8],loopback:[new C([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new C([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new C([0,0,0,0,0,65535,0,0]),96],discard:[new C([256,0,0,0,0,0,0,0]),64],rfc6145:[new C([0,0,0,0,65535,0,0,0]),96],rfc6052:[new C([100,65435,0,0,0,0,0,0]),96],"6to4":[new C([8194,0,0,0,0,0,0,0]),16],teredo:[new C([8193,0,0,0,0,0,0,0]),32],benchmarking:[new C([8193,2,0,0,0,0,0,0]),48],amt:[new C([8193,3,0,0,0,0,0,0]),32],as112v6:[[new C([8193,4,274,0,0,0,0,0]),48],[new C([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new C([8193,16,0,0,0,0,0,0]),28],orchid2:[new C([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new C([8193,48,0,0,0,0,0,0]),28],reserved:[[new C([8193,0,0,0,0,0,0,0]),23],[new C([8193,3512,0,0,0,0,0,0]),32]]},C.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},C.prototype.kind=function(){return"ipv6"},C.prototype.match=function(I,b){let E;if(b===void 0&&(E=I,I=E[0],b=E[1]),I.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,I.parts,16,b)},C.prototype.prefixLengthFromSubnetMask=function(){let I=0,b=!1,E={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},R,T;for(let A=7;A>=0;A-=1)if(R=this.parts[A],R in E){if(T=E[R],b&&T!==0)return null;T!==16&&(b=!0),I+=T}else return null;return 128-I},C.prototype.range=function(){return _.subnetMatch(this,this.SpecialRanges)},C.prototype.toByteArray=function(){let I,b=[],E=this.parts;for(let R=0;R<E.length;R++)I=E[R],b.push(I>>8),b.push(I&255);return b},C.prototype.toFixedLengthString=function(){let I=function(){let E=[];for(let R=0;R<this.parts.length;R++)E.push(h(this.parts[R].toString(16),4));return E}.call(this).join(":"),b="";return this.zoneId&&(b=`%${this.zoneId}`),I+b},C.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let I=this.parts.slice(-2),b=I[0],E=I[1];return new _.IPv4([b>>8,b&255,E>>8,E&255])},C.prototype.toNormalizedString=function(){let I=function(){let E=[];for(let R=0;R<this.parts.length;R++)E.push(this.parts[R].toString(16));return E}.call(this).join(":"),b="";return this.zoneId&&(b=`%${this.zoneId}`),I+b},C.prototype.toRFC5952String=function(){let I=/((^|:)(0(:|$)){2,})/g,b=this.toNormalizedString(),E=0,R=-1,T;for(;T=I.exec(b);)T[0].length>R&&(E=T.index,R=T[0].length);return R<0?b:`${b.substring(0,E)}::${b.substring(E+R)}`},C.prototype.toString=function(){return this.toRFC5952String()},C}(),_.IPv6.broadcastAddressFromCIDR=function(C){try{let I=this.parseCIDR(C),b=I[0].toByteArray(),E=this.subnetMaskFromPrefixLength(I[1]).toByteArray(),R=[],T=0;for(;T<16;)R.push(parseInt(b[T],10)|parseInt(E[T],10)^255),T++;return new this(R)}catch(I){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${I})`)}},_.IPv6.isIPv6=function(C){return this.parser(C)!==null},_.IPv6.isValid=function(C){if(typeof C=="string"&&C.indexOf(":")===-1)return!1;try{let I=this.parser(C);return new this(I.parts,I.zoneId),!0}catch{return!1}},_.IPv6.isValidCIDR=function(C){if(typeof C=="string"&&C.indexOf(":")===-1)return!1;try{return this.parseCIDR(C),!0}catch{return!1}},_.IPv6.networkAddressFromCIDR=function(C){let I,b,E,R,T;try{for(I=this.parseCIDR(C),E=I[0].toByteArray(),T=this.subnetMaskFromPrefixLength(I[1]).toByteArray(),R=[],b=0;b<16;)R.push(parseInt(E[b],10)&parseInt(T[b],10)),b++;return new this(R)}catch(A){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${A})`)}},_.IPv6.parse=function(C){let I=this.parser(C);if(I.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(I.parts,I.zoneId)},_.IPv6.parseCIDR=function(C){let I,b,E;if((b=C.match(/^(.+)\/(\d+)$/))&&(I=parseInt(b[2]),I>=0&&I<=128))return E=[this.parse(b[1]),I],Object.defineProperty(E,"toString",{value:function(){return this.join("/")}}),E;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},_.IPv6.parser=function(C){let I,b,E,R,T,A;if(E=C.match(a.deprecatedTransitional))return this.parser(`::ffff:${E[1]}`);if(a.native.test(C))return l(C,8);if((E=C.match(a.transitional))&&(A=E[6]||"",I=E[1],E[1].endsWith("::")||(I=I.slice(0,-1)),I=l(I+A,6),I.parts)){for(T=[parseInt(E[2]),parseInt(E[3]),parseInt(E[4]),parseInt(E[5])],b=0;b<T.length;b++)if(R=T[b],!(0<=R&&R<=255))return null;return I.parts.push(T[0]<<8|T[1]),I.parts.push(T[2]<<8|T[3]),{parts:I.parts,zoneId:I.zoneId}}return null},_.IPv6.subnetMaskFromPrefixLength=function(C){if(C=parseInt(C),C<0||C>128)throw new Error("ipaddr: invalid IPv6 prefix length");let I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,E=Math.floor(C/8);for(;b<E;)I[b]=255,b++;return E<16&&(I[E]=Math.pow(2,C%8)-1<<8-C%8),new this(I)},_.fromByteArray=function(C){let I=C.length;if(I===4)return new _.IPv4(C);if(I===16)return new _.IPv6(C);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},_.isValid=function(C){return _.IPv6.isValid(C)||_.IPv4.isValid(C)},_.isValidCIDR=function(C){return _.IPv6.isValidCIDR(C)||_.IPv4.isValidCIDR(C)},_.parse=function(C){if(_.IPv6.isValid(C))return _.IPv6.parse(C);if(_.IPv4.isValid(C))return _.IPv4.parse(C);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},_.parseCIDR=function(C){try{return _.IPv6.parseCIDR(C)}catch{try{return _.IPv4.parseCIDR(C)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},_.process=function(C){let I=this.parse(C);return I.kind()==="ipv6"&&I.isIPv4MappedAddress()?I.toIPv4Address():I},_.subnetMatch=function(C,I,b){let E,R,T,A;b==null&&(b="unicast");for(R in I)if(Object.prototype.hasOwnProperty.call(I,R)){for(T=I[R],T[0]&&!(T[0]instanceof Array)&&(T=[T]),E=0;E<T.length;E++)if(A=T[E],C.kind()===A[0].kind()&&C.match.apply(C,A))return R}return b},typeof cv<"u"&&cv.exports?cv.exports=_:i.ipaddr=_})(sB)});var Gc=oE((VF,BF)=>{(function(i,n){typeof define=="function"&&define.amd?define([],n):typeof VF<"u"?n():(n(),i.FileSaver={})})(VF,function(){"use strict";function i(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function n(a,l,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){s(d.response,l,c)},d.onerror=function(){console.error("could not download file")},d.send()}function e(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function t(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,c){var d=r.URL||r.webkitURL,h=document.createElement("a");l=l||a.name||"download",h.download=l,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?t(h):e(h.href)?n(a,l,c):t(h,h.target="_blank")):(h.href=d.createObjectURL(a),setTimeout(function(){d.revokeObjectURL(h.href)},4e4),setTimeout(function(){t(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(i(a,c),l);else if(e(a))n(a,l,c);else{var d=document.createElement("a");d.href=a,d.target="_blank",setTimeout(function(){t(d)})}}:function(a,l,c,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof a=="string")return n(a,l,c);var h=a.type==="application/octet-stream",_=/constructor/i.test(r.HTMLElement)||r.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||h&&_||o)&&typeof FileReader<"u"){var I=new FileReader;I.onloadend=function(){var R=I.result;R=C?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=R:location=R,d=null},I.readAsDataURL(a)}else{var b=r.URL||r.webkitURL,E=b.createObjectURL(a);d?d.location=E:location.href=E,d=null,setTimeout(function(){b.revokeObjectURL(E)},4e4)}});r.saveAs=s.saveAs=s,typeof BF<"u"&&(BF.exports=s)})});function Ok(i,n){return Object.is(i,n)}var So=null,Og=!1,HC=1,Il=Symbol("SIGNAL");function un(i){let n=So;return So=i,n}function Rk(){return So}function vK(){return Og}var zh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zC(i){if(Og)throw new Error("");if(So===null)return;So.consumerOnSignalRead(i);let n=So.nextProducerIndex++;if(YC(So),n<So.producerNode.length&&So.producerNode[n]!==i&&Rg(So)){let e=So.producerNode[n];qC(e,So.producerIndexOfThis[n])}So.producerNode[n]!==i&&(So.producerNode[n]=i,So.producerIndexOfThis[n]=Rg(So)?Nk(i,So,n):0),So.producerLastReadVersion[n]=i.version}function bK(){HC++}function Pk(i){if(!(Rg(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===HC)){if(!i.producerMustRecompute(i)&&!$C(i)){i.dirty=!1,i.lastCleanEpoch=HC;return}i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=HC}}function Dk(i){if(i.liveConsumerNode===void 0)return;let n=Og;Og=!0;try{for(let e of i.liveConsumerNode)e.dirty||kk(e)}finally{Og=n}}function Fk(){return So?.consumerAllowSignalWrites!==!1}function kk(i){i.dirty=!0,Dk(i),i.consumerMarkedDirty?.(i)}function Pg(i){return i&&(i.nextProducerIndex=0),un(i)}function KC(i,n){if(un(n),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(Rg(i))for(let e=i.nextProducerIndex;e<i.producerNode.length;e++)qC(i.producerNode[e],i.producerIndexOfThis[e]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function $C(i){YC(i);for(let n=0;n<i.producerNode.length;n++){let e=i.producerNode[n],t=i.producerLastReadVersion[n];if(t!==e.version||(Pk(e),t!==e.version))return!0}return!1}function JC(i){if(YC(i),Rg(i))for(let n=0;n<i.producerNode.length;n++)qC(i.producerNode[n],i.producerIndexOfThis[n]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function Nk(i,n,e){if(Lk(i),i.liveConsumerNode.length===0&&Mk(i))for(let t=0;t<i.producerNode.length;t++)i.producerIndexOfThis[t]=Nk(i.producerNode[t],i,t);return i.liveConsumerIndexOfThis.push(e),i.liveConsumerNode.push(n)-1}function qC(i,n){if(Lk(i),i.liveConsumerNode.length===1&&Mk(i))for(let t=0;t<i.producerNode.length;t++)qC(i.producerNode[t],i.producerIndexOfThis[t]);let e=i.liveConsumerNode.length-1;if(i.liveConsumerNode[n]=i.liveConsumerNode[e],i.liveConsumerIndexOfThis[n]=i.liveConsumerIndexOfThis[e],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,n<i.liveConsumerNode.length){let t=i.liveConsumerIndexOfThis[n],r=i.liveConsumerNode[n];YC(r),r.producerIndexOfThis[t]=n}}function Rg(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function YC(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function Lk(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function Mk(i){return i.producerNode!==void 0}function Vk(i){let n=Object.create(SK);n.computation=i;let e=()=>{if(Pk(n),zC(n),n.value===WC)throw n.error;return n.value};return e[Il]=n,e}var sE=Symbol("UNSET"),aE=Symbol("COMPUTING"),WC=Symbol("ERRORED"),SK=ke(oe({},zh),{value:sE,dirty:!0,error:null,equal:Ok,producerMustRecompute(i){return i.value===sE||i.value===aE},producerRecomputeValue(i){if(i.value===aE)throw new Error("Detected cycle in computations.");let n=i.value;i.value=aE;let e=Pg(i),t;try{t=i.computation()}catch(r){t=WC,i.error=r}finally{KC(i,e)}if(n!==sE&&n!==WC&&t!==WC&&i.equal(n,t)){i.value=n;return}i.value=t,i.version++}});function EK(){throw new Error}var Bk=EK;function Uk(){Bk()}function jk(i){Bk=i}var AK=null;function Gk(i){let n=Object.create(cE);n.value=i;let e=()=>(zC(n),n.value);return e[Il]=n,e}function XC(i,n){Fk()||Uk(),i.equal(i.value,n)||(i.value=n,xK(i))}function Hk(i,n){Fk()||Uk(),XC(i,n(i.value))}var cE=ke(oe({},zh),{equal:Ok,value:void 0});function xK(i){i.version++,bK(),Dk(i),AK?.()}function Wk(i,n,e){let t=Object.create(TK);e&&(t.consumerAllowSignalWrites=!0),t.fn=i,t.schedule=n;let r=l=>{t.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(JC(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=lE)}let a=()=>{if(t.fn===null)return;if(vK())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(t.dirty=!1,t.hasRun&&!$C(t))return;t.hasRun=!0;let l=Pg(t);try{t.cleanupFn(),t.cleanupFn=lE,t.fn(r)}finally{KC(t,l)}};return t.ref={notify:()=>kk(t),run:a,cleanup:()=>t.cleanupFn(),destroy:()=>s(t),[Il]:t},t.ref}var lE=()=>{},TK=ke(oe({},zh),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule!==null&&i.schedule(i.ref)},hasRun:!1,cleanupFn:lE});function Oi(i){return typeof i=="function"}function tp(i){let e=i(t=>{Error.call(t),t.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var QC=tp(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Pu(i,n){if(i){let e=i.indexOf(n);0<=e&&i.splice(e,1)}}var Dr=class i{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:t}=this;if(Oi(t))try{t()}catch(o){n=o instanceof QC?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{zk(o)}catch(s){n=n??[],s instanceof QC?n=[...n,...s.errors]:n.push(s)}}if(n)throw new QC(n)}}add(n){var e;if(n&&n!==this)if(this.closed)zk(n);else{if(n instanceof i){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&Pu(e,n)}remove(n){let{_finalizers:e}=this;e&&Pu(e,n),n instanceof i&&n._removeParent(this)}};Dr.EMPTY=(()=>{let i=new Dr;return i.closed=!0,i})();var dE=Dr.EMPTY;function ZC(i){return i instanceof Dr||i&&"closed"in i&&Oi(i.remove)&&Oi(i.add)&&Oi(i.unsubscribe)}function zk(i){Oi(i)?i():i.unsubscribe()}var yl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Kh={setTimeout(i,n,...e){let{delegate:t}=Kh;return t?.setTimeout?t.setTimeout(i,n,...e):setTimeout(i,n,...e)},clearTimeout(i){let{delegate:n}=Kh;return(n?.clearTimeout||clearTimeout)(i)},delegate:void 0};function eI(i){Kh.setTimeout(()=>{let{onUnhandledError:n}=yl;if(n)n(i);else throw i})}function wl(){}var Kk=pE("C",void 0,void 0);function $k(i){return pE("E",void 0,i)}function Jk(i){return pE("N",i,void 0)}function pE(i,n,e){return{kind:i,value:n,error:e}}var Du=null;function $h(i){if(yl.useDeprecatedSynchronousErrorHandling){let n=!Du;if(n&&(Du={errorThrown:!1,error:null}),i(),n){let{errorThrown:e,error:t}=Du;if(Du=null,e)throw t}}else i()}function qk(i){yl.useDeprecatedSynchronousErrorHandling&&Du&&(Du.errorThrown=!0,Du.error=i)}var Fu=class extends Dr{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,ZC(n)&&n.add(this)):this.destination=PK}static create(n,e,t){return new vl(n,e,t)}next(n){this.isStopped?hE(Jk(n),this):this._next(n)}error(n){this.isStopped?hE($k(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?hE(Kk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OK=Function.prototype.bind;function uE(i,n){return OK.call(i,n)}var fE=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(t){tI(t)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(t){tI(t)}else tI(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){tI(e)}}},vl=class extends Fu{constructor(n,e,t){super();let r;if(Oi(n)||!n)r={next:n??void 0,error:e??void 0,complete:t??void 0};else{let o;this&&yl.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&uE(n.next,o),error:n.error&&uE(n.error,o),complete:n.complete&&uE(n.complete,o)}):r=n}this.destination=new fE(r)}};function tI(i){yl.useDeprecatedSynchronousErrorHandling?qk(i):eI(i)}function RK(i){throw i}function hE(i,n){let{onStoppedNotification:e}=yl;e&&Kh.setTimeout(()=>e(i,n))}var PK={closed:!0,next:wl,error:RK,complete:wl};var Jh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function es(i){return i}function mE(...i){return gE(i)}function gE(i){return i.length===0?es:i.length===1?i[0]:function(e){return i.reduce((t,r)=>r(t),e)}}var Ai=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){let t=new i;return t.source=this,t.operator=e,t}subscribe(e,t,r){let o=FK(e)?e:new vl(e,t,r);return $h(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(t){e.error(t)}}forEach(e,t){return t=Yk(t),new t((r,o)=>{let s=new vl({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)}[Jh](){return this}pipe(...e){return gE(e)(this)}toPromise(e){return e=Yk(e),new e((t,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>t(o))})}}return i.create=n=>new i(n),i})();function Yk(i){var n;return(n=i??yl.Promise)!==null&&n!==void 0?n:Promise}function DK(i){return i&&Oi(i.next)&&Oi(i.error)&&Oi(i.complete)}function FK(i){return i&&i instanceof Fu||DK(i)&&ZC(i)}function _E(i){return Oi(i?.lift)}function $t(i){return n=>{if(_E(n))return n.lift(function(e){try{return i(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mt(i,n,e,t,r){return new Dg(i,n,e,t,r)}var Dg=class extends Fu{constructor(n,e,t,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function qh(){return $t((i,n)=>{let e=null;i._refCount++;let t=Mt(n,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount){e=null;return}let r=i._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});i.subscribe(t),t.closed||(e=i.connect())})}var Yh=class extends Ai{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,_E(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Dr;let e=this.getSubject();n.add(this.source.subscribe(Mt(e,void 0,()=>{this._teardown(),e.complete()},t=>{this._teardown(),e.error(t)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Dr.EMPTY)}return n}refCount(){return qh()(this)}};var Xk=tp(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class i extends Ai{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let t=new iI(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new Xk}next(e){$h(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(e)}})}error(e){$h(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:t}=this;for(;t.length;)t.shift().error(e)}})}complete(){$h(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:t,isStopped:r,observers:o}=this;return t||r?dE:(this.currentObservers=null,o.push(e),new Dr(()=>{this.currentObservers=null,Pu(o,e)}))}_checkFinalizedStatuses(e){let{hasError:t,thrownError:r,isStopped:o}=this;t?e.error(r):o&&e.complete()}asObservable(){let e=new Ai;return e.source=this,e}}return i.create=(n,e)=>new iI(n,e),i})(),iI=class extends Ue{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.next)===null||t===void 0||t.call(e,n)}error(n){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.error)===null||t===void 0||t.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,t;return(t=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&t!==void 0?t:dE}};var vn=class extends Ue{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:t}=this;if(n)throw e;return this._throwIfClosed(),t}next(n){super.next(this._value=n)}};var Fg={now(){return(Fg.delegate||Date).now()},delegate:void 0};var kg=class extends Ue{constructor(n=1/0,e=1/0,t=Fg){super(),this._bufferSize=n,this._windowTime=e,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,e)}next(n){let{isStopped:e,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(t.push(n),!r&&t.push(o.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(n),{_infiniteTimeWindow:t,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!n.closed;s+=t?1:2)n.next(o[s]);return this._checkFinalizedStatuses(n),e}_trimBuffer(){let{_bufferSize:n,_timestampProvider:e,_buffer:t,_infiniteTimeWindow:r}=this,o=(r?1:2)*n;if(n<1/0&&o<t.length&&t.splice(0,t.length-o),!r){let s=e.now(),a=0;for(let l=1;l<t.length&&t[l]<=s;l+=2)a=l;a&&t.splice(0,a+1)}}};var nI=class extends Dr{constructor(n,e){super()}schedule(n,e=0){return this}};var Ng={setInterval(i,n,...e){let{delegate:t}=Ng;return t?.setInterval?t.setInterval(i,n,...e):setInterval(i,n,...e)},clearInterval(i){let{delegate:n}=Ng;return(n?.clearInterval||clearInterval)(i)},delegate:void 0};var Xh=class extends nI{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var t;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,t=0){return Ng.setInterval(n.flush.bind(n,this),t)}recycleAsyncId(n,e,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return e;e!=null&&Ng.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(n,e);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let t=!1,r;try{this.work(n)}catch(o){t=!0,r=o||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:t}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Pu(t,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var Qh=class i{constructor(n,e=i.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,t){return new this.schedulerActionCtor(this,n).schedule(t,e)}};Qh.now=Fg.now;var Zh=class extends Qh{constructor(n,e=Qh.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let t;this._active=!0;do if(t=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,t){for(;n=e.shift();)n.unsubscribe();throw t}}};var bl=new Zh(Xh),Qk=bl;var rI=class extends Xh{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,t=0){return t!=null&&t>0||t==null&&this.delay>0?super.requestAsyncId(n,e,t):(n.flush(this),0)}};var oI=class extends Zh{};var CE=new oI(rI);var Eo=new Ai(i=>i.complete());function sI(i){return i&&Oi(i.schedule)}function IE(i){return i[i.length-1]}function ip(i){return Oi(IE(i))?i.pop():void 0}function Jl(i){return sI(IE(i))?i.pop():void 0}function Zk(i,n){return typeof IE(i)=="number"?i.pop():n}function tN(i,n,e,t){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(t.next(d))}catch(h){s(h)}}function l(d){try{c(t.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):r(d.value).then(a,l)}c((t=t.apply(i,n||[])).next())})}function eN(i){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&i[n],t=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&t>=i.length&&(i=void 0),{value:i&&i[t++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ku(i){return this instanceof ku?(this.v=i,this):new ku(i)}function iN(i,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(i,n||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(C){return function(I){return Promise.resolve(I).then(C,h)}}function a(C,I){t[C]&&(r[C]=function(b){return new Promise(function(E,R){o.push([C,b,E,R])>1||l(C,b)})},I&&(r[C]=I(r[C])))}function l(C,I){try{c(t[C](I))}catch(b){_(o[0][3],b)}}function c(C){C.value instanceof ku?Promise.resolve(C.value.v).then(d,h):_(o[0][2],C)}function d(C){l("next",C)}function h(C){l("throw",C)}function _(C,I){C(I),o.shift(),o.length&&l(o[0][0],o[0][1])}}function nN(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i[Symbol.asyncIterator],e;return n?n.call(i):(i=typeof eN=="function"?eN(i):i[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(o){e[o]=i[o]&&function(s){return new Promise(function(a,l){s=i[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var aI=i=>i&&typeof i.length=="number"&&typeof i!="function";function lI(i){return Oi(i?.then)}function cI(i){return Oi(i[Jh])}function dI(i){return Symbol.asyncIterator&&Oi(i?.[Symbol.asyncIterator])}function pI(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kK(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uI=kK();function hI(i){return Oi(i?.[uI])}function fI(i){return iN(this,arguments,function*(){let e=i.getReader();try{for(;;){let{value:t,done:r}=yield ku(e.read());if(r)return yield ku(void 0);yield yield ku(t)}}finally{e.releaseLock()}})}function mI(i){return Oi(i?.getReader)}function zi(i){if(i instanceof Ai)return i;if(i!=null){if(cI(i))return NK(i);if(aI(i))return LK(i);if(lI(i))return MK(i);if(dI(i))return rN(i);if(hI(i))return VK(i);if(mI(i))return BK(i)}throw pI(i)}function NK(i){return new Ai(n=>{let e=i[Jh]();if(Oi(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LK(i){return new Ai(n=>{for(let e=0;e<i.length&&!n.closed;e++)n.next(i[e]);n.complete()})}function MK(i){return new Ai(n=>{i.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,eI)})}function VK(i){return new Ai(n=>{for(let e of i)if(n.next(e),n.closed)return;n.complete()})}function rN(i){return new Ai(n=>{UK(i,n).catch(e=>n.error(e))})}function BK(i){return rN(fI(i))}function UK(i,n){var e,t,r,o;return tN(this,void 0,void 0,function*(){try{for(e=nN(i);t=yield e.next(),!t.done;){let s=t.value;if(n.next(s),n.closed)return}}catch(s){r={error:s}}finally{try{t&&!t.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})}function ys(i,n,e,t=0,r=!1){let o=n.schedule(function(){e(),r?i.add(this.schedule(null,t)):this.unsubscribe()},t);if(i.add(o),!r)return o}function Nu(i,n=0){return $t((e,t)=>{e.subscribe(Mt(t,r=>ys(t,i,()=>t.next(r),n),()=>ys(t,i,()=>t.complete(),n),r=>ys(t,i,()=>t.error(r),n)))})}function gI(i,n=0){return $t((e,t)=>{t.add(i.schedule(()=>e.subscribe(t),n))})}function oN(i,n){return zi(i).pipe(gI(n),Nu(n))}function sN(i,n){return zi(i).pipe(gI(n),Nu(n))}function aN(i,n){return new Ai(e=>{let t=0;return n.schedule(function(){t===i.length?e.complete():(e.next(i[t++]),e.closed||this.schedule())})})}function lN(i,n){return new Ai(e=>{let t;return ys(e,n,()=>{t=i[uI](),ys(e,n,()=>{let r,o;try{({value:r,done:o}=t.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Oi(t?.return)&&t.return()})}function _I(i,n){if(!i)throw new Error("Iterable cannot be null");return new Ai(e=>{ys(e,n,()=>{let t=i[Symbol.asyncIterator]();ys(e,n,()=>{t.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function cN(i,n){return _I(fI(i),n)}function dN(i,n){if(i!=null){if(cI(i))return oN(i,n);if(aI(i))return aN(i,n);if(lI(i))return sN(i,n);if(dI(i))return _I(i,n);if(hI(i))return lN(i,n);if(mI(i))return cN(i,n)}throw pI(i)}function bn(i,n){return n?dN(i,n):zi(i)}function vt(...i){let n=Jl(i);return bn(i,n)}function ma(i,n){let e=Oi(i)?i:()=>i,t=r=>r.error(e());return new Ai(n?r=>n.schedule(t,0,r):t)}var np=class i{constructor(n,e,t){this.kind=n,this.value=e,this.error=t,this.hasValue=n==="N"}observe(n){return yE(this,n)}do(n,e,t){let{kind:r,value:o,error:s}=this;return r==="N"?n?.(o):r==="E"?e?.(s):t?.()}accept(n,e,t){var r;return Oi((r=n)===null||r===void 0?void 0:r.next)?this.observe(n):this.do(n,e,t)}toObservable(){let{kind:n,value:e,error:t}=this,r=n==="N"?vt(e):n==="E"?ma(()=>t):n==="C"?Eo:0;if(!r)throw new TypeError(`Unexpected notification kind ${n}`);return r}static createNext(n){return new i("N",n)}static createError(n){return new i("E",void 0,n)}static createComplete(){return i.completeNotification}};np.completeNotification=new np("C");function yE(i,n){var e,t,r;let{kind:o,value:s,error:a}=i;if(typeof o!="string")throw new TypeError('Invalid notification, missing "kind"');o==="N"?(e=n.next)===null||e===void 0||e.call(n,s):o==="E"?(t=n.error)===null||t===void 0||t.call(n,a):(r=n.complete)===null||r===void 0||r.call(n)}function $c(i){return!!i&&(i instanceof Ai||Oi(i.lift)&&Oi(i.subscribe))}var ga=tp(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function jK(i,n){let e=typeof n=="object";return new Promise((t,r)=>{let o=!1,s;i.subscribe({next:a=>{s=a,o=!0},error:r,complete:()=>{o?t(s):e?t(n.defaultValue):r(new ga)}})})}function Jc(i,n){let e=typeof n=="object";return new Promise((t,r)=>{let o=new vl({next:s=>{t(s),o.unsubscribe()},error:r,complete:()=>{e?t(n.defaultValue):r(new ga)}});i.subscribe(o)})}function CI(i){return i instanceof Date&&!isNaN(i)}var GK=tp(i=>function(e=null){i(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function HK(i,n){let{first:e,each:t,with:r=WK,scheduler:o=n??bl,meta:s=null}=CI(i)?{first:i}:typeof i=="number"?{each:i}:i;if(e==null&&t==null)throw new TypeError("No timeout provided.");return $t((a,l)=>{let c,d,h=null,_=0,C=I=>{d=ys(l,o,()=>{try{c.unsubscribe(),zi(r({meta:s,lastValue:h,seen:_})).subscribe(l)}catch(b){l.error(b)}},I)};c=a.subscribe(Mt(l,I=>{d?.unsubscribe(),_++,l.next(h=I),t>0&&C(t)},void 0,void 0,()=>{d?.closed||d?.unsubscribe(),h=null})),!_&&C(e!=null?typeof e=="number"?e:+e-o.now():t)})}function WK(i){throw new GK(i)}function K(i,n){return $t((e,t)=>{let r=0;e.subscribe(Mt(t,o=>{t.next(i.call(n,o,r++))}))})}var{isArray:zK}=Array;function KK(i,n){return zK(n)?i(...n):i(n)}function II(i){return K(n=>KK(i,n))}var{isArray:$K}=Array,{getPrototypeOf:JK,prototype:qK,keys:YK}=Object;function yI(i){if(i.length===1){let n=i[0];if($K(n))return{args:n,keys:null};if(XK(n)){let e=YK(n);return{args:e.map(t=>n[t]),keys:e}}}return{args:i,keys:null}}function XK(i){return i&&typeof i=="object"&&JK(i)===qK}function wI(i,n){return i.reduce((e,t,r)=>(e[t]=n[r],e),{})}function Lg(...i){let n=Jl(i),e=ip(i),{args:t,keys:r}=yI(i);if(t.length===0)return bn([],n);let o=new Ai(QK(t,n,r?s=>wI(r,s):es));return e?o.pipe(II(e)):o}function QK(i,n,e=es){return t=>{pN(n,()=>{let{length:r}=i,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)pN(n,()=>{let c=bn(i[l],n),d=!1;c.subscribe(Mt(t,h=>{o[l]=h,d||(d=!0,a--),a||t.next(e(o.slice()))},()=>{--s||t.complete()}))},t)},t)}}function pN(i,n,e){i?ys(e,i,n):n()}function uN(i,n,e,t,r,o,s,a){let l=[],c=0,d=0,h=!1,_=()=>{h&&!l.length&&!c&&n.complete()},C=b=>c<t?I(b):l.push(b),I=b=>{o&&n.next(b),c++;let E=!1;zi(e(b,d++)).subscribe(Mt(n,R=>{r?.(R),o?C(R):n.next(R)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<t;){let R=l.shift();s?ys(n,s,()=>I(R)):I(R)}_()}catch(R){n.error(R)}}))};return i.subscribe(Mt(n,C,()=>{h=!0,_()})),()=>{a?.()}}function Yn(i,n,e=1/0){return Oi(n)?Yn((t,r)=>K((o,s)=>n(t,o,r,s))(zi(i(t,r))),e):(typeof n=="number"&&(e=n),$t((t,r)=>uN(t,r,i,e)))}function ql(i=1/0){return Yn(es,i)}function hN(){return ql(1)}function Sl(...i){return hN()(bn(i,Jl(i)))}function Lu(i){return new Ai(n=>{zi(i()).subscribe(n)})}function Mg(...i){let n=ip(i),{args:e,keys:t}=yI(i),r=new Ai(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let h=!1;zi(e[d]).subscribe(Mt(o,_=>{h||(h=!0,c--),a[d]=_},()=>l--,void 0,()=>{(!l||!h)&&(c||o.next(t?wI(t,a):a),o.complete())}))}});return n?r.pipe(II(n)):r}function El(i=0,n,e=Qk){let t=-1;return n!=null&&(sI(n)?e=n:t=n),new Ai(r=>{let o=CI(i)?+i-e.now():i;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=t?this.schedule(void 0,t):r.complete())},o)})}function ZK(i=0,n=bl){return i<0&&(i=0),El(i,i,n)}function wE(...i){let n=Jl(i),e=Zk(i,1/0),t=i;return t.length?t.length===1?zi(t[0]):ql(e)(bn(t,n)):Eo}var{isArray:e$}=Array;function fN(i){return i.length===1&&e$(i[0])?i[0]:i}function Ao(i,n){return $t((e,t)=>{let r=0;e.subscribe(Mt(t,o=>i.call(n,o,r++)&&t.next(o)))})}function vE(...i){let n=ip(i),e=fN(i);return e.length?new Ai(t=>{let r=e.map(()=>[]),o=e.map(()=>!1);t.add(()=>{r=o=null});for(let s=0;!t.closed&&s<e.length;s++)zi(e[s]).subscribe(Mt(t,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(c=>c.shift());t.next(n?n(...l):l),r.some((c,d)=>!c.length&&o[d])&&t.complete()}},()=>{o[s]=!0,!r[s].length&&t.complete()}));return()=>{r=o=null}}):Eo}function mN(i){return $t((n,e)=>{let t=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,t){t=!1;let c=r;r=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};n.subscribe(Mt(e,c=>{t=!0,r=c,o||zi(i(c)).subscribe(o=Mt(e,a,l))},()=>{s=!0,(!t||!o||o.closed)&&e.complete()}))})}function bE(i,n=bl){return mN(()=>El(i,n))}function q(i){return $t((n,e)=>{let t=null,r=!1,o;t=n.subscribe(Mt(e,void 0,void 0,s=>{o=zi(i(s,q(i)(n))),t?(t.unsubscribe(),t=null,o.subscribe(e)):r=!0})),r&&(t.unsubscribe(),t=null,o.subscribe(e))})}function gN(i,n,e,t,r){return(o,s)=>{let a=e,l=n,c=0;o.subscribe(Mt(s,d=>{let h=c++;l=a?i(l,d,h):(a=!0,d),t&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Al(i,n){return Oi(n)?Yn(i,n,1):Yn(i,1)}function t$(i){return $t((n,e)=>{let t=!1,r=null,o=null,s=()=>{if(o?.unsubscribe(),o=null,t){t=!1;let a=r;r=null,e.next(a)}};n.subscribe(Mt(e,a=>{o?.unsubscribe(),t=!0,r=a,o=Mt(e,s,wl),zi(i(a)).subscribe(o)},()=>{s(),e.complete()},void 0,()=>{r=o=null}))})}function ef(i,n=bl){return $t((e,t)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,t.next(c)}};function l(){let c=s+i,d=n.now();if(d<c){r=this.schedule(void 0,c-d),t.add(r);return}a()}e.subscribe(Mt(t,c=>{o=c,s=n.now(),r||(r=n.schedule(l,i),t.add(r))},()=>{a(),t.complete()},void 0,()=>{o=r=null}))})}function rp(i){return $t((n,e)=>{let t=!1;n.subscribe(Mt(e,r=>{t=!0,e.next(r)},()=>{t||e.next(i),e.complete()}))})}function ts(i){return i<=0?()=>Eo:$t((n,e)=>{let t=0;n.subscribe(Mt(e,r=>{++t<=i&&(e.next(r),i<=t&&e.complete())}))})}function SE(){return $t((i,n)=>{i.subscribe(Mt(n,wl))})}function Mu(i){return K(()=>i)}function EE(i,n){return n?e=>Sl(n.pipe(ts(1),SE()),e.pipe(EE(i))):Yn((e,t)=>zi(i(e,t)).pipe(ts(1),Mu(e)))}function i$(i,n=bl){let e=El(i,n);return EE(()=>e)}function n$(){return $t((i,n)=>{i.subscribe(Mt(n,e=>yE(e,n)))})}function qc(i,n=es){return i=i??r$,$t((e,t)=>{let r,o=!0;e.subscribe(Mt(t,s=>{let a=n(s);(o||!i(r,a))&&(o=!1,r=a,t.next(s))}))})}function r$(i,n){return i===n}function vI(i=o$){return $t((n,e)=>{let t=!1;n.subscribe(Mt(e,r=>{t=!0,e.next(r)},()=>t?e.complete():e.error(i())))})}function o$(){return new ga}function _N(i,n){return n?e=>e.pipe(_N((t,r)=>zi(i(t,r)).pipe(K((o,s)=>n(t,o,r,s))))):$t((e,t)=>{let r=0,o=null,s=!1;e.subscribe(Mt(t,a=>{o||(o=Mt(t,void 0,()=>{o=null,s&&t.complete()}),zi(i(a,r++)).subscribe(o))},()=>{s=!0,!o&&t.complete()}))})}function op(i){return $t((n,e)=>{try{n.subscribe(e)}finally{e.add(i)}})}function xl(i,n){let e=arguments.length>=2;return t=>t.pipe(i?Ao((r,o)=>i(r,o,t)):es,ts(1),e?rp(n):vI(()=>new ga))}function s$(i,n,e,t){return $t((r,o)=>{let s;!n||typeof n=="function"?s=n:{duration:e,element:s,connector:t}=n;let a=new Map,l=I=>{a.forEach(I),I(o)},c=I=>l(b=>b.error(I)),d=0,h=!1,_=new Dg(o,I=>{try{let b=i(I),E=a.get(b);if(!E){a.set(b,E=t?t():new Ue);let R=C(b,E);if(o.next(R),e){let T=Mt(E,()=>{E.complete(),T?.unsubscribe()},void 0,void 0,()=>a.delete(b));_.add(zi(e(R)).subscribe(T))}}E.next(s?s(I):I)}catch(b){c(b)}},()=>l(I=>I.complete()),c,()=>a.clear(),()=>(h=!0,d===0));r.subscribe(_);function C(I,b){let E=new Ai(R=>{d++;let T=b.subscribe(R);return()=>{T.unsubscribe(),--d===0&&h&&_.unsubscribe()}});return E.key=I,E}})}function tf(i){return i<=0?()=>Eo:$t((n,e)=>{let t=[];n.subscribe(Mt(e,r=>{t.push(r),i<t.length&&t.shift()},()=>{for(let r of t)e.next(r);e.complete()},void 0,()=>{t=null}))})}function AE(i,n){let e=arguments.length>=2;return t=>t.pipe(i?Ao((r,o)=>i(r,o,t)):es,tf(1),e?rp(n):vI(()=>new ga))}function a$(){return $t((i,n)=>{i.subscribe(Mt(n,e=>{n.next(np.createNext(e))},()=>{n.next(np.createComplete()),n.complete()},e=>{n.next(np.createError(e)),n.complete()}))})}function xE(...i){let n=i.length;if(n===0)throw new Error("list of properties cannot be empty.");return K(e=>{let t=e;for(let r=0;r<n;r++){let o=t?.[i[r]];if(typeof o<"u")t=o;else return}return t})}function Vg(i,n){return $t(gN(i,n,arguments.length>=2,!0))}function OE(i={}){let{connector:n=()=>new Ue,resetOnError:e=!0,resetOnComplete:t=!0,resetOnRefCountZero:r=!0}=i;return o=>{let s,a,l,c=0,d=!1,h=!1,_=()=>{a?.unsubscribe(),a=void 0},C=()=>{_(),s=l=void 0,d=h=!1},I=()=>{let b=s;C(),b?.unsubscribe()};return $t((b,E)=>{c++,!h&&!d&&_();let R=l=l??n();E.add(()=>{c--,c===0&&!h&&!d&&(a=TE(I,r))}),R.subscribe(E),!s&&c>0&&(s=new vl({next:T=>R.next(T),error:T=>{h=!0,_(),a=TE(C,e,T),R.error(T)},complete:()=>{d=!0,_(),a=TE(C,t),R.complete()}}),zi(b).subscribe(s))})(o)}}function TE(i,n,...e){if(n===!0){i();return}if(n===!1)return;let t=new vl({next:()=>{t.unsubscribe(),i()}});return zi(n(...e)).subscribe(t)}function nf(i,n,e){let t,r=!1;return i&&typeof i=="object"?{bufferSize:t=1/0,windowTime:n=1/0,refCount:r=!1,scheduler:e}=i:t=i??1/0,OE({connector:()=>new kg(t,n,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function l$(i){return Ao((n,e)=>i<=e)}function Bg(...i){let n=Jl(i);return $t((e,t)=>{(n?Sl(i,e,n):Sl(i,e)).subscribe(t)})}function xo(i,n){return $t((e,t)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&t.complete();e.subscribe(Mt(t,l=>{r?.unsubscribe();let c=0,d=o++;zi(i(l,d)).subscribe(r=Mt(t,h=>t.next(n?n(l,h,d,c++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Vu(i){return $t((n,e)=>{zi(i).subscribe(Mt(e,()=>e.complete(),wl)),!e.closed&&n.subscribe(e)})}function yt(i,n=!1){return $t((e,t)=>{let r=0;e.subscribe(Mt(t,o=>{let s=i(o,r++);(s||n)&&t.next(o),!s&&t.complete()}))})}function Lo(i,n,e){let t=Oi(i)||n||e?{next:i,error:n,complete:e}:i;return t?$t((r,o)=>{var s;(s=t.subscribe)===null||s===void 0||s.call(t);let a=!0;r.subscribe(Mt(o,l=>{var c;(c=t.next)===null||c===void 0||c.call(t,l),o.next(l)},()=>{var l;a=!1,(l=t.complete)===null||l===void 0||l.call(t),o.complete()},l=>{var c;a=!1,(c=t.error)===null||c===void 0||c.call(t,l),o.error(l)},()=>{var l,c;a&&((l=t.unsubscribe)===null||l===void 0||l.call(t)),(c=t.finalize)===null||c===void 0||c.call(t)}))}):es}function RE(...i){let n=ip(i);return $t((e,t)=>{let r=i.length,o=new Array(r),s=i.map(()=>!1),a=!1;for(let l=0;l<r;l++)zi(i[l]).subscribe(Mt(t,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(es))&&(s=null))},wl));e.subscribe(Mt(t,l=>{if(a){let c=[l,...o];t.next(n?n(...c):c)}}))})}var dL="https://g.co/ng/security#xss",xt=class extends Error{constructor(n,e){super(hy(n,e)),this.code=n}};function hy(i,n){return`${`NG0${Math.abs(i)}`}${n?": "+n:""}`}var pL=Symbol("InputSignalNode#UNSET"),c$=ke(oe({},cE),{transformFn:void 0,applyValueToInputSignal(i,n){XC(i,n)}});function uL(i,n){let e=Object.create(c$);e.value=i,e.transformFn=n?.transform;function t(){if(zC(e),e.value===pL)throw new xt(-950,!1);return e.value}return t[Il]=e,t}function Xg(i){return{toString:i}.toString()}var bI="__parameters__";function d$(i){return function(...e){if(i){let t=i(...e);for(let r in t)this[r]=t[r]}}}function nx(i,n,e){return Xg(()=>{let t=d$(n);function r(...o){if(this instanceof r)return t.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,d){let h=l.hasOwnProperty(bI)?l[bI]:Object.defineProperty(l,bI,{value:[]})[bI];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}var is=globalThis;function ir(i){for(let n in i)if(i[n]===ir)return n;throw Error("Could not find renamed property on target object.")}function p$(i,n){for(let e in n)n.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=n[e])}function Ns(i){if(typeof i=="string")return i;if(Array.isArray(i))return"["+i.map(Ns).join(", ")+"]";if(i==null)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;let n=i.toString();if(n==null)return""+n;let e=n.indexOf(`
`);return e===-1?n:n.substring(0,e)}function zE(i,n){return i==null||i===""?n===null?"":n:n==null||n===""?i:i+" "+n}var u$=ir({__forward_ref__:ir});function Zt(i){return i.__forward_ref__=Zt,i.toString=function(){return Ns(this())},i}function ks(i){return hL(i)?i():i}function hL(i){return typeof i=="function"&&i.hasOwnProperty(u$)&&i.__forward_ref__===Zt}function Ce(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Me(i){return{providers:i.providers||[],imports:i.imports||[]}}function fy(i){return CN(i,mL)||CN(i,gL)}function fL(i){return fy(i)!==null}function CN(i,n){return i.hasOwnProperty(n)?i[n]:null}function h$(i){let n=i&&(i[mL]||i[gL]);return n||null}function IN(i){return i&&(i.hasOwnProperty(yN)||i.hasOwnProperty(f$))?i[yN]:null}var mL=ir({\u0275prov:ir}),yN=ir({\u0275inj:ir}),gL=ir({ngInjectableDef:ir}),f$=ir({ngInjectorDef:ir}),Xe=class{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ce({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _L(i){return i&&!!i.\u0275providers}var m$=ir({\u0275cmp:ir}),g$=ir({\u0275dir:ir}),_$=ir({\u0275pipe:ir}),C$=ir({\u0275mod:ir}),MI=ir({\u0275fac:ir}),jg=ir({__NG_ELEMENT_ID__:ir}),wN=ir({__NG_ENV_ID__:ir});function Ql(i){return typeof i=="string"?i:i==null?"":String(i)}function I$(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():Ql(i)}function y$(i,n){let e=n?`. Dependency path: ${n.join(" > ")} > ${i}`:"";throw new xt(-200,i)}function rx(i,n){throw new xt(-201,!1)}var tn=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(tn||{}),KE;function CL(){return KE}function $s(i){let n=KE;return KE=i,n}function IL(i,n,e){let t=fy(i);if(t&&t.providedIn=="root")return t.value===void 0?t.value=t.factory():t.value;if(e&tn.Optional)return null;if(n!==void 0)return n;rx(i,"Injector")}var w$={},Hg=w$,$E="__NG_DI_FLAG__",VI="ngTempTokenPath",v$="ngTokenPath",b$=/\n/gm,S$="\u0275",vN="__source",lf;function E$(){return lf}function sp(i){let n=lf;return lf=i,n}function A$(i,n=tn.Default){if(lf===void 0)throw new xt(-203,!1);return lf===null?IL(i,void 0,n):lf.get(i,n&tn.Optional?null:void 0,n)}function de(i,n=tn.Default){return(CL()||A$)(ks(i),n)}function Je(i,n=tn.Default){return de(i,my(n))}function my(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function JE(i){let n=[];for(let e=0;e<i.length;e++){let t=ks(i[e]);if(Array.isArray(t)){if(t.length===0)throw new xt(900,!1);let r,o=tn.Default;for(let s=0;s<t.length;s++){let a=t[s],l=x$(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}n.push(de(r,o))}else n.push(de(t))}return n}function ox(i,n){return i[$E]=n,i.prototype[$E]=n,i}function x$(i){return i[$E]}function T$(i,n,e,t){let r=i[VI];throw n[vN]&&r.unshift(n[vN]),i.message=O$(`
`+i.message,r,e,t),i[v$]=r,i[VI]=null,i}function O$(i,n,e,t=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==S$?i.slice(2):i;let r=Ns(n);if(Array.isArray(n))r=n.map(Ns).join(" -> ");else if(typeof n=="object"){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ns(a)))}r=`{${o.join(", ")}}`}return`${e}${t?"("+t+")":""}[${r}]: ${i.replace(b$,`
  `)}`}var sx=ox(nx("Inject",i=>({token:i})),-1),Qg=ox(nx("Optional"),8);var gy=ox(nx("SkipSelf"),4);function ju(i,n){let e=i.hasOwnProperty(MI);return e?i[MI]:null}function R$(i,n,e){if(i.length!==n.length)return!1;for(let t=0;t<i.length;t++){let r=i[t],o=n[t];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function P$(i){return i.flat(Number.POSITIVE_INFINITY)}function ax(i,n){i.forEach(e=>Array.isArray(e)?ax(e,n):n(e))}function yL(i,n,e){n>=i.length?i.push(e):i.splice(n,0,e)}function BI(i,n){return n>=i.length-1?i.pop():i.splice(n,1)[0]}function D$(i,n){let e=[];for(let t=0;t<i;t++)e.push(n);return e}function F$(i,n,e,t){let r=i.length;if(r==n)i.push(e,t);else if(r===1)i.push(t,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>n;){let o=r-2;i[r]=i[o],r--}i[n]=e,i[n+1]=t}}function Zg(i,n,e){let t=e_(i,n);return t>=0?i[t|1]=e:(t=~t,F$(i,t,n,e)),t}function PE(i,n){let e=e_(i,n);if(e>=0)return i[e|1]}function e_(i,n){return k$(i,n,1)}function k$(i,n,e){let t=0,r=i.length>>e;for(;r!==t;){let o=t+(r-t>>1),s=i[o<<e];if(n===s)return o<<e;s>n?r=o:t=o+1}return~(r<<e)}var df={},Js=[],Gu=new Xe(""),wL=new Xe("",-1),vL=new Xe(""),UI=class{get(n,e=Hg){if(e===Hg){let t=new Error(`NullInjectorError: No provider for ${Ns(n)}!`);throw t.name="NullInjectorError",t}return e}},bL=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(bL||{}),Zl=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Zl||{}),cp=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(cp||{});function N$(i,n,e){let t=i.length;for(;;){let r=i.indexOf(n,e);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let o=n.length;if(r+o===t||i.charCodeAt(r+o)<=32)return r}e=r+1}}function qE(i,n,e){let t=0;for(;t<e.length;){let r=e[t];if(typeof r=="number"){if(r!==0)break;t++;let o=e[t++],s=e[t++],a=e[t++];i.setAttribute(n,s,a,o)}else{let o=r,s=e[++t];L$(o)?i.setProperty(n,o,s):i.setAttribute(n,o,s),t++}}return t}function SL(i){return i===3||i===4||i===6}function L$(i){return i.charCodeAt(0)===64}function Wg(i,n){if(!(n===null||n.length===0))if(i===null||i.length===0)i=n.slice();else{let e=-1;for(let t=0;t<n.length;t++){let r=n[t];typeof r=="number"?e=r:e===0||(e===-1||e===2?bN(i,e,r,null,n[++t]):bN(i,e,r,null,null))}}return i}function bN(i,n,e,t,r){let o=0,s=i.length;if(n===-1)s=-1;else for(;o<i.length;){let a=i[o++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=o-1;break}}}for(;o<i.length;){let a=i[o];if(typeof a=="number")break;if(a===e){if(t===null){r!==null&&(i[o+1]=r);return}else if(t===i[o+1]){i[o+2]=r;return}}o++,t!==null&&o++,r!==null&&o++}s!==-1&&(i.splice(s,0,n),o=s+1),i.splice(o++,0,e),t!==null&&i.splice(o++,0,t),r!==null&&i.splice(o++,0,r)}var EL="ng-template";function M$(i,n,e,t){let r=0;if(t){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&N$(n[r+1].toLowerCase(),e,0)!==-1)return!0}else if(lx(i))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&typeof(o=n[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function lx(i){return i.type===4&&i.value!==EL}function V$(i,n,e){let t=i.type===4&&!e?EL:i.value;return n===t}function B$(i,n,e){let t=4,r=i.attrs,o=r!==null?G$(r):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!Tl(t)&&!Tl(l))return!1;if(s&&Tl(l))continue;s=!1,t=l|t&1;continue}if(!s)if(t&4){if(t=2|t&1,l!==""&&!V$(i,l,e)||l===""&&n.length===1){if(Tl(t))return!1;s=!0}}else if(t&8){if(r===null||!M$(i,r,l,e)){if(Tl(t))return!1;s=!0}}else{let c=n[++a],d=U$(l,r,lx(i),e);if(d===-1){if(Tl(t))return!1;s=!0;continue}if(c!==""){let h;if(d>o?h="":h=r[d+1].toLowerCase(),t&2&&c!==h){if(Tl(t))return!1;s=!0}}}}return Tl(t)||s}function Tl(i){return(i&1)===0}function U$(i,n,e,t){if(n===null)return-1;let r=0;if(t||!e){let o=!1;for(;r<n.length;){let s=n[r];if(s===i)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=n[++r];for(;typeof a=="string";)a=n[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return H$(n,i)}function AL(i,n,e=!1){for(let t=0;t<n.length;t++)if(B$(i,n[t],e))return!0;return!1}function j$(i){let n=i.attrs;if(n!=null){let e=n.indexOf(5);if(!(e&1))return n[e+1]}return null}function G$(i){for(let n=0;n<i.length;n++){let e=i[n];if(SL(e))return n}return i.length}function H$(i,n){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){let t=i[e];if(typeof t=="number")return-1;if(t===n)return e;e++}return-1}function W$(i,n){e:for(let e=0;e<n.length;e++){let t=n[e];if(i.length===t.length){for(let r=0;r<i.length;r++)if(i[r]!==t[r])continue e;return!0}}return!1}function SN(i,n){return i?":not("+n.trim()+")":n}function z$(i){let n=i[0],e=1,t=2,r="",o=!1;for(;e<i.length;){let s=i[e];if(typeof s=="string")if(t&2){let a=i[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else t&8?r+="."+s:t&4&&(r+=" "+s);else r!==""&&!Tl(s)&&(n+=SN(o,r),r=""),t=s,o=o||!Tl(t);e++}return r!==""&&(n+=SN(o,r)),n}function K$(i){return i.map(z$).join(",")}function $$(i){let n=[],e=[],t=1,r=2;for(;t<i.length;){let o=i[t];if(typeof o=="string")r===2?o!==""&&n.push(o,i[++t]):r===8&&e.push(o);else{if(!Tl(r))break;r=o}t++}return{attrs:n,classes:e}}function se(i){return Xg(()=>{let n=PL(i),e=ke(oe({},n),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===bL.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Zl.Emulated,styles:i.styles||Js,_:null,schemas:i.schemas||null,tView:null,id:""});DL(e);let t=i.dependencies;return e.directiveDefs=jI(t,!1),e.pipeDefs=jI(t,!0),e.id=Y$(e),e})}function J$(i){return Yc(i)||xL(i)}function q$(i){return i!==null}function Ve(i){return Xg(()=>({type:i.type,bootstrap:i.bootstrap||Js,declarations:i.declarations||Js,imports:i.imports||Js,exports:i.exports||Js,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function EN(i,n){if(i==null)return df;let e={};for(let t in i)if(i.hasOwnProperty(t)){let r=i[t],o,s,a=cp.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),n?(e[o]=a!==cp.None?[t,a]:t,n[o]=s):e[o]=t}return e}function Et(i){return Xg(()=>{let n=PL(i);return DL(n),n})}function ur(i){return{type:i.type,name:i.name,factory:null,pure:i.pure!==!1,standalone:i.standalone===!0,onDestroy:i.type.prototype.ngOnDestroy||null}}function Yc(i){return i[m$]||null}function xL(i){return i[g$]||null}function TL(i){return i[_$]||null}function OL(i){let n=Yc(i)||xL(i)||TL(i);return n!==null?n.standalone:!1}function RL(i,n){let e=i[C$]||null;if(!e&&n===!0)throw new Error(`Type ${Ns(i)} does not have '\u0275mod' property.`);return e}function PL(i){let n={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:i.inputs||df,exportAs:i.exportAs||null,standalone:i.standalone===!0,signals:i.signals===!0,selectors:i.selectors||Js,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:EN(i.inputs,n),outputs:EN(i.outputs),debugInfo:null}}function DL(i){i.features?.forEach(n=>n(i))}function jI(i,n){if(!i)return null;let e=n?TL:J$;return()=>(typeof i=="function"?i():i).map(t=>e(t)).filter(q$)}function Y$(i){let n=0,e=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(let r of e)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function bf(i){return{\u0275providers:i}}function X$(...i){return{\u0275providers:FL(!0,i),\u0275fromNgModule:!0}}function FL(i,...n){let e=[],t=new Set,r,o=s=>{e.push(s)};return ax(n,s=>{let a=s;YE(a,o,[],t)&&(r||=[],r.push(a))}),r!==void 0&&kL(r,o),e}function kL(i,n){for(let e=0;e<i.length;e++){let{ngModule:t,providers:r}=i[e];cx(r,o=>{n(o,t)})}}function YE(i,n,e,t){if(i=ks(i),!i)return!1;let r=null,o=IN(i),s=!o&&Yc(i);if(!o&&!s){let l=i.ngModule;if(o=IN(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=i}let a=t.has(r);if(s){if(a)return!1;if(t.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)YE(c,n,e,t)}}else if(o){if(o.imports!=null&&!a){t.add(r);let c;try{ax(o.imports,d=>{YE(d,n,e,t)&&(c||=[],c.push(d))})}finally{}c!==void 0&&kL(c,n)}if(!a){let c=ju(r)||(()=>new r);n({provide:r,useFactory:c,deps:Js},r),n({provide:vL,useValue:r,multi:!0},r),n({provide:Gu,useValue:()=>de(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=i;cx(l,d=>{n(d,c)})}}else return!1;return r!==i&&i.providers!==void 0}function cx(i,n){for(let e of i)_L(e)&&(e=e.\u0275providers),Array.isArray(e)?cx(e,n):n(e)}var Q$=ir({provide:String,useValue:ir});function NL(i){return i!==null&&typeof i=="object"&&Q$ in i}function Z$(i){return!!(i&&i.useExisting)}function eJ(i){return!!(i&&i.useFactory)}function pf(i){return typeof i=="function"}function tJ(i){return!!i.useClass}var _y=new Xe(""),PI={},iJ={},DE;function Cy(){return DE===void 0&&(DE=new UI),DE}var Ls=class{},zg=class extends Ls{get destroyed(){return this._destroyed}constructor(n,e,t,r){super(),this.parent=e,this.source=t,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QE(n,s=>this.processProvider(s)),this.records.set(wL,rf(void 0,this)),r.has("environment")&&this.records.set(Ls,rf(void 0,this));let o=this.records.get(_y);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(vL,Js,tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=un(null);try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),un(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let e=sp(this),t=$s(void 0),r;try{return n()}finally{sp(e),$s(t)}}get(n,e=Hg,t=tn.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(wN))return n[wN](this);t=my(t);let r,o=sp(this),s=$s(void 0);try{if(!(t&tn.SkipSelf)){let l=this.records.get(n);if(l===void 0){let c=aJ(n)&&fy(n);c&&this.injectableDefInScope(c)?l=rf(XE(n),PI):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l)}let a=t&tn.Self?Cy():this.parent;return e=t&tn.Optional&&e===Hg?null:e,a.get(n,e)}catch(a){if(a.name==="NullInjectorError"){if((a[VI]=a[VI]||[]).unshift(Ns(n)),o)throw a;return T$(a,n,"R3InjectorError",this.source)}else throw a}finally{$s(s),sp(o)}}resolveInjectorInitializers(){let n=un(null),e=sp(this),t=$s(void 0),r;try{let o=this.get(Gu,Js,tn.Self);for(let s of o)s()}finally{sp(e),$s(t),un(n)}}toString(){let n=[],e=this.records;for(let t of e.keys())n.push(Ns(t));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xt(205,!1)}processProvider(n){n=ks(n);let e=pf(n)?n:ks(n&&n.provide),t=rJ(n);if(!pf(n)&&n.multi===!0){let r=this.records.get(e);r||(r=rf(void 0,PI,!0),r.factory=()=>JE(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,t)}hydrate(n,e){let t=un(null);try{return e.value===PI&&(e.value=iJ,e.value=e.factory()),typeof e.value=="object"&&e.value&&sJ(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{un(t)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=ks(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function XE(i){let n=fy(i),e=n!==null?n.factory:ju(i);if(e!==null)return e;if(i instanceof Xe)throw new xt(204,!1);if(i instanceof Function)return nJ(i);throw new xt(204,!1)}function nJ(i){if(i.length>0)throw new xt(204,!1);let e=h$(i);return e!==null?()=>e.factory(i):()=>new i}function rJ(i){if(NL(i))return rf(void 0,i.useValue);{let n=LL(i);return rf(n,PI)}}function LL(i,n,e){let t;if(pf(i)){let r=ks(i);return ju(r)||XE(r)}else if(NL(i))t=()=>ks(i.useValue);else if(eJ(i))t=()=>i.useFactory(...JE(i.deps||[]));else if(Z$(i))t=()=>de(ks(i.useExisting));else{let r=ks(i&&(i.useClass||i.provide));if(oJ(i))t=()=>new r(...JE(i.deps));else return ju(r)||XE(r)}return t}function rf(i,n,e=!1){return{factory:i,value:n,multi:e?[]:void 0}}function oJ(i){return!!i.deps}function sJ(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function aJ(i){return typeof i=="function"||typeof i=="object"&&i instanceof Xe}function QE(i,n){for(let e of i)Array.isArray(e)?QE(e,n):e&&_L(e)?QE(e.\u0275providers,n):n(e)}function Ja(i,n){i instanceof zg&&i.assertNotDestroyed();let e,t=sp(i),r=$s(void 0);try{return n()}finally{sp(t),$s(r)}}function ML(){return CL()!==void 0||E$()!=null}function Iy(i){if(!ML())throw new xt(-203,!1)}function lJ(i){let n=is.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function cJ(i){return typeof i=="function"}var ed=0,Ri=1,xi=2,bs=3,Ol=4,Ys=5,uf=6,GI=7,ws=8,hf=9,ec=10,Br=11,Kg=12,AN=13,Sf=14,_a=15,Hu=16,of=17,Xc=18,yy=19,VL=20,ap=21,DI=22,$a=23,Oo=25,BL=1;var Wu=7,HI=8,ff=9,vs=10,WI=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(WI||{});function lp(i){return Array.isArray(i)&&typeof i[BL]=="object"}function td(i){return Array.isArray(i)&&i[BL]===!0}function dx(i){return(i.flags&4)!==0}function wy(i){return i.componentOffset>-1}function vy(i){return(i.flags&1)===1}function dp(i){return!!i.template}function ZE(i){return(i[xi]&512)!==0}var eA=class{constructor(n,e,t){this.previousValue=n,this.currentValue=e,this.firstChange=t}isFirstChange(){return this.firstChange}};function UL(i,n,e,t){n!==null?n.applyValueToInputSignal(n,t):i[e]=t}function Yi(){return jL}function jL(i){return i.type.prototype.ngOnChanges&&(i.setInput=pJ),dJ}Yi.ngInherit=!0;function dJ(){let i=HL(this),n=i?.current;if(n){let e=i.previous;if(e===df)i.previous=n;else for(let t in n)e[t]=n[t];i.current=null,this.ngOnChanges(n)}}function pJ(i,n,e,t,r){let o=this.declaredInputs[t],s=HL(i)||uJ(i,{previous:df,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new eA(c&&c.currentValue,e,l===df),UL(i,n,r,e)}var GL="__ngSimpleChanges__";function HL(i){return i[GL]||null}function uJ(i,n){return i[GL]=n}var xN=null;var Yl=function(i,n,e){xN?.(i,n,e)},WL="svg",hJ="math";function tc(i){for(;Array.isArray(i);)i=i[ed];return i}function zL(i,n){return tc(n[i])}function qa(i,n){return tc(n[i.index])}function px(i,n){return i.data[n]}function by(i,n){return i[n]}function fp(i,n){let e=n[i];return lp(e)?e:e[ed]}function fJ(i){return(i[xi]&4)===4}function ux(i){return(i[xi]&128)===128}function mJ(i){return td(i[bs])}function pp(i,n){return n==null?null:i[n]}function KL(i){i[of]=0}function $L(i){i[xi]&1024||(i[xi]|=1024,ux(i)&&Ey(i))}function gJ(i,n){for(;i>0;)n=n[Sf],i--;return n}function Sy(i){return!!(i[xi]&9216||i[$a]?.dirty)}function tA(i){i[ec].changeDetectionScheduler?.notify(8),i[xi]&64&&(i[xi]|=1024),Sy(i)&&Ey(i)}function Ey(i){i[ec].changeDetectionScheduler?.notify(0);let n=zu(i);for(;n!==null&&!(n[xi]&8192||(n[xi]|=8192,!ux(n)));)n=zu(n)}function JL(i,n){if((i[xi]&256)===256)throw new xt(911,!1);i[ap]===null&&(i[ap]=[]),i[ap].push(n)}function _J(i,n){if(i[ap]===null)return;let e=i[ap].indexOf(n);e!==-1&&i[ap].splice(e,1)}function zu(i){let n=i[bs];return td(n)?n[bs]:n}var Ki={lFrame:rM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qL=!1;function CJ(){return Ki.lFrame.elementDepthCount}function IJ(){Ki.lFrame.elementDepthCount++}function yJ(){Ki.lFrame.elementDepthCount--}function YL(){return Ki.bindingsEnabled}function XL(){return Ki.skipHydrationRootTNode!==null}function wJ(i){return Ki.skipHydrationRootTNode===i}function vJ(){Ki.skipHydrationRootTNode=null}function si(){return Ki.lFrame.lView}function jr(){return Ki.lFrame.tView}function y(i){return Ki.lFrame.contextLView=i,i[ws]}function w(i){return Ki.lFrame.contextLView=null,i}function ns(){let i=QL();for(;i!==null&&i.type===64;)i=i.parent;return i}function QL(){return Ki.lFrame.currentTNode}function bJ(){let i=Ki.lFrame,n=i.currentTNode;return i.isParent?n:n.parent}function Qu(i,n){let e=Ki.lFrame;e.currentTNode=i,e.isParent=n}function hx(){return Ki.lFrame.isParent}function fx(){Ki.lFrame.isParent=!1}function SJ(){return Ki.lFrame.contextLView}function ZL(){return qL}function TN(i){qL=i}function Ia(){let i=Ki.lFrame,n=i.bindingRootIndex;return n===-1&&(n=i.bindingRootIndex=i.tView.bindingStartIndex),n}function eM(){return Ki.lFrame.bindingIndex}function EJ(i){return Ki.lFrame.bindingIndex=i}function Ef(){return Ki.lFrame.bindingIndex++}function Ay(i){let n=Ki.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+i,e}function AJ(){return Ki.lFrame.inI18n}function xJ(i,n){let e=Ki.lFrame;e.bindingIndex=e.bindingRootIndex=i,iA(n)}function TJ(){return Ki.lFrame.currentDirectiveIndex}function iA(i){Ki.lFrame.currentDirectiveIndex=i}function OJ(i){let n=Ki.lFrame.currentDirectiveIndex;return n===-1?null:i[n]}function tM(){return Ki.lFrame.currentQueryIndex}function mx(i){Ki.lFrame.currentQueryIndex=i}function RJ(i){let n=i[Ri];return n.type===2?n.declTNode:n.type===1?i[Ys]:null}function iM(i,n,e){if(e&tn.SkipSelf){let r=n,o=i;for(;r=r.parent,r===null&&!(e&tn.Host);)if(r=RJ(o),r===null||(o=o[Sf],r.type&10))break;if(r===null)return!1;n=r,i=o}let t=Ki.lFrame=nM();return t.currentTNode=n,t.lView=i,!0}function gx(i){let n=nM(),e=i[Ri];Ki.lFrame=n,n.currentTNode=e.firstChild,n.lView=i,n.tView=e,n.contextLView=i,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function nM(){let i=Ki.lFrame,n=i===null?null:i.child;return n===null?rM(i):n}function rM(i){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=n),n}function oM(){let i=Ki.lFrame;return Ki.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var sM=oM;function _x(){let i=oM();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function PJ(i){return(Ki.lFrame.contextLView=gJ(i,Ki.lFrame.contextLView))[ws]}function rc(){return Ki.lFrame.selectedIndex}function Ku(i){Ki.lFrame.selectedIndex=i}function xy(){let i=Ki.lFrame;return px(i.tView,i.selectedIndex)}function Rt(){Ki.lFrame.currentNamespace=WL}function bst(){DJ()}function DJ(){Ki.lFrame.currentNamespace=null}function FJ(){return Ki.lFrame.currentNamespace}var aM=!0;function Ty(){return aM}function Oy(i){aM=i}function kJ(i,n,e){let{ngOnChanges:t,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(t){let s=jL(n);(e.preOrderHooks??=[]).push(i,s),(e.preOrderCheckHooks??=[]).push(i,s)}r&&(e.preOrderHooks??=[]).push(0-i,r),o&&((e.preOrderHooks??=[]).push(i,o),(e.preOrderCheckHooks??=[]).push(i,o))}function Ry(i,n){for(let e=n.directiveStart,t=n.directiveEnd;e<t;e++){let o=i.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(i.contentHooks??=[]).push(-e,s),a&&((i.contentHooks??=[]).push(e,a),(i.contentCheckHooks??=[]).push(e,a)),l&&(i.viewHooks??=[]).push(-e,l),c&&((i.viewHooks??=[]).push(e,c),(i.viewCheckHooks??=[]).push(e,c)),d!=null&&(i.destroyHooks??=[]).push(e,d)}}function FI(i,n,e){lM(i,n,3,e)}function kI(i,n,e,t){(i[xi]&3)===e&&lM(i,n,e,t)}function FE(i,n){let e=i[xi];(e&3)===n&&(e&=16383,e+=1,i[xi]=e)}function lM(i,n,e,t){let r=t!==void 0?i[of]&65535:0,o=t??-1,s=n.length-1,a=0;for(let l=r;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],t!=null&&a>=t)break}else n[l]<0&&(i[of]+=65536),(a<o||o==-1)&&(NJ(i,e,n,l),i[of]=(i[of]&4294901760)+l+2),l++}function ON(i,n){Yl(4,i,n);let e=un(null);try{n.call(i)}finally{un(e),Yl(5,i,n)}}function NJ(i,n,e,t){let r=e[t]<0,o=e[t+1],s=r?-e[t]:e[t],a=i[s];r?i[xi]>>14<i[of]>>16&&(i[xi]&3)===n&&(i[xi]+=16384,ON(a,o)):ON(a,o)}var cf=-1,$u=class{constructor(n,e,t){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=t}};function LJ(i){return i instanceof $u}function MJ(i){return(i.flags&8)!==0}function VJ(i){return(i.flags&16)!==0}var kE={},nA=class{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,t){t=my(t);let r=this.injector.get(n,kE,t);return r!==kE||e===kE?r:this.parentInjector.get(n,e,t)}};function cM(i){return i!==cf}function zI(i){return i&32767}function BJ(i){return i>>16}function KI(i,n){let e=BJ(i),t=n;for(;e>0;)t=t[Sf],e--;return t}var rA=!0;function $I(i){let n=rA;return rA=i,n}var UJ=256,dM=UJ-1,pM=5,jJ=0,Xl={};function GJ(i,n,e){let t;typeof e=="string"?t=e.charCodeAt(0)||0:e.hasOwnProperty(jg)&&(t=e[jg]),t==null&&(t=e[jg]=jJ++);let r=t&dM,o=1<<r;n.data[i+(r>>pM)]|=o}function JI(i,n){let e=uM(i,n);if(e!==-1)return e;let t=n[Ri];t.firstCreatePass&&(i.injectorIndex=n.length,NE(t.data,i),NE(n,null),NE(t.blueprint,null));let r=Cx(i,n),o=i.injectorIndex;if(cM(r)){let s=zI(r),a=KI(r,n),l=a[Ri].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|l[s+c]}return n[o+8]=r,o}function NE(i,n){i.push(0,0,0,0,0,0,0,0,n)}function uM(i,n){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||n[i.injectorIndex+8]===null?-1:i.injectorIndex}function Cx(i,n){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let e=0,t=null,r=n;for(;r!==null;){if(t=_M(r),t===null)return cf;if(e++,r=r[Sf],t.injectorIndex!==-1)return t.injectorIndex|e<<16}return cf}function oA(i,n,e){GJ(i,n,e)}function HJ(i,n){if(n==="class")return i.classes;if(n==="style")return i.styles;let e=i.attrs;if(e){let t=e.length,r=0;for(;r<t;){let o=e[r];if(SL(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<t&&typeof e[r]=="string";)r++;else{if(o===n)return e[r+1];r=r+2}}}return null}function hM(i,n,e){if(e&tn.Optional||i!==void 0)return i;rx(n,"NodeInjector")}function fM(i,n,e,t){if(e&tn.Optional&&t===void 0&&(t=null),!(e&(tn.Self|tn.Host))){let r=i[hf],o=$s(void 0);try{return r?r.get(n,t,e&tn.Optional):IL(n,t,e&tn.Optional)}finally{$s(o)}}return hM(t,n,e)}function mM(i,n,e,t=tn.Default,r){if(i!==null){if(n[xi]&2048&&!(t&tn.Self)){let s=$J(i,n,e,t,Xl);if(s!==Xl)return s}let o=gM(i,n,e,t,Xl);if(o!==Xl)return o}return fM(n,e,t,r)}function gM(i,n,e,t,r){let o=zJ(e);if(typeof o=="function"){if(!iM(n,i,t))return t&tn.Host?hM(r,e,t):fM(n,e,t,r);try{let s;if(s=o(t),s==null&&!(t&tn.Optional))rx(e);else return s}finally{sM()}}else if(typeof o=="number"){let s=null,a=uM(i,n),l=cf,c=t&tn.Host?n[_a][Ys]:null;for((a===-1||t&tn.SkipSelf)&&(l=a===-1?Cx(i,n):n[a+8],l===cf||!PN(t,!1)?a=-1:(s=n[Ri],a=zI(l),n=KI(l,n)));a!==-1;){let d=n[Ri];if(RN(o,a,d.data)){let h=WJ(a,n,e,s,t,c);if(h!==Xl)return h}l=n[a+8],l!==cf&&PN(t,n[Ri].data[a+8]===c)&&RN(o,a,n)?(s=d,a=zI(l),n=KI(l,n)):a=-1}}return r}function WJ(i,n,e,t,r,o){let s=n[Ri],a=s.data[i+8],l=t==null?wy(a)&&rA:t!=s&&(a.type&3)!==0,c=r&tn.Host&&o===a,d=NI(a,s,e,l,c);return d!==null?Ju(n,s,d,a):Xl}function NI(i,n,e,t,r){let o=i.providerIndexes,s=n.data,a=o&1048575,l=i.directiveStart,c=i.directiveEnd,d=o>>20,h=t?a:a+d,_=r?a+d:c;for(let C=h;C<_;C++){let I=s[C];if(C<l&&e===I||C>=l&&I.type===e)return C}if(r){let C=s[l];if(C&&dp(C)&&C.type===e)return l}return null}function Ju(i,n,e,t){let r=i[e],o=n.data;if(LJ(r)){let s=r;s.resolving&&y$(I$(o[e]));let a=$I(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?$s(s.injectImpl):null,d=iM(i,t,tn.Default);try{r=i[e]=s.factory(void 0,o,i,t),n.firstCreatePass&&e>=t.directiveStart&&kJ(e,o[e],n)}finally{c!==null&&$s(c),$I(a),s.resolving=!1,sM()}}return r}function zJ(i){if(typeof i=="string")return i.charCodeAt(0)||0;let n=i.hasOwnProperty(jg)?i[jg]:void 0;return typeof n=="number"?n>=0?n&dM:KJ:n}function RN(i,n,e){let t=1<<i;return!!(e[n+(i>>pM)]&t)}function PN(i,n){return!(i&tn.Self)&&!(i&tn.Host&&n)}var Uu=class{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,t){return mM(this._tNode,this._lView,n,my(t),e)}};function KJ(){return new Uu(ns(),si())}function lt(i){return Xg(()=>{let n=i.prototype.constructor,e=n[MI]||sA(n),t=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==t;){let o=r[MI]||sA(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function sA(i){return hL(i)?()=>{let n=sA(ks(i));return n&&n()}:ju(i)}function $J(i,n,e,t,r){let o=i,s=n;for(;o!==null&&s!==null&&s[xi]&2048&&!(s[xi]&512);){let a=gM(o,s,e,t|tn.Self,Xl);if(a!==Xl)return a;let l=o.parent;if(!l){let c=s[VL];if(c){let d=c.get(e,Xl,t);if(d!==Xl)return d}l=_M(s),s=s[Sf]}o=l}return r}function _M(i){let n=i[Ri],e=n.type;return e===2?n.declTNode:e===1?i[Ys]:null}function Ix(i){return HJ(ns(),i)}function DN(i,n=null,e=null,t){let r=CM(i,n,e,t);return r.resolveInjectorInitializers(),r}function CM(i,n=null,e=null,t,r=new Set){let o=[e||Js,X$(i)];return t=t||(typeof i=="object"?void 0:Ns(i)),new zg(o,n||Cy(),t||null,r)}var Ur=class i{static{this.THROW_IF_NOT_FOUND=Hg}static{this.NULL=new UI}static create(n,e){if(Array.isArray(n))return DN({name:""},e,n,"");{let t=n.name??"";return DN({name:t},n.parent,n.providers,t)}}static{this.\u0275prov=Ce({token:i,providedIn:"any",factory:()=>de(wL)})}static{this.__NG_ELEMENT_ID__=-1}};var JJ=new Xe("");JJ.__NG_ELEMENT_ID__=i=>{let n=ns();if(n===null)throw new xt(204,!1);if(n.type&2)return n.value;if(i&tn.Optional)return null;throw new xt(204,!1)};var qJ="ngOriginalError";function LE(i){return i[qJ]}var IM=!0,Zu=(()=>{class i{static{this.__NG_ELEMENT_ID__=YJ}static{this.__NG_ENV_ID__=e=>e}}return i})(),aA=class extends Zu{constructor(n){super(),this._lView=n}onDestroy(n){return JL(this._lView,n),()=>_J(this._lView,n)}};function YJ(){return new aA(si())}var oc=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new vn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>new i})}}return i})();var lA=class extends Ue{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,ML()&&(this.destroyRef=Je(Zu,{optional:!0})??void 0,this.pendingTasks=Je(oc,{optional:!0})??void 0)}emit(n){let e=un(null);try{super.next(n)}finally{un(e)}}subscribe(n,e,t){let r=n,o=e||(()=>null),s=t;if(n&&typeof n=="object"){let l=n;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return n instanceof Dr&&n.add(a),a}wrapInTimeout(n){return e=>{let t=this.pendingTasks?.add();setTimeout(()=>{n(e),t!==void 0&&this.pendingTasks?.remove(t)})}}},X=lA;function qI(...i){}function yM(i){let n,e;function t(){i=qI;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{i(),t()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{i(),t()})),()=>t()}function FN(i){return queueMicrotask(()=>i()),()=>{i=qI}}var yx="isAngularZone",YI=yx+"_ID",XJ=0,Lt=class i{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new X(!1),this.onMicrotaskEmpty=new X(!1),this.onStable=new X(!1),this.onError=new X(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=IM}=n;if(typeof Zone>"u")throw new xt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&t,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,eq(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yx)===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new xt(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new xt(909,!1)}run(n,e,t){return this._inner.run(n,e,t)}runTask(n,e,t,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,QJ,qI,qI);try{return o.runTask(s,e,t)}finally{o.cancelTask(s)}}runGuarded(n,e,t){return this._inner.runGuarded(n,e,t)}runOutsideAngular(n){return this._outer.run(n)}},QJ={};function wx(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ZJ(i){if(i.isCheckStableRunning||i.callbackScheduled)return;i.callbackScheduled=!0;function n(){yM(()=>{i.callbackScheduled=!1,cA(i),i.isCheckStableRunning=!0,wx(i),i.isCheckStableRunning=!1})}i.scheduleInRootZone?Zone.root.run(()=>{n()}):i._outer.run(()=>{n()}),cA(i)}function eq(i){let n=()=>{ZJ(i)},e=XJ++;i._inner=i._inner.fork({name:"angular",properties:{[yx]:!0,[YI]:e,[YI+e]:!0},onInvokeTask:(t,r,o,s,a,l)=>{if(tq(l))return t.invokeTask(o,s,a,l);try{return kN(i),t.invokeTask(o,s,a,l)}finally{(i.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&n(),NN(i)}},onInvoke:(t,r,o,s,a,l,c)=>{try{return kN(i),t.invoke(o,s,a,l,c)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!iq(l)&&n(),NN(i)}},onHasTask:(t,r,o,s)=>{t.hasTask(o,s),r===o&&(s.change=="microTask"?(i._hasPendingMicrotasks=s.microTask,cA(i),wx(i)):s.change=="macroTask"&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,o,s)=>(t.handleError(o,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}function cA(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.callbackScheduled===!0?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function kN(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function NN(i){i._nesting--,wx(i)}var XI=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new X,this.onMicrotaskEmpty=new X,this.onStable=new X,this.onError=new X}run(n,e,t){return n.apply(e,t)}runGuarded(n,e,t){return n.apply(e,t)}runOutsideAngular(n){return n()}runTask(n,e,t,r){return n.apply(e,t)}};function tq(i){return wM(i,"__ignore_ng_zone__")}function iq(i){return wM(i,"__scheduler_tick__")}function wM(i,n){return!Array.isArray(i)||i.length!==1?!1:i[0]?.data?.[n]===!0}function nq(i="zone.js",n){return i==="noop"?new XI:i==="zone.js"?new Lt(n):i}var ic=class{constructor(){this._console=console}handleError(n){let e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&LE(n);for(;e&&LE(e);)e=LE(e);return e||null}},rq=new Xe("",{providedIn:"root",factory:()=>{let i=Je(Lt),n=Je(ic);return e=>i.runOutsideAngular(()=>n.handleError(e))}});function LN(i,n){return uL(i,n)}function oq(i){return uL(pL,i)}var vM=(LN.required=oq,LN);function sq(){return Af(ns(),si())}function Af(i,n){return new Ze(qa(i,n))}var Ze=(()=>{class i{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=sq}}return i})();function aq(i){return i instanceof Ze?i.nativeElement:i}function lq(){return this._results[Symbol.iterator]()}var dA=class i{get changes(){return this._changes??=new X}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=i.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=lq)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let t=P$(n);(this._changesDetected=!R$(this._results,t,e))&&(this._results=t,this.length=t.length,this.last=t[this.length-1],this.first=t[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function bM(i){return(i.flags&128)===128}var SM=new Map,cq=0;function dq(){return cq++}function pq(i){SM.set(i[yy],i)}function pA(i){SM.delete(i[yy])}var MN="__ngContext__";function up(i,n){lp(n)?(i[MN]=n[yy],pq(n)):i[MN]=n}function EM(i){return xM(i[Kg])}function AM(i){return xM(i[Ol])}function xM(i){for(;i!==null&&!td(i);)i=i[Ol];return i}var uA;function TM(i){uA=i}function OM(){if(uA!==void 0)return uA;if(typeof document<"u")return document;throw new xt(210,!1)}var Py=new Xe("",{providedIn:"root",factory:()=>uq}),uq="ng",vx=new Xe(""),ai=new Xe("",{providedIn:"platform",factory:()=>"unknown"});var Sst=new Xe(""),bx=new Xe("",{providedIn:"root",factory:()=>OM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hq="h",fq="b";var mq=()=>null;function Sx(i,n,e=!1){return mq(i,n,e)}var RM=!1,gq=new Xe("",{providedIn:"root",factory:()=>RM});var SI;function _q(){if(SI===void 0&&(SI=null,is.trustedTypes))try{SI=is.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return SI}function Dy(i){return _q()?.createHTML(i)||i}var EI;function PM(){if(EI===void 0&&(EI=null,is.trustedTypes))try{EI=is.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return EI}function VN(i){return PM()?.createHTML(i)||i}function BN(i){return PM()?.createScriptURL(i)||i}var Qc=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dL})`}},hA=class extends Qc{getTypeName(){return"HTML"}},fA=class extends Qc{getTypeName(){return"Style"}},mA=class extends Qc{getTypeName(){return"Script"}},gA=class extends Qc{getTypeName(){return"URL"}},_A=class extends Qc{getTypeName(){return"ResourceURL"}};function ya(i){return i instanceof Qc?i.changingThisBreaksApplicationSecurity:i}function id(i,n){let e=Cq(i);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${dL})`)}return e===n}function Cq(i){return i instanceof Qc&&i.getTypeName()||null}function DM(i){return new hA(i)}function FM(i){return new fA(i)}function kM(i){return new mA(i)}function NM(i){return new gA(i)}function LM(i){return new _A(i)}function Iq(i){let n=new IA(i);return yq()?new CA(n):n}var CA=class{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let e=new window.DOMParser().parseFromString(Dy(n),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(n):(e.firstChild?.remove(),e)}catch{return null}}},IA=class{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let e=this.inertDocument.createElement("template");return e.innerHTML=Dy(n),e}};function yq(){try{return!!new window.DOMParser().parseFromString(Dy(""),"text/html")}catch{return!1}}var wq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fy(i){return i=String(i),i.match(wq)?i:"unsafe:"+i}function nd(i){let n={};for(let e of i.split(","))n[e]=!0;return n}function t_(...i){let n={};for(let e of i)for(let t in e)e.hasOwnProperty(t)&&(n[t]=!0);return n}var MM=nd("area,br,col,hr,img,wbr"),VM=nd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),BM=nd("rp,rt"),vq=t_(BM,VM),bq=t_(VM,nd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sq=t_(BM,nd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),UN=t_(MM,bq,Sq,vq),UM=nd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Eq=nd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Aq=nd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),xq=t_(UM,Eq,Aq),Tq=nd("script,style,template"),yA=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,t=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?t=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,t&&e.firstChild){r.push(e),e=Pq(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=Rq(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(n){let e=jN(n).toLowerCase();if(!UN.hasOwnProperty(e))return this.sanitizedSomething=!0,!Tq.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let t=n.attributes;for(let r=0;r<t.length;r++){let o=t.item(r),s=o.name,a=s.toLowerCase();if(!xq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;UM[a]&&(l=Fy(l)),this.buf.push(" ",s,'="',GN(l),'"')}return this.buf.push(">"),!0}endElement(n){let e=jN(n).toLowerCase();UN.hasOwnProperty(e)&&!MM.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(GN(n))}};function Oq(i,n){return(i.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Rq(i){let n=i.nextSibling;if(n&&i!==n.previousSibling)throw jM(n);return n}function Pq(i){let n=i.firstChild;if(n&&Oq(i,n))throw jM(n);return n}function jN(i){let n=i.nodeName;return typeof n=="string"?n:"FORM"}function jM(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}var Dq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fq=/([^\#-~ |!])/g;function GN(i){return i.replace(/&/g,"&amp;").replace(Dq,function(n){let e=n.charCodeAt(0),t=n.charCodeAt(1);return"&#"+((e-55296)*1024+(t-56320)+65536)+";"}).replace(Fq,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var AI;function Ex(i,n){let e=null;try{AI=AI||Iq(i);let t=n?String(n):"";e=AI.getInertBodyElement(t);let r=5,o=t;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,t=o,o=e.innerHTML,e=AI.getInertBodyElement(t)}while(t!==o);let a=new yA().sanitizeChildren(HN(e)||e);return Dy(a)}finally{if(e){let t=HN(e)||e;for(;t.firstChild;)t.firstChild.remove()}}}function HN(i){return"content"in i&&kq(i)?i.content:null}function kq(i){return i.nodeType===Node.ELEMENT_NODE&&i.nodeName==="TEMPLATE"}var wa=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(wa||{});function an(i){let n=xx();return n?VN(n.sanitize(wa.HTML,i)||""):id(i,"HTML")?VN(ya(i)):Ex(OM(),Ql(i))}function rs(i){let n=xx();return n?n.sanitize(wa.URL,i)||"":id(i,"URL")?ya(i):Fy(Ql(i))}function Ax(i){let n=xx();if(n)return BN(n.sanitize(wa.RESOURCE_URL,i)||"");if(id(i,"ResourceURL"))return BN(ya(i));throw new xt(904,!1)}function Nq(i,n){return n==="src"&&(i==="embed"||i==="frame"||i==="iframe"||i==="media"||i==="script")||n==="href"&&(i==="base"||i==="link")?Ax:rs}function GM(i,n,e){return Nq(n,e)(i)}function xx(){let i=si();return i&&i[ec].sanitizer}var Lq=/^>|^->|<!--|-->|--!>|<!-$/g,Mq=/(<|>)/g,Vq="\u200B$1\u200B";function Bq(i){return i.replace(Lq,n=>n.replace(Mq,Vq))}function Uq(i){return i.ownerDocument.defaultView}function HM(i){return i.ownerDocument}function WM(i){return i instanceof Function?i():i}function jq(i){return(i??Je(Ur)).get(ai)==="browser"}var nc=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(nc||{}),Gq;function Tx(i,n){return Gq(i,n)}function sf(i,n,e,t,r){if(t!=null){let o,s=!1;td(t)?o=t:lp(t)&&(s=!0,t=t[ed]);let a=tc(t);i===0&&e!==null?r==null?qM(n,e,a):QI(n,e,a,r||null,!0):i===1&&e!==null?QI(n,e,a,r||null,!0):i===2?iY(n,a,s):i===3&&n.destroyNode(a),o!=null&&rY(n,i,o,e,r)}}function Hq(i,n){return i.createText(n)}function Wq(i,n,e){i.setValue(n,e)}function zq(i,n){return i.createComment(Bq(n))}function zM(i,n,e){return i.createElement(n,e)}function Kq(i,n){KM(i,n),n[ed]=null,n[Ys]=null}function $q(i,n,e,t,r,o){t[ed]=r,t[Ys]=n,Ly(i,t,e,1,r,o)}function KM(i,n){n[ec].changeDetectionScheduler?.notify(9),Ly(i,n,n[Br],2,null,null)}function Jq(i){let n=i[Kg];if(!n)return ME(i[Ri],i);for(;n;){let e=null;if(lp(n))e=n[Kg];else{let t=n[vs];t&&(e=t)}if(!e){for(;n&&!n[Ol]&&n!==i;)lp(n)&&ME(n[Ri],n),n=n[bs];n===null&&(n=i),lp(n)&&ME(n[Ri],n),e=n&&n[Ol]}n=e}}function qq(i,n,e,t){let r=vs+t,o=e.length;t>0&&(e[r-1][Ol]=n),t<o-vs?(n[Ol]=e[r],yL(e,vs+t,n)):(e.push(n),n[Ol]=null),n[bs]=e;let s=n[Hu];s!==null&&e!==s&&$M(s,n);let a=n[Xc];a!==null&&a.insertView(i),tA(n),n[xi]|=128}function $M(i,n){let e=i[ff],t=n[bs];if(lp(t))i[xi]|=WI.HasTransplantedViews;else{let r=t[bs][_a];n[_a]!==r&&(i[xi]|=WI.HasTransplantedViews)}e===null?i[ff]=[n]:e.push(n)}function Ox(i,n){let e=i[ff],t=e.indexOf(n);e.splice(t,1)}function $g(i,n){if(i.length<=vs)return;let e=vs+n,t=i[e];if(t){let r=t[Hu];r!==null&&r!==i&&Ox(r,t),n>0&&(i[e-1][Ol]=t[Ol]);let o=BI(i,vs+n);Kq(t[Ri],t);let s=o[Xc];s!==null&&s.detachView(o[Ri]),t[bs]=null,t[Ol]=null,t[xi]&=-129}return t}function ky(i,n){if(!(n[xi]&256)){let e=n[Br];e.destroyNode&&Ly(i,n,e,3,null,null),Jq(n)}}function ME(i,n){if(n[xi]&256)return;let e=un(null);try{n[xi]&=-129,n[xi]|=256,n[$a]&&JC(n[$a]),Xq(i,n),Yq(i,n),n[Ri].type===1&&n[Br].destroy();let t=n[Hu];if(t!==null&&td(n[bs])){t!==n[bs]&&Ox(t,n);let r=n[Xc];r!==null&&r.detachView(i)}pA(n)}finally{un(e)}}function Yq(i,n){let e=i.cleanup,t=n[GI];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?t[s]():t[-s].unsubscribe(),o+=2}else{let s=t[e[o+1]];e[o].call(s)}t!==null&&(n[GI]=null);let r=n[ap];if(r!==null){n[ap]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function Xq(i,n){let e;if(i!=null&&(e=i.destroyHooks)!=null)for(let t=0;t<e.length;t+=2){let r=n[e[t]];if(!(r instanceof $u)){let o=e[t+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Yl(4,a,l);try{l.call(a)}finally{Yl(5,a,l)}}else{Yl(4,r,o);try{o.call(r)}finally{Yl(5,r,o)}}}}}function JM(i,n,e){return Qq(i,n.parent,e)}function Qq(i,n,e){let t=n;for(;t!==null&&t.type&168;)n=t,t=n.parent;if(t===null)return e[ed];{let{componentOffset:r}=t;if(r>-1){let{encapsulation:o}=i.data[t.directiveStart+r];if(o===Zl.None||o===Zl.Emulated)return null}return qa(t,e)}}function QI(i,n,e,t,r){i.insertBefore(n,e,t,r)}function qM(i,n,e){i.appendChild(n,e)}function WN(i,n,e,t,r){t!==null?QI(i,n,e,t,r):qM(i,n,e)}function YM(i,n){return i.parentNode(n)}function Zq(i,n){return i.nextSibling(n)}function XM(i,n,e){return tY(i,n,e)}function eY(i,n,e){return i.type&40?qa(i,e):null}var tY=eY,zN;function Ny(i,n,e,t){let r=JM(i,t,n),o=n[Br],s=t.parent||n[Ys],a=XM(s,t,n);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)WN(o,r,e[l],a,!1);else WN(o,r,e,a,!1);zN!==void 0&&zN(o,t,n,e,r)}function Ug(i,n){if(n!==null){let e=n.type;if(e&3)return qa(n,i);if(e&4)return wA(-1,i[n.index]);if(e&8){let t=n.child;if(t!==null)return Ug(i,t);{let r=i[n.index];return td(r)?wA(-1,r):tc(r)}}else{if(e&128)return Ug(i,n.next);if(e&32)return Tx(n,i)()||tc(i[n.index]);{let t=QM(i,n);if(t!==null){if(Array.isArray(t))return t[0];let r=zu(i[_a]);return Ug(r,t)}else return Ug(i,n.next)}}}return null}function QM(i,n){if(n!==null){let t=i[_a][Ys],r=n.projection;return t.projection[r]}return null}function wA(i,n){let e=vs+i+1;if(e<n.length){let t=n[e],r=t[Ri].firstChild;if(r!==null)return Ug(t,r)}return n[Wu]}function iY(i,n,e){i.removeChild(null,n,e)}function Rx(i,n,e,t,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=t[e.index],l=e.type;if(s&&n===0&&(a&&up(tc(a),t),e.flags|=2),(e.flags&32)!==32)if(l&8)Rx(i,n,e.child,t,r,o,!1),sf(n,i,r,a,o);else if(l&32){let c=Tx(e,t),d;for(;d=c();)sf(n,i,r,d,o);sf(n,i,r,a,o)}else l&16?ZM(i,n,t,e,r,o):sf(n,i,r,a,o);e=s?e.projectionNext:e.next}}function Ly(i,n,e,t,r,o){Rx(e,t,i.firstChild,n,r,o,!1)}function nY(i,n,e){let t=n[Br],r=JM(i,e,n),o=e.parent||n[Ys],s=XM(o,e,n);ZM(t,0,n,e,r,s)}function ZM(i,n,e,t,r,o){let s=e[_a],l=s[Ys].projection[t.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];sf(n,i,r,d,o)}else{let c=l,d=s[bs];bM(t)&&(c.flags|=128),Rx(i,n,c,d,r,o,!0)}}function rY(i,n,e,t,r){let o=e[Wu],s=tc(e);o!==s&&sf(n,i,t,o,r);for(let a=vs;a<e.length;a++){let l=e[a];Ly(l[Ri],l,i,n,t,o)}}function oY(i,n,e,t,r){if(n)r?i.addClass(e,t):i.removeClass(e,t);else{let o=t.indexOf("-")===-1?void 0:nc.DashCase;r==null?i.removeStyle(e,t,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=nc.Important),i.setStyle(e,t,r,o))}}function sY(i,n,e){i.setAttribute(n,"style",e)}function e3(i,n,e){e===""?i.removeAttribute(n,"class"):i.setAttribute(n,"class",e)}function t3(i,n,e){let{mergedAttrs:t,classes:r,styles:o}=e;t!==null&&qE(i,n,t),r!==null&&e3(i,n,r),o!==null&&sY(i,n,o)}var Ss={};function p(i=1){i3(jr(),si(),rc()+i,!1)}function i3(i,n,e,t){if(!t)if((n[xi]&3)===3){let o=i.preOrderCheckHooks;o!==null&&FI(n,o,e)}else{let o=i.preOrderHooks;o!==null&&kI(n,o,0,e)}Ku(e)}function S(i,n=tn.Default){let e=si();if(e===null)return de(i,n);let t=ns();return mM(t,e,ks(i),n)}function n3(){let i="invalid";throw new Error(i)}function r3(i,n,e,t,r,o){let s=un(null);try{let a=null;r&cp.SignalBased&&(a=n[t][Il]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&cp.HasDecoratorInputTransform&&(o=i.inputTransforms[t].call(n,o)),i.setInput!==null?i.setInput(n,a,o,e,t):UL(n,a,t,o)}finally{un(s)}}function aY(i,n){let e=i.hostBindingOpCodes;if(e!==null)try{for(let t=0;t<e.length;t++){let r=e[t];if(r<0)Ku(~r);else{let o=r,s=e[++t],a=e[++t];xJ(s,o);let l=n[o];a(2,l)}}}finally{Ku(-1)}}function My(i,n,e,t,r,o,s,a,l,c,d){let h=n.blueprint.slice();return h[ed]=r,h[xi]=t|4|128|8|64,(c!==null||i&&i[xi]&2048)&&(h[xi]|=2048),KL(h),h[bs]=h[Sf]=i,h[ws]=e,h[ec]=s||i&&i[ec],h[Br]=a||i&&i[Br],h[hf]=l||i&&i[hf]||null,h[Ys]=o,h[yy]=dq(),h[uf]=d,h[VL]=c,h[_a]=n.type==2?i[_a]:h,h}function xf(i,n,e,t,r){let o=i.data[n];if(o===null)o=lY(i,n,e,t,r),AJ()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=t,o.attrs=r;let s=bJ();o.injectorIndex=s===null?-1:s.injectorIndex}return Qu(o,!0),o}function lY(i,n,e,t,r){let o=QL(),s=hx(),a=s?o:o&&o.parent,l=i.data[n]=fY(i,a,e,n,t,r);return i.firstChild===null&&(i.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function o3(i,n,e,t){if(e===0)return-1;let r=n.length;for(let o=0;o<e;o++)n.push(t),i.blueprint.push(t),i.data.push(null);return r}function s3(i,n,e,t,r){let o=rc(),s=t&2;try{Ku(-1),s&&n.length>Oo&&i3(i,n,Oo,!1),Yl(s?2:0,r),e(t,r)}finally{Ku(o),Yl(s?3:1,r)}}function Px(i,n,e){if(dx(n)){let t=un(null);try{let r=n.directiveStart,o=n.directiveEnd;for(let s=r;s<o;s++){let a=i.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{un(t)}}}function Dx(i,n,e){YL()&&(yY(i,n,e,qa(e,n)),(e.flags&64)===64&&c3(i,n,e))}function Fx(i,n,e=qa){let t=n.localNames;if(t!==null){let r=n.index+1;for(let o=0;o<t.length;o+=2){let s=t[o+1],a=s===-1?e(n,i):i[s];i[r++]=a}}}function a3(i){let n=i.tView;return n===null||n.incompleteFirstPass?i.tView=kx(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):n}function kx(i,n,e,t,r,o,s,a,l,c,d){let h=Oo+t,_=h+r,C=cY(h,_),I=typeof c=="function"?c():c;return C[Ri]={type:i,blueprint:C,template:e,queries:null,viewQuery:a,declTNode:n,data:C.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:I,incompleteFirstPass:!1,ssrId:d}}function cY(i,n){let e=[];for(let t=0;t<n;t++)e.push(t<i?null:Ss);return e}function dY(i,n,e,t){let o=t.get(gq,RM)||e===Zl.ShadowDom,s=i.selectRootElement(n,o);return pY(s),s}function pY(i){uY(i)}var uY=()=>null;function hY(i,n,e,t){let r=u3(n);r.push(e),i.firstCreatePass&&h3(i).push(t,r.length-1)}function fY(i,n,e,t,r,o){let s=n?n.injectorIndex:-1,a=0;return XL()&&(a|=128),{type:e,index:t,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KN(i,n,e,t,r){for(let o in n){if(!n.hasOwnProperty(o))continue;let s=n[o];if(s===void 0)continue;t??={};let a,l=cp.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(r!==null){if(!r.hasOwnProperty(o))continue;c=r[o]}i===0?$N(t,e,c,a,l):$N(t,e,c,a)}return t}function $N(i,n,e,t,r){let o;i.hasOwnProperty(e)?(o=i[e]).push(n,t):o=i[e]=[n,t],r!==void 0&&o.push(r)}function mY(i,n,e){let t=n.directiveStart,r=n.directiveEnd,o=i.data,s=n.attrs,a=[],l=null,c=null;for(let d=t;d<r;d++){let h=o[d],_=e?e.get(h):null,C=_?_.inputs:null,I=_?_.outputs:null;l=KN(0,h.inputs,d,l,C),c=KN(1,h.outputs,d,c,I);let b=l!==null&&s!==null&&!lx(n)?PY(l,d,s):null;a.push(b)}l!==null&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=a,n.inputs=l,n.outputs=c}function gY(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function Nx(i,n,e,t,r,o,s,a){let l=qa(n,e),c=n.inputs,d;!a&&c!=null&&(d=c[t])?(Mx(i,e,d,t,r),wy(n)&&_Y(e,n.index)):n.type&3?(t=gY(t),r=s!=null?s(r,n.value||"",t):r,o.setProperty(l,t,r)):n.type&12}function _Y(i,n){let e=fp(n,i);e[xi]&16||(e[xi]|=64)}function Lx(i,n,e,t){if(YL()){let r=t===null?null:{"":-1},o=vY(i,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&l3(i,n,e,s,r,a),r&&bY(e,t,r)}e.mergedAttrs=Wg(e.mergedAttrs,e.attrs)}function l3(i,n,e,t,r,o){for(let c=0;c<t.length;c++)oA(JI(e,n),i,t[c].type);EY(e,i.data.length,t.length);for(let c=0;c<t.length;c++){let d=t[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=o3(i,n,t.length,null);for(let c=0;c<t.length;c++){let d=t[c];e.mergedAttrs=Wg(e.mergedAttrs,d.hostAttrs),AY(i,e,n,l,d),SY(l,d,r),d.contentQueries!==null&&(e.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(e.flags|=64);let h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}mY(i,e,o)}function CY(i,n,e,t,r){let o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;s===null&&(s=i.hostBindingOpCodes=[]);let a=~n.index;IY(s)!=a&&s.push(a),s.push(e,t,o)}}function IY(i){let n=i.length;for(;n>0;){let e=i[--n];if(typeof e=="number"&&e<0)return e}return 0}function yY(i,n,e,t){let r=e.directiveStart,o=e.directiveEnd;wy(e)&&xY(n,e,i.data[r+e.componentOffset]),i.firstCreatePass||JI(e,n),up(t,n);let s=e.initialInputs;for(let a=r;a<o;a++){let l=i.data[a],c=Ju(n,i,a,e);if(up(c,n),s!==null&&RY(n,a-r,c,l,e,s),dp(l)){let d=fp(e.index,n);d[ws]=Ju(n,i,a,e)}}}function c3(i,n,e){let t=e.directiveStart,r=e.directiveEnd,o=e.index,s=TJ();try{Ku(o);for(let a=t;a<r;a++){let l=i.data[a],c=n[a];iA(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&wY(l,c)}}finally{Ku(-1),iA(s)}}function wY(i,n){i.hostBindings!==null&&i.hostBindings(1,n)}function vY(i,n){let e=i.directiveRegistry,t=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(AL(n,s.selectors,!1))if(t||(t=[]),dp(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),t.unshift(...a,s);let l=a.length;vA(i,n,l)}else t.unshift(s),vA(i,n,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,t,r),t.push(s)}return t===null?null:[t,r]}function vA(i,n,e){n.componentOffset=e,(i.components??=[]).push(n.index)}function bY(i,n,e){if(n){let t=i.localNames=[];for(let r=0;r<n.length;r+=2){let o=e[n[r+1]];if(o==null)throw new xt(-301,!1);t.push(n[r],o)}}}function SY(i,n,e){if(e){if(n.exportAs)for(let t=0;t<n.exportAs.length;t++)e[n.exportAs[t]]=i;dp(n)&&(e[""]=i)}}function EY(i,n,e){i.flags|=1,i.directiveStart=n,i.directiveEnd=n+e,i.providerIndexes=n}function AY(i,n,e,t,r){i.data[t]=r;let o=r.factory||(r.factory=ju(r.type,!0)),s=new $u(o,dp(r),S);i.blueprint[t]=s,e[t]=s,CY(i,n,t,o3(i,e,r.hostVars,Ss),r)}function xY(i,n,e){let t=qa(n,i),r=a3(e),o=i[ec].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Vy(i,My(i,r,null,s,t,n,null,o.createRenderer(t,e),null,null,null));i[n.index]=a}function TY(i,n,e,t,r,o){let s=qa(i,n);OY(n[Br],s,o,i.value,e,t,r)}function OY(i,n,e,t,r,o,s){if(o==null)i.removeAttribute(n,r,e);else{let a=s==null?Ql(o):s(o,t||"",r);i.setAttribute(n,r,a,e)}}function RY(i,n,e,t,r,o){let s=o[n];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],d=s[a++],h=s[a++];r3(t,e,l,c,d,h)}}function PY(i,n,e){let t=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(i.hasOwnProperty(o)){t===null&&(t=[]);let s=i[o];for(let a=0;a<s.length;a+=3)if(s[a]===n){t.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return t}function d3(i,n,e,t){return[i,!0,0,n,null,t,null,e,null,null]}function p3(i,n){let e=i.contentQueries;if(e!==null){let t=un(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=i.data[s];mx(o),a.contentQueries(2,n[s],s)}}}finally{un(t)}}}function Vy(i,n){return i[Kg]?i[AN][Ol]=n:i[Kg]=n,i[AN]=n,n}function bA(i,n,e){mx(0);let t=un(null);try{n(i,e)}finally{un(t)}}function u3(i){return i[GI]??=[]}function h3(i){return i.cleanup??=[]}function f3(i,n){let e=i[hf],t=e?e.get(ic,null):null;t&&t.handleError(n)}function Mx(i,n,e,t,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],c=n[s],d=i.data[s];r3(d,c,t,a,l,r)}}function Vx(i,n,e){let t=zL(n,i);Wq(i[Br],t,e)}function DY(i,n){let e=fp(n,i),t=e[Ri];FY(t,e);let r=e[ed];r!==null&&e[uf]===null&&(e[uf]=Sx(r,e[hf])),Bx(t,e,e[ws])}function FY(i,n){for(let e=n.length;e<i.blueprint.length;e++)n.push(i.blueprint[e])}function Bx(i,n,e){gx(n);try{let t=i.viewQuery;t!==null&&bA(1,t,e);let r=i.template;r!==null&&s3(i,n,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),n[Xc]?.finishViewCreation(i),i.staticContentQueries&&p3(i,n),i.staticViewQueries&&bA(2,i.viewQuery,e);let o=i.components;o!==null&&kY(n,o)}catch(t){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),t}finally{n[xi]&=-5,_x()}}function kY(i,n){for(let e=0;e<n.length;e++)DY(i,n[e])}function i_(i,n,e,t){let r=un(null);try{let o=n.tView,a=i[xi]&4096?4096:16,l=My(i,o,e,a,null,n,null,null,t?.injector??null,t?.embeddedViewInjector??null,t?.dehydratedView??null),c=i[n.index];l[Hu]=c;let d=i[Xc];return d!==null&&(l[Xc]=d.createEmbeddedView(o)),Bx(o,l,e),l}finally{un(r)}}function m3(i,n){let e=vs+n;if(e<i.length)return i[e]}function mf(i,n){return!n||n.firstChild===null||bM(i)}function n_(i,n,e,t=!0){let r=n[Ri];if(qq(r,n,i,e),t){let s=wA(e,i),a=n[Br],l=YM(a,i[Wu]);l!==null&&$q(r,i[Ys],a,n,l,s)}let o=n[uf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function g3(i,n){let e=$g(i,n);return e!==void 0&&ky(e[Ri],e),e}function ZI(i,n,e,t,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=n[e.index];o!==null&&t.push(tc(o)),td(o)&&NY(o,t);let s=e.type;if(s&8)ZI(i,n,e.child,t);else if(s&32){let a=Tx(e,n),l;for(;l=a();)t.push(l)}else if(s&16){let a=QM(n,e);if(Array.isArray(a))t.push(...a);else{let l=zu(n[_a]);ZI(l[Ri],l,a,t,!0)}}e=r?e.projectionNext:e.next}return t}function NY(i,n){for(let e=vs;e<i.length;e++){let t=i[e],r=t[Ri].firstChild;r!==null&&ZI(t[Ri],t,r,n)}i[Wu]!==i[ed]&&n.push(i[Wu])}var _3=[];function LY(i){return i[$a]??MY(i)}function MY(i){let n=_3.pop()??Object.create(BY);return n.lView=i,n}function VY(i){i.lView[$a]!==i&&(i.lView=null,_3.push(i))}var BY=ke(oe({},zh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Ey(i.lView)},consumerOnSignalRead(){this.lView[$a]=this}});function UY(i){let n=i[$a]??Object.create(jY);return n.lView=i,n}var jY=ke(oe({},zh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let n=zu(i.lView);for(;n&&!C3(n[Ri]);)n=zu(n);n&&$L(n)},consumerOnSignalRead(){this.lView[$a]=this}});function C3(i){return i.type!==2}var GY=100;function I3(i,n=!0,e=0){let t=i[ec],r=t.rendererFactory,o=!1;o||r.begin?.();try{HY(i,e)}catch(s){throw n&&f3(i,s),s}finally{o||(r.end?.(),t.inlineEffectRunner?.flush())}}function HY(i,n){let e=ZL();try{TN(!0),SA(i,n);let t=0;for(;Sy(i);){if(t===GY)throw new xt(103,!1);t++,SA(i,1)}}finally{TN(e)}}function WY(i,n,e,t){let r=n[xi];if((r&256)===256)return;let o=!1,s=!1;!o&&n[ec].inlineEffectRunner?.flush(),gx(n);let a=!0,l=null,c=null;o||(C3(i)?(c=LY(n),l=Pg(c)):Rk()===null?(a=!1,c=UY(n),l=Pg(c)):n[$a]&&(JC(n[$a]),n[$a]=null));try{KL(n),EJ(i.bindingStartIndex),e!==null&&s3(i,n,e,2,t);let d=(r&3)===3;if(!o)if(d){let C=i.preOrderCheckHooks;C!==null&&FI(n,C,null)}else{let C=i.preOrderHooks;C!==null&&kI(n,C,0,null),FE(n,0)}if(s||zY(n),y3(n,0),i.contentQueries!==null&&p3(i,n),!o)if(d){let C=i.contentCheckHooks;C!==null&&FI(n,C)}else{let C=i.contentHooks;C!==null&&kI(n,C,1),FE(n,1)}aY(i,n);let h=i.components;h!==null&&v3(n,h,0);let _=i.viewQuery;if(_!==null&&bA(2,_,t),!o)if(d){let C=i.viewCheckHooks;C!==null&&FI(n,C)}else{let C=i.viewHooks;C!==null&&kI(n,C,2),FE(n,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),n[DI]){for(let C of n[DI])C();n[DI]=null}o||(n[xi]&=-73)}catch(d){throw o||Ey(n),d}finally{c!==null&&(KC(c,l),a&&VY(c)),_x()}}function y3(i,n){for(let e=EM(i);e!==null;e=AM(e))for(let t=vs;t<e.length;t++){let r=e[t];w3(r,n)}}function zY(i){for(let n=EM(i);n!==null;n=AM(n)){if(!(n[xi]&WI.HasTransplantedViews))continue;let e=n[ff];for(let t=0;t<e.length;t++){let r=e[t];$L(r)}}}function KY(i,n,e){let t=fp(n,i);w3(t,e)}function w3(i,n){ux(i)&&SA(i,n)}function SA(i,n){let t=i[Ri],r=i[xi],o=i[$a],s=!!(n===0&&r&16);if(s||=!!(r&64&&n===0),s||=!!(r&1024),s||=!!(o?.dirty&&$C(o)),s||=!1,o&&(o.dirty=!1),i[xi]&=-9217,s)WY(t,i,t.template,i[ws]);else if(r&8192){y3(i,1);let a=t.components;a!==null&&v3(i,a,1)}}function v3(i,n,e){for(let t=0;t<n.length;t++)KY(i,n[t],e)}function Ux(i,n){let e=ZL()?64:1088;for(i[ec].changeDetectionScheduler?.notify(n);i;){i[xi]|=e;let t=zu(i);if(ZE(i)&&!t)return i;i=t}return null}var qu=class{get rootNodes(){let n=this._lView,e=n[Ri];return ZI(e,n,e.firstChild,[])}constructor(n,e,t=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ws]}set context(n){this._lView[ws]=n}get destroyed(){return(this._lView[xi]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[bs];if(td(n)){let e=n[HI],t=e?e.indexOf(this):-1;t>-1&&($g(n,t),BI(e,t))}this._attachedToViewContainer=!1}ky(this._lView[Ri],this._lView)}onDestroy(n){JL(this._lView,n)}markForCheck(){Ux(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xi]&=-129}reattach(){tA(this._lView),this._lView[xi]|=128}detectChanges(){this._lView[xi]|=1024,I3(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=ZE(this._lView),e=this._lView[Hu];e!==null&&!n&&Ox(e,this._lView),KM(this._lView[Ri],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new xt(902,!1);this._appRef=n;let e=ZE(this._lView),t=this._lView[Hu];t!==null&&!e&&$M(t,this._lView),tA(this._lView)}},Ca=(()=>{class i{static{this.__NG_ELEMENT_ID__=qY}}return i})(),$Y=Ca,JY=class extends $Y{constructor(n,e,t){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=t}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,t){let r=i_(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:t});return new qu(r)}};function qY(){return By(ns(),si())}function By(i,n){return i.type&4?new JY(n,i,Af(i,n)):null}var Ast=new RegExp(`^(\\d+)*(${fq}|${hq})*(.*)`);var YY=()=>null;function gf(i,n){return YY(i,n)}var _f=class{},jx=new Xe("",{providedIn:"root",factory:()=>!1});var b3=new Xe(""),S3=new Xe(""),EA=class{},ey=class{};function XY(i){let n=Error(`No component factory found for ${Ns(i)}.`);return n[QY]=i,n}var QY="ngComponent";var AA=class{resolveComponentFactory(n){throw XY(n)}},hp=class{static{this.NULL=new AA}},Cf=class{},jt=(()=>{class i{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ZY()}}return i})();function ZY(){let i=si(),n=ns(),e=fp(n.index,i);return(lp(e)?e:i)[Br]}var eX=(()=>{class i{static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>null})}}return i})();function ty(i,n,e){let t=e?i.styles:null,r=e?i.classes:null,o=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")o=a;else if(o==1)r=zE(r,a);else if(o==2){let l=a,c=n[++s];t=zE(t,l+": "+c+";")}}e?i.styles=t:i.stylesWithoutHost=t,e?i.classes=r:i.classesWithoutHost=r}var iy=class extends hp{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=Yc(n);return new Yu(e,this.ngModule)}};function JN(i,n){let e=[];for(let t in i){if(!i.hasOwnProperty(t))continue;let r=i[t];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:cp.None;n?e.push({propName:s,templateName:t,isSignal:(a&cp.SignalBased)!==0}):e.push({propName:s,templateName:t})}return e}function tX(i){let n=i.toLowerCase();return n==="svg"?WL:n==="math"?hJ:null}var Yu=class extends ey{get inputs(){let n=this.componentDef,e=n.inputTransforms,t=JN(n.inputs,!0);if(e!==null)for(let r of t)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return t}get outputs(){return JN(this.componentDef.outputs,!1)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=K$(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,t,r){let o=un(null);try{r=r||this.ngModule;let s=r instanceof Ls?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new nA(n,s):n,l=a.get(Cf,null);if(l===null)throw new xt(407,!1);let c=a.get(eX,null),d=a.get(_f,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:d},_=l.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",I=t?dY(_,t,this.componentDef.encapsulation,a):zM(_,C,tX(C)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let E=null;I!==null&&(E=Sx(I,a,!0));let R=kx(0,null,null,1,0,null,null,null,null,null,null),T=My(null,R,null,b,null,null,h,_,a,null,E);gx(T);let A,U,z=null;try{let ee=this.componentDef,re,Z=null;ee.findHostDirectiveDefs?(re=[],Z=new Map,ee.findHostDirectiveDefs(ee,re,Z),re.push(ee)):re=[ee];let ae=iX(T,I);z=nX(ae,I,ee,re,T,h,_),U=px(R,Oo),I&&sX(_,ee,I,t),e!==void 0&&aX(U,this.ngContentSelectors,e),A=oX(z,ee,re,Z,T,[lX]),Bx(R,T,null)}catch(ee){throw z!==null&&pA(z),pA(T),ee}finally{_x()}return new xA(this.componentType,A,Af(U,T),T,U)}finally{un(o)}}},xA=class extends EA{constructor(n,e,t,r,o){super(),this.location=t,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new qu(r,void 0,!1),this.componentType=n}setInput(n,e){let t=this._tNode.inputs,r;if(t!==null&&(r=t[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let o=this._rootLView;Mx(o[Ri],o,r,n,e),this.previousInputValues.set(n,e);let s=fp(this._tNode.index,o);Ux(s,1)}}get injector(){return new Uu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function iX(i,n){let e=i[Ri],t=Oo;return i[t]=n,xf(e,t,2,"#host",null)}function nX(i,n,e,t,r,o,s){let a=r[Ri];rX(t,i,n,s);let l=null;n!==null&&(l=Sx(n,r[hf]));let c=o.rendererFactory.createRenderer(n,e),d=16;e.signals?d=4096:e.onPush&&(d=64);let h=My(r,a3(e),null,d,r[i.index],i,o,c,null,null,l);return a.firstCreatePass&&vA(a,i,t.length-1),Vy(r,h),r[i.index]=h}function rX(i,n,e,t){for(let r of i)n.mergedAttrs=Wg(n.mergedAttrs,r.hostAttrs);n.mergedAttrs!==null&&(ty(n,n.mergedAttrs,!0),e!==null&&t3(t,e,n))}function oX(i,n,e,t,r,o){let s=ns(),a=r[Ri],l=qa(s,r);l3(a,r,s,e,null,t);for(let d=0;d<e.length;d++){let h=s.directiveStart+d,_=Ju(r,a,h,s);up(_,r)}c3(a,r,s),l&&up(l,r);let c=Ju(r,a,s.directiveStart+s.componentOffset,s);if(i[ws]=r[ws]=c,o!==null)for(let d of o)d(c,n);return Px(a,s,r),c}function sX(i,n,e,t){if(t)qE(i,e,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=$$(n.selectors[0]);r&&qE(i,e,r),o&&o.length>0&&e3(i,e,o.join(" "))}}function aX(i,n,e){let t=i.projection=[];for(let r=0;r<n.length;r++){let o=e[r];t.push(o!=null?Array.from(o):null)}}function lX(){let i=ns();Ry(si()[Ri],i)}var Ro=(()=>{class i{static{this.__NG_ELEMENT_ID__=cX}}return i})();function cX(){let i=ns();return A3(i,si())}var dX=Ro,E3=class extends dX{constructor(n,e,t){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=t}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new Uu(this._hostTNode,this._hostLView)}get parentInjector(){let n=Cx(this._hostTNode,this._hostLView);if(cM(n)){let e=KI(n,this._hostLView),t=zI(n),r=e[Ri].data[t+8];return new Uu(r,e)}else return new Uu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=qN(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-vs}createEmbeddedView(n,e,t){let r,o;typeof t=="number"?r=t:t!=null&&(r=t.index,o=t.injector);let s=gf(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,mf(this._hostTNode,s)),a}createComponent(n,e,t,r,o){let s=n&&!cJ(n),a;if(s)a=e;else{let I=e||{};a=I.index,t=I.injector,r=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let l=s?n:new Yu(Yc(n)),c=t||this.parentInjector;if(!o&&l.ngModule==null){let b=(s?c:this.parentInjector).get(Ls,null);b&&(o=b)}let d=Yc(l.componentType??{}),h=gf(this._lContainer,d?.id??null),_=h?.firstChild??null,C=l.create(c,r,_,o);return this.insertImpl(C.hostView,a,mf(this._hostTNode,h)),C}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,t){let r=n._lView;if(mJ(r)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=r[bs],c=new E3(l,l[Ys],l[bs]);c.detach(c.indexOf(n))}}let o=this._adjustIndex(e),s=this._lContainer;return n_(s,r,o,t),n.attachToViewContainerRef(),yL(VE(s),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=qN(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),t=$g(this._lContainer,e);t&&(BI(VE(this._lContainer),e),ky(t[Ri],t))}detach(n){let e=this._adjustIndex(n,-1),t=$g(this._lContainer,e);return t&&BI(VE(this._lContainer),e)!=null?new qu(t):null}_adjustIndex(n,e=0){return n??this.length+e}};function qN(i){return i[HI]}function VE(i){return i[HI]||(i[HI]=[])}function A3(i,n){let e,t=n[i.index];return td(t)?e=t:(e=d3(t,n,null,i),n[i.index]=e,Vy(n,e)),uX(e,n,i,t),new E3(e,i,n)}function pX(i,n){let e=i[Br],t=e.createComment(""),r=qa(n,i),o=YM(e,r);return QI(e,o,t,Zq(e,r),!1),t}var uX=mX,hX=()=>!1;function fX(i,n,e){return hX(i,n,e)}function mX(i,n,e,t){if(i[Wu])return;let r;e.type&8?r=tc(t):r=pX(n,e),i[Wu]=r}var TA=class i{constructor(n){this.queryList=n,this.matches=null}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},OA=class i{constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let t=n.contentQueries!==null?n.contentQueries[0]:e.length,r=[];for(let o=0;o<t;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)Gx(n,e).matches!==null&&this.queries[e].setDirty()}},ny=class{constructor(n,e,t=null){this.flags=e,this.read=t,typeof n=="string"?this.predicate=bX(n):this.predicate=n}},RA=class i{constructor(n=[]){this.queries=n}elementStart(n,e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let t=0;t<this.length;t++){let r=e!==null?e.length:0,o=this.getByIndex(t).embeddedTView(n,r);o&&(o.indexInDeclarationView=t,e!==null?e.push(o):e=[o])}return e!==null?new i(e):null}template(n,e){for(let t=0;t<this.queries.length;t++)this.queries[t].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},PA=class i{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new i(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,t=n.parent;for(;t!==null&&t.type&8&&t.index!==e;)t=t.parent;return e===(t!==null?t.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let t=this.metadata.predicate;if(Array.isArray(t))for(let r=0;r<t.length;r++){let o=t[r];this.matchTNodeWithReadOption(n,e,gX(e,o)),this.matchTNodeWithReadOption(n,e,NI(e,n,o,!1,!1))}else t===Ca?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,NI(e,n,t,!1,!1))}matchTNodeWithReadOption(n,e,t){if(t!==null){let r=this.metadata.read;if(r!==null)if(r===Ze||r===Ro||r===Ca&&e.type&4)this.addMatch(e.index,-2);else{let o=NI(e,n,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,t)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function gX(i,n){let e=i.localNames;if(e!==null){for(let t=0;t<e.length;t+=2)if(e[t]===n)return e[t+1]}return null}function _X(i,n){return i.type&11?Af(i,n):i.type&4?By(i,n):null}function CX(i,n,e,t){return e===-1?_X(n,i):e===-2?IX(i,n,t):Ju(i,i[Ri],e,n)}function IX(i,n,e){if(e===Ze)return Af(n,i);if(e===Ca)return By(n,i);if(e===Ro)return A3(n,i)}function x3(i,n,e,t){let r=n[Xc].queries[t];if(r.matches===null){let o=i.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=o[c];a.push(CX(n,d,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function DA(i,n,e,t){let r=i.queries.getByIndex(e),o=r.matches;if(o!==null){let s=x3(i,n,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)t.push(s[a/2]);else{let c=o[a+1],d=n[-l];for(let h=vs;h<d.length;h++){let _=d[h];_[Hu]===_[bs]&&DA(_[Ri],_,c,t)}if(d[ff]!==null){let h=d[ff];for(let _=0;_<h.length;_++){let C=h[_];DA(C[Ri],C,c,t)}}}}}return t}function yX(i,n){return i[Xc].queries[n].queryList}function T3(i,n,e){let t=new dA((e&4)===4);return hY(i,n,t,t.destroy),(n[Xc]??=new OA).queries.push(new TA(t))-1}function wX(i,n,e){let t=jr();return t.firstCreatePass&&(O3(t,new ny(i,n,e),-1),(n&2)===2&&(t.staticViewQueries=!0)),T3(t,si(),n)}function vX(i,n,e,t){let r=jr();if(r.firstCreatePass){let o=ns();O3(r,new ny(n,e,t),o.index),SX(r,i),(e&2)===2&&(r.staticContentQueries=!0)}return T3(r,si(),e)}function bX(i){return i.split(",").map(n=>n.trim())}function O3(i,n,e){i.queries===null&&(i.queries=new RA),i.queries.track(new PA(n,e))}function SX(i,n){let e=i.contentQueries||(i.contentQueries=[]),t=e.length?e[e.length-1]:-1;n!==t&&e.push(i.queries.length-1,n)}function Gx(i,n){return i.queries.getByIndex(n)}function EX(i,n){let e=i[Ri],t=Gx(e,n);return t.crossesNgTemplate?DA(e,i,n,[]):x3(e,i,t,n)}var YN=new Set;function rd(i){YN.has(i)||(YN.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function AX(i){return typeof i=="function"&&i[Il]!==void 0}function Gi(i,n){rd("NgSignals");let e=Gk(i),t=e[Il];return n?.equal&&(t.equal=n.equal),e.set=r=>XC(t,r),e.update=r=>Hk(t,r),e.asReadonly=xX.bind(e),e}function xX(){let i=this[Il];if(i.readonlyFn===void 0){let n=()=>this();n[Il]=i,i.readonlyFn=n}return i.readonlyFn}function R3(i){return AX(i)&&typeof i.set=="function"}function TX(i){let n=[],e=new Map;function t(r){let o=e.get(r);if(!o){let s=i(r);e.set(r,o=s.then(DX))}return o}return ry.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(t(r.templateUrl).then(c=>{r.template=c}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let c=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((h,_)=>{a.push(""),s.push(t(h).then(C=>{a[c+_]=C,d.splice(d.indexOf(h),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(t(r.styleUrl).then(c=>{a.push(c),r.styleUrl=void 0}));let l=Promise.all(s).then(()=>FX(o));n.push(l)}),RX(),Promise.all(n).then(()=>{})}var ry=new Map,OX=new Set;function RX(){let i=ry;return ry=new Map,i}function PX(){return ry.size===0}function DX(i){return typeof i=="string"?i:i.text()}function FX(i){OX.delete(i)}function kX(i){return Object.getPrototypeOf(i.prototype).constructor}function Se(i){let n=kX(i.type),e=!0,t=[i];for(;n;){let r;if(dp(i))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new xt(903,!1);r=n.\u0275dir}if(r){if(e){t.push(r);let s=i;s.inputs=xI(i.inputs),s.inputTransforms=xI(i.inputTransforms),s.declaredInputs=xI(i.declaredInputs),s.outputs=xI(i.outputs);let a=r.hostBindings;a&&BX(i,a);let l=r.viewQuery,c=r.contentQueries;if(l&&MX(i,l),c&&VX(i,c),NX(i,r),p$(i.outputs,r.outputs),dp(r)&&r.data.animation){let d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(i),a===Se&&(e=!1)}}n=Object.getPrototypeOf(n)}LX(t)}function NX(i,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||i.inputs.hasOwnProperty(e))continue;let t=n.inputs[e];if(t!==void 0&&(i.inputs[e]=t,i.declaredInputs[e]=n.declaredInputs[e],n.inputTransforms!==null)){let r=Array.isArray(t)?t[0]:t;if(!n.inputTransforms.hasOwnProperty(r))continue;i.inputTransforms??={},i.inputTransforms[r]=n.inputTransforms[r]}}}function LX(i){let n=0,e=null;for(let t=i.length-1;t>=0;t--){let r=i[t];r.hostVars=n+=r.hostVars,r.hostAttrs=Wg(r.hostAttrs,e=Wg(e,r.hostAttrs))}}function xI(i){return i===df?{}:i===Js?[]:i}function MX(i,n){let e=i.viewQuery;e?i.viewQuery=(t,r)=>{n(t,r),e(t,r)}:i.viewQuery=n}function VX(i,n){let e=i.contentQueries;e?i.contentQueries=(t,r,o)=>{n(t,r,o),e(t,r,o)}:i.contentQueries=n}function BX(i,n){let e=i.hostBindings;e?i.hostBindings=(t,r)=>{n(t,r),e(t,r)}:i.hostBindings=n}function tt(i){let n=i.inputConfig,e={};for(let t in n)if(n.hasOwnProperty(t)){let r=n[t];Array.isArray(r)&&r[3]&&(e[t]=r[3])}i.inputTransforms=e}var Zc=class{},Jg=class{};function P3(i,n){return new qg(i,n??null,[])}var qg=class extends Zc{constructor(n,e,t,r=!0){super(),this.ngModuleType=n,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iy(this);let o=RL(n);this._bootstrapComponents=WM(o.bootstrap),this._r3Injector=CM(n,e,[{provide:Zc,useValue:this},{provide:hp,useValue:this.componentFactoryResolver},...t],Ns(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},oy=class extends Jg{constructor(n){super(),this.moduleType=n}create(n){return new qg(this.moduleType,n,[])}};function UX(i,n,e){return new qg(i,n,e,!1)}var FA=class extends Zc{constructor(n){super(),this.componentFactoryResolver=new iy(this),this.instance=null;let e=new zg([...n.providers,{provide:Zc,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],n.parent||Cy(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Uy(i,n,e=null){return new FA({providers:i,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}function D3(i){return Hx(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function jX(i,n){if(Array.isArray(i))for(let e=0;e<i.length;e++)n(i[e]);else{let e=i[Symbol.iterator](),t;for(;!(t=e.next()).done;)n(t.value)}}function Hx(i){return i!==null&&(typeof i=="function"||typeof i=="object")}function sc(i,n,e){return i[n]=e}function r_(i,n){return i[n]}function qs(i,n,e){let t=i[n];return Object.is(t,e)?!1:(i[n]=e,!0)}function If(i,n,e,t){let r=qs(i,n,e);return qs(i,n+1,t)||r}function Wx(i,n,e,t,r){let o=If(i,n,e,t);return qs(i,n+2,r)||o}function yf(i,n,e,t,r,o){let s=If(i,n,e,t);return If(i,n+2,r,o)||s}function GX(i){return(i.flags&32)===32}function HX(i,n,e,t,r,o,s,a,l){let c=n.consts,d=xf(n,i,4,s||null,a||null);Lx(n,e,d,pp(c,l)),Ry(n,d);let h=d.tView=kx(2,d,t,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,d),h.queries=n.queries.embeddedTView(d)),d}function sy(i,n,e,t,r,o,s,a,l,c){let d=e+Oo,h=n.firstCreatePass?HX(d,n,i,t,r,o,s,a,l):n.data[d];Qu(h,!1);let _=WX(n,i,h,e);Ty()&&Ny(n,i,_,h),up(_,i);let C=d3(_,i,_,h);return i[d]=C,Vy(i,C),fX(C,h,i),vy(h)&&Dx(n,i,h),l!=null&&Fx(i,h,c),h}function v(i,n,e,t,r,o,s,a){let l=si(),c=jr(),d=pp(c.consts,o);return sy(l,c,i,n,e,t,r,d,s,a),v}var WX=zX;function zX(i,n,e,t){return Oy(!0),n[Br].createComment("")}var af=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(af||{}),F3=(()=>{class i{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>new i})}}return i})(),kA=class i{constructor(){this.ngZone=Je(Lt),this.scheduler=Je(_f),this.errorHandler=Je(ic,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[af.EarlyRead,af.Write,af.MixedReadWrite,af.Read]}execute(){this.executing=!0;for(let n of i.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[n]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[n](e.pipelinedValue))}catch(t){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(t)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>new i})}},NA=class{constructor(n,e,t,r){this.impl=n,this.hooks=e,this.once=t,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function zx(i,n){!n?.injector&&Iy(zx);let e=n?.injector??Je(Ur);return jq(e)?(rd("NgAfterNextRender"),$X(i,e,n,!0)):JX}function KX(i,n){if(i instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[n]=i,e}else return[i.earlyRead,i.write,i.mixedReadWrite,i.read]}function $X(i,n,e,t){let r=n.get(F3);r.impl??=n.get(kA);let o=e?.phase??af.MixedReadWrite,s=e?.manualCleanup!==!0?n.get(Zu):null,a=new NA(r.impl,KX(i,o),t,s);return r.impl.register(a),a}var JX={destroy(){}};function G(i,n,e,t){let r=si(),o=Ef();if(qs(r,o,n)){let s=jr(),a=xy();TY(a,r,i,n,e,t)}return G}function Kx(i,n,e,t){return qs(i,Ef(),e)?n+Ql(e)+t:Ss}function qX(i,n,e,t,r,o){let s=eM(),a=If(i,s,e,r);return Ay(2),a?n+Ql(e)+t+Ql(r)+o:Ss}function YX(i,n,e,t,r,o,s,a){let l=eM(),c=Wx(i,l,e,r,s);return Ay(3),c?n+Ql(e)+t+Ql(r)+o+Ql(s)+a:Ss}function TI(i,n){return i<<17|n<<2}function Xu(i){return i>>17&32767}function XX(i){return(i&2)==2}function QX(i,n){return i&131071|n<<17}function LA(i){return i|2}function wf(i){return(i&131068)>>2}function BE(i,n){return i&-131069|n<<2}function ZX(i){return(i&1)===1}function MA(i){return i|1}function eQ(i,n,e,t,r,o){let s=o?n.classBindings:n.styleBindings,a=Xu(s),l=wf(s);i[t]=e;let c=!1,d;if(Array.isArray(e)){let h=e;d=h[1],(d===null||e_(h,d)>0)&&(c=!0)}else d=e;if(r)if(l!==0){let _=Xu(i[a+1]);i[t+1]=TI(_,a),_!==0&&(i[_+1]=BE(i[_+1],t)),i[a+1]=QX(i[a+1],t)}else i[t+1]=TI(a,0),a!==0&&(i[a+1]=BE(i[a+1],t)),a=t;else i[t+1]=TI(l,0),a===0?a=t:i[l+1]=BE(i[l+1],t),l=t;c&&(i[t+1]=LA(i[t+1])),XN(i,d,t,!0),XN(i,d,t,!1),tQ(n,d,i,t,o),s=TI(a,l),o?n.classBindings=s:n.styleBindings=s}function tQ(i,n,e,t,r){let o=r?i.residualClasses:i.residualStyles;o!=null&&typeof n=="string"&&e_(o,n)>=0&&(e[t+1]=MA(e[t+1]))}function XN(i,n,e,t){let r=i[e+1],o=n===null,s=t?Xu(r):wf(r),a=!1;for(;s!==0&&(a===!1||o);){let l=i[s],c=i[s+1];iQ(l,n)&&(a=!0,i[s+1]=t?MA(c):LA(c)),s=t?Xu(c):wf(c)}a&&(i[e+1]=t?LA(r):MA(r))}function iQ(i,n){return i===null||n==null||(Array.isArray(i)?i[1]:i)===n?!0:Array.isArray(i)&&typeof n=="string"?e_(i,n)>=0:!1}var To={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function k3(i){return i.substring(To.key,To.keyEnd)}function nQ(i){return i.substring(To.value,To.valueEnd)}function rQ(i){return M3(i),N3(i,vf(i,0,To.textEnd))}function N3(i,n){let e=To.textEnd;return e===n?-1:(n=To.keyEnd=sQ(i,To.key=n,e),vf(i,n,e))}function oQ(i){return M3(i),L3(i,vf(i,0,To.textEnd))}function L3(i,n){let e=To.textEnd,t=To.key=vf(i,n,e);return e===t?-1:(t=To.keyEnd=aQ(i,t,e),t=QN(i,t,e,58),t=To.value=vf(i,t,e),t=To.valueEnd=lQ(i,t,e),QN(i,t,e,59))}function M3(i){To.key=0,To.keyEnd=0,To.value=0,To.valueEnd=0,To.textEnd=i.length}function vf(i,n,e){for(;n<e&&i.charCodeAt(n)<=32;)n++;return n}function sQ(i,n,e){for(;n<e&&i.charCodeAt(n)>32;)n++;return n}function aQ(i,n,e){let t;for(;n<e&&((t=i.charCodeAt(n))===45||t===95||(t&-33)>=65&&(t&-33)<=90||t>=48&&t<=57);)n++;return n}function QN(i,n,e,t){return n=vf(i,n,e),n<e&&n++,n}function lQ(i,n,e){let t=-1,r=-1,o=-1,s=n,a=s;for(;s<e;){let l=i.charCodeAt(s++);if(l===59)return a;l===34||l===39?a=s=ZN(i,l,s,e):n===s-4&&o===85&&r===82&&t===76&&l===40?a=s=ZN(i,41,s,e):l>32&&(a=s),o=r,r=t,t=l&-33}return a}function ZN(i,n,e,t){let r=-1,o=e;for(;o<t;){let s=i.charCodeAt(o++);if(s==n&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function f(i,n,e){let t=si(),r=Ef();if(qs(t,r,n)){let o=jr(),s=xy();Nx(o,s,t,i,n,t[Br],e,!1)}return f}function VA(i,n,e,t,r){let o=n.inputs,s=r?"class":"style";Mx(i,e,o[s],s,t)}function Wn(i,n,e){return B3(i,n,e,!1),Wn}function Dn(i,n){return B3(i,n,null,!0),Dn}function st(i){$x(G3,cQ,i,!1)}function cQ(i,n){for(let e=oQ(n);e>=0;e=L3(n,e))G3(i,k3(n),nQ(n))}function ce(i){$x(mQ,V3,i,!0)}function V3(i,n){for(let e=rQ(n);e>=0;e=N3(n,e))Zg(i,k3(n),!0)}function B3(i,n,e,t){let r=si(),o=jr(),s=Ay(2);if(o.firstUpdatePass&&j3(o,i,s,t),n!==Ss&&qs(r,s,n)){let a=o.data[rc()];H3(o,a,r,r[Br],i,r[s+1]=_Q(n,e),t,s)}}function $x(i,n,e,t){let r=jr(),o=Ay(2);r.firstUpdatePass&&j3(r,null,o,t);let s=si();if(e!==Ss&&qs(s,o,e)){let a=r.data[rc()];if(W3(a,t)&&!U3(r,o)){let l=t?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=zE(l,e||"")),VA(r,a,s,e,t)}else gQ(r,a,s,s[Br],s[o+1],s[o+1]=fQ(i,n,e),t,o)}}function U3(i,n){return n>=i.expandoStartIndex}function j3(i,n,e,t){let r=i.data;if(r[e+1]===null){let o=r[rc()],s=U3(i,e);W3(o,t)&&n===null&&!s&&(n=!1),n=dQ(r,o,n,t),eQ(r,o,n,e,s,t)}}function dQ(i,n,e,t){let r=OJ(i),o=t?n.residualClasses:n.residualStyles;if(r===null)(t?n.classBindings:n.styleBindings)===0&&(e=UE(null,i,n,e,t),e=Yg(e,n.attrs,t),o=null);else{let s=n.directiveStylingLast;if(s===-1||i[s]!==r)if(e=UE(r,i,n,e,t),o===null){let l=pQ(i,n,t);l!==void 0&&Array.isArray(l)&&(l=UE(null,i,n,l[1],t),l=Yg(l,n.attrs,t),uQ(i,n,t,l))}else o=hQ(i,n,t)}return o!==void 0&&(t?n.residualClasses=o:n.residualStyles=o),e}function pQ(i,n,e){let t=e?n.classBindings:n.styleBindings;if(wf(t)!==0)return i[Xu(t)]}function uQ(i,n,e,t){let r=e?n.classBindings:n.styleBindings;i[Xu(r)]=t}function hQ(i,n,e){let t,r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++){let s=i[o].hostAttrs;t=Yg(t,s,e)}return Yg(t,n.attrs,e)}function UE(i,n,e,t,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=n[a],t=Yg(t,o.hostAttrs,r),o!==i);)a++;return i!==null&&(e.directiveStylingLast=a),t}function Yg(i,n,e){let t=e?1:2,r=-1;if(n!==null)for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?r=s:r===t&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),Zg(i,s,e?!0:n[++o]))}return i===void 0?null:i}function fQ(i,n,e){if(e==null||e==="")return Js;let t=[],r=ya(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(t,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&i(t,o,r[o]);else typeof r=="string"&&n(t,r);return t}function G3(i,n,e){Zg(i,n,ya(e))}function mQ(i,n,e){let t=String(n);t!==""&&!t.includes(" ")&&Zg(i,t,e)}function gQ(i,n,e,t,r,o,s,a){r===Ss&&(r=Js);let l=0,c=0,d=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let _=l<r.length?r[l+1]:void 0,C=c<o.length?o[c+1]:void 0,I=null,b;d===h?(l+=2,c+=2,_!==C&&(I=h,b=C)):h===null||d!==null&&d<h?(l+=2,I=d):(c+=2,I=h,b=C),I!==null&&H3(i,n,e,t,I,b,s,a),d=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}function H3(i,n,e,t,r,o,s,a){if(!(n.type&3))return;let l=i.data,c=l[a+1],d=ZX(c)?eL(l,n,e,r,wf(c),s):void 0;if(!ay(d)){ay(o)||XX(c)&&(o=eL(l,null,e,r,a,s));let h=zL(rc(),e);oY(t,s,h,r,o)}}function eL(i,n,e,t,r,o){let s=n===null,a;for(;r>0;){let l=i[r],c=Array.isArray(l),d=c?l[1]:l,h=d===null,_=e[r+1];_===Ss&&(_=h?Js:void 0);let C=h?PE(_,t):d===t?_:void 0;if(c&&!ay(C)&&(C=PE(l,t)),ay(C)&&(a=C,s))return a;let I=i[r+1];r=s?Xu(I):wf(I)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(a=PE(l,t))}return a}function ay(i){return i!==void 0}function _Q(i,n){return i==null||i===""||(typeof n=="string"?i=i+n:typeof i=="object"&&(i=Ns(ya(i)))),i}function W3(i,n){return(i.flags&(n?8:16))!==0}function va(i,n,e){let t=si(),r=Kx(t,i,n,e);$x(Zg,V3,r,!0)}var BA=class{destroy(n){}updateValue(n,e){}swap(n,e){let t=Math.min(n,e),r=Math.max(n,e),o=this.detach(r);if(r-t>1){let s=this.detach(t);this.attach(t,o),this.attach(r,s)}else this.attach(t,o)}move(n,e){this.attach(e,this.detach(n))}};function jE(i,n,e,t,r){return i===e&&Object.is(n,t)?1:Object.is(r(i,n),r(e,t))?-1:0}function CQ(i,n,e){let t,r,o=0,s=i.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;o<=s&&o<=l;){let c=i.at(o),d=n[o],h=jE(o,c,o,d,e);if(h!==0){h<0&&i.updateValue(o,d),o++;continue}let _=i.at(s),C=n[l],I=jE(s,_,l,C,e);if(I!==0){I<0&&i.updateValue(s,C),s--,l--;continue}let b=e(o,c),E=e(s,_),R=e(o,d);if(Object.is(R,E)){let T=e(l,C);Object.is(T,b)?(i.swap(o,s),i.updateValue(s,C),l--,s--):i.move(s,o),i.updateValue(o,d),o++;continue}if(t??=new ly,r??=iL(i,o,s,e),UA(i,t,o,R))i.updateValue(o,d),o++,s++;else if(r.has(R))t.set(b,i.detach(o)),s--;else{let T=i.create(o,n[o]);i.attach(o,T),o++,s++}}for(;o<=l;)tL(i,t,e,o,n[o]),o++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let d=i.at(o),h=c.value,_=jE(o,d,o,h,e);if(_!==0)_<0&&i.updateValue(o,h),o++,c=l.next();else{t??=new ly,r??=iL(i,o,s,e);let C=e(o,h);if(UA(i,t,o,C))i.updateValue(o,h),o++,s++,c=l.next();else if(!r.has(C))i.attach(o,i.create(o,h)),o++,s++,c=l.next();else{let I=e(o,d);t.set(I,i.detach(o)),s--}}}for(;!c.done;)tL(i,t,e,i.length,c.value),c=l.next()}for(;o<=s;)i.destroy(i.detach(s--));t?.forEach(l=>{i.destroy(l)})}function UA(i,n,e,t){return n!==void 0&&n.has(t)?(i.attach(e,n.get(t)),n.delete(t),!0):!1}function tL(i,n,e,t,r){if(UA(i,n,t,e(t,r)))i.updateValue(t,r);else{let o=i.create(t,r);i.attach(t,o)}}function iL(i,n,e,t){let r=new Set;for(let o=n;o<=e;o++)r.add(t(o,i.at(o)));return r}var ly=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let t=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(t);)t=r.get(t);r.set(t,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,t]of this.kvMap)if(n(t,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(t);)t=r.get(t),n(t,e)}}};function W(i,n){rd("NgControlFlow");let e=si(),t=Ef(),r=e[t]!==Ss?e[t]:-1,o=r!==-1?cy(e,Oo+r):void 0,s=0;if(qs(e,t,i)){let a=un(null);try{if(o!==void 0&&g3(o,s),i!==-1){let l=Oo+i,c=cy(e,l),d=WA(e[Ri],l),h=gf(c,d.tView.ssrId),_=i_(e,d,n,{dehydratedView:h});n_(c,_,s,mf(d,h))}}finally{un(a)}}else if(o!==void 0){let a=m3(o,s);a!==void 0&&(a[ws]=n)}}var jA=class{constructor(n,e,t){this.lContainer=n,this.$implicit=e,this.$index=t}get $count(){return this.lContainer.length-vs}};function Ar(i,n){return n}var GA=class{constructor(n,e,t){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=t}};function xr(i,n,e,t,r,o,s,a,l,c,d,h,_){rd("NgControlFlow");let C=si(),I=jr(),b=l!==void 0,E=si(),R=a?s.bind(E[_a][ws]):s,T=new GA(b,R);E[Oo+i]=T,sy(C,I,i+1,n,e,t,r,pp(I.consts,o)),b&&sy(C,I,i+2,l,c,d,h,pp(I.consts,_))}var HA=class extends BA{constructor(n,e,t){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=t,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-vs}at(n){return this.getLView(n)[ws].$implicit}attach(n,e){let t=e[uf];this.needsIndexUpdate||=n!==this.length,n_(this.lContainer,e,n,mf(this.templateTNode,t))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,IQ(this.lContainer,n)}create(n,e){let t=gf(this.lContainer,this.templateTNode.tView.ssrId),r=i_(this.hostLView,this.templateTNode,new jA(this.lContainer,e,n),{dehydratedView:t});return this.operationsCounter?.recordCreate(),r}destroy(n){ky(n[Ri],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[ws].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[ws].$index=n}getLView(n){return yQ(this.lContainer,n)}};function Tr(i){let n=un(null),e=rc();try{let t=si(),r=t[Ri],o=t[e],s=e+1,a=cy(t,s);if(o.liveCollection===void 0){let c=WA(r,s);o.liveCollection=new HA(a,t,c)}else o.liveCollection.reset();let l=o.liveCollection;if(CQ(l,i,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Ef(),d=l.length===0;if(qs(t,c,d)){let h=e+2,_=cy(t,h);if(d){let C=WA(r,h),I=gf(_,C.tView.ssrId),b=i_(t,C,void 0,{dehydratedView:I});n_(_,b,0,mf(C,I))}else g3(_,0)}}}finally{un(n)}}function cy(i,n){return i[n]}function IQ(i,n){return $g(i,n)}function yQ(i,n){return m3(i,n)}function WA(i,n){return px(i,n)}function wQ(i,n,e,t,r,o){let s=n.consts,a=pp(s,r),l=xf(n,i,2,t,a);return Lx(n,e,l,pp(s,o)),l.attrs!==null&&ty(l,l.attrs,!1),l.mergedAttrs!==null&&ty(l,l.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,l),l}function m(i,n,e,t){let r=si(),o=jr(),s=Oo+i,a=r[Br],l=o.firstCreatePass?wQ(s,o,r,n,e,t):o.data[s],c=vQ(o,r,l,a,n,i);r[s]=c;let d=vy(l);return Qu(l,!0),t3(a,c,l),!GX(l)&&Ty()&&Ny(o,r,c,l),CJ()===0&&up(c,r),IJ(),d&&(Dx(o,r,l),Px(o,l,r)),t!==null&&Fx(r,l),m}function g(){let i=ns();hx()?fx():(i=i.parent,Qu(i,!1));let n=i;wJ(n)&&vJ(),yJ();let e=jr();return e.firstCreatePass&&(Ry(e,i),dx(i)&&e.queries.elementEnd(i)),n.classesWithoutHost!=null&&MJ(n)&&VA(e,n,si(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&VJ(n)&&VA(e,n,si(),n.stylesWithoutHost,!1),g}function P(i,n,e,t){return m(i,n,e,t),g(),P}var vQ=(i,n,e,t,r,o)=>(Oy(!0),zM(t,r,FJ()));function bQ(i,n,e,t,r){let o=n.consts,s=pp(o,t),a=xf(n,i,8,"ng-container",s);s!==null&&ty(a,s,!0);let l=pp(o,r);return Lx(n,e,a,l),n.queries!==null&&n.queries.elementStart(n,a),a}function he(i,n,e){let t=si(),r=jr(),o=i+Oo,s=r.firstCreatePass?bQ(o,r,t,n,e):r.data[o];Qu(s,!0);let a=SQ(r,t,s,i);return t[o]=a,Ty()&&Ny(r,t,a,s),up(a,t),vy(s)&&(Dx(r,t,s),Px(r,s,t)),e!=null&&Fx(t,s),he}function fe(){let i=ns(),n=jr();return hx()?fx():(i=i.parent,Qu(i,!1)),n.firstCreatePass&&(Ry(n,i),dx(i)&&n.queries.elementEnd(i)),fe}function ue(i,n,e){return he(i,n,e),fe(),ue}var SQ=(i,n,e,t)=>(Oy(!0),zq(n[Br],""));function L(){return si()}var Bu=void 0;function EQ(i){let n=i,e=Math.floor(Math.abs(i)),t=i.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var AQ=["en",[["a","p"],["AM","PM"],Bu],[["AM","PM"],Bu,Bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bu,"{1} 'at' {0}",Bu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EQ],GE={};function ba(i){let n=xQ(i),e=nL(n);if(e)return e;let t=n.split("-")[0];if(e=nL(t),e)return e;if(t==="en")return AQ;throw new xt(701,!1)}function nL(i){return i in GE||(GE[i]=is.ng&&is.ng.common&&is.ng.common.locales&&is.ng.common.locales[i]),GE[i]}var Jr=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Jr||{});function xQ(i){return i.toLowerCase().replace(/_/g,"-")}var dy="en-US";var TQ=dy;function OQ(i){typeof i=="string"&&(TQ=i.toLowerCase().replace(/_/g,"-"))}var RQ=(i,n,e)=>{};function k(i,n,e,t){let r=si(),o=jr(),s=ns();return z3(o,r,r[Br],s,i,n,t),k}function PQ(i,n,e,t){let r=i.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===t){let a=n[GI],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function z3(i,n,e,t,r,o,s){let a=vy(t),c=i.firstCreatePass&&h3(i),d=n[ws],h=u3(n),_=!0;if(t.type&3||s){let b=qa(t,n),E=s?s(b):b,R=h.length,T=s?U=>s(tc(U[t.index])):t.index,A=null;if(!s&&a&&(A=PQ(i,n,r,t.index)),A!==null){let U=A.__ngLastListenerFn__||A;U.__ngNextListenerFn__=o,A.__ngLastListenerFn__=o,_=!1}else{o=oL(t,n,d,o),RQ(b,r,o);let U=e.listen(E,r,o);h.push(o,U),c&&c.push(r,T,R,R+1)}}else o=oL(t,n,d,o);let C=t.outputs,I;if(_&&C!==null&&(I=C[r])){let b=I.length;if(b)for(let E=0;E<b;E+=2){let R=I[E],T=I[E+1],z=n[R][T].subscribe(o),ee=h.length;h.push(o,z),c&&c.push(r,t.index,ee,-(ee+1))}}}function rL(i,n,e,t){let r=un(null);try{return Yl(6,n,e),e(t)!==!1}catch(o){return f3(i,o),!1}finally{Yl(7,n,e),un(r)}}function oL(i,n,e,t){return function r(o){if(o===Function)return t;let s=i.componentOffset>-1?fp(i.index,n):n;Ux(s,5);let a=rL(n,e,t,o),l=r.__ngNextListenerFn__;for(;l;)a=rL(n,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function u(i=1){return PJ(i)}function DQ(i,n){let e=null,t=j$(i);for(let r=0;r<n.length;r++){let o=n[r];if(o==="*"){e=r;continue}if(t===null?AL(i,o,!0):W$(t,o))return r}return e}function $i(i){let n=si()[_a][Ys];if(!n.projection){let e=i?i.length:1,t=n.projection=D$(e,null),r=t.slice(),o=n.child;for(;o!==null;){if(o.type!==128){let s=i?DQ(o,i):0;s!==null&&(r[s]?r[s].projectionNext=o:t[s]=o,r[s]=o)}o=o.next}}}function hi(i,n=0,e,t,r,o){let s=si(),a=jr(),l=t?i+1:null;l!==null&&sy(s,a,l,t,r,o,null,e);let c=xf(a,Oo+i,16,null,e||null);c.projection===null&&(c.projection=n),fx();let h=!s[uf]||XL();s[_a][Ys].projection[c.projection]===null&&l!==null?FQ(s,a,l):h&&(c.flags&32)!==32&&nY(a,s,c)}function FQ(i,n,e){let t=Oo+e,r=n.data[t],o=i[t],s=gf(o,r.tView.ssrId),a=i_(i,r,void 0,{dehydratedView:s});n_(o,a,0,mf(r,s))}function Q(i,n,e){return jy(i,"",n,"",e),Q}function jy(i,n,e,t,r){let o=si(),s=Kx(o,n,e,t);if(s!==Ss){let a=jr(),l=xy();Nx(a,l,o,i,s,o[Br],r,!1)}return jy}function ut(i,n,e,t){vX(i,n,e,t)}function le(i,n,e){wX(i,n,e)}function te(i){let n=si(),e=jr(),t=tM();mx(t+1);let r=Gx(e,t);if(i.dirty&&fJ(n)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let o=EX(n,t);i.reset(o,aq),i.notifyOnChanges()}return!0}return!1}function ie(){return yX(si(),tM())}function kQ(i,n,e,t){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),n[e]=t}function He(i){let n=SJ();return by(n,Oo+i)}function F(i,n=""){let e=si(),t=jr(),r=i+Oo,o=t.firstCreatePass?xf(t,r,1,n,null):t.data[r],s=NQ(t,e,o,n,i);e[r]=s,Ty()&&Ny(t,e,s,o),Qu(o,!1)}var NQ=(i,n,e,t,r)=>(Oy(!0),Hq(n[Br],t));function $(i){return J("",i,""),$}function J(i,n,e){let t=si(),r=Kx(t,i,n,e);return r!==Ss&&Vx(t,rc(),r),J}function Es(i,n,e,t,r){let o=si(),s=qX(o,i,n,e,t,r);return s!==Ss&&Vx(o,rc(),s),Es}function Tf(i,n,e,t,r,o,s){let a=si(),l=YX(a,i,n,e,t,r,o,s);return l!==Ss&&Vx(a,rc(),l),Tf}function Te(i,n,e){R3(n)&&(n=n());let t=si(),r=Ef();if(qs(t,r,n)){let o=jr(),s=xy();Nx(o,s,t,i,n,t[Br],e,!1)}return Te}function Re(i,n){let e=R3(i);return e&&i.set(n),e}function Oe(i,n){let e=si(),t=jr(),r=ns();return z3(t,e,e[Br],r,i,n),Oe}function LQ(i,n,e){let t=jr();if(t.firstCreatePass){let r=dp(i);zA(e,t.data,t.blueprint,r,!0),zA(n,t.data,t.blueprint,r,!1)}}function zA(i,n,e,t,r){if(i=ks(i),Array.isArray(i))for(let o=0;o<i.length;o++)zA(i[o],n,e,t,r);else{let o=jr(),s=si(),a=ns(),l=pf(i)?i:ks(i.provide),c=LL(i),d=a.providerIndexes&1048575,h=a.directiveStart,_=a.providerIndexes>>20;if(pf(i)||!i.multi){let C=new $u(c,r,S),I=WE(l,n,r?d:d+_,h);I===-1?(oA(JI(a,s),o,l),HE(o,i,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(C),s.push(C)):(e[I]=C,s[I]=C)}else{let C=WE(l,n,d+_,h),I=WE(l,n,d,d+_),b=C>=0&&e[C],E=I>=0&&e[I];if(r&&!E||!r&&!b){oA(JI(a,s),o,l);let R=BQ(r?VQ:MQ,e.length,r,t,c);!r&&E&&(e[I].providerFactory=R),HE(o,i,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(R),s.push(R)}else{let R=K3(e[r?I:C],c,!r&&t);HE(o,i,C>-1?C:I,R)}!r&&t&&E&&e[I].componentProviders++}}}function HE(i,n,e,t){let r=pf(n),o=tJ(n);if(r||o){let l=(o?ks(n.useClass):n).prototype.ngOnDestroy;if(l){let c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&n.multi){let d=c.indexOf(e);d===-1?c.push(e,[t,l]):c[d+1].push(t,l)}else c.push(e,l)}}}function K3(i,n,e){return e&&i.componentProviders++,i.multi.push(n)-1}function WE(i,n,e,t){for(let r=e;r<t;r++)if(n[r]===i)return r;return-1}function MQ(i,n,e,t){return KA(this.multi,[])}function VQ(i,n,e,t){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ju(e,e[Ri],this.providerFactory.index,t);o=a.slice(0,s),KA(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],KA(r,o);return o}function KA(i,n){for(let e=0;e<i.length;e++){let t=i[e];n.push(t())}return n}function BQ(i,n,e,t,r){let o=new $u(i,e,S);return o.multi=[],o.index=n,o.componentProviders=0,K3(o,r,t&&!e),o}function et(i,n=[]){return e=>{e.providersResolver=(t,r)=>LQ(t,r?r(i):i,n)}}var UQ=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let t=FL(!1,e.type),r=t.length>0?Uy([t],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ce({token:i,providedIn:"environment",factory:()=>new i(de(Ls))})}}return i})();function Ct(i){rd("NgStandalone"),i.getStandaloneInjector=n=>n.get(UQ).getOrCreateStandaloneInjector(i)}function os(i,n,e){let t=i.\u0275cmp;t.directiveDefs=jI(n,!1),t.pipeDefs=jI(e,!0)}function Ae(i,n,e){let t=Ia()+i,r=si();return r[t]===Ss?sc(r,t,e?n.call(e):n()):r_(r,t)}function ne(i,n,e,t){return q3(si(),Ia(),i,n,e,t)}function Qe(i,n,e,t,r){return Y3(si(),Ia(),i,n,e,t,r)}function en(i,n,e,t,r,o){return X3(si(),Ia(),i,n,e,t,r,o)}function xn(i,n,e,t,r,o,s){return jQ(si(),Ia(),i,n,e,t,r,o,s)}function ac(i,n,e,t,r,o,s,a){let l=Ia()+i,c=si(),d=yf(c,l,e,t,r,o);return qs(c,l+4,s)||d?sc(c,l+5,a?n.call(a,e,t,r,o,s):n(e,t,r,o,s)):r_(c,l+5)}function Po(i,n,e,t,r,o,s,a,l){let c=Ia()+i,d=si(),h=yf(d,c,e,t,r,o);return If(d,c+4,s,a)||h?sc(d,c+6,l?n.call(l,e,t,r,o,s,a):n(e,t,r,o,s,a)):r_(d,c+6)}function $3(i,n,e,t,r,o,s,a,l,c){let d=Ia()+i,h=si(),_=yf(h,d,e,t,r,o);return Wx(h,d+4,s,a,l)||_?sc(h,d+7,c?n.call(c,e,t,r,o,s,a,l):n(e,t,r,o,s,a,l)):r_(h,d+7)}function J3(i,n,e,t,r,o,s,a,l,c,d){let h=Ia()+i,_=si(),C=yf(_,h,e,t,r,o);return yf(_,h+4,s,a,l,c)||C?sc(_,h+8,d?n.call(d,e,t,r,o,s,a,l,c):n(e,t,r,o,s,a,l,c)):r_(_,h+8)}function eh(i,n,e,t){return GQ(si(),Ia(),i,n,e,t)}function o_(i,n){let e=i[n];return e===Ss?void 0:e}function q3(i,n,e,t,r,o){let s=n+e;return qs(i,s,r)?sc(i,s+1,o?t.call(o,r):t(r)):o_(i,s+1)}function Y3(i,n,e,t,r,o,s){let a=n+e;return If(i,a,r,o)?sc(i,a+2,s?t.call(s,r,o):t(r,o)):o_(i,a+2)}function X3(i,n,e,t,r,o,s,a){let l=n+e;return Wx(i,l,r,o,s)?sc(i,l+3,a?t.call(a,r,o,s):t(r,o,s)):o_(i,l+3)}function jQ(i,n,e,t,r,o,s,a,l){let c=n+e;return yf(i,c,r,o,s,a)?sc(i,c+4,l?t.call(l,r,o,s,a):t(r,o,s,a)):o_(i,c+4)}function GQ(i,n,e,t,r,o){let s=n+e,a=!1;for(let l=0;l<r.length;l++)qs(i,s++,r[l])&&(a=!0);return a?sc(i,s,t.apply(o,r)):o_(i,s)}function D(i,n){let e=jr(),t,r=i+Oo;e.firstCreatePass?(t=HQ(n,e.pipeRegistry),e.data[r]=t,t.onDestroy&&(e.destroyHooks??=[]).push(r,t.onDestroy)):t=e.data[r];let o=t.factory||(t.factory=ju(t.type,!0)),s,a=$s(S);try{let l=$I(!1),c=o();return $I(l),kQ(e,si(),r,c),c}finally{$s(a)}}function HQ(i,n){if(n)for(let e=n.length-1;e>=0;e--){let t=n[e];if(i===t.name)return t}}function N(i,n,e){let t=i+Oo,r=si(),o=by(r,t);return Jx(r,t)?q3(r,Ia(),n,o.transform,e,o):o.transform(e)}function ei(i,n,e,t){let r=i+Oo,o=si(),s=by(o,r);return Jx(o,r)?Y3(o,Ia(),n,s.transform,e,t,s):s.transform(e,t)}function Ms(i,n,e,t,r){let o=i+Oo,s=si(),a=by(s,o);return Jx(s,o)?X3(s,Ia(),n,a.transform,e,t,r,a):a.transform(e,t,r)}function Jx(i,n){return i[Ri].data[n].pure}function Bt(i,n){return By(i,n)}var OI=null;function WQ(i){OI!==null&&(i.defaultEncapsulation!==OI.defaultEncapsulation||i.preserveWhitespaces!==OI.preserveWhitespaces)||(OI=i)}var Gy=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();var qx=new Xe(""),s_=new Xe(""),Hy=(()=>{class i{constructor(e,t,r){this._ngZone=e,this.registry=t,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Yx||(zQ(r),r.addToWindow(t)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>t.updateCb&&t.updateCb(e)?(clearTimeout(t.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,r){let o=-1;t&&t>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},t)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,t,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,t,r){return[]}static{this.\u0275fac=function(t){return new(t||i)(de(Lt),de(Wy),de(s_))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),Wy=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Yx?.findTestabilityInTree(this,e,t)??null}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();function zQ(i){Yx=i}var Yx;function mp(i){return!!i&&typeof i.then=="function"}function Xx(i){return!!i&&typeof i.subscribe=="function"}var zy=new Xe(""),Q3=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.appInits=Je(zy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(mp(o))e.push(o);else if(Xx(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let t=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{t()}).catch(r=>{this.reject(r)}),e.length===0&&t(),this.initialized=!0}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ky=new Xe("");function KQ(){jk(()=>{throw new xt(600,!1)})}function $Q(i){return i.isBoundToModule}var JQ=10;function qQ(i,n,e){try{let t=e();return mp(t)?t.catch(r=>{throw n.runOutsideAngular(()=>i.handleError(r)),r}):t}catch(t){throw n.runOutsideAngular(()=>i.handleError(t)),t}}function Z3(i,n){return Array.isArray(n)?n.reduce(Z3,i):oe(oe({},i),n)}var Rl=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Je(rq),this.afterRenderManager=Je(F3),this.zonelessEnabled=Je(jx),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=Je(oc).hasPendingTasks.pipe(K(e=>!e)),this._injector=Je(Ls)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(t=>{e=this.isStable.subscribe({next:r=>{r&&t()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,t){let r=e instanceof ey;if(!this._injector.get(Q3).done){let _=!r&&OL(e),C=!1;throw new xt(405,C)}let s;r?s=e:s=this._injector.get(hp).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=$Q(s)?void 0:this._injector.get(Zc),l=t||s.selector,c=s.create(Ur.NULL,[],l,a),d=c.location.nativeElement,h=c.injector.get(qx,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),LI(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new xt(101,!1);let e=un(null);try{this._runningTick=!0,this.synchronize()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1,un(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(Cf,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<JQ;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(t);for(let{_lView:r,notifyErrorHandler:o}of this._views)YQ(r,o,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Sy(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){let t=e;LI(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let t=this._injector.get(Ky,[]);[...this._bootstrapListeners,...t].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>LI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new xt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function LI(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}function YQ(i,n,e,t){if(!e&&!Sy(i))return;I3(i,n,e&&!t?0:1)}var $A=class{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},$y=(()=>{class i{compileModuleSync(e){return new oy(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let t=this.compileModuleSync(e),r=RL(e),o=WM(r.declarations).reduce((s,a)=>{let l=Yc(a);return l&&s.push(new Yu(l)),s},[]);return new $A(t,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),XQ=new Xe("");function QQ(i,n,e){let t=new oy(e);return Promise.resolve(t)}function sL(i){for(let n=i.length-1;n>=0;n--)if(i[n]!==void 0)return i[n]}var ZQ=(()=>{class i{constructor(){this.zone=Je(Lt),this.changeDetectionScheduler=Je(_f),this.applicationRef=Je(Rl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function eZ({ngZoneFactory:i,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return i??=()=>new Lt(ke(oe({},e4()),{scheduleInRootZone:e})),[{provide:Lt,useFactory:i},{provide:Gu,multi:!0,useFactory:()=>{let t=Je(ZQ,{optional:!0});return()=>t.initialize()}},{provide:Gu,multi:!0,useFactory:()=>{let t=Je(tZ);return()=>{t.initialize()}}},n===!0?{provide:b3,useValue:!0}:[],{provide:S3,useValue:e??IM}]}function e4(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var tZ=(()=>{class i{constructor(){this.subscription=new Dr,this.initialized=!1,this.zone=Je(Lt),this.pendingTasks=Je(oc)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var iZ=(()=>{class i{constructor(){this.appRef=Je(Rl),this.taskService=Je(oc),this.ngZone=Je(Lt),this.zonelessEnabled=Je(jx),this.disableScheduling=Je(b3,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Dr,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(YI):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Je(S3,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof XI||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let t=this.useMicrotaskScheduler?FN:yM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>t(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>t(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(YI+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(t){throw this.taskService.remove(e),t}finally{this.cleanup()}this.useMicrotaskScheduler=!0,FN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function nZ(){return typeof $localize<"u"&&$localize.locale||dy}var th=new Xe("",{providedIn:"root",factory:()=>Je(th,tn.Optional|tn.SkipSelf)||nZ()});var py=new Xe("");function RI(i){return!i.moduleRef}function rZ(i){let n=RI(i)?i.r3Injector:i.moduleRef.injector,e=n.get(Lt);return e.run(()=>{RI(i)?i.r3Injector.resolveInjectorInitializers():i.moduleRef.resolveInjectorInitializers();let t=n.get(ic,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{t.handleError(o)}})}),RI(i)){let o=()=>n.destroy(),s=i.platformInjector.get(py);s.add(o),n.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>i.moduleRef.destroy(),s=i.platformInjector.get(py);s.add(o),i.moduleRef.onDestroy(()=>{LI(i.allPlatformModules,i.moduleRef),r.unsubscribe(),s.delete(o)})}return qQ(t,e,()=>{let o=n.get(Q3);return o.runInitializers(),o.donePromise.then(()=>{let s=n.get(th,dy);if(OQ(s||dy),RI(i)){let a=n.get(Rl);return i.rootComponent!==void 0&&a.bootstrap(i.rootComponent),a}else return oZ(i.moduleRef,i.allPlatformModules),i.moduleRef})})})}function oZ(i,n){let e=i.injector.get(Rl);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(t=>e.bootstrap(t));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(e);else throw new xt(-403,!1);n.push(i)}var t4=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){let r=t?.scheduleInRootZone,o=()=>nq(t?.ngZone,ke(oe({},e4({eventCoalescing:t?.ngZoneEventCoalescing,runCoalescing:t?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),s=t?.ignoreChangesOutsideZone,a=[eZ({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:_f,useExisting:iZ}],l=UX(e.moduleType,this.injector,a);return rZ({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,t=[]){let r=Z3({},t);return QQ(this.injector,r,e).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xt(404,!1);this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t());let e=this._injector.get(py,null);e&&(e.forEach(t=>t()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(t){return new(t||i)(de(Ur))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})(),Gg=null,i4=new Xe("");function sZ(i){if(Gg&&!Gg.get(i4,!1))throw new xt(400,!1);KQ(),Gg=i;let n=i.get(t4);return cZ(i),n}function Qx(i,n,e=[]){let t=`Platform: ${n}`,r=new Xe(t);return(o=[])=>{let s=n4();if(!s||s.injector.get(i4,!1)){let a=[...e,...o,{provide:r,useValue:!0}];i?i(a):sZ(aZ(a,t))}return lZ(r)}}function aZ(i=[],n){return Ur.create({name:n,providers:[{provide:_y,useValue:"platform"},{provide:py,useValue:new Set([()=>Gg=null])},...i]})}function lZ(i){let n=n4();if(!n)throw new xt(401,!1);return n}function n4(){return Gg?.get(t4)??null}function cZ(i){i.get(vx,null)?.forEach(e=>e())}function a_(){return!1}var we=(()=>{class i{static{this.__NG_ELEMENT_ID__=dZ}}return i})();function dZ(i){return pZ(ns(),si(),(i&16)===16)}function pZ(i,n,e){if(wy(i)&&!e){let t=fp(i.index,n);return new qu(t,t)}else if(i.type&175){let t=n[_a];return new qu(t,n)}return null}var JA=class{constructor(){}supports(n){return D3(n)}create(n){return new qA(n)}},uZ=(i,n)=>n,qA=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||uZ}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,t=this._removalsHead,r=0,o=null;for(;e||t;){let s=!t||e&&e.currentIndex<aL(t,r,o)?e:t,a=aL(s,r,o),l=s.currentIndex;if(s===t)r--,t=t._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,d=l-r;if(c!=d){for(let _=0;_<c;_++){let C=_<o.length?o[_]:o[_]=0,I=C+_;d<=I&&I<c&&(o[_]=C+1)}let h=s.previousIndex;o[h]=d-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!D3(n))throw new xt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,t=!1,r,o,s;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),t=!0):(t&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,jX(n,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),t=!0):(t&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,t,r){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(t,r),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new YA(e,t),o,r)),n}_verifyReinsertion(n,e,t,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null);return o!==null?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,t){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,o=n._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,t),this._addToMoves(n,t),n}_moveAfter(n,e,t){return this._unlink(n),this._insertAfter(n,e,t),this._addToMoves(n,t),n}_addAfter(n,e,t){return this._insertAfter(n,e,t),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,t){let r=e===null?this._itHead:e._next;return n._next=r,n._prev=e,r===null?this._itTail=n:r._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new uy),this._linkedRecords.put(n),n.currentIndex=t,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,t=n._next;return e===null?this._itHead=t:e._next=t,t===null?this._itTail=e:t._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new uy),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},YA=class{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},XA=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let t;for(t=this._head;t!==null;t=t._nextDup)if((e===null||e<=t.currentIndex)&&Object.is(t.trackById,n))return t;return null}remove(n){let e=n._prevDup,t=n._nextDup;return e===null?this._head=t:e._nextDup=t,t===null?this._tail=e:t._prevDup=e,this._head===null}},uy=class{constructor(){this.map=new Map}put(n){let e=n.trackById,t=this.map.get(e);t||(t=new XA,this.map.set(e,t)),t.add(n)}get(n,e){let t=n,r=this.map.get(t);return r?r.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function aL(i,n,e){let t=i.previousIndex;if(t===null)return t;let r=0;return e&&t<e.length&&(r=e[t]),t+n+r}var QA=class{constructor(){}supports(n){return n instanceof Map||Hx(n)}create(){return new ZA}},ZA=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let e;for(e=this._mapHead;e!==null;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||Hx(n)))throw new xt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(t,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,t);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;t!==null;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){let t=n._prev;return e._next=n,e._prev=t,n._prev=e,t&&(t._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){let r=this._records.get(n);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let t=new ex(n);return this._records.set(n,t),t.currentValue=e,this._addToAdditions(t),t}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(t=>e(n[t],t))}},ex=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function lL(){return new Zx([new JA])}var Zx=(()=>{class i{static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:lL})}constructor(e){this.factories=e}static create(e,t){if(t!=null){let r=t.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:t=>i.create(e,t||lL()),deps:[[i,new gy,new Qg]]}}find(e){let t=this.factories.find(r=>r.supports(e));if(t!=null)return t;throw new xt(901,!1)}}return i})();function cL(){return new eT([new QA])}var eT=(()=>{class i{static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:cL})}constructor(e){this.factories=e}static create(e,t){if(t){let r=t.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:t=>i.create(e,t||cL()),deps:[[i,new gy,new Qg]]}}find(e){let t=this.factories.find(r=>r.supports(e));if(t)return t;throw new xt(901,!1)}}return i})();var r4=Qx(null,"core",[]),o4=(()=>{class i{constructor(e){}static{this.\u0275fac=function(t){return new(t||i)(de(Rl))}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})();function Y(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}function We(i,n=NaN){return!isNaN(parseFloat(i))&&!isNaN(Number(i))?Number(i):n}function Gr(i,n){rd("NgSignals");let e=Vk(i);return n?.equal&&(e[Il].equal=n.equal),e}function Sa(i){let n=un(null);try{return i()}finally{un(n)}}var hZ=new Xe("",{providedIn:"root",factory:()=>Je(fZ)}),fZ=(()=>{class i{static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>new tx})}}return i})(),tx=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Je(oc),this.taskId=null}scheduleEffect(n){if(this.enqueue(n),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(n){let e=n.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let t=this.queues.get(e);t.has(n)||(this.queuedEffectCount++,t.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}},ix=class{constructor(n,e,t,r,o,s){this.scheduler=n,this.effectFn=e,this.creationZone=t,this.injector=o,this.watcher=Wk(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(n){try{this.effectFn(n)}catch(e){this.injector.get(ic,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function od(i,n){rd("NgSignals"),!n?.injector&&Iy(od);let e=n?.injector??Je(Ur),t=n?.manualCleanup!==!0?e.get(Zu):null,r=new ix(e.get(hZ),i,typeof Zone>"u"?null:Zone.current,t,e,n?.allowSignalWrites??!1),o=e.get(we,null,{optional:!0});return!o||!(o._lView[xi]&8)?r.watcher.notify():(o._lView[DI]??=[]).push(r.watcher.notify),r}function s4(i,n){let e=Yc(i),t=n.elementInjector||Cy();return new Yu(e).create(t,n.projectableNodes,n.hostElement,n.environmentInjector)}function a4(i){let n=Yc(i);if(!n)return null;let e=new Yu(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var g4=null;function lc(){return g4}function _4(i){g4??=i}var iw=class{};var At=new Xe(""),fT=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(gZ),providedIn:"platform"})}}return i})(),C4=new Xe(""),gZ=(()=>{class i extends fT{constructor(){super(),this._doc=Je(At),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lc().getBaseHref(this._doc)}onPopState(e){let t=lc().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){let t=lc().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,t,r){this._history.pushState(e,t,r)}replaceState(e,t,r){this._history.replaceState(e,t,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>new i,providedIn:"platform"})}}return i})();function mT(i,n){if(i.length==0)return n;if(n.length==0)return i;let e=0;return i.endsWith("/")&&e++,n.startsWith("/")&&e++,e==2?i+n.substring(1):e==1?i+n:i+"/"+n}function l4(i){let n=i.match(/#|\?|$/),e=n&&n.index||i.length,t=e-(i[e-1]==="/"?1:0);return i.slice(0,t)+i.slice(e)}function ad(i){return i&&i[0]!=="?"?"?"+i:i}var dd=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(gT),providedIn:"root"})}}return i})(),I4=new Xe(""),gT=(()=>{class i extends dd{constructor(e,t){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=t??this._platformLocation.getBaseHrefFromDOM()??Je(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return mT(this._baseHref,e)}path(e=!1){let t=this._platformLocation.pathname+ad(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${t}${r}`:t}pushState(e,t,r,o){let s=this.prepareExternalUrl(r+ad(o));this._platformLocation.pushState(e,t,s)}replaceState(e,t,r,o){let s=this.prepareExternalUrl(r+ad(o));this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(t){return new(t||i)(de(fT),de(I4,8))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),y4=(()=>{class i extends dd{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],t!=null&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash??"#";return t.length>0?t.substring(1):t}prepareExternalUrl(e){let t=mT(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,r,o){let s=this.prepareExternalUrl(r+ad(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,t,s)}replaceState(e,t,r,o){let s=this.prepareExternalUrl(r+ad(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(t){return new(t||i)(de(fT),de(I4,8))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),gp=(()=>{class i{constructor(e){this._subject=new X,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let t=this._locationStrategy.getBaseHref();this._basePath=IZ(l4(c4(t))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+ad(t))}normalize(e){return i.stripTrailingSlash(CZ(this._basePath,c4(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,t="",r=null){this._locationStrategy.pushState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ad(t)),r)}replaceState(e,t="",r=null){this._locationStrategy.replaceState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ad(t)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}),()=>{let t=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(t,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(r=>r(e,t))}subscribe(e,t,r){return this._subject.subscribe({next:e,error:t,complete:r})}static{this.normalizeQueryParams=ad}static{this.joinWithSlash=mT}static{this.stripTrailingSlash=l4}static{this.\u0275fac=function(t){return new(t||i)(de(dd))}}static{this.\u0275prov=Ce({token:i,factory:()=>_Z(),providedIn:"root"})}}return i})();function _Z(){return new gp(de(dd))}function CZ(i,n){if(!i||!n.startsWith(i))return n;let e=n.substring(i.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function c4(i){return i.replace(/\/index.html$/,"")}function IZ(i){if(new RegExp("^(https?:)?//").test(i)){let[,e]=i.split(/\/\/[^\/]+/);return e}return i}var w4=function(i){return i[i.Decimal=0]="Decimal",i[i.Percent=1]="Percent",i[i.Currency=2]="Currency",i[i.Scientific=3]="Scientific",i}(w4||{});var Vs=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}(Vs||{}),nr=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(nr||{}),Ea=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(Ea||{}),Aa={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function yZ(i){return ba(i)[Jr.LocaleId]}function wZ(i,n,e){let t=ba(i),r=[t[Jr.DayPeriodsFormat],t[Jr.DayPeriodsStandalone]],o=Ya(r,n);return Ya(o,e)}function vZ(i,n,e){let t=ba(i),r=[t[Jr.DaysFormat],t[Jr.DaysStandalone]],o=Ya(r,n);return Ya(o,e)}function bZ(i,n,e){let t=ba(i),r=[t[Jr.MonthsFormat],t[Jr.MonthsStandalone]],o=Ya(r,n);return Ya(o,e)}function SZ(i,n){let t=ba(i)[Jr.Eras];return Ya(t,n)}function Jy(i,n){let e=ba(i);return Ya(e[Jr.DateFormat],n)}function qy(i,n){let e=ba(i);return Ya(e[Jr.TimeFormat],n)}function Yy(i,n){let t=ba(i)[Jr.DateTimeFormat];return Ya(t,n)}function ld(i,n){let e=ba(i),t=e[Jr.NumberSymbols][n];if(typeof t>"u"){if(n===Aa.CurrencyDecimal)return e[Jr.NumberSymbols][Aa.Decimal];if(n===Aa.CurrencyGroup)return e[Jr.NumberSymbols][Aa.Group]}return t}function EZ(i,n){return ba(i)[Jr.NumberFormats][n]}function v4(i){if(!i[Jr.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Jr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function AZ(i){let n=ba(i);return v4(n),(n[Jr.ExtraData][2]||[]).map(t=>typeof t=="string"?tT(t):[tT(t[0]),tT(t[1])])}function xZ(i,n,e){let t=ba(i);v4(t);let r=[t[Jr.ExtraData][0],t[Jr.ExtraData][1]],o=Ya(r,n)||[];return Ya(o,e)||[]}function Ya(i,n){for(let e=n;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function tT(i){let[n,e]=i.split(":");return{hours:+n,minutes:+e}}var TZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xy={},OZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,cd=function(i){return i[i.Short=0]="Short",i[i.ShortGMT=1]="ShortGMT",i[i.Long=2]="Long",i[i.Extended=3]="Extended",i}(cd||{}),Nn=function(i){return i[i.FullYear=0]="FullYear",i[i.Month=1]="Month",i[i.Date=2]="Date",i[i.Hours=3]="Hours",i[i.Minutes=4]="Minutes",i[i.Seconds=5]="Seconds",i[i.FractionalSeconds=6]="FractionalSeconds",i[i.Day=7]="Day",i}(Nn||{}),kn=function(i){return i[i.DayPeriods=0]="DayPeriods",i[i.Days=1]="Days",i[i.Months=2]="Months",i[i.Eras=3]="Eras",i}(kn||{});function RZ(i,n,e,t){let r=BZ(i);n=sd(e,n)||n;let s=[],a;for(;n;)if(a=OZ.exec(n),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;n=d}else{s.push(n);break}let l=r.getTimezoneOffset();t&&(l=S4(t,l),r=VZ(r,t,!0));let c="";return s.forEach(d=>{let h=LZ(d);c+=h?h(r,e,l):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function nw(i,n,e){let t=new Date(0);return t.setFullYear(i,n,e),t.setHours(0,0,0),t}function sd(i,n){let e=yZ(i);if(Xy[e]??={},Xy[e][n])return Xy[e][n];let t="";switch(n){case"shortDate":t=Jy(i,Ea.Short);break;case"mediumDate":t=Jy(i,Ea.Medium);break;case"longDate":t=Jy(i,Ea.Long);break;case"fullDate":t=Jy(i,Ea.Full);break;case"shortTime":t=qy(i,Ea.Short);break;case"mediumTime":t=qy(i,Ea.Medium);break;case"longTime":t=qy(i,Ea.Long);break;case"fullTime":t=qy(i,Ea.Full);break;case"short":let r=sd(i,"shortTime"),o=sd(i,"shortDate");t=Qy(Yy(i,Ea.Short),[r,o]);break;case"medium":let s=sd(i,"mediumTime"),a=sd(i,"mediumDate");t=Qy(Yy(i,Ea.Medium),[s,a]);break;case"long":let l=sd(i,"longTime"),c=sd(i,"longDate");t=Qy(Yy(i,Ea.Long),[l,c]);break;case"full":let d=sd(i,"fullTime"),h=sd(i,"fullDate");t=Qy(Yy(i,Ea.Full),[d,h]);break}return t&&(Xy[e][n]=t),t}function Qy(i,n){return n&&(i=i.replace(/\{([^}]+)}/g,function(e,t){return n!=null&&t in n?n[t]:e})),i}function Pl(i,n,e="-",t,r){let o="";(i<0||r&&i<=0)&&(r?i=-i+1:(i=-i,o=e));let s=String(i);for(;s.length<n;)s="0"+s;return t&&(s=s.slice(s.length-n)),o+s}function PZ(i,n){return Pl(i,3).substring(0,n)}function mo(i,n,e=0,t=!1,r=!1){return function(o,s){let a=DZ(i,o);if((e>0||a>-e)&&(a+=e),i===Nn.Hours)a===0&&e===-12&&(a=12);else if(i===Nn.FractionalSeconds)return PZ(a,n);let l=ld(s,Aa.MinusSign);return Pl(a,n,l,t,r)}}function DZ(i,n){switch(i){case Nn.FullYear:return n.getFullYear();case Nn.Month:return n.getMonth();case Nn.Date:return n.getDate();case Nn.Hours:return n.getHours();case Nn.Minutes:return n.getMinutes();case Nn.Seconds:return n.getSeconds();case Nn.FractionalSeconds:return n.getMilliseconds();case Nn.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}function hr(i,n,e=Vs.Format,t=!1){return function(r,o){return FZ(r,o,i,n,e,t)}}function FZ(i,n,e,t,r,o){switch(e){case kn.Months:return bZ(n,r,t)[i.getMonth()];case kn.Days:return vZ(n,r,t)[i.getDay()];case kn.DayPeriods:let s=i.getHours(),a=i.getMinutes();if(o){let c=AZ(n),d=xZ(n,r,t),h=c.findIndex(_=>{if(Array.isArray(_)){let[C,I]=_,b=s>=C.hours&&a>=C.minutes,E=s<I.hours||s===I.hours&&a<I.minutes;if(C.hours<I.hours){if(b&&E)return!0}else if(b||E)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return wZ(n,r,t)[s<12?0:1];case kn.Eras:return SZ(n,t)[i.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Zy(i){return function(n,e,t){let r=-1*t,o=ld(e,Aa.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case cd.Short:return(r>=0?"+":"")+Pl(s,2,o)+Pl(Math.abs(r%60),2,o);case cd.ShortGMT:return"GMT"+(r>=0?"+":"")+Pl(s,1,o);case cd.Long:return"GMT"+(r>=0?"+":"")+Pl(s,2,o)+":"+Pl(Math.abs(r%60),2,o);case cd.Extended:return t===0?"Z":(r>=0?"+":"")+Pl(s,2,o)+":"+Pl(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${i}"`)}}}var kZ=0,tw=4;function NZ(i){let n=nw(i,kZ,1).getDay();return nw(i,0,1+(n<=tw?tw:tw+7)-n)}function b4(i){let n=i.getDay(),e=n===0?-3:tw-n;return nw(i.getFullYear(),i.getMonth(),i.getDate()+e)}function iT(i,n=!1){return function(e,t){let r;if(n){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=b4(e),s=NZ(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Pl(r,i,ld(t,Aa.MinusSign))}}function ew(i,n=!1){return function(e,t){let o=b4(e).getFullYear();return Pl(o,i,ld(t,Aa.MinusSign),n)}}var nT={};function LZ(i){if(nT[i])return nT[i];let n;switch(i){case"G":case"GG":case"GGG":n=hr(kn.Eras,nr.Abbreviated);break;case"GGGG":n=hr(kn.Eras,nr.Wide);break;case"GGGGG":n=hr(kn.Eras,nr.Narrow);break;case"y":n=mo(Nn.FullYear,1,0,!1,!0);break;case"yy":n=mo(Nn.FullYear,2,0,!0,!0);break;case"yyy":n=mo(Nn.FullYear,3,0,!1,!0);break;case"yyyy":n=mo(Nn.FullYear,4,0,!1,!0);break;case"Y":n=ew(1);break;case"YY":n=ew(2,!0);break;case"YYY":n=ew(3);break;case"YYYY":n=ew(4);break;case"M":case"L":n=mo(Nn.Month,1,1);break;case"MM":case"LL":n=mo(Nn.Month,2,1);break;case"MMM":n=hr(kn.Months,nr.Abbreviated);break;case"MMMM":n=hr(kn.Months,nr.Wide);break;case"MMMMM":n=hr(kn.Months,nr.Narrow);break;case"LLL":n=hr(kn.Months,nr.Abbreviated,Vs.Standalone);break;case"LLLL":n=hr(kn.Months,nr.Wide,Vs.Standalone);break;case"LLLLL":n=hr(kn.Months,nr.Narrow,Vs.Standalone);break;case"w":n=iT(1);break;case"ww":n=iT(2);break;case"W":n=iT(1,!0);break;case"d":n=mo(Nn.Date,1);break;case"dd":n=mo(Nn.Date,2);break;case"c":case"cc":n=mo(Nn.Day,1);break;case"ccc":n=hr(kn.Days,nr.Abbreviated,Vs.Standalone);break;case"cccc":n=hr(kn.Days,nr.Wide,Vs.Standalone);break;case"ccccc":n=hr(kn.Days,nr.Narrow,Vs.Standalone);break;case"cccccc":n=hr(kn.Days,nr.Short,Vs.Standalone);break;case"E":case"EE":case"EEE":n=hr(kn.Days,nr.Abbreviated);break;case"EEEE":n=hr(kn.Days,nr.Wide);break;case"EEEEE":n=hr(kn.Days,nr.Narrow);break;case"EEEEEE":n=hr(kn.Days,nr.Short);break;case"a":case"aa":case"aaa":n=hr(kn.DayPeriods,nr.Abbreviated);break;case"aaaa":n=hr(kn.DayPeriods,nr.Wide);break;case"aaaaa":n=hr(kn.DayPeriods,nr.Narrow);break;case"b":case"bb":case"bbb":n=hr(kn.DayPeriods,nr.Abbreviated,Vs.Standalone,!0);break;case"bbbb":n=hr(kn.DayPeriods,nr.Wide,Vs.Standalone,!0);break;case"bbbbb":n=hr(kn.DayPeriods,nr.Narrow,Vs.Standalone,!0);break;case"B":case"BB":case"BBB":n=hr(kn.DayPeriods,nr.Abbreviated,Vs.Format,!0);break;case"BBBB":n=hr(kn.DayPeriods,nr.Wide,Vs.Format,!0);break;case"BBBBB":n=hr(kn.DayPeriods,nr.Narrow,Vs.Format,!0);break;case"h":n=mo(Nn.Hours,1,-12);break;case"hh":n=mo(Nn.Hours,2,-12);break;case"H":n=mo(Nn.Hours,1);break;case"HH":n=mo(Nn.Hours,2);break;case"m":n=mo(Nn.Minutes,1);break;case"mm":n=mo(Nn.Minutes,2);break;case"s":n=mo(Nn.Seconds,1);break;case"ss":n=mo(Nn.Seconds,2);break;case"S":n=mo(Nn.FractionalSeconds,1);break;case"SS":n=mo(Nn.FractionalSeconds,2);break;case"SSS":n=mo(Nn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=Zy(cd.Short);break;case"ZZZZZ":n=Zy(cd.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=Zy(cd.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=Zy(cd.Long);break;default:return null}return nT[i]=n,n}function S4(i,n){i=i.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?n:e}function MZ(i,n){return i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+n),i}function VZ(i,n,e){let t=e?-1:1,r=i.getTimezoneOffset(),o=S4(n,r);return MZ(i,t*(o-r))}function BZ(i){if(d4(i))return i;if(typeof i=="number"&&!isNaN(i))return new Date(i);if(typeof i=="string"){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){let[r,o=1,s=1]=i.split("-").map(a=>+a);return nw(r,o-1,s)}let e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let t;if(t=i.match(TZ))return UZ(t)}let n=new Date(i);if(!d4(n))throw new Error(`Unable to convert "${i}" into a date`);return n}function UZ(i){let n=new Date(0),e=0,t=0,r=i[8]?n.setUTCFullYear:n.setFullYear,o=i[8]?n.setUTCHours:n.setHours;i[9]&&(e=Number(i[9]+i[10]),t=Number(i[9]+i[11])),r.call(n,Number(i[1]),Number(i[2])-1,Number(i[3]));let s=Number(i[4]||0)-e,a=Number(i[5]||0)-t,l=Number(i[6]||0),c=Math.floor(parseFloat("0."+(i[7]||0))*1e3);return o.call(n,s,a,l,c),n}function d4(i){return i instanceof Date&&!isNaN(i.valueOf())}var jZ=/^(\d+)?\.((\d+)(-(\d+))?)?$/,p4=22,rw=".",l_="0",GZ=";",HZ=",",rT="#";function WZ(i,n,e,t,r,o,s=!1){let a="",l=!1;if(!isFinite(i))a=ld(e,Aa.Infinity);else{let c=JZ(i);s&&(c=$Z(c));let d=n.minInt,h=n.minFrac,_=n.maxFrac;if(o){let T=o.match(jZ);if(T===null)throw new Error(`${o} is not a valid digit info`);let A=T[1],U=T[3],z=T[5];A!=null&&(d=oT(A)),U!=null&&(h=oT(U)),z!=null?_=oT(z):U!=null&&h>_&&(_=h)}qZ(c,h,_);let C=c.digits,I=c.integerLen,b=c.exponent,E=[];for(l=C.every(T=>!T);I<d;I++)C.unshift(0);for(;I<0;I++)C.unshift(0);I>0?E=C.splice(I,C.length):(E=C,C=[0]);let R=[];for(C.length>=n.lgSize&&R.unshift(C.splice(-n.lgSize,C.length).join(""));C.length>n.gSize;)R.unshift(C.splice(-n.gSize,C.length).join(""));C.length&&R.unshift(C.join("")),a=R.join(ld(e,t)),E.length&&(a+=ld(e,r)+E.join("")),b&&(a+=ld(e,Aa.Exponential)+"+"+b)}return i<0&&!l?a=n.negPre+a+n.negSuf:a=n.posPre+a+n.posSuf,a}function zZ(i,n,e){let t=EZ(n,w4.Decimal),r=KZ(t,ld(n,Aa.MinusSign));return WZ(i,r,n,Aa.Group,Aa.Decimal,e)}function KZ(i,n="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},t=i.split(GZ),r=t[0],o=t[1],s=r.indexOf(rw)!==-1?r.split(rw):[r.substring(0,r.lastIndexOf(l_)+1),r.substring(r.lastIndexOf(l_)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(rT));for(let d=0;d<l.length;d++){let h=l.charAt(d);h===l_?e.minFrac=e.maxFrac=d+1:h===rT?e.maxFrac=d+1:e.posSuf+=h}let c=a.split(HZ);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let d=r.length-e.posPre.length-e.posSuf.length,h=o.indexOf(rT);e.negPre=o.substring(0,h).replace(/'/g,""),e.negSuf=o.slice(h+d).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}function $Z(i){if(i.digits[0]===0)return i;let n=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(n===0?i.digits.push(0,0):n===1&&i.digits.push(0),i.integerLen+=2),i}function JZ(i){let n=Math.abs(i)+"",e=0,t,r,o,s,a;for((r=n.indexOf(rw))>-1&&(n=n.replace(rw,"")),(o=n.search(/e/i))>0?(r<0&&(r=o),r+=+n.slice(o+1),n=n.substring(0,o)):r<0&&(r=n.length),o=0;n.charAt(o)===l_;o++);if(o===(a=n.length))t=[0],r=1;else{for(a--;n.charAt(a)===l_;)a--;for(r-=o,t=[],s=0;o<=a;o++,s++)t[s]=Number(n.charAt(o))}return r>p4&&(t=t.splice(0,p4-1),e=r-1,r=1),{digits:t,exponent:e,integerLen:r}}function qZ(i,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let t=i.digits,r=t.length-i.integerLen,o=Math.min(Math.max(n,r),e),s=o+i.integerLen,a=t[s];if(s>0){t.splice(Math.max(i.integerLen,s));for(let h=s;h<t.length;h++)t[h]=0}else{r=Math.max(0,r),i.integerLen=1,t.length=Math.max(1,s=o+1),t[0]=0;for(let h=1;h<s;h++)t[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)t.unshift(0),i.integerLen++;t.unshift(1),i.integerLen++}else t[s-1]++;for(;r<Math.max(0,o);r++)t.push(0);let l=o!==0,c=n+i.integerLen,d=t.reduceRight(function(h,_,C,I){return _=_+h,I[C]=_<10?_:_-10,l&&(I[C]===0&&C>=c?I.pop():l=!1),_>=10?1:0},0);d&&(t.unshift(d),i.integerLen++)}function oT(i){let n=parseInt(i);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+i);return n}function ow(i,n){n=encodeURIComponent(n);for(let e of i.split(";")){let t=e.indexOf("="),[r,o]=t==-1?[e,""]:[e.slice(0,t),e.slice(t+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}var sT=/\s+/,u4=[],je=(()=>{class i{constructor(e,t){this._ngEl=e,this._renderer=t,this.initialClasses=u4,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(sT):u4}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(sT):e}ngDoCheck(){for(let t of this.initialClasses)this._updateState(t,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let t of e)this._updateState(t,!0);else if(e!=null)for(let t of Object.keys(e))this._updateState(t,!!e[t]);this._applyStateDiff()}_updateState(e,t){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==t&&(r.changed=!0,r.enabled=t),r.touched=!0):this.stateMap.set(e,{enabled:t,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let t=e[0],r=e[1];r.changed?(this._toggleClass(t,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(t,!1),this.stateMap.delete(t)),r.touched=!1}}_toggleClass(e,t){e=e.trim(),e.length>0&&e.split(sT).forEach(r=>{t?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(jt))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return i})(),E4=(()=>{class i{constructor(e){this._viewContainerRef=e,this.ngComponentOutlet=null,this._inputsUsed=new Map}_needToReCreateNgModuleInstance(e){return e.ngComponentOutletNgModule!==void 0||e.ngComponentOutletNgModuleFactory!==void 0}_needToReCreateComponentInstance(e){return e.ngComponentOutlet!==void 0||e.ngComponentOutletContent!==void 0||e.ngComponentOutletInjector!==void 0||this._needToReCreateNgModuleInstance(e)}ngOnChanges(e){if(this._needToReCreateComponentInstance(e)&&(this._viewContainerRef.clear(),this._inputsUsed.clear(),this._componentRef=void 0,this.ngComponentOutlet)){let t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;this._needToReCreateNgModuleInstance(e)&&(this._moduleRef?.destroy(),this.ngComponentOutletNgModule?this._moduleRef=P3(this.ngComponentOutletNgModule,h4(t)):this.ngComponentOutletNgModuleFactory?this._moduleRef=this.ngComponentOutletNgModuleFactory.create(h4(t)):this._moduleRef=void 0),this._componentRef=this._viewContainerRef.createComponent(this.ngComponentOutlet,{injector:t,ngModuleRef:this._moduleRef,projectableNodes:this.ngComponentOutletContent})}}ngDoCheck(){if(this._componentRef){if(this.ngComponentOutletInputs)for(let e of Object.keys(this.ngComponentOutletInputs))this._inputsUsed.set(e,!0);this._applyInputStateDiff(this._componentRef)}}ngOnDestroy(){this._moduleRef?.destroy()}_applyInputStateDiff(e){for(let[t,r]of this._inputsUsed)r?(e.setInput(t,this.ngComponentOutletInputs[t]),this._inputsUsed.set(t,!1)):(e.setInput(t,void 0),this._inputsUsed.delete(t))}static{this.\u0275fac=function(t){return new(t||i)(S(Ro))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInputs:"ngComponentOutletInputs",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModule:"ngComponentOutletNgModule",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},standalone:!0,features:[Yi]})}}return i})();function h4(i){return i.get(Zc).injector}var aT=class{constructor(n,e,t,r){this.$implicit=n,this.ngForOf=e,this.index=t,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},hn=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,t,r){this._viewContainer=e,this._template=t,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let t=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)t.createEmbeddedView(this._template,new aT(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)t.remove(o===null?void 0:o);else if(o!==null){let a=t.get(o);t.move(a,s),f4(a,r)}});for(let r=0,o=t.length;r<o;r++){let a=t.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=t.get(r.currentIndex);f4(o,r)})}static ngTemplateContextGuard(e,t){return!0}static{this.\u0275fac=function(t){return new(t||i)(S(Ro),S(Ca),S(Zx))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return i})();function f4(i,n){i.context.$implicit=n.item}var rt=(()=>{class i{constructor(e,t){this._viewContainer=e,this._context=new lT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){m4("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){m4("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}static{this.\u0275fac=function(t){return new(t||i)(S(Ro),S(Ca))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return i})(),lT=class{constructor(){this.$implicit=null,this.ngIf=null}};function m4(i,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${i} must be a TemplateRef, but received '${Ns(n)}'.`)}var De=(()=>{class i{constructor(e,t,r){this._ngEl=e,this._differs=t,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:nc.DashCase;t!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${t}${o}`:t,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(t=>this._setStyle(t.key,null)),e.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),e.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(eT),S(jt))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return i})(),mt=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let t=this._viewContainerRef;if(this._viewRef&&t.remove(t.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=t.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,t,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,t,r):!1,get:(e,t,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,t,r)}})}static{this.\u0275fac=function(t){return new(t||i)(S(Ro))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Yi]})}}return i})();function c_(i,n){return new xt(2100,!1)}var cT=class{createSubscription(n,e){return Sa(()=>n.subscribe({next:e,error:t=>{throw t}}))}dispose(n){Sa(()=>n.unsubscribe())}},dT=class{createSubscription(n,e){return n.then(e,t=>{throw t})}dispose(n){}},YZ=new dT,XZ=new cT,A4=(()=>{class i{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(e){if(mp(e))return YZ;if(Xx(e))return XZ;throw c_(i,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(t){return new(t||i)(S(we,16))}}static{this.\u0275pipe=ur({name:"async",type:i,pure:!1,standalone:!0})}}return i})(),Kst=(()=>{class i{transform(e){if(e==null)return null;if(typeof e!="string")throw c_(i,e);return e.toLowerCase()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"lowercase",type:i,pure:!0,standalone:!0})}}return i})();var QZ="mediumDate",ZZ=new Xe(""),eee=new Xe(""),cc=(()=>{class i{constructor(e,t,r){this.locale=e,this.defaultTimezone=t,this.defaultOptions=r}transform(e,t,r,o){if(e==null||e===""||e!==e)return null;try{let s=t??this.defaultOptions?.dateFormat??QZ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return RZ(e,s,o||this.locale,a)}catch(s){throw c_(i,s.message)}}static{this.\u0275fac=function(t){return new(t||i)(S(th,16),S(ZZ,24),S(eee,24))}}static{this.\u0275pipe=ur({name:"date",type:i,pure:!0,standalone:!0})}}return i})();var sw=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"json",type:i,pure:!1,standalone:!0})}}return i})();var Rf=(()=>{class i{constructor(e){this._locale=e}transform(e,t,r){if(!tee(e))return null;r||=this._locale;try{let o=iee(e);return zZ(o,r,t)}catch(o){throw c_(i,o.message)}}static{this.\u0275fac=function(t){return new(t||i)(S(th,16))}}static{this.\u0275pipe=ur({name:"number",type:i,pure:!0,standalone:!0})}}return i})();function tee(i){return!(i==null||i===""||i!==i)}function iee(i){if(typeof i=="string"&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if(typeof i!="number")throw new Error(`${i} is not a number`);return i}var aw=(()=>{class i{transform(e,t,r){if(e==null)return null;if(!this.supports(e))throw c_(i,e);return e.slice(t,r)}supports(e){return typeof e=="string"||Array.isArray(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"slice",type:i,pure:!1,standalone:!0})}}return i})();var it=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})(),_T="browser",nee="server";function bt(i){return i===_T}function lw(i){return i===nee}var x4=(()=>{class i{static{this.\u0275prov=Ce({token:i,providedIn:"root",factory:()=>bt(Je(ai))?new pT(Je(At),window):new uT})}}return i})(),pT=class{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let e=ree(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let e=n.getBoundingClientRect(),t=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(t-o[0],r-o[1])}};function ree(i,n){let e=i.getElementById(n)||i.getElementsByName(n)[0];if(e)return e;if(typeof i.createTreeWalker=="function"&&i.body&&typeof i.body.attachShadow=="function"){let t=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT),r=t.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(s)return s}r=t.nextNode()}}return null}var uT=class{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}},Of=class{};var p_=class{},dw=class{},Mo=class i{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let t=e.indexOf(":");if(t>0){let r=e.slice(0,t),o=r.toLowerCase(),s=e.slice(t+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,t)=>{this.setHeaderEntries(t,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,t])=>{this.setHeaderEntries(e,t)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let t=n.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(n.name,e);let r=(n.op==="a"?this.headers.get(e):void 0)||[];r.push(...t),this.headers.set(e,r);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(n,e){let t=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var IT=class{encodeKey(n){return T4(n)}encodeValue(n){return T4(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function oee(i,n){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var see=/%(\d[a-f0-9])/gi,aee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function T4(i){return encodeURIComponent(i).replace(see,(n,e)=>aee[e]??n)}function cw(i){return`${i}`}var dc=class i{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new IT,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=oee(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let t=n.fromObject[e],r=Array.isArray(t)?t.map(cw):[cw(t)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(t=>{let r=n[t];Array.isArray(r)?r.forEach(o=>{e.push({param:t,value:o,op:"a"})}):e.push({param:t,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(cw(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let t=this.map.get(n.param)||[],r=t.indexOf(cw(n.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(n.param,t):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var yT=class{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function lee(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function O4(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function R4(i){return typeof Blob<"u"&&i instanceof Blob}function P4(i){return typeof FormData<"u"&&i instanceof FormData}function cee(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var d_=class i{constructor(n,e,t,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let o;if(lee(this.method)||r?(this.body=t!==void 0?t:null,o=r):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Mo,this.context??=new yT,!this.params)this.params=new dc,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||O4(this.body)||R4(this.body)||P4(this.body)||cee(this.body)?this.body:this.body instanceof dc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||P4(this.body)?null:R4(this.body)?this.body.type||null:O4(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof dc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let e=n.method||this.method,t=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,d=n.params||this.params,h=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((_,C)=>_.set(C,n.setHeaders[C]),c)),n.setParams&&(d=Object.keys(n.setParams).reduce((_,C)=>_.set(C,n.setParams[C]),d)),new i(e,t,s,{params:d,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Xa=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Xa||{}),u_=class{constructor(n,e=200,t="OK"){this.headers=n.headers||new Mo,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||t,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},pw=class i extends u_{constructor(n={}){super(n),this.type=Xa.ResponseHeader}clone(n={}){return new i({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},pd=class i extends u_{constructor(n={}){super(n),this.type=Xa.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new i({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},_p=class extends u_{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},L4=200,dee=204;function CT(i,n){return{body:n,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var ti=(()=>{class i{constructor(e){this.handler=e}request(e,t,r={}){let o;if(e instanceof d_)o=e;else{let l;r.headers instanceof Mo?l=r.headers:l=new Mo(r.headers);let c;r.params&&(r.params instanceof dc?c=r.params:c=new dc({fromObject:r.params})),o=new d_(e,t,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=vt(o).pipe(Al(l=>this.handler.handle(l)));if(e instanceof d_||r.observe==="events")return s;let a=s.pipe(Ao(l=>l instanceof pd));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(K(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(K(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(K(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(K(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,t={}){return this.request("DELETE",e,t)}get(e,t={}){return this.request("GET",e,t)}head(e,t={}){return this.request("HEAD",e,t)}jsonp(e,t){return this.request("JSONP",e,{params:new dc().append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,t={}){return this.request("OPTIONS",e,t)}patch(e,t,r={}){return this.request("PATCH",e,CT(r,t))}post(e,t,r={}){return this.request("POST",e,CT(r,t))}put(e,t,r={}){return this.request("PUT",e,CT(r,t))}static{this.\u0275fac=function(t){return new(t||i)(de(p_))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),pee=/^\)\]\}',?\n/,uee="X-Request-URL";function D4(i){if(i.url)return i.url;let n=uee.toLocaleLowerCase();return i.headers.get(n)}var hee=(()=>{class i{constructor(){this.fetchImpl=Je(wT,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=Je(Lt)}handle(e){return new Ai(t=>{let r=new AbortController;return this.doRequest(e,r.signal,t).then(vT,o=>t.error(new _p({error:o}))),()=>r.abort()})}doRequest(e,t,r){return B(this,null,function*(){let o=this.createRequestInit(e),s;try{let C=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,oe({signal:t},o)));fee(C),r.next({type:Xa.Sent}),s=yield C}catch(C){r.error(new _p({error:C,status:C.status??0,statusText:C.statusText,url:e.urlWithParams,headers:C.headers}));return}let a=new Mo(s.headers),l=s.statusText,c=D4(s)??e.urlWithParams,d=s.status,h=null;if(e.reportProgress&&r.next(new pw({headers:a,status:d,statusText:l,url:c})),s.body){let C=s.headers.get("content-length"),I=[],b=s.body.getReader(),E=0,R,T,A=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>B(this,null,function*(){for(;;){let{done:z,value:ee}=yield b.read();if(z)break;if(I.push(ee),E+=ee.length,e.reportProgress){T=e.responseType==="text"?(T??"")+(R??=new TextDecoder).decode(ee,{stream:!0}):void 0;let re=()=>r.next({type:Xa.DownloadProgress,total:C?+C:void 0,loaded:E,partialText:T});A?A.run(re):re()}}}));let U=this.concatChunks(I,E);try{let z=s.headers.get("Content-Type")??"";h=this.parseBody(e,U,z)}catch(z){r.error(new _p({error:z,headers:new Mo(s.headers),status:s.status,statusText:s.statusText,url:D4(s)??e.urlWithParams}));return}}d===0&&(d=h?L4:0),d>=200&&d<300?(r.next(new pd({body:h,headers:a,status:d,statusText:l,url:c})),r.complete()):r.error(new _p({error:h,headers:a,status:d,statusText:l,url:c}))})}parseBody(e,t,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(t).replace(pee,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(t);case"blob":return new Blob([t],{type:r});case"arraybuffer":return t.buffer}}createRequestInit(e){let t={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>t[o]=s.join(",")),e.headers.has("Accept")||(t.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(t["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:t,credentials:r}}concatChunks(e,t){let r=new Uint8Array(t),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),wT=class{};function vT(){}function fee(i){i.then(vT,vT)}function M4(i,n){return n(i)}function mee(i,n){return(e,t)=>n.intercept(e,{handle:r=>i(r,t)})}function gee(i,n,e){return(t,r)=>Ja(e,()=>n(t,o=>i(o,r)))}var _ee=new Xe(""),bT=new Xe(""),Cee=new Xe(""),V4=new Xe("",{providedIn:"root",factory:()=>!0});function Iee(){let i=null;return(n,e)=>{i===null&&(i=(Je(_ee,{optional:!0})??[]).reduceRight(mee,M4));let t=Je(oc);if(Je(V4)){let o=t.add();return i(n,e).pipe(op(()=>t.remove(o)))}else return i(n,e)}}var F4=(()=>{class i extends p_{constructor(e,t){super(),this.backend=e,this.injector=t,this.chain=null,this.pendingTasks=Je(oc),this.contributeToStability=Je(V4)}handle(e){if(this.chain===null){let t=Array.from(new Set([...this.injector.get(bT),...this.injector.get(Cee,[])]));this.chain=t.reduceRight((r,o)=>gee(r,o,this.injector),M4)}if(this.contributeToStability){let t=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(op(()=>this.pendingTasks.remove(t)))}else return this.chain(e,t=>this.backend.handle(t))}static{this.\u0275fac=function(t){return new(t||i)(de(dw),de(Ls))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var yee=/^\)\]\}',?\n/;function wee(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var k4=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new xt(-2800,!1);let t=this.xhrFactory;return(t.\u0275loadImpl?bn(t.\u0275loadImpl()):vt(null)).pipe(xo(()=>new Ai(o=>{let s=t.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((b,E)=>s.setRequestHeader(b,E.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let b=e.detectContentTypeHeader();b!==null&&s.setRequestHeader("Content-Type",b)}if(e.responseType){let b=e.responseType.toLowerCase();s.responseType=b!=="json"?b:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let b=s.statusText||"OK",E=new Mo(s.getAllResponseHeaders()),R=wee(s)||e.url;return l=new pw({headers:E,status:s.status,statusText:b,url:R}),l},d=()=>{let{headers:b,status:E,statusText:R,url:T}=c(),A=null;E!==dee&&(A=typeof s.response>"u"?s.responseText:s.response),E===0&&(E=A?L4:0);let U=E>=200&&E<300;if(e.responseType==="json"&&typeof A=="string"){let z=A;A=A.replace(yee,"");try{A=A!==""?JSON.parse(A):null}catch(ee){A=z,U&&(U=!1,A={error:ee,text:A})}}U?(o.next(new pd({body:A,headers:b,status:E,statusText:R,url:T||void 0})),o.complete()):o.error(new _p({error:A,headers:b,status:E,statusText:R,url:T||void 0}))},h=b=>{let{url:E}=c(),R=new _p({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});o.error(R)},_=!1,C=b=>{_||(o.next(c()),_=!0);let E={type:Xa.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(E.total=b.total),e.responseType==="text"&&s.responseText&&(E.partialText=s.responseText),o.next(E)},I=b=>{let E={type:Xa.UploadProgress,loaded:b.loaded};b.lengthComputable&&(E.total=b.total),o.next(E)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",C),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:Xa.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",C),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(t){return new(t||i)(de(Of))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),B4=new Xe(""),vee="XSRF-TOKEN",bee=new Xe("",{providedIn:"root",factory:()=>vee}),See="X-XSRF-TOKEN",Eee=new Xe("",{providedIn:"root",factory:()=>See}),uw=class{},Aee=(()=>{class i{constructor(e,t,r){this.doc=e,this.platform=t,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ow(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(t){return new(t||i)(de(At),de(ai),de(bee))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function xee(i,n){let e=i.url.toLowerCase();if(!Je(B4)||i.method==="GET"||i.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(i);let t=Je(uw).getToken(),r=Je(Eee);return t!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,t)})),n(i)}var U4=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(U4||{});function Tee(i,n){return{\u0275kind:i,\u0275providers:n}}function oat(...i){let n=[ti,k4,F4,{provide:p_,useExisting:F4},{provide:dw,useFactory:()=>Je(hee,{optional:!0})??Je(k4)},{provide:bT,useValue:xee,multi:!0},{provide:B4,useValue:!0},{provide:uw,useClass:Aee}];for(let e of i)n.push(...e.\u0275providers);return bf(n)}var N4=new Xe("");function sat(){return Tee(U4.LegacyInterceptors,[{provide:N4,useFactory:Iee},{provide:bT,useExisting:N4,multi:!0}])}var AT=class extends iw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xT=class i extends AT{static makeCurrent(){_4(new i)}onAndCancel(n,e,t){return n.addEventListener(e,t),()=>{n.removeEventListener(e,t)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=Oee();return e==null?null:Ree(e)}resetBaseElement(){h_=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ow(document.cookie,n)}},h_=null;function Oee(){return h_=h_||document.querySelector("base"),h_?h_.getAttribute("href"):null}function Ree(i){return new URL(i,document.baseURI).pathname}var TT=class{addToWindow(n){is.getAngularTestability=(t,r=!0)=>{let o=n.findTestabilityInTree(t,r);if(o==null)throw new xt(5103,!1);return o},is.getAllAngularTestabilities=()=>n.getAllTestabilities(),is.getAllAngularRootElements=()=>n.getAllRootElements();let e=t=>{let r=is.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&t()};r.forEach(a=>{a.whenStable(s)})};is.frameworkStabilizers||(is.frameworkStabilizers=[]),is.frameworkStabilizers.push(e)}findTestabilityInTree(n,e,t){if(e==null)return null;let r=n.getTestability(e);return r??(t?lc().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},Pee=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),OT=new Xe(""),W4=(()=>{class i{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,t,r){return this._findPluginFor(t).addEventListener(e,t,r)}getZone(){return this._zone}_findPluginFor(e){let t=this._eventNameToPlugin.get(e);if(t)return t;if(t=this._plugins.find(o=>o.supports(e)),!t)throw new xt(5101,!1);return this._eventNameToPlugin.set(e,t),t}static{this.\u0275fac=function(t){return new(t||i)(de(OT),de(Lt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),hw=class{constructor(n){this._doc=n}},ST="ng-app-id",z4=(()=>{class i{constructor(e,t,r,o={}){this.doc=e,this.appId=t,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lw(o),this.resetHostNodes()}addStyles(e){for(let t of e)this.changeUsageCount(t,1)===1&&this.onStyleAdded(t)}removeStyles(e){for(let t of e)this.changeUsageCount(t,-1)<=0&&this.onStyleRemoved(t)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(t=>t.remove()),e.clear());for(let t of this.getAllStyles())this.onStyleRemoved(t);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let t of this.getAllStyles())this.addStyleToHost(e,t)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let t of this.hostNodes)this.addStyleToHost(t,e)}onStyleRemoved(e){let t=this.styleRef;t.get(e)?.elements?.forEach(r=>r.remove()),t.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${ST}="${this.appId}"]`);if(e?.length){let t=new Map;return e.forEach(r=>{r.textContent!=null&&t.set(r.textContent,r)}),t}return null}changeUsageCount(e,t){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=t,o.usage}return r.set(e,{usage:t,elements:[]}),t}getStyleElement(e,t){let r=this.styleNodesInDOM,o=r?.get(t);if(o?.parentNode===e)return r.delete(t),o.removeAttribute(ST),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=t,this.platformIsServer&&s.setAttribute(ST,this.appId),e.appendChild(s),s}}addStyleToHost(e,t){let r=this.getStyleElement(e,t),o=this.styleRef,s=o.get(t)?.elements;s?s.push(r):o.set(t,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(t){return new(t||i)(de(At),de(Py),de(bx,8),de(ai))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),ET={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},PT=/%COMP%/g,K4="%COMP%",Dee=`_nghost-${K4}`,Fee=`_ngcontent-${K4}`,kee=!0,Nee=new Xe("",{providedIn:"root",factory:()=>kee});function Lee(i){return Fee.replace(PT,i)}function Mee(i){return Dee.replace(PT,i)}function $4(i,n){return n.map(e=>e.replace(PT,i))}var j4=(()=>{class i{constructor(e,t,r,o,s,a,l,c=null){this.eventManager=e,this.sharedStylesHost=t,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=lw(a),this.defaultRenderer=new f_(e,s,l,this.platformIsServer)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;this.platformIsServer&&t.encapsulation===Zl.ShadowDom&&(t=ke(oe({},t),{encapsulation:Zl.Emulated}));let r=this.getOrCreateRenderer(e,t);return r instanceof fw?r.applyToHost(e):r instanceof m_&&r.applyStyles(),r}getOrCreateRenderer(e,t){let r=this.rendererByCompId,o=r.get(t.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(t.encapsulation){case Zl.Emulated:o=new fw(l,c,t,this.appId,d,s,a,h);break;case Zl.ShadowDom:return new RT(l,c,e,t,s,a,this.nonce,h);default:o=new m_(l,c,t,d,s,a,h);break}r.set(t.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(t){return new(t||i)(de(W4),de(z4),de(Py),de(Nee),de(At),de(ai),de(Lt),de(bx))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),f_=class{constructor(n,e,t,r){this.eventManager=n,this.doc=e,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(ET[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(G4(n)?n.content:n).appendChild(e)}insertBefore(n,e,t){n&&(G4(n)?n.content:n).insertBefore(e,t)}removeChild(n,e){e.remove()}selectRootElement(n,e){let t=typeof n=="string"?this.doc.querySelector(n):n;if(!t)throw new xt(-5104,!1);return e||(t.textContent=""),t}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,t,r){if(r){e=r+":"+e;let o=ET[r];o?n.setAttributeNS(o,e,t):n.setAttribute(e,t)}else n.setAttribute(e,t)}removeAttribute(n,e,t){if(t){let r=ET[t];r?n.removeAttributeNS(r,e):n.removeAttribute(`${t}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,t,r){r&(nc.DashCase|nc.Important)?n.style.setProperty(e,t,r&nc.Important?"important":""):n.style[e]=t}removeStyle(n,e,t){t&nc.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,t){n!=null&&(n[e]=t)}setValue(n,e){n.nodeValue=e}listen(n,e,t){if(typeof n=="string"&&(n=lc().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(t))}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function G4(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var RT=class extends f_{constructor(n,e,t,r,o,s,a,l){super(n,o,s,l),this.sharedStylesHost=e,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=$4(r.id,r.styles);for(let d of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,t){return super.insertBefore(this.nodeOrShadowRoot(n),e,t)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},m_=class extends f_{constructor(n,e,t,r,o,s,a,l){super(n,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?$4(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fw=class extends m_{constructor(n,e,t,r,o,s,a,l){let c=r+"-"+t.id;super(n,e,t,o,s,a,l,c),this.contentAttr=Lee(c),this.hostAttr=Mee(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let t=super.createElement(n,e);return super.setAttribute(t,this.contentAttr,""),t}},Vee=(()=>{class i extends hw{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,r){return e.addEventListener(t,r,!1),()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,r){return e.removeEventListener(t,r)}static{this.\u0275fac=function(t){return new(t||i)(de(At))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),H4=["alt","control","meta","shift"],Bee={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Uee={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},jee=(()=>{class i extends hw{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,t,r){let o=i.parseEventName(t),s=i.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lc().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let t=e.toLowerCase().split("."),r=t.shift();if(t.length===0||!(r==="keydown"||r==="keyup"))return null;let o=i._normalizeKey(t.pop()),s="",a=t.indexOf("code");if(a>-1&&(t.splice(a,1),s="code."),H4.forEach(c=>{let d=t.indexOf(c);d>-1&&(t.splice(d,1),s+=c+".")}),s+=o,t.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,t){let r=Bee[e.key]||e.key,o="";return t.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),H4.forEach(s=>{if(s!==r){let a=Uee[s];a(e)&&(o+=s+".")}}),o+=r,o===t)}static eventCallback(e,t,r){return o=>{i.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>t(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(t){return new(t||i)(de(At))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function Gee(){xT.makeCurrent()}function Hee(){return new ic}function Wee(){return TM(document),document}var zee=[{provide:ai,useValue:_T},{provide:vx,useValue:Gee,multi:!0},{provide:At,useFactory:Wee,deps:[]}],yat=Qx(r4,"browser",zee),Kee=new Xe(""),$ee=[{provide:s_,useClass:TT,deps:[]},{provide:qx,useClass:Hy,deps:[Lt,Wy,s_]},{provide:Hy,useClass:Hy,deps:[Lt,Wy,s_]}],Jee=[{provide:_y,useValue:"root"},{provide:ic,useFactory:Hee,deps:[]},{provide:OT,useClass:Vee,multi:!0,deps:[At,Lt,ai]},{provide:OT,useClass:jee,multi:!0,deps:[At]},j4,z4,W4,{provide:Cf,useExisting:j4},{provide:Of,useClass:Pee,deps:[]},[]],wat=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Py,useValue:e.appId}]}}static{this.\u0275fac=function(t){return new(t||i)(de(Kee,12))}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({providers:[...Jee,...$ee],imports:[it,o4]})}}return i})();var J4=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(t){return new(t||i)(de(At))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Dl=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:function(t){let r=null;return t?r=new(t||i):r=de(qee),r},providedIn:"root"})}}return i})(),qee=(()=>{class i extends Dl{constructor(e){super(),this._doc=e}sanitize(e,t){if(t==null)return null;switch(e){case wa.NONE:return t;case wa.HTML:return id(t,"HTML")?ya(t):Ex(this._doc,String(t)).toString();case wa.STYLE:return id(t,"Style")?ya(t):t;case wa.SCRIPT:if(id(t,"Script"))return ya(t);throw new xt(5200,!1);case wa.URL:return id(t,"URL")?ya(t):Fy(String(t));case wa.RESOURCE_URL:if(id(t,"ResourceURL"))return ya(t);throw new xt(5201,!1);default:throw new xt(5202,!1)}}bypassSecurityTrustHtml(e){return DM(e)}bypassSecurityTrustStyle(e){return FM(e)}bypassSecurityTrustScript(e){return kM(e)}bypassSecurityTrustUrl(e){return NM(e)}bypassSecurityTrustResourceUrl(e){return LM(e)}static{this.\u0275fac=function(t){return new(t||i)(de(At))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var pc=function(i){return i.script="script",i.docker="docker",i.pkg="pkg",i}(pc||{});var Df={fwcAppURL:new URL(window.location.href).origin+"/api",fwcAppDocsURL:new URL(window.location.href).origin+"/manual",fwcConsoleLogs:!1,checkUpdates:!0,installMethod:void 0},_e=(()=>{class i{constructor(e){this.httpClient=e}static loadConfig(){let e="assets/config/config.json";return new Promise((t,r)=>{let o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=()=>{if(o.readyState===4){if(i.settings=Object.assign({},Df),o.status===200){try{i.settings=JSON.parse(o.responseText)}catch{}i.settings.fwcAppURL||(i.settings.fwcAppURL=Df.fwcAppURL),i.settings.fwcConsoleLogs||(i.settings.fwcConsoleLogs=Df.fwcConsoleLogs),i.settings.checkUpdates===void 0&&(i.settings.checkUpdates=Df.checkUpdates),i.settings.fwcAppDocsURL===void 0&&(i.settings.fwcAppDocsURL=Df.fwcAppDocsURL),i.settings.installMethod!=null&&!(i.settings.installMethod in pc)&&(i.settings.installMethod=Df.installMethod),t()}if(i.settings.fwcAppURL=i.settings.fwcAppURL.trim(),/^\/\w+$/.exec(i.settings.fwcAppURL)){let s=new URL(window.location.href);i.settings.fwcAppURL=s.origin+i.settings.fwcAppURL}try{new URL(i.settings.fwcAppURL)}catch{return r("Invalid backend URL in configuration file "+e)}i.log("API URL: ",i.settings.fwcAppURL),t()}},o.send(null)})}static log(...e){e.unshift("[ FWCLOUD LOG "+new Date().toLocaleString()+"]"),this.settings&&this.settings.fwcConsoleLogs&&console.log.apply(this,e)}static error(...e){e.unshift("[ FWCLOUD ERROR "+new Date().toLocaleString()+"]"),this.settings&&this.settings.fwcConsoleLogs&&console.error.apply(this,e)}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var nV=(()=>{class i{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(t){return new(t||i)(S(jt),S(Ze))}}static{this.\u0275dir=Et({type:i})}}return i})(),Sw=(()=>{class i extends nV{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,features:[Se]})}}return i})(),fn=new Xe("");var Yee={provide:fn,useExisting:Zt(()=>Li),multi:!0};function Xee(){let i=lc()?lc().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Qee=new Xe(""),Li=(()=>{class i extends nV{constructor(e,t,r){super(e,t),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Xee())}writeValue(e){let t=e??"";this.setProperty("value",t)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(t){return new(t||i)(S(jt),S(Ze),S(Qee,8))}}static{this.\u0275dir=Et({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){t&1&&k("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[et([Yee]),Se]})}}return i})();function Cp(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function rV(i){return i!=null&&typeof i.length=="number"}var Qa=new Xe(""),ih=new Xe(""),Zee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Pe=class{static min(n){return oV(n)}static max(n){return sV(n)}static required(n){return aV(n)}static requiredTrue(n){return ete(n)}static email(n){return tte(n)}static minLength(n){return ite(n)}static maxLength(n){return lV(n)}static pattern(n){return cV(n)}static nullValidator(n){return gw(n)}static compose(n){return mV(n)}static composeAsync(n){return gV(n)}};function oV(i){return n=>{if(Cp(n.value)||Cp(i))return null;let e=parseFloat(n.value);return!isNaN(e)&&e<i?{min:{min:i,actual:n.value}}:null}}function sV(i){return n=>{if(Cp(n.value)||Cp(i))return null;let e=parseFloat(n.value);return!isNaN(e)&&e>i?{max:{max:i,actual:n.value}}:null}}function aV(i){return Cp(i.value)?{required:!0}:null}function ete(i){return i.value===!0?null:{required:!0}}function tte(i){return Cp(i.value)||Zee.test(i.value)?null:{email:!0}}function ite(i){return n=>Cp(n.value)||!rV(n.value)?null:n.value.length<i?{minlength:{requiredLength:i,actualLength:n.value.length}}:null}function lV(i){return n=>rV(n.value)&&n.value.length>i?{maxlength:{requiredLength:i,actualLength:n.value.length}}:null}function cV(i){if(!i)return gw;let n,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=i.toString(),n=i),t=>{if(Cp(t.value))return null;let r=t.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function gw(i){return null}function dV(i){return i!=null}function pV(i){return mp(i)?bn(i):i}function uV(i){let n={};return i.forEach(e=>{n=e!=null?oe(oe({},n),e):n}),Object.keys(n).length===0?null:n}function hV(i,n){return n.map(e=>e(i))}function nte(i){return!i.validate}function fV(i){return i.map(n=>nte(n)?n:e=>n.validate(e))}function mV(i){if(!i)return null;let n=i.filter(dV);return n.length==0?null:function(e){return uV(hV(e,n))}}function LT(i){return i!=null?mV(fV(i)):null}function gV(i){if(!i)return null;let n=i.filter(dV);return n.length==0?null:function(e){let t=hV(e,n).map(pV);return Mg(t).pipe(K(uV))}}function MT(i){return i!=null?gV(fV(i)):null}function q4(i,n){return i===null?[n]:Array.isArray(i)?[...i,n]:[i,n]}function _V(i){return i._rawValidators}function CV(i){return i._rawAsyncValidators}function DT(i){return i?Array.isArray(i)?i:[i]:[]}function _w(i,n){return Array.isArray(i)?i.includes(n):i===n}function Y4(i,n){let e=DT(n);return DT(i).forEach(r=>{_w(e,r)||e.push(r)}),e}function X4(i,n){return DT(n).filter(e=>!_w(i,e))}var Cw=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=LT(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=MT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},Bs=class extends Cw{get formDirective(){return null}get path(){return null}},ss=class extends Cw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Iw=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},rte={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jat=ke(oe({},rte),{"[class.ng-submitted]":"isSubmitted"}),Pi=(()=>{class i extends Iw{constructor(e){super(e)}static{this.\u0275fac=function(t){return new(t||i)(S(ss,2))}}static{this.\u0275dir=Et({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){t&2&&Dn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Se]})}}return i})(),zn=(()=>{class i extends Iw{constructor(e){super(e)}static{this.\u0275fac=function(t){return new(t||i)(S(Bs,10))}}static{this.\u0275dir=Et({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){t&2&&Dn("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Se]})}}return i})();var g_="VALID",mw="INVALID",Ff="PENDING",__="DISABLED",Ip=class{},yw=class extends Ip{constructor(n,e){super(),this.value=n,this.source=e}},I_=class extends Ip{constructor(n,e){super(),this.pristine=n,this.source=e}},y_=class extends Ip{constructor(n,e){super(),this.touched=n,this.source=e}},kf=class extends Ip{constructor(n,e){super(),this.status=n,this.source=e}},FT=class extends Ip{constructor(n){super(),this.source=n}},kT=class extends Ip{constructor(n){super(),this.source=n}};function VT(i){return(Ew(i)?i.validators:i)||null}function ote(i){return Array.isArray(i)?LT(i):i||null}function BT(i,n){return(Ew(n)?n.asyncValidators:i)||null}function ste(i){return Array.isArray(i)?MT(i):i||null}function Ew(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function IV(i,n,e){let t=i.controls;if(!(n?Object.keys(t):t).length)throw new xt(1e3,"");if(!t[e])throw new xt(1001,"")}function yV(i,n,e){i._forEachChild((t,r)=>{if(e[r]===void 0)throw new xt(1002,"")})}var Nf=class{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Gr(()=>this.statusReactive()),this.statusReactive=Gi(void 0),this._pristine=Gr(()=>this.pristineReactive()),this.pristineReactive=Gi(!0),this._touched=Gr(()=>this.touchedReactive()),this.touchedReactive=Gi(!1),this._events=new Ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return Sa(this.statusReactive)}set status(n){Sa(()=>this.statusReactive.set(n))}get valid(){return this.status===g_}get invalid(){return this.status===mw}get pending(){return this.status==Ff}get disabled(){return this.status===__}get enabled(){return this.status!==__}get pristine(){return Sa(this.pristineReactive)}set pristine(n){Sa(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return Sa(this.touchedReactive)}set touched(n){Sa(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Y4(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Y4(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(X4(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(X4(n,this._rawAsyncValidators))}hasValidator(n){return _w(this._rawValidators,n)}hasAsyncValidator(n){return _w(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(ke(oe({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new y_(!0,t))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:t})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t),e&&n.emitEvent!==!1&&this._events.next(new y_(!1,t))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(ke(oe({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new I_(!1,t))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),e&&n.emitEvent!==!1&&this._events.next(new I_(!0,t))}markAsPending(n={}){this.status=Ff;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new kf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(ke(oe({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=__,this.errors=null,this._forEachChild(r=>{r.disable(ke(oe({},n),{onlySelf:!0}))}),this._updateValue();let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new yw(this.value,t)),this._events.next(new kf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ke(oe({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=g_,this._forEachChild(t=>{t.enable(ke(oe({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(ke(oe({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===g_||this.status===Ff)&&this._runAsyncValidator(t,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new yw(this.value,e)),this._events.next(new kf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(ke(oe({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?__:g_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=Ff,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=pV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,r)=>t&&t._find(r),this)}getError(n,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,t){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||t)&&this._events.next(new kf(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,t)}_initObservables(){this.valueChanges=new X,this.statusChanges=new X}_calculateStatus(){return this._allControlsDisabled()?__:this.errors?mw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ff)?Ff:this._anyControlsHaveStatus(mw)?mw:g_}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),r&&this._events.next(new I_(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new y_(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Ew(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=ote(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=ste(this._rawAsyncValidators)}},xa=class extends Nf{constructor(n,e,t){super(VT(e),BT(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,t={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){yV(this,!0,n),Object.keys(n).forEach(t=>{IV(this,!0,t),this.controls[t].setValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(t=>{let r=this.controls[t];r&&r.patchValue(n[t],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((t,r)=>{t.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,t)=>(n[t]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,t)=>t._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let t=this.controls[e];t&&n(t,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,t]of Object.entries(this.controls))if(this.contains(e)&&n(t))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(n,e){let t=n;return this._forEachChild((r,o)=>{t=e(t,r,o)}),t}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var rr=xa;var NT=class extends xa{};var Lf=new Xe("CallSetDisabledState",{providedIn:"root",factory:()=>Aw}),Aw="always";function xw(i,n){return[...n.path,i]}function w_(i,n,e=Aw){UT(i,n),n.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(i.disabled),lte(i,n),dte(i,n),cte(i,n),ate(i,n)}function ww(i,n,e=!0){let t=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(t),n.valueAccessor.registerOnTouched(t)),bw(i,n),i&&(n._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function vw(i,n){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function ate(i,n){if(n.valueAccessor.setDisabledState){let e=t=>{n.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(e),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function UT(i,n){let e=_V(i);n.validator!==null?i.setValidators(q4(e,n.validator)):typeof e=="function"&&i.setValidators([e]);let t=CV(i);n.asyncValidator!==null?i.setAsyncValidators(q4(t,n.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let r=()=>i.updateValueAndValidity();vw(n._rawValidators,r),vw(n._rawAsyncValidators,r)}function bw(i,n){let e=!1;if(i!==null){if(n.validator!==null){let r=_V(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.validator);o.length!==r.length&&(e=!0,i.setValidators(o))}}if(n.asyncValidator!==null){let r=CV(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.asyncValidator);o.length!==r.length&&(e=!0,i.setAsyncValidators(o))}}}let t=()=>{};return vw(n._rawValidators,t),vw(n._rawAsyncValidators,t),e}function lte(i,n){n.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&wV(i,n)})}function cte(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&wV(i,n),i.updateOn!=="submit"&&i.markAsTouched()})}function wV(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function dte(i,n){let e=(t,r)=>{n.valueAccessor.writeValue(t),r&&n.viewToModelUpdate(t)};i.registerOnChange(e),n._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function vV(i,n){i==null,UT(i,n)}function pte(i,n){return bw(i,n)}function jT(i,n){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function ute(i){return Object.getPrototypeOf(i.constructor)===Sw}function bV(i,n){i._syncPendingControls(),n.forEach(e=>{let t=e.control;t.updateOn==="submit"&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function GT(i,n){if(!n)return null;Array.isArray(n);let e,t,r;return n.forEach(o=>{o.constructor===Li?e=o:ute(o)?t=o:r=o}),r||t||e||null}function hte(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}var fte={provide:Bs,useExisting:Zt(()=>HT)},C_=Promise.resolve(),HT=(()=>{class i extends Bs{get submitted(){return Sa(this.submittedReactive)}constructor(e,t,r){super(),this.callSetDisabledState=r,this._submitted=Gr(()=>this.submittedReactive()),this.submittedReactive=Gi(!1),this._directives=new Set,this.ngSubmit=new X,this.form=new xa({},LT(e),MT(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){C_.then(()=>{let t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),w_(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){C_.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){C_.then(()=>{let t=this._findContainer(e.path),r=new xa({});vV(r,e),t.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){C_.then(()=>{let t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){C_.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),bV(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(t){return new(t||i)(S(Qa,10),S(ih,10),S(Lf,8))}}static{this.\u0275dir=Et({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){t&1&&k("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[et([fte]),Se]})}}return i})();function Q4(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}function Z4(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Vo=class extends Nf{constructor(n=null,e,t){super(VT(e),BT(t,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ew(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Z4(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Q4(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Q4(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Z4(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},ve=Vo,mte=i=>i instanceof Vo,gte=(()=>{class i extends Bs{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return xw(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,features:[Se]})}}return i})();var _te={provide:ss,useExisting:Zt(()=>mn)},eV=Promise.resolve(),mn=(()=>{class i extends ss{constructor(e,t,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Vo,this._registered=!1,this.name="",this.update=new X,this._parent=e,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=GT(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let t=e.name.previousValue;this.formDirective.removeControl({name:t,path:this._getPath(t)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),jT(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){w_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){eV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let t=e.isDisabled.currentValue,r=t!==0&&Y(t);eV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?xw(e,this._parent):[e]}static{this.\u0275fac=function(t){return new(t||i)(S(Bs,9),S(Qa,10),S(ih,10),S(fn,10),S(we,8),S(Lf,8))}}static{this.\u0275dir=Et({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[et([_te]),Se,Yi]})}}return i})(),Kn=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Et({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),Cte={provide:fn,useExisting:Zt(()=>ud),multi:!0},ud=(()=>{class i extends Sw{writeValue(e){let t=e??"";this.setProperty("value",t)}registerOnChange(e){this.onChange=t=>{e(t==""?null:parseFloat(t))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){t&1&&k("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[et([Cte]),Se]})}}return i})();var WT=new Xe(""),Ite={provide:ss,useExisting:Zt(()=>zT)},zT=(()=>{class i extends ss{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,t,r,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new X,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(t),this.valueAccessor=GT(this,r)}ngOnChanges(e){if(this._isControlChanged(e)){let t=e.form.previousValue;t&&ww(t,this,!1),w_(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}jT(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ww(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(t){return new(t||i)(S(Qa,10),S(ih,10),S(fn,10),S(WT,8),S(Lf,8))}}static{this.\u0275dir=Et({type:i,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[et([Ite]),Se,Yi]})}}return i})(),yte={provide:Bs,useExisting:Zt(()=>$n)},$n=(()=>{class i extends Bs{get submitted(){return Sa(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,t,r){super(),this.callSetDisabledState=r,this._submitted=Gr(()=>this._submittedReactive()),this._submittedReactive=Gi(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new X,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let t=this.form.get(e.path);return w_(t,e,this.callSetDisabledState),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){ww(e.control||null,e,!1),hte(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this._submittedReactive.set(!0),bV(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new FT(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new kT(this.form))}_updateDomValue(){this.directives.forEach(e=>{let t=e.control,r=this.form.get(e.path);t!==r&&(ww(t||null,e),mte(r)&&(w_(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let t=this.form.get(e.path);vV(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let t=this.form.get(e.path);t&&pte(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){UT(this.form,this),this._oldForm&&bw(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(t){return new(t||i)(S(Qa,10),S(ih,10),S(Lf,8))}}static{this.\u0275dir=Et({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,r){t&1&&k("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[et([yte]),Se,Yi]})}}return i})(),wte={provide:Bs,useExisting:Zt(()=>SV)},SV=(()=>{class i extends gte{constructor(e,t,r){super(),this.name=null,this._parent=e,this._setValidators(t),this._setAsyncValidators(r)}_checkParentType(){EV(this._parent)}static{this.\u0275fac=function(t){return new(t||i)(S(Bs,13),S(Qa,10),S(ih,10))}}static{this.\u0275dir=Et({type:i,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[et([wte]),Se]})}}return i})(),vte={provide:Bs,useExisting:Zt(()=>v_)},v_=(()=>{class i extends Bs{constructor(e,t,r){super(),this.name=null,this._parent=e,this._setValidators(t),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return xw(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){EV(this._parent)}static{this.\u0275fac=function(t){return new(t||i)(S(Bs,13),S(Qa,10),S(ih,10))}}static{this.\u0275dir=Et({type:i,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[et([vte]),Se]})}}return i})();function EV(i){return!(i instanceof SV)&&!(i instanceof $n)&&!(i instanceof v_)}var bte={provide:ss,useExisting:Zt(()=>Qn)},Qn=(()=>{class i extends ss{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,t,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new X,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=GT(this,o)}ngOnChanges(e){this._added||this._setUpControl(),jT(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return xw(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(t){return new(t||i)(S(Bs,13),S(Qa,10),S(ih,10),S(fn,10),S(WT,8))}}static{this.\u0275dir=Et({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[et([bte]),Se,Yi]})}}return i})(),Ste={provide:fn,useExisting:Zt(()=>uc),multi:!0};function AV(i,n){return i==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${i}: ${n}`.slice(0,50))}function Ete(i){return i.split(":")[0]}var uc=(()=>{class i extends Sw{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let t=this._getOptionId(e),r=AV(t,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){let t=Ete(e);return this._optionMap.has(t)?this._optionMap.get(t):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){t&1&&k("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[et([Ste]),Se]})}}return i})(),wp=(()=>{class i{constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(AV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(uc,9))}}static{this.\u0275dir=Et({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),Ate={provide:fn,useExisting:Zt(()=>xV),multi:!0};function tV(i,n){return i==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${i}: ${n}`.slice(0,50))}function xte(i){return i.split(":")[0]}var xV=(()=>{class i extends Sw{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let t;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));t=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else t=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{let r=[],o=t.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=t.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(let t of this._optionMap.keys())if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){let t=xte(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){t&1&&k("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[et([Ate]),Se]})}}return i})(),vp=(()=>{class i{constructor(e,t,r){this._element=e,this._renderer=t,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(tV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(tV(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(xV,9))}}static{this.\u0275dir=Et({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();function Tte(i){return typeof i=="number"?i:parseInt(i,10)}function TV(i){return typeof i=="number"?i:parseFloat(i)}var b_=(()=>{class i{constructor(){this._validator=gw}ngOnChanges(e){if(this.inputName in e){let t=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(t),this._validator=this._enabled?this.createValidator(t):gw,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Et({type:i,features:[Yi]})}}return i})(),Ote={provide:Qa,useExisting:Zt(()=>KT),multi:!0},KT=(()=>{class i extends b_{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>TV(e),this.createValidator=e=>sV(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){t&2&&G("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[et([Ote]),Se]})}}return i})(),Rte={provide:Qa,useExisting:Zt(()=>$T),multi:!0},$T=(()=>{class i extends b_{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>TV(e),this.createValidator=e=>oV(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){t&2&&G("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[et([Rte]),Se]})}}return i})(),Pte={provide:Qa,useExisting:Zt(()=>S_),multi:!0};var S_=(()=>{class i extends b_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Y,this.createValidator=e=>aV}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){t&2&&G("required",r._enabled?"":null)},inputs:{required:"required"},features:[et([Pte]),Se]})}}return i})();var Dte={provide:Qa,useExisting:Zt(()=>Jn),multi:!0},Jn=(()=>{class i extends b_{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>Tte(e),this.createValidator=e=>lV(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){t&2&&G("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[et([Dte]),Se]})}}return i})(),Fte={provide:Qa,useExisting:Zt(()=>JT),multi:!0},JT=(()=>{class i extends b_{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>cV(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275dir=Et({type:i,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){t&2&&G("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[et([Fte]),Se]})}}return i})();var OV=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})(),yp=class extends Nf{constructor(n,e,t){super(VT(e),BT(t,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,t={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(n,e={}){let t=this._adjustIndex(n);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){yV(this,!1,n),n.forEach((t,r)=>{IV(this,!1,r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(n.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((t,r)=>{t.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,t)=>t._syncPendingControls()?!0:e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,t)=>{n(e,t)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(let n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}},Hr=yp;function iV(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var qT=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,t=null){let r=this._reduceControls(e),o={};return iV(t)?o=t:t!==null&&(o.validators=t.validator,o.asyncValidators=t.asyncValidator),new xa(r,o)}record(e,t=null){let r=this._reduceControls(e);return new NT(r,t)}control(e,t,r){let o={};return this.useNonNullable?(iV(t)?o=t:(o.validators=t,o.asyncValidators=r),new Vo(e,ke(oe({},o),{nonNullable:!0}))):new Vo(e,t,r)}array(e,t,r){let o=e.map(s=>this._createControl(s));return new yp(o,t,r)}_reduceControls(e){let t={};return Object.keys(e).forEach(r=>{t[r]=this._createControl(e[r])}),t}_createControl(e){if(e instanceof Vo)return e;if(e instanceof Nf)return e;if(Array.isArray(e)){let t=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(t,r,o)}else return this.control(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var qr=(()=>{class i extends qT{group(e,t=null){return super.group(e,t)}control(e,t,r){return super.control(e,t,r)}array(e,t,r){return super.array(e,t,r)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bp=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Lf,useValue:e.callSetDisabledState??Aw}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({imports:[OV]})}}return i})(),YT=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:WT,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Lf,useValue:e.callSetDisabledState??Aw}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({imports:[OV]})}}return i})();var E_=function(i){return i[i.FWACTION_ACCEPT=1]="FWACTION_ACCEPT",i[i.FWACTION_DENY=2]="FWACTION_DENY",i[i.FWACTION_REJECT=3]="FWACTION_REJECT",i[i.FWACTION_ACCOUNTING=4]="FWACTION_ACCOUNTING",i}(E_||{}),Wat=(()=>{class i{constructor(){this.fwActions=[{id:E_.FWACTION_DENY,text:"Deny",icon:"&#x270B;",FAicon:"&#xf256;",iconClass:"fa fa-fw fa-hand fwcRed"},{id:E_.FWACTION_ACCEPT,text:"Accept",icon:"&#x2705;",FAicon:"&#xf00c;",iconClass:"fa fa-fw fa-check fwcBlue"},{id:E_.FWACTION_REJECT,text:"Reject",icon:"&#x274C;",FAicon:"&#xf00d;",iconClass:"fa fa-fw fa-times fwcRed"},{id:E_.FWACTION_ACCOUNTING,text:"Accounting",icon:"&#x270D;",FAicon:"&#xf040;",iconClass:"fa fa-fw fa-pencil fwcBlue",disabledOnSpecial:!0}],this.fwActionsItems=this.buildActionsItems(),this.fwActionsItemsSpecial=this.buildActionsItems(1)}getActions(){return this.fwActions}getActionsItems(e){return e?this.fwActionsItemsSpecial:this.fwActionsItems}buildActionsItems(e){let t=[];return this.fwActions.forEach(r=>{(!e||!r.disabledOnSpecial)&&t.push({label:r.text,value:r.id,icon:r.iconClass})}),t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Mf=class{},RV=(()=>{class i extends Mf{getTranslation(e){return vt({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),x_=class{},PV=(()=>{class i{handle(e){return e.key}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})();function Ow(i,n){if(i===n)return!0;if(i===null||n===null)return!1;if(i!==i&&n!==n)return!0;let e=typeof i,t=typeof n,r,o,s;if(e==t&&e=="object")if(Array.isArray(i)){if(!Array.isArray(n))return!1;if((r=i.length)==n.length){for(o=0;o<r;o++)if(!Ow(i[o],n[o]))return!1;return!0}}else{if(Array.isArray(n))return!1;s=Object.create(null);for(o in i){if(!Ow(i[o],n[o]))return!1;s[o]=!0}for(o in n)if(!(o in s)&&typeof n[o]<"u")return!1;return!0}return!1}function Sp(i){return typeof i<"u"&&i!==null}function T_(i){return Tw(i)&&!nO(i)}function Tw(i){return typeof i=="object"}function nO(i){return Array.isArray(i)}function rO(i){return typeof i=="string"}function kte(i){return typeof i=="function"}function XT(i,n){let e=Object.assign({},i);return Tw(i)?(Tw(i)&&Tw(n)&&Object.keys(n).forEach(t=>{T_(n[t])?t in i?e[t]=XT(i[t],n[t]):Object.assign(e,{[t]:n[t]}):Object.assign(e,{[t]:n[t]})}),e):XT({},n)}function QT(i,n){let e=n.split(".");n="";do n+=e.shift(),Sp(i)&&Sp(i[n])&&(T_(i[n])||nO(i[n])||!e.length)?(i=i[n],n=""):e.length?n+=".":i=void 0;while(e.length);return i}function Nte(i,n,e){let t=n.split("."),r=i;for(let o=0;o<t.length;o++){let s=t[o];o===t.length-1?r[s]=e:((!r[s]||!T_(r[s]))&&(r[s]={}),r=r[s])}}var Vf=class{},DV=(()=>{class i extends Vf{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,t){if(rO(e))return this.interpolateString(e,t);if(kte(e))return this.interpolateFunction(e,t)}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(r,o)=>{let s=QT(t,o);return Sp(s)?s:r}):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),Bf=class{},FV=(()=>{class i extends Bf{compile(e,t){return e}compileTranslations(e,t){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),Rw=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new X;onLangChange=new X;onDefaultLangChange=new X},ZT=new Xe("ISOALTE_TRANSLATE_SERVICE"),eO=new Xe("USE_DEFAULT_LANG"),tO=new Xe("DEFAULT_LANGUAGE"),iO=new Xe("USE_EXTEND"),A_=i=>$c(i)?i:vt(i),Ye=(()=>{class i{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new X;_onLangChange=new X;_onDefaultLangChange=new X;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}constructor(e,t,r,o,s,a=!0,l=!1,c=!1,d){this.store=e,this.currentLoader=t,this.compiler=r,this.parser=o,this.missingTranslationHandler=s,this.useDefaultLang=a,this.isolate=l,this.extend=c,d&&this.setDefaultLang(d)}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=e),t.pipe(ts(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return vt(this.translations[e]);this.currentLang||(this.currentLang=e);let t=this.retrieveTranslations(e);return $c(t)?(t.pipe(ts(1)).subscribe(()=>{this.changeLang(e)}),t):(this.changeLang(e),vt(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let t=this.currentLoader.getTranslation(e).pipe(nf(1),ts(1));return this.loadingTranslations=t.pipe(K(r=>this.compiler.compileTranslations(r,e)),nf(1),ts(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[e]=this.extend&&this.translations[e]?oe(oe({},r),this.translations[e]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),t}setTranslation(e,t,r=!1){let o=this.compiler.compileTranslations(t,e);(r||this.extend)&&this.translations[e]?this.translations[e]=XT(this.translations[e],o):this.translations[e]=o,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(t=>{this.langs.indexOf(t)===-1&&this.langs.push(t)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,t,r){let o;if(e&&(o=this.runInterpolation(QT(e,t),r)),o===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.runInterpolation(QT(this.translations[this.defaultLang],t),r)),o===void 0){let s={key:t,translateService:this};typeof r<"u"&&(s.interpolateParams=r),o=this.missingTranslationHandler.handle(s)}return o!==void 0?o:t}runInterpolation(e,t){if(nO(e))return e.map(r=>this.runInterpolation(r,t));if(T_(e)){let r={};for(let o in e)r[o]=this.runInterpolation(e[o],t);return r}else return this.parser.interpolate(e,t)}getParsedResult(e,t,r){if(t instanceof Array){let o={},s=!1;for(let l of t)o[l]=this.getParsedResultForKey(e,l,r),s=s||$c(o[l]);if(!s)return o;let a=t.map(l=>A_(o[l]));return Mg(a).pipe(K(l=>{let c={};return l.forEach((d,h)=>{c[t[h]]=d}),c}))}return this.getParsedResultForKey(e,t,r)}get(e,t){if(!Sp(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Al(r=>A_(this.getParsedResult(r,e,t)))):A_(this.getParsedResult(this.translations[this.currentLang],e,t))}getStreamOnTranslationChange(e,t){if(!Sp(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return Sl(Lu(()=>this.get(e,t)),this.onTranslationChange.pipe(xo(r=>{let o=this.getParsedResult(r.translations,e,t);return A_(o)})))}stream(e,t){if(!Sp(e)||!e.length)throw new Error('Parameter "key" required');return Sl(Lu(()=>this.get(e,t)),this.onLangChange.pipe(xo(r=>{let o=this.getParsedResult(r.translations,e,t);return A_(o)})))}instant(e,t){if(!Sp(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(this.translations[this.currentLang],e,t);return $c(r)?Array.isArray(e)?e.reduce((o,s)=>(o[s]=s,o),{}):e:r}set(e,t,r=this.currentLang){Nte(this.translations[r],e,rO(t)?this.compiler.compile(t,r):this.compiler.compileTranslations(t,r)),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(t){return new(t||i)(de(Rw),de(Mf),de(Bf),de(Vf),de(x_),de(eO),de(ZT),de(iO),de(tO))};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var gt=(()=>{class i{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,t){this.translate=e,this._ref=t}updateValue(e,t,r){let o=s=>{this.value=s!==void 0?s:e,this.lastKey=e,this._ref.markForCheck()};if(r){let s=this.translate.getParsedResult(r,e,t);$c(s)?s.subscribe(o):o(s)}this.translate.get(e,t).subscribe(o)}transform(e,...t){if(!e||!e.length)return e;if(Ow(e,this.lastKey)&&Ow(t,this.lastParams))return this.value;let r;if(Sp(t[0])&&t.length)if(rO(t[0])&&t[0].length){let o=t[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(o)}catch(s){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${t[0]}`)}}else T_(t[0])&&(r=t[0]);return this.lastKey=e,this.lastParams=t,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,r,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(t){return new(t||i)(S(Ye,16),S(we,16))};static \u0275pipe=ur({name:"translate",type:i,pure:!1,standalone:!0});static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})();var kV=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[e.loader||{provide:Mf,useClass:RV},e.compiler||{provide:Bf,useClass:FV},e.parser||{provide:Vf,useClass:DV},e.missingTranslationHandler||{provide:x_,useClass:PV},Rw,{provide:ZT,useValue:e.isolate},{provide:eO,useValue:e.useDefaultLang},{provide:iO,useValue:e.extend},{provide:tO,useValue:e.defaultLanguage},Ye]}}static forChild(e={}){return{ngModule:i,providers:[e.loader||{provide:Mf,useClass:RV},e.compiler||{provide:Bf,useClass:FV},e.parser||{provide:Vf,useClass:DV},e.missingTranslationHandler||{provide:x_,useClass:PV},{provide:ZT,useValue:e.isolate},{provide:eO,useValue:e.useDefaultLang},{provide:iO,useValue:e.extend},{provide:tO,useValue:e.defaultLanguage},Ye]}}static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({})}return i})();var Uf={name:"prod",production:!0,VERSION:NV().version,socketDebug:!1};var ge=class i{static isArray(n,e=!0){return Array.isArray(n)&&(e||n.length!==0)}static isObject(n,e=!0){return typeof n=="object"&&!Array.isArray(n)&&n!=null&&(e||Object.keys(n).length!==0)}static equals(n,e,t){return t?this.resolveFieldData(n,t)===this.resolveFieldData(e,t):this.equalsByValue(n,e)}static equalsByValue(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),r=Array.isArray(e),o,s,a;if(t&&r){if(s=n.length,s!=e.length)return!1;for(o=s;o--!==0;)if(!this.equalsByValue(n[o],e[o]))return!1;return!0}if(t!=r)return!1;var l=this.isDate(n),c=this.isDate(e);if(l!=c)return!1;if(l&&c)return n.getTime()==e.getTime();var d=n instanceof RegExp,h=e instanceof RegExp;if(d!=h)return!1;if(d&&h)return n.toString()==e.toString();var _=Object.keys(n);if(s=_.length,s!==Object.keys(e).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,_[o]))return!1;for(o=s;o--!==0;)if(a=_[o],!this.equalsByValue(n[a],e[a]))return!1;return!0}return n!==n&&e!==e}static resolveFieldData(n,e){if(n&&e){if(this.isFunction(e))return e(n);if(e.indexOf(".")==-1)return n[e];{let t=e.split("."),r=n;for(let o=0,s=t.length;o<s;++o){if(r==null)return null;r=r[t[o]]}return r}}else return null}static isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)}static reorderArray(n,e,t){let r;n&&e!==t&&(t>=n.length&&(t%=n.length,e%=n.length),n.splice(t,0,n.splice(e,1)[0]))}static insertIntoOrderedArray(n,e,t,r){if(t.length>0){let o=!1;for(let s=0;s<t.length;s++)if(this.findIndexInList(t[s],r)>e){t.splice(s,0,n),o=!0;break}o||t.push(n)}else t.push(n)}static findIndexInList(n,e){let t=-1;if(e){for(let r=0;r<e.length;r++)if(e[r]==n){t=r;break}}return t}static contains(n,e){if(n!=null&&e&&e.length){for(let t of e)if(this.equals(n,t))return!0}return!1}static removeAccents(n){return n&&(n=n.normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"")),n}static isDate(n){return Object.prototype.toString.call(n)==="[object Date]"}static isEmpty(n){return n==null||n===""||Array.isArray(n)&&n.length===0||!this.isDate(n)&&typeof n=="object"&&Object.keys(n).length===0}static isNotEmpty(n){return!this.isEmpty(n)}static compare(n,e,t,r=1){let o=-1,s=this.isEmpty(n),a=this.isEmpty(e);return s&&a?o=0:s?o=r:a?o=-r:typeof n=="string"&&typeof e=="string"?o=n.localeCompare(e,t,{numeric:!0}):o=n<e?-1:n>e?1:0,o}static sort(n,e,t=1,r,o=1){let s=i.compare(n,e,r,t),a=t;return(i.isEmpty(n)||i.isEmpty(e))&&(a=o===1?t:o),a*s}static merge(n,e){if(!(n==null&&e==null)){{if((n==null||typeof n=="object")&&(e==null||typeof e=="object"))return oe(oe({},n||{}),e||{});if((n==null||typeof n=="string")&&(e==null||typeof e=="string"))return[n||"",e||""].join(" ")}return e||n}}static isPrintableCharacter(n=""){return this.isNotEmpty(n)&&n.length===1&&n.match(/\S| /)}static getItemValue(n,...e){return this.isFunction(n)?n(...e):n}static findLastIndex(n,e){let t=-1;if(this.isNotEmpty(n))try{t=n.findLastIndex(e)}catch{t=n.lastIndexOf([...n].reverse().find(e))}return t}static findLast(n,e){let t;if(this.isNotEmpty(n))try{t=n.findLast(e)}catch{t=[...n].reverse().find(e)}return t}static deepEquals(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),r=Array.isArray(e),o,s,a;if(t&&r){if(s=n.length,s!=e.length)return!1;for(o=s;o--!==0;)if(!this.deepEquals(n[o],e[o]))return!1;return!0}if(t!=r)return!1;var l=n instanceof Date,c=e instanceof Date;if(l!=c)return!1;if(l&&c)return n.getTime()==e.getTime();var d=n instanceof RegExp,h=e instanceof RegExp;if(d!=h)return!1;if(d&&h)return n.toString()==e.toString();var _=Object.keys(n);if(s=_.length,s!==Object.keys(e).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(e,_[o]))return!1;for(o=s;o--!==0;)if(a=_[o],!this.deepEquals(n[a],e[a]))return!1;return!0}return n!==n&&e!==e}},LV=0;function Tt(i="pn_id_"){return LV++,`${i}${LV}`}function Mte(){let i=[],n=(o,s)=>{let a=i.length>0?i[i.length-1]:{key:o,value:s},l=a.value+(a.key===o?0:s)+2;return i.push({key:o,value:l}),l},e=o=>{i=i.filter(s=>s.value!==o)},t=()=>i.length>0?i[i.length-1].value:0,r=o=>o&&parseInt(o.style.zIndex,10)||0;return{get:r,set:(o,s,a)=>{s&&(s.style.zIndex=String(n(o,a)))},clear:o=>{o&&(e(r(o)),o.style.zIndex="")},getCurrent:()=>t()}}var bi=Mte();var MV=["*"],nh=function(i){return i[i.ACCEPT=0]="ACCEPT",i[i.REJECT=1]="REJECT",i[i.CANCEL=2]="CANCEL",i}(nh||{}),Jt=(()=>{class i{requireConfirmationSource=new Ue;acceptConfirmationSource=new Ue;requireConfirmation$=this.requireConfirmationSource.asObservable();accept=this.acceptConfirmationSource.asObservable();confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})();var Bo=(()=>{class i{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"}return i})(),oO=(()=>{class i{static AND="and";static OR="or"}return i})(),hc=(()=>{class i{filter(e,t,r,o,s){let a=[];if(e)for(let l of e)for(let c of t){let d=ge.resolveFieldData(l,c);if(this.filters[o](d,r,s)){a.push(l);break}}return a}filters={startsWith:(e,t,r)=>{if(t==null||t.trim()==="")return!0;if(e==null)return!1;let o=ge.removeAccents(t.toString()).toLocaleLowerCase(r);return ge.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,o.length)===o},contains:(e,t,r)=>{if(t==null||typeof t=="string"&&t.trim()==="")return!0;if(e==null)return!1;let o=ge.removeAccents(t.toString()).toLocaleLowerCase(r);return ge.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)!==-1},notContains:(e,t,r)=>{if(t==null||typeof t=="string"&&t.trim()==="")return!0;if(e==null)return!1;let o=ge.removeAccents(t.toString()).toLocaleLowerCase(r);return ge.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(o)===-1},endsWith:(e,t,r)=>{if(t==null||t.trim()==="")return!0;if(e==null)return!1;let o=ge.removeAccents(t.toString()).toLocaleLowerCase(r),s=ge.removeAccents(e.toString()).toLocaleLowerCase(r);return s.indexOf(o,s.length-o.length)!==-1},equals:(e,t,r)=>t==null||typeof t=="string"&&t.trim()===""?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()===t.getTime():e==t?!0:ge.removeAccents(e.toString()).toLocaleLowerCase(r)==ge.removeAccents(t.toString()).toLocaleLowerCase(r),notEquals:(e,t,r)=>t==null||typeof t=="string"&&t.trim()===""?!1:e==null?!0:e.getTime&&t.getTime?e.getTime()!==t.getTime():e==t?!1:ge.removeAccents(e.toString()).toLocaleLowerCase(r)!=ge.removeAccents(t.toString()).toLocaleLowerCase(r),in:(e,t)=>{if(t==null||t.length===0)return!0;for(let r=0;r<t.length;r++)if(ge.equals(e,t[r]))return!0;return!1},between:(e,t)=>t==null||t[0]==null||t[1]==null?!0:e==null?!1:e.getTime?t[0].getTime()<=e.getTime()&&e.getTime()<=t[1].getTime():t[0]<=e&&e<=t[1],lt:(e,t,r)=>t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()<t.getTime():e<t,lte:(e,t,r)=>t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()<=t.getTime():e<=t,gt:(e,t,r)=>t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()>t.getTime():e>t,gte:(e,t,r)=>t==null?!0:e==null?!1:e.getTime&&t.getTime?e.getTime()>=t.getTime():e>=t,is:(e,t,r)=>this.filters.equals(e,t,r),isNot:(e,t,r)=>this.filters.notEquals(e,t,r),before:(e,t,r)=>this.filters.lt(e,t,r),after:(e,t,r)=>this.filters.gt(e,t,r),dateIs:(e,t)=>t==null?!0:e==null?!1:e.toDateString()===t.toDateString(),dateIsNot:(e,t)=>t==null?!0:e==null?!1:e.toDateString()!==t.toDateString(),dateBefore:(e,t)=>t==null?!0:e==null?!1:e.getTime()<t.getTime(),dateAfter:(e,t)=>{if(t==null)return!0;if(e==null)return!1;let r=new Date(e);return r.setHours(0,0,0,0),r.getTime()>t.getTime()}};register(e,t){this.filters[e]=t}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Kt=(()=>{class i{messageSource=new Ue;clearSource=new Ue;messageObserver=this.messageSource.asObservable();clearObserver=this.clearSource.asObservable();add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),Uo=(()=>{class i{clickSource=new Ue;clickObservable=this.clickSource.asObservable();add(e){e&&this.clickSource.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ht=(()=>{class i{ripple=!1;inputStyle=Gi("outlined");overlayOptions={};csp=Gi({nonce:void 0});filterMatchModeOptions={text:[Bo.STARTS_WITH,Bo.CONTAINS,Bo.NOT_CONTAINS,Bo.ENDS_WITH,Bo.EQUALS,Bo.NOT_EQUALS],numeric:[Bo.EQUALS,Bo.NOT_EQUALS,Bo.LESS_THAN,Bo.LESS_THAN_OR_EQUAL_TO,Bo.GREATER_THAN,Bo.GREATER_THAN_OR_EQUAL_TO],date:[Bo.DATE_IS,Bo.DATE_IS_NOT,Bo.DATE_BEFORE,Bo.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new Ue;translationObserver=this.translationSource.asObservable();getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=oe(oe({},this.translation),e),this.translationSource.next(this.translation)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),fc=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-header"]],standalone:!0,features:[Ct],ngContentSelectors:MV,decls:1,vars:0,template:function(t,r){t&1&&($i(),hi(0))},encapsulation:2})}return i})(),As=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-footer"]],standalone:!0,features:[Ct],ngContentSelectors:MV,decls:1,vars:0,template:function(t,r){t&1&&($i(),hi(0))},encapsulation:2})}return i})(),Ee=(()=>{class i{template;type;name;constructor(e){this.template=e}getType(){return this.name}static \u0275fac=function(t){return new(t||i)(S(Ca))};static \u0275dir=Et({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]},standalone:!0})}return i})(),dt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({})}return i})(),Di=(()=>{class i{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static NO_FILTER="noFilter";static LT="lt";static LTE="lte";static GT="gt";static GTE="gte";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static CLEAR="clear";static APPLY="apply";static MATCH_ALL="matchAll";static MATCH_ANY="matchAny";static ADD_RULE="addRule";static REMOVE_RULE="removeRule";static ACCEPT="accept";static REJECT="reject";static CHOOSE="choose";static UPLOAD="upload";static CANCEL="cancel";static PENDING="pending";static FILE_SIZE_TYPES="fileSizeTypes";static DAY_NAMES="dayNames";static DAY_NAMES_SHORT="dayNamesShort";static DAY_NAMES_MIN="dayNamesMin";static MONTH_NAMES="monthNames";static MONTH_NAMES_SHORT="monthNamesShort";static FIRST_DAY_OF_WEEK="firstDayOfWeek";static TODAY="today";static WEEK_HEADER="weekHeader";static WEAK="weak";static MEDIUM="medium";static STRONG="strong";static PASSWORD_PROMPT="passwordPrompt";static EMPTY_MESSAGE="emptyMessage";static EMPTY_FILTER_MESSAGE="emptyFilterMessage";static SHOW_FILTER_MENU="showFilterMenu";static HIDE_FILTER_MENU="hideFilterMenu";static SELECTION_MESSAGE="selectionMessage";static ARIA="aria";static SELECT_COLOR="selectColor";static BROWSE_FILES="browseFiles"}return i})(),VV=(()=>{class i{dragStartSource=new Ue;dragStopSource=new Ue;dragStart$=this.dragStartSource.asObservable();dragStop$=this.dragStopSource.asObservable();startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})();var j=(()=>{class i{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(e,t){e&&t&&(e.classList?e.classList.add(t):e.className+=" "+t)}static addMultipleClasses(e,t){if(e&&t)if(e.classList){let r=t.trim().split(" ");for(let o=0;o<r.length;o++)e.classList.add(r[o])}else{let r=t.split(" ");for(let o=0;o<r.length;o++)e.className+=" "+r[o]}}static removeClass(e,t){e&&t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(e,t){e&&t&&[t].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(o=>this.removeClass(e,o)))}static hasClass(e,t){return e&&t?e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className):!1}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(t){return t!==e})}static find(e,t){return Array.from(e.querySelectorAll(t))}static findSingle(e,t){return this.isElement(e)?e.querySelector(t):null}static index(e){let t=e.parentNode.childNodes,r=0;for(var o=0;o<t.length;o++){if(t[o]==e)return r;t[o].nodeType==1&&r++}return-1}static indexWithinGroup(e,t){let r=e.parentNode?e.parentNode.childNodes:[],o=0;for(var s=0;s<r.length;s++){if(r[s]==e)return o;r[s].attributes&&r[s].attributes[t]&&r[s].nodeType==1&&o++}return-1}static appendOverlay(e,t,r="self"){r!=="self"&&e&&t&&this.appendChild(e,t)}static alignOverlay(e,t,r="self",o=!0){e&&t&&(o&&(e.style.minWidth=`${i.getOuterWidth(t)}px`),r==="self"?this.relativePosition(e,t):this.absolutePosition(e,t))}static relativePosition(e,t,r=!0){let o=T=>{if(T)return getComputedStyle(T).getPropertyValue("position")==="relative"?T:o(T.parentElement)},s=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),a=t.offsetHeight??t.getBoundingClientRect().height,l=t.getBoundingClientRect(),c=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),h=this.getViewport(),C=o(e)?.getBoundingClientRect()||{top:-1*c,left:-1*d},I,b;l.top+a+s.height>h.height?(I=l.top-C.top-s.height,e.style.transformOrigin="bottom",l.top+I<0&&(I=-1*l.top)):(I=a+l.top-C.top,e.style.transformOrigin="top");let E=l.left+s.width-h.width,R=l.left-C.left;s.width>h.width?b=(l.left-C.left)*-1:E>0?b=R-E:b=l.left-C.left,e.style.top=I+"px",e.style.left=b+"px",r&&(e.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static absolutePosition(e,t,r=!0){let o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=o.height,a=o.width,l=t.offsetHeight??t.getBoundingClientRect().height,c=t.offsetWidth??t.getBoundingClientRect().width,d=t.getBoundingClientRect(),h=this.getWindowScrollTop(),_=this.getWindowScrollLeft(),C=this.getViewport(),I,b;d.top+l+s>C.height?(I=d.top+h-s,e.style.transformOrigin="bottom",I<0&&(I=h)):(I=l+d.top+h,e.style.transformOrigin="top"),d.left+a>C.width?b=Math.max(0,d.left+_+c-a):b=d.left+_,e.style.top=I+"px",e.style.left=b+"px",r&&(e.style.marginTop=origin==="bottom"?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static getParents(e,t=[]){return e.parentNode===null?t:this.getParents(e.parentNode,t.concat([e.parentNode]))}static getScrollableParents(e){let t=[];if(e){let r=this.getParents(e),o=/(auto|scroll)/,s=a=>{let l=window.getComputedStyle(a,null);return o.test(l.getPropertyValue("overflow"))||o.test(l.getPropertyValue("overflowX"))||o.test(l.getPropertyValue("overflowY"))};for(let a of r){let l=a.nodeType===1&&a.dataset.scrollselectors;if(l){let c=l.split(",");for(let d of c){let h=this.findSingle(a,d);h&&s(h)&&t.push(h)}}a.nodeType!==9&&s(a)&&t.push(a)}}return t}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",t}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",t}static getHiddenElementDimensions(e){let t={};return e.style.visibility="hidden",e.style.display="block",t.width=e.offsetWidth,t.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",t}static scrollInView(e,t){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),o=r?parseFloat(r):0,s=getComputedStyle(e).getPropertyValue("paddingTop"),a=s?parseFloat(s):0,l=e.getBoundingClientRect(),d=t.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-o-a,h=e.scrollTop,_=e.clientHeight,C=this.getOuterHeight(t);d<0?e.scrollTop=h+d:d+C>_&&(e.scrollTop=h+d-_+C)}static fadeIn(e,t){e.style.opacity=0;let r=+new Date,o=0,s=function(){o=+e.style.opacity.replace(",",".")+(new Date().getTime()-r)/t,e.style.opacity=o,r=+new Date,+o<1&&(window.requestAnimationFrame&&requestAnimationFrame(s)||setTimeout(s,16))};s()}static fadeOut(e,t){var r=1,o=50,s=t,a=o/s;let l=setInterval(()=>{r=r-a,r<=0&&(r=0,clearInterval(l)),e.style.opacity=r},o)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,t){var r=Element.prototype,o=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(s){return[].indexOf.call(document.querySelectorAll(s),this)!==-1};return o.call(e,t)}static getOuterWidth(e,t){let r=e.offsetWidth;if(t){let o=getComputedStyle(e);r+=parseFloat(o.marginLeft)+parseFloat(o.marginRight)}return r}static getHorizontalPadding(e){let t=getComputedStyle(e);return parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)}static getHorizontalMargin(e){let t=getComputedStyle(e);return parseFloat(t.marginLeft)+parseFloat(t.marginRight)}static innerWidth(e){let t=e.offsetWidth,r=getComputedStyle(e);return t+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),t}static width(e){let t=e.offsetWidth,r=getComputedStyle(e);return t-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),t}static getInnerHeight(e){let t=e.offsetHeight,r=getComputedStyle(e);return t+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),t}static getOuterHeight(e,t){let r=e.offsetHeight;if(t){let o=getComputedStyle(e);r+=parseFloat(o.marginTop)+parseFloat(o.marginBottom)}return r}static getHeight(e){let t=e.offsetHeight,r=getComputedStyle(e);return t-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),t}static getWidth(e){let t=e.offsetWidth,r=getComputedStyle(e);return t-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),t}static getViewport(){let e=window,t=document,r=t.documentElement,o=t.getElementsByTagName("body")[0],s=e.innerWidth||r.clientWidth||o.clientWidth,a=e.innerHeight||r.clientHeight||o.clientHeight;return{width:s,height:a}}static getOffset(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,t){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(t,e)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return!0;var r=e.indexOf("Trident/");if(r>0){var o=e.indexOf("rv:");return!0}var s=e.indexOf("Edge/");return s>0}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,t){if(this.isElement(t))t.appendChild(e);else if(t&&t.el&&t.el.nativeElement)t.el.nativeElement.appendChild(e);else throw"Cannot append "+t+" to "+e}static removeChild(e,t){if(this.isElement(t))t.removeChild(e);else if(t.el&&t.el.nativeElement)t.el.nativeElement.removeChild(e);else throw"Cannot remove "+e+" from "+t}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"}static calculateScrollbarWidth(e){if(e){let t=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.borderRightWidth)}else{if(this.calculatedScrollbarWidth!==null)return this.calculatedScrollbarWidth;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(this.calculatedScrollbarHeight!==null)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let t=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=t,t}static invokeElementMethod(e,t,r){e[t].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||e.offsetParent===null}static isVisible(e){return e&&e.offsetParent!=null}static isExist(e){return e!==null&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,t){e&&document.activeElement!==e&&e.focus(t)}static getFocusableSelectorString(e=""){return`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        .p-inputtext:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e},
        .p-button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${e}`}static getFocusableElements(e,t=""){let r=this.find(e,this.getFocusableSelectorString(t)),o=[];for(let s of r){let a=getComputedStyle(s);this.isVisible(s)&&a.display!="none"&&a.visibility!="hidden"&&o.push(s)}return o}static getFocusableElement(e,t=""){let r=this.findSingle(e,this.getFocusableSelectorString(t));if(r){let o=getComputedStyle(r);if(this.isVisible(r)&&o.display!="none"&&o.visibility!="hidden")return r}return null}static getFirstFocusableElement(e,t=""){let r=this.getFocusableElements(e,t);return r.length>0?r[0]:null}static getLastFocusableElement(e,t){let r=this.getFocusableElements(e,t);return r.length>0?r[r.length-1]:null}static getNextFocusableElement(e,t=!1){let r=i.getFocusableElements(e),o=0;if(r&&r.length>0){let s=r.indexOf(r[0].ownerDocument.activeElement);t?s==-1||s===0?o=r.length-1:o=s-1:s!=-1&&s!==r.length-1&&(o=s+1)}return r[o]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,t){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return t?.nextElementSibling;case"@prev":return t?.previousElementSibling;case"@parent":return t?.parentElement;case"@grandparent":return t?.parentElement.parentElement;default:let r=typeof e;if(r==="string")return document.querySelector(e);if(r==="object"&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;let s=(a=>!!(a&&a.constructor&&a.call&&a.apply))(e)?e():e;return s&&s.nodeType===9||this.isExist(s)?s:null}}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(e,t){if(e){let r=e.getAttribute(t);return isNaN(r)?r==="true"||r==="false"?r==="true":r:+r}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(e="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,e)}static unblockBodyScroll(e="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,e)}static createElement(e,t={},...r){if(e){let o=document.createElement(e);return this.setAttributes(o,t),o.append(...r),o}}static setAttribute(e,t="",r){this.isElement(e)&&r!==null&&r!==void 0&&e.setAttribute(t,r)}static setAttributes(e,t={}){if(this.isElement(e)){let r=(o,s)=>{let a=e?.$attrs?.[o]?[e?.$attrs?.[o]]:[];return[s].flat().reduce((l,c)=>{if(c!=null){let d=typeof c;if(d==="string"||d==="number")l.push(c);else if(d==="object"){let h=Array.isArray(c)?r(o,c):Object.entries(c).map(([_,C])=>o==="style"&&(C||C===0)?`${_.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${C}`:C?_:void 0);l=h.length?l.concat(h.filter(_=>!!_)):l}}return l},a)};Object.entries(t).forEach(([o,s])=>{if(s!=null){let a=o.match(/^on(.+)/);a?e.addEventListener(a[1].toLowerCase(),s):o==="pBind"?this.setAttributes(e,s):(s=o==="class"?[...new Set(r("class",s))].join(" ").trim():o==="style"?r("style",s).join(";").trim():s,(e.$attrs=e.$attrs||{})&&(e.$attrs[o]=s),e.setAttribute(o,s))}})}}static isFocusableElement(e,t=""){return this.isElement(e)?e.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`):!1}}return i})(),go=class{element;listener;scrollableParents;constructor(n,e=()=>{}){this.element=n,this.listener=e}bindScrollListener(){this.scrollableParents=j.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}};var Zn=(()=>{class i{autofocus=!1;focused=!1;platformId=Je(ai);document=Je(At);host=Je(Ze);ngAfterContentChecked(){this.autofocus===!1?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){bt(this.platformId)&&this.autofocus&&setTimeout(()=>{let e=j.getFocusableElements(this.host?.nativeElement);e.length===0&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0})}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Et({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:[2,"autofocus","autofocus",Y]},standalone:!0,features:[tt]})}return i})(),fr=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({})}return i})();var Vte=["*"],Nt=(()=>{class i{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){let e=ge.isEmpty(this.label);this.role=e?void 0:"img",this.ariaLabel=e?void 0:this.label,this.ariaHidden=e}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:[2,"spin","spin",Y],styleClass:"styleClass"},standalone:!0,features:[tt,Ct],ngContentSelectors:Vte,decls:1,vars:0,template:function(t,r){t&1&&($i(),hi(0))},encapsulation:2,changeDetection:0})}return i})();var Us=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["SpinnerIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var nn=(()=>{class i{document;platformId;renderer;el;zone;config;constructor(e,t,r,o,s,a){this.document=e,this.platformId=t,this.renderer=r,this.el=o,this.zone=s,this.config=a}animationListener;mouseDownListener;timeout;ngAfterViewInit(){bt(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(e){let t=this.getInk();if(!t||this.document.defaultView?.getComputedStyle(t,null).display==="none")return;if(j.removeClass(t,"p-ink-active"),!j.getHeight(t)&&!j.getWidth(t)){let a=Math.max(j.getOuterWidth(this.el.nativeElement),j.getOuterHeight(this.el.nativeElement));t.style.height=a+"px",t.style.width=a+"px"}let r=j.getOffset(this.el.nativeElement),o=e.pageX-r.left+this.document.body.scrollTop-j.getWidth(t)/2,s=e.pageY-r.top+this.document.body.scrollLeft-j.getHeight(t)/2;this.renderer.setStyle(t,"top",s+"px"),this.renderer.setStyle(t,"left",o+"px"),j.addClass(t,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&j.removeClass(a,"p-ink-active")},401)}getInk(){let e=this.el.nativeElement.children;for(let t=0;t<e.length;t++)if(typeof e[t].className=="string"&&e[t].className.indexOf("p-ink")!==-1)return e[t];return null}resetInk(){let e=this.getInk();e&&j.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),j.removeClass(e.currentTarget,"p-ink-active")}create(){let e=this.renderer.createElement("span");this.renderer.addClass(e,"p-ink"),this.renderer.appendChild(this.el.nativeElement,e),this.renderer.setAttribute(e,"aria-hidden","true"),this.renderer.setAttribute(e,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(e,"animationend",this.onAnimationEnd.bind(this)))}remove(){let e=this.getInk();e&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,j.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(Ze),S(Lt),S(Ht,8))};static \u0275dir=Et({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"],standalone:!0})}return i})(),ln=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({})}return i})();var Bte=["*"],BV=i=>({class:i});function Ute(i,n){i&1&&ue(0)}function jte(i,n){if(i&1&&P(0,"span",8),i&2){let e=u(3);f("ngClass",e.iconClass()),G("aria-hidden",!0)("data-pc-section","loadingicon")}}function Gte(i,n){if(i&1&&P(0,"SpinnerIcon",9),i&2){let e=u(3);f("styleClass",e.spinnerIconClass())("spin",!0),G("aria-hidden",!0)("data-pc-section","loadingicon")}}function Hte(i,n){if(i&1&&(he(0),v(1,jte,1,3,"span",6)(2,Gte,1,4,"SpinnerIcon",7),fe()),i&2){let e=u(2);p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function Wte(i,n){}function zte(i,n){if(i&1&&v(0,Wte,0,0,"ng-template",10),i&2){let e=u(2);f("ngIf",e.loadingIconTemplate)}}function Kte(i,n){if(i&1&&(he(0),v(1,Hte,3,2,"ng-container",2)(2,zte,1,1,null,5),fe()),i&2){let e=u();p(),f("ngIf",!e.loadingIconTemplate),p(),f("ngTemplateOutlet",e.loadingIconTemplate)("ngTemplateOutletContext",ne(3,BV,e.iconClass()))}}function $te(i,n){if(i&1&&P(0,"span",8),i&2){let e=u(2);f("ngClass",e.iconClass()),G("data-pc-section","icon")}}function Jte(i,n){}function qte(i,n){if(i&1&&v(0,Jte,0,0,"ng-template",10),i&2){let e=u(2);f("ngIf",!e.icon&&e.iconTemplate)}}function Yte(i,n){if(i&1&&(he(0),v(1,$te,1,2,"span",6)(2,qte,1,1,null,5),fe()),i&2){let e=u();p(),f("ngIf",e.icon&&!e.iconTemplate),p(),f("ngTemplateOutlet",e.iconTemplate)("ngTemplateOutletContext",ne(3,BV,e.iconClass()))}}function Xte(i,n){if(i&1&&(m(0,"span",11),F(1),g()),i&2){let e=u();G("aria-hidden",e.icon&&!e.label)("data-pc-section","label"),p(),$(e.label)}}function Qte(i,n){if(i&1&&(m(0,"span",8),F(1),g()),i&2){let e=u();ce(e.badgeClass),f("ngClass",e.badgeStyleClass()),G("data-pc-section","badge"),p(),$(e.badge)}}var Ep={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"},pt=(()=>{class i{el;document;iconPos="left";loadingIcon;get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}severity;raised=!1;rounded=!1;text=!1;outlined=!1;size=null;plain=!1;_label;_icon;_loading=!1;initialized;get htmlElement(){return this.el.nativeElement}_internalClasses=Object.values(Ep);constructor(e,t){this.el=e,this.document=t}ngAfterViewInit(){j.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let e=[Ep.button,Ep.component];return this.icon&&!this.label&&ge.isEmpty(this.htmlElement.textContent)&&e.push(Ep.iconOnly),this.loading&&(e.push(Ep.disabled,Ep.loading),!this.icon&&this.label&&e.push(Ep.labelOnly),this.icon&&!this.label&&!ge.isEmpty(this.htmlElement.textContent)&&e.push(Ep.iconOnly)),this.text&&e.push("p-button-text"),this.severity&&e.push(`p-button-${this.severity}`),this.plain&&e.push("p-button-plain"),this.raised&&e.push("p-button-raised"),this.size&&e.push(`p-button-${this.size}`),this.outlined&&e.push("p-button-outlined"),this.rounded&&e.push("p-button-rounded"),this.size==="small"&&e.push("p-button-sm"),this.size==="large"&&e.push("p-button-lg"),e}setStyleClass(){let e=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...e)}createLabel(){if(!j.findSingle(this.htmlElement,".p-button-label")&&this.label){let t=this.document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",t.appendChild(this.document.createTextNode(this.label)),this.htmlElement.appendChild(t)}}createIcon(){if(!j.findSingle(this.htmlElement,".p-button-icon")&&(this.icon||this.loading)){let t=this.document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let r=this.label?"p-button-icon-"+this.iconPos:null;r&&j.addClass(t,r);let o=this.getIconClass();o&&j.addMultipleClasses(t,o),this.htmlElement.insertBefore(t,this.htmlElement.firstChild)}}updateLabel(){let e=j.findSingle(this.htmlElement,".p-button-label");if(!this.label){e&&this.htmlElement.removeChild(e);return}e?e.textContent=this.label:this.createLabel()}updateIcon(){let e=j.findSingle(this.htmlElement,".p-button-icon"),t=j.findSingle(this.htmlElement,".p-button-label");e?this.iconPos?e.className="p-button-icon "+(t?"p-button-icon-"+this.iconPos:"")+" "+this.getIconClass():e.className="p-button-icon "+this.getIconClass():this.createIcon()}getIconClass(){return this.loading?"p-button-loading-icon pi-spin "+(this.loadingIcon??"pi pi-spinner"):this.icon||"p-hidden"}ngOnDestroy(){this.initialized=!1}static \u0275fac=function(t){return new(t||i)(S(Ze),S(At))};static \u0275dir=Et({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading",severity:"severity",raised:[2,"raised","raised",Y],rounded:[2,"rounded","rounded",Y],text:[2,"text","text",Y],outlined:[2,"outlined","outlined",Y],size:"size",plain:[2,"plain","plain",Y]},standalone:!0,features:[tt]})}return i})(),sO=(()=>{class i{el;type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;tabindex;size;style;styleClass;badgeClass;ariaLabel;autofocus;onClick=new X;onFocus=new X;onBlur=new X;contentTemplate;loadingIconTemplate;iconTemplate;templates;constructor(e){this.el=e}spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,e])=>!!e).reduce((e,[t])=>e+` ${t}`,"p-button-loading-icon")}iconClass(){let e={"p-button-icon":!0,"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label};return this.loading?e[`p-button-loading-icon pi-spin ${this.loadingIcon??""}`]=!0:this.icon&&(e[this.icon]=!0),e}get buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":(this.icon||this.iconTemplate||this.loadingIcon||this.loadingIconTemplate)&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label&&!this.loadingIcon&&this.iconPos==="left","p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":this.size==="small","p-button-lg":this.size==="large","p-button-plain":this.plain,[`${this.styleClass}`]:this.styleClass}}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"icon":this.iconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&String(this.badge).length===1}}focus(){this.el.nativeElement.firstChild.focus()}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275cmp=se({type:i,selectors:[["p-button"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(t,r){t&2&&Dn("p-disabled",r.disabled)},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:[2,"disabled","disabled",Y],loading:[2,"loading","loading",Y],loadingIcon:"loadingIcon",raised:[2,"raised","raised",Y],rounded:[2,"rounded","rounded",Y],text:[2,"text","text",Y],plain:[2,"plain","plain",Y],severity:"severity",outlined:[2,"outlined","outlined",Y],link:[2,"link","link",Y],tabindex:[2,"tabindex","tabindex",We],size:"size",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},standalone:!0,features:[tt,Ct],ngContentSelectors:Bte,decls:7,vars:14,consts:[["pRipple","","pAutoFocus","",3,"click","focus","blur","ngStyle","disabled","ngClass","autofocus"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass",4,"ngIf"],[3,"styleClass","spin",4,"ngIf"],[3,"ngClass"],[3,"styleClass","spin"],[3,"ngIf"],[1,"p-button-label"]],template:function(t,r){t&1&&($i(),m(0,"button",0),k("click",function(s){return r.onClick.emit(s)})("focus",function(s){return r.onFocus.emit(s)})("blur",function(s){return r.onBlur.emit(s)}),hi(1),v(2,Ute,1,0,"ng-container",1)(3,Kte,3,5,"ng-container",2)(4,Yte,3,5,"ng-container",2)(5,Xte,2,3,"span",3)(6,Qte,2,5,"span",4),g()),t&2&&(f("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",r.buttonClass)("autofocus",r.autofocus),G("type",r.type)("aria-label",r.ariaLabel)("data-pc-name","button")("data-pc-section","root")("tabindex",r.tabindex),p(2),f("ngTemplateOutlet",r.contentTemplate),p(),f("ngIf",r.loading),p(),f("ngIf",!r.loading),p(),f("ngIf",!r.contentTemplate&&r.label),p(),f("ngIf",!r.contentTemplate&&r.badge))},dependencies:[rt,mt,De,je,nn,Zn,Us],encapsulation:2,changeDetection:0})}return i})(),ro=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[sO,dt]})}return i})();var Xi=(()=>{class i{el;ngModel;cd;config;variant="outlined";filled;constructor(e,t,r,o){this.el=e,this.ngModel=t,this.cd=r,this.config=o}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(t){return new(t||i)(S(Ze),S(mn,8),S(we),S(Ht))};static \u0275dir=Et({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(t,r){t&1&&k("input",function(s){return r.onInput(s)}),t&2&&Dn("p-filled",r.filled)("p-variant-filled",r.variant==="filled"||r.config.inputStyle()==="filled")},inputs:{variant:"variant"}})}return i})(),Za=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var or=(()=>{class i{styleClass;style;strokeWidth="2";fill="none";animationDuration="2s";ariaLabel;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-progressSpinner"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",strokeWidth:"strokeWidth",fill:"fill",animationDuration:"animationDuration",ariaLabel:"ariaLabel"},decls:3,vars:11,consts:[["role","progressbar",1,"p-progress-spinner",3,"ngStyle","ngClass"],["viewBox","25 25 50 50",1,"p-progress-spinner-svg"],["cx","50","cy","50","r","20","stroke-miterlimit","10",1,"p-progress-spinner-circle"]],template:function(t,r){t&1&&(m(0,"div",0),Rt(),m(1,"svg",1),P(2,"circle",2),g()()),t&2&&(f("ngStyle",r.style)("ngClass",r.styleClass),G("aria-label",r.ariaLabel)("aria-busy",!0)("data-pc-name","progressspinner")("data-pc-section","root"),p(),Wn("animation-duration",r.animationDuration),G("data-pc-section","root"),p(),G("fill",r.fill)("stroke-width",r.strokeWidth))},dependencies:[je,De],styles:[`@layer primeng{.p-progress-spinner{position:relative;margin:0 auto;width:100px;height:100px;display:inline-block}.p-progress-spinner:before{content:"";display:block;padding-top:100%}.p-progress-spinner-svg{animation:p-progress-spinner-rotate 2s linear infinite;height:100%;transform-origin:center center;width:100%;position:absolute;inset:0;margin:auto}.p-progress-spinner-circle{stroke-dasharray:89,200;stroke-dashoffset:0;stroke:#d62d20;animation:p-progress-spinner-dash 1.5s ease-in-out infinite,p-progress-spinner-color 6s ease-in-out infinite;stroke-linecap:round}}@keyframes p-progress-spinner-rotate{to{transform:rotate(360deg)}}@keyframes p-progress-spinner-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}@keyframes p-progress-spinner-color{to,0%{stroke:#d62d20}40%{stroke:#0057e7}66%{stroke:#008744}80%,90%{stroke:#ffa700}}
`],encapsulation:2,changeDetection:0})}return i})(),aO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var el=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(el||{}),rct="*";function Tn(i,n){return{type:el.Trigger,name:i,definitions:n,options:{}}}function li(i,n=null){return{type:el.Animate,styles:n,timings:i}}function oct(i,n=null){return{type:el.Sequence,steps:i,options:n}}function qt(i){return{type:el.Style,styles:i,offset:null}}function Yr(i,n,e){return{type:el.State,name:i,styles:n,options:e}}function ci(i,n,e=null){return{type:el.Transition,expr:i,animation:n,options:e}}function tl(i,n=null){return{type:el.Reference,animation:i,options:n}}function sct(i=null){return{type:el.AnimateChild,options:i}}function il(i,n=null){return{type:el.AnimateRef,animation:i,options:n}}function GV(i,n,e=null){return{type:el.Query,selector:i,animation:n,options:e}}function HV(i,n){return{type:el.Stagger,timings:i,animation:n}}var UV=class{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},jV=class{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,t=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++t==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(t=>{let r=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(r)})}getPosition(){let n=this.players.reduce((e,t)=>e===null||t.totalTime>e.totalTime?t:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},act="!";var Pw=(()=>{class i{pFocusTrapDisabled=!1;platformId=Je(ai);host=Je(Ze);document=Je(At);firstHiddenFocusableElement;lastHiddenFocusableElement;ngOnInit(){bt(this.platformId)&&!this.pFocusTrapDisabled&&!this.firstHiddenFocusableElement&&!this.lastHiddenFocusableElement&&this.createHiddenFocusableElements()}ngOnChanges(e){e.pFocusTrapDisabled&&bt(this.platformId)&&(e.pFocusTrapDisabled.currentValue?this.removeHiddenFocusableElements():this.createHiddenFocusableElements())}removeHiddenFocusableElements(){this.firstHiddenFocusableElement&&this.firstHiddenFocusableElement.parentNode&&this.firstHiddenFocusableElement.parentNode.removeChild(this.firstHiddenFocusableElement),this.lastHiddenFocusableElement&&this.lastHiddenFocusableElement.parentNode&&this.lastHiddenFocusableElement.parentNode.removeChild(this.lastHiddenFocusableElement)}getComputedSelector(e){return`:not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])${e??""}`}createHiddenFocusableElements(){let e="0",t=r=>j.createElement("span",{class:"p-hidden-accessible p-hidden-focusable",tabindex:e,role:"presentation","data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:r?.bind(this)});this.firstHiddenFocusableElement=t(this.onFirstHiddenElementFocus),this.lastHiddenFocusableElement=t(this.onLastHiddenElementFocus),this.firstHiddenFocusableElement.setAttribute("data-pc-section","firstfocusableelement"),this.lastHiddenFocusableElement.setAttribute("data-pc-section","lastfocusableelement"),this.host.nativeElement.prepend(this.firstHiddenFocusableElement),this.host.nativeElement.append(this.lastHiddenFocusableElement)}onFirstHiddenElementFocus(e){let{currentTarget:t,relatedTarget:r}=e,o=r===this.lastHiddenFocusableElement||!this.host.nativeElement?.contains(r)?j.getFirstFocusableElement(t.parentElement,":not(.p-hidden-focusable)"):this.lastHiddenFocusableElement;j.focus(o)}onLastHiddenElementFocus(e){let{currentTarget:t,relatedTarget:r}=e,o=r===this.firstHiddenFocusableElement||!this.host.nativeElement?.contains(r)?j.getLastFocusableElement(t.parentElement,":not(.p-hidden-focusable)"):this.firstHiddenFocusableElement;j.focus(o)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=Et({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],inputs:{pFocusTrapDisabled:[2,"pFocusTrapDisabled","pFocusTrapDisabled",Y]},features:[tt,Yi]})}return i})(),Dw=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var Ji=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["TimesIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var jf=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["WindowMaximizeIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14ZM9.77805 7.42192C9.89013 7.534 10.0415 7.59788 10.2 7.59995C10.3585 7.59788 10.5099 7.534 10.622 7.42192C10.7341 7.30985 10.798 7.15844 10.8 6.99995V3.94242C10.8066 3.90505 10.8096 3.86689 10.8089 3.82843C10.8079 3.77159 10.7988 3.7157 10.7824 3.6623C10.756 3.55552 10.701 3.45698 10.622 3.37798C10.5099 3.2659 10.3585 3.20202 10.2 3.19995H7.00002C6.84089 3.19995 6.68828 3.26317 6.57576 3.37569C6.46324 3.48821 6.40002 3.64082 6.40002 3.79995C6.40002 3.95908 6.46324 4.11169 6.57576 4.22422C6.68828 4.33674 6.84089 4.39995 7.00002 4.39995H8.80006L6.19997 7.00005C6.10158 7.11005 6.04718 7.25246 6.04718 7.40005C6.04718 7.54763 6.10158 7.69004 6.19997 7.80005C6.30202 7.91645 6.44561 7.98824 6.59997 8.00005C6.75432 7.98824 6.89791 7.91645 6.99997 7.80005L9.60002 5.26841V6.99995C9.6021 7.15844 9.66598 7.30985 9.77805 7.42192ZM1.4 14H3.8C4.17066 13.9979 4.52553 13.8498 4.78763 13.5877C5.04973 13.3256 5.1979 12.9707 5.2 12.6V10.2C5.1979 9.82939 5.04973 9.47452 4.78763 9.21242C4.52553 8.95032 4.17066 8.80215 3.8 8.80005H1.4C1.02934 8.80215 0.674468 8.95032 0.412371 9.21242C0.150274 9.47452 0.00210008 9.82939 0 10.2V12.6C0.00210008 12.9707 0.150274 13.3256 0.412371 13.5877C0.674468 13.8498 1.02934 13.9979 1.4 14ZM1.25858 10.0586C1.29609 10.0211 1.34696 10 1.4 10H3.8C3.85304 10 3.90391 10.0211 3.94142 10.0586C3.97893 10.0961 4 10.147 4 10.2V12.6C4 12.6531 3.97893 12.704 3.94142 12.7415C3.90391 12.779 3.85304 12.8 3.8 12.8H1.4C1.34696 12.8 1.29609 12.779 1.25858 12.7415C1.22107 12.704 1.2 12.6531 1.2 12.6V10.2C1.2 10.147 1.22107 10.0961 1.25858 10.0586Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var Gf=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["WindowMinimizeIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M11.8 0H2.2C1.61652 0 1.05694 0.231785 0.644365 0.644365C0.231785 1.05694 0 1.61652 0 2.2V7C0 7.15913 0.063214 7.31174 0.175736 7.42426C0.288258 7.53679 0.44087 7.6 0.6 7.6C0.75913 7.6 0.911742 7.53679 1.02426 7.42426C1.13679 7.31174 1.2 7.15913 1.2 7V2.2C1.2 1.93478 1.30536 1.68043 1.49289 1.49289C1.68043 1.30536 1.93478 1.2 2.2 1.2H11.8C12.0652 1.2 12.3196 1.30536 12.5071 1.49289C12.6946 1.68043 12.8 1.93478 12.8 2.2V11.8C12.8 12.0652 12.6946 12.3196 12.5071 12.5071C12.3196 12.6946 12.0652 12.8 11.8 12.8H7C6.84087 12.8 6.68826 12.8632 6.57574 12.9757C6.46321 13.0883 6.4 13.2409 6.4 13.4C6.4 13.5591 6.46321 13.7117 6.57574 13.8243C6.68826 13.9368 6.84087 14 7 14H11.8C12.3835 14 12.9431 13.7682 13.3556 13.3556C13.7682 12.9431 14 12.3835 14 11.8V2.2C14 1.61652 13.7682 1.05694 13.3556 0.644365C12.9431 0.231785 12.3835 0 11.8 0ZM6.368 7.952C6.44137 7.98326 6.52025 7.99958 6.6 8H9.8C9.95913 8 10.1117 7.93678 10.2243 7.82426C10.3368 7.71174 10.4 7.55913 10.4 7.4C10.4 7.24087 10.3368 7.08826 10.2243 6.97574C10.1117 6.86321 9.95913 6.8 9.8 6.8H8.048L10.624 4.224C10.73 4.11026 10.7877 3.95982 10.7849 3.80438C10.7822 3.64894 10.7192 3.50063 10.6093 3.3907C10.4994 3.28077 10.3511 3.2178 10.1956 3.21506C10.0402 3.21232 9.88974 3.27002 9.776 3.376L7.2 5.952V4.2C7.2 4.04087 7.13679 3.88826 7.02426 3.77574C6.91174 3.66321 6.75913 3.6 6.6 3.6C6.44087 3.6 6.28826 3.66321 6.17574 3.77574C6.06321 3.88826 6 4.04087 6 4.2V7.4C6.00042 7.47975 6.01674 7.55862 6.048 7.632C6.07656 7.70442 6.11971 7.7702 6.17475 7.82524C6.2298 7.88029 6.29558 7.92344 6.368 7.952ZM1.4 8.80005H3.8C4.17066 8.80215 4.52553 8.95032 4.78763 9.21242C5.04973 9.47452 5.1979 9.82939 5.2 10.2V12.6C5.1979 12.9707 5.04973 13.3256 4.78763 13.5877C4.52553 13.8498 4.17066 13.9979 3.8 14H1.4C1.02934 13.9979 0.674468 13.8498 0.412371 13.5877C0.150274 13.3256 0.00210008 12.9707 0 12.6V10.2C0.00210008 9.82939 0.150274 9.47452 0.412371 9.21242C0.674468 8.95032 1.02934 8.80215 1.4 8.80005ZM3.94142 12.7415C3.97893 12.704 4 12.6531 4 12.6V10.2C4 10.147 3.97893 10.0961 3.94142 10.0586C3.90391 10.0211 3.85304 10 3.8 10H1.4C1.34696 10 1.29609 10.0211 1.25858 10.0586C1.22107 10.0961 1.2 10.147 1.2 10.2V12.6C1.2 12.6531 1.22107 12.704 1.25858 12.7415C1.29609 12.779 1.34696 12.8 1.4 12.8H3.8C3.85304 12.8 3.90391 12.779 3.94142 12.7415Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var Zte=["titlebar"],eie=["content"],tie=["footer"],iie=["*",[["p-header"]],[["p-footer"]]],nie=["*","p-header","p-footer"],rie=(i,n,e,t,r,o,s,a,l,c)=>({"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":n,"p-dialog-left":e,"p-dialog-right":t,"p-dialog-top":r,"p-dialog-top-left":o,"p-dialog-top-right":s,"p-dialog-bottom":a,"p-dialog-bottom-left":l,"p-dialog-bottom-right":c}),oie=(i,n,e,t)=>({"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":n,"p-dialog-resizable":e,"p-dialog-maximized":t}),sie=(i,n)=>({transform:i,transition:n}),aie=i=>({value:"visible",params:i}),lie=()=>({"p-dialog-header-icon p-dialog-header-maximize p-link":!0}),cie=()=>({"p-dialog-header-icon p-dialog-header-close p-link":!0}),die=()=>({"min-width":0});function pie(i,n){i&1&&ue(0)}function uie(i,n){if(i&1&&(he(0),v(1,pie,1,0,"ng-container",10),fe()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.headlessTemplate)}}function hie(i,n){if(i&1){let e=L();m(0,"div",15),k("mousedown",function(r){y(e);let o=u(4);return w(o.initResize(r))}),g()}}function fie(i,n){if(i&1&&(m(0,"span",21),F(1),g()),i&2){let e=u(5);f("id",e.ariaLabelledBy),p(),$(e.header)}}function mie(i,n){if(i&1&&(m(0,"span",21),hi(1,1),g()),i&2){let e=u(5);f("id",e.ariaLabelledBy)}}function gie(i,n){i&1&&ue(0)}function _ie(i,n){if(i&1&&P(0,"span",25),i&2){let e=u(6);f("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function Cie(i,n){i&1&&P(0,"WindowMaximizeIcon",27),i&2&&f("styleClass","p-dialog-header-maximize-icon")}function Iie(i,n){i&1&&P(0,"WindowMinimizeIcon",27),i&2&&f("styleClass","p-dialog-header-maximize-icon")}function yie(i,n){if(i&1&&(he(0),v(1,Cie,1,1,"WindowMaximizeIcon",26)(2,Iie,1,1,"WindowMinimizeIcon",26),fe()),i&2){let e=u(6);p(),f("ngIf",!e.maximized&&!e.maximizeIconTemplate),p(),f("ngIf",e.maximized&&!e.minimizeIconTemplate)}}function wie(i,n){}function vie(i,n){i&1&&v(0,wie,0,0,"ng-template")}function bie(i,n){if(i&1&&(he(0),v(1,vie,1,0,null,10),fe()),i&2){let e=u(6);p(),f("ngTemplateOutlet",e.maximizeIconTemplate)}}function Sie(i,n){}function Eie(i,n){i&1&&v(0,Sie,0,0,"ng-template")}function Aie(i,n){if(i&1&&(he(0),v(1,Eie,1,0,null,10),fe()),i&2){let e=u(6);p(),f("ngTemplateOutlet",e.minimizeIconTemplate)}}function xie(i,n){if(i&1){let e=L();m(0,"button",22),k("click",function(){y(e);let r=u(5);return w(r.maximize())})("keydown.enter",function(){y(e);let r=u(5);return w(r.maximize())}),v(1,_ie,1,1,"span",23)(2,yie,3,2,"ng-container",24)(3,bie,2,1,"ng-container",24)(4,Aie,2,1,"ng-container",24),g()}if(i&2){let e=u(5);f("ngClass",Ae(7,lie)),G("tabindex",e.maximizable?"0":"-1")("aria-label",e.maximizeLabel),p(),f("ngIf",e.maximizeIcon&&!e.maximizeIconTemplate&&!e.minimizeIconTemplate),p(),f("ngIf",!e.maximizeIcon),p(),f("ngIf",!e.maximized),p(),f("ngIf",e.maximized)}}function Tie(i,n){if(i&1&&P(0,"span",30),i&2){let e=u(7);f("ngClass",e.closeIcon)}}function Oie(i,n){i&1&&P(0,"TimesIcon",27),i&2&&f("styleClass","p-dialog-header-close-icon")}function Rie(i,n){if(i&1&&(he(0),v(1,Tie,1,1,"span",29)(2,Oie,1,1,"TimesIcon",26),fe()),i&2){let e=u(6);p(),f("ngIf",e.closeIcon),p(),f("ngIf",!e.closeIcon)}}function Pie(i,n){}function Die(i,n){i&1&&v(0,Pie,0,0,"ng-template")}function Fie(i,n){if(i&1&&(m(0,"span"),v(1,Die,1,0,null,10),g()),i&2){let e=u(6);p(),f("ngTemplateOutlet",e.closeIconTemplate)}}function kie(i,n){if(i&1){let e=L();m(0,"button",28),k("click",function(r){y(e);let o=u(5);return w(o.close(r))})("keydown.enter",function(r){y(e);let o=u(5);return w(o.close(r))}),v(1,Rie,3,2,"ng-container",24)(2,Fie,2,1,"span",24),g()}if(i&2){let e=u(5);f("ngClass",Ae(6,cie))("ngStyle",Ae(7,die)),G("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),p(),f("ngIf",!e.closeIconTemplate),p(),f("ngIf",e.closeIconTemplate)}}function Nie(i,n){if(i&1){let e=L();m(0,"div",16,3),k("mousedown",function(r){y(e);let o=u(4);return w(o.initDrag(r))}),v(2,fie,2,2,"span",17)(3,mie,2,1,"span",17)(4,gie,1,0,"ng-container",10),m(5,"div",18),v(6,xie,5,8,"button",19)(7,kie,3,8,"button",20),g()()}if(i&2){let e=u(4);p(2),f("ngIf",!e.headerFacet&&!e.headerTemplate),p(),f("ngIf",e.headerFacet),p(),f("ngTemplateOutlet",e.headerTemplate),p(2),f("ngIf",e.maximizable),p(),f("ngIf",e.closable)}}function Lie(i,n){i&1&&ue(0)}function Mie(i,n){i&1&&ue(0)}function Vie(i,n){if(i&1&&(m(0,"div",31,4),hi(2,2),v(3,Mie,1,0,"ng-container",10),g()),i&2){let e=u(4);p(3),f("ngTemplateOutlet",e.footerTemplate)}}function Bie(i,n){if(i&1&&(v(0,hie,1,0,"div",11)(1,Nie,8,5,"div",12),m(2,"div",13,2),hi(4),v(5,Lie,1,0,"ng-container",10),g(),v(6,Vie,4,1,"div",14)),i&2){let e=u(3);f("ngIf",e.resizable),p(),f("ngIf",e.showHeader),p(),ce(e.contentStyleClass),f("ngClass","p-dialog-content")("ngStyle",e.contentStyle),p(3),f("ngTemplateOutlet",e.contentTemplate),p(),f("ngIf",e.footerFacet||e.footerTemplate)}}function Uie(i,n){if(i&1){let e=L();m(0,"div",8,0),k("@animation.start",function(r){y(e);let o=u(2);return w(o.onAnimationStart(r))})("@animation.done",function(r){y(e);let o=u(2);return w(o.onAnimationEnd(r))}),v(2,uie,2,1,"ng-container",9)(3,Bie,7,8,"ng-template",null,1,Bt),g()}if(i&2){let e=He(4),t=u(2);ce(t.styleClass),f("ngClass",xn(10,oie,t.rtl,t.draggable,t.resizable,t.maximized))("ngStyle",t.style)("pFocusTrapDisabled",t.focusTrap===!1)("@animation",ne(18,aie,Qe(15,sie,t.transformOptions,t.transitionOptions))),G("aria-labelledby",t.ariaLabelledBy)("aria-modal",!0),p(2),f("ngIf",t.headlessTemplate)("ngIfElse",e)}}function jie(i,n){if(i&1&&(m(0,"div",6),v(1,Uie,5,20,"div",7),g()),i&2){let e=u();ce(e.maskStyleClass),f("ngStyle",e.maskStyle)("ngClass",eh(5,rie,[e.modal,e.modal||e.blockScroll,e.position==="left",e.position==="right",e.position==="top",e.position==="topleft"||e.position==="top-left",e.position==="topright"||e.position==="top-right",e.position==="bottom",e.position==="bottomleft"||e.position==="bottom-left",e.position==="bottomright"||e.position==="bottom-right"])),p(),f("ngIf",e.visible)}}var Gie=tl([qt({transform:"{{transform}}",opacity:0}),li("{{transition}}")]),Hie=tl([li("{{transition}}",qt({transform:"{{transform}}",opacity:0}))]),Yt=(()=>{class i{document;platformId;el;renderer;zone;cd;config;header;draggable=!0;resizable=!0;get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}contentStyle;contentStyleClass;modal=!1;closeOnEscape=!0;dismissableMask=!1;rtl=!1;closable=!0;get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}appendTo;breakpoints;styleClass;maskStyleClass;maskStyle;showHeader=!0;get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}blockScroll=!1;autoZIndex=!0;baseZIndex=0;minX=0;minY=0;focusOnShow=!0;maximizable=!1;keepInViewport=!0;focusTrap=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";closeIcon;closeAriaLabel;closeTabindex="0";minimizeIcon;maximizeIcon;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=oe({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}onShow=new X;onHide=new X;visibleChange=new X;onResizeInit=new X;onResizeEnd=new X;onDragEnd=new X;onMaximize=new X;headerFacet;footerFacet;templates;headerViewChild;contentViewChild;footerViewChild;headerTemplate;contentTemplate;footerTemplate;maximizeIconTemplate;closeIconTemplate;minimizeIconTemplate;headlessTemplate;_visible=!1;maskVisible;container;wrapper;dragging;ariaLabelledBy=this.getAriaLabelledBy();documentDragListener;documentDragEndListener;resizing;documentResizeListener;documentResizeEndListener;documentEscapeListener;maskClickListener;lastPageX;lastPageY;preventVisibleChangePropagation;maximized;preMaximizeContentHeight;preMaximizeContainerWidth;preMaximizeContainerHeight;preMaximizePageX;preMaximizePageY;id=Tt();_style={};_position="center";originalStyle;transformOptions="scale(0.7)";styleElement;window;get maximizeLabel(){return this.config.getTranslation(Di.ARIA).maximizeLabel}constructor(e,t,r,o,s,a,l){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.zone=s,this.cd=a,this.config=l,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"maximizeicon":this.maximizeIconTemplate=e.template;break;case"minimizeicon":this.minimizeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnInit(){this.breakpoints&&this.createStyle()}getAriaLabelledBy(){return this.header!==null?Tt()+"_header":null}parseDurationToMilliseconds(e){let t=/([\d\.]+)(ms|s)\b/g,r=0,o;for(;(o=t.exec(e))!==null;){let s=parseFloat(o[1]),a=o[2];a==="ms"?r+=s:a==="s"&&(r+=s*1e3)}if(r!==0)return r}focus(e=this.contentViewChild?.nativeElement){let t=this.parseDurationToMilliseconds(this.transitionOptions),r=j.getFocusableElement(e,"[autofocus]");if(r){this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),t||5)});return}let o=j.getFocusableElement(e);o?this.zone.runOutsideAngular(()=>{setTimeout(()=>o.focus(),t||5)}):this.footerViewChild&&e!==this.footerViewChild.nativeElement&&this.focus(this.footerViewChild.nativeElement)}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&j.blockBodyScroll()}disableModality(){if(this.wrapper){this.dismissableMask&&this.unbindMaskClickListener();let e=document.querySelectorAll(".p-dialog-mask-scrollblocker");this.modal&&e&&e.length==1&&j.unblockBodyScroll(),this.cd.destroyed||this.cd.detectChanges()}}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?j.blockBodyScroll():j.unblockBodyScroll()),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(bi.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(bt(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",j.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let t in this.breakpoints)e+=`
                        @media screen and (max-width: ${t}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[t]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e)}}initDrag(e){j.hasClass(e.target,"p-dialog-header-icon")||j.hasClass(e.target,"p-dialog-header-close-icon")||j.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",j.addClass(this.document.body,"p-unselectable-text"))}onDrag(e){if(this.dragging){let t=j.getOuterWidth(this.container),r=j.getOuterHeight(this.container),o=e.pageX-this.lastPageX,s=e.pageY-this.lastPageY,a=this.container.getBoundingClientRect(),l=getComputedStyle(this.container),c=parseFloat(l.marginLeft),d=parseFloat(l.marginTop),h=a.left+o-c,_=a.top+s-d,C=j.getViewport();this.container.style.position="fixed",this.keepInViewport?(h>=this.minX&&h+t<C.width&&(this._style.left=`${h}px`,this.lastPageX=e.pageX,this.container.style.left=`${h}px`),_>=this.minY&&_+r<C.height&&(this._style.top=`${_}px`,this.lastPageY=e.pageY,this.container.style.top=`${_}px`)):(this.lastPageX=e.pageX,this.container.style.left=`${h}px`,this.lastPageY=e.pageY,this.container.style.top=`${_}px`)}}endDrag(e){this.dragging&&(this.dragging=!1,j.removeClass(this.document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,j.addClass(this.document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let t=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,o=j.getOuterWidth(this.container),s=j.getOuterHeight(this.container),a=j.getOuterHeight(this.contentViewChild?.nativeElement),l=o+t,c=s+r,d=this.container.style.minWidth,h=this.container.style.minHeight,_=this.container.getBoundingClientRect(),C=j.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(l+=t,c+=r),(!d||l>parseInt(d))&&_.left+l<C.width&&(this._style.width=l+"px",this.container.style.width=this._style.width),(!h||c>parseInt(h))&&_.top+c<C.height&&(this.contentViewChild.nativeElement.style.height=a+c-s+"px",this._style.height&&(this._style.height=c+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,j.removeClass(this.document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.documentDragListener||this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.window,"mousemove",this.onDrag.bind(this))})}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentDragEndListener(){this.documentDragEndListener||this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.window,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragEndListener=null)}bindDocumentResizeListeners(){!this.documentResizeListener&&!this.documentResizeEndListener&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.window,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.window,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",t=>{t.key=="Escape"&&this.close(t)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.wrapper):j.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.moveOnTop(),this.appendContainer(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&j.addClass(this.document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&j.addClass(this.wrapper,"p-component-overlay-leave");break}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({}),this.cd.markForCheck();break;case"visible":this.onShow.emit({});break}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(j.removeClass(this.document.body,"p-overflow-hidden"),this.document.body.style.removeProperty("--scrollbar-width"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&j.removeClass(this.document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&bi.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?oe({},this.originalStyle):{}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(Lt),S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-dialog"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,fc,5),ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.headerFacet=s.first),te(s=ie())&&(r.footerFacet=s.first),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Zte,5),le(eie,5),le(tie,5)),t&2){let o;te(o=ie())&&(r.headerViewChild=o.first),te(o=ie())&&(r.contentViewChild=o.first),te(o=ie())&&(r.footerViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:[2,"draggable","draggable",Y],resizable:[2,"resizable","resizable",Y],positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:[2,"modal","modal",Y],closeOnEscape:[2,"closeOnEscape","closeOnEscape",Y],dismissableMask:[2,"dismissableMask","dismissableMask",Y],rtl:[2,"rtl","rtl",Y],closable:[2,"closable","closable",Y],responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maskStyle:"maskStyle",showHeader:[2,"showHeader","showHeader",Y],breakpoint:"breakpoint",blockScroll:[2,"blockScroll","blockScroll",Y],autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],minX:[2,"minX","minX",We],minY:[2,"minY","minY",We],focusOnShow:[2,"focusOnShow","focusOnShow",Y],maximizable:[2,"maximizable","maximizable",Y],keepInViewport:[2,"keepInViewport","keepInViewport",Y],focusTrap:[2,"focusTrap","focusTrap",Y],transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},features:[tt],ngContentSelectors:nie,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["content",""],["titlebar",""],["footer",""],[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["class","p-resizable-handle",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["class","p-dialog-title",3,"id",4,"ngIf"],[1,"p-dialog-header-icons"],["role","button","type","button","pRipple","","pButton","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","","pButton","",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title",3,"id"],["role","button","type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass"],["class","p-dialog-header-maximize-icon",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],["type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass","ngStyle"],["class","p-dialog-header-close-icon",3,"ngClass",4,"ngIf"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"]],template:function(t,r){t&1&&($i(iie),v(0,jie,2,16,"div",5)),t&2&&f("ngIf",r.maskVisible)},dependencies:()=>[je,rt,mt,De,Pw,pt,nn,Ji,jf,Gf],styles:[`@layer primeng{.p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}}
`],encapsulation:2,data:{animation:[Tn("animation",[ci("void => visible",[il(Gie)]),ci("visible => void",[il(Hie)])])]},changeDetection:0})}return i})(),lO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Dw,ro,ln,Ji,jf,Gf,dt]})}return i})();var Wie=["*"],zie=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),Kie=(i,n)=>({value:i,params:n});function $ie(i,n){i&1&&ue(0)}function Jie(i,n){i&1&&P(0,"TimesIcon",8),i&2&&f("styleClass","p-overlaypanel-close-icon")}function qie(i,n){}function Yie(i,n){i&1&&v(0,qie,0,0,"ng-template")}function Xie(i,n){if(i&1&&(m(0,"span",9),v(1,Yie,1,0,null,3),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.closeIconTemplate)}}function Qie(i,n){if(i&1){let e=L();m(0,"button",5),k("click",function(r){y(e);let o=u(2);return w(o.onCloseClick(r))})("keydown.enter",function(){y(e);let r=u(2);return w(r.hide())}),v(1,Jie,1,1,"TimesIcon",6)(2,Xie,2,1,"span",7),g()}if(i&2){let e=u(2);G("aria-label",e.ariaCloseLabel),p(),f("ngIf",!e.closeIconTemplate),p(),f("ngIf",e.closeIconTemplate)}}function Zie(i,n){if(i&1){let e=L();m(0,"div",1),k("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))})("@animation.start",function(r){y(e);let o=u();return w(o.onAnimationStart(r))})("@animation.done",function(r){y(e);let o=u();return w(o.onAnimationEnd(r))}),m(1,"div",2),k("click",function(r){y(e);let o=u();return w(o.onContentClick(r))})("mousedown",function(r){y(e);let o=u();return w(o.onContentClick(r))}),hi(2),v(3,$ie,1,0,"ng-container",3),g(),v(4,Qie,3,3,"button",4),g()}if(i&2){let e=u();ce(e.styleClass),f("ngClass","p-overlaypanel p-component")("ngStyle",e.style)("@animation",Qe(13,Kie,e.overlayVisible?"open":"close",Qe(10,zie,e.showTransitionOptions,e.hideTransitionOptions))),G("aria-modal",e.overlayVisible)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy),p(3),f("ngTemplateOutlet",e.contentTemplate),p(),f("ngIf",e.showCloseIcon)}}var rh=(()=>{class i{document;platformId;el;renderer;cd;zone;config;overlayService;ariaLabel;ariaLabelledBy;dismissable=!0;showCloseIcon;style;styleClass;appendTo="body";autoZIndex=!0;ariaCloseLabel;baseZIndex=0;focusOnShow=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";onShow=new X;onHide=new X;templates;container;overlayVisible=!1;render=!1;isOverlayAnimationInProgress=!1;selfClick=!1;documentClickListener;target;willHide;scrollHandler;documentResizeListener;contentTemplate;closeIconTemplate;destroyCallback;overlayEventListener;overlaySubscription;constructor(e,t,r,o,s,a,l,c){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.cd=s,this.zone=a,this.config=l,this.overlayService=c}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}this.cd.markForCheck()})}bindDocumentClickListener(){if(bt(this.platformId)&&!this.documentClickListener&&this.dismissable){let e=j.isIOS()?"touchstart":"click",t=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(t,e,r=>{!this.container?.contains(r.target)&&this.target!==r.target&&!this.target.contains(r.target)&&!this.selfClick&&this.hide(),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null,this.selfClick=!1)}toggle(e,t){this.isOverlayAnimationInProgress||(this.overlayVisible?(this.hasTargetChanged(e,t)&&(this.destroyCallback=()=>{this.show(null,t||e.currentTarget||e.target)}),this.hide()):this.show(e,t))}show(e,t){t&&e&&e.stopPropagation(),!this.isOverlayAnimationInProgress&&(this.target=t||e.currentTarget||e.target,this.overlayVisible=!0,this.render=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}onContentClick(e){let t=e.target;this.selfClick=e.offsetX<t.clientWidth&&e.offsetY<t.clientHeight}hasTargetChanged(e,t){return this.target!=null&&this.target!==(t||e.currentTarget||e.target)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):j.appendChild(this.container,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}align(){this.autoZIndex&&bi.set("overlay",this.container,this.baseZIndex+this.config.zIndex.overlay),j.absolutePosition(this.container,this.target,!1);let e=j.getOffset(this.container),t=j.getOffset(this.target),r=this.document.defaultView?.getComputedStyle(this.container).getPropertyValue("border-radius"),o=0;e.left<t.left&&(o=t.left-e.left-parseFloat(r)*2),this.container?.style.setProperty("--overlayArrowLeft",`${o}px`),e.top<t.top&&(j.addClass(this.container,"p-overlaypanel-flipped"),this.showCloseIcon&&this.renderer.setStyle(this.container,"margin-top","-30px"))}onAnimationStart(e){e.toState==="open"&&(this.container=e.element,this.appendContainer(),this.align(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.focusOnShow&&this.focus(),this.overlayEventListener=t=>{this.container&&this.container.contains(t.target)&&(this.selfClick=!0)},this.overlaySubscription=this.overlayService.clickObservable.subscribe(this.overlayEventListener),this.onShow.emit(null)),this.isOverlayAnimationInProgress=!0}onAnimationEnd(e){switch(e.toState){case"void":this.destroyCallback&&(this.destroyCallback(),this.destroyCallback=null),this.overlaySubscription&&this.overlaySubscription.unsubscribe();break;case"close":this.autoZIndex&&bi.clear(this.container),this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.onContainerDestroy(),this.onHide.emit({}),this.render=!1;break}this.isOverlayAnimationInProgress=!1}focus(){let e=j.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onCloseClick(e){this.hide(),e.preventDefault()}onEscapeKeydown(e){this.hide()}onWindowResize(){this.overlayVisible&&!j.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){if(bt(this.platformId)&&!this.documentResizeListener){let e=this.document.defaultView;this.documentResizeListener=this.renderer.listen(e,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){bt(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new go(this.target,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener())}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onContainerDestroy(){this.cd.destroyed||(this.target=null),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&bi.clear(this.container),this.cd.destroyed||(this.target=null),this.destroyCallback=null,this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.overlaySubscription&&this.overlaySubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(we),S(Lt),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-overlayPanel"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],hostBindings:function(t,r){t&1&&k("keydown.escape",function(s){return r.onEscapeKeydown(s)},!1,HM)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",dismissable:[2,"dismissable","dismissable",Y],showCloseIcon:[2,"showCloseIcon","showCloseIcon",Y],style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:[2,"autoZIndex","autoZIndex",Y],ariaCloseLabel:"ariaCloseLabel",baseZIndex:[2,"baseZIndex","baseZIndex",We],focusOnShow:[2,"focusOnShow","focusOnShow",Y],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onShow:"onShow",onHide:"onHide"},features:[tt],ngContentSelectors:Wie,decls:1,vars:1,consts:[["role","dialog",3,"ngClass","ngStyle","class","click",4,"ngIf"],["role","dialog",3,"click","ngClass","ngStyle"],[1,"p-overlaypanel-content",3,"click","mousedown"],[4,"ngTemplateOutlet"],["type","button","class","p-overlaypanel-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],["type","button","pRipple","",1,"p-overlaypanel-close","p-link",3,"click","keydown.enter"],[3,"styleClass",4,"ngIf"],["class","p-overlaypanel-close-icon",4,"ngIf"],[3,"styleClass"],[1,"p-overlaypanel-close-icon"]],template:function(t,r){t&1&&($i(),v(0,Zie,5,16,"div",0)),t&2&&f("ngIf",r.render)},dependencies:()=>[je,rt,mt,De,nn,Ji],styles:[`@layer primeng{.p-overlaypanel{position:absolute;margin-top:10px;top:0;left:0}.p-overlaypanel-flipped{margin-top:0;margin-bottom:10px}.p-overlaypanel-close{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-overlaypanel:after,.p-overlaypanel:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-overlaypanel:after{border-width:8px;margin-left:-8px}.p-overlaypanel:before{border-width:10px;margin-left:-10px}.p-overlaypanel-shifted:after,.p-overlaypanel-shifted:before{left:auto;right:1.25em;margin-left:auto}.p-overlaypanel-flipped:after,.p-overlaypanel-flipped:before{bottom:auto;top:100%}.p-overlaypanel.p-overlaypanel-flipped:after{border-bottom-color:transparent}.p-overlaypanel.p-overlaypanel-flipped:before{border-bottom-color:transparent}}
`],encapsulation:2,data:{animation:[Tn("animation",[Yr("void",qt({transform:"scaleY(0.8)",opacity:0})),Yr("close",qt({opacity:0})),Yr("open",qt({transform:"translateY(0)",opacity:1})),ci("void => open",li("{{showTransitionParams}}")),ci("open => close",li("{{hideTransitionParams}}"))])]},changeDetection:0})}return i})(),cO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ln,dt,Ji,dt]})}return i})();var cn=(()=>{class i{platformId;el;zone;config;renderer;viewContainer;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:Tt()+"_tooltip"};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;documentEscapeListener;scrollHandler;resizeListener;interactionInProgress=!1;constructor(e,t,r,o,s,a){this.platformId=e,this.el=t,this.zone=r,this.config=o,this.renderer=s,this.viewContainer=a}ngAfterViewInit(){bt(this.platformId)&&this.zone.runOutsideAngular(()=>{let e=this.getOption("tooltipEvent");if((e==="hover"||e==="both")&&(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener)),e==="focus"||e==="both"){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let t=this.el.nativeElement.querySelector(".p-component");t||(t=this.getTarget(this.el.nativeElement)),t.addEventListener("focus",this.focusListener),t.addEventListener("blur",this.blurListener)}})}setAriaDescribedBy(){let e=this.getOption("id");e&&this.active&&this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",e)}removeAriaDescribedBy(){this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.content&&(this.setOption({tooltipLabel:e.content.currentValue}),this.active&&(e.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.autoHide&&this.setOption({autoHide:e.autoHide.currentValue}),e.id&&this.setOption({id:e.id.currentValue}),e.tooltipOptions&&(this._tooltipOptions=oe(oe({},this._tooltipOptions),e.tooltipOptions.currentValue),this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.isAutoHide()?this.deactivate():!(j.hasClass(e.relatedTarget,"p-tooltip")||j.hasClass(e.relatedTarget,"p-tooltip-text")||j.hasClass(e.relatedTarget,"p-tooltip-arrow"))&&this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onInputClick(e){this.deactivate()}activate(){if(!this.interactionInProgress){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}this.getOption("hideOnEscape")&&(this.documentEscapeListener=this.renderer.listen("document","keydown.escape",()=>{this.deactivate(),this.documentEscapeListener()}))}this.interactionInProgress=!0}deactivate(){this.interactionInProgress=!1,this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide(),this.documentEscapeListener&&this.documentEscapeListener()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")),this.container.setAttribute("role","tooltip");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),this.getOption("appendTo")==="body"?document.body.appendChild(this.container):this.getOption("appendTo")==="target"?j.appendChild(this.container,this.el.nativeElement):j.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener()),this.setAriaDescribedBy()}bindContainerMouseleaveListener(){if(!this.containerMouseleaveListener){let e=this.container??this.container.nativeElement;this.containerMouseleaveListener=this.renderer.listen(e,"mouseleave",t=>{this.deactivate()})}}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){if(!this.getOption("tooltipLabel")||this.getOption("disabled"))return;this.create(),this.el.nativeElement.closest("p-dialog")?setTimeout(()=>{this.container&&this.align()},100):this.align(),j.fadeIn(this.container,250),this.getOption("tooltipZIndex")==="auto"?bi.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener()}hide(){this.getOption("tooltipZIndex")==="auto"&&bi.clear(this.container),this.remove()}updateText(){let e=this.getOption("tooltipLabel");if(e instanceof Ca){let t=this.viewContainer.createEmbeddedView(e);t.detectChanges(),t.rootNodes.forEach(r=>this.tooltipText.appendChild(r))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(e))):this.tooltipText.innerHTML=e}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break}}getHostOffset(){if(this.getOption("appendTo")==="body"||this.getOption("appendTo")==="target"){let e=this.el.nativeElement.getBoundingClientRect(),t=e.left+j.getWindowScrollLeft(),r=e.top+j.getWindowScrollTop();return{left:t,top:r}}else return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.activeElement,t=this.getHostOffset(),r=t.left+j.getOuterWidth(e),o=t.top+(j.getOuterHeight(e)-j.getOuterHeight(this.container))/2;this.container.style.left=r+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}get activeElement(){return this.el.nativeElement.nodeName.includes("P-")?j.findSingle(this.el.nativeElement,".p-component")||this.el.nativeElement:this.el.nativeElement}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),t=e.left-j.getOuterWidth(this.container),r=e.top+(j.getOuterHeight(this.el.nativeElement)-j.getOuterHeight(this.container))/2;this.container.style.left=t+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),t=e.left+(j.getOuterWidth(this.el.nativeElement)-j.getOuterWidth(this.container))/2,r=e.top-j.getOuterHeight(this.container);this.container.style.left=t+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),t=e.left+(j.getOuterWidth(this.el.nativeElement)-j.getOuterWidth(this.container))/2,r=e.top+j.getOuterHeight(this.el.nativeElement);this.container.style.left=t+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions=oe(oe({},this._tooltipOptions),e)}getOption(e){return this._tooltipOptions[e]}getTarget(e){return j.hasClass(e,"p-inputwrapper")?j.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let t="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?t+" "+this.getOption("tooltipStyleClass"):t}isOutOfBounds(){let e=this.container.getBoundingClientRect(),t=e.top,r=e.left,o=j.getOuterWidth(this.container),s=j.getOuterHeight(this.container),a=j.getViewport();return r+o>a.width||r<0||t<0||t+s>a.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){let e=this.getOption("tooltipEvent");if((e==="hover"||e==="both")&&(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)),e==="focus"||e==="both"){let t=this.el.nativeElement.querySelector(".p-component");t||(t=this.getTarget(this.el.nativeElement))}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&(this.getOption("appendTo")==="body"?document.body.removeChild(this.container):this.getOption("appendTo")==="target"?this.el.nativeElement.removeChild(this.container):j.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.removeAriaDescribedBy(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&bi.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.documentEscapeListener&&this.documentEscapeListener()}static \u0275fac=function(t){return new(t||i)(S(ai),S(Ze),S(Lt),S(Ht),S(jt),S(Ro))};static \u0275dir=Et({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:[2,"escape","escape",Y],showDelay:[2,"showDelay","showDelay",We],hideDelay:[2,"hideDelay","hideDelay",We],life:[2,"life","life",We],positionTop:[2,"positionTop","positionTop",We],positionLeft:[2,"positionLeft","positionLeft",We],autoHide:[2,"autoHide","autoHide",Y],fitContent:[2,"fitContent","fitContent",Y],hideOnEscape:[2,"hideOnEscape","hideOnEscape",Y],content:[0,"pTooltip","content"],disabled:[0,"tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[tt,Yi]})}return i})(),oo=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var On=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["CheckIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var Hf=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ExclamationTriangleIcon"]],standalone:!0,features:[Se,Ct],decls:8,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z","fill","currentColor"],["d","M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z","fill","currentColor"],["d","M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1)(3,"path",2)(4,"path",3),g(),m(5,"defs")(6,"clipPath",4),P(7,"rect",5),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(5),f("id",r.pathId))},encapsulation:2})}return i})();var Wf=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["InfoCircleIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var nl=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["TimesCircleIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();function ene(i,n){i&1&&P(0,"CheckIcon",4),i&2&&f("styleClass","p-inline-message-icon")}function tne(i,n){i&1&&P(0,"InfoCircleIcon",4),i&2&&f("styleClass","p-inline-message-icon")}function ine(i,n){i&1&&P(0,"TimesCircleIcon",4),i&2&&f("styleClass","p-inline-message-icon")}function nne(i,n){i&1&&P(0,"ExclamationTriangleIcon",4),i&2&&f("styleClass","p-inline-message-icon")}function rne(i,n){if(i&1&&P(0,"span",6),i&2){let e=u(2);f("innerHTML",e.text,an)}}function one(i,n){if(i&1&&(m(0,"div"),v(1,rne,1,1,"span",5),g()),i&2){let e=u();p(),f("ngIf",!e.escape)}}function sne(i,n){if(i&1&&(m(0,"span",8),F(1),g()),i&2){let e=u(2);p(),$(e.text)}}function ane(i,n){if(i&1&&v(0,sne,2,1,"span",7),i&2){let e=u();f("ngIf",e.escape)}}var Fw=(()=>{class i{severity;text;escape=!0;style;styleClass;get icon(){return this.severity?this.severity:"info"}get containerClass(){return{[`p-inline-message-${this.severity}`]:this.severity,"p-inline-message-icon-only":this.text==null}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-message"]],hostAttrs:[1,"p-element"],inputs:{severity:"severity",text:"text",escape:[2,"escape","escape",Y],style:"style",styleClass:"styleClass"},features:[tt],decls:8,vars:10,consts:[["escapeOut",""],["aria-live","polite",1,"p-inline-message","p-component","p-inline-message",3,"ngStyle","ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"styleClass"],["class","p-inline-message-text",3,"innerHTML",4,"ngIf"],[1,"p-inline-message-text",3,"innerHTML"],["class","p-inline-message-text",4,"ngIf"],[1,"p-inline-message-text"]],template:function(t,r){if(t&1&&(m(0,"div",1),v(1,ene,1,1,"CheckIcon",2)(2,tne,1,1,"InfoCircleIcon",2)(3,ine,1,1,"TimesCircleIcon",2)(4,nne,1,1,"ExclamationTriangleIcon",2)(5,one,2,1,"div",3)(6,ane,1,1,"ng-template",null,0,Bt),g()),t&2){let o=He(7);ce(r.styleClass),f("ngStyle",r.style)("ngClass",r.containerClass),p(),f("ngIf",r.icon==="success"),p(),f("ngIf",r.icon==="info"),p(),f("ngIf",r.icon==="error"),p(),f("ngIf",r.icon==="warn"),p(),f("ngIf",!r.escape)("ngIfElse",o)}},dependencies:()=>[je,rt,De,On,Wf,nl,Hf],styles:[`@layer primeng{.p-inline-message{display:inline-flex;align-items:center;justify-content:center;vertical-align:top}.p-inline-message-icon-only .p-inline-message-text{visibility:hidden;width:0}.p-fluid .p-inline-message{display:flex}}
`],encapsulation:2,changeDetection:0})}return i})(),pO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,On,Wf,nl,Hf]})}return i})();var Qr=(()=>{class i{el;ngModel;control;cd;config;autoResize;variant="outlined";onResize=new X;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(e,t,r,o,s){this.el=e,this.ngModel=t,this.control=r,this.cd=o,this.config=s}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(Ze),S(mn,8),S(ss,8),S(we),S(Ht))};static \u0275dir=Et({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:6,hostBindings:function(t,r){t&1&&k("input",function(s){return r.onInput(s)}),t&2&&Dn("p-filled",r.filled)("p-inputtextarea-resizable",r.autoResize)("p-variant-filled",r.variant==="filled"||r.config.inputStyle()==="filled")},inputs:{autoResize:[2,"autoResize","autoResize",Y],variant:"variant"},outputs:{onResize:"onResize"},features:[tt]})}return i})(),uO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var zf=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ChevronLeftIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.61296 13C9.50997 13.0005 9.40792 12.9804 9.3128 12.9409C9.21767 12.9014 9.13139 12.8433 9.05902 12.7701L3.83313 7.54416C3.68634 7.39718 3.60388 7.19795 3.60388 6.99022C3.60388 6.78249 3.68634 6.58325 3.83313 6.43628L9.05902 1.21039C9.20762 1.07192 9.40416 0.996539 9.60724 1.00012C9.81032 1.00371 10.0041 1.08597 10.1477 1.22959C10.2913 1.37322 10.3736 1.56698 10.3772 1.77005C10.3808 1.97313 10.3054 2.16968 10.1669 2.31827L5.49496 6.99022L10.1669 11.6622C10.3137 11.8091 10.3962 12.0084 10.3962 12.2161C10.3962 12.4238 10.3137 12.6231 10.1669 12.7701C10.0945 12.8433 10.0083 12.9014 9.91313 12.9409C9.81801 12.9804 9.71596 13.0005 9.61296 13Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var rl=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ChevronRightIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var KV=["*"];function lne(i,n){i&1&&ue(0)}function cne(i,n){if(i&1&&(he(0),v(1,lne,1,0,"ng-container",3),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.contentTemplate)}}function dne(i,n){if(i&1&&(m(0,"div",1),hi(1),v(2,cne,2,1,"ng-container",2),g()),i&2){let e=u();f("hidden",!e.selected),G("id",e.tabView.getTabContentId(e.id))("aria-hidden",!e.selected)("aria-labelledby",e.tabView.getTabHeaderActionId(e.id))("data-pc-name","tabpanel"),p(2),f("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}var pne=["content"],une=["navbar"],hne=["prevBtn"],fne=["nextBtn"],mne=["inkbar"],gne=["elementToObserve"],_ne=i=>({"p-tabview p-component":!0,"p-tabview-scrollable":i}),Cne=(i,n)=>({"p-highlight":i,"p-disabled":n});function Ine(i,n){i&1&&P(0,"ChevronLeftIcon"),i&2&&G("aria-hidden",!0)}function yne(i,n){}function wne(i,n){i&1&&v(0,yne,0,0,"ng-template")}function vne(i,n){if(i&1){let e=L();m(0,"button",15,4),k("click",function(){y(e);let r=u();return w(r.navBackward())}),v(2,Ine,1,1,"ChevronLeftIcon",16)(3,wne,1,0,null,17),g()}if(i&2){let e=u();G("tabindex",e.tabindex)("aria-label",e.prevButtonAriaLabel),p(2),f("ngIf",!e.previousIconTemplate),p(),f("ngTemplateOutlet",e.previousIconTemplate)}}function bne(i,n){if(i&1&&P(0,"span",26),i&2){let e=u(3).$implicit;f("ngClass",e.leftIcon)}}function Sne(i,n){}function Ene(i,n){i&1&&v(0,Sne,0,0,"ng-template")}function Ane(i,n){if(i&1&&(m(0,"span",27),v(1,Ene,1,0,null,17),g()),i&2){let e=u(3).$implicit;p(),f("ngTemplateOutlet",e.leftIconTemplate)}}function xne(i,n){if(i&1&&P(0,"span",28),i&2){let e=u(3).$implicit;f("ngClass",e.rightIcon)}}function Tne(i,n){}function One(i,n){i&1&&v(0,Tne,0,0,"ng-template")}function Rne(i,n){if(i&1&&(m(0,"span",29),v(1,One,1,0,null,17),g()),i&2){let e=u(3).$implicit;p(),f("ngTemplateOutlet",e.rightIconTemplate)}}function Pne(i,n){if(i&1&&(he(0),v(1,bne,1,1,"span",21)(2,Ane,2,1,"span",22),m(3,"span",23),F(4),g(),v(5,xne,1,1,"span",24)(6,Rne,2,1,"span",25),fe()),i&2){let e=u(2).$implicit;p(),f("ngIf",e.leftIcon&&!e.leftIconTemplate),p(),f("ngIf",e.leftIconTemplate),p(2),$(e.header),p(),f("ngIf",e.rightIcon&&!e.rightIconTemplate),p(),f("ngIf",e.rightIconTemplate)}}function Dne(i,n){i&1&&ue(0)}function Fne(i,n){if(i&1){let e=L();m(0,"TimesIcon",32),k("click",function(r){y(e);let o=u(3).$implicit,s=u();return w(s.close(r,o))}),g()}i&2&&f("styleClass","p-tabview-close")}function kne(i,n){i&1&&P(0,"span",33)}function Nne(i,n){}function Lne(i,n){i&1&&v(0,Nne,0,0,"ng-template")}function Mne(i,n){if(i&1&&(he(0),v(1,Fne,1,1,"TimesIcon",30)(2,kne,1,0,"span",31)(3,Lne,1,0,null,17),fe()),i&2){let e=u(2).$implicit;p(),f("ngIf",!e.closeIconTemplate),p(),f("ngIf",e.closeIconTemplate),p(),f("ngTemplateOutlet",e.closeIconTemplate)}}function Vne(i,n){if(i&1){let e=L();m(0,"li",19)(1,"a",20),k("click",function(r){y(e);let o=u().$implicit,s=u();return w(s.open(r,o))})("keydown",function(r){y(e);let o=u().$implicit,s=u();return w(s.onTabKeyDown(r,o))}),v(2,Pne,7,5,"ng-container",16)(3,Dne,1,0,"ng-container",17)(4,Mne,4,3,"ng-container",16),g()()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u();ce(t.headerStyleClass),f("ngClass",Qe(19,Cne,t.selected,t.disabled))("ngStyle",t.headerStyle),G("data-p-disabled",t.disabled),p(),f("pTooltip",t.tooltip)("tooltipPosition",t.tooltipPosition)("positionStyle",t.tooltipPositionStyle)("tooltipStyleClass",t.tooltipStyleClass),G("id",o.getTabHeaderActionId(t.id))("aria-controls",o.getTabContentId(t.id))("aria-selected",t.selected)("tabindex",t.disabled||!t.selected?"-1":o.tabindex)("aria-disabled",t.disabled)("data-pc-index",r)("data-pc-section","headeraction"),p(),f("ngIf",!t.headerTemplate),p(),f("ngTemplateOutlet",t.headerTemplate),p(),f("ngIf",t.closable)}}function Bne(i,n){if(i&1&&v(0,Vne,5,22,"li",18),i&2){let e=n.$implicit;f("ngIf",!e.closed)}}function Une(i,n){i&1&&P(0,"ChevronRightIcon"),i&2&&G("aria-hidden",!0)}function jne(i,n){}function Gne(i,n){i&1&&v(0,jne,0,0,"ng-template")}function Hne(i,n){if(i&1){let e=L();m(0,"button",34,5),k("click",function(){y(e);let r=u();return w(r.navForward())}),v(2,Une,1,1,"ChevronRightIcon",16)(3,Gne,1,0,null,17),g()}if(i&2){let e=u();G("tabindex",e.tabindex)("aria-label",e.nextButtonAriaLabel),p(2),f("ngIf",!e.nextIconTemplate),p(),f("ngTemplateOutlet",e.nextIconTemplate)}}var hd=(()=>{class i{el;viewContainer;cd;closable=!1;get headerStyle(){return this._headerStyle}set headerStyle(e){this._headerStyle=e,this.tabView.cd.markForCheck()}get headerStyleClass(){return this._headerStyleClass}set headerStyleClass(e){this._headerStyleClass=e,this.tabView.cd.markForCheck()}cache=!0;tooltip;tooltipPosition="top";tooltipPositionStyle="absolute";tooltipStyleClass;get selected(){return!!this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return!!this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}templates;closed=!1;view=null;_headerStyle;_headerStyleClass;_selected;_disabled;_header;_leftIcon;_rightIcon=void 0;loaded=!1;id;contentTemplate;headerTemplate;leftIconTemplate;rightIconTemplate;closeIconTemplate;tabView;constructor(e,t,r,o){this.el=t,this.viewContainer=r,this.cd=o,this.tabView=e,this.id=Tt()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"righticon":this.rightIconTemplate=e.template;break;case"lefticon":this.leftIconTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnDestroy(){this.view=null}static \u0275fac=function(t){return new(t||i)(S(Zt(()=>fd)),S(Ze),S(Ro),S(we))};static \u0275cmp=se({type:i,selectors:[["p-tabPanel"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:[2,"closable","closable",Y],headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:[2,"cache","cache",Y],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},features:[tt],ngContentSelectors:KV,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&($i(),v(0,dne,3,6,"div",0)),t&2&&f("ngIf",!r.closed)},dependencies:[rt,mt],encapsulation:2})}return i})(),fd=(()=>{class i{platformId;el;cd;renderer;style;styleClass;controlClose;scrollable;get activeIndex(){return this._activeIndex}set activeIndex(e){if(this._activeIndex=e,this.preventActiveIndexPropagation){this.preventActiveIndexPropagation=!1;return}this.tabs&&this.tabs.length&&this._activeIndex!=null&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}selectOnFocus=!1;nextButtonAriaLabel;prevButtonAriaLabel;autoHideButtons=!0;tabindex=0;onChange=new X;onClose=new X;activeIndexChange=new X;content;navbar;prevBtn;nextBtn;inkbar;tabPanels;templates;initialized;tabs;_activeIndex;preventActiveIndexPropagation;tabChanged;backwardIsDisabled=!0;forwardIsDisabled=!1;tabChangesSubscription;nextIconTemplate;previousIconTemplate;resizeObserver;container;list;buttonVisible;elementToObserve;constructor(e,t,r,o){this.platformId=e,this.el=t,this.cd=r,this.renderer=o}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs(),this.refreshButtonState(),this.callResizeObserver()}),this.templates.forEach(e=>{switch(e.getType()){case"previousicon":this.previousIconTemplate=e.template;break;case"nexticon":this.nextIconTemplate=e.template;break}})}callResizeObserver(){bt(this.platformId)&&this.autoHideButtons&&this.bindResizeObserver()}ngAfterViewInit(){this.callResizeObserver()}bindResizeObserver(){this.container=j.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=j.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.resizeObserver=new ResizeObserver(()=>{this.list.offsetWidth>=this.container.offsetWidth?this.buttonVisible=!0:this.buttonVisible=!1,this.updateButtonState(),this.cd.detectChanges()}),this.resizeObserver.observe(this.container)}unbindResizeObserver(){this.resizeObserver.unobserve(this.elementToObserve.nativeElement),this.resizeObserver=null}ngAfterViewChecked(){bt(this.platformId)&&this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe(),this.resizeObserver&&this.unbindResizeObserver()}getTabHeaderActionId(e){return`${e}_header_action`}getTabContentId(e){return`${e}_content`}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(this.activeIndex!=null&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}onTabKeyDown(e,t){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onTabEndKey(e);break;case"PageUp":this.onTabHomeKey(e);break;case"Enter":case"Space":this.open(e,t);break;default:break}}onTabArrowLeftKey(e){let t=this.findPrevHeaderAction(e.target.parentElement),r=j.getAttribute(t,"data-pc-index");t?this.changeFocusedTab(e,t,r):this.onTabEndKey(e),e.preventDefault()}onTabArrowRightKey(e){let t=this.findNextHeaderAction(e.target.parentElement),r=j.getAttribute(t,"data-pc-index");t?this.changeFocusedTab(e,t,r):this.onTabHomeKey(e),e.preventDefault()}onTabHomeKey(e){let t=this.findFirstHeaderAction(),r=j.getAttribute(t,"data-pc-index");this.changeFocusedTab(e,t,r),e.preventDefault()}onTabEndKey(e){let t=this.findLastHeaderAction(),r=j.getAttribute(t,"data-pc-index");this.changeFocusedTab(e,t,r),e.preventDefault()}changeFocusedTab(e,t,r){if(t&&(j.focus(t),t.scrollIntoView({block:"nearest"}),this.selectOnFocus)){let o=this.tabs[r];this.open(e,o)}}findNextHeaderAction(e,t=!1){let r=t?e:e.nextElementSibling;return r?j.getAttribute(r,"data-p-disabled")||j.getAttribute(r,"data-pc-section")==="inkbar"?this.findNextHeaderAction(r):j.findSingle(r,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(e,t=!1){let r=t?e:e.previousElementSibling;return r?j.getAttribute(r,"data-p-disabled")||j.getAttribute(r,"data-pc-section")==="inkbar"?this.findPrevHeaderAction(r):j.findSingle(r,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){let e=this.navbar.nativeElement.firstElementChild;return this.findNextHeaderAction(e,!0)}findLastHeaderAction(){let e=this.navbar.nativeElement.lastElementChild,t=j.getAttribute(e,"data-pc-section")==="inkbar"?e.previousElementSibling:e;return this.findPrevHeaderAction(t,!0)}open(e,t){if(t.disabled){e&&e.preventDefault();return}if(!t.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,t.selected=!0;let o=this.findTabIndex(t);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(o),this.onChange.emit({originalEvent:e,index:o}),this.updateScrollBar(o)}e&&e.preventDefault()}close(e,t){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(t),close:()=>{this.closeTab(t)}}):(this.closeTab(t),this.onClose.emit({originalEvent:e,index:this.findTabIndex(t)}))}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let t=0;t<this.tabs.length;t++){let r=this.tabs[t];if(!r.closed&&!e.disabled&&r!=e){r.selected=!0;break}}}e.closed=!0,setTimeout(()=>{this.updateInkBar()})}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let t=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){t=r;break}return t}getBlockableElement(){return this.el.nativeElement.children[0]}updateInkBar(){if(bt(this.platformId)&&this.navbar){let e=j.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=j.getWidth(e)+"px",this.inkbar.nativeElement.style.left=j.getOffset(e).left-j.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){let t=this.navbar.nativeElement.children[e];t&&t.scrollIntoView({block:"nearest"})}updateButtonState(){let e=this.content.nativeElement,{scrollLeft:t,scrollWidth:r}=e,o=j.getWidth(e);this.backwardIsDisabled=t===0,this.forwardIsDisabled=Math.round(t)===r-o}refreshButtonState(){this.container=j.findSingle(this.el.nativeElement,'[data-pc-section="navcontent"]'),this.list=j.findSingle(this.el.nativeElement,'[data-pc-section="nav"]'),this.list.offsetWidth>=this.container.offsetWidth&&(this.list.offsetWidth>=this.container.offsetWidth?this.buttonVisible=!0:this.buttonVisible=!1,this.updateButtonState(),this.cd.markForCheck())}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,t)=>t?e+j.getWidth(t):e,0)}navBackward(){let e=this.content.nativeElement,t=j.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-t;e.scrollLeft=r<=0?0:r}navForward(){let e=this.content.nativeElement,t=j.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+t,o=e.scrollWidth-t;e.scrollLeft=r>=o?o:r}static \u0275fac=function(t){return new(t||i)(S(ai),S(Ze),S(we),S(jt))};static \u0275cmp=se({type:i,selectors:[["p-tabView"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,hd,4),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.tabPanels=s),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(pne,5),le(une,5),le(hne,5),le(fne,5),le(mne,5),le(gne,5)),t&2){let o;te(o=ie())&&(r.content=o.first),te(o=ie())&&(r.navbar=o.first),te(o=ie())&&(r.prevBtn=o.first),te(o=ie())&&(r.nextBtn=o.first),te(o=ie())&&(r.inkbar=o.first),te(o=ie())&&(r.elementToObserve=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",controlClose:[2,"controlClose","controlClose",Y],scrollable:[2,"scrollable","scrollable",Y],activeIndex:"activeIndex",selectOnFocus:[2,"selectOnFocus","selectOnFocus",Y],nextButtonAriaLabel:"nextButtonAriaLabel",prevButtonAriaLabel:"prevButtonAriaLabel",autoHideButtons:[2,"autoHideButtons","autoHideButtons",Y],tabindex:[2,"tabindex","tabindex",We]},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},features:[tt],ngContentSelectors:KV,decls:14,vars:13,consts:[["elementToObserve",""],["content",""],["navbar",""],["inkbar",""],["prevBtn",""],["nextBtn",""],[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["role","tablist",1,"p-tabview-nav"],["ngFor","",3,"ngForOf"],["role","presentation","aria-hidden","true",1,"p-tabview-ink-bar"],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],[4,"ngIf"],[4,"ngTemplateOutlet"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"click","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-left-icon",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],["class","p-tabview-right-icon",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-left-icon"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-right-icon"],[3,"styleClass","click",4,"ngIf"],["class","tab.closeIconTemplate",4,"ngIf"],[3,"click","styleClass"],[1,"tab.closeIconTemplate"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"]],template:function(t,r){if(t&1){let o=L();$i(),m(0,"div",6)(1,"div",7,0),v(3,vne,4,4,"button",8),m(4,"div",9,1),k("scroll",function(a){return y(o),w(r.onScroll(a))}),m(6,"ul",10,2),v(8,Bne,1,1,"ng-template",11),P(9,"li",12,3),g()(),v(11,Hne,4,4,"button",13),g(),m(12,"div",14),hi(13),g()()}t&2&&(ce(r.styleClass),f("ngClass",ne(11,_ne,r.scrollable))("ngStyle",r.style),G("data-pc-name","tabview"),p(3),f("ngIf",r.scrollable&&!r.backwardIsDisabled&&r.autoHideButtons),p(),G("data-pc-section","navcontent"),p(2),G("data-pc-section","nav"),p(2),f("ngForOf",r.tabs),p(),G("data-pc-section","inkbar"),p(2),f("ngIf",r.scrollable&&!r.forwardIsDisabled&&r.buttonVisible))},dependencies:()=>[je,hn,rt,mt,De,cn,nn,Ji,zf,rl],styles:[`@layer primeng{.p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:inline-flex;min-width:100%;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}}
`],encapsulation:2,changeDetection:0})}return i})(),hO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,oo,ln,Ji,zf,rl,dt]})}return i})();var Wne=["overlay"],zne=["content"],Kne=["*"],$ne=(i,n,e,t,r,o,s,a,l,c,d,h,_,C)=>({"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":i,"p-overlay-center":n,"p-overlay-top":e,"p-overlay-top-start":t,"p-overlay-top-end":r,"p-overlay-bottom":o,"p-overlay-bottom-start":s,"p-overlay-bottom-end":a,"p-overlay-left":l,"p-overlay-left-start":c,"p-overlay-left-end":d,"p-overlay-right":h,"p-overlay-right-start":_,"p-overlay-right-end":C}),Jne=(i,n,e)=>({showTransitionParams:i,hideTransitionParams:n,transform:e}),qne=i=>({value:"visible",params:i}),Yne=i=>({mode:i}),Xne=i=>({$implicit:i});function Qne(i,n){i&1&&ue(0)}function Zne(i,n){if(i&1){let e=L();m(0,"div",3,1),k("click",function(r){y(e);let o=u(2);return w(o.onOverlayContentClick(r))})("@overlayContentAnimation.start",function(r){y(e);let o=u(2);return w(o.onOverlayContentAnimationStart(r))})("@overlayContentAnimation.done",function(r){y(e);let o=u(2);return w(o.onOverlayContentAnimationDone(r))}),hi(2),v(3,Qne,1,0,"ng-container",4),g()}if(i&2){let e=u(2);ce(e.contentStyleClass),f("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",ne(11,qne,en(7,Jne,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),p(3),f("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ne(15,Xne,ne(13,Yne,e.overlayMode)))}}function ere(i,n){if(i&1){let e=L();m(0,"div",3,0),k("click",function(){y(e);let r=u();return w(r.onOverlayClick())}),v(2,Zne,4,17,"div",2),g()}if(i&2){let e=u();ce(e.styleClass),f("ngStyle",e.style)("ngClass",eh(5,$ne,[e.modal,e.modal&&e.overlayResponsiveDirection==="center",e.modal&&e.overlayResponsiveDirection==="top",e.modal&&e.overlayResponsiveDirection==="top-start",e.modal&&e.overlayResponsiveDirection==="top-end",e.modal&&e.overlayResponsiveDirection==="bottom",e.modal&&e.overlayResponsiveDirection==="bottom-start",e.modal&&e.overlayResponsiveDirection==="bottom-end",e.modal&&e.overlayResponsiveDirection==="left",e.modal&&e.overlayResponsiveDirection==="left-start",e.modal&&e.overlayResponsiveDirection==="left-end",e.modal&&e.overlayResponsiveDirection==="right",e.modal&&e.overlayResponsiveDirection==="right-start",e.modal&&e.overlayResponsiveDirection==="right-end"])),p(2),f("ngIf",e.visible)}}var tre={provide:fn,useExisting:Zt(()=>O_),multi:!0},ire=tl([qt({transform:"{{transform}}",opacity:0}),li("{{showTransitionParams}}")]),nre=tl([li("{{hideTransitionParams}}",qt({transform:"{{transform}}",opacity:0}))]),O_=(()=>{class i{document;platformId;el;renderer;config;overlayService;cd;zone;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return ge.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return ge.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return ge.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return ge.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){let e=this._target||this.overlayOptions?.target;return e===void 0?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){let e=this._autoZIndex||this.overlayOptions?.autoZIndex;return e===void 0?!0:e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){let e=this._baseZIndex||this.overlayOptions?.baseZIndex;return e===void 0?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){let e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return e===void 0?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){let e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return e===void 0?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}visibleChange=new X;onBeforeShow=new X;onShow=new X;onBeforeHide=new X;onHide=new X;onAnimationStart=new X;onAnimationDone=new X;templates;overlayViewChild;contentViewChild;contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if(bt(this.platformId))return this.mode==="modal"||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return oe(oe({},this.config?.overlayOptions),this.options)}get overlayResponsiveOptions(){return oe(oe({},this.overlayOptions?.responsive),this.responsive)}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return j.getTargetElement(this.target,this.el?.nativeElement)}constructor(e,t,r,o,s,a,l,c){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.config=s,this.overlayService=a,this.cd=l,this.zone=c,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}show(e,t=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),t&&j.focus(this.targetEl),this.modal&&j.addClass(this.document?.body,"p-overflow-hidden")}hide(e,t=!1){if(this.visible)this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),t&&j.focus(this.targetEl),this.modal&&j.removeClass(this.document?.body,"p-overflow-hidden");else return}alignOverlay(){!this.modal&&j.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&bi.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),j.appendOverlay(this.overlayEl,this.appendTo==="body"?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&j.addClass(this.overlayEl,"p-component-overlay-leave");break}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){let t=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.visible&&this.show(t,!0),this.bindListeners();break;case"void":if(!this.visible){this.hide(t,!0),this.modalVisible=!1,this.unbindListeners(),j.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),bi.clear(t),this.cd.markForCheck();break}}this.handleEvents("onAnimationDone",e)}handleEvents(e,t){this[e].emit(t),this.options&&this.options[e]&&this.options[e](t),this.config?.overlayOptions&&(this.config?.overlayOptions)[e]&&(this.config?.overlayOptions)[e](t)}bindListeners(){this.unbindListeners(),this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.targetEl,e=>{(this.listener?this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}):!0)&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{let r=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target)))&&!this.isOverlayContentClicked;(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:e.which!==3&&r}):r)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.window,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!j.isTouchDevice()}):!j.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.window,"keydown",e=>{if(this.overlayOptions.hideOnEscape===!1||e.code!=="Escape")return;(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!j.isTouchDevice()}):!j.isTouchDevice())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(j.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),bi.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(Ht),S(Uo),S(we),S(Lt))};static \u0275cmp=se({type:i,selectors:[["p-overlay"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Wne,5),le(zne,5)),t&2){let o;te(o=ie())&&(r.overlayViewChild=o.first),te(o=ie())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[et([tre])],ngContentSelectors:Kne,decls:1,vars:1,consts:[["overlay",""],["content",""],[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"click","ngStyle","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){t&1&&($i(),v(0,ere,3,20,"div",2)),t&2&&f("ngIf",r.modalVisible)},dependencies:[je,rt,mt,De],styles:[`@layer primeng{.p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}}
`],encapsulation:2,data:{animation:[Tn("overlayContentAnimation",[ci(":enter",[il(ire)]),ci(":leave",[il(nre)])])]},changeDetection:0})}return i})(),Kf=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,dt]})}return i})();var rre=["element"],ore=["content"],sre=["*"],are=(i,n,e)=>({"p-scroller":!0,"p-scroller-inline":i,"p-both-scroll":n,"p-horizontal-scroll":e}),fO=(i,n)=>({$implicit:i,options:n}),lre=i=>({"p-scroller-loading":i}),cre=i=>({"p-component-overlay":i}),dre=i=>({numCols:i}),JV=i=>({options:i}),pre=()=>({styleClass:"p-scroller-loading-icon"}),ure=(i,n)=>({rows:i,columns:n});function hre(i,n){i&1&&ue(0)}function fre(i,n){if(i&1&&(he(0),v(1,hre,1,0,"ng-container",10),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Qe(2,fO,e.loadedItems,e.getContentOptions()))}}function mre(i,n){i&1&&ue(0)}function gre(i,n){if(i&1&&(he(0),v(1,mre,1,0,"ng-container",10),fe()),i&2){let e=n.$implicit,t=n.index,r=u(3);p(),f("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Qe(2,fO,e,r.getOptions(t)))}}function _re(i,n){if(i&1&&(m(0,"div",11,3),v(2,gre,2,5,"ng-container",12),g()),i&2){let e=u(2);f("ngClass",ne(5,lre,e.d_loading))("ngStyle",e.contentStyle),G("data-pc-section","content"),p(2),f("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function Cre(i,n){if(i&1&&P(0,"div",13),i&2){let e=u(2);f("ngStyle",e.spacerStyle),G("data-pc-section","spacer")}}function Ire(i,n){i&1&&ue(0)}function yre(i,n){if(i&1&&(he(0),v(1,Ire,1,0,"ng-container",10),fe()),i&2){let e=n.index,t=u(4);p(),f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(4,JV,t.getLoaderOptions(e,t.both&&ne(2,dre,t._numItemsInViewport.cols))))}}function wre(i,n){if(i&1&&(he(0),v(1,yre,2,6,"ng-container",15),fe()),i&2){let e=u(3);p(),f("ngForOf",e.loaderArr)}}function vre(i,n){i&1&&ue(0)}function bre(i,n){if(i&1&&(he(0),v(1,vre,1,0,"ng-container",10),fe()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",ne(3,JV,Ae(2,pre)))}}function Sre(i,n){i&1&&P(0,"SpinnerIcon",16),i&2&&(f("styleClass","p-scroller-loading-icon pi-spin"),G("data-pc-section","loadingIcon"))}function Ere(i,n){if(i&1&&v(0,bre,2,5,"ng-container",6)(1,Sre,1,2,"ng-template",null,5,Bt),i&2){let e=He(2),t=u(3);f("ngIf",t.loaderIconTemplate)("ngIfElse",e)}}function Are(i,n){if(i&1&&(m(0,"div",14),v(1,wre,2,1,"ng-container",6)(2,Ere,3,2,"ng-template",null,4,Bt),g()),i&2){let e=He(3),t=u(2);f("ngClass",ne(4,cre,!t.loaderTemplate)),G("data-pc-section","loader"),p(),f("ngIf",t.loaderTemplate)("ngIfElse",e)}}function xre(i,n){if(i&1){let e=L();he(0),m(1,"div",7,1),k("scroll",function(r){y(e);let o=u();return w(o.onContainerScroll(r))}),v(3,fre,2,5,"ng-container",6)(4,_re,3,7,"ng-template",null,2,Bt)(6,Cre,1,2,"div",8)(7,Are,4,6,"div",9),g(),fe()}if(i&2){let e=He(5),t=u();p(),ce(t._styleClass),f("ngStyle",t._style)("ngClass",en(12,are,t.inline,t.both,t.horizontal)),G("id",t._id)("tabindex",t.tabindex)("data-pc-name","scroller")("data-pc-section","root"),p(2),f("ngIf",t.contentTemplate)("ngIfElse",e),p(3),f("ngIf",t._showSpacer),p(),f("ngIf",!t.loaderDisabled&&t._showLoader&&t.d_loading)}}function Tre(i,n){i&1&&ue(0)}function Ore(i,n){if(i&1&&(he(0),v(1,Tre,1,0,"ng-container",10),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Qe(5,fO,e.items,Qe(2,ure,e._items,e.loadedColumns)))}}function Rre(i,n){if(i&1&&(hi(0),v(1,Ore,2,8,"ng-container",17)),i&2){let e=u();p(),f("ngIf",e.contentTemplate)}}var Xs=(()=>{class i{document;platformId;renderer;cd;zone;get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&typeof e=="object"&&Object.entries(e).forEach(([t,r])=>this[`_${t}`]!==r&&(this[`_${t}`]=r))}onLazyLoad=new X;onScroll=new X;onScrollIndexChange=new X;elementViewChild;contentViewChild;templates;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;resizeObserver;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;get vertical(){return this._orientation==="vertical"}get horizontal(){return this._orientation==="horizontal"}get both(){return this._orientation==="both"}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}constructor(e,t,r,o,s){this.document=e,this.platformId=t,this.renderer=r,this.cd=o,this.zone=s}ngOnInit(){this.setInitialState()}ngOnChanges(e){let t=!1;if(e.loading){let{previousValue:r,currentValue:o}=e.loading;this.lazy&&r!==o&&o!==this.d_loading&&(this.d_loading=o,t=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){let{previousValue:r,currentValue:o}=e.numToleratedItems;r!==o&&o!==this.d_numToleratedItems&&(this.d_numToleratedItems=o)}if(e.options){let{previousValue:r,currentValue:o}=e.options;this.lazy&&r?.loading!==o?.loading&&o?.loading!==this.d_loading&&(this.d_loading=o.loading,t=!0),r?.numToleratedItems!==o?.numToleratedItems&&o?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=o.numToleratedItems)}this.initialized&&!t&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}ngAfterViewInit(){Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){bt(this.platformId)&&!this.initialized&&j.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.calculateAutoSize(),this.defaultWidth=j.getWidth(this.elementViewChild?.nativeElement),this.defaultHeight=j.getHeight(this.elementViewChild?.nativeElement),this.defaultContentWidth=j.getWidth(this.contentEl),this.defaultContentHeight=j.getHeight(this.contentEl),this.resizeObserver=new ResizeObserver(()=>this.onResize()),this.resizeObserver.observe(this.elementViewChild?.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||j.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this._step||1))}isPageChanged(e){return this._step?this.page!==this.getPageByFirst(e??this.first):!0}scrollTo(e){this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,t="auto"){if(this.both?e.every(o=>o>-1):e>-1){let o=this.first,{scrollTop:s=0,scrollLeft:a=0}=this.elementViewChild?.nativeElement,{numToleratedItems:l}=this.calculateNumItems(),c=this.getContentPosition(),d=this.itemSize,h=(R=0,T)=>R<=T?0:R,_=(R,T,A)=>R*T+A,C=(R=0,T=0)=>this.scrollTo({left:R,top:T,behavior:t}),I=this.both?{rows:0,cols:0}:0,b=!1,E=!1;this.both?(I={rows:h(e[0],l[0]),cols:h(e[1],l[1])},C(_(I.cols,d[1],c.left),_(I.rows,d[0],c.top)),E=this.lastScrollPos.top!==s||this.lastScrollPos.left!==a,b=I.rows!==o.rows||I.cols!==o.cols):(I=h(e,l),this.horizontal?C(_(I,d,c.left),s):C(a,_(I,d,c.top)),E=this.lastScrollPos!==(this.horizontal?a:s),b=I!==o),this.isRangeChanged=b,E&&(this.first=I)}}scrollInView(e,t,r="auto"){if(t){let{first:o,viewport:s}=this.getRenderedRange(),a=(d=0,h=0)=>this.scrollTo({left:d,top:h,behavior:r}),l=t==="to-start",c=t==="to-end";if(l){if(this.both)s.first.rows-o.rows>e[0]?a(s.first.cols*this._itemSize[1],(s.first.rows-1)*this._itemSize[0]):s.first.cols-o.cols>e[1]&&a((s.first.cols-1)*this._itemSize[1],s.first.rows*this._itemSize[0]);else if(s.first-o>e){let d=(s.first-1)*this._itemSize;this.horizontal?a(d,0):a(0,d)}}else if(c){if(this.both)s.last.rows-o.rows<=e[0]+1?a(s.first.cols*this._itemSize[1],(s.first.rows+1)*this._itemSize[0]):s.last.cols-o.cols<=e[1]+1&&a((s.first.cols+1)*this._itemSize[1],s.first.rows*this._itemSize[0]);else if(s.last-o<=e+1){let d=(s.first+1)*this._itemSize;this.horizontal?a(d,0):a(0,d)}}}else this.scrollToIndex(e,r)}getRenderedRange(){let e=(o,s)=>s||o?Math.floor(o/(s||o)):0,t=this.first,r=0;if(this.elementViewChild?.nativeElement){let{scrollTop:o,scrollLeft:s}=this.elementViewChild.nativeElement;if(this.both)t={rows:e(o,this._itemSize[0]),cols:e(s,this._itemSize[1])},r={rows:t.rows+this.numItemsInViewport.rows,cols:t.cols+this.numItemsInViewport.cols};else{let a=this.horizontal?s:o;t=e(a,this._itemSize),r=t+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:t,last:r}}}calculateNumItems(){let e=this.getContentPosition(),t=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0)||0,r=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0)||0,o=(c,d)=>d||c?Math.ceil(c/(d||c)):0,s=c=>Math.ceil(c/2),a=this.both?{rows:o(r,this._itemSize[0]),cols:o(t,this._itemSize[1])}:o(this.horizontal?t:r,this._itemSize),l=this.d_numToleratedItems||(this.both?[s(a.rows),s(a.cols)]:s(a));return{numItemsInViewport:a,numToleratedItems:l}}calculateOptions(){let{numItemsInViewport:e,numToleratedItems:t}=this.calculateNumItems(),r=(a,l,c,d=!1)=>this.getLast(a+l+(a<c?2:3)*c,d),o=this.first,s=this.both?{rows:r(this.first.rows,e.rows,t[0]),cols:r(this.first.cols,e.cols,t[1],!0)}:r(this.first,e,t);this.last=s,this.numItemsInViewport=e,this.d_numToleratedItems=t,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:o.cols}:0:o,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";let[e,t]=[j.getWidth(this.contentEl),j.getHeight(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),t!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");let[r,o]=[j.getWidth(this.elementViewChild.nativeElement),j.getHeight(this.elementViewChild.nativeElement)];this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain="",this.defaultWidth=r,this.defaultHeight=o,this.defaultContentWidth=e,this.defaultContentHeight=t,(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=r<this.defaultWidth?r+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=o<this.defaultHeight?o+"px":this._scrollHeight||this.defaultHeight+"px")}})}getLast(e=0,t=!1){return this._items?Math.min(t?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){let e=getComputedStyle(this.contentEl),t=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),r=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),o=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),s=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:t,right:r,top:o,bottom:s,x:t+r,y:o+s}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){let e=this.elementViewChild.nativeElement.parentElement.parentElement,t=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,o=(s,a)=>this.elementViewChild.nativeElement.style[s]=a;this.both||this.horizontal?(o("height",r),o("width",t)):o("height",r)}}setSpacerSize(){if(this._items){let e=(r,o,s)=>this.spacerStyle=ke(oe({},this.spacerStyle),{[`${r}`]:o*s+"px"}),t=this._items.length;this.both?(e("height",t,this._itemSize[0]),e("width",this._columns?.length||this._items[1]?.length,this._itemSize[1])):this.horizontal?e("width",this._columns?.length||this._items.length,this._itemSize):e("height",t,this._itemSize)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){let t=e?e.first:this.first,r=(s,a)=>s*a,o=(s=0,a=0)=>this.contentStyle=ke(oe({},this.contentStyle),{transform:`translate3d(${s}px, ${a}px, 0)`});if(this.both)o(r(t.cols,this._itemSize[1]),r(t.rows,this._itemSize[0]));else{let s=r(t,this._itemSize);this.horizontal?o(s,0):o(0,s)}}}onScrollPositionChange(e){let t=e.target,r=this.getContentPosition(),o=(E,R)=>E?E>R?E-R:E:0,s=(E,R)=>R||E?Math.floor(E/(R||E)):0,a=(E,R,T,A,U,z)=>E<=U?U:z?T-A-U:R+U-1,l=(E,R,T,A,U,z,ee)=>E<=z?0:Math.max(0,ee?E<R?T:E-z:E>R?T:E-2*z),c=(E,R,T,A,U,z=!1)=>{let ee=R+A+2*U;return E>=U&&(ee+=U+1),this.getLast(ee,z)},d=o(t.scrollTop,r.top),h=o(t.scrollLeft,r.left),_=this.both?{rows:0,cols:0}:0,C=this.last,I=!1,b=this.lastScrollPos;if(this.both){let E=this.lastScrollPos.top<=d,R=this.lastScrollPos.left<=h;if(!this._appendOnly||this._appendOnly&&(E||R)){let T={rows:s(d,this._itemSize[0]),cols:s(h,this._itemSize[1])},A={rows:a(T.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],E),cols:a(T.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],R)};_={rows:l(T.rows,A.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],E),cols:l(T.cols,A.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],R)},C={rows:c(T.rows,_.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:c(T.cols,_.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},I=_.rows!==this.first.rows||C.rows!==this.last.rows||_.cols!==this.first.cols||C.cols!==this.last.cols||this.isRangeChanged,b={top:d,left:h}}}else{let E=this.horizontal?h:d,R=this.lastScrollPos<=E;if(!this._appendOnly||this._appendOnly&&R){let T=s(E,this._itemSize),A=a(T,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,R);_=l(T,A,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,R),C=c(T,_,this.last,this.numItemsInViewport,this.d_numToleratedItems),I=_!==this.first||C!==this.last||this.isRangeChanged,b=E}}return{first:_,last:C,isRangeChanged:I,scrollPos:b}}onScrollChange(e){let{first:t,last:r,isRangeChanged:o,scrollPos:s}=this.onScrollPositionChange(e);if(o){let a={first:t,last:r};if(this.setContentPosition(a),this.first=t,this.last=r,this.lastScrollPos=s,this.handleEvents("onScrollIndexChange",a),this._lazy&&this.isPageChanged(t)){let l={first:this._step?Math.min(this.getPageByFirst(t)*this._step,this.items.length-this._step):t,last:Math.min(this._step?(this.getPageByFirst(t)+1)*this._step:r,this.items.length)};(this.lazyLoadState.first!==l.first||this.lazyLoadState.last!==l.last)&&this.handleEvents("onLazyLoad",l),this.lazyLoadState=l}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged()){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){let{isRangeChanged:t}=this.onScrollPositionChange(e);(t||(this._step?this.isPageChanged():!1))&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||this._loading===void 0)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}unbindResizeListener(){this.resizeObserver&&(this.resizeObserver.unobserve(this.elementViewChild?.nativeElement),this.resizeObserver=null)}onResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(j.isVisible(this.elementViewChild?.nativeElement)){let[e,t]=[j.getWidth(this.elementViewChild?.nativeElement),j.getHeight(this.elementViewChild?.nativeElement)],[r,o]=[e!==this.defaultWidth,t!==this.defaultHeight];(this.both?r||o:this.horizontal?r:this.vertical?o:!1)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.init(),this.calculateAutoSize()})}},this._resizeDelay)}handleEvents(e,t){return this.options&&this.options[e]?this.options[e](t):this[e].emit(t)}getContentOptions(){return{contentStyleClass:`p-scroller-content ${this.d_loading?"p-scroller-loading":""}`,items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,t)=>this.getLoaderOptions(e,t),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){let t=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:t,first:r===0,last:r===t-1,even:r%2===0,odd:r%2!==0}}getLoaderOptions(e,t){let r=this.loaderArr.length;return oe({index:e,count:r,first:e===0,last:e===r-1,even:e%2===0,odd:e%2!==0},t)}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(we),S(Lt))};static \u0275cmp=se({type:i,selectors:[["p-scroller"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(rre,5),le(ore,5)),t&2){let o;te(o=ie())&&(r.elementViewChild=o.first),te(o=ie())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[Yi],ngContentSelectors:sre,decls:3,vars:2,consts:[["disabledContainer",""],["element",""],["buildInContent",""],["content",""],["buildInLoader",""],["buildInLoaderIcon",""],[4,"ngIf","ngIfElse"],[3,"scroll","ngStyle","ngClass"],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"styleClass"],[4,"ngIf"]],template:function(t,r){if(t&1&&($i(),v(0,xre,8,16,"ng-container",6)(1,Rre,2,1,"ng-template",null,0,Bt)),t&2){let o=He(2);f("ngIf",!r._disabled)("ngIfElse",o)}},dependencies:()=>[je,hn,rt,mt,De,Us],styles:[`@layer primeng{p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{scale:2}.p-scroller-inline .p-scroller-content{position:static}}
`],encapsulation:2})}return i})(),so=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,Us,dt]})}return i})();var mO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["BlankIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:0,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg","v-bind","pti()"],["width","1","height","1","fill","currentColor","fill-opacity","0"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"rect",1),g())},encapsulation:2})}return i})();var Ho=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ChevronDownIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var ol=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["SearchIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var R_=i=>({height:i}),Pre=(i,n,e)=>({"p-dropdown-item":!0,"p-highlight":i,"p-disabled":n,"p-focus":e}),gO=i=>({$implicit:i});function Dre(i,n){i&1&&P(0,"CheckIcon",4),i&2&&f("styleClass","p-dropdown-check-icon")}function Fre(i,n){i&1&&P(0,"BlankIcon",4),i&2&&f("styleClass","p-dropdown-blank-icon")}function kre(i,n){if(i&1&&(he(0),v(1,Dre,1,1,"CheckIcon",3)(2,Fre,1,1,"BlankIcon",3),fe()),i&2){let e=u();p(),f("ngIf",e.selected),p(),f("ngIf",!e.selected)}}function Nre(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e,t=u();p(),$((e=t.label)!==null&&e!==void 0?e:"empty")}}function Lre(i,n){i&1&&ue(0)}var Mre=["container"],Vre=["filter"],Bre=["focusInput"],Ure=["editableInput"],jre=["items"],Gre=["scroller"],Hre=["overlay"],Wre=["firstHiddenFocusableEl"],zre=["lastHiddenFocusableEl"],Kre=i=>({"max-height":i}),qV=i=>({options:i}),$re=i=>({"p-variant-filled":i}),YV=(i,n)=>({$implicit:i,options:n}),Jre=()=>({});function qre(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(2);p(),$(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Yre(i,n){if(i&1&&ue(0,25),i&2){let e=u(2);f("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",ne(2,gO,e.selectedOption))}}function Xre(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(3);p(),$(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Qre(i,n){if(i&1&&v(0,Xre,2,1,"span",18),i&2){let e=u(2);f("ngIf",e.isSelectedOptionEmpty())}}function Zre(i,n){if(i&1){let e=L();m(0,"span",23,3),k("focus",function(r){y(e);let o=u();return w(o.onInputFocus(r))})("blur",function(r){y(e);let o=u();return w(o.onInputBlur(r))})("keydown",function(r){y(e);let o=u();return w(o.onKeyDown(r))}),v(2,qre,2,1,"ng-container",20)(3,Yre,1,4,"ng-container",24)(4,Qre,1,1,"ng-template",null,4,Bt),g()}if(i&2){let e,t=He(5),r=u();f("ngClass",r.inputClass)("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass)("autofocus",r.autofocus),G("aria-disabled",r.disabled)("id",r.inputId)("aria-label",r.ariaLabel||(r.label()==="p-emptylabel"?void 0:r.label()))("aria-labelledby",r.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(e=r.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",r.overlayVisible?r.id+"_list":null)("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("aria-required",r.required)("required",r.required),p(2),f("ngIf",!r.selectedItemTemplate)("ngIfElse",t),p(),f("ngIf",r.selectedItemTemplate&&!r.isSelectedOptionEmpty())}}function eoe(i,n){if(i&1){let e=L();m(0,"input",26,5),k("input",function(r){y(e);let o=u();return w(o.onEditableInput(r))})("keydown",function(r){y(e);let o=u();return w(o.onKeyDown(r))})("focus",function(r){y(e);let o=u();return w(o.onInputFocus(r))})("blur",function(r){y(e);let o=u();return w(o.onInputBlur(r))}),g()}if(i&2){let e=u();f("ngClass",e.inputClass)("disabled",e.disabled)("autofocus",e.autofocus),G("id",e.inputId)("maxlength",e.maxlength)("placeholder",e.modelValue()===void 0||e.modelValue()===null?e.placeholder():void 0)("aria-label",e.ariaLabel||(e.label()==="p-emptylabel"?void 0:e.label()))("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function toe(i,n){if(i&1){let e=L();m(0,"TimesIcon",29),k("click",function(r){y(e);let o=u(2);return w(o.clear(r))}),g()}i&2&&(f("styleClass","p-dropdown-clear-icon"),G("data-pc-section","clearicon"))}function ioe(i,n){}function noe(i,n){i&1&&v(0,ioe,0,0,"ng-template")}function roe(i,n){if(i&1){let e=L();m(0,"span",30),k("click",function(r){y(e);let o=u(2);return w(o.clear(r))}),v(1,noe,1,0,null,31),g()}if(i&2){let e=u(2);G("data-pc-section","clearicon"),p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function ooe(i,n){if(i&1&&(he(0),v(1,toe,1,2,"TimesIcon",27)(2,roe,2,2,"span",28),fe()),i&2){let e=u();p(),f("ngIf",!e.clearIconTemplate),p(),f("ngIf",e.clearIconTemplate)}}function soe(i,n){i&1&&ue(0)}function aoe(i,n){if(i&1&&(he(0),v(1,soe,1,0,"ng-container",31),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function loe(i,n){if(i&1&&P(0,"span",34),i&2){let e=u(3);f("ngClass","p-dropdown-trigger-icon pi-spin "+e.loadingIcon)}}function coe(i,n){i&1&&P(0,"span",35),i&2&&ce("p-dropdown-trigger-icon pi pi-spinner pi-spin")}function doe(i,n){if(i&1&&(he(0),v(1,loe,1,1,"span",32)(2,coe,1,2,"span",33),fe()),i&2){let e=u(2);p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function poe(i,n){if(i&1&&(he(0),v(1,aoe,2,1,"ng-container",18)(2,doe,3,2,"ng-container",18),fe()),i&2){let e=u();p(),f("ngIf",e.loadingIconTemplate),p(),f("ngIf",!e.loadingIconTemplate)}}function uoe(i,n){if(i&1&&P(0,"span",39),i&2){let e=u(3);f("ngClass",e.dropdownIcon)}}function hoe(i,n){i&1&&P(0,"ChevronDownIcon",40),i&2&&f("styleClass","p-dropdown-trigger-icon")}function foe(i,n){if(i&1&&(he(0),v(1,uoe,1,1,"span",37)(2,hoe,1,1,"ChevronDownIcon",38),fe()),i&2){let e=u(2);p(),f("ngIf",e.dropdownIcon),p(),f("ngIf",!e.dropdownIcon)}}function moe(i,n){}function goe(i,n){i&1&&v(0,moe,0,0,"ng-template")}function _oe(i,n){if(i&1&&(m(0,"span",41),v(1,goe,1,0,null,31),g()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.dropdownIconTemplate)}}function Coe(i,n){if(i&1&&v(0,foe,3,2,"ng-container",18)(1,_oe,2,1,"span",36),i&2){let e=u();f("ngIf",!e.dropdownIconTemplate),p(),f("ngIf",e.dropdownIconTemplate)}}function Ioe(i,n){i&1&&ue(0)}function yoe(i,n){i&1&&ue(0)}function woe(i,n){if(i&1&&(he(0),v(1,yoe,1,0,"ng-container",48),fe()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",ne(2,qV,e.filterOptions))}}function voe(i,n){i&1&&P(0,"SearchIcon",40),i&2&&f("styleClass","p-dropdown-filter-icon")}function boe(i,n){}function Soe(i,n){i&1&&v(0,boe,0,0,"ng-template")}function Eoe(i,n){if(i&1&&(m(0,"span",52),v(1,Soe,1,0,null,31),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.filterIconTemplate)}}function Aoe(i,n){if(i&1){let e=L();m(0,"div",49)(1,"input",50,10),k("input",function(r){y(e);let o=u(3);return w(o.onFilterInputChange(r))})("keydown",function(r){y(e);let o=u(3);return w(o.onFilterKeyDown(r))})("blur",function(r){y(e);let o=u(3);return w(o.onFilterBlur(r))}),g(),v(3,voe,1,1,"SearchIcon",38)(4,Eoe,2,1,"span",51),g()}if(i&2){let e=u(3);p(),f("value",e._filterValue()||"")("ngClass",ne(8,$re,e.variant==="filled"||e.config.inputStyle()==="filled")),G("placeholder",e.filterPlaceholder)("aria-owns",e.id+"_list")("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.focusedOptionId),p(2),f("ngIf",!e.filterIconTemplate),p(),f("ngIf",e.filterIconTemplate)}}function xoe(i,n){if(i&1){let e=L();m(0,"div",47),k("click",function(r){return y(e),w(r.stopPropagation())}),v(1,woe,2,4,"ng-container",20)(2,Aoe,5,10,"ng-template",null,9,Bt),g()}if(i&2){let e=He(3),t=u(2);p(),f("ngIf",t.filterTemplate)("ngIfElse",e)}}function Toe(i,n){i&1&&ue(0)}function Ooe(i,n){if(i&1&&v(0,Toe,1,0,"ng-container",48),i&2){let e=n.$implicit,t=n.options;u(2);let r=He(9);f("ngTemplateOutlet",r)("ngTemplateOutletContext",Qe(2,YV,e,t))}}function Roe(i,n){i&1&&ue(0)}function Poe(i,n){if(i&1&&v(0,Roe,1,0,"ng-container",48),i&2){let e=n.options,t=u(4);f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(2,qV,e))}}function Doe(i,n){i&1&&(he(0),v(1,Poe,1,4,"ng-template",54),fe())}function Foe(i,n){if(i&1){let e=L();m(0,"p-scroller",53,11),k("onLazyLoad",function(r){y(e);let o=u(2);return w(o.onLazyLoad.emit(r))}),v(2,Ooe,1,5,"ng-template",22)(3,Doe,2,0,"ng-container",18),g()}if(i&2){let e=u(2);st(ne(8,R_,e.scrollHeight)),f("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),p(3),f("ngIf",e.loaderTemplate)}}function koe(i,n){i&1&&ue(0)}function Noe(i,n){if(i&1&&(he(0),v(1,koe,1,0,"ng-container",48),fe()),i&2){u();let e=He(9),t=u();p(),f("ngTemplateOutlet",e)("ngTemplateOutletContext",Qe(3,YV,t.visibleOptions(),Ae(2,Jre)))}}function Loe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2).$implicit,t=u(3);p(),$(t.getOptionGroupLabel(e.optionGroup))}}function Moe(i,n){i&1&&ue(0)}function Voe(i,n){if(i&1&&(he(0),m(1,"li",58),v(2,Loe,2,1,"span",18)(3,Moe,1,0,"ng-container",48),g(),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u(2);p(),f("ngStyle",ne(5,R_,o.itemSize+"px")),G("id",s.id+"_"+s.getOptionIndex(r,o)),p(),f("ngIf",!s.groupTemplate),p(),f("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",ne(7,gO,t.optionGroup))}}function Boe(i,n){if(i&1){let e=L();he(0),m(1,"p-dropdownItem",59),k("onClick",function(r){y(e);let o=u().$implicit,s=u(3);return w(s.onOptionSelect(r,o))})("onMouseEnter",function(r){y(e);let o=u().index,s=u().options,a=u(2);return w(a.onOptionMouseEnter(r,a.getOptionIndex(o,s)))}),g(),fe()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u(2);p(),f("id",s.id+"_"+s.getOptionIndex(r,o))("option",t)("checkmark",s.checkmark)("selected",s.isSelected(t))("label",s.getOptionLabel(t))("disabled",s.isOptionDisabled(t))("template",s.itemTemplate)("focused",s.focusedOptionIndex()===s.getOptionIndex(r,o))("ariaPosInset",s.getAriaPosInset(s.getOptionIndex(r,o)))("ariaSetSize",s.ariaSetSize)}}function Uoe(i,n){if(i&1&&v(0,Voe,4,9,"ng-container",18)(1,Boe,2,10,"ng-container",18),i&2){let e=n.$implicit,t=u(3);f("ngIf",t.isOptionGroup(e)),p(),f("ngIf",!t.isOptionGroup(e))}}function joe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(4);p(),J(" ",e.emptyFilterMessageLabel," ")}}function Goe(i,n){i&1&&ue(0,null,13)}function Hoe(i,n){if(i&1&&(m(0,"li",60),v(1,joe,2,1,"ng-container",20)(2,Goe,2,0,"ng-container",31),g()),i&2){let e=u().options,t=u(2);f("ngStyle",ne(4,R_,e.itemSize+"px")),p(),f("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),p(),f("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function Woe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(4);p(),J(" ",e.emptyMessageLabel," ")}}function zoe(i,n){i&1&&ue(0,null,14)}function Koe(i,n){if(i&1&&(m(0,"li",60),v(1,Woe,2,1,"ng-container",20)(2,zoe,2,0,"ng-container",31),g()),i&2){let e=u().options,t=u(2);f("ngStyle",ne(4,R_,e.itemSize+"px")),p(),f("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),p(),f("ngTemplateOutlet",t.emptyTemplate)}}function $oe(i,n){if(i&1&&(m(0,"ul",55,12),v(2,Uoe,2,2,"ng-template",56)(3,Hoe,3,6,"li",57)(4,Koe,3,6,"li",57),g()),i&2){let e=n.$implicit,t=n.options,r=u(2);f("ngClass",t.contentStyleClass)("ngStyle",t.contentStyle),G("id",r.id+"_list")("aria-label",r.listLabel),p(2),f("ngForOf",e),p(),f("ngIf",r.filterValue&&r.isEmpty()),p(),f("ngIf",!r.filterValue&&r.isEmpty())}}function Joe(i,n){i&1&&ue(0)}function qoe(i,n){if(i&1){let e=L();m(0,"div",42)(1,"span",43,6),k("focus",function(r){y(e);let o=u();return w(o.onFirstHiddenFocus(r))}),g(),v(3,Ioe,1,0,"ng-container",31)(4,xoe,4,2,"div",44),m(5,"div",45),v(6,Foe,4,10,"p-scroller",46)(7,Noe,2,6,"ng-container",18)(8,$oe,5,7,"ng-template",null,7,Bt),g(),v(10,Joe,1,0,"ng-container",31),m(11,"span",43,8),k("focus",function(r){y(e);let o=u();return w(o.onLastHiddenFocus(r))}),g()()}if(i&2){let e=u();ce(e.panelStyleClass),f("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),p(),G("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),p(2),f("ngTemplateOutlet",e.headerTemplate),p(),f("ngIf",e.filter),p(),f("ngStyle",ne(16,Kre,e.virtualScroll?"auto":e.scrollHeight||"auto")),p(),f("ngIf",e.virtualScroll),p(),f("ngIf",!e.virtualScroll),p(3),f("ngTemplateOutlet",e.footerTemplate),p(),G("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var Yoe={provide:fn,useExisting:Zt(()=>mr),multi:!0},Xoe=(()=>{class i{id;option;selected;focused;label;disabled;visible;itemSize;ariaPosInset;ariaSetSize;template;checkmark;onClick=new X;onMouseEnter=new X;ngOnInit(){}onOptionClick(e){this.onClick.emit(e)}onOptionMouseEnter(e){this.onMouseEnter.emit(e)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[2,"selected","selected",Y],focused:[2,"focused","focused",Y],label:"label",disabled:[2,"disabled","disabled",Y],visible:[2,"visible","visible",Y],itemSize:[2,"itemSize","itemSize",We],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkmark:[2,"checkmark","checkmark",Y]},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[tt],decls:4,vars:22,consts:[["role","option","pRipple","",3,"click","mouseenter","id","ngStyle","ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],[3,"styleClass"]],template:function(t,r){t&1&&(m(0,"li",0),k("click",function(s){return r.onOptionClick(s)})("mouseenter",function(s){return r.onOptionMouseEnter(s)}),v(1,kre,3,2,"ng-container",1)(2,Nre,2,1,"span",1)(3,Lre,1,0,"ng-container",2),g()),t&2&&(f("id",r.id)("ngStyle",ne(14,R_,r.itemSize+"px"))("ngClass",en(16,Pre,r.selected,r.disabled,r.focused)),G("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled),p(),f("ngIf",r.checkmark),p(),f("ngIf",!r.template),p(),f("ngTemplateOutlet",r.template)("ngTemplateOutletContext",ne(20,gO,r.option)))},dependencies:()=>[je,rt,mt,De,nn,mO,On],encapsulation:2})}return i})(),mr=(()=>{class i{el;renderer;cd;zone;filterService;config;id;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}loadingIcon;filterPlaceholder;filterLocale;variant="outlined";inputId;dataKey;filterBy;filterFields;autofocus;resetFilterOnHide=!1;checkmark=!1;dropdownIcon;loading=!1;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;focusOnHover=!1;selectOnFocus=!1;autoOptionFocus=!0;autofocusFilter=!0;autoShowPanelOnPrintableCharacterKeyDown=!0;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue()}set filterValue(e){setTimeout(()=>{this._filterValue.set(e)})}get options(){return this._options()}set options(e){ge.deepEquals(e,this._options())||this._options.set(e)}onChange=new X;onFilter=new X;onFocus=new X;onBlur=new X;onClick=new X;onShow=new X;onHide=new X;onClear=new X;onLazyLoad=new X;containerViewChild;filterViewChild;focusInputViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;templates;_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;loadingIconTemplate;clearIconTemplate;filterIconTemplate;filterOptions;_options=Gi(null);_placeholder=Gi(void 0);modelValue=Gi(null);value;onModelChange=()=>{};onModelTouched=()=>{};hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue=Gi(null);searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;focusedOptionIndex=Gi(-1);labelId;listId;clicked=Gi(!1);get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Di.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Di.EMPTY_FILTER_MESSAGE)}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled}get listLabel(){return this.config.getTranslation(Di.ARIA).listLabel}get containerClass(){return{"p-dropdown p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-dropdown-clearable":this.showClear&&!this.disabled,"p-focus":this.focused,"p-inputwrapper-filled":this.modelValue()!==void 0&&this.modelValue()!==null&&!this.modelValue().length,"p-inputwrapper-focus":this.focused||this.overlayVisible,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled","p-dropdown-open":this.overlayVisible}}get inputClass(){let e=this.label();return{"p-dropdown-label p-inputtext":!0,"p-placeholder":this.placeholder()&&e===this.placeholder(),"p-dropdown-label-empty":!this.editable&&!this.selectedItemTemplate&&(e==null||e==="p-emptylabel"||e.length===0)}}get panelClass(){return{"p-dropdown-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}visibleOptions=Gr(()=>{let e=this.getAllVisibleAndNonVisibleOptions();if(this._filterValue()){let r=!(this.filterBy||this.optionLabel)&&!this.filterFields&&!this.optionValue?this.options.filter(o=>o.label?o.label.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1:o.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1):this.filterService.filter(e,this.searchFields(),this._filterValue().trim(),this.filterMatchMode,this.filterLocale);if(this.group){let o=this.options||[],s=[];return o.forEach(a=>{let c=this.getOptionGroupChildren(a).filter(d=>r.includes(d));c.length>0&&s.push(ke(oe({},a),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...c]}))}),this.flatOptions(s)}return r}return e});label=Gr(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),t=e.findIndex(r=>this.isOptionValueEqualsModelValue(r));return t!==-1?this.getOptionLabel(e[t]):this.placeholder()||"p-emptylabel"});filled=Gr(()=>{if(typeof this.modelValue()=="string")return!!this.modelValue();let t=this.getAllVisibleAndNonVisibleOptions().findIndex(r=>this.isOptionValueEqualsModelValue(r))!==-1;return this.label()!=="p-emptylabel"&&t});selectedOption;editableInputValue=Gr(()=>this.getOptionLabel(this.selectedOption)||this.modelValue()||"");constructor(e,t,r,o,s,a){this.el=e,this.renderer=t,this.cd=r,this.zone=o,this.filterService=s,this.config=a,od(()=>{let l=this.modelValue(),c=this.visibleOptions();if(c&&ge.isNotEmpty(c)){let d=this.findSelectedOptionIndex();(d!==-1||l===void 0||typeof l=="string"&&l.length===0||this.isModelValueNotSet()||this.editable)&&(this.selectedOption=c[d])}ge.isEmpty(c)&&(l===void 0||this.isModelValueNotSet())&&ge.isNotEmpty(this.selectedOption)&&(this.selectedOption=null),l!==void 0&&this.editable&&this.updateEditableLabel(),this.cd.markForCheck()})}isModelValueNotSet(){return this.modelValue()===null&&!this.isOptionValueEqualsModelValue(this.selectedOption)}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}ngOnInit(){this.id=this.id||Tt(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=j.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-highlight");e&&j.scrollInView(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}flatOptions(e){return(e||[]).reduce((t,r,o)=>{t.push({optionGroup:r,group:!0,index:o});let s=this.getOptionGroupChildren(r);return s&&s.forEach(a=>t.push(a)),t},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex()),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)),this.autoDisplayFirst&&(this.modelValue()===null||this.modelValue()===void 0)&&!this.placeholder()){let e=this.findFirstOptionIndex();this.onOptionSelect(null,this.visibleOptions()[e],!1,!0)}}onOptionSelect(e,t,r=!0,o=!1){if(!this.isSelected(t)){let s=this.getOptionValue(t);this.updateModel(s,e),this.focusedOptionIndex.set(this.findSelectedOptionIndex()),o===!1&&this.onChange.emit({originalEvent:e,value:s})}r&&this.hide(!0)}onOptionMouseEnter(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)}updateModel(e,t){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.selectedOptionUpdated=!0}writeValue(e,t=!0){this.filter&&this.resetFilter(),this.value=e,t&&this.allowModelChange()&&this.onModelChange(e),this.modelValue.set(this.value),this.updateEditableLabel(),this.cd.markForCheck()}allowModelChange(){return this.autoDisplayFirst&&!this.placeholder()&&(this.modelValue()===void 0||this.modelValue()===null)&&!this.editable&&this.options&&this.options.length}isSelectedOptionEmpty(){return ge.isEmpty(this.selectedOption)}isSelected(e){return this.isValidOption(e)&&this.isOptionValueEqualsModelValue(e)}isOptionValueEqualsModelValue(e){return ge.equals(this.modelValue(),this.getOptionValue(e),this.equalityKey())}ngAfterViewInit(){this.editable&&this.updateEditableLabel(),this.updatePlaceHolderForFloatingLabel()}updatePlaceHolderForFloatingLabel(){if(this._placeholder()!==null&&this._placeholder()!==void 0)return;let e=this.el.nativeElement.parentElement,t=e?.classList.contains("p-float-label");if(e&&t&&!this.selectedOption){let r=e.querySelector("label");r&&this._placeholder.set(r.textContent)}}updateEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value=this.getOptionLabel(this.selectedOption)||this.modelValue()||"")}clearEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value="")}getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t.getItemOptions(e).index}getOptionLabel(e){return this.optionLabel!==void 0&&this.optionLabel!==null?ge.resolveFieldData(e,this.optionLabel):e&&e.label!==void 0?e.label:e}getOptionValue(e){return this.optionValue&&this.optionValue!==null?ge.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}isOptionDisabled(e){return this.getOptionValue(this.modelValue())===this.getOptionValue(e)||this.getOptionLabel(this.modelValue()===this.getOptionLabel(e))&&e.disabled===!1?!1:this.optionDisabled?ge.resolveFieldData(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}getOptionGroupLabel(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null?ge.resolveFieldData(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren!==void 0&&this.optionGroupChildren!==null?ge.resolveFieldData(e,this.optionGroupChildren):e.items}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}resetFilter(){this._filterValue.set(null),this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onContainerClick(e){this.disabled||this.readonly||this.loading||(this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),!(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]'))&&((!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.onClick.emit(e),this.clicked.set(!0),this.cd.detectChanges()))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}onEditableInput(e){let t=e.target.value;this.searchValue="",!this.searchOptions(e,t)&&this.focusedOptionIndex.set(-1),this.onModelChange(t),this.updateModel(t,e),setTimeout(()=>{this.onChange.emit({originalEvent:e,value:t})},1),!this.overlayVisible&&ge.isNotEmpty(t)&&this.show()}show(e){this.overlayVisible=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex();this.focusedOptionIndex.set(t),e&&j.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"){if(this.itemsWrapper=j.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){let t=this.modelValue()?this.focusedOptionIndex():-1;t!==-1&&this.scroller?.scrollToIndex(t)}else{let t=j.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");t&&t.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&!this.editable&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}e.toState==="void"&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.clicked.set(!1),this.searchValue="",this.overlayOptions?.mode==="modal"&&j.unblockBodyScroll(),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&(this.focusInputViewChild&&setTimeout(()=>{j.focus(this.focusInputViewChild?.nativeElement)}),this.editable&&this.editableInputViewChild&&setTimeout(()=>{j.focus(this.editableInputViewChild?.nativeElement)})),this.cd.markForCheck()}onInputFocus(e){if(this.disabled)return;this.focused=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onMouseDown(e){e.preventDefault()}onKeyDown(e,t){if(!(this.disabled||this.readonly||this.loading)){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Delete":this.onDeleteKey(e);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,t);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!e.metaKey&&ge.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.autoShowPanelOnPrintableCharacterKeyDown&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked.set(!1)}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e,!0);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onArrowDownKey(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{let t=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,t)}e.preventDefault(),e.stopPropagation()}changeFocusedOptionIndex(e,t){if(this.focusedOptionIndex()!==t&&(this.focusedOptionIndex.set(t),this.scrollInView(),this.selectOnFocus)){let r=this.visibleOptions()[t];this.onOptionSelect(e,r,!1)}}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let r=j.findSingle(this.itemsViewChild.nativeElement,`li[id="${t}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}hasSelectedOption(){return this.modelValue()!==void 0}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}equalityKey(){return this.optionValue?null:this.dataKey}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let t=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return t>-1?t+e+1:e}findPrevOptionIndex(e){let t=e>0?ge.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return t>-1?t:e}findLastOptionIndex(){return ge.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}isValidOption(e){return e!=null&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionGroup(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null&&e.optionGroup!==void 0&&e.optionGroup!==null&&e.group}onArrowUpKey(e,t=!1){if(e.altKey&&!t){if(this.focusedOptionIndex()!==-1){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide()}else{let r=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show()}e.preventDefault(),e.stopPropagation()}onArrowLeftKey(e,t=!1){t&&this.focusedOptionIndex.set(-1)}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onHomeKey(e,t=!1){if(t){let r=e.currentTarget;e.shiftKey?r.setSelectionRange(0,r.value.length):(r.setSelectionRange(0,0),this.focusedOptionIndex.set(-1))}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onEndKey(e,t=!1){if(t){let r=e.currentTarget;if(e.shiftKey)r.setSelectionRange(0,r.value.length);else{let o=r.value.length;r.setSelectionRange(o,o),this.focusedOptionIndex.set(-1)}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onSpaceKey(e,t=!1){!this.editable&&!t&&this.onEnterKey(e)}onEnterKey(e,t=!1){if(!this.overlayVisible)this.focusedOptionIndex.set(-1),this.onArrowDownKey(e);else{if(this.focusedOptionIndex()!==-1){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}!t&&this.hide()}e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onTabKey(e,t=!1){if(!t)if(this.overlayVisible&&this.hasFocusableElements())j.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault();else{if(this.focusedOptionIndex()!==-1&&this.overlayVisible){let r=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,r)}this.overlayVisible&&this.hide(this.filter)}e.stopPropagation()}onFirstHiddenFocus(e){let t=e.relatedTarget===this.focusInputViewChild?.nativeElement?j.getFirstFocusableElement(this.overlayViewChild.el?.nativeElement,":not(.p-hidden-focusable)"):this.focusInputViewChild?.nativeElement;j.focus(t)}onLastHiddenFocus(e){let t=e.relatedTarget===this.focusInputViewChild?.nativeElement?j.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;j.focus(t)}hasFocusableElements(){return j.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"]):not([class="p-dropdown-items-wrapper"])').length>0}onBackspaceKey(e,t=!1){t&&!this.overlayVisible&&this.show()}searchFields(){return this.filterBy?.split(",")||this.filterFields||[this.optionLabel]}searchOptions(e,t){this.searchValue=(this.searchValue||"")+t;let r=-1,o=!1;return this.focusedOptionIndex()!==-1?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)),r=r===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(s=>this.isOptionMatched(s)),r!==-1&&(o=!0),r===-1&&this.focusedOptionIndex()===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}onFilterInputChange(e){let t=e.target.value;this._filterValue.set(t),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()}),this.cd.markForCheck()}applyFocus(){this.editable?j.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():j.focus(this.focusInputViewChild?.nativeElement)}focus(){this.applyFocus()}clear(e){this.updateModel(null,e),this.clearEditableLabel(),this.onModelTouched(),this.onChange.emit({originalEvent:e,value:this.value}),this.onClear.emit(e),this.resetFilter()}static \u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(we),S(Lt),S(hc),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-dropdown"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Mre,5),le(Vre,5),le(Bre,5),le(Ure,5),le(jre,5),le(Gre,5),le(Hre,5),le(Wre,5),le(zre,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.filterViewChild=o.first),te(o=ie())&&(r.focusInputViewChild=o.first),te(o=ie())&&(r.editableInputViewChild=o.first),te(o=ie())&&(r.itemsViewChild=o.first),te(o=ie())&&(r.scroller=o.first),te(o=ie())&&(r.overlayViewChild=o.first),te(o=ie())&&(r.firstHiddenFocusableElementOnOverlay=o.first),te(o=ie())&&(r.lastHiddenFocusableElementOnOverlay=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-filled",r.filled())("p-inputwrapper-focus",r.focused||r.overlayVisible)},inputs:{id:"id",scrollHeight:"scrollHeight",filter:[2,"filter","filter",Y],name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:[2,"readonly","readonly",Y],required:[2,"required","required",Y],editable:[2,"editable","editable",Y],appendTo:"appendTo",tabindex:[2,"tabindex","tabindex",We],placeholder:"placeholder",loadingIcon:"loadingIcon",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",variant:"variant",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",filterFields:"filterFields",autofocus:[2,"autofocus","autofocus",Y],resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",Y],checkmark:[2,"checkmark","checkmark",Y],dropdownIcon:"dropdownIcon",loading:[2,"loading","loading",Y],optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:[2,"autoDisplayFirst","autoDisplayFirst",Y],group:[2,"group","group",Y],showClear:[2,"showClear","showClear",Y],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:[2,"lazy","lazy",Y],virtualScroll:[2,"virtualScroll","virtualScroll",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:[2,"maxlength","maxlength",We],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",focusOnHover:[2,"focusOnHover","focusOnHover",Y],selectOnFocus:[2,"selectOnFocus","selectOnFocus",Y],autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",Y],autofocusFilter:[2,"autofocusFilter","autofocusFilter",Y],autoShowPanelOnPrintableCharacterKeyDown:[2,"autoShowPanelOnPrintableCharacterKeyDown","autoShowPanelOnPrintableCharacterKeyDown",Y],disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[et([Yoe]),tt],decls:12,vars:20,consts:[["container",""],["elseBlock",""],["overlay",""],["focusInput",""],["defaultPlaceholder",""],["editableInput",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["filter",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],["role","combobox","pAutoFocus","",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus","focus","blur","keydown",4,"ngIf"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"ngClass","disabled","autofocus","input","keydown","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger",3,"mousedown"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","aria-haspopup","listbox","pAutoFocus","",3,"input","keydown","focus","blur","ngClass","disabled","autofocus"],[3,"styleClass","click",4,"ngIf"],["class","p-dropdown-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-dropdown-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-dropdown-trigger-icon",4,"ngIf"],["class","p-dropdown-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-dropdown-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-dropdown-header",3,"click",4,"ngIf"],["tabindex","0",1,"p-dropdown-items-wrapper",3,"ngStyle"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[1,"p-dropdown-header",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dropdown-filter-container"],["type","text","role","searchbox","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"input","keydown","blur","value","ngClass"],["class","p-dropdown-filter-icon",4,"ngIf"],[1,"p-dropdown-filter-icon"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-dropdown-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-dropdown-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","checkmark","selected","label","disabled","template","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-dropdown-empty-message",3,"ngStyle"]],template:function(t,r){if(t&1){let o=L();m(0,"div",15,0),k("click",function(a){return y(o),w(r.onContainerClick(a))}),v(2,Zre,6,20,"span",16)(3,eoe,2,8,"input",17)(4,ooe,3,2,"ng-container",18),m(5,"div",19),k("mousedown",function(a){return y(o),w(r.onMouseDown(a))}),v(6,poe,3,2,"ng-container",20)(7,Coe,2,2,"ng-template",null,1,Bt),g(),m(9,"p-overlay",21,2),Oe("visibleChange",function(a){return y(o),Re(r.overlayVisible,a)||(r.overlayVisible=a),w(a)}),k("onAnimationStart",function(a){return y(o),w(r.onOverlayAnimationStart(a))})("onHide",function(){return y(o),w(r.hide())}),v(11,qoe,13,18,"ng-template",22),g()()}if(t&2){let o,s=He(8);ce(r.styleClass),f("ngClass",r.containerClass)("ngStyle",r.style),G("id",r.id),p(2),f("ngIf",!r.editable),p(),f("ngIf",r.editable),p(),f("ngIf",r.isVisibleClearIcon),p(),G("aria-expanded",(o=r.overlayVisible)!==null&&o!==void 0?o:!1)("data-pc-section","trigger"),p(),f("ngIf",r.loading)("ngIfElse",s),p(3),Te("visible",r.overlayVisible),f("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}},dependencies:()=>[je,hn,rt,mt,De,O_,Ee,cn,Xs,Zn,Ji,Ho,ol,Xoe],styles:[`@layer primeng{.p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;opacity:0}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-item-group{cursor:auto}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}.p-float-label .p-dropdown .p-placeholder{opacity:0}}
`],encapsulation:2,changeDetection:0})}return i})(),Ap=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Kf,dt,oo,ln,so,fr,Ji,Ho,ol,mO,On,Kf,dt,so]})}return i})();var _O=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleDoubleLeftIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M5.71602 11.164C5.80782 11.2021 5.9063 11.2215 6.00569 11.221C6.20216 11.2301 6.39427 11.1612 6.54025 11.0294C6.68191 10.8875 6.76148 10.6953 6.76148 10.4948C6.76148 10.2943 6.68191 10.1021 6.54025 9.96024L3.51441 6.9344L6.54025 3.90855C6.624 3.76126 6.65587 3.59011 6.63076 3.42254C6.60564 3.25498 6.525 3.10069 6.40175 2.98442C6.2785 2.86815 6.11978 2.79662 5.95104 2.7813C5.78229 2.76598 5.61329 2.80776 5.47112 2.89994L1.97123 6.39983C1.82957 6.54167 1.75 6.73393 1.75 6.9344C1.75 7.13486 1.82957 7.32712 1.97123 7.46896L5.47112 10.9991C5.54096 11.0698 5.62422 11.1259 5.71602 11.164ZM11.0488 10.9689C11.1775 11.1156 11.3585 11.2061 11.5531 11.221C11.7477 11.2061 11.9288 11.1156 12.0574 10.9689C12.1815 10.8302 12.25 10.6506 12.25 10.4645C12.25 10.2785 12.1815 10.0989 12.0574 9.96024L9.03158 6.93439L12.0574 3.90855C12.1248 3.76739 12.1468 3.60881 12.1204 3.45463C12.0939 3.30045 12.0203 3.15826 11.9097 3.04765C11.7991 2.93703 11.6569 2.86343 11.5027 2.83698C11.3486 2.81053 11.19 2.83252 11.0488 2.89994L7.51865 6.36957C7.37699 6.51141 7.29742 6.70367 7.29742 6.90414C7.29742 7.1046 7.37699 7.29686 7.51865 7.4387L11.0488 10.9689Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var CO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleDoubleRightIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7.68757 11.1451C7.7791 11.1831 7.8773 11.2024 7.9764 11.2019C8.07769 11.1985 8.17721 11.1745 8.26886 11.1312C8.36052 11.088 8.44238 11.0265 8.50943 10.9505L12.0294 7.49085C12.1707 7.34942 12.25 7.15771 12.25 6.95782C12.25 6.75794 12.1707 6.56622 12.0294 6.42479L8.50943 2.90479C8.37014 2.82159 8.20774 2.78551 8.04633 2.80192C7.88491 2.81833 7.73309 2.88635 7.6134 2.99588C7.4937 3.10541 7.41252 3.25061 7.38189 3.40994C7.35126 3.56927 7.37282 3.73423 7.44337 3.88033L10.4605 6.89748L7.44337 9.91463C7.30212 10.0561 7.22278 10.2478 7.22278 10.4477C7.22278 10.6475 7.30212 10.8393 7.44337 10.9807C7.51301 11.0512 7.59603 11.1071 7.68757 11.1451ZM1.94207 10.9505C2.07037 11.0968 2.25089 11.1871 2.44493 11.2019C2.63898 11.1871 2.81949 11.0968 2.94779 10.9505L6.46779 7.49085C6.60905 7.34942 6.68839 7.15771 6.68839 6.95782C6.68839 6.75793 6.60905 6.56622 6.46779 6.42479L2.94779 2.90479C2.80704 2.83757 2.6489 2.81563 2.49517 2.84201C2.34143 2.86839 2.19965 2.94178 2.08936 3.05207C1.97906 3.16237 1.90567 3.30415 1.8793 3.45788C1.85292 3.61162 1.87485 3.76975 1.94207 3.9105L4.95922 6.92765L1.94207 9.9448C1.81838 10.0831 1.75 10.2621 1.75 10.4477C1.75 10.6332 1.81838 10.8122 1.94207 10.9505Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var IO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleLeftIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.75 11.185C8.65146 11.1854 8.55381 11.1662 8.4628 11.1284C8.37179 11.0906 8.28924 11.0351 8.22 10.965L4.72 7.46496C4.57955 7.32433 4.50066 7.13371 4.50066 6.93496C4.50066 6.73621 4.57955 6.54558 4.72 6.40496L8.22 2.93496C8.36095 2.84357 8.52851 2.80215 8.69582 2.81733C8.86312 2.83252 9.02048 2.90344 9.14268 3.01872C9.26487 3.134 9.34483 3.28696 9.36973 3.4531C9.39463 3.61924 9.36303 3.78892 9.28 3.93496L6.28 6.93496L9.28 9.93496C9.42045 10.0756 9.49934 10.2662 9.49934 10.465C9.49934 10.6637 9.42045 10.8543 9.28 10.995C9.13526 11.1257 8.9448 11.1939 8.75 11.185Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var xp=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleRightIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var yO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleDownIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var wO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["AngleUpIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var Qoe=["input"],Zoe=(i,n,e)=>({"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":n,"p-inputnumber-buttons-vertical":e}),XV=()=>({"p-inputnumber-button p-inputnumber-button-up":!0}),QV=()=>({"p-inputnumber-button p-inputnumber-button-down":!0});function ese(i,n){if(i&1){let e=L();m(0,"TimesIcon",8),k("click",function(){y(e);let r=u(2);return w(r.clear())}),g()}i&2&&(f("ngClass","p-inputnumber-clear-icon"),G("data-pc-section","clearIcon"))}function tse(i,n){}function ise(i,n){i&1&&v(0,tse,0,0,"ng-template")}function nse(i,n){if(i&1){let e=L();m(0,"span",9),k("click",function(){y(e);let r=u(2);return w(r.clear())}),v(1,ise,1,0,null,10),g()}if(i&2){let e=u(2);G("data-pc-section","clearIcon"),p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function rse(i,n){if(i&1&&(he(0),v(1,ese,1,2,"TimesIcon",6)(2,nse,2,2,"span",7),fe()),i&2){let e=u();p(),f("ngIf",!e.clearIconTemplate),p(),f("ngIf",e.clearIconTemplate)}}function ose(i,n){if(i&1&&P(0,"span",14),i&2){let e=u(2);f("ngClass",e.incrementButtonIcon),G("data-pc-section","incrementbuttonicon")}}function sse(i,n){i&1&&P(0,"AngleUpIcon"),i&2&&G("data-pc-section","incrementbuttonicon")}function ase(i,n){}function lse(i,n){i&1&&v(0,ase,0,0,"ng-template")}function cse(i,n){if(i&1&&(he(0),v(1,sse,1,1,"AngleUpIcon",3)(2,lse,1,0,null,10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.incrementButtonIconTemplate),p(),f("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function dse(i,n){if(i&1&&P(0,"span",14),i&2){let e=u(2);f("ngClass",e.decrementButtonIcon),G("data-pc-section","decrementbuttonicon")}}function pse(i,n){i&1&&P(0,"AngleDownIcon"),i&2&&G("data-pc-section","decrementbuttonicon")}function use(i,n){}function hse(i,n){i&1&&v(0,use,0,0,"ng-template")}function fse(i,n){if(i&1&&(he(0),v(1,pse,1,1,"AngleDownIcon",3)(2,hse,1,0,null,10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.decrementButtonIconTemplate),p(),f("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function mse(i,n){if(i&1){let e=L();m(0,"span",11)(1,"button",12),k("mousedown",function(r){y(e);let o=u();return w(o.onUpButtonMouseDown(r))})("mouseup",function(){y(e);let r=u();return w(r.onUpButtonMouseUp())})("mouseleave",function(){y(e);let r=u();return w(r.onUpButtonMouseLeave())})("keydown",function(r){y(e);let o=u();return w(o.onUpButtonKeyDown(r))})("keyup",function(){y(e);let r=u();return w(r.onUpButtonKeyUp())}),v(2,ose,1,2,"span",13)(3,cse,3,2,"ng-container",3),g(),m(4,"button",12),k("mousedown",function(r){y(e);let o=u();return w(o.onDownButtonMouseDown(r))})("mouseup",function(){y(e);let r=u();return w(r.onDownButtonMouseUp())})("mouseleave",function(){y(e);let r=u();return w(r.onDownButtonMouseLeave())})("keydown",function(r){y(e);let o=u();return w(o.onDownButtonKeyDown(r))})("keyup",function(){y(e);let r=u();return w(r.onDownButtonKeyUp())}),v(5,dse,1,2,"span",13)(6,fse,3,2,"ng-container",3),g()()}if(i&2){let e=u();G("data-pc-section","buttonGroup"),p(),ce(e.incrementButtonClass),f("ngClass",Ae(17,XV))("disabled",e.disabled),G("aria-hidden",!0)("data-pc-section","incrementbutton"),p(),f("ngIf",e.incrementButtonIcon),p(),f("ngIf",!e.incrementButtonIcon),p(),ce(e.decrementButtonClass),f("ngClass",Ae(18,QV))("disabled",e.disabled),G("aria-hidden",!0)("data-pc-section",e.decrementbutton),p(),f("ngIf",e.decrementButtonIcon),p(),f("ngIf",!e.decrementButtonIcon)}}function gse(i,n){if(i&1&&P(0,"span",14),i&2){let e=u(2);f("ngClass",e.incrementButtonIcon),G("data-pc-section","incrementbuttonicon")}}function _se(i,n){i&1&&P(0,"AngleUpIcon"),i&2&&G("data-pc-section","incrementbuttonicon")}function Cse(i,n){}function Ise(i,n){i&1&&v(0,Cse,0,0,"ng-template")}function yse(i,n){if(i&1&&(he(0),v(1,_se,1,1,"AngleUpIcon",3)(2,Ise,1,0,null,10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.incrementButtonIconTemplate),p(),f("ngTemplateOutlet",e.incrementButtonIconTemplate)}}function wse(i,n){if(i&1){let e=L();m(0,"button",12),k("mousedown",function(r){y(e);let o=u();return w(o.onUpButtonMouseDown(r))})("mouseup",function(){y(e);let r=u();return w(r.onUpButtonMouseUp())})("mouseleave",function(){y(e);let r=u();return w(r.onUpButtonMouseLeave())})("keydown",function(r){y(e);let o=u();return w(o.onUpButtonKeyDown(r))})("keyup",function(){y(e);let r=u();return w(r.onUpButtonKeyUp())}),v(1,gse,1,2,"span",13)(2,yse,3,2,"ng-container",3),g()}if(i&2){let e=u();ce(e.incrementButtonClass),f("ngClass",Ae(8,XV))("disabled",e.disabled),G("aria-hidden",!0)("data-pc-section","incrementbutton"),p(),f("ngIf",e.incrementButtonIcon),p(),f("ngIf",!e.incrementButtonIcon)}}function vse(i,n){if(i&1&&P(0,"span",14),i&2){let e=u(2);f("ngClass",e.decrementButtonIcon),G("data-pc-section","decrementbuttonicon")}}function bse(i,n){i&1&&P(0,"AngleDownIcon"),i&2&&G("data-pc-section","decrementbuttonicon")}function Sse(i,n){}function Ese(i,n){i&1&&v(0,Sse,0,0,"ng-template")}function Ase(i,n){if(i&1&&(he(0),v(1,bse,1,1,"AngleDownIcon",3)(2,Ese,1,0,null,10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.decrementButtonIconTemplate),p(),f("ngTemplateOutlet",e.decrementButtonIconTemplate)}}function xse(i,n){if(i&1){let e=L();m(0,"button",12),k("mousedown",function(r){y(e);let o=u();return w(o.onDownButtonMouseDown(r))})("mouseup",function(){y(e);let r=u();return w(r.onDownButtonMouseUp())})("mouseleave",function(){y(e);let r=u();return w(r.onDownButtonMouseLeave())})("keydown",function(r){y(e);let o=u();return w(o.onDownButtonKeyDown(r))})("keyup",function(){y(e);let r=u();return w(r.onDownButtonKeyUp())}),v(1,vse,1,2,"span",13)(2,Ase,3,2,"ng-container",3),g()}if(i&2){let e=u();ce(e.decrementButtonClass),f("ngClass",Ae(8,QV))("disabled",e.disabled),G("aria-hidden",!0)("data-pc-section","decrementbutton"),p(),f("ngIf",e.decrementButtonIcon),p(),f("ngIf",!e.decrementButtonIcon)}}var Tse={provide:fn,useExisting:Zt(()=>vO),multi:!0},vO=(()=>{class i{document;el;cd;injector;config;showButtons=!1;format=!0;buttonLayout="stacked";inputId;styleClass;style;placeholder;size;maxlength;tabindex;title;ariaLabelledBy;ariaLabel;ariaRequired;name;required;autocomplete;min;max;incrementButtonClass;decrementButtonClass;incrementButtonIcon;decrementButtonIcon;readonly=!1;step=1;allowEmpty=!0;locale;localeMatcher;mode="decimal";currency;currencyDisplay;useGrouping=!0;variant="outlined";minFractionDigits;maxFractionDigits;prefix;suffix;inputStyle;inputStyleClass;showClear=!1;autofocus;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}onInput=new X;onFocus=new X;onBlur=new X;onKeyDown=new X;onClear=new X;input;templates;clearIconTemplate;incrementButtonIconTemplate;decrementButtonIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};focused;initialized;groupChar="";prefixChar="";suffixChar="";isSpecialChar;timer;lastValue;_numeral;numberFormat;_decimal;_decimalChar;_group;_minusSign;_currency;_prefix;_suffix;_index;_disabled;ngControl=null;constructor(e,t,r,o,s){this.document=e,this.el=t,this.cd=r,this.injector=o,this.config=s}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"clearicon":this.clearIconTemplate=e.template;break;case"incrementbuttonicon":this.incrementButtonIconTemplate=e.template;break;case"decrementbuttonicon":this.decrementButtonIconTemplate=e.template;break}})}ngOnInit(){this.ngControl=this.injector.get(ss,null,{optional:!0}),this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits??void 0,maximumFractionDigits:this.maxFractionDigits??void 0}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());let e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),t=new Map(e.map((r,o)=>[r,o]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._decimalChar=this.getDecimalChar(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>t.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){let e=this.getDecimalChar();return new RegExp(`[${e}]`,"g")}getDecimalChar(){return new Intl.NumberFormat(this.locale,ke(oe({},this.getOptions()),{useGrouping:!1})).format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}getGroupingExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){let e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){let e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{let e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}get isBlurUpdateOnMode(){return this.ngControl?.control?.updateOn==="blur"}formatValue(e){if(e!=null){if(e==="-")return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&e!=this.prefix&&(r=this.prefix+r),this.suffix&&e!=this.suffix&&(r=r+this.suffix),r}return e.toString()}return""}parseValue(e){let t=new RegExp(this._suffix,""),r=new RegExp(this._prefix,""),o=new RegExp(this._currency,""),s=e.replace(t,"").replace(r,"").trim().replace(/\s/g,"").replace(o,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(s){if(s==="-")return s;let a=+s;return isNaN(a)?null:a}return null}repeat(e,t,r){if(this.readonly)return;let o=t||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},o),this.spin(e,r)}spin(e,t){let r=this.step*t,o=this.parseValue(this.input?.nativeElement.value)||0,s=this.validateValue(o+r);this.maxlength&&this.maxlength<this.formatValue(s).length||(this.updateInput(s,null,"spin",null),this.updateModel(e,s),this.handleOnInput(e,o,s))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault())}onUpButtonMouseUp(){this.disabled||this.clearTimer()}onUpButtonMouseLeave(){this.disabled||this.clearTimer()}onUpButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonMouseDown(e){if(e.button===2){this.clearTimer();return}this.disabled||(this.input?.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault())}onDownButtonMouseUp(){this.disabled||this.clearTimer()}onDownButtonMouseLeave(){this.disabled||this.clearTimer()}onDownButtonKeyUp(){this.disabled||this.clearTimer()}onDownButtonKeyDown(e){(e.keyCode===32||e.keyCode===13)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey||e.key==="Dead"){this.isSpecialChar=!0;return}let t=e.target.selectionStart,r=e.target.selectionEnd,o=e.target.value,s=null;switch(e.altKey&&e.preventDefault(),e.key){case"ArrowUp":this.spin(e,1),e.preventDefault();break;case"ArrowDown":this.spin(e,-1),e.preventDefault();break;case"ArrowLeft":for(let a=t;a<=o.length;a++){let l=a===0?0:a-1;if(this.isNumeralChar(o.charAt(l))){this.input.nativeElement.setSelectionRange(a,a);break}}break;case"ArrowRight":for(let a=r;a>=0;a--)if(this.isNumeralChar(o.charAt(a))){this.input.nativeElement.setSelectionRange(a,a);break}break;case"Tab":case"Enter":s=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(s),this.input.nativeElement.setAttribute("aria-valuenow",s),this.updateModel(e,s);break;case"Backspace":{if(e.preventDefault(),t===r){if(t==1&&this.prefix||t==o.length&&this.suffix)break;let a=o.charAt(t-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(a)){let d=this.getDecimalLength(o);if(this._group.test(a))this._group.lastIndex=0,s=o.slice(0,t-2)+o.slice(t-1);else if(this._decimal.test(a))this._decimal.lastIndex=0,d?this.input?.nativeElement.setSelectionRange(t-1,t-1):s=o.slice(0,t-1)+o.slice(t);else if(l>0&&t>l){let h=this.isDecimalMode()&&(this.minFractionDigits||0)<d?"":"0";s=o.slice(0,t-1)+h+o.slice(t)}else c===1?(s=o.slice(0,t-1)+"0"+o.slice(t),s=this.parseValue(s)>0?s:""):s=o.slice(0,t-1)+o.slice(t)}else this.mode==="currency"&&a.search(this._currency)!=-1&&(s=o.slice(1));this.updateValue(e,s,null,"delete-single")}else s=this.deleteRange(o,t,r),this.updateValue(e,s,null,"delete-range");break}case"Delete":if(e.preventDefault(),t===r){if(t==0&&this.prefix||t==o.length-1&&this.suffix)break;let a=o.charAt(t),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(o);if(this.isNumeralChar(a)){let d=this.getDecimalLength(o);if(this._group.test(a))this._group.lastIndex=0,s=o.slice(0,t)+o.slice(t+2);else if(this._decimal.test(a))this._decimal.lastIndex=0,d?this.input?.nativeElement.setSelectionRange(t+1,t+1):s=o.slice(0,t)+o.slice(t+1);else if(l>0&&t>l){let h=this.isDecimalMode()&&(this.minFractionDigits||0)<d?"":"0";s=o.slice(0,t)+h+o.slice(t+1)}else c===1?(s=o.slice(0,t)+"0"+o.slice(t+1),s=this.parseValue(s)>0?s:""):s=o.slice(0,t)+o.slice(t+1)}this.updateValue(e,s,null,"delete-back-single")}else s=this.deleteRange(o,t,r),this.updateValue(e,s,null,"delete-range");break;case"Home":this.min&&(this.updateModel(e,this.min),e.preventDefault());break;case"End":this.max&&(this.updateModel(e,this.max),e.preventDefault());break;default:break}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let t=e.which||e.keyCode,r=String.fromCharCode(t),o=this.isDecimalSign(r),s=this.isMinusSign(r);t!=13&&e.preventDefault(),!o&&e.code==="NumpadDecimal"&&(o=!0,r=this._decimalChar,t=r.charCodeAt(0));let{value:a,selectionStart:l,selectionEnd:c}=this.input.nativeElement,d=this.parseValue(a+r),h=d!=null?d.toString():"",_=a.substring(l,c),C=this.parseValue(_),I=C!=null?C.toString():"";if(l!==c&&I.length>0){this.insert(e,r,{isDecimalSign:o,isMinusSign:s});return}this.maxlength&&h.length>this.maxlength||(48<=t&&t<=57||s||o)&&this.insert(e,r,{isDecimalSign:o,isMinusSign:s})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let t=(e.clipboardData||this.document.defaultView.clipboardData).getData("Text");if(t){this.maxlength&&(t=t.toString().substring(0,this.maxlength));let r=this.parseValue(t);r!=null&&this.insert(e,r.toString())}}}allowMinusSign(){return this.min==null||this.min<0}isMinusSign(e){return this._minusSign.test(e)||e==="-"?(this._minusSign.lastIndex=0,!0):!1}isDecimalSign(e){return this._decimal.test(e)?(this._decimal.lastIndex=0,!0):!1}isDecimalMode(){return this.mode==="decimal"}getDecimalCharIndexes(e){let t=e.search(this._decimal);this._decimal.lastIndex=0;let o=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:t,decimalCharIndexWithoutPrefix:o}}getCharIndexes(e){let t=e.search(this._decimal);this._decimal.lastIndex=0;let r=e.search(this._minusSign);this._minusSign.lastIndex=0;let o=e.search(this._suffix);this._suffix.lastIndex=0;let s=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:t,minusCharIndex:r,suffixCharIndex:o,currencyCharIndex:s}}insert(e,t,r={isDecimalSign:!1,isMinusSign:!1}){let o=t.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&o!==-1)return;let s=this.input?.nativeElement.selectionStart,a=this.input?.nativeElement.selectionEnd,l=this.input?.nativeElement.value.trim(),{decimalCharIndex:c,minusCharIndex:d,suffixCharIndex:h,currencyCharIndex:_}=this.getCharIndexes(l),C;if(r.isMinusSign)s===0&&(C=l,(d===-1||a!==0)&&(C=this.insertText(l,t,0,a)),this.updateValue(e,C,t,"insert"));else if(r.isDecimalSign)c>0&&s===c?this.updateValue(e,l,t,"insert"):c>s&&c<a?(C=this.insertText(l,t,s,a),this.updateValue(e,C,t,"insert")):c===-1&&this.maxFractionDigits&&(C=this.insertText(l,t,s,a),this.updateValue(e,C,t,"insert"));else{let I=this.numberFormat.resolvedOptions().maximumFractionDigits,b=s!==a?"range-insert":"insert";if(c>0&&s>c){if(s+t.length-(c+1)<=I){let E=_>=s?_-1:h>=s?h:l.length;C=l.slice(0,s)+t+l.slice(s+t.length,E)+l.slice(E),this.updateValue(e,C,t,b)}}else C=this.insertText(l,t,s,a),this.updateValue(e,C,t,b)}}insertText(e,t,r,o){if((t==="."?t:t.split(".")).length===2){let a=e.slice(r,o).search(this._decimal);return this._decimal.lastIndex=0,a>0?e.slice(0,r)+this.formatValue(t)+e.slice(o):e||this.formatValue(t)}else return o-r===e.length?this.formatValue(t):r===0?t+e.slice(o):o===e.length?e.slice(0,r)+t:e.slice(0,r)+t+e.slice(o)}deleteRange(e,t,r){let o;return r-t===e.length?o="":t===0?o=e.slice(r):r===e.length?o=e.slice(0,t):o=e.slice(0,t)+e.slice(r),o}initCursor(){let e=this.input?.nativeElement.selectionStart,t=this.input?.nativeElement.selectionEnd,r=this.input?.nativeElement.value,o=r.length,s=null,a=(this.prefixChar||"").length;r=r.replace(this._prefix,""),(e===t||e!==0||t<a)&&(e-=a);let l=r.charAt(e);if(this.isNumeralChar(l))return e+a;let c=e-1;for(;c>=0;)if(l=r.charAt(c),this.isNumeralChar(l)){s=c+a;break}else c--;if(s!==null)this.input?.nativeElement.setSelectionRange(s+1,s+1);else{for(c=e;c<o;)if(l=r.charAt(c),this.isNumeralChar(l)){s=c+a;break}else c++;s!==null&&this.input?.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){let e=this.input?.nativeElement.value;!this.readonly&&e!==j.getSelection()&&this.initCursor()}isNumeralChar(e){return e.length===1&&(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))?(this.resetRegex(),!0):!1}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,t,r,o){let s=this.input?.nativeElement.value,a=null;t!=null&&(a=this.parseValue(t),a=!a&&!this.allowEmpty?0:a,this.updateInput(a,r,o,t),this.handleOnInput(e,s,a))}handleOnInput(e,t,r){this.isValueChanged(t,r)&&(this.input.nativeElement.value=this.formatValue(r),this.input?.nativeElement.setAttribute("aria-valuenow",r),!this.isBlurUpdateOnMode&&this.updateModel(e,r),this.onInput.emit({originalEvent:e,value:r,formattedValue:t}))}isValueChanged(e,t){if(t===null&&e!==null)return!0;if(t!=null){let r=typeof e=="string"?this.parseValue(e):e;return t!==r}return!1}validateValue(e){return e==="-"||e==null?null:this.min!=null&&e<this.min?this.min:this.max!=null&&e>this.max?this.max:e}updateInput(e,t,r,o){t=t||"";let s=this.input?.nativeElement.value,a=this.formatValue(e),l=s.length;if(a!==o&&(a=this.concatValues(a,o)),l===0){this.input.nativeElement.value=a,this.input.nativeElement.setSelectionRange(0,0);let d=this.initCursor()+t.length;this.input.nativeElement.setSelectionRange(d,d)}else{let c=this.input.nativeElement.selectionStart,d=this.input.nativeElement.selectionEnd;if(this.maxlength&&a.length>this.maxlength&&(a=a.slice(0,this.maxlength),c=Math.min(c,this.maxlength),d=Math.min(d,this.maxlength)),this.maxlength&&this.maxlength<a.length)return;this.input.nativeElement.value=a;let h=a.length;if(r==="range-insert"){let _=this.parseValue((s||"").slice(0,c)),I=(_!==null?_.toString():"").split("").join(`(${this.groupChar})?`),b=new RegExp(I,"g");b.test(a);let E=t.split("").join(`(${this.groupChar})?`),R=new RegExp(E,"g");R.test(a.slice(b.lastIndex)),d=b.lastIndex+R.lastIndex,this.input.nativeElement.setSelectionRange(d,d)}else if(h===l)r==="insert"||r==="delete-back-single"?this.input.nativeElement.setSelectionRange(d+1,d+1):r==="delete-single"?this.input.nativeElement.setSelectionRange(d-1,d-1):(r==="delete-range"||r==="spin")&&this.input.nativeElement.setSelectionRange(d,d);else if(r==="delete-back-single"){let _=s.charAt(d-1),C=s.charAt(d),I=l-h,b=this._group.test(C);b&&I===1?d+=1:!b&&this.isNumeralChar(_)&&(d+=-1*I+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(d,d)}else if(s==="-"&&r==="insert"){this.input.nativeElement.setSelectionRange(0,0);let C=this.initCursor()+t.length+1;this.input.nativeElement.setSelectionRange(C,C)}else d=d+(h-l),this.input.nativeElement.setSelectionRange(d,d)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,t){if(e&&t){let r=t.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?r!==-1?e:e.replace(this.suffixChar,"").split(this._decimal)[0]+t.replace(this.suffixChar,"").slice(r)+this.suffixChar:r!==-1?e.split(this._decimal)[0]+t.slice(r):e}return e}getDecimalLength(e){if(e){let t=e.split(this._decimal);if(t.length===2)return t[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let t=this.validateValue(this.parseValue(this.input.nativeElement.value)),r=t?.toString();this.input.nativeElement.value=this.formatValue(r),this.input.nativeElement.setAttribute("aria-valuenow",r),this.updateModel(e,t),this.onBlur.emit(e)}formattedValue(){let e=!this.value&&!this.allowEmpty?0:this.value;return this.formatValue(e)}updateModel(e,t){this.value!==t&&(this.value=t,this.isBlurUpdateOnMode&&this.focused?this.isBlurUpdateOnMode&&this.onModelChange(t):this.onModelChange(t)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return this.value!=null&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}static \u0275fac=function(t){return new(t||i)(S(At),S(Ze),S(we),S(Ur),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-inputNumber"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(Qoe,5),t&2){let o;te(o=ie())&&(r.input=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-inputnumber-clearable",r.showClear&&r.buttonLayout!="vertical")},inputs:{showButtons:[2,"showButtons","showButtons",Y],format:[2,"format","format",Y],buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:[2,"size","size",We],maxlength:[2,"maxlength","maxlength",We],tabindex:[2,"tabindex","tabindex",We],title:"title",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",ariaRequired:[2,"ariaRequired","ariaRequired",Y],name:"name",required:[2,"required","required",Y],autocomplete:"autocomplete",min:[2,"min","min",We],max:[2,"max","max",We],incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:[2,"readonly","readonly",Y],step:[2,"step","step",We],allowEmpty:[2,"allowEmpty","allowEmpty",Y],locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:[2,"useGrouping","useGrouping",Y],variant:"variant",minFractionDigits:[2,"minFractionDigits","minFractionDigits",e=>We(e,null)],maxFractionDigits:[2,"maxFractionDigits","maxFractionDigits",e=>We(e,null)],prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:[2,"showClear","showClear",Y],autofocus:[2,"autofocus","autofocus",Y],disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[et([Tse]),tt,Yi],decls:7,vars:43,consts:[["input",""],[3,"ngClass","ngStyle"],["pInputText","","role","spinbutton","inputmode","decimal","pAutoFocus","",3,"input","keydown","keypress","paste","click","focus","blur","ngClass","ngStyle","value","disabled","readonly","autofocus"],[4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","class","p-button-icon-only","tabindex","0",3,"ngClass","class","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["class","p-inputnumber-clear-icon",3,"click",4,"ngIf"],[3,"click","ngClass"],[1,"p-inputnumber-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","0",1,"p-button-icon-only",3,"mousedown","mouseup","mouseleave","keydown","keyup","ngClass","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,r){if(t&1){let o=L();m(0,"span",1)(1,"input",2,0),k("input",function(a){return y(o),w(r.onUserInput(a))})("keydown",function(a){return y(o),w(r.onInputKeyDown(a))})("keypress",function(a){return y(o),w(r.onInputKeyPress(a))})("paste",function(a){return y(o),w(r.onPaste(a))})("click",function(){return y(o),w(r.onInputClick())})("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))}),g(),v(3,rse,3,2,"ng-container",3)(4,mse,7,19,"span",4)(5,wse,3,9,"button",5)(6,xse,3,9,"button",5),g()}t&2&&(ce(r.styleClass),f("ngClass",en(39,Zoe,r.showButtons&&r.buttonLayout==="stacked",r.showButtons&&r.buttonLayout==="horizontal",r.showButtons&&r.buttonLayout==="vertical"))("ngStyle",r.style),G("data-pc-name","inputnumber")("data-pc-section","root"),p(),ce(r.inputStyleClass),Dn("p-variant-filled",r.variant==="filled"||r.config.inputStyle()==="filled"),f("ngClass","p-inputnumber-input")("ngStyle",r.inputStyle)("value",r.formattedValue())("disabled",r.disabled)("readonly",r.readonly)("autofocus",r.autofocus),G("id",r.inputId)("variant",r.variant)("aria-valuemin",r.min)("aria-valuemax",r.max)("aria-valuenow",r.value)("placeholder",r.placeholder)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("title",r.title)("size",r.size)("name",r.name)("autocomplete",r.autocomplete)("maxlength",r.maxlength)("tabindex",r.tabindex)("aria-required",r.ariaRequired)("required",r.required)("min",r.min)("max",r.max)("data-pc-section","input"),p(2),f("ngIf",r.buttonLayout!="vertical"&&r.showClear&&r.value),p(),f("ngIf",r.showButtons&&r.buttonLayout==="stacked"),p(),f("ngIf",r.showButtons&&r.buttonLayout!=="stacked"),p(),f("ngIf",r.showButtons&&r.buttonLayout!=="stacked"))},dependencies:()=>[je,rt,mt,De,Xi,pt,Zn,Ji,wO,yO],styles:[`@layer primeng{p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),P_=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Za,ro,fr,Ji,wO,yO,dt]})}return i})();var Nw=i=>({"p-disabled":i}),Lw=i=>({$implicit:i}),Rse=i=>({"p-highlight":i});function Pse(i,n){i&1&&ue(0)}function Dse(i,n){if(i&1&&(m(0,"div",15),v(1,Pse,1,0,"ng-container",16),g()),i&2){let e=u(2);G("data-pc-section","start"),p(),f("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",ne(3,Lw,e.paginatorState))}}function Fse(i,n){if(i&1&&(m(0,"span",17),F(1),g()),i&2){let e=u(2);p(),$(e.currentPageReport)}}function kse(i,n){i&1&&P(0,"AngleDoubleLeftIcon",19),i&2&&f("styleClass","p-paginator-icon")}function Nse(i,n){}function Lse(i,n){i&1&&v(0,Nse,0,0,"ng-template")}function Mse(i,n){if(i&1&&(m(0,"span",20),v(1,Lse,1,0,null,21),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.firstPageLinkIconTemplate)}}function Vse(i,n){if(i&1){let e=L();m(0,"button",18),k("click",function(r){y(e);let o=u(2);return w(o.changePageToFirst(r))}),v(1,kse,1,1,"AngleDoubleLeftIcon",6)(2,Mse,2,1,"span",7),g()}if(i&2){let e=u(2);f("disabled",e.isFirstPage()||e.empty())("ngClass",ne(5,Nw,e.isFirstPage()||e.empty())),G("aria-label",e.getAriaLabel("firstPageLabel")),p(),f("ngIf",!e.firstPageLinkIconTemplate),p(),f("ngIf",e.firstPageLinkIconTemplate)}}function Bse(i,n){i&1&&P(0,"AngleLeftIcon",19),i&2&&f("styleClass","p-paginator-icon")}function Use(i,n){}function jse(i,n){i&1&&v(0,Use,0,0,"ng-template")}function Gse(i,n){if(i&1&&(m(0,"span",20),v(1,jse,1,0,null,21),g()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.previousPageLinkIconTemplate)}}function Hse(i,n){if(i&1){let e=L();m(0,"button",24),k("click",function(r){let o=y(e).$implicit,s=u(3);return w(s.onPageLinkClick(r,o-1))}),F(1),g()}if(i&2){let e=n.$implicit,t=u(3);f("ngClass",ne(4,Rse,e-1==t.getPage())),G("aria-label",t.getPageAriaLabel(e))("aria-current",e-1==t.getPage()?"page":void 0),p(),J(" ",t.getLocalization(e)," ")}}function Wse(i,n){if(i&1&&(m(0,"span",22),v(1,Hse,2,6,"button",23),g()),i&2){let e=u(2);p(),f("ngForOf",e.pageLinks)}}function zse(i,n){if(i&1&&F(0),i&2){let e=u(3);$(e.currentPageReport)}}function Kse(i,n){i&1&&ue(0)}function $se(i,n){if(i&1&&v(0,Kse,1,0,"ng-container",16),i&2){let e=n.$implicit,t=u(4);f("ngTemplateOutlet",t.jumpToPageItemTemplate)("ngTemplateOutletContext",ne(2,Lw,e))}}function Jse(i,n){i&1&&(he(0),v(1,$se,1,4,"ng-template",28),fe())}function qse(i,n){i&1&&ue(0)}function Yse(i,n){if(i&1&&v(0,qse,1,0,"ng-container",21),i&2){let e=u(4);f("ngTemplateOutlet",e.dropdownIconTemplate)}}function Xse(i,n){i&1&&v(0,Yse,1,1,"ng-template",29)}function Qse(i,n){if(i&1){let e=L();m(0,"p-dropdown",25),k("onChange",function(r){y(e);let o=u(2);return w(o.onPageDropdownChange(r))}),v(1,zse,1,1,"ng-template",26)(2,Jse,2,0,"ng-container",27)(3,Xse,1,0,null,27),g()}if(i&2){let e=u(2);f("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),G("aria-label",e.getAriaLabel("jumpToPageDropdownLabel")),p(2),f("ngIf",e.jumpToPageItemTemplate),p(),f("ngIf",e.dropdownIconTemplate)}}function Zse(i,n){i&1&&P(0,"AngleRightIcon",19),i&2&&f("styleClass","p-paginator-icon")}function eae(i,n){}function tae(i,n){i&1&&v(0,eae,0,0,"ng-template")}function iae(i,n){if(i&1&&(m(0,"span",20),v(1,tae,1,0,null,21),g()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.nextPageLinkIconTemplate)}}function nae(i,n){i&1&&P(0,"AngleDoubleRightIcon",19),i&2&&f("styleClass","p-paginator-icon")}function rae(i,n){}function oae(i,n){i&1&&v(0,rae,0,0,"ng-template")}function sae(i,n){if(i&1&&(m(0,"span",20),v(1,oae,1,0,null,21),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.lastPageLinkIconTemplate)}}function aae(i,n){if(i&1){let e=L();m(0,"button",30),k("click",function(r){y(e);let o=u(2);return w(o.changePageToLast(r))}),v(1,nae,1,1,"AngleDoubleRightIcon",6)(2,sae,2,1,"span",7),g()}if(i&2){let e=u(2);f("disabled",e.isLastPage()||e.empty())("ngClass",ne(5,Nw,e.isLastPage()||e.empty())),G("aria-label",e.getAriaLabel("lastPageLabel")),p(),f("ngIf",!e.lastPageLinkIconTemplate),p(),f("ngIf",e.lastPageLinkIconTemplate)}}function lae(i,n){if(i&1){let e=L();m(0,"p-inputNumber",31),k("ngModelChange",function(r){y(e);let o=u(2);return w(o.changePage(r-1))}),g()}if(i&2){let e=u(2);f("ngModel",e.currentPage())("disabled",e.empty())}}function cae(i,n){i&1&&ue(0)}function dae(i,n){if(i&1&&v(0,cae,1,0,"ng-container",16),i&2){let e=n.$implicit,t=u(4);f("ngTemplateOutlet",t.dropdownItemTemplate)("ngTemplateOutletContext",ne(2,Lw,e))}}function pae(i,n){i&1&&(he(0),v(1,dae,1,4,"ng-template",28),fe())}function uae(i,n){i&1&&ue(0)}function hae(i,n){if(i&1&&v(0,uae,1,0,"ng-container",21),i&2){let e=u(4);f("ngTemplateOutlet",e.dropdownIconTemplate)}}function fae(i,n){i&1&&v(0,hae,1,1,"ng-template",29)}function mae(i,n){if(i&1){let e=L();m(0,"p-dropdown",32),Oe("ngModelChange",function(r){y(e);let o=u(2);return Re(o.rows,r)||(o.rows=r),w(r)}),k("onChange",function(r){y(e);let o=u(2);return w(o.onRppChange(r))}),v(1,pae,2,0,"ng-container",27)(2,fae,1,0,null,27),g()}if(i&2){let e=u(2);f("options",e.rowsPerPageItems),Te("ngModel",e.rows),f("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)("ariaLabel",e.getAriaLabel("rowsPerPageLabel")),p(),f("ngIf",e.dropdownItemTemplate),p(),f("ngIf",e.dropdownIconTemplate)}}function gae(i,n){i&1&&ue(0)}function _ae(i,n){if(i&1&&(m(0,"div",33),v(1,gae,1,0,"ng-container",16),g()),i&2){let e=u(2);G("data-pc-section","end"),p(),f("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",ne(3,Lw,e.paginatorState))}}function Cae(i,n){if(i&1){let e=L();m(0,"div",1),v(1,Dse,2,5,"div",2)(2,Fse,2,1,"span",3)(3,Vse,3,7,"button",4),m(4,"button",5),k("click",function(r){y(e);let o=u();return w(o.changePageToPrev(r))}),v(5,Bse,1,1,"AngleLeftIcon",6)(6,Gse,2,1,"span",7),g(),v(7,Wse,2,1,"span",8)(8,Qse,4,8,"p-dropdown",9),m(9,"button",10),k("click",function(r){y(e);let o=u();return w(o.changePageToNext(r))}),v(10,Zse,1,1,"AngleRightIcon",6)(11,iae,2,1,"span",7),g(),v(12,aae,3,7,"button",11)(13,lae,1,2,"p-inputNumber",12)(14,mae,3,8,"p-dropdown",13)(15,_ae,2,5,"div",14),g()}if(i&2){let e=u();ce(e.styleClass),f("ngStyle",e.style)("ngClass","p-paginator p-component"),G("data-pc-section","paginator")("data-pc-section","root"),p(),f("ngIf",e.templateLeft),p(),f("ngIf",e.showCurrentPageReport),p(),f("ngIf",e.showFirstLastIcon),p(),f("disabled",e.isFirstPage()||e.empty())("ngClass",ne(25,Nw,e.isFirstPage()||e.empty())),G("aria-label",e.getAriaLabel("prevPageLabel")),p(),f("ngIf",!e.previousPageLinkIconTemplate),p(),f("ngIf",e.previousPageLinkIconTemplate),p(),f("ngIf",e.showPageLinks),p(),f("ngIf",e.showJumpToPageDropdown),p(),f("disabled",e.isLastPage()||e.empty())("ngClass",ne(27,Nw,e.isLastPage()||e.empty())),G("aria-label",e.getAriaLabel("nextPageLabel")),p(),f("ngIf",!e.nextPageLinkIconTemplate),p(),f("ngIf",e.nextPageLinkIconTemplate),p(),f("ngIf",e.showFirstLastIcon),p(),f("ngIf",e.showJumpToPageInput),p(),f("ngIf",e.rowsPerPageOptions),p(),f("ngIf",e.templateRight)}}var Mw=(()=>{class i{cd;config;pageLinkSize=5;style;styleClass;alwaysShow=!0;dropdownAppendTo;templateLeft;templateRight;appendTo;dropdownScrollHeight="200px";currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showFirstLastIcon=!0;totalRecords=0;rows=0;rowsPerPageOptions;showJumpToPageDropdown;showJumpToPageInput;jumpToPageItemTemplate;showPageLinks=!0;locale;dropdownItemTemplate;get first(){return this._first}set first(e){this._first=e}onPageChange=new X;templates;dropdownIconTemplate;firstPageLinkIconTemplate;previousPageLinkIconTemplate;lastPageLinkIconTemplate;nextPageLinkIconTemplate;pageLinks;pageItems;rowsPerPageItems;paginatorState;_first=0;_page=0;constructor(e,t){this.cd=e,this.config=t}ngOnInit(){this.updatePaginatorState()}getAriaLabel(e){return this.config.translation.aria?this.config.translation.aria[e]:void 0}getPageAriaLabel(e){return this.config.translation.aria?this.config.translation.aria.pageLabel.replace(/{page}/g,`${e}`):void 0}getLocalization(e){let t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),r=new Map(t.map((o,s)=>[s,o]));return e>9?String(e).split("").map(s=>r.get(Number(s))).join(""):r.get(e)}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"firstpagelinkicon":this.firstPageLinkIconTemplate=e.template;break;case"previouspagelinkicon":this.previousPageLinkIconTemplate=e.template;break;case"lastpagelinkicon":this.lastPageLinkIconTemplate=e.template;break;case"nextpagelinkicon":this.nextPageLinkIconTemplate=e.template;break}})}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions(),e.pageLinkSize&&this.updatePageLinks()}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)typeof e=="object"&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(this.getLocalization(e)),value:e})}}isFirstPage(){return this.getPage()===0}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),t=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-t/2)),o=Math.min(e-1,r+t-1);var s=this.pageLinkSize-(o-r+1);return r=Math.max(0,r-s),[r,o]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),t=e[0],r=e[1];for(let o=t;o<=r;o++)this.pageLinks.push(o+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let o=0;o<this.getPageCount();o++)this.pageItems.push({label:String(o+1),value:o})}}changePage(e){var t=this.getPageCount();if(e>=0&&e<t){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:t};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){let e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,t){this.changePage(t),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return this.getPageCount()===0}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}static \u0275fac=function(t){return new(t||i)(S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-paginator"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{pageLinkSize:[2,"pageLinkSize","pageLinkSize",We],style:"style",styleClass:"styleClass",alwaysShow:[2,"alwaysShow","alwaysShow",Y],dropdownAppendTo:"dropdownAppendTo",templateLeft:"templateLeft",templateRight:"templateRight",appendTo:"appendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[2,"showCurrentPageReport","showCurrentPageReport",Y],showFirstLastIcon:[2,"showFirstLastIcon","showFirstLastIcon",Y],totalRecords:[2,"totalRecords","totalRecords",We],rows:[2,"rows","rows",We],rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:[2,"showJumpToPageDropdown","showJumpToPageDropdown",Y],showJumpToPageInput:[2,"showJumpToPageInput","showJumpToPageInput",Y],jumpToPageItemTemplate:"jumpToPageItemTemplate",showPageLinks:[2,"showPageLinks","showPageLinks",Y],locale:"locale",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[tt,Yi],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"click","disabled","ngClass"],[3,"styleClass",4,"ngIf"],["class","p-paginator-icon",4,"ngIf"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"click","disabled","ngClass"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ariaLabel","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"click","disabled","ngClass"],[3,"styleClass"],[1,"p-paginator-icon"],[4,"ngTemplateOutlet"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"click","ngClass"],["styleClass","p-paginator-page-options",3,"onChange","options","ngModel","disabled","appendTo","scrollHeight"],["pTemplate","selectedItem"],[4,"ngIf"],["pTemplate","item"],["pTemplate","dropdownicon"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"click","disabled","ngClass"],[1,"p-paginator-page-input",3,"ngModelChange","ngModel","disabled"],["styleClass","p-paginator-rpp-options",3,"ngModelChange","onChange","options","ngModel","disabled","appendTo","scrollHeight","ariaLabel"],[1,"p-paginator-right-content"]],template:function(t,r){t&1&&v(0,Cae,16,29,"div",0),t&2&&f("ngIf",r.alwaysShow?!0:r.pageLinks&&r.pageLinks.length>1)},dependencies:()=>[je,hn,rt,mt,De,mr,Ee,vO,Pi,mn,nn,_O,CO,IO,xp],styles:[`@layer primeng{.p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),Vw=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Ap,P_,bp,dt,ln,_O,CO,IO,xp,Ap,P_,bp,dt]})}return i})();var bO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ChevronUpIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12.2097 10.4113C12.1057 10.4118 12.0027 10.3915 11.9067 10.3516C11.8107 10.3118 11.7237 10.2532 11.6506 10.1792L6.93602 5.46461L2.22139 10.1476C2.07272 10.244 1.89599 10.2877 1.71953 10.2717C1.54307 10.2556 1.3771 10.1808 1.24822 10.0593C1.11933 9.93766 1.035 9.77633 1.00874 9.6011C0.982477 9.42587 1.0158 9.2469 1.10338 9.09287L6.37701 3.81923C6.52533 3.6711 6.72639 3.58789 6.93602 3.58789C7.14565 3.58789 7.3467 3.6711 7.49502 3.81923L12.7687 9.09287C12.9168 9.24119 13 9.44225 13 9.65187C13 9.8615 12.9168 10.0626 12.7687 10.2109C12.616 10.3487 12.4151 10.4207 12.2097 10.4113Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var SO=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["CalendarIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.7838 1.51351H9.83783V0.567568C9.83783 0.417039 9.77804 0.272676 9.6716 0.166237C9.56516 0.0597971 9.42079 0 9.27027 0C9.11974 0 8.97538 0.0597971 8.86894 0.166237C8.7625 0.272676 8.7027 0.417039 8.7027 0.567568V1.51351H5.29729V0.567568C5.29729 0.417039 5.2375 0.272676 5.13106 0.166237C5.02462 0.0597971 4.88025 0 4.72973 0C4.5792 0 4.43484 0.0597971 4.3284 0.166237C4.22196 0.272676 4.16216 0.417039 4.16216 0.567568V1.51351H3.21621C2.66428 1.51351 2.13494 1.73277 1.74467 2.12305C1.35439 2.51333 1.13513 3.04266 1.13513 3.59459V11.9189C1.13513 12.4709 1.35439 13.0002 1.74467 13.3905C2.13494 13.7807 2.66428 14 3.21621 14H10.7838C11.3357 14 11.865 13.7807 12.2553 13.3905C12.6456 13.0002 12.8649 12.4709 12.8649 11.9189V3.59459C12.8649 3.04266 12.6456 2.51333 12.2553 2.12305C11.865 1.73277 11.3357 1.51351 10.7838 1.51351ZM3.21621 2.64865H4.16216V3.59459C4.16216 3.74512 4.22196 3.88949 4.3284 3.99593C4.43484 4.10237 4.5792 4.16216 4.72973 4.16216C4.88025 4.16216 5.02462 4.10237 5.13106 3.99593C5.2375 3.88949 5.29729 3.74512 5.29729 3.59459V2.64865H8.7027V3.59459C8.7027 3.74512 8.7625 3.88949 8.86894 3.99593C8.97538 4.10237 9.11974 4.16216 9.27027 4.16216C9.42079 4.16216 9.56516 4.10237 9.6716 3.99593C9.77804 3.88949 9.83783 3.74512 9.83783 3.59459V2.64865H10.7838C11.0347 2.64865 11.2753 2.74831 11.4527 2.92571C11.6301 3.10311 11.7297 3.34371 11.7297 3.59459V5.67568H2.27027V3.59459C2.27027 3.34371 2.36993 3.10311 2.54733 2.92571C2.72473 2.74831 2.96533 2.64865 3.21621 2.64865ZM10.7838 12.8649H3.21621C2.96533 12.8649 2.72473 12.7652 2.54733 12.5878C2.36993 12.4104 2.27027 12.1698 2.27027 11.9189V6.81081H11.7297V11.9189C11.7297 12.1698 11.6301 12.4104 11.4527 12.5878C11.2753 12.7652 11.0347 12.8649 10.7838 12.8649Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var Iae=["container"],yae=["inputfield"],wae=["contentWrapper"],vae=[[["p-header"]],[["p-footer"]]],bae=["p-header","p-footer"],Sae=(i,n,e,t,r)=>({"p-calendar":!0,"p-input-icon-right":i,"p-calendar-w-btn":n,"p-calendar-timeonly":e,"p-calendar-disabled":t,"p-focus":r}),Eae=i=>({clickCallBack:i}),Aae=i=>({"p-datepicker-icon":i}),xae=(i,n,e,t,r,o)=>({"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":n,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":t,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":o}),e5=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),Tae=i=>({value:"visibleTouchUI",params:i}),Oae=i=>({value:"visible",params:i}),EO=i=>({$implicit:i}),Rae=(i,n)=>({"p-datepicker-other-month":i,"p-datepicker-today":n}),Pae=(i,n)=>({"p-highlight p-datepicker-current-day":i,"p-disabled":n}),i5=(i,n)=>({"p-highlight":i,"p-disabled":n}),t5=i=>[i];function Dae(i,n){if(i&1){let e=L();m(0,"TimesIcon",11),k("click",function(){y(e);let r=u(3);return w(r.clear())}),g()}i&2&&f("styleClass","p-calendar-clear-icon")}function Fae(i,n){}function kae(i,n){i&1&&v(0,Fae,0,0,"ng-template")}function Nae(i,n){if(i&1){let e=L();m(0,"span",12),k("click",function(){y(e);let r=u(3);return w(r.clear())}),v(1,kae,1,0,null,13),g()}if(i&2){let e=u(3);p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function Lae(i,n){if(i&1&&(he(0),v(1,Dae,1,1,"TimesIcon",9)(2,Nae,2,1,"span",10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.clearIconTemplate),p(),f("ngIf",e.clearIconTemplate)}}function Mae(i,n){if(i&1&&P(0,"span",16),i&2){let e=u(3);f("ngClass",e.icon)}}function Vae(i,n){i&1&&P(0,"CalendarIcon")}function Bae(i,n){}function Uae(i,n){i&1&&v(0,Bae,0,0,"ng-template")}function jae(i,n){if(i&1&&(he(0),v(1,Vae,1,0,"CalendarIcon",7)(2,Uae,1,0,null,13),fe()),i&2){let e=u(3);p(),f("ngIf",!e.triggerIconTemplate),p(),f("ngTemplateOutlet",e.triggerIconTemplate)}}function Gae(i,n){if(i&1){let e=L();m(0,"button",14),k("click",function(r){y(e),u();let o=He(1),s=u();return w(s.onButtonClick(r,o))}),v(1,Mae,1,1,"span",15)(2,jae,3,2,"ng-container",7),g()}if(i&2){let e,t=u(2);f("disabled",t.disabled),G("aria-label",t.iconButtonAriaLabel)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.panelId:null),p(),f("ngIf",t.icon),p(),f("ngIf",!t.icon)}}function Hae(i,n){if(i&1){let e=L();m(0,"CalendarIcon",19),k("click",function(r){y(e);let o=u(3);return w(o.onButtonClick(r))}),g()}if(i&2){let e=u(3);f("ngClass",ne(1,Aae,e.showOnFocus))}}function Wae(i,n){i&1&&ue(0)}function zae(i,n){if(i&1&&(he(0),v(1,Hae,1,3,"CalendarIcon",17)(2,Wae,1,0,"ng-container",18),fe()),i&2){let e=u(2);p(),f("ngIf",!e.inputIconTemplate),p(),f("ngTemplateOutlet",e.inputIconTemplate)("ngTemplateOutletContext",ne(3,Eae,e.onButtonClick.bind(e)))}}function Kae(i,n){if(i&1){let e=L();m(0,"input",6,1),k("focus",function(r){y(e);let o=u();return w(o.onInputFocus(r))})("keydown",function(r){y(e);let o=u();return w(o.onInputKeydown(r))})("click",function(){y(e);let r=u();return w(r.onInputClick())})("blur",function(r){y(e);let o=u();return w(o.onInputBlur(r))})("input",function(r){y(e);let o=u();return w(o.onUserInput(r))}),g(),v(2,Lae,3,2,"ng-container",7)(3,Gae,3,6,"button",8)(4,zae,3,5,"ng-container",7)}if(i&2){let e,t=u();ce(t.inputStyleClass),f("value",t.inputFieldValue)("readonly",t.readonlyInput)("ngStyle",t.inputStyle)("placeholder",t.placeholder||"")("disabled",t.disabled)("ngClass",t.inputClass)("autofocus",t.autofocus),G("id",t.inputId)("name",t.name)("required",t.required)("aria-required",t.required)("aria-expanded",(e=t.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",t.overlayVisible?t.panelId:null)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("tabindex",t.tabindex)("inputmode",t.touchUI?"off":null),p(2),f("ngIf",t.showClear&&!t.disabled&&t.value!=null),p(),f("ngIf",t.showIcon&&t.iconDisplay==="button"),p(),f("ngIf",t.iconDisplay==="input"&&t.showIcon)}}function $ae(i,n){i&1&&ue(0)}function Jae(i,n){i&1&&P(0,"ChevronLeftIcon",40),i&2&&f("styleClass","p-datepicker-prev-icon")}function qae(i,n){}function Yae(i,n){i&1&&v(0,qae,0,0,"ng-template")}function Xae(i,n){if(i&1&&(m(0,"span",41),v(1,Yae,1,0,null,13),g()),i&2){let e=u(5);p(),f("ngTemplateOutlet",e.previousIconTemplate)}}function Qae(i,n){if(i&1){let e=L();m(0,"button",38),k("keydown",function(r){y(e);let o=u(4);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(4);return w(o.onPrevButtonClick(r))}),v(1,Jae,1,1,"ChevronLeftIcon",35)(2,Xae,2,1,"span",39),g()}if(i&2){let e=u(4);G("aria-label",e.prevIconAriaLabel),p(),f("ngIf",!e.previousIconTemplate),p(),f("ngIf",e.previousIconTemplate)}}function Zae(i,n){if(i&1){let e=L();m(0,"button",42),k("click",function(r){y(e);let o=u(4);return w(o.switchToMonthView(r))})("keydown",function(r){y(e);let o=u(4);return w(o.onContainerButtonKeydown(r))}),F(1),g()}if(i&2){let e=u().$implicit,t=u(3);f("disabled",t.switchViewButtonDisabled()),G("aria-label",t.getTranslation("chooseMonth")),p(),J(" ",t.getMonthName(e.month)," ")}}function ele(i,n){if(i&1){let e=L();m(0,"button",43),k("click",function(r){y(e);let o=u(4);return w(o.switchToYearView(r))})("keydown",function(r){y(e);let o=u(4);return w(o.onContainerButtonKeydown(r))}),F(1),g()}if(i&2){let e=u().$implicit,t=u(3);f("disabled",t.switchViewButtonDisabled()),G("aria-label",t.getTranslation("chooseYear")),p(),J(" ",t.getYear(e)," ")}}function tle(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(5);p(),Es("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function ile(i,n){i&1&&ue(0)}function nle(i,n){if(i&1&&(m(0,"span",44),v(1,tle,2,2,"ng-container",7)(2,ile,1,0,"ng-container",18),g()),i&2){let e=u(4);p(),f("ngIf",!e.decadeTemplate),p(),f("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",ne(3,EO,e.yearPickerValues))}}function rle(i,n){i&1&&P(0,"ChevronRightIcon",40),i&2&&f("styleClass","p-datepicker-next-icon")}function ole(i,n){}function sle(i,n){i&1&&v(0,ole,0,0,"ng-template")}function ale(i,n){if(i&1&&(m(0,"span",45),v(1,sle,1,0,null,13),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.nextIconTemplate)}}function lle(i,n){if(i&1&&(m(0,"th",51)(1,"span"),F(2),g()()),i&2){let e=u(5);p(2),$(e.getTranslation("weekHeader"))}}function cle(i,n){if(i&1&&(m(0,"th",52)(1,"span"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e)}}function dle(i,n){if(i&1&&(m(0,"td",55)(1,"span",56),F(2),g()()),i&2){let e=u().index,t=u(2).$implicit;p(2),J(" ",t.weekNumbers[e]," ")}}function ple(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(2).$implicit;p(),$(e.day)}}function ule(i,n){i&1&&ue(0)}function hle(i,n){if(i&1&&(he(0),v(1,ule,1,0,"ng-container",18),fe()),i&2){let e=u(2).$implicit,t=u(6);p(),f("ngTemplateOutlet",t.dateTemplate)("ngTemplateOutletContext",ne(2,EO,e))}}function fle(i,n){i&1&&ue(0)}function mle(i,n){if(i&1&&(he(0),v(1,fle,1,0,"ng-container",18),fe()),i&2){let e=u(2).$implicit,t=u(6);p(),f("ngTemplateOutlet",t.disabledDateTemplate)("ngTemplateOutletContext",ne(2,EO,e))}}function gle(i,n){if(i&1&&(m(0,"div",59),F(1),g()),i&2){let e=u(2).$implicit;p(),J(" ",e.day," ")}}function _le(i,n){if(i&1){let e=L();he(0),m(1,"span",57),k("click",function(r){y(e);let o=u().$implicit,s=u(6);return w(s.onDateSelect(r,o))})("keydown",function(r){y(e);let o=u().$implicit,s=u(3).index,a=u(3);return w(a.onDateCellKeydown(r,o,s))}),v(2,ple,2,1,"ng-container",7)(3,hle,2,4,"ng-container",7)(4,mle,2,4,"ng-container",7),g(),v(5,gle,2,1,"div",58),fe()}if(i&2){let e=u().$implicit,t=u(6);p(),f("ngClass",Qe(6,Pae,t.isSelected(e)&&e.selectable,!e.selectable)),G("data-date",t.formatDateKey(t.formatDateMetaToDate(e))),p(),f("ngIf",!t.dateTemplate&&(e.selectable||!t.disabledDateTemplate)),p(),f("ngIf",e.selectable||!t.disabledDateTemplate),p(),f("ngIf",!e.selectable),p(),f("ngIf",t.isSelected(e))}}function Cle(i,n){if(i&1&&(m(0,"td",16),v(1,_le,6,9,"ng-container",7),g()),i&2){let e=n.$implicit,t=u(6);f("ngClass",Qe(3,Rae,e.otherMonth,e.today)),G("aria-label",e.day),p(),f("ngIf",e.otherMonth?t.showOtherMonths:!0)}}function Ile(i,n){if(i&1&&(m(0,"tr"),v(1,dle,3,1,"td",53)(2,Cle,2,6,"td",54),g()),i&2){let e=n.$implicit,t=u(5);p(),f("ngIf",t.showWeek),p(),f("ngForOf",e)}}function yle(i,n){if(i&1&&(m(0,"div",46)(1,"table",47)(2,"thead")(3,"tr"),v(4,lle,3,1,"th",48)(5,cle,3,1,"th",49),g()(),m(6,"tbody"),v(7,Ile,3,2,"tr",50),g()()()),i&2){let e=u().$implicit,t=u(3);p(4),f("ngIf",t.showWeek),p(),f("ngForOf",t.weekDays),p(2),f("ngForOf",e.dates)}}function wle(i,n){if(i&1){let e=L();m(0,"div",27)(1,"div",28),v(2,Qae,3,3,"button",29),m(3,"div",30),v(4,Zae,2,3,"button",31)(5,ele,2,3,"button",32)(6,nle,3,5,"span",33),g(),m(7,"button",34),k("keydown",function(r){y(e);let o=u(3);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(3);return w(o.onNextButtonClick(r))}),v(8,rle,1,1,"ChevronRightIcon",35)(9,ale,2,1,"span",36),g()(),v(10,yle,8,3,"div",37),g()}if(i&2){let e=n.index,t=u(3);p(2),f("ngIf",e===0),p(2),f("ngIf",t.currentView==="date"),p(),f("ngIf",t.currentView!=="year"),p(),f("ngIf",t.currentView==="year"),p(),Wn("display",t.numberOfMonths===1||e===t.numberOfMonths-1?"inline-flex":"none"),G("aria-label",t.nextIconAriaLabel),p(),f("ngIf",!t.nextIconTemplate),p(),f("ngIf",t.nextIconTemplate),p(),f("ngIf",t.currentView==="date")}}function vle(i,n){if(i&1&&(m(0,"div",59),F(1),g()),i&2){let e=u().$implicit;p(),J(" ",e," ")}}function ble(i,n){if(i&1){let e=L();m(0,"span",62),k("click",function(r){let o=y(e).index,s=u(4);return w(s.onMonthSelect(r,o))})("keydown",function(r){let o=y(e).index,s=u(4);return w(s.onMonthCellKeydown(r,o))}),F(1),v(2,vle,2,1,"div",58),g()}if(i&2){let e=n.$implicit,t=n.index,r=u(4);f("ngClass",Qe(3,i5,r.isMonthSelected(t),r.isMonthDisabled(t))),p(),J(" ",e," "),p(),f("ngIf",r.isMonthSelected(t))}}function Sle(i,n){if(i&1&&(m(0,"div",60),v(1,ble,3,6,"span",61),g()),i&2){let e=u(3);p(),f("ngForOf",e.monthPickerValues())}}function Ele(i,n){if(i&1&&(m(0,"div",59),F(1),g()),i&2){let e=u().$implicit;p(),J(" ",e," ")}}function Ale(i,n){if(i&1){let e=L();m(0,"span",65),k("click",function(r){let o=y(e).$implicit,s=u(4);return w(s.onYearSelect(r,o))})("keydown",function(r){let o=y(e).$implicit,s=u(4);return w(s.onYearCellKeydown(r,o))}),F(1),v(2,Ele,2,1,"div",58),g()}if(i&2){let e=n.$implicit,t=u(4);f("ngClass",Qe(3,i5,t.isYearSelected(e),t.isYearDisabled(e))),p(),J(" ",e," "),p(),f("ngIf",t.isYearSelected(e))}}function xle(i,n){if(i&1&&(m(0,"div",63),v(1,Ale,3,6,"span",64),g()),i&2){let e=u(3);p(),f("ngForOf",e.yearPickerValues())}}function Tle(i,n){if(i&1&&(he(0),m(1,"div",23),v(2,wle,11,10,"div",24),g(),v(3,Sle,2,1,"div",25)(4,xle,2,1,"div",26),fe()),i&2){let e=u(2);p(2),f("ngForOf",e.months),p(),f("ngIf",e.currentView==="month"),p(),f("ngIf",e.currentView==="year")}}function Ole(i,n){i&1&&P(0,"ChevronUpIcon")}function Rle(i,n){}function Ple(i,n){i&1&&v(0,Rle,0,0,"ng-template")}function Dle(i,n){i&1&&(he(0),F(1,"0"),fe())}function Fle(i,n){i&1&&P(0,"ChevronDownIcon")}function kle(i,n){}function Nle(i,n){i&1&&v(0,kle,0,0,"ng-template")}function Lle(i,n){i&1&&P(0,"ChevronUpIcon")}function Mle(i,n){}function Vle(i,n){i&1&&v(0,Mle,0,0,"ng-template")}function Ble(i,n){i&1&&(he(0),F(1,"0"),fe())}function Ule(i,n){i&1&&P(0,"ChevronDownIcon")}function jle(i,n){}function Gle(i,n){i&1&&v(0,jle,0,0,"ng-template")}function Hle(i,n){if(i&1&&(m(0,"div",69)(1,"span"),F(2),g()()),i&2){let e=u(3);p(2),$(e.timeSeparator)}}function Wle(i,n){i&1&&P(0,"ChevronUpIcon")}function zle(i,n){}function Kle(i,n){i&1&&v(0,zle,0,0,"ng-template")}function $le(i,n){i&1&&(he(0),F(1,"0"),fe())}function Jle(i,n){i&1&&P(0,"ChevronDownIcon")}function qle(i,n){}function Yle(i,n){i&1&&v(0,qle,0,0,"ng-template")}function Xle(i,n){if(i&1){let e=L();m(0,"div",74)(1,"button",68),k("keydown",function(r){y(e);let o=u(3);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(3);return w(o.incrementSecond(r))})("keydown.space",function(r){y(e);let o=u(3);return w(o.incrementSecond(r))})("mousedown",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(3);return w(r.onTimePickerElementMouseLeave())}),v(2,Wle,1,0,"ChevronUpIcon",7)(3,Kle,1,0,null,13),g(),m(4,"span"),v(5,$le,2,0,"ng-container",7),F(6),g(),m(7,"button",68),k("keydown",function(r){y(e);let o=u(3);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(3);return w(o.decrementSecond(r))})("keydown.space",function(r){y(e);let o=u(3);return w(o.decrementSecond(r))})("mousedown",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(3);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(3);return w(r.onTimePickerElementMouseLeave())}),v(8,Jle,1,0,"ChevronDownIcon",7)(9,Yle,1,0,null,13),g()()}if(i&2){let e=u(3);p(),G("aria-label",e.getTranslation("nextSecond")),p(),f("ngIf",!e.incrementIconTemplate),p(),f("ngTemplateOutlet",e.incrementIconTemplate),p(2),f("ngIf",e.currentSecond<10),p(),$(e.currentSecond),p(),G("aria-label",e.getTranslation("prevSecond")),p(),f("ngIf",!e.decrementIconTemplate),p(),f("ngTemplateOutlet",e.decrementIconTemplate)}}function Qle(i,n){i&1&&P(0,"ChevronUpIcon")}function Zle(i,n){}function ece(i,n){i&1&&v(0,Zle,0,0,"ng-template")}function tce(i,n){i&1&&P(0,"ChevronDownIcon")}function ice(i,n){}function nce(i,n){i&1&&v(0,ice,0,0,"ng-template")}function rce(i,n){if(i&1){let e=L();m(0,"div",75)(1,"button",76),k("keydown",function(r){y(e);let o=u(3);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(3);return w(o.toggleAMPM(r))})("keydown.enter",function(r){y(e);let o=u(3);return w(o.toggleAMPM(r))}),v(2,Qle,1,0,"ChevronUpIcon",7)(3,ece,1,0,null,13),g(),m(4,"span"),F(5),g(),m(6,"button",76),k("keydown",function(r){y(e);let o=u(3);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(3);return w(o.toggleAMPM(r))})("keydown.enter",function(r){y(e);let o=u(3);return w(o.toggleAMPM(r))}),v(7,tce,1,0,"ChevronDownIcon",7)(8,nce,1,0,null,13),g()()}if(i&2){let e=u(3);p(),G("aria-label",e.getTranslation("am")),p(),f("ngIf",!e.incrementIconTemplate),p(),f("ngTemplateOutlet",e.incrementIconTemplate),p(2),$(e.pm?"PM":"AM"),p(),G("aria-label",e.getTranslation("pm")),p(),f("ngIf",!e.decrementIconTemplate),p(),f("ngTemplateOutlet",e.decrementIconTemplate)}}function oce(i,n){if(i&1){let e=L();m(0,"div",66)(1,"div",67)(2,"button",68),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(2);return w(o.incrementHour(r))})("keydown.space",function(r){y(e);let o=u(2);return w(o.incrementHour(r))})("mousedown",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(2);return w(r.onTimePickerElementMouseLeave())}),v(3,Ole,1,0,"ChevronUpIcon",7)(4,Ple,1,0,null,13),g(),m(5,"span"),v(6,Dle,2,0,"ng-container",7),F(7),g(),m(8,"button",68),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(2);return w(o.decrementHour(r))})("keydown.space",function(r){y(e);let o=u(2);return w(o.decrementHour(r))})("mousedown",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(2);return w(r.onTimePickerElementMouseLeave())}),v(9,Fle,1,0,"ChevronDownIcon",7)(10,Nle,1,0,null,13),g()(),m(11,"div",69)(12,"span"),F(13),g()(),m(14,"div",70)(15,"button",68),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(2);return w(o.incrementMinute(r))})("keydown.space",function(r){y(e);let o=u(2);return w(o.incrementMinute(r))})("mousedown",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(2);return w(r.onTimePickerElementMouseLeave())}),v(16,Lle,1,0,"ChevronUpIcon",7)(17,Vle,1,0,null,13),g(),m(18,"span"),v(19,Ble,2,0,"ng-container",7),F(20),g(),m(21,"button",68),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("keydown.enter",function(r){y(e);let o=u(2);return w(o.decrementMinute(r))})("keydown.space",function(r){y(e);let o=u(2);return w(o.decrementMinute(r))})("mousedown",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.enter",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("keyup.space",function(r){y(e);let o=u(2);return w(o.onTimePickerElementMouseUp(r))})("mouseleave",function(){y(e);let r=u(2);return w(r.onTimePickerElementMouseLeave())}),v(22,Ule,1,0,"ChevronDownIcon",7)(23,Gle,1,0,null,13),g()(),v(24,Hle,3,1,"div",71)(25,Xle,10,8,"div",72)(26,rce,9,7,"div",73),g()}if(i&2){let e=u(2);p(2),G("aria-label",e.getTranslation("nextHour")),p(),f("ngIf",!e.incrementIconTemplate),p(),f("ngTemplateOutlet",e.incrementIconTemplate),p(2),f("ngIf",e.currentHour<10),p(),$(e.currentHour),p(),G("aria-label",e.getTranslation("prevHour")),p(),f("ngIf",!e.decrementIconTemplate),p(),f("ngTemplateOutlet",e.decrementIconTemplate),p(3),$(e.timeSeparator),p(2),G("aria-label",e.getTranslation("nextMinute")),p(),f("ngIf",!e.incrementIconTemplate),p(),f("ngTemplateOutlet",e.incrementIconTemplate),p(2),f("ngIf",e.currentMinute<10),p(),$(e.currentMinute),p(),G("aria-label",e.getTranslation("prevMinute")),p(),f("ngIf",!e.decrementIconTemplate),p(),f("ngTemplateOutlet",e.decrementIconTemplate),p(),f("ngIf",e.showSeconds),p(),f("ngIf",e.showSeconds),p(),f("ngIf",e.hourFormat=="12")}}function sce(i,n){if(i&1){let e=L();m(0,"div",77)(1,"button",78),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(2);return w(o.onTodayButtonClick(r))}),g(),m(2,"button",78),k("keydown",function(r){y(e);let o=u(2);return w(o.onContainerButtonKeydown(r))})("click",function(r){y(e);let o=u(2);return w(o.onClearButtonClick(r))}),g()()}if(i&2){let e=u(2);p(),f("label",e.getTranslation("today"))("ngClass",ne(4,t5,e.todayButtonStyleClass)),p(),f("label",e.getTranslation("clear"))("ngClass",ne(6,t5,e.clearButtonStyleClass))}}function ace(i,n){i&1&&ue(0)}function lce(i,n){if(i&1){let e=L();m(0,"div",20,2),k("@overlayAnimation.start",function(r){y(e);let o=u();return w(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){y(e);let o=u();return w(o.onOverlayAnimationDone(r))})("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))}),hi(2),v(3,$ae,1,0,"ng-container",13)(4,Tle,5,3,"ng-container",7)(5,oce,27,20,"div",21)(6,sce,3,8,"div",22),hi(7,1),v(8,ace,1,0,"ng-container",13),g()}if(i&2){let e=u();ce(e.panelStyleClass),f("ngStyle",e.panelStyle)("ngClass",Po(15,xae,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,e.view==="month",e.touchUI))("@overlayAnimation",e.touchUI?ne(25,Tae,Qe(22,e5,e.showTransitionOptions,e.hideTransitionOptions)):ne(30,Oae,Qe(27,e5,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),G("id",e.panelId)("aria-label",e.getTranslation("chooseDate"))("role",e.inline?null:"dialog")("aria-modal",e.inline?null:"true"),p(3),f("ngTemplateOutlet",e.headerTemplate),p(),f("ngIf",!e.timeOnly),p(),f("ngIf",(e.showTime||e.timeOnly)&&e.currentView==="date"),p(),f("ngIf",e.showButtonBar),p(2),f("ngTemplateOutlet",e.footerTemplate)}}var cce={provide:fn,useExisting:Zt(()=>D_),multi:!0},D_=(()=>{class i{document;el;renderer;cd;zone;config;overlayService;iconDisplay="button";style;styleClass;inputStyle;inputId;name;inputStyleClass;placeholder;ariaLabelledBy;ariaLabel;iconAriaLabel;disabled;dateFormat;multipleSeparator=",";rangeSeparator="-";inline=!1;showOtherMonths=!0;selectOtherMonths;showIcon;icon;appendTo;readonlyInput;shortYearCutoff="+10";monthNavigator;yearNavigator;hourFormat="24";timeOnly;stepYearPicker=10;stepHour=1;stepMinute=1;stepSecond=1;showSeconds=!1;required;showOnFocus=!0;showWeek=!1;startWeekFromFirstDayOfYear=!1;showClear=!1;dataType="date";selectionMode="single";maxDateCount;showButtonBar;todayButtonStyleClass="p-button-text";clearButtonStyleClass="p-button-text";autofocus;autoZIndex=!0;baseZIndex=0;panelStyleClass;panelStyle;keepInvalid=!1;hideOnDateTimeSelect=!0;touchUI;timeSeparator=":";focusTrap=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";tabindex;variant="outlined";get minDate(){return this._minDate}set minDate(e){this._minDate=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,this.currentMonth!=null&&this.currentMonth!=null&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){let t=e.split(":"),r=parseInt(t[0]),o=parseInt(t[1]);this.populateYearOptions(r,o)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,this.currentHour===void 0&&this.initTime(this.value||new Date),this.updateInputfield()}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){let t=e||new Date;this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear(),this.initTime(t),this.createMonths(this.currentMonth,this.currentYear)}}get inputClass(){return{"p-inputtext p-component":!0,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}onFocus=new X;onBlur=new X;onClose=new X;onSelect=new X;onClear=new X;onInput=new X;onTodayClick=new X;onClearClick=new X;onMonthChange=new X;onYearChange=new X;onClickOutside=new X;onShow=new X;templates;containerViewChild;inputfieldViewChild;set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):!this.focus&&!this.inline&&this.initFocusableCell())}contentViewChild;value;dates;months;weekDays;currentMonth;currentYear;currentHour;currentMinute;currentSecond;pm;mask;maskClickListener;overlay;responsiveStyleElement;overlayVisible;onModelChange=()=>{};onModelTouched=()=>{};calendarElement;timePickerTimer;documentClickListener;animationEndListener;ticksTo1970;yearOptions;focus;isKeydown;filled;inputFieldValue=null;_minDate;_maxDate;_showTime;_yearRange;preventDocumentListener;dateTemplate;headerTemplate;footerTemplate;disabledDateTemplate;decadeTemplate;previousIconTemplate;nextIconTemplate;triggerIconTemplate;clearIconTemplate;decrementIconTemplate;incrementIconTemplate;inputIconTemplate;_disabledDates;_disabledDays;selectElement;todayElement;focusElement;scrollHandler;documentResizeListener;navigationState=null;isMonthNavigate;initialized;translationSubscription;_locale;_responsiveOptions;currentView;attributeSelector;panelId;_numberOfMonths=1;_firstDayOfWeek;_view="date";preventFocus;_defaultDate;_focusKey=null;window;get locale(){return this._locale}get iconButtonAriaLabel(){return this.iconAriaLabel?this.iconAriaLabel:this.getTranslation("chooseDate")}get prevIconAriaLabel(){return this.currentView==="year"?this.getTranslation("prevDecade"):this.currentView==="month"?this.getTranslation("prevYear"):this.getTranslation("prevMonth")}get nextIconAriaLabel(){return this.currentView==="year"?this.getTranslation("nextDecade"):this.currentView==="month"?this.getTranslation("nextYear"):this.getTranslation("nextMonth")}constructor(e,t,r,o,s,a,l){this.document=e,this.el=t,this.renderer=r,this.cd=o,this.zone=s,this.config=a,this.overlayService=l,this.window=this.document.defaultView}ngOnInit(){this.attributeSelector=Tt(),this.panelId=this.attributeSelector+"_panel";let e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.yearOptions=[],this.currentView=this.view,this.view==="date"&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=(1969*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"inputicon":this.inputIconTemplate=e.template;break;case"previousicon":this.previousIconTemplate=e.template;break;case"nexticon":this.nextIconTemplate=e.template;break;case"triggericon":this.triggerIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"decrementicon":this.decrementIconTemplate=e.template;break;case"incrementicon":this.incrementIconTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.dateTemplate=e.template;break}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),!this.disabled&&!this.inline&&(this.initFocusableCell(),this.numberOfMonths===1&&this.contentViewChild&&this.contentViewChild.nativeElement&&(this.contentViewChild.nativeElement.style.width=j.getOuterWidth(this.containerViewChild?.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,t){this.yearOptions=[];for(let r=e;r<=t;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),t=this.getTranslation(Di.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(t[e]),e=e==6?0:++e}monthPickerValues(){let e=[];for(let t=0;t<=11;t++)e.push(this.config.getTranslation("monthNamesShort")[t]);return e}yearPickerValues(){let e=[],t=this.currentYear-this.currentYear%this.stepYearPicker;for(let r=0;r<this.stepYearPicker;r++)e.push(t+r);return e}createMonths(e,t){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let o=e+r,s=t;o>11&&(o=o%11-1,s=t+1),this.months.push(this.createMonth(o,s))}}getWeekNumber(e){let t=new Date(e.getTime());if(this.startWeekFromFirstDayOfYear){let o=+this.getFirstDateOfWeek();t.setDate(t.getDate()+6+o-t.getDay())}else t.setDate(t.getDate()+4-(t.getDay()||7));let r=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((r-t.getTime())/864e5)/7)+1}createMonth(e,t){let r=[],o=this.getFirstDayOfMonthIndex(e,t),s=this.getDaysCountInMonth(e,t),a=this.getDaysCountInPrevMonth(e,t),l=1,c=new Date,d=[],h=Math.ceil((s+o)/7);for(let _=0;_<h;_++){let C=[];if(_==0){for(let b=a-o+1;b<=a;b++){let E=this.getPreviousMonthAndYear(e,t);C.push({day:b,month:E.month,year:E.year,otherMonth:!0,today:this.isToday(c,b,E.month,E.year),selectable:this.isSelectable(b,E.month,E.year,!0)})}let I=7-C.length;for(let b=0;b<I;b++)C.push({day:l,month:e,year:t,today:this.isToday(c,l,e,t),selectable:this.isSelectable(l,e,t,!1)}),l++}else for(let I=0;I<7;I++){if(l>s){let b=this.getNextMonthAndYear(e,t);C.push({day:l-s,month:b.month,year:b.year,otherMonth:!0,today:this.isToday(c,l-s,b.month,b.year),selectable:this.isSelectable(l-s,b.month,b.year,!0)})}else C.push({day:l,month:e,year:t,today:this.isToday(c,l,e,t),selectable:this.isSelectable(l,e,t,!1)});l++}this.showWeek&&d.push(this.getWeekNumber(new Date(C[0].year,C[0].month,C[0].day))),r.push(C)}return{month:e,year:t,dates:r,weekNumbers:d}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){if(this.disabled){e.preventDefault();return}this.isMonthNavigate=!0,this.currentView==="month"?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):this.currentView==="year"?(this.decrementYearPickerStep(),setTimeout(()=>{this.updateFocus()},1)):(this.currentMonth===0?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear))}navForward(e){if(this.disabled){e.preventDefault();return}this.isMonthNavigate=!0,this.currentView==="month"?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):this.currentView==="year"?(this.incrementYearPickerStep(),setTimeout(()=>{this.updateFocus()},1)):(this.currentMonth===11?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear))}decrementYear(){this.currentYear--;let e=this.yearOptions;if(this.yearNavigator&&this.currentYear<e[0]){let t=e[e.length-1]-e[0];this.populateYearOptions(e[0]-t,e[e.length-1]-t)}}decrementYearPickerStep(){this.currentYear=this.currentYear-this.stepYearPicker}incrementYearPickerStep(){this.currentYear=this.currentYear+this.stepYearPicker}incrementYear(){this.currentYear++;let e=this.yearOptions;if(this.yearNavigator&&this.currentYear>e[e.length-1]){let t=e[e.length-1]-e[0];this.populateYearOptions(e[0]+t,e[e.length-1]+t)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,t){if(this.disabled||!t.selectable){e.preventDefault();return}this.isMultipleSelection()&&this.isSelected(t)?(this.value=this.value.filter((r,o)=>!this.isDateEquals(r,t)),this.value.length===0&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(t)&&this.selectDate(t),this.hideOnDateTimeSelect&&(this.isSingleSelection()||this.isRangeSelection()&&this.value[1])&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()}shouldSelectDate(e){return this.isMultipleSelection()&&this.maxDateCount!=null?this.maxDateCount>(this.value?this.value.length:0):!0}onMonthSelect(e,t){this.view==="month"?this.onDateSelect(e,{year:this.currentYear,month:t,day:1,selectable:!0}):(this.currentMonth=t,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,t){this.view==="year"?this.onDateSelect(e,{year:t,month:0,day:1,selectable:!0}):(this.currentYear=t,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value){if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let t=0;t<this.value.length;t++){let r=this.formatDateTime(this.value[t]);e+=r,t!==this.value.length-1&&(e+=this.multipleSeparator+" ")}else if(this.isRangeSelection()&&this.value&&this.value.length){let t=this.value[0],r=this.value[1];e=this.formatDateTime(t),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let t=this.keepInvalid?e:null,r=this.isValidDateForTimeConstraints(e);return this.isValidDate(e)?this.timeOnly?t=this.formatTime(e):(t=this.formatDate(e,this.getDateFormat()),this.showTime&&(t+=" "+this.formatTime(e))):this.dataType==="string"&&(t=e),t=r?t:"",t}formatDateMetaToDate(e){return new Date(e.year,e.month,e.day)}formatDateKey(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}setCurrentHourPM(e){this.hourFormat=="12"?(this.pm=e>11,e>=12?this.currentHour=e==12?12:e-12:this.currentHour=e==0?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let t=this.formatDateMetaToDate(e);if(this.showTime&&(this.hourFormat=="12"?this.currentHour===12?t.setHours(this.pm?12:0):t.setHours(this.pm?this.currentHour+12:this.currentHour):t.setHours(this.currentHour),t.setMinutes(this.currentMinute),t.setSeconds(this.currentSecond)),this.minDate&&this.minDate>t&&(t=this.minDate,this.setCurrentHourPM(t.getHours()),this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds()),this.maxDate&&this.maxDate<t&&(t=this.maxDate,this.setCurrentHourPM(t.getHours()),this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds()),this.isSingleSelection())this.updateModel(t);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,t]:[t]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],o=this.value[1];!o&&t.getTime()>=r.getTime()?o=t:(r=t,o=null),this.updateModel([r,o])}else this.updateModel([t,null]);this.onSelect.emit(t)}updateModel(e){if(this.value=e,this.dataType=="date")this.onModelChange(this.value);else if(this.dataType=="string")if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let t=null;Array.isArray(this.value)&&(t=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(t)}}getFirstDayOfMonthIndex(e,t){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(t);let o=r.getDay()+this.getSundayIndex();return o>=7?o-7:o}getDaysCountInMonth(e,t){return 32-this.daylightSavingAdjust(new Date(t,e,32)).getDate()}getDaysCountInPrevMonth(e,t){let r=this.getPreviousMonthAndYear(e,t);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,t){let r,o;return e===0?(r=11,o=t-1):(r=e-1,o=t),{month:r,year:o}}getNextMonthAndYear(e,t){let r,o;return e===11?(r=0,o=t+1):(r=e+1,o=t),{month:r,year:o}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(this.value){if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let t=!1;for(let r of this.value)if(t=this.isDateEquals(r,e),t)break;return t}else if(this.isRangeSelection())return this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e)}else return!1}isComparable(){return this.value!=null&&typeof this.value!="string"}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){let[t,r]=this.isRangeSelection()?this.value:[this.value,this.value],o=new Date(this.currentYear,e,1);return o>=t&&o<=(r??t)}return!1}isMonthDisabled(e,t){let r=t??this.currentYear;for(let o=1;o<this.getDaysCountInMonth(e,r)+1;o++)if(this.isSelectable(o,e,r,!1))return!1;return!0}isYearDisabled(e){return Array(12).fill(0).every((t,r)=>this.isMonthDisabled(r,e))}isYearSelected(e){if(!this.isComparable()||this.isMultipleSelection())return!1;let t=this.isRangeSelection()?this.value[0]:this.value;return t?t.getFullYear()===e:!1}isDateEquals(e,t){return e&&ge.isDate(e)?e.getDate()===t.day&&e.getMonth()===t.month&&e.getFullYear()===t.year:!1}isDateBetween(e,t,r){let o=!1;if(ge.isDate(e)&&ge.isDate(t)){let s=this.formatDateMetaToDate(r);return e.getTime()<=s.getTime()&&t.getTime()>=s.getTime()}return o}isSingleSelection(){return this.selectionMode==="single"}isRangeSelection(){return this.selectionMode==="range"}isMultipleSelection(){return this.selectionMode==="multiple"}isToday(e,t,r,o){return e.getDate()===t&&e.getMonth()===r&&e.getFullYear()===o}isSelectable(e,t,r,o){let s=!0,a=!0,l=!0,c=!0;return o&&!this.selectOtherMonths?!1:(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&this.currentView!="year"&&(this.minDate.getMonth()>t||this.minDate.getMonth()===t&&this.minDate.getDate()>e))&&(s=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<t||this.maxDate.getMonth()===t&&this.maxDate.getDate()<e))&&(a=!1),this.disabledDates&&(l=!this.isDateDisabled(e,t,r)),this.disabledDays&&(c=!this.isDayDisabled(e,t,r)),s&&a&&l&&c)}isDateDisabled(e,t,r){if(this.disabledDates){for(let o of this.disabledDates)if(o.getFullYear()===r&&o.getMonth()===t&&o.getDate()===e)return!0}return!1}isDayDisabled(e,t,r){if(this.disabledDays){let s=new Date(r,t,e).getDay();return this.disabledDays.indexOf(s)!==-1}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,t=this.inputfieldViewChild?.nativeElement){this.overlayVisible?this.hideOverlay():(t.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return this.currentView==="month"?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:if(this.inline||this.trapFocus(e),this.inline){let t=j.findSingle(this.containerViewChild?.nativeElement,".p-datepicker-header"),r=e.target;if(this.timeOnly)return;r==t.children[t?.children?.length-1]&&this.initFocusableCell()}break;case 27:this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break;default:break}}onInputKeydown(e){this.isKeydown=!0,e.keyCode===40&&this.contentViewChild?this.trapFocus(e):e.keyCode===27?this.overlayVisible&&(this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault()):e.keyCode===13?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):e.keyCode===9&&this.contentViewChild&&(j.getFocusableElements(this.contentViewChild.nativeElement).forEach(t=>t.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,t,r){let o=e.currentTarget,s=o.parentElement,a=this.formatDateMetaToDate(t);switch(e.which){case 40:{o.tabIndex="-1";let I=j.index(s),b=s.parentElement.nextElementSibling;if(b){let E=b.children[I].children[0];j.hasClass(E,"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(b.children[I].children[0].tabIndex="0",b.children[I].children[0].focus())}else this.navigationState={backward:!1},this.navForward(e);e.preventDefault();break}case 38:{o.tabIndex="-1";let I=j.index(s),b=s.parentElement.previousElementSibling;if(b){let E=b.children[I].children[0];j.hasClass(E,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(E.tabIndex="0",E.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{o.tabIndex="-1";let I=s.previousElementSibling;if(I){let b=I.children[0];j.hasClass(b,"p-disabled")||j.hasClass(b.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(b.tabIndex="0",b.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{o.tabIndex="-1";let I=s.nextElementSibling;if(I){let b=I.children[0];j.hasClass(b,"p-disabled")?this.navigateToMonth(!1,r):(b.tabIndex="0",b.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:{this.onDateSelect(e,t),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.inline||this.trapFocus(e);break}case 33:{o.tabIndex="-1";let I=new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),b=this.formatDateKey(I);this.navigateToMonth(!0,r,`span[data-date='${b}']:not(.p-disabled):not(.p-ink)`),e.preventDefault();break}case 34:{o.tabIndex="-1";let I=new Date(a.getFullYear(),a.getMonth()+1,a.getDate()),b=this.formatDateKey(I);this.navigateToMonth(!1,r,`span[data-date='${b}']:not(.p-disabled):not(.p-ink)`),e.preventDefault();break}case 36:o.tabIndex="-1";let l=new Date(a.getFullYear(),a.getMonth(),1),c=this.formatDateKey(l),d=j.findSingle(o.offsetParent,`span[data-date='${c}']:not(.p-disabled):not(.p-ink)`);d&&(d.tabIndex="0",d.focus()),e.preventDefault();break;case 35:o.tabIndex="-1";let h=new Date(a.getFullYear(),a.getMonth()+1,0),_=this.formatDateKey(h),C=j.findSingle(o.offsetParent,`span[data-date='${_}']:not(.p-disabled):not(.p-ink)`);h&&(C.tabIndex="0",C.focus()),e.preventDefault();break;default:break}}onMonthCellKeydown(e,t){let r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,s=j.index(r);let a=o[e.which===40?s+3:s-3];a&&(a.tabIndex="0",a.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let a=r.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let a=r.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:{this.onMonthSelect(e,t),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.inline||this.trapFocus(e);break}default:break}}onYearCellKeydown(e,t){let r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var o=r.parentElement.children,s=j.index(r);let a=o[e.which===40?s+2:s-2];a&&(a.tabIndex="0",a.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let a=r.previousElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let a=r.nextElementSibling;a?(a.tabIndex="0",a.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:{this.onYearSelect(e,t),e.preventDefault();break}case 27:{this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,e.preventDefault();break}case 9:{this.trapFocus(e);break}default:break}}navigateToMonth(e,t,r){if(e)if(this.numberOfMonths===1||t===0)this.navigationState={backward:!0},this._focusKey=r,this.navBackward(event);else{let o=this.contentViewChild.nativeElement.children[t-1];if(r){let s=j.findSingle(o,r);s.tabIndex="0",s.focus()}else{let s=j.find(o,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),a=s[s.length-1];a.tabIndex="0",a.focus()}}else if(this.numberOfMonths===1||t===this.numberOfMonths-1)this.navigationState={backward:!1},this._focusKey=r,this.navForward(event);else{let o=this.contentViewChild.nativeElement.children[t+1];if(r){let s=j.findSingle(o,r);s.tabIndex="0",s.focus()}else{let s=j.findSingle(o,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?j.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():j.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let t;this.currentView==="month"?t=j.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"):this.currentView==="year"?t=j.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"):t=j.find(this.contentViewChild.nativeElement,this._focusKey||".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),t&&t.length>0&&(e=t[t.length-1])}else this.currentView==="month"?e=j.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"):this.currentView==="year"?e=j.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"):e=j.findSingle(this.contentViewChild.nativeElement,this._focusKey||".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null,this._focusKey=null}else this.initFocusableCell();this.alignOverlay()}initFocusableCell(){let e=this.contentViewChild?.nativeElement,t;if(this.currentView==="month"){let r=j.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),o=j.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");r.forEach(s=>s.tabIndex=-1),t=o||r[0],r.length===0&&j.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(this.currentView==="year"){let r=j.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),o=j.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");r.forEach(s=>s.tabIndex=-1),t=o||r[0],r.length===0&&j.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(a=>a.tabIndex=-1)}else if(t=j.findSingle(e,"span.p-highlight"),!t){let r=j.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");r?t=r:t=j.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}t&&(t.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{this.disabled||t.focus()},1),this.preventFocus=!1)}trapFocus(e){let t=j.getFocusableElements(this.contentViewChild.nativeElement);if(t&&t.length>0)if(!t[0].ownerDocument.activeElement)t[0].focus();else{let r=t.indexOf(t[0].ownerDocument.activeElement);if(e.shiftKey)if(r==-1||r===0)if(this.focusTrap)t[t.length-1].focus();else{if(r===-1)return this.hideOverlay();if(r===0)return}else t[r-1].focus();else if(r==-1)if(this.timeOnly)t[0].focus();else{let o=0;for(let s=0;s<t.length;s++)t[s].tagName==="SPAN"&&(o=s);t[o].focus()}else if(r===t.length-1){if(!this.focusTrap&&r!=-1)return this.hideOverlay();t[0].focus()}else t[r+1].focus()}e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}convertTo24Hour(e,t){return this.hourFormat=="12"?e===12?t?12:0:t?e+12:e:e}constrainTime(e,t,r,o){let s=[e,t,r],a,l=this.value,c=this.convertTo24Hour(e,o),d=this.isRangeSelection(),h=this.isMultipleSelection();(d||h)&&(this.value||(this.value=[new Date,new Date]),d&&(l=this.value[1]||this.value[0]),h&&(l=this.value[this.value.length-1]));let C=l?l.toDateString():null,I=this.minDate&&C&&this.minDate.toDateString()===C,b=this.maxDate&&C&&this.maxDate.toDateString()===C;switch(I&&(a=this.minDate.getHours()>=12),!0){case(I&&a&&this.minDate.getHours()===12&&this.minDate.getHours()>c):s[0]=11;case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()>t):s[1]=this.minDate.getMinutes();case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()===t&&this.minDate.getSeconds()>r):s[2]=this.minDate.getSeconds();break;case(I&&!a&&this.minDate.getHours()-1===c&&this.minDate.getHours()>c):s[0]=11,this.pm=!0;case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()>t):s[1]=this.minDate.getMinutes();case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()===t&&this.minDate.getSeconds()>r):s[2]=this.minDate.getSeconds();break;case(I&&a&&this.minDate.getHours()>c&&c!==12):this.setCurrentHourPM(this.minDate.getHours()),s[0]=this.currentHour;case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()>t):s[1]=this.minDate.getMinutes();case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()===t&&this.minDate.getSeconds()>r):s[2]=this.minDate.getSeconds();break;case(I&&this.minDate.getHours()>c):s[0]=this.minDate.getHours();case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()>t):s[1]=this.minDate.getMinutes();case(I&&this.minDate.getHours()===c&&this.minDate.getMinutes()===t&&this.minDate.getSeconds()>r):s[2]=this.minDate.getSeconds();break;case(b&&this.maxDate.getHours()<c):s[0]=this.maxDate.getHours();case(b&&this.maxDate.getHours()===c&&this.maxDate.getMinutes()<t):s[1]=this.maxDate.getMinutes();case(b&&this.maxDate.getHours()===c&&this.maxDate.getMinutes()===t&&this.maxDate.getSeconds()<r):s[2]=this.maxDate.getSeconds();break}return s}incrementHour(e){let t=this.currentHour??0,r=(this.currentHour??0)+this.stepHour,o=this.pm;this.hourFormat=="24"?r=r>=24?r-24:r:this.hourFormat=="12"&&(t<12&&r>11&&(o=!this.pm),r=r>=13?r-12:r),this.toggleAMPMIfNotMinDate(o),[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(r,this.currentMinute,this.currentSecond,o),e.preventDefault()}toggleAMPMIfNotMinDate(e){let t=this.value;(this.selectionMode=="range"||this.selectionMode=="multiple")&&Array.isArray(t)&&t.length>0&&(t=t[t.length-1]);let r=t?t.toDateString():null;this.minDate&&r&&this.minDate.toDateString()===r&&this.minDate.getHours()>=12?this.pm=!0:this.pm=e}onTimePickerElementMouseDown(e,t,r){this.disabled||(this.repeat(e,null,t,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,t,r,o){let s=t||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,o),this.cd.markForCheck()},s),r){case 0:o===1?this.incrementHour(e):this.decrementHour(e);break;case 1:o===1?this.incrementMinute(e):this.decrementMinute(e);break;case 2:o===1?this.incrementSecond(e):this.decrementSecond(e);break}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let t=(this.currentHour??0)-this.stepHour,r=this.pm;this.hourFormat=="24"?t=t<0?24+t:t:this.hourFormat=="12"&&(this.currentHour===12&&(r=!this.pm),t=t<=0?12+t:t),this.toggleAMPMIfNotMinDate(r),[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(t,this.currentMinute,this.currentSecond,r),e.preventDefault()}incrementMinute(e){let t=(this.currentMinute??0)+this.stepMinute;t=t>59?t-60:t,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,t,this.currentSecond,this.pm),e.preventDefault()}decrementMinute(e){let t=(this.currentMinute??0)-this.stepMinute;t=t<0?60+t:t,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,t,this.currentSecond,this.pm),e.preventDefault()}incrementSecond(e){let t=this.currentSecond+this.stepSecond;t=t>59?t-60:t,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,t,this.pm),e.preventDefault()}decrementSecond(e){let t=this.currentSecond-this.stepSecond;t=t<0?60+t:t,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,t,this.pm),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,this.hourFormat=="12"?this.currentHour===12?e.setHours(this.pm?12:0):e.setHours(this.pm?this.currentHour+12:this.currentHour):e.setHours(this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(this.value[1]?e=[this.value[0],e]:e=[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){let t=!this.pm;this.pm=t,[this.currentHour,this.currentMinute,this.currentSecond]=this.constrainTime(this.currentHour,this.currentMinute,this.currentSecond,t),this.updateTime(),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let t=e.target.value;try{let r=this.parseValueFromString(t);this.isValidSelection(r)?(this.updateModel(r),this.updateUI()):this.keepInvalid&&this.updateModel(r)}catch{let o=this.keepInvalid?t:null;this.updateModel(o)}this.filled=t!=null&&t.length,this.onInput.emit(e)}isValidSelection(e){if(this.isSingleSelection())return this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1);let t=e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1));return t&&this.isRangeSelection()&&(t=e.length===1||e.length>1&&e[1]>=e[0]),t}parseValueFromString(e){if(!e||e.trim().length===0)return null;let t;if(this.isSingleSelection())t=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);t=[];for(let o of r)t.push(this.parseDateTime(o.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");t=[];for(let o=0;o<r.length;o++)t[o]=this.parseDateTime(r[o].trim())}return t}parseDateTime(e){let t,r=e.split(" ");if(this.timeOnly)t=new Date,this.populateTime(t,r[0],r[1]);else{let o=this.getDateFormat();if(this.showTime){let s=this.hourFormat=="12"?r.pop():null,a=r.pop();t=this.parseDate(r.join(" "),o),this.populateTime(t,a,s)}else t=this.parseDate(e,o)}return t}populateTime(e,t,r){if(this.hourFormat=="12"&&!r)throw"Invalid Time";this.pm=r==="PM"||r==="pm";let o=this.parseTime(t);e.setHours(o.hour),e.setMinutes(o.minute),e.setSeconds(o.second)}isValidDate(e){return ge.isDate(e)&&ge.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[1]||e[0]);let t=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=t.getMonth(),this.currentYear=t.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(t.getHours()),this.currentMinute=t.getMinutes(),this.currentSecond=t.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.inputfieldViewChild?.nativeElement.focus(),this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild?.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay?.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?bi.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):bi.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e);break}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&bi.clear(e.element);break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.document.body.appendChild(this.overlay):j.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?(this.view==="date"?(this.overlay.style.width||(this.overlay.style.width=j.getOuterWidth(this.overlay)+"px"),this.overlay.style.minWidth||(this.overlay.style.minWidth=j.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px")):this.overlay.style.width||(this.overlay.style.width=j.getOuterWidth(this.inputfieldViewChild?.nativeElement)+"px"),j.absolutePosition(this.overlay,this.inputfieldViewChild?.nativeElement)):j.relativePosition(this.overlay,this.inputfieldViewChild?.nativeElement))}enableModality(e){!this.mask&&this.touchUI&&(this.mask=this.renderer.createElement("div"),this.renderer.setStyle(this.mask,"zIndex",String(parseInt(e.style.zIndex)-1)),j.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality(),this.overlayVisible=!1}),this.renderer.appendChild(this.document.body,this.mask),j.blockBodyScroll())}disableModality(){this.mask&&(j.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener||(this.animationEndListener=this.renderer.listen(this.mask,"animationend",this.destroyMask.bind(this))))}destroyMask(){if(!this.mask)return;this.renderer.removeChild(this.document.body,this.mask);let e=this.document.body.children,t;for(let r=0;r<e.length;r++){let o=e[r];if(j.hasClass(o,"p-datepicker-mask-scrollblocker")){t=!0;break}}t||j.unblockBodyScroll(),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&typeof this.value=="string")try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Di.FIRST_DAY_OF_WEEK)}formatDate(e,t){if(!e)return"";let r,o=d=>{let h=r+1<t.length&&t.charAt(r+1)===d;return h&&r++,h},s=(d,h,_)=>{let C=""+h;if(o(d))for(;C.length<_;)C="0"+C;return C},a=(d,h,_,C)=>o(d)?C[h]:_[h],l="",c=!1;if(e)for(r=0;r<t.length;r++)if(c)t.charAt(r)==="'"&&!o("'")?c=!1:l+=t.charAt(r);else switch(t.charAt(r)){case"d":l+=s("d",e.getDate(),2);break;case"D":l+=a("D",e.getDay(),this.getTranslation(Di.DAY_NAMES_SHORT),this.getTranslation(Di.DAY_NAMES));break;case"o":l+=s("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=s("m",e.getMonth()+1,2);break;case"M":l+=a("M",e.getMonth(),this.getTranslation(Di.MONTH_NAMES_SHORT),this.getTranslation(Di.MONTH_NAMES));break;case"y":l+=o("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":l+=e.getTime();break;case"!":l+=e.getTime()*1e4+this.ticksTo1970;break;case"'":o("'")?l+="'":c=!0;break;default:l+=t.charAt(r)}return l}formatTime(e){if(!e)return"";let t="",r=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return this.hourFormat=="12"&&r>11&&r!=12&&(r-=12),this.hourFormat=="12"?t+=r===0?12:r<10?"0"+r:r:t+=r<10?"0"+r:r,t+=":",t+=o<10?"0"+o:o,this.showSeconds&&(t+=":",t+=s<10?"0"+s:s),this.hourFormat=="12"&&(t+=e.getHours()>11?" PM":" AM"),t}parseTime(e){let t=e.split(":"),r=this.showSeconds?3:2;if(t.length!==r)throw"Invalid time";let o=parseInt(t[0]),s=parseInt(t[1]),a=this.showSeconds?parseInt(t[2]):null;if(isNaN(o)||isNaN(s)||o>23||s>59||this.hourFormat=="12"&&o>12||this.showSeconds&&(isNaN(a)||a>59))throw"Invalid time";return this.hourFormat=="12"&&(o!==12&&this.pm?o+=12:!this.pm&&o===12&&(o-=12)),{hour:o,minute:s,second:a}}parseDate(e,t){if(t==null||e==null)throw"Invalid arguments";if(e=typeof e=="object"?e.toString():e+"",e==="")return null;let r,o,s,a=0,l=typeof this.shortYearCutoff!="string"?this.shortYearCutoff:new Date().getFullYear()%100+parseInt(this.shortYearCutoff,10),c=-1,d=-1,h=-1,_=-1,C=!1,I,b=A=>{let U=r+1<t.length&&t.charAt(r+1)===A;return U&&r++,U},E=A=>{let U=b(A),z=A==="@"?14:A==="!"?20:A==="y"&&U?4:A==="o"?3:2,ee=A==="y"?z:1,re=new RegExp("^\\d{"+ee+","+z+"}"),Z=e.substring(a).match(re);if(!Z)throw"Missing number at position "+a;return a+=Z[0].length,parseInt(Z[0],10)},R=(A,U,z)=>{let ee=-1,re=b(A)?z:U,Z=[];for(let ae=0;ae<re.length;ae++)Z.push([ae,re[ae]]);Z.sort((ae,Ie)=>-(ae[1].length-Ie[1].length));for(let ae=0;ae<Z.length;ae++){let Ie=Z[ae][1];if(e.substr(a,Ie.length).toLowerCase()===Ie.toLowerCase()){ee=Z[ae][0],a+=Ie.length;break}}if(ee!==-1)return ee+1;throw"Unknown name at position "+a},T=()=>{if(e.charAt(a)!==t.charAt(r))throw"Unexpected literal at position "+a;a++};for(this.view==="month"&&(h=1),r=0;r<t.length;r++)if(C)t.charAt(r)==="'"&&!b("'")?C=!1:T();else switch(t.charAt(r)){case"d":h=E("d");break;case"D":R("D",this.getTranslation(Di.DAY_NAMES_SHORT),this.getTranslation(Di.DAY_NAMES));break;case"o":_=E("o");break;case"m":d=E("m");break;case"M":d=R("M",this.getTranslation(Di.MONTH_NAMES_SHORT),this.getTranslation(Di.MONTH_NAMES));break;case"y":c=E("y");break;case"@":I=new Date(E("@")),c=I.getFullYear(),d=I.getMonth()+1,h=I.getDate();break;case"!":I=new Date((E("!")-this.ticksTo1970)/1e4),c=I.getFullYear(),d=I.getMonth()+1,h=I.getDate();break;case"'":b("'")?T():C=!0;break;default:T()}if(a<e.length&&(s=e.substr(a),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(c===-1?c=new Date().getFullYear():c<100&&(c+=new Date().getFullYear()-new Date().getFullYear()%100+(c<=l?0:-100)),_>-1){d=1,h=_;do{if(o=this.getDaysCountInMonth(c,d-1),h<=o)break;d++,h-=o}while(!0)}if(this.view==="year"&&(d=d===-1?1:d,h=h===-1?1:h),I=this.daylightSavingAdjust(new Date(c,d-1,h)),I.getFullYear()!==c||I.getMonth()+1!==d||I.getDate()!==h)throw"Invalid date";return I}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&this.inputFieldValue!=""}isValidDateForTimeConstraints(e){return this.keepInvalid?!0:(!this.minDate||e>=this.minDate)&&(!this.maxDate||e<=this.maxDate)}onTodayButtonClick(e){let t=new Date,r={day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),otherMonth:t.getMonth()!==this.currentMonth||t.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.createMonths(t.getMonth(),t.getFullYear()),this.onDateSelect(e,r),this.onTodayClick.emit(t)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",j.setAttribute(this.responsiveStyleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.body,this.responsiveStyleElement));let e="";if(this.responsiveOptions){let t=[...this.responsiveOptions].filter(r=>!!(r.breakpoint&&r.numMonths)).sort((r,o)=>-1*r.breakpoint.localeCompare(o.breakpoint,void 0,{numeric:!0}));for(let r=0;r<t.length;r++){let{breakpoint:o,numMonths:s}=t[r],a=`
                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${s}) .p-datepicker-next {
                            display: inline-flex !important;
                        }
                    `;for(let l=s;l<this.numberOfMonths;l++)a+=`
                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${l+1}) {
                                display: none !important;
                            }
                        `;e+=`
                        @media screen and (max-width: ${o}) {
                            ${a}
                        }
                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{let e=this.el?this.el.nativeElement.ownerDocument:this.document;this.documentClickListener=this.renderer.listen(e,"mousedown",t=>{this.isOutsideClicked(t)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(t),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return j.hasClass(e.target,"p-datepicker-prev")||j.hasClass(e.target,"p-datepicker-prev-icon")||j.hasClass(e.target,"p-datepicker-next")||j.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!j.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&bi.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(t){return new(t||i)(S(At),S(Ze),S(jt),S(we),S(Lt),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-calendar"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Iae,5),le(yae,5),le(wae,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.inputfieldViewChild=o.first),te(o=ie())&&(r.content=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focus)("p-calendar-clearable",r.showClear&&!r.disabled)},inputs:{iconDisplay:"iconDisplay",style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",iconAriaLabel:"iconAriaLabel",disabled:[2,"disabled","disabled",Y],dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:[2,"inline","inline",Y],showOtherMonths:[2,"showOtherMonths","showOtherMonths",Y],selectOtherMonths:[2,"selectOtherMonths","selectOtherMonths",Y],showIcon:[2,"showIcon","showIcon",Y],icon:"icon",appendTo:"appendTo",readonlyInput:[2,"readonlyInput","readonlyInput",Y],shortYearCutoff:"shortYearCutoff",monthNavigator:[2,"monthNavigator","monthNavigator",Y],yearNavigator:[2,"yearNavigator","yearNavigator",Y],hourFormat:"hourFormat",timeOnly:[2,"timeOnly","timeOnly",Y],stepYearPicker:[2,"stepYearPicker","stepYearPicker",We],stepHour:[2,"stepHour","stepHour",We],stepMinute:[2,"stepMinute","stepMinute",We],stepSecond:[2,"stepSecond","stepSecond",We],showSeconds:[2,"showSeconds","showSeconds",Y],required:[2,"required","required",Y],showOnFocus:[2,"showOnFocus","showOnFocus",Y],showWeek:[2,"showWeek","showWeek",Y],startWeekFromFirstDayOfYear:"startWeekFromFirstDayOfYear",showClear:[2,"showClear","showClear",Y],dataType:"dataType",selectionMode:"selectionMode",maxDateCount:[2,"maxDateCount","maxDateCount",We],showButtonBar:[2,"showButtonBar","showButtonBar",Y],todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autofocus:[2,"autofocus","autofocus",Y],autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:[2,"keepInvalid","keepInvalid",Y],hideOnDateTimeSelect:[2,"hideOnDateTimeSelect","hideOnDateTimeSelect",Y],touchUI:[2,"touchUI","touchUI",Y],timeSeparator:"timeSeparator",focusTrap:[2,"focusTrap","focusTrap",Y],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:[2,"tabindex","tabindex",We],variant:"variant",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale",view:"view",defaultDate:"defaultDate"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[et([cce]),tt],ngContentSelectors:bae,decls:4,vars:12,consts:[["container",""],["inputfield",""],["contentWrapper",""],[3,"ngClass","ngStyle"],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","role","combobox","aria-autocomplete","none","aria-haspopup","dialog","autocomplete","off","pAutoFocus","",3,"focus","keydown","click","blur","input","value","readonly","ngStyle","placeholder","disabled","ngClass","autofocus"],[4,"ngIf"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","class","p-datepicker-trigger p-button-icon-only","tabindex","0",3,"disabled","click",4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-calendar-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-calendar-clear-icon",3,"click"],[4,"ngTemplateOutlet"],["type","button","aria-haspopup","dialog","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger","p-button-icon-only",3,"click","disabled"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","click",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"click","ngClass"],[3,"click","ngStyle","ngClass"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[3,"styleClass",4,"ngIf"],["class","p-datepicker-next-icon",4,"ngIf"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],["class","p-datepicker-prev-icon",4,"ngIf"],[3,"styleClass"],[1,"p-datepicker-prev-icon"],["type","button",1,"p-datepicker-month","p-link",3,"click","keydown","disabled"],["type","button",1,"p-datepicker-year","p-link",3,"click","keydown","disabled"],[1,"p-datepicker-decade"],[1,"p-datepicker-next-icon"],[1,"p-datepicker-calendar-container"],["role","grid",1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],["draggable","false","pRipple","",3,"click","keydown","ngClass"],["class","p-hidden-accessible","aria-live","polite",4,"ngIf"],["aria-live","polite",1,"p-hidden-accessible"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"click","keydown","ngClass"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"click","keydown","ngClass"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"keydown","click","label","ngClass"]],template:function(t,r){t&1&&($i(vae),m(0,"span",3,0),v(2,Kae,5,22,"ng-template",4)(3,lce,9,32,"div",5),g()),t&2&&(ce(r.styleClass),f("ngClass",ac(6,Sae,r.showIcon&&r.iconDisplay==="input",r.showIcon&&r.iconDisplay==="button",r.timeOnly,r.disabled,r.focus||r.overlayVisible))("ngStyle",r.style),p(2),f("ngIf",!r.inline),p(),f("ngIf",r.inline||r.overlayVisible))},dependencies:()=>[je,hn,rt,mt,De,pt,nn,zf,rl,bO,Ho,Ji,SO,Zn],styles:[`@layer primeng{.p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%;text-overflow:ellipsis}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-datepicker-icon{pointer-events:none}.p-calendar-clearable{position:relative}}
`],encapsulation:2,data:{animation:[Tn("overlayAnimation",[Yr("visibleTouchUI",qt({transform:"translate(-50%,-50%)",opacity:1})),ci("void => visible",[qt({opacity:0,transform:"scaleY(0.8)"}),li("{{showTransitionParams}}",qt({opacity:1,transform:"*"}))]),ci("visible => void",[li("{{hideTransitionParams}}",qt({opacity:0}))]),ci("void => visibleTouchUI",[qt({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),li("{{showTransitionParams}}")]),ci("visibleTouchUI => void",[li("{{hideTransitionParams}}",qt({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0})}return i})(),F_=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ro,dt,ln,zf,rl,bO,Ho,Ji,SO,fr,ro,dt]})}return i})();var $f=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ArrowDownIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.99994 14C6.91097 14.0004 6.82281 13.983 6.74064 13.9489C6.65843 13.9148 6.58387 13.8646 6.52133 13.8013L1.10198 8.38193C0.982318 8.25351 0.917175 8.08367 0.920272 7.90817C0.923368 7.73267 0.994462 7.56523 1.11858 7.44111C1.24269 7.317 1.41014 7.2459 1.58563 7.2428C1.76113 7.23971 1.93098 7.30485 2.0594 7.42451L6.32263 11.6877V0.677419C6.32263 0.497756 6.394 0.325452 6.52104 0.198411C6.64808 0.0713706 6.82039 0 7.00005 0C7.17971 0 7.35202 0.0713706 7.47906 0.198411C7.6061 0.325452 7.67747 0.497756 7.67747 0.677419V11.6877L11.9407 7.42451C12.0691 7.30485 12.2389 7.23971 12.4144 7.2428C12.5899 7.2459 12.7574 7.317 12.8815 7.44111C13.0056 7.56523 13.0767 7.73267 13.0798 7.90817C13.0829 8.08367 13.0178 8.25351 12.8981 8.38193L7.47875 13.8013C7.41621 13.8646 7.34164 13.9148 7.25944 13.9489C7.17727 13.983 7.08912 14.0004 7.00015 14C7.00012 14 7.00009 14 7.00005 14C7.00001 14 6.99998 14 6.99994 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var Jf=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["ArrowUpIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.51551 13.799C6.64205 13.9255 6.813 13.9977 6.99193 14C7.17087 13.9977 7.34182 13.9255 7.46835 13.799C7.59489 13.6725 7.66701 13.5015 7.66935 13.3226V2.31233L11.9326 6.57554C11.9951 6.63887 12.0697 6.68907 12.1519 6.72319C12.2341 6.75731 12.3223 6.77467 12.4113 6.77425C12.5003 6.77467 12.5885 6.75731 12.6707 6.72319C12.7529 6.68907 12.8274 6.63887 12.89 6.57554C13.0168 6.44853 13.0881 6.27635 13.0881 6.09683C13.0881 5.91732 13.0168 5.74514 12.89 5.61812L7.48846 0.216594C7.48274 0.210436 7.4769 0.204374 7.47094 0.198411C7.3439 0.0713707 7.1716 0 6.99193 0C6.81227 0 6.63997 0.0713707 6.51293 0.198411C6.50704 0.204296 6.50128 0.210278 6.49563 0.216354L1.09386 5.61812C0.974201 5.74654 0.909057 5.91639 0.912154 6.09189C0.91525 6.26738 0.986345 6.43483 1.11046 6.55894C1.23457 6.68306 1.40202 6.75415 1.57752 6.75725C1.75302 6.76035 1.92286 6.6952 2.05128 6.57554L6.31451 2.31231V13.3226C6.31685 13.5015 6.38898 13.6725 6.51551 13.799Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var r5=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["FilterIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.64708 14H5.35296C5.18981 13.9979 5.03395 13.9321 4.91858 13.8167C4.8032 13.7014 4.73745 13.5455 4.73531 13.3824V7L0.329431 0.98C0.259794 0.889466 0.217389 0.780968 0.20718 0.667208C0.19697 0.553448 0.219379 0.439133 0.271783 0.337647C0.324282 0.236453 0.403423 0.151519 0.500663 0.0920138C0.597903 0.0325088 0.709548 0.000692754 0.823548 0H13.1765C13.2905 0.000692754 13.4021 0.0325088 13.4994 0.0920138C13.5966 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7826 0.780968 13.7402 0.889466 13.6706 0.98L9.26472 7V13.3824C9.26259 13.5455 9.19683 13.7014 9.08146 13.8167C8.96609 13.9321 8.81022 13.9979 8.64708 14ZM5.97061 12.7647H8.02943V6.79412C8.02878 6.66289 8.07229 6.53527 8.15296 6.43177L11.9412 1.23529H2.05884L5.86355 6.43177C5.94422 6.53527 5.98773 6.66289 5.98708 6.79412L5.97061 12.7647Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var o5=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["FilterSlashIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.4994 0.0920138C13.5967 0.151519 13.6758 0.236453 13.7283 0.337647C13.7807 0.439133 13.8031 0.553448 13.7929 0.667208C13.7827 0.780968 13.7403 0.889466 13.6707 0.98L11.406 4.06823C11.3099 4.19928 11.1656 4.28679 11.005 4.3115C10.8444 4.33621 10.6805 4.2961 10.5495 4.2C10.4184 4.1039 10.3309 3.95967 10.3062 3.79905C10.2815 3.63843 10.3216 3.47458 10.4177 3.34353L11.9412 1.23529H7.41184C7.24803 1.23529 7.09093 1.17022 6.97509 1.05439C6.85926 0.938558 6.79419 0.781457 6.79419 0.617647C6.79419 0.453837 6.85926 0.296736 6.97509 0.180905C7.09093 0.0650733 7.24803 0 7.41184 0H13.1765C13.2905 0.000692754 13.4022 0.0325088 13.4994 0.0920138ZM4.20008 0.181168H4.24126L13.2013 9.03411C13.3169 9.14992 13.3819 9.3069 13.3819 9.47058C13.3819 9.63426 13.3169 9.79124 13.2013 9.90705C13.1445 9.96517 13.0766 10.0112 13.0016 10.0423C12.9266 10.0735 12.846 10.0891 12.7648 10.0882C12.6836 10.0886 12.6032 10.0728 12.5283 10.0417C12.4533 10.0106 12.3853 9.96479 12.3283 9.90705L9.3142 6.92587L9.26479 6.99999V13.3823C9.26265 13.5455 9.19689 13.7014 9.08152 13.8167C8.96615 13.9321 8.81029 13.9979 8.64714 14H5.35302C5.18987 13.9979 5.03401 13.9321 4.91864 13.8167C4.80327 13.7014 4.73751 13.5455 4.73537 13.3823V6.99999L0.329492 1.02117C0.259855 0.930634 0.21745 0.822137 0.207241 0.708376C0.197031 0.594616 0.21944 0.480301 0.271844 0.378815C0.324343 0.277621 0.403484 0.192687 0.500724 0.133182C0.597964 0.073677 0.709609 0.041861 0.823609 0.0411682H3.86243C3.92448 0.0461551 3.9855 0.060022 4.04361 0.0823446C4.10037 0.10735 4.15311 0.140655 4.20008 0.181168ZM8.02949 6.79411C8.02884 6.66289 8.07235 6.53526 8.15302 6.43176L8.42478 6.05293L3.55773 1.23529H2.0589L5.84714 6.43176C5.92781 6.53526 5.97132 6.66289 5.97067 6.79411V12.7647H8.02949V6.79411Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var Qs=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["PlusIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var k_=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["SortAltIcon"]],standalone:!0,features:[Se,Ct],decls:9,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.64515 3.61291C5.47353 3.61291 5.30192 3.54968 5.16644 3.4142L3.38708 1.63484L1.60773 3.4142C1.34579 3.67613 0.912244 3.67613 0.650309 3.4142C0.388374 3.15226 0.388374 2.71871 0.650309 2.45678L2.90837 0.198712C3.17031 -0.0632236 3.60386 -0.0632236 3.86579 0.198712L6.12386 2.45678C6.38579 2.71871 6.38579 3.15226 6.12386 3.4142C5.98837 3.54968 5.81676 3.61291 5.64515 3.61291Z","fill","currentColor"],["d","M3.38714 14C3.01681 14 2.70972 13.6929 2.70972 13.3226V0.677419C2.70972 0.307097 3.01681 0 3.38714 0C3.75746 0 4.06456 0.307097 4.06456 0.677419V13.3226C4.06456 13.6929 3.75746 14 3.38714 14Z","fill","currentColor"],["d","M10.6129 14C10.4413 14 10.2697 13.9368 10.1342 13.8013L7.87611 11.5432C7.61418 11.2813 7.61418 10.8477 7.87611 10.5858C8.13805 10.3239 8.5716 10.3239 8.83353 10.5858L10.6129 12.3652L12.3922 10.5858C12.6542 10.3239 13.0877 10.3239 13.3497 10.5858C13.6116 10.8477 13.6116 11.2813 13.3497 11.5432L11.0916 13.8013C10.9561 13.9368 10.7845 14 10.6129 14Z","fill","currentColor"],["d","M10.6129 14C10.2426 14 9.93552 13.6929 9.93552 13.3226V0.677419C9.93552 0.307097 10.2426 0 10.6129 0C10.9833 0 11.2904 0.307097 11.2904 0.677419V13.3226C11.2904 13.6929 10.9832 14 10.6129 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1)(3,"path",2)(4,"path",3)(5,"path",4),g(),m(6,"defs")(7,"clipPath",5),P(8,"rect",6),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(6),f("id",r.pathId))},encapsulation:2})}return i})();var N_=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["SortAmountDownIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.93953 10.5858L3.83759 11.6877V0.677419C3.83759 0.307097 3.53049 0 3.16017 0C2.78985 0 2.48275 0.307097 2.48275 0.677419V11.6877L1.38082 10.5858C1.11888 10.3239 0.685331 10.3239 0.423396 10.5858C0.16146 10.8477 0.16146 11.2813 0.423396 11.5432L2.68146 13.8013C2.74469 13.8645 2.81694 13.9097 2.89823 13.9458C2.97952 13.9819 3.06985 14 3.16017 14C3.25049 14 3.33178 13.9819 3.42211 13.9458C3.5034 13.9097 3.57565 13.8645 3.63888 13.8013L5.89694 11.5432C6.15888 11.2813 6.15888 10.8477 5.89694 10.5858C5.63501 10.3239 5.20146 10.3239 4.93953 10.5858ZM13.0957 0H7.22468C6.85436 0 6.54726 0.307097 6.54726 0.677419C6.54726 1.04774 6.85436 1.35484 7.22468 1.35484H13.0957C13.466 1.35484 13.7731 1.04774 13.7731 0.677419C13.7731 0.307097 13.466 0 13.0957 0ZM7.22468 5.41935H9.48275C9.85307 5.41935 10.1602 5.72645 10.1602 6.09677C10.1602 6.4671 9.85307 6.77419 9.48275 6.77419H7.22468C6.85436 6.77419 6.54726 6.4671 6.54726 6.09677C6.54726 5.72645 6.85436 5.41935 7.22468 5.41935ZM7.6763 8.12903H7.22468C6.85436 8.12903 6.54726 8.43613 6.54726 8.80645C6.54726 9.17677 6.85436 9.48387 7.22468 9.48387H7.6763C8.04662 9.48387 8.35372 9.17677 8.35372 8.80645C8.35372 8.43613 8.04662 8.12903 7.6763 8.12903ZM7.22468 2.70968H11.2892C11.6595 2.70968 11.9666 3.01677 11.9666 3.3871C11.9666 3.75742 11.6595 4.06452 11.2892 4.06452H7.22468C6.85436 4.06452 6.54726 3.75742 6.54726 3.3871C6.54726 3.01677 6.85436 2.70968 7.22468 2.70968Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var L_=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["SortAmountUpAltIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.63435 0.19871C3.57113 0.135484 3.49887 0.0903226 3.41758 0.0541935C3.255 -0.0180645 3.06532 -0.0180645 2.90274 0.0541935C2.82145 0.0903226 2.74919 0.135484 2.68597 0.19871L0.427901 2.45677C0.165965 2.71871 0.165965 3.15226 0.427901 3.41419C0.689836 3.67613 1.12338 3.67613 1.38532 3.41419L2.48726 2.31226V13.3226C2.48726 13.6929 2.79435 14 3.16467 14C3.535 14 3.84209 13.6929 3.84209 13.3226V2.31226L4.94403 3.41419C5.07951 3.54968 5.25113 3.6129 5.42274 3.6129C5.59435 3.6129 5.76597 3.54968 5.90145 3.41419C6.16338 3.15226 6.16338 2.71871 5.90145 2.45677L3.64338 0.19871H3.63435ZM13.7685 13.3226C13.7685 12.9523 13.4615 12.6452 13.0911 12.6452H7.22016C6.84984 12.6452 6.54274 12.9523 6.54274 13.3226C6.54274 13.6929 6.84984 14 7.22016 14H13.0911C13.4615 14 13.7685 13.6929 13.7685 13.3226ZM7.22016 8.58064C6.84984 8.58064 6.54274 8.27355 6.54274 7.90323C6.54274 7.5329 6.84984 7.22581 7.22016 7.22581H9.47823C9.84855 7.22581 10.1556 7.5329 10.1556 7.90323C10.1556 8.27355 9.84855 8.58064 9.47823 8.58064H7.22016ZM7.22016 5.87097H7.67177C8.0421 5.87097 8.34919 5.56387 8.34919 5.19355C8.34919 4.82323 8.0421 4.51613 7.67177 4.51613H7.22016C6.84984 4.51613 6.54274 4.82323 6.54274 5.19355C6.54274 5.56387 6.84984 5.87097 7.22016 5.87097ZM11.2847 11.2903H7.22016C6.84984 11.2903 6.54274 10.9832 6.54274 10.6129C6.54274 10.2426 6.84984 9.93548 7.22016 9.93548H11.2847C11.655 9.93548 11.9621 10.2426 11.9621 10.6129C11.9621 10.9832 11.655 11.2903 11.2847 11.2903Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var s5=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["TrashIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M3.44802 13.9955H10.552C10.8056 14.0129 11.06 13.9797 11.3006 13.898C11.5412 13.8163 11.7632 13.6877 11.9537 13.5196C12.1442 13.3515 12.2995 13.1473 12.4104 12.9188C12.5213 12.6903 12.5858 12.442 12.6 12.1884V4.36041H13.4C13.5591 4.36041 13.7117 4.29722 13.8243 4.18476C13.9368 4.07229 14 3.91976 14 3.76071C14 3.60166 13.9368 3.44912 13.8243 3.33666C13.7117 3.22419 13.5591 3.16101 13.4 3.16101H12.0537C12.0203 3.1557 11.9863 3.15299 11.952 3.15299C11.9178 3.15299 11.8838 3.1557 11.8503 3.16101H11.2285C11.2421 3.10893 11.2487 3.05513 11.248 3.00106V1.80966C11.2171 1.30262 10.9871 0.828306 10.608 0.48989C10.229 0.151475 9.73159 -0.0236625 9.22402 0.00257442H4.77602C4.27251 -0.0171866 3.78126 0.160868 3.40746 0.498617C3.03365 0.836366 2.807 1.30697 2.77602 1.80966V3.00106C2.77602 3.0556 2.78346 3.10936 2.79776 3.16101H0.6C0.521207 3.16101 0.443185 3.17652 0.37039 3.20666C0.297595 3.2368 0.231451 3.28097 0.175736 3.33666C0.120021 3.39235 0.0758251 3.45846 0.0456722 3.53121C0.0155194 3.60397 0 3.68196 0 3.76071C0 3.83946 0.0155194 3.91744 0.0456722 3.9902C0.0758251 4.06296 0.120021 4.12907 0.175736 4.18476C0.231451 4.24045 0.297595 4.28462 0.37039 4.31476C0.443185 4.3449 0.521207 4.36041 0.6 4.36041H1.40002V12.1884C1.41426 12.442 1.47871 12.6903 1.58965 12.9188C1.7006 13.1473 1.85582 13.3515 2.04633 13.5196C2.23683 13.6877 2.45882 13.8163 2.69944 13.898C2.94005 13.9797 3.1945 14.0129 3.44802 13.9955ZM2.60002 4.36041H11.304V12.1884C11.304 12.5163 10.952 12.7961 10.504 12.7961H3.40002C2.97602 12.7961 2.60002 12.5163 2.60002 12.1884V4.36041ZM3.95429 3.16101C3.96859 3.10936 3.97602 3.0556 3.97602 3.00106V1.80966C3.97602 1.48183 4.33602 1.20197 4.77602 1.20197H9.24802C9.66403 1.20197 10.048 1.48183 10.048 1.80966V3.00106C10.0473 3.05515 10.054 3.10896 10.0678 3.16101H3.95429ZM5.57571 10.997C5.41731 10.995 5.26597 10.9311 5.15395 10.8191C5.04193 10.7071 4.97808 10.5558 4.97601 10.3973V6.77517C4.97601 6.61612 5.0392 6.46359 5.15166 6.35112C5.26413 6.23866 5.41666 6.17548 5.57571 6.17548C5.73476 6.17548 5.8873 6.23866 5.99976 6.35112C6.11223 6.46359 6.17541 6.61612 6.17541 6.77517V10.3894C6.17647 10.4688 6.16174 10.5476 6.13208 10.6213C6.10241 10.695 6.05841 10.762 6.00261 10.8186C5.94682 10.8751 5.88035 10.92 5.80707 10.9506C5.73378 10.9813 5.65514 10.9971 5.57571 10.997ZM7.99968 10.8214C8.11215 10.9339 8.26468 10.997 8.42373 10.997C8.58351 10.9949 8.73604 10.93 8.84828 10.8163C8.96052 10.7025 9.02345 10.5491 9.02343 10.3894V6.77517C9.02343 6.61612 8.96025 6.46359 8.84778 6.35112C8.73532 6.23866 8.58278 6.17548 8.42373 6.17548C8.26468 6.17548 8.11215 6.23866 7.99968 6.35112C7.88722 6.46359 7.82404 6.61612 7.82404 6.77517V10.3973C7.82404 10.5564 7.88722 10.7089 7.99968 10.8214Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var dce=["container"],pce=(i,n,e)=>({"p-highlight":i,"p-disabled":n,"p-button-icon-only":e}),uce=(i,n)=>({$implicit:i,index:n});function hce(i,n){if(i&1&&P(0,"span",8),i&2){let e=u(2).$implicit;ce(e.icon),f("ngClass","p-button-icon p-button-icon-left"),G("data-pc-section","icon")}}function fce(i,n){if(i&1&&(he(0),v(1,hce,1,4,"span",6),m(2,"span",7),F(3),g(),fe()),i&2){let e=u().$implicit,t=u();p(),f("ngIf",e.icon),p(),G("data-pc-section","label"),p(),$(t.getOptionLabel(e))}}function mce(i,n){i&1&&ue(0)}function gce(i,n){if(i&1&&v(0,mce,1,0,"ng-container",9),i&2){let e=u(),t=e.$implicit,r=e.index,o=u();f("ngTemplateOutlet",o.selectButtonTemplate)("ngTemplateOutletContext",Qe(2,uce,t,r))}}function _ce(i,n){if(i&1){let e=L();m(0,"div",4),k("click",function(r){let o=y(e),s=o.$implicit,a=o.index,l=u();return w(l.onOptionSelect(r,s,a))})("keydown",function(r){let o=y(e),s=o.$implicit,a=o.index,l=u();return w(l.onKeyDown(r,s,a))})("focus",function(r){let o=y(e).index,s=u();return w(s.onFocus(r,o))})("blur",function(){y(e);let r=u();return w(r.onBlur())}),v(1,fce,4,3,"ng-container",5)(2,gce,1,5,"ng-template",null,1,Bt),g()}if(i&2){let e=n.$implicit,t=n.index,r=He(3),o=u();ce(e.styleClass),f("role",o.multiple?"checkbox":"radio")("ngClass",en(14,pce,o.isSelected(e),o.disabled||o.isOptionDisabled(e),e.icon&&!o.getOptionLabel(e)))("autofocus",o.autofocus),G("tabindex",t===o.focusedIndex&&!o.disabled?"0":"-1")("aria-label",e.label)("aria-checked",o.isSelected(e))("aria-disabled",o.optionDisabled)("title",e.title)("aria-labelledby",o.getOptionLabel(e))("data-pc-section","button"),p(),f("ngIf",!o.itemTemplate)("ngIfElse",r)}}var Cce={provide:fn,useExisting:Zt(()=>AO),multi:!0},AO=(()=>{class i{cd;options;optionLabel;optionValue;optionDisabled;unselectable=!1;tabindex=0;multiple;allowEmpty=!0;style;styleClass;ariaLabelledBy;disabled;dataKey;autofocus;onOptionClick=new X;onChange=new X;container;itemTemplate;get selectButtonTemplate(){return this.itemTemplate?.template}get equalityKey(){return this.optionValue?null:this.dataKey}value;onModelChange=()=>{};onModelTouched=()=>{};focusedIndex=0;constructor(e){this.cd=e}getOptionLabel(e){return this.optionLabel?ge.resolveFieldData(e,this.optionLabel):e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?ge.resolveFieldData(e,this.optionValue):this.optionLabel||e.value===void 0?e:e.value}isOptionDisabled(e){return this.optionDisabled?ge.resolveFieldData(e,this.optionDisabled):e.disabled!==void 0?e.disabled:!1}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionSelect(e,t,r){if(this.disabled||this.isOptionDisabled(t))return;let o=this.isSelected(t);if(o&&this.unselectable)return;let s=this.getOptionValue(t),a;if(this.multiple)o?a=this.value.filter(l=>!ge.equals(l,s,this.equalityKey)):a=this.value?[...this.value,s]:[s];else{if(o&&!this.allowEmpty)return;a=o?null:s}this.focusedIndex=r,this.value=a,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.onOptionClick.emit({originalEvent:e,option:t,index:r})}onKeyDown(e,t,r){switch(e.code){case"Space":{this.onOptionSelect(e,t,r),e.preventDefault();break}case"ArrowDown":case"ArrowRight":{this.changeTabIndexes(e,"next"),e.preventDefault();break}case"ArrowUp":case"ArrowLeft":{this.changeTabIndexes(e,"prev"),e.preventDefault();break}default:break}}changeTabIndexes(e,t){let r,o;for(let s=0;s<=this.container.nativeElement.children.length-1;s++)this.container.nativeElement.children[s].getAttribute("tabindex")==="0"&&(r={elem:this.container.nativeElement.children[s],index:s});t==="prev"?r.index===0?o=this.container.nativeElement.children.length-1:o=r.index-1:r.index===this.container.nativeElement.children.length-1?o=0:o=r.index+1,this.focusedIndex=o,this.container.nativeElement.children[o].focus()}onFocus(e,t){this.focusedIndex=t}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(t=>!ge.equals(t,this.getOptionValue(e),this.dataKey))}isSelected(e){let t=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value&&Array.isArray(this.value)){for(let o of this.value)if(ge.equals(o,r,this.dataKey)){t=!0;break}}}else t=ge.equals(this.getOptionValue(e),this.value,this.equalityKey);return t}static \u0275fac=function(t){return new(t||i)(S(we))};static \u0275cmp=se({type:i,selectors:[["p-selectButton"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,5),t&2){let s;te(s=ie())&&(r.itemTemplate=s.first)}},viewQuery:function(t,r){if(t&1&&le(dce,5),t&2){let o;te(o=ie())&&(r.container=o.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",unselectable:[2,"unselectable","unselectable",Y],tabindex:[2,"tabindex","tabindex",We],multiple:[2,"multiple","multiple",Y],allowEmpty:[2,"allowEmpty","allowEmpty",Y],style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:[2,"disabled","disabled",Y],dataKey:"dataKey",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[et([Cce]),tt],decls:3,vars:8,consts:[["container",""],["customcontent",""],["role","group",3,"ngClass","ngStyle"],["pRipple","","class","p-button p-component","pAutoFocus","",3,"role","class","ngClass","autofocus","click","keydown","focus","blur",4,"ngFor","ngForOf"],["pRipple","","pAutoFocus","",1,"p-button","p-component",3,"click","keydown","focus","blur","role","ngClass","autofocus"],[4,"ngIf","ngIfElse"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){t&1&&(m(0,"div",2,0),v(2,_ce,4,18,"div",3),g()),t&2&&(ce(r.styleClass),f("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",r.style),G("aria-labelledby",r.ariaLabelledBy)("data-pc-name","selectbutton")("data-pc-section","root"),p(2),f("ngForOf",r.options))},dependencies:[je,hn,rt,mt,De,nn,Zn],styles:[`@layer primeng{.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default;pointer-events:none}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-button-group .p-button{margin:0}.p-button-group .p-button:focus,.p-button-group p-button:focus .p-button,.p-buttonset .p-button:focus,.p-buttonset p-button:focus .p-button{position:relative;z-index:1}.p-button-group .p-button:not(:last-child),.p-button-group .p-button:not(:last-child):hover,.p-button-group p-button:not(:last-child) .p-button,.p-button-group p-button:not(:last-child) .p-button:hover,.p-buttonset .p-button:not(:last-child),.p-buttonset .p-button:not(:last-child):hover,.p-buttonset p-button:not(:last-child) .p-button,.p-buttonset p-button:not(:last-child) .p-button:hover{border-right:0 none}.p-button-group .p-button:not(:first-of-type):not(:last-of-type),.p-button-group p-button:not(:first-of-type):not(:last-of-type) .p-button,.p-buttonset .p-button:not(:first-of-type):not(:last-of-type),.p-buttonset p-button:not(:first-of-type):not(:last-of-type) .p-button{border-radius:0}.p-button-group .p-button:first-of-type:not(:only-of-type),.p-button-group p-button:first-of-type:not(:only-of-type) .p-button,.p-buttonset .p-button:first-of-type:not(:only-of-type),.p-buttonset p-button:first-of-type:not(:only-of-type) .p-button{border-top-right-radius:0;border-bottom-right-radius:0}.p-button-group .p-button:last-of-type:not(:only-of-type),.p-button-group p-button:last-of-type:not(:only-of-type) .p-button,.p-buttonset .p-button:last-of-type:not(:only-of-type),.p-buttonset p-button:last-of-type:not(:only-of-type) .p-button{border-top-left-radius:0;border-bottom-left-radius:0}p-button[iconpos=right] spinnericon{order:1}}
`],encapsulation:2,changeDetection:0})}return i})(),M_=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ln,dt,fr,dt]})}return i})();var yce=(i,n,e)=>({"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":n,"p-variant-filled":e}),wce=(i,n,e)=>({"p-highlight":i,"p-disabled":n,"p-focus":e}),vce=(i,n,e)=>({"p-checkbox-label-active":i,"p-disabled":n,"p-checkbox-label-focus":e});function bce(i,n){if(i&1&&P(0,"span",8),i&2){let e=u(2);f("ngClass",e.checkboxTrueIcon),G("data-pc-section","checkIcon")}}function Sce(i,n){i&1&&P(0,"CheckIcon",11),i&2&&(f("styleClass","p-checkbox-icon"),G("data-pc-section","checkIcon"))}function Ece(i,n){}function Ace(i,n){i&1&&v(0,Ece,0,0,"ng-template")}function xce(i,n){if(i&1&&(m(0,"span",12),v(1,Ace,1,0,null,13),g()),i&2){let e=u(3);G("data-pc-section","checkIcon"),p(),f("ngTemplateOutlet",e.checkIconTemplate)}}function Tce(i,n){if(i&1&&(he(0),v(1,Sce,1,2,"CheckIcon",9)(2,xce,2,2,"span",10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.checkIconTemplate),p(),f("ngIf",e.checkIconTemplate)}}function Oce(i,n){if(i&1&&(he(0),v(1,bce,1,2,"span",7)(2,Tce,3,2,"ng-container",5),fe()),i&2){let e=u();p(),f("ngIf",e.checkboxTrueIcon),p(),f("ngIf",!e.checkboxTrueIcon)}}function Rce(i,n){if(i&1&&P(0,"span",8),i&2){let e=u(2);f("ngClass",e.checkboxFalseIcon),G("data-pc-section","uncheckIcon")}}function Pce(i,n){i&1&&P(0,"TimesIcon",11),i&2&&(f("styleClass","p-checkbox-icon"),G("data-pc-section","uncheckIcon"))}function Dce(i,n){}function Fce(i,n){i&1&&v(0,Dce,0,0,"ng-template")}function kce(i,n){if(i&1&&(m(0,"span",12),v(1,Fce,1,0,null,13),g()),i&2){let e=u(3);G("data-pc-section","uncheckIcon"),p(),f("ngTemplateOutlet",e.uncheckIconTemplate)}}function Nce(i,n){if(i&1&&(he(0),v(1,Pce,1,2,"TimesIcon",9)(2,kce,2,2,"span",10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.uncheckIconTemplate),p(),f("ngIf",e.uncheckIconTemplate)}}function Lce(i,n){if(i&1&&(he(0),v(1,Rce,1,2,"span",7)(2,Nce,3,2,"ng-container",5),fe()),i&2){let e=u();p(),f("ngIf",e.checkboxFalseIcon),p(),f("ngIf",!e.checkboxFalseIcon)}}function Mce(i,n){if(i&1){let e=L();m(0,"label",14),k("click",function(r){y(e);let o=u(),s=He(3);return w(o.onClick(r,s))}),F(1),g()}if(i&2){let e=u();f("ngClass",en(3,vce,e.value!=null,e.disabled,e.focused)),G("for",e.inputId),p(),$(e.label)}}var Vce={provide:fn,useExisting:Zt(()=>Bce),multi:!0},Bce=(()=>{class i{cd;config;constructor(e,t){this.cd=e,this.config=t}disabled;name;ariaLabel;ariaLabelledBy;variant="outlined";tabindex;inputId;style;styleClass;label;readonly;checkboxTrueIcon;checkboxFalseIcon;autofocus;onChange=new X;templates;checkIconTemplate;uncheckIconTemplate;focused;value;onModelChange=()=>{};onModelTouched=()=>{};onClick(e,t){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,t.focus())}onKeyDown(e){e.key==="Enter"&&(this.toggle(e),e.preventDefault())}toggle(e){this.value==null||this.value==null?this.value=!0:this.value==!0?this.value=!1:this.value==!1&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"checkicon":this.checkIconTemplate=e.template;break;case"uncheckicon":this.uncheckIconTemplate=e.template;break}})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}static \u0275fac=function(t){return new(t||i)(S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-triStateCheckbox"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{disabled:[2,"disabled","disabled",Y],name:"name",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",variant:"variant",tabindex:[2,"tabindex","tabindex",We],inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:[2,"readonly","readonly",Y],checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onChange:"onChange"},features:[et([Vce]),tt],decls:8,vars:28,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox","inputmode","none","pAutoFocus","",3,"keydown","focus","blur","name","readonly","disabled","autofocus"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[1,"p-checkbox-label",3,"click","ngClass"]],template:function(t,r){if(t&1){let o=L();m(0,"div",1),k("click",function(a){y(o);let l=He(3);return w(r.onClick(a,l))}),m(1,"div",2)(2,"input",3,0),k("keydown",function(a){return y(o),w(r.onKeyDown(a))})("focus",function(){return y(o),w(r.onFocus())})("blur",function(){return y(o),w(r.onBlur())}),g()(),m(4,"div",4),v(5,Oce,3,2,"ng-container",5)(6,Lce,3,2,"ng-container",5),g()(),v(7,Mce,2,7,"label",6)}t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",en(20,yce,r.disabled,r.focused,r.variant==="filled"||r.config.inputStyle()==="filled")),G("data-pc-name","tristatecheckbox")("data-pc-section","root"),p(2),f("name",r.name)("readonly",r.readonly)("disabled",r.disabled)("autofocus",r.autofocus),G("id",r.inputId)("tabindex",r.tabindex)("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("data-pc-section","hiddenInput"),p(2),f("ngClass",en(24,wce,r.value!=null,r.disabled,r.focused)),G("aria-checked",r.value===!0),p(),f("ngIf",r.value===!0),p(),f("ngIf",r.value===!1),p(),f("ngIf",r.label))},dependencies:()=>[je,rt,mt,De,Zn,On,Ji],encapsulation:2,changeDetection:0})}return i})(),a5=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,fr,On,Ji,dt]})}return i})();var Uce=["container"],jce=["resizeHelper"],Gce=["reorderIndicatorUp"],Hce=["reorderIndicatorDown"],Wce=["wrapper"],zce=["table"],Kce=["thead"],$ce=["tfoot"],Jce=["scroller"],qce=(i,n,e)=>({"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-scrollable":n,"p-datatable-flex-scrollable":e}),Yce=i=>({maxHeight:i}),l5=i=>({height:i}),c5=(i,n)=>({$implicit:i,options:n}),Xce=i=>({columns:i}),Qce=(i,n,e)=>({"p-datatable-table":!0,"p-datatable-scrollable-table":i,"p-datatable-resizable-table":n,"p-datatable-resizable-table-fit":e}),Bw=i=>({$implicit:i}),xO=()=>({display:"none"});function Zce(i,n){if(i&1&&P(0,"i"),i&2){let e=u(2);ce("p-datatable-loading-icon "+e.loadingIcon)}}function ede(i,n){i&1&&P(0,"SpinnerIcon",25),i&2&&f("spin",!0)("styleClass","p-datatable-loading-icon")}function tde(i,n){}function ide(i,n){i&1&&v(0,tde,0,0,"ng-template")}function nde(i,n){if(i&1&&(m(0,"span",26),v(1,ide,1,0,null,27),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function rde(i,n){if(i&1&&(he(0),v(1,ede,1,2,"SpinnerIcon",23)(2,nde,2,1,"span",24),fe()),i&2){let e=u(2);p(),f("ngIf",!e.loadingIconTemplate),p(),f("ngIf",e.loadingIconTemplate)}}function ode(i,n){if(i&1&&(m(0,"div",21),v(1,Zce,1,2,"i",22)(2,rde,3,2,"ng-container",16),g()),i&2){let e=u();p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function sde(i,n){i&1&&ue(0)}function ade(i,n){if(i&1&&(m(0,"div",28),v(1,sde,1,0,"ng-container",27),g()),i&2){let e=u();p(),f("ngTemplateOutlet",e.captionTemplate)}}function lde(i,n){i&1&&ue(0)}function cde(i,n){if(i&1&&v(0,lde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorDropdownIconTemplate)}}function dde(i,n){i&1&&v(0,cde,1,1,"ng-template",30)}function pde(i,n){i&1&&ue(0)}function ude(i,n){if(i&1&&v(0,pde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function hde(i,n){i&1&&v(0,ude,1,1,"ng-template",31)}function fde(i,n){i&1&&ue(0)}function mde(i,n){if(i&1&&v(0,fde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function gde(i,n){i&1&&v(0,mde,1,1,"ng-template",32)}function _de(i,n){i&1&&ue(0)}function Cde(i,n){if(i&1&&v(0,_de,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function Ide(i,n){i&1&&v(0,Cde,1,1,"ng-template",33)}function yde(i,n){i&1&&ue(0)}function wde(i,n){if(i&1&&v(0,yde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function vde(i,n){i&1&&v(0,wde,1,1,"ng-template",34)}function bde(i,n){if(i&1){let e=L();m(0,"p-paginator",29),k("onPageChange",function(r){y(e);let o=u();return w(o.onPageChange(r))}),v(1,dde,1,0,null,16)(2,hde,1,0,null,16)(3,gde,1,0,null,16)(4,Ide,1,0,null,16)(5,vde,1,0,null,16),g()}if(i&2){let e=u();f("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)("styleClass",e.getPaginatorStyleClasses("p-paginator-top"))("locale",e.paginatorLocale),p(),f("ngIf",e.paginatorDropdownIconTemplate),p(),f("ngIf",e.paginatorFirstPageLinkIconTemplate),p(),f("ngIf",e.paginatorPreviousPageLinkIconTemplate),p(),f("ngIf",e.paginatorLastPageLinkIconTemplate),p(),f("ngIf",e.paginatorNextPageLinkIconTemplate)}}function Sde(i,n){i&1&&ue(0)}function Ede(i,n){if(i&1&&v(0,Sde,1,0,"ng-container",37),i&2){let e=n.$implicit,t=n.options;u(2);let r=He(10);f("ngTemplateOutlet",r)("ngTemplateOutletContext",Qe(2,c5,e,t))}}function Ade(i,n){if(i&1){let e=L();m(0,"p-scroller",35,3),k("onLazyLoad",function(r){y(e);let o=u();return w(o.onLazyItemLoad(r))}),v(2,Ede,1,5,"ng-template",36),g()}if(i&2){let e=u();st(ne(15,l5,e.scrollHeight!=="flex"?e.scrollHeight:void 0)),f("items",e.processedData)("columns",e.columns)("scrollHeight",e.scrollHeight!=="flex"?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("step",e.rows)("delay",e.lazy?e.virtualScrollDelay:0)("inline",!0)("autoSize",!0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function xde(i,n){i&1&&ue(0)}function Tde(i,n){if(i&1&&(he(0),v(1,xde,1,0,"ng-container",37),fe()),i&2){let e=u(),t=He(10);p(),f("ngTemplateOutlet",t)("ngTemplateOutletContext",Qe(4,c5,e.processedData,ne(2,Xce,e.columns)))}}function Ode(i,n){i&1&&ue(0)}function Rde(i,n){i&1&&ue(0)}function Pde(i,n){if(i&1&&P(0,"tbody",44),i&2){let e=u().options,t=u();f("value",t.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",t.frozenBodyTemplate)("frozen",!0)}}function Dde(i,n){if(i&1&&P(0,"tbody",45),i&2){let e=u().options;f("ngStyle",ne(1,l5,"calc("+e.spacerStyle.height+" - "+e.rows.length*e.itemSize+"px)"))}}function Fde(i,n){i&1&&ue(0)}function kde(i,n){if(i&1&&(m(0,"tfoot",46,6),v(2,Fde,1,0,"ng-container",37),g()),i&2){let e=u().options,t=u();p(2),f("ngTemplateOutlet",t.footerGroupedTemplate||t.footerTemplate)("ngTemplateOutletContext",ne(2,Bw,e.columns))}}function Nde(i,n){if(i&1&&(m(0,"table",38,4),v(2,Ode,1,0,"ng-container",37),m(3,"thead",39,5),v(5,Rde,1,0,"ng-container",37),g(),v(6,Pde,1,5,"tbody",40),P(7,"tbody",41),v(8,Dde,1,3,"tbody",42)(9,kde,3,4,"tfoot",43),g()),i&2){let e=n.options,t=u();ce(t.tableStyleClass),f("ngClass",en(18,Qce,t.scrollable,t.resizableColumns,t.resizableColumns&&t.columnResizeMode==="fit"))("ngStyle",t.tableStyle),G("id",t.id+"-table"),p(2),f("ngTemplateOutlet",t.colGroupTemplate)("ngTemplateOutletContext",ne(22,Bw,e.columns)),p(3),f("ngTemplateOutlet",t.headerGroupedTemplate||t.headerTemplate)("ngTemplateOutletContext",ne(24,Bw,e.columns)),p(),f("ngIf",t.frozenValue||t.frozenBodyTemplate),p(),f("ngClass",e.contentStyleClass)("ngStyle",e.contentStyle)("value",t.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",t.bodyTemplate)("scrollerOptions",e),p(),f("ngIf",e.spacerStyle),p(),f("ngIf",t.footerGroupedTemplate||t.footerTemplate)}}function Lde(i,n){i&1&&ue(0)}function Mde(i,n){if(i&1&&v(0,Lde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorDropdownIconTemplate)}}function Vde(i,n){i&1&&v(0,Mde,1,1,"ng-template",30)}function Bde(i,n){i&1&&ue(0)}function Ude(i,n){if(i&1&&v(0,Bde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function jde(i,n){i&1&&v(0,Ude,1,1,"ng-template",31)}function Gde(i,n){i&1&&ue(0)}function Hde(i,n){if(i&1&&v(0,Gde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function Wde(i,n){i&1&&v(0,Hde,1,1,"ng-template",32)}function zde(i,n){i&1&&ue(0)}function Kde(i,n){if(i&1&&v(0,zde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function $de(i,n){i&1&&v(0,Kde,1,1,"ng-template",33)}function Jde(i,n){i&1&&ue(0)}function qde(i,n){if(i&1&&v(0,Jde,1,0,"ng-container",27),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function Yde(i,n){i&1&&v(0,qde,1,1,"ng-template",34)}function Xde(i,n){if(i&1){let e=L();m(0,"p-paginator",29),k("onPageChange",function(r){y(e);let o=u();return w(o.onPageChange(r))}),v(1,Vde,1,0,null,16)(2,jde,1,0,null,16)(3,Wde,1,0,null,16)(4,$de,1,0,null,16)(5,Yde,1,0,null,16),g()}if(i&2){let e=u();f("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)("styleClass",e.getPaginatorStyleClasses("p-paginator-bottom"))("locale",e.paginatorLocale),p(),f("ngIf",e.paginatorDropdownIconTemplate),p(),f("ngIf",e.paginatorFirstPageLinkIconTemplate),p(),f("ngIf",e.paginatorPreviousPageLinkIconTemplate),p(),f("ngIf",e.paginatorLastPageLinkIconTemplate),p(),f("ngIf",e.paginatorNextPageLinkIconTemplate)}}function Qde(i,n){i&1&&ue(0)}function Zde(i,n){if(i&1&&(m(0,"div",47),v(1,Qde,1,0,"ng-container",27),g()),i&2){let e=u();p(),f("ngTemplateOutlet",e.summaryTemplate)}}function epe(i,n){i&1&&P(0,"div",48,7),i&2&&f("ngStyle",Ae(1,xO))}function tpe(i,n){i&1&&P(0,"ArrowDownIcon")}function ipe(i,n){}function npe(i,n){i&1&&v(0,ipe,0,0,"ng-template")}function rpe(i,n){if(i&1&&(m(0,"span",49,8),v(2,tpe,1,0,"ArrowDownIcon",16)(3,npe,1,0,null,27),g()),i&2){let e=u();f("ngStyle",Ae(3,xO)),p(2),f("ngIf",!e.reorderIndicatorUpIconTemplate),p(),f("ngTemplateOutlet",e.reorderIndicatorUpIconTemplate)}}function ope(i,n){i&1&&P(0,"ArrowUpIcon")}function spe(i,n){}function ape(i,n){i&1&&v(0,spe,0,0,"ng-template")}function lpe(i,n){if(i&1&&(m(0,"span",50,9),v(2,ope,1,0,"ArrowUpIcon",16)(3,ape,1,0,null,27),g()),i&2){let e=u();f("ngStyle",Ae(3,xO)),p(2),f("ngIf",!e.reorderIndicatorDownIconTemplate),p(),f("ngTemplateOutlet",e.reorderIndicatorDownIconTemplate)}}var cpe=["pTableBody",""],TO=(i,n,e,t,r)=>({$implicit:i,rowIndex:n,columns:e,editing:t,frozen:r}),dpe=(i,n,e,t,r,o,s)=>({$implicit:i,rowIndex:n,columns:e,editing:t,frozen:r,rowgroup:o,rowspan:s}),jw=(i,n,e,t,r,o)=>({$implicit:i,rowIndex:n,columns:e,expanded:t,editing:r,frozen:o}),d5=(i,n,e,t)=>({$implicit:i,rowIndex:n,columns:e,frozen:t}),p5=(i,n)=>({$implicit:i,frozen:n});function ppe(i,n){i&1&&ue(0)}function upe(i,n){if(i&1&&(he(0,3),v(1,ppe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",ac(2,TO,t,o.getRowIndex(r),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function hpe(i,n){i&1&&ue(0)}function fpe(i,n){if(i&1&&(he(0),v(1,hpe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",t?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",ac(2,TO,t,o.getRowIndex(r),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function mpe(i,n){i&1&&ue(0)}function gpe(i,n){if(i&1&&(he(0),v(1,mpe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",t?o.template:o.dt.loadingBodyTemplate)("ngTemplateOutletContext",$3(2,dpe,t,o.getRowIndex(r),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen,o.shouldRenderRowspan(o.value,t,r),o.calculateRowGroupSize(o.value,t,r)))}}function _pe(i,n){i&1&&ue(0)}function Cpe(i,n){if(i&1&&(he(0,3),v(1,_pe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",ac(2,TO,t,o.getRowIndex(r),o.columns,o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function Ipe(i,n){if(i&1&&v(0,upe,2,8,"ng-container",2)(1,fpe,2,8,"ng-container",0)(2,gpe,2,10,"ng-container",0)(3,Cpe,2,8,"ng-container",2),i&2){let e=n.$implicit,t=n.index,r=u(2);f("ngIf",r.dt.groupHeaderTemplate&&!r.dt.virtualScroll&&r.dt.rowGroupMode==="subheader"&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(t))),p(),f("ngIf",r.dt.rowGroupMode!=="rowspan"),p(),f("ngIf",r.dt.rowGroupMode==="rowspan"),p(),f("ngIf",r.dt.groupFooterTemplate&&!r.dt.virtualScroll&&r.dt.rowGroupMode==="subheader"&&r.shouldRenderRowGroupFooter(r.value,e,t))}}function ype(i,n){if(i&1&&(he(0),v(1,Ipe,4,4,"ng-template",1),fe()),i&2){let e=u();p(),f("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function wpe(i,n){i&1&&ue(0)}function vpe(i,n){if(i&1&&(he(0),v(1,wpe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.template)("ngTemplateOutletContext",Po(2,jw,t,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(t),o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function bpe(i,n){i&1&&ue(0)}function Spe(i,n){if(i&1&&(he(0,3),v(1,bpe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.groupHeaderTemplate)("ngTemplateOutletContext",Po(2,jw,t,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(t),o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function Epe(i,n){i&1&&ue(0)}function Ape(i,n){i&1&&ue(0)}function xpe(i,n){if(i&1&&(he(0,3),v(1,Ape,1,0,"ng-container",4),fe()),i&2){let e=u(2),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.groupFooterTemplate)("ngTemplateOutletContext",Po(2,jw,t,o.getRowIndex(r),o.columns,o.dt.isRowExpanded(t),o.dt.editMode==="row"&&o.dt.isRowEditing(t),o.frozen))}}function Tpe(i,n){if(i&1&&(he(0),v(1,Epe,1,0,"ng-container",4)(2,xpe,2,9,"ng-container",2),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.expandedRowTemplate)("ngTemplateOutletContext",xn(3,d5,t,o.getRowIndex(r),o.columns,o.frozen)),p(),f("ngIf",o.dt.groupFooterTemplate&&o.dt.rowGroupMode==="subheader"&&o.shouldRenderRowGroupFooter(o.value,t,o.getRowIndex(r)))}}function Ope(i,n){if(i&1&&v(0,vpe,2,9,"ng-container",0)(1,Spe,2,9,"ng-container",2)(2,Tpe,3,8,"ng-container",0),i&2){let e=n.$implicit,t=n.index,r=u(2);f("ngIf",!r.dt.groupHeaderTemplate),p(),f("ngIf",r.dt.groupHeaderTemplate&&r.dt.rowGroupMode==="subheader"&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(t))),p(),f("ngIf",r.dt.isRowExpanded(e))}}function Rpe(i,n){if(i&1&&(he(0),v(1,Ope,3,3,"ng-template",1),fe()),i&2){let e=u();p(),f("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Ppe(i,n){i&1&&ue(0)}function Dpe(i,n){i&1&&ue(0)}function Fpe(i,n){if(i&1&&(he(0),v(1,Dpe,1,0,"ng-container",4),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(2);p(),f("ngTemplateOutlet",o.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",xn(2,d5,t,o.getRowIndex(r),o.columns,o.frozen))}}function kpe(i,n){if(i&1&&v(0,Ppe,1,0,"ng-container",4)(1,Fpe,2,7,"ng-container",0),i&2){let e=n.$implicit,t=n.index,r=u(2);f("ngTemplateOutlet",r.template)("ngTemplateOutletContext",Po(3,jw,e,r.getRowIndex(t),r.columns,r.dt.isRowExpanded(e),r.dt.editMode==="row"&&r.dt.isRowEditing(e),r.frozen)),p(),f("ngIf",r.dt.isRowExpanded(e))}}function Npe(i,n){if(i&1&&(he(0),v(1,kpe,2,10,"ng-template",1),fe()),i&2){let e=u();p(),f("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Lpe(i,n){i&1&&ue(0)}function Mpe(i,n){if(i&1&&(he(0),v(1,Lpe,1,0,"ng-container",4),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",Qe(2,p5,e.columns,e.frozen))}}function Vpe(i,n){i&1&&ue(0)}function Bpe(i,n){if(i&1&&(he(0),v(1,Vpe,1,0,"ng-container",4),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",Qe(2,p5,e.columns,e.frozen))}}function Upe(i,n){i&1&&P(0,"SortAltIcon",4),i&2&&f("styleClass","p-sortable-column-icon")}function jpe(i,n){i&1&&P(0,"SortAmountUpAltIcon",4),i&2&&f("styleClass","p-sortable-column-icon")}function Gpe(i,n){i&1&&P(0,"SortAmountDownIcon",4),i&2&&f("styleClass","p-sortable-column-icon")}function Hpe(i,n){if(i&1&&(he(0),v(1,Upe,1,1,"SortAltIcon",3)(2,jpe,1,1,"SortAmountUpAltIcon",3)(3,Gpe,1,1,"SortAmountDownIcon",3),fe()),i&2){let e=u();p(),f("ngIf",e.sortOrder===0),p(),f("ngIf",e.sortOrder===1),p(),f("ngIf",e.sortOrder===-1)}}function Wpe(i,n){}function zpe(i,n){i&1&&v(0,Wpe,0,0,"ng-template")}function Kpe(i,n){if(i&1&&(m(0,"span",5),v(1,zpe,1,0,null,6),g()),i&2){let e=u();p(),f("ngTemplateOutlet",e.dt.sortIconTemplate)("ngTemplateOutletContext",ne(2,Bw,e.sortOrder))}}function $pe(i,n){if(i&1&&(m(0,"span",7),F(1),g()),i&2){let e=u();p(),$(e.getBadgeValue())}}function Jpe(i,n){i&1&&ue(0)}function qpe(i,n){if(i&1&&(he(0),v(1,Jpe,1,0,"ng-container",1),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.inputTemplate)}}function Ype(i,n){i&1&&ue(0)}function Xpe(i,n){if(i&1&&(he(0),v(1,Ype,1,0,"ng-container",1),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.outputTemplate)}}var Uw=(()=>{class i{sortSource=new Ue;selectionSource=new Ue;contextMenuSource=new Ue;valueSource=new Ue;totalRecordsSource=new Ue;columnsSource=new Ue;isHeaderCheckboxSelection=new Ue;sortSource$=this.sortSource.asObservable();isHeaderCheckboxSelection$=this.isHeaderCheckboxSelection.asObservable();selectionSource$=this.selectionSource.asObservable();contextMenuSource$=this.contextMenuSource.asObservable();valueSource$=this.valueSource.asObservable();totalRecordsSource$=this.totalRecordsSource.asObservable();columnsSource$=this.columnsSource.asObservable();onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}onHeaderCheckboxSelection(e){this.isHeaderCheckboxSelection.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),sr=(()=>{class i{document;platformId;renderer;el;zone;tableService;cd;filterService;overlayService;config;domSanitizer;frozenColumns;frozenValue;style;styleClass;tableStyle;tableStyleClass;paginator;pageLinks=5;rowsPerPageOptions;alwaysShowPaginator=!0;paginatorPosition="bottom";paginatorStyleClass;paginatorDropdownAppendTo;paginatorDropdownScrollHeight="200px";currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showJumpToPageDropdown;showJumpToPageInput;showFirstLastIcon=!0;showPageLinks=!0;defaultSortOrder=1;sortMode="single";resetPageOnSort=!0;selectionMode;selectionPageOnly;contextMenuSelection;contextMenuSelectionChange=new X;contextMenuSelectionMode="separate";dataKey;metaKeySelection=!1;rowSelectable;rowTrackBy=(e,t)=>t;lazy=!1;lazyLoadOnInit=!0;compareSelectionBy="deepEquals";csvSeparator=",";exportFilename="download";filters={};globalFilterFields;filterDelay=300;filterLocale;expandedRowKeys={};editingRowKeys={};rowExpandMode="multiple";scrollable;scrollDirection="vertical";rowGroupMode;scrollHeight;virtualScroll;virtualScrollItemSize;virtualScrollOptions;virtualScrollDelay=250;frozenWidth;get responsive(){return this._responsive}set responsive(e){this._responsive=e,console.warn("responsive property is deprecated as table is always responsive with scrollable behavior.")}_responsive;contextMenu;resizableColumns;columnResizeMode="fit";reorderableColumns;loading;loadingIcon;showLoader=!0;rowHover;customSort;showInitialSortBadge=!0;autoLayout;exportFunction;exportHeader;stateKey;stateStorage="session";editMode="cell";groupRowsBy;groupRowsByOrder=1;responsiveLayout="scroll";breakpoint="960px";paginatorLocale;get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}selectAllChange=new X;selectionChange=new X;onRowSelect=new X;onRowUnselect=new X;onPage=new X;onSort=new X;onFilter=new X;onLazyLoad=new X;onRowExpand=new X;onRowCollapse=new X;onContextMenuSelect=new X;onColResize=new X;onColReorder=new X;onRowReorder=new X;onEditInit=new X;onEditComplete=new X;onEditCancel=new X;onHeaderCheckboxToggle=new X;sortFunction=new X;firstChange=new X;rowsChange=new X;onStateSave=new X;onStateRestore=new X;containerViewChild;resizeHelperViewChild;reorderIndicatorUpViewChild;reorderIndicatorDownViewChild;wrapperViewChild;tableViewChild;tableHeaderViewChild;tableFooterViewChild;scroller;templates;get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated.")}_virtualRowHeight=28;_value=[];_columns;_totalRecords=0;_first=0;_rows;filteredValue;headerTemplate;headerGroupedTemplate;bodyTemplate;loadingBodyTemplate;captionTemplate;footerTemplate;footerGroupedTemplate;summaryTemplate;colGroupTemplate;expandedRowTemplate;groupHeaderTemplate;groupFooterTemplate;frozenExpandedRowTemplate;frozenHeaderTemplate;frozenBodyTemplate;frozenFooterTemplate;frozenColGroupTemplate;emptyMessageTemplate;paginatorLeftTemplate;paginatorRightTemplate;paginatorDropdownItemTemplate;loadingIconTemplate;reorderIndicatorUpIconTemplate;reorderIndicatorDownIconTemplate;sortIconTemplate;checkboxIconTemplate;headerCheckboxIconTemplate;paginatorDropdownIconTemplate;paginatorFirstPageLinkIconTemplate;paginatorLastPageLinkIconTemplate;paginatorPreviousPageLinkIconTemplate;paginatorNextPageLinkIconTemplate;selectionKeys={};lastResizerHelperX;reorderIconWidth;reorderIconHeight;draggedColumn;draggedRowIndex;droppedRowIndex;rowDragging;dropPosition;editingCell;editingCellData;editingCellField;editingCellRowIndex;selfClick;documentEditListener;_multiSortMeta;_sortField;_sortOrder=1;preventSelectionSetterPropagation;_selection;_selectAll=null;anchorRowIndex;rangeRowIndex;filterTimeout;initialized;rowTouched;restoringSort;restoringFilter;stateRestored;columnOrderStateRestored;columnWidthsState;tableWidthState;overlaySubscription;resizeColumnElement;columnResizing=!1;rowGroupHeaderStyleObject={};id=Tt();styleElement;responsiveStyleElement;window;constructor(e,t,r,o,s,a,l,c,d,h,_){this.document=e,this.platformId=t,this.renderer=r,this.el=o,this.zone=s,this.tableService=a,this.cd=l,this.filterService=c,this.overlayService=d,this.config=h,this.domSanitizer=_,this.window=this.document.defaultView}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),this.responsiveLayout==="stack"&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownicon":this.paginatorDropdownIconTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=e.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=e.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=e.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=e.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=e.template;break;case"sorticon":this.sortIconTemplate=e.template;break;case"checkboxicon":this.checkboxIconTemplate=e.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break}})}ngAfterViewInit(){bt(this.platformId)&&this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&bt(this.platformId)&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,this.sortMode=="single"&&(this.sortField||this.groupRowsBy)?this.sortSingle():this.sortMode=="multiple"&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this.isStateful()||(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue)),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&(this.restoreColumnOrder(),this.tableService.onColumnsChange(this._columns))),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,this.sortMode==="multiple"&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get processedData(){return this.filteredValue||this.value||[]}_initialColWidths;dataToRender(e){let t=e||this.processedData;if(t&&this.paginator){let r=this.lazy?0:this.first;return t.slice(r,r+this.rows)}return t}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ge.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(ge.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let t=e.originalEvent;if(this.sortMode==="single"&&(this._sortOrder=this.sortField===e.field?this.sortOrder*-1:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),this.sortMode==="multiple"){let r=t.metaKey||t.ctrlKey,o=this.getSortMeta(e.field);o?r?o.order=o.order*-1:(this._multiSortMeta=[{field:e.field,order:o.order*-1}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,t=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField){this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],this.sortMultiple();return}if(e&&t){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:t}):(this.value.sort((o,s)=>{let a=ge.resolveFieldData(o,e),l=ge.resolveFieldData(s,e),c=null;return a==null&&l!=null?c=-1:a!=null&&l==null?c=1:a==null&&l==null?c=0:typeof a=="string"&&typeof l=="string"?c=a.localeCompare(l):c=a<l?-1:a>l?1:0,t*c}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:t};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,t)=>this.multisortField(e,t,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,t,r,o){let s=ge.resolveFieldData(e,r[o].field),a=ge.resolveFieldData(t,r[o].field);return ge.compare(s,a,this.filterLocale)===0?r.length-1>o?this.multisortField(e,t,r,o+1):0:this.compareValuesOnSort(s,a,r[o].order)}compareValuesOnSort(e,t,r){return ge.sort(e,t,r,this.filterLocale,this.sortOrder)}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length){for(let t=0;t<this.multiSortMeta.length;t++)if(this.multiSortMeta[t].field===e)return this.multiSortMeta[t]}return null}isSorted(e){if(this.sortMode==="single")return this.sortField&&this.sortField===e;if(this.sortMode==="multiple"){let t=!1;if(this.multiSortMeta){for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){t=!0;break}}return t}}handleRowClick(e){let t=e.originalEvent.target,r=t.nodeName,o=t.parentElement&&t.parentElement.nodeName;if(!(r=="INPUT"||r=="BUTTON"||r=="A"||o=="INPUT"||o=="BUTTON"||o=="A"||j.hasClass(e.originalEvent.target,"p-clickable"))){if(this.selectionMode){let s=e.rowData,a=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&this.anchorRowIndex!=null)j.clearSelection(),this.rangeRowIndex!=null&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=a,this.selectRange(e.originalEvent,a);else{let l=this.isSelected(s);if(!l&&!this.isRowSelectable(s,a))return;let c=this.rowTouched?!1:this.metaKeySelection,d=this.dataKey?String(ge.resolveFieldData(s,this.dataKey)):null;if(this.anchorRowIndex=a,this.rangeRowIndex=a,c){let h=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(l&&h){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let _=this.findIndexInSelection(s);this._selection=this.selection.filter((C,I)=>I!=_),this.selectionChange.emit(this.selection),d&&delete this.selectionKeys[d]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:s,type:"row"})}else this.isSingleSelectionMode()?(this._selection=s,this.selectionChange.emit(s),d&&(this.selectionKeys={},this.selectionKeys[d]=1)):this.isMultipleSelectionMode()&&(h?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,s],this.selectionChange.emit(this.selection),d&&(this.selectionKeys[d]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:s,type:"row",index:a})}else if(this.selectionMode==="single")l?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:s,type:"row",index:a})):(this._selection=s,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:s,type:"row",index:a}),d&&(this.selectionKeys={},this.selectionKeys[d]=1));else if(this.selectionMode==="multiple")if(l){let h=this.findIndexInSelection(s);this._selection=this.selection.filter((_,C)=>C!=h),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:s,type:"row",index:a}),d&&delete this.selectionKeys[d]}else this._selection=this.selection?[...this.selection,s]:[s],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:s,type:"row",index:a}),d&&(this.selectionKeys[d]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){let t=e.rowData,r=e.rowIndex;if(this.contextMenuSelectionMode==="separate")this.contextMenuSelection=t,this.contextMenuSelectionChange.emit(t),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:t,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(t);else if(this.contextMenuSelectionMode==="joint"){this.preventSelectionSetterPropagation=!0;let o=this.isSelected(t),s=this.dataKey?String(ge.resolveFieldData(t,this.dataKey)):null;if(!o){if(!this.isRowSelectable(t,r))return;this.isSingleSelectionMode()?(this.selection=t,this.selectionChange.emit(t),s&&(this.selectionKeys={},this.selectionKeys[s]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,t]:[t],this.selectionChange.emit(this.selection),s&&(this.selectionKeys[s]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:t,index:e.rowIndex})}}}selectRange(e,t,r){let o,s;this.anchorRowIndex>t?(o=t,s=this.anchorRowIndex):this.anchorRowIndex<t?(o=this.anchorRowIndex,s=t):(o=t,s=t),this.lazy&&this.paginator&&(o-=this.first,s-=this.first);let a=[];for(let l=o;l<=s;l++){let c=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(c)&&!r){if(!this.isRowSelectable(c,t))continue;a.push(c),this._selection=[...this.selection,c];let d=this.dataKey?String(ge.resolveFieldData(c,this.dataKey)):null;d&&(this.selectionKeys[d]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:a,type:"row"})}clearSelectionRange(e){let t,r,o=this.rangeRowIndex,s=this.anchorRowIndex;o>s?(t=this.anchorRowIndex,r=this.rangeRowIndex):o<s?(t=this.rangeRowIndex,r=this.anchorRowIndex):(t=this.rangeRowIndex,r=this.rangeRowIndex);for(let a=t;a<=r;a++){let l=this.value[a],c=this.findIndexInSelection(l);this._selection=this.selection.filter((h,_)=>_!=c);let d=this.dataKey?String(ge.resolveFieldData(l,this.dataKey)):null;d&&delete this.selectionKeys[d],this.onRowUnselect.emit({originalEvent:e,data:l,type:"row"})}}isSelected(e){return e&&this.selection?this.dataKey?this.selectionKeys[ge.resolveFieldData(e,this.dataKey)]!==void 0:Array.isArray(this.selection)?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1}findIndexInSelection(e){let t=-1;if(this.selection&&this.selection.length){for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){t=r;break}}return t}isRowSelectable(e,t){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:t}))}toggleRowWithRadio(e,t){if(this.preventSelectionSetterPropagation=!0,this.selection!=t){if(!this.isRowSelectable(t,e.rowIndex))return;this._selection=t,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:t,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(ge.resolveFieldData(t,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:t,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,t){this.selection=this.selection||[];let r=this.isSelected(t),o=this.dataKey?String(ge.resolveFieldData(t,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let s=this.findIndexInSelection(t);this._selection=this.selection.filter((a,l)=>l!=s),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:t,type:"checkbox"}),o&&delete this.selectionKeys[o]}else{if(!this.isRowSelectable(t,e.rowIndex))return;this._selection=this.selection?[...this.selection,t]:[t],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:t,type:"checkbox"}),o&&(this.selectionKeys[o]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,t){if(this._selectAll!==null)this.selectAllChange.emit({originalEvent:e,checked:t});else{let r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData,o=this.selectionPageOnly&&this._selection?this._selection.filter(s=>!r.some(a=>this.equals(s,a))):[];t&&(o=this.frozenValue?[...o,...this.frozenValue,...r]:[...o,...r],o=this.rowSelectable?o.filter((s,a)=>this.rowSelectable({data:s,index:a})):o),this._selection=o,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:t}),this.isStateful()&&this.saveState()}}equals(e,t){return this.compareSelectionBy==="equals"?e===t:ge.equals(e,t,this.dataKey)}filter(e,t,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[t]&&delete this.filters[t]:this.filters[t]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,t){this.filter(e,"global",t)}isFilterBlank(e){return e!=null?!!(typeof e=="string"&&e.trim().length==0||Array.isArray(e)&&e.length==0):!0}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(!this.hasFilter())this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0);else{let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let t=0;t<this.value.length;t++){let r=!0,o=!1,s=!1;for(let l in this.filters)if(this.filters.hasOwnProperty(l)&&l!=="global"){s=!0;let c=l,d=this.filters[c];if(Array.isArray(d)){for(let h of d)if(r=this.executeLocalFilter(c,this.value[t],h),h.operator===oO.OR&&r||h.operator===oO.AND&&!r)break}else r=this.executeLocalFilter(c,this.value[t],d);if(!r)break}if(this.filters.global&&!o&&e)for(let l=0;l<e.length;l++){let c=e[l].field||e[l];if(o=this.filterService.filters[this.filters.global.matchMode](ge.resolveFieldData(this.value[t],c),this.filters.global.value,this.filterLocale),o)break}let a;this.filters.global?a=s?s&&r&&o:o:a=s&&r,a&&this.filteredValue.push(this.value[t])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,t,r){let o=r.value,s=r.matchMode||Bo.STARTS_WITH,a=ge.resolveFieldData(t,e),l=this.filterService.filters[s];return l(a,o,this.filterLocale)}hasFilter(){let e=!0;for(let t in this.filters)if(this.filters.hasOwnProperty(t)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.clearFilterValues(),this.filteredValue=null,this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}clearFilterValues(){for(let[,e]of Object.entries(this.filters))if(Array.isArray(e))for(let t of e)t.value=null;else e&&(e.value=null)}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let t,r="",o=this.columns;e&&e.selectionOnly?t=this.selection||[]:e&&e.allValues?t=this.value||[]:(t=this.filteredValue||this.value,this.frozenValue&&(t=t?[...this.frozenValue,...t]:this.frozenValue));let s=o.filter(d=>d.exportable!==!1&&d.field);r+=s.map(d=>'"'+this.getExportHeader(d)+'"').join(this.csvSeparator);let a=t.map(d=>s.map(h=>{let _=ge.resolveFieldData(d,h.field);return _!=null?this.exportFunction?_=this.exportFunction({data:_,field:h.field}):_=String(_).replace(/"/g,'""'):_="",'"'+_+'"'}).join(this.csvSeparator)).join(`
`);a.length&&(r+=`
`+a);let l=new Blob([new Uint8Array([239,187,191]),r],{type:"text/csv;charset=utf-8;"}),c=this.renderer.createElement("a");c.style.display="none",this.renderer.appendChild(this.document.body,c),c.download!==void 0?(c.setAttribute("href",URL.createObjectURL(l)),c.setAttribute("download",this.exportFilename+".csv"),c.click()):(r="data:text/csv;charset=utf-8,"+r,this.window.open(encodeURI(r))),this.renderer.removeChild(this.document.body,c)}onLazyItemLoad(e){this.onLazyLoad.emit(ke(oe(oe({},this.createLazyLoadMetadata()),e),{rows:e.last-e.first}))}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller?.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,t,r,o){this.editingCell=e,this.editingCellData=t,this.editingCellField=r,this.editingCellRowIndex=o,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&j.find(this.editingCell,".ng-invalid.ng-dirty").length===0}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(j.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}initRowEdit(e){let t=String(ge.resolveFieldData(e,this.dataKey));this.editingRowKeys[t]=!0}saveRowEdit(e,t){if(j.find(t,".ng-invalid.ng-dirty").length===0){let r=String(ge.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let t=String(ge.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[t]}toggleRow(e,t){if(!this.dataKey&&!this.groupRowsBy)throw new Error("dataKey or groupRowsBy must be defined to use row expansion");let r=this.groupRowsBy?String(ge.resolveFieldData(e,this.groupRowsBy)):String(ge.resolveFieldData(e,this.dataKey));this.expandedRowKeys[r]!=null?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:t,data:e})):(this.rowExpandMode==="single"&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:t,data:e})),t&&t.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return this.groupRowsBy?this.expandedRowKeys[String(ge.resolveFieldData(e,this.groupRowsBy))]===!0:this.expandedRowKeys[String(ge.resolveFieldData(e,this.dataKey))]===!0}isRowEditing(e){return this.editingRowKeys[String(ge.resolveFieldData(e,this.dataKey))]===!0}isSingleSelectionMode(){return this.selectionMode==="single"}isMultipleSelectionMode(){return this.selectionMode==="multiple"}onColumnResizeBegin(e){let t=j.getOffset(this.containerViewChild?.nativeElement).left;this.resizeColumnElement=e.target.closest("th"),this.columnResizing=!0,e.type=="touchstart"?this.lastResizerHelperX=e.changedTouches[0].clientX-t+this.containerViewChild?.nativeElement.scrollLeft:this.lastResizerHelperX=e.pageX-t+this.containerViewChild?.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let t=j.getOffset(this.containerViewChild?.nativeElement).left;j.addClass(this.containerViewChild?.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild?.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",e.type=="touchmove"?this.resizeHelperViewChild.nativeElement.style.left=e.changedTouches[0].clientX-t+this.containerViewChild?.nativeElement.scrollLeft+"px":this.resizeHelperViewChild.nativeElement.style.left=e.pageX-t+this.containerViewChild?.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild?.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e,o=this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,""),s=o?parseFloat(o):15;if(r>=s){if(this.columnResizeMode==="fit"){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else if(this.columnResizeMode==="expand"){this._initialColWidths=this._totalTableWidth();let a=this.tableViewChild?.nativeElement.offsetWidth+e;this.setResizeTableWidth(a+"px"),this.resizeTableCells(r,null)}this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",j.removeClass(this.containerViewChild?.nativeElement,"p-unselectable-text")}_totalTableWidth(){let e=[],t=j.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");return j.find(t,"tr > th").forEach(o=>e.push(j.getOuterWidth(o))),e}onColumnDragStart(e,t){this.reorderIconWidth=j.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild?.nativeElement),this.reorderIconHeight=j.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild?.nativeElement),this.draggedColumn=t,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,t){if(this.reorderableColumns&&this.draggedColumn&&t){e.preventDefault();let r=j.getOffset(this.containerViewChild?.nativeElement),o=j.getOffset(t);if(this.draggedColumn!=t){let s=j.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),a=j.indexWithinGroup(t,"preorderablecolumn"),l=o.left-r.left,c=r.top-o.top,d=o.left+t.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=o.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=o.top-r.top+t.offsetHeight+"px",e.pageX>d?(this.reorderIndicatorUpViewChild.nativeElement.style.left=l+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=l-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&e.preventDefault()}onColumnDrop(e,t){if(e.preventDefault(),this.draggedColumn){let r=j.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),o=j.indexWithinGroup(t,"preorderablecolumn"),s=r!=o;if(s&&(o-r==1&&this.dropPosition===-1||r-o==1&&this.dropPosition===1)&&(s=!1),s&&o<r&&this.dropPosition===1&&(o=o+1),s&&o>r&&this.dropPosition===-1&&(o=o-1),s&&(ge.reorderArray(this.columns,r,o),this.onColReorder.emit({dragIndex:r,dropIndex:o,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.resizableColumns&&this.resizeColumnElement){let a=this.columnResizeMode==="expand"?this._initialColWidths:this._totalTableWidth();ge.reorderArray(a,r+1,o+1),this.updateStyleElement(a,r,null,null)}this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}resizeTableCells(e,t){let r=j.index(this.resizeColumnElement),o=this.columnResizeMode==="expand"?this._initialColWidths:this._totalTableWidth();this.updateStyleElement(o,r,e,t)}updateStyleElement(e,t,r,o){this.destroyStyleElement(),this.createStyleElement();let s="";e.forEach((a,l)=>{let c=l===t?r:o&&l===t+1?o:a,d=`width: ${c}px !important; max-width: ${c}px !important;`;s+=`
                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${l+1}),
                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${l+1}),
                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${l+1}) {
                    ${d}
                }
            `}),this.renderer.setProperty(this.styleElement,"innerHTML",this.domSanitizer.bypassSecurityTrustStyle(s))}onRowDragStart(e,t){this.rowDragging=!0,this.draggedRowIndex=t,e.dataTransfer.setData("text","b")}onRowDragOver(e,t,r){if(this.rowDragging&&this.draggedRowIndex!==t){let o=j.getOffset(r).top,s=e.pageY,a=o+j.getOuterHeight(r)/2,l=r.previousElementSibling;s<a?(j.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=t,l?j.addClass(l,"p-datatable-dragpoint-bottom"):j.addClass(r,"p-datatable-dragpoint-top")):(l?j.removeClass(l,"p-datatable-dragpoint-bottom"):j.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=t+1,j.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,t){let r=t.previousElementSibling;r&&j.removeClass(r,"p-datatable-dragpoint-bottom"),j.removeClass(t,"p-datatable-dragpoint-bottom"),j.removeClass(t,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,t){if(this.droppedRowIndex!=null){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1;ge.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,t),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return e==null||e.length==0}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){if(bt(this.platformId))switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}else throw new Error("Browser storage is not available in the server side.")}isStateful(){return this.stateKey!=null}saveState(){let e=this.getStorage(),t={};this.paginator&&(t.first=this.first,t.rows=this.rows),this.sortField&&(t.sortField=this.sortField,t.sortOrder=this.sortOrder),this.multiSortMeta&&(t.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(t.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(t),this.reorderableColumns&&this.saveColumnOrder(t),this.selection&&(t.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(t.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(t)),this.onStateSave.emit(t)}clearState(){let e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){let t=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,o=function(s,a){return typeof a=="string"&&r.test(a)?new Date(a):a};if(t){let s=JSON.parse(t,o);this.paginator&&(this.first!==void 0&&(this.first=s.first,this.firstChange.emit(this.first)),this.rows!==void 0&&(this.rows=s.rows,this.rowsChange.emit(this.rows))),s.sortField&&(this.restoringSort=!0,this._sortField=s.sortField,this._sortOrder=s.sortOrder),s.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=s.multiSortMeta),s.filters&&(this.restoringFilter=!0,this.filters=s.filters),this.resizableColumns&&(this.columnWidthsState=s.columnWidths,this.tableWidthState=s.tableWidth),s.expandedRowKeys&&(this.expandedRowKeys=s.expandedRowKeys),s.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(s.selection)),this.stateRestored=!0,this.onStateRestore.emit(s)}}saveColumnWidths(e){let t=[],r=[],o=this.containerViewChild?.nativeElement;o&&(r=j.find(o,".p-datatable-thead > tr > th")),r.forEach(s=>t.push(j.getOuterWidth(s))),e.columnWidths=t.join(","),this.columnResizeMode==="expand"&&(e.tableWidth=j.getOuterWidth(this.tableViewChild?.nativeElement))}setResizeTableWidth(e){this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if(this.columnResizeMode==="expand"&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),ge.isNotEmpty(e)){this.createStyleElement();let t="";e.forEach((r,o)=>{let s=`width: ${r}px !important; max-width: ${r}px !important`;t+=`
                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${o+1}),
                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${o+1}),
                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${o+1}) {
                            ${s}
                        }
                    `}),this.styleElement.textContent=t}}}saveColumnOrder(e){if(this.columns){let t=[];this.columns.map(r=>{t.push(r.field||r.key)}),e.columnOrder=t}}restoreColumnOrder(){let t=this.getStorage().getItem(this.stateKey);if(t){let o=JSON.parse(t).columnOrder;if(o){let s=[];o.map(a=>{let l=this.findColumnByKey(a);l&&s.push(l)}),this.columnOrderStateRestored=!0,this.columns=s}}}findColumnByKey(e){if(this.columns){for(let t of this.columns)if(t.key===e||t.field===e)return t}else return null}createStyleElement(){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",j.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){if(bt(this.platformId)&&!this.responsiveStyleElement){this.responsiveStyleElement=this.renderer.createElement("style"),this.responsiveStyleElement.type="text/css",j.setAttribute(this.responsiveStyleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.responsiveStyleElement);let e=`
    @media screen and (max-width: ${this.breakpoint}) {
        #${this.id}-table > .p-datatable-thead > tr > th,
        #${this.id}-table > .p-datatable-tfoot > tr > td {
            display: none !important;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td {
            display: flex;
            width: 100% !important;
            align-items: center;
            justify-content: space-between;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {
            border: 0 none;
        }

        #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {
            border-top: 0;
            border-right: 0;
            border-left: 0;
        }

        #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {
            display: block;
        }
    }
    `;this.renderer.setProperty(this.responsiveStyleElement,"innerHTML",this.domSanitizer.bypassSecurityTrustStyle(e))}}destroyResponsiveStyle(){this.responsiveStyleElement&&(this.renderer.removeChild(this.document.head,this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}getPaginatorStyleClasses(e){return[this.paginatorStyleClass,e].filter(t=>!!t).join(" ").trim()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(Ze),S(Lt),S(Uw),S(we),S(hc),S(Uo),S(Ht),S(Dl))};static \u0275cmp=se({type:i,selectors:[["p-table"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Uce,5),le(jce,5),le(Gce,5),le(Hce,5),le(Wce,5),le(zce,5),le(Kce,5),le($ce,5),le(Jce,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.resizeHelperViewChild=o.first),te(o=ie())&&(r.reorderIndicatorUpViewChild=o.first),te(o=ie())&&(r.reorderIndicatorDownViewChild=o.first),te(o=ie())&&(r.wrapperViewChild=o.first),te(o=ie())&&(r.tableViewChild=o.first),te(o=ie())&&(r.tableHeaderViewChild=o.first),te(o=ie())&&(r.tableFooterViewChild=o.first),te(o=ie())&&(r.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:[2,"paginator","paginator",Y],pageLinks:[2,"pageLinks","pageLinks",We],rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:[2,"alwaysShowPaginator","alwaysShowPaginator",Y],paginatorPosition:"paginatorPosition",paginatorStyleClass:"paginatorStyleClass",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[2,"showCurrentPageReport","showCurrentPageReport",Y],showJumpToPageDropdown:[2,"showJumpToPageDropdown","showJumpToPageDropdown",Y],showJumpToPageInput:[2,"showJumpToPageInput","showJumpToPageInput",Y],showFirstLastIcon:[2,"showFirstLastIcon","showFirstLastIcon",Y],showPageLinks:[2,"showPageLinks","showPageLinks",Y],defaultSortOrder:[2,"defaultSortOrder","defaultSortOrder",We],sortMode:"sortMode",resetPageOnSort:[2,"resetPageOnSort","resetPageOnSort",Y],selectionMode:"selectionMode",selectionPageOnly:[2,"selectionPageOnly","selectionPageOnly",Y],contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:[2,"metaKeySelection","metaKeySelection",Y],rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:[2,"lazy","lazy",Y],lazyLoadOnInit:[2,"lazyLoadOnInit","lazyLoadOnInit",Y],compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:[2,"filterDelay","filterDelay",We],filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:[2,"scrollable","scrollable",Y],scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:[2,"virtualScroll","virtualScroll",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:[2,"virtualScrollDelay","virtualScrollDelay",We],frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:[2,"resizableColumns","resizableColumns",Y],columnResizeMode:"columnResizeMode",reorderableColumns:[2,"reorderableColumns","reorderableColumns",Y],loading:[2,"loading","loading",Y],loadingIcon:"loadingIcon",showLoader:[2,"showLoader","showLoader",Y],rowHover:[2,"rowHover","rowHover",Y],customSort:[2,"customSort","customSort",Y],showInitialSortBadge:[2,"showInitialSortBadge","showInitialSortBadge",Y],autoLayout:[2,"autoLayout","autoLayout",Y],exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:[2,"groupRowsByOrder","groupRowsByOrder",We],responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",paginatorLocale:"paginatorLocale",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll",virtualRowHeight:"virtualRowHeight"},outputs:{contextMenuSelectionChange:"contextMenuSelectionChange",selectAllChange:"selectAllChange",selectionChange:"selectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[et([Uw]),tt,Yi],decls:16,vars:22,consts:[["container",""],["wrapper",""],["buildInTable",""],["scroller",""],["table",""],["thead",""],["tfoot",""],["resizeHelper",""],["reorderIndicatorUp",""],["reorderIndicatorDown",""],[3,"ngStyle","ngClass"],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],[3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","autoSize","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper",3,"ngStyle",4,"ngIf"],["class","p-datatable-reorder-indicator-up",3,"ngStyle",4,"ngIf"],["class","p-datatable-reorder-indicator-down",3,"ngStyle",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-datatable-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-datatable-loading-icon"],[4,"ngTemplateOutlet"],[1,"p-datatable-header"],[3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","styleClass","locale"],["pTemplate","dropdownicon"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],[3,"onLazyLoad","items","columns","scrollHeight","itemSize","step","delay","inline","autoSize","lazy","loaderDisabled","showSpacer","showLoader","options"],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-datatable-thead"],["role","rowgroup","class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],["role","rowgroup",1,"p-datatable-tbody",3,"ngClass","ngStyle","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["role","rowgroup","class","p-datatable-scroller-spacer",3,"ngStyle",4,"ngIf"],["role","rowgroup","class","p-datatable-tfoot",4,"ngIf"],["role","rowgroup",1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],["role","rowgroup",1,"p-datatable-scroller-spacer",3,"ngStyle"],["role","rowgroup",1,"p-datatable-tfoot"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",3,"ngStyle"],[1,"p-datatable-reorder-indicator-up",3,"ngStyle"],[1,"p-datatable-reorder-indicator-down",3,"ngStyle"]],template:function(t,r){t&1&&(m(0,"div",10,0),v(2,ode,3,2,"div",11)(3,ade,2,1,"div",12)(4,bde,6,24,"p-paginator",13),m(5,"div",14,1),v(7,Ade,3,17,"p-scroller",15)(8,Tde,2,7,"ng-container",16)(9,Nde,10,26,"ng-template",null,2,Bt),g(),v(11,Xde,6,24,"p-paginator",13)(12,Zde,2,1,"div",17)(13,epe,2,2,"div",18)(14,rpe,4,4,"span",19)(15,lpe,4,4,"span",20),g()),t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",en(16,qce,r.rowHover||r.selectionMode,r.scrollable,r.scrollable&&r.scrollHeight==="flex")),G("id",r.id),p(2),f("ngIf",r.loading&&r.showLoader),p(),f("ngIf",r.captionTemplate),p(),f("ngIf",r.paginator&&(r.paginatorPosition==="top"||r.paginatorPosition=="both")),p(),f("ngStyle",ne(20,Yce,r.virtualScroll?"":r.scrollHeight)),p(2),f("ngIf",r.virtualScroll),p(),f("ngIf",!r.virtualScroll),p(3),f("ngIf",r.paginator&&(r.paginatorPosition==="bottom"||r.paginatorPosition=="both")),p(),f("ngIf",r.summaryTemplate),p(),f("ngIf",r.resizableColumns),p(),f("ngIf",r.reorderableColumns),p(),f("ngIf",r.reorderableColumns))},dependencies:()=>[je,rt,mt,De,Mw,Ee,Xs,$f,Jf,Us,Qpe],styles:[`@layer primeng{.p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-icon-wrapper{display:inline}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:2}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit;z-index:1}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:2}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:3}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}}
`],encapsulation:2})}return i})(),Qpe=(()=>{class i{dt;tableService;cd;el;columns;template;get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&this.dt.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()}frozen;frozenRows;scrollerOptions;subscription;_value;ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&this.dt.rowGroupMode==="subheader"&&this.updateFrozenRowGroupHeaderStickyPosition()}constructor(e,t,r,o){this.dt=e,this.tableService=t,this.cd=r,this.el=o,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}shouldRenderRowGroupHeader(e,t,r){let o=ge.resolveFieldData(t,this.dt.groupRowsBy),s=e[r-(1+this.dt._first)];if(s){let a=ge.resolveFieldData(s,this.dt.groupRowsBy);return o!==a}else return!0}shouldRenderRowGroupFooter(e,t,r){let o=ge.resolveFieldData(t,this.dt.groupRowsBy),s=e[r+(1+this.dt._first)];if(s){let a=ge.resolveFieldData(s,this.dt.groupRowsBy);return o!==a}else return!0}shouldRenderRowspan(e,t,r){let o=ge.resolveFieldData(t,this.dt.groupRowsBy),s=e[r-1];if(s){let a=ge.resolveFieldData(s,this.dt.groupRowsBy);return o!==a}else return!0}calculateRowGroupSize(e,t,r){let o=ge.resolveFieldData(t,this.dt.groupRowsBy),s=o,a=0;for(;o===s;){a++;let l=e[++r];if(l)s=ge.resolveFieldData(l,this.dt.groupRowsBy);else break}return a===1?null:a}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=j.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=j.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}getScrollerOption(e,t){return this.dt.virtualScroll?(t=t||this.scrollerOptions,t?t[e]:null):null}getRowIndex(e){let t=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(t).index:t}static \u0275fac=function(t){return new(t||i)(S(sr),S(Uw),S(we),S(Ze))};static \u0275cmp=se({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:[0,"pTableBody","columns"],template:[0,"pTableBodyTemplate","template"],value:"value",frozen:[2,"frozen","frozen",Y],frozenRows:[2,"frozenRows","frozenRows",Y],scrollerOptions:"scrollerOptions"},features:[tt],attrs:cpe,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){t&1&&v(0,ype,2,2,"ng-container",0)(1,Rpe,2,2,"ng-container",0)(2,Npe,2,2,"ng-container",0)(3,Mpe,2,5,"ng-container",0)(4,Bpe,2,5,"ng-container",0),t&2&&(f("ngIf",!r.dt.expandedRowTemplate),p(),f("ngIf",r.dt.expandedRowTemplate&&!(r.frozen&&r.dt.frozenExpandedRowTemplate)),p(),f("ngIf",r.dt.frozenExpandedRowTemplate&&r.frozen),p(),f("ngIf",r.dt.loading),p(),f("ngIf",r.dt.isEmpty()&&!r.dt.loading))},dependencies:[hn,rt,mt],encapsulation:2})}return i})();var Oa=(()=>{class i{dt;field;pSortableColumnDisabled;sorted;sortOrder;subscription;constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(t=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?this.dt.sortOrder===1?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),j.clearSelection())}onEnterKey(e){this.onClick(e),e.preventDefault()}isEnabled(){return this.pSortableColumnDisabled!==!0}isFilterElement(e){return this.isFilterElementIconOrButton(e)||this.isFilterElementIconOrButton(e?.parentElement?.parentElement)}isFilterElementIconOrButton(e){return j.hasClass(e,"pi-filter-icon")||j.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(sr))};static \u0275dir=Et({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(t,r){t&1&&k("click",function(s){return r.onClick(s)})("keydown.space",function(s){return r.onEnterKey(s)})("keydown.enter",function(s){return r.onEnterKey(s)}),t&2&&(G("tabindex",r.isEnabled()?"0":null)("role","columnheader")("aria-sort",r.sortOrder),Dn("p-sortable-column",r.isEnabled())("p-highlight",r.sorted))},inputs:{field:[0,"pSortableColumn","field"],pSortableColumnDisabled:[2,"pSortableColumnDisabled","pSortableColumnDisabled",Y]},features:[tt]})}return i})(),Ra=(()=>{class i{dt;cd;field;subscription;sortOrder;constructor(e,t){this.dt=e,this.cd=t,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if(this.dt.sortMode==="single")this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if(this.dt.sortMode==="multiple"){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,t=-1;if(e&&this.dt.sortMode==="multiple"&&this.dt.showInitialSortBadge&&e.length>1)for(let r=0;r<e.length;r++){let o=e[r];if(o.field===this.field||o.field===this.field){t=r;break}}return t}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return this.dt.sortMode==="multiple"&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(sr),S(we))};static \u0275cmp=se({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:3,vars:3,consts:[[4,"ngIf"],["class","p-sortable-column-icon",4,"ngIf"],["class","p-sortable-column-badge",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-sortable-column-icon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-sortable-column-badge"]],template:function(t,r){t&1&&v(0,Hpe,4,3,"ng-container",0)(1,Kpe,2,4,"span",1)(2,$pe,2,1,"span",2),t&2&&(f("ngIf",!r.dt.sortIconTemplate),p(),f("ngIf",r.dt.sortIconTemplate),p(),f("ngIf",r.isMultiSorted()))},dependencies:()=>[rt,mt,k_,L_,N_],encapsulation:2,changeDetection:0})}return i})(),Tp=(()=>{class i{dt;tableService;el;data;index;pSelectableRowDisabled;selected;subscription;constructor(e,t,r){this.dt=e,this.tableService=t,this.el=r,this.isEnabled()&&(this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.selected=this.dt.isSelected(this.data)}))}setRowTabIndex(){if(this.dt.selectionMode==="single"||this.dt.selectionMode==="multiple")return this.dt.selection?this.dt.anchorRowIndex===this.index?0:-1:0}ngOnInit(){this.isEnabled()&&(this.selected=this.dt.isSelected(this.data))}onClick(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onTouchEnd(e){this.isEnabled()&&this.dt.handleRowTouchEnd(e)}onKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":this.onEnterKey(e);break;default:if(e.code==="KeyA"&&(e.metaKey||e.ctrlKey)&&this.dt.selectionMode==="multiple"){let t=this.dt.dataToRender(this.dt.processedData);this.dt.selection=[...t],this.dt.selectRange(e,t.length-1,!0),e.preventDefault()}break}}onArrowDownKey(e){if(!this.isEnabled())return;let t=e.currentTarget,r=this.findNextSelectableRow(t);r&&r.focus(),e.preventDefault()}onArrowUpKey(e){if(!this.isEnabled())return;let t=e.currentTarget,r=this.findPrevSelectableRow(t);r&&r.focus(),e.preventDefault()}onEnterKey(e){this.isEnabled()&&this.dt.handleRowClick({originalEvent:e,rowData:this.data,rowIndex:this.index})}onEndKey(e){let t=this.findLastSelectableRow();if(t&&this.focusRowChange(this.el.nativeElement,t),e.ctrlKey&&e.shiftKey){let r=this.dt.dataToRender(this.dt.rows),o=j.getAttribute(t,"index");this.dt.anchorRowIndex=o,this.dt.selection=r.slice(this.index,r.length),this.dt.selectRange(e,this.index)}e.preventDefault()}onHomeKey(e){let t=this.findFirstSelectableRow();if(t&&this.focusRowChange(this.el.nativeElement,t),e.ctrlKey&&e.shiftKey){let r=this.dt.dataToRender(this.dt.rows),o=j.getAttribute(t,"index");this.dt.anchorRowIndex=this.dt.anchorRowIndex||o,this.dt.selection=r.slice(0,this.index+1),this.dt.selectRange(e,this.index)}e.preventDefault()}onSpaceKey(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLSelectElement||e.target instanceof HTMLTextAreaElement)){if(this.onEnterKey(e),e.shiftKey&&this.dt.selection!==null){let r=this.dt.dataToRender(this.dt.rows),o;if(ge.isNotEmpty(this.dt.selection)&&this.dt.selection.length>0){let s,a;s=ge.findIndexInList(this.dt.selection[0],r),a=ge.findIndexInList(this.dt.selection[this.dt.selection.length-1],r),o=this.index<=s?a:s}else o=ge.findIndexInList(this.dt.selection,r);this.dt.anchorRowIndex=o,this.dt.selection=o!==this.index?r.slice(Math.min(o,this.index),Math.max(o,this.index)+1):[this.data],this.dt.selectRange(e,this.index)}e.preventDefault()}}focusRowChange(e,t){e.tabIndex="-1",t.tabIndex="0",j.focus(t)}findLastSelectableRow(){let e=j.find(this.dt.el.nativeElement,".p-selectable-row");return e?e[e.length-1]:null}findFirstSelectableRow(){return j.findSingle(this.dt.el.nativeElement,".p-selectable-row")}findNextSelectableRow(e){let t=e.nextElementSibling;return t?j.hasClass(t,"p-selectable-row")?t:this.findNextSelectableRow(t):null}findPrevSelectableRow(e){let t=e.previousElementSibling;return t?j.hasClass(t,"p-selectable-row")?t:this.findPrevSelectableRow(t):null}isEnabled(){return this.pSelectableRowDisabled!==!0}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(sr),S(Uw),S(Ze))};static \u0275dir=Et({type:i,selectors:[["","pSelectableRow",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(t,r){t&1&&k("click",function(s){return r.onClick(s)})("touchend",function(s){return r.onTouchEnd(s)})("keydown",function(s){return r.onKeyDown(s)}),t&2&&(G("tabindex",r.setRowTabIndex())("data-p-highlight",r.selected)("data-p-selectable-row",!0),Dn("p-selectable-row",r.isEnabled())("p-highlight",r.selected))},inputs:{data:[0,"pSelectableRow","data"],index:[0,"pSelectableRowIndex","index"],pSelectableRowDisabled:[2,"pSelectableRowDisabled","pSelectableRowDisabled",Y]},features:[tt]})}return i})();var ah=(()=>{class i{document;platformId;renderer;dt;el;zone;pResizableColumnDisabled;resizer;resizerMouseDownListener;resizerTouchStartListener;resizerTouchMoveListener;resizerTouchEndListener;documentMouseMoveListener;documentMouseUpListener;constructor(e,t,r,o,s,a){this.document=e,this.platformId=t,this.renderer=r,this.dt=o,this.el=s,this.zone=a}ngAfterViewInit(){bt(this.platformId)&&this.isEnabled()&&(j.addClass(this.el.nativeElement,"p-resizable-column"),this.resizer=this.renderer.createElement("span"),this.renderer.addClass(this.resizer,"p-column-resizer"),this.renderer.appendChild(this.el.nativeElement,this.resizer),this.zone.runOutsideAngular(()=>{this.resizerMouseDownListener=this.renderer.listen(this.resizer,"mousedown",this.onMouseDown.bind(this)),this.resizerTouchStartListener=this.renderer.listen(this.resizer,"touchstart",this.onTouchStart.bind(this))}))}bindDocumentEvents(){this.zone.runOutsideAngular(()=>{this.documentMouseMoveListener=this.renderer.listen(this.document,"mousemove",this.onDocumentMouseMove.bind(this)),this.documentMouseUpListener=this.renderer.listen(this.document,"mouseup",this.onDocumentMouseUp.bind(this)),this.resizerTouchMoveListener=this.renderer.listen(this.resizer,"touchmove",this.onTouchMove.bind(this)),this.resizerTouchEndListener=this.renderer.listen(this.resizer,"touchend",this.onTouchEnd.bind(this))})}unbindDocumentEvents(){this.documentMouseMoveListener&&(this.documentMouseMoveListener(),this.documentMouseMoveListener=null),this.documentMouseUpListener&&(this.documentMouseUpListener(),this.documentMouseUpListener=null),this.resizerTouchMoveListener&&(this.resizerTouchMoveListener(),this.resizerTouchMoveListener=null),this.resizerTouchEndListener&&(this.resizerTouchEndListener(),this.resizerTouchEndListener=null)}onMouseDown(e){this.dt.onColumnResizeBegin(e),this.bindDocumentEvents()}onTouchStart(e){this.dt.onColumnResizeBegin(e),this.bindDocumentEvents()}onTouchMove(e){this.dt.onColumnResize(e)}onDocumentMouseMove(e){this.dt.onColumnResize(e)}onDocumentMouseUp(e){this.dt.onColumnResizeEnd(),this.unbindDocumentEvents()}onTouchEnd(e){this.dt.onColumnResizeEnd(),this.unbindDocumentEvents()}isEnabled(){return this.pResizableColumnDisabled!==!0}ngOnDestroy(){this.resizerMouseDownListener&&(this.resizerMouseDownListener(),this.resizerMouseDownListener=null),this.unbindDocumentEvents()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(sr),S(Ze),S(Lt))};static \u0275dir=Et({type:i,selectors:[["","pResizableColumn",""]],hostAttrs:[1,"p-element"],inputs:{pResizableColumnDisabled:[2,"pResizableColumnDisabled","pResizableColumnDisabled",Y]},features:[tt]})}return i})();var lh=(()=>{class i{dt;el;zone;data;field;rowIndex;pEditableColumnDisabled;pFocusCellSelector;overlayEventListener;constructor(e,t,r){this.dt=e,this.el=t,this.zone=r}ngOnChanges(e){e.pEditableColumnDisabled?.currentValue===!0&&j.hasClass(this.el.nativeElement,"p-cell-editing")?this.closeEditingCell(!1,new Event("cancel")):e.data?.firstChange===!1&&this.el.nativeElement&&this.dt.updateEditingCell(this.el.nativeElement,this.data,this.field,this.rowIndex)}ngAfterViewInit(){this.isEnabled()&&j.addClass(this.el.nativeElement,"p-editable-column")}onClick(e){if(this.isEnabled())if(this.dt.selfClick=!0,this.dt.editingCell){if(this.dt.editingCell!==this.el.nativeElement){if(!this.dt.isEditingCellValid())return;this.closeEditingCell(!0,e),this.openCell()}}else this.openCell()}openCell(){this.dt.updateEditingCell(this.el.nativeElement,this.data,this.field,this.rowIndex),j.addClass(this.el.nativeElement,"p-cell-editing"),this.dt.onEditInit.emit({field:this.field,data:this.data,index:this.rowIndex}),this.zone.runOutsideAngular(()=>{setTimeout(()=>{let e=this.pFocusCellSelector||"input, textarea, select",t=j.findSingle(this.el.nativeElement,e);t&&t.focus()},50)}),this.overlayEventListener=e=>{this.el&&this.el.nativeElement.contains(e.target)&&(this.dt.selfClick=!0)},this.dt.overlaySubscription=this.dt.overlayService.clickObservable.subscribe(this.overlayEventListener)}closeEditingCell(e,t){let r={field:this.dt.editingCellField,data:this.dt.editingCellData,originalEvent:t,index:this.dt.editingCellRowIndex};e?this.dt.onEditComplete.emit(r):(this.dt.onEditCancel.emit(r),this.dt.value.forEach(o=>{o[this.dt.editingCellField]===this.data&&(o[this.dt.editingCellField]=this.dt.editingCellData)})),j.removeClass(this.dt.editingCell,"p-cell-editing"),this.dt.editingCell=null,this.dt.editingCellData=null,this.dt.editingCellField=null,this.dt.unbindDocumentEditListener(),this.dt.overlaySubscription&&this.dt.overlaySubscription.unsubscribe()}onEnterKeyDown(e){this.isEnabled()&&!e.shiftKey&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),e.preventDefault())}onTabKeyDown(e){this.isEnabled()&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),e.preventDefault())}onEscapeKeyDown(e){this.isEnabled()&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!1,e),e.preventDefault())}onShiftKeyDown(e){this.isEnabled()&&(e.shiftKey?this.moveToPreviousCell(e):this.moveToNextCell(e))}onArrowDown(e){if(this.isEnabled()){let t=this.findCell(e.target);if(t){let r=j.index(t),o=this.findNextEditableColumnByIndex(t,r);o&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),j.invokeElementMethod(e.target,"blur"),j.invokeElementMethod(o,"click")),e.preventDefault()}}}onArrowUp(e){if(this.isEnabled()){let t=this.findCell(e.target);if(t){let r=j.index(t),o=this.findPrevEditableColumnByIndex(t,r);o&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),j.invokeElementMethod(e.target,"blur"),j.invokeElementMethod(o,"click")),e.preventDefault()}}}onArrowLeft(e){this.isEnabled()&&this.moveToPreviousCell(e)}onArrowRight(e){this.isEnabled()&&this.moveToNextCell(e)}findCell(e){if(e){let t=e;for(;t&&!j.hasClass(t,"p-cell-editing");)t=t.parentElement;return t}else return null}moveToPreviousCell(e){let t=this.findCell(e.target);if(t){let r=this.findPreviousEditableColumn(t);r&&(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),j.invokeElementMethod(e.target,"blur"),j.invokeElementMethod(r,"click"),e.preventDefault())}}moveToNextCell(e){let t=this.findCell(e.target);if(t){let r=this.findNextEditableColumn(t);r?(this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e),j.invokeElementMethod(e.target,"blur"),j.invokeElementMethod(r,"click"),e.preventDefault()):this.dt.isEditingCellValid()&&this.closeEditingCell(!0,e)}}findPreviousEditableColumn(e){let t=e.previousElementSibling;if(!t){let r=e.parentElement?.previousElementSibling;r&&(t=r.lastElementChild)}return t?j.hasClass(t,"p-editable-column")?t:this.findPreviousEditableColumn(t):null}findNextEditableColumn(e){let t=e.nextElementSibling;if(!t){let r=e.parentElement?.nextElementSibling;r&&(t=r.firstElementChild)}return t?j.hasClass(t,"p-editable-column")?t:this.findNextEditableColumn(t):null}findNextEditableColumnByIndex(e,t){let r=e.parentElement?.nextElementSibling;if(r){let o=r.children[t];return o&&j.hasClass(o,"p-editable-column")?o:null}else return null}findPrevEditableColumnByIndex(e,t){let r=e.parentElement?.previousElementSibling;if(r){let o=r.children[t];return o&&j.hasClass(o,"p-editable-column")?o:null}else return null}isEnabled(){return this.pEditableColumnDisabled!==!0}ngOnDestroy(){this.dt.overlaySubscription&&this.dt.overlaySubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(sr),S(Ze),S(Lt))};static \u0275dir=Et({type:i,selectors:[["","pEditableColumn",""]],hostAttrs:[1,"p-element"],hostBindings:function(t,r){t&1&&k("click",function(s){return r.onClick(s)})("keydown.enter",function(s){return r.onEnterKeyDown(s)})("keydown.tab",function(s){return r.onShiftKeyDown(s)})("keydown.escape",function(s){return r.onEscapeKeyDown(s)})("keydown.shift.tab",function(s){return r.onShiftKeyDown(s)})("keydown.meta.tab",function(s){return r.onShiftKeyDown(s)})("keydown.arrowdown",function(s){return r.onArrowDown(s)})("keydown.arrowup",function(s){return r.onArrowUp(s)})("keydown.arrowleft",function(s){return r.onArrowLeft(s)})("keydown.arrowright",function(s){return r.onArrowRight(s)})},inputs:{data:[0,"pEditableColumn","data"],field:[0,"pEditableColumnField","field"],rowIndex:[0,"pEditableColumnRowIndex","rowIndex"],pEditableColumnDisabled:[2,"pEditableColumnDisabled","pEditableColumnDisabled",Y],pFocusCellSelector:"pFocusCellSelector"},features:[tt,Yi]})}return i})(),Zpe=(()=>{class i{el;data;pEditableRowDisabled;constructor(e){this.el=e}isEnabled(){return this.pEditableRowDisabled!==!0}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275dir=Et({type:i,selectors:[["","pEditableRow",""]],hostAttrs:[1,"p-element"],inputs:{data:[0,"pEditableRow","data"],pEditableRowDisabled:[2,"pEditableRowDisabled","pEditableRowDisabled",Y]},features:[tt]})}return i})();var qf=(()=>{class i{dt;editableColumn;editableRow;templates;inputTemplate;outputTemplate;constructor(e,t,r){this.dt=e,this.editableColumn=t,this.editableRow=r}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"input":this.inputTemplate=e.template;break;case"output":this.outputTemplate=e.template;break}})}get editing(){return this.dt.editingCell&&this.editableColumn&&this.dt.editingCell===this.editableColumn.el.nativeElement||this.editableRow&&this.dt.editMode==="row"&&this.dt.isRowEditing(this.editableRow.data)}static \u0275fac=function(t){return new(t||i)(S(sr),S(lh,8),S(Zpe,8))};static \u0275cmp=se({type:i,selectors:[["p-cellEditor"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&v(0,qpe,2,1,"ng-container",0)(1,Xpe,2,1,"ng-container",0),t&2&&(f("ngIf",r.editing),p(),f("ngIf",!r.editing))},dependencies:[rt,mt],encapsulation:2})}return i})();var Yf=(()=>{class i{el;constructor(e){this.el=e}ngAfterViewInit(){j.addClass(this.el.nativeElement,"p-datatable-reorderablerow-handle")}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275dir=Et({type:i,selectors:[["","pReorderableRowHandle",""]],hostAttrs:[1,"p-element"]})}return i})(),Xf=(()=>{class i{renderer;dt;el;zone;index;pReorderableRowDisabled;mouseDownListener;dragStartListener;dragEndListener;dragOverListener;dragLeaveListener;dropListener;constructor(e,t,r,o){this.renderer=e,this.dt=t,this.el=r,this.zone=o}ngAfterViewInit(){this.isEnabled()&&(this.el.nativeElement.droppable=!0,this.bindEvents())}bindEvents(){this.zone.runOutsideAngular(()=>{this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this)),this.dragStartListener=this.renderer.listen(this.el.nativeElement,"dragstart",this.onDragStart.bind(this)),this.dragEndListener=this.renderer.listen(this.el.nativeElement,"dragend",this.onDragEnd.bind(this)),this.dragOverListener=this.renderer.listen(this.el.nativeElement,"dragover",this.onDragOver.bind(this)),this.dragLeaveListener=this.renderer.listen(this.el.nativeElement,"dragleave",this.onDragLeave.bind(this))})}unbindEvents(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=null),this.dragStartListener&&(this.dragStartListener(),this.dragStartListener=null),this.dragEndListener&&(this.dragEndListener(),this.dragEndListener=null),this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.dragLeaveListener&&(this.dragLeaveListener(),this.dragLeaveListener=null)}onMouseDown(e){let t=e.target,r=this.isHandleElement(t);this.el.nativeElement.draggable=r}isHandleElement(e){return e?.classList.contains("p-datatable-reorderablerow-handle")?!0:e?.parentElement&&!["TD","TR"].includes(e?.parentElement?.tagName)?this.isHandleElement(e?.parentElement):!1}onDragStart(e){this.dt.onRowDragStart(e,this.index)}onDragEnd(e){this.dt.onRowDragEnd(e),this.el.nativeElement.draggable=!1}onDragOver(e){this.dt.onRowDragOver(e,this.index,this.el.nativeElement),e.preventDefault()}onDragLeave(e){this.dt.onRowDragLeave(e,this.el.nativeElement)}isEnabled(){return this.pReorderableRowDisabled!==!0}onDrop(e){this.isEnabled()&&this.dt.rowDragging&&this.dt.onRowDrop(e,this.el.nativeElement),e.preventDefault()}ngOnDestroy(){this.unbindEvents()}static \u0275fac=function(t){return new(t||i)(S(jt),S(sr),S(Ze),S(Lt))};static \u0275dir=Et({type:i,selectors:[["","pReorderableRow",""]],hostAttrs:[1,"p-element"],hostBindings:function(t,r){t&1&&k("drop",function(s){return r.onDrop(s)})},inputs:{index:[0,"pReorderableRow","index"],pReorderableRowDisabled:[2,"pReorderableRowDisabled","pReorderableRowDisabled",Y]},features:[tt]})}return i})();var OO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Vw,Za,Ap,bp,ro,M_,F_,P_,a5,so,$f,Jf,Us,k_,L_,N_,On,r5,o5,Qs,s5,dt,so]})}return i})();var eue=["input"],tue=(i,n,e,t)=>({"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":n,"p-checkbox-focused":e,"p-variant-filled":t}),iue=(i,n,e)=>({"p-highlight":i,"p-disabled":n,"p-focus":e}),nue=(i,n,e)=>({"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":n,"p-checkbox-label-focus":e});function rue(i,n){if(i&1&&P(0,"span",10),i&2){let e=u(3);f("ngClass",e.checkboxIcon),G("data-pc-section","icon")}}function oue(i,n){i&1&&P(0,"CheckIcon",11),i&2&&(f("styleClass","p-checkbox-icon"),G("data-pc-section","icon"))}function sue(i,n){if(i&1&&(he(0),v(1,rue,1,2,"span",8)(2,oue,1,2,"CheckIcon",9),fe()),i&2){let e=u(2);p(),f("ngIf",e.checkboxIcon),p(),f("ngIf",!e.checkboxIcon)}}function aue(i,n){}function lue(i,n){i&1&&v(0,aue,0,0,"ng-template")}function cue(i,n){if(i&1&&(m(0,"span",12),v(1,lue,1,0,null,13),g()),i&2){let e=u(2);G("data-pc-section","icon"),p(),f("ngTemplateOutlet",e.checkboxIconTemplate)}}function due(i,n){if(i&1&&(he(0),v(1,sue,3,2,"ng-container",5)(2,cue,2,2,"span",7),fe()),i&2){let e=u();p(),f("ngIf",!e.checkboxIconTemplate),p(),f("ngIf",e.checkboxIconTemplate)}}function pue(i,n){if(i&1){let e=L();m(0,"label",14),k("click",function(r){y(e);let o=u(),s=He(3);return w(o.onClick(r,s,!0))}),F(1),g()}if(i&2){let e=u();ce(e.labelStyleClass),f("ngClass",en(6,nue,e.checked(),e.disabled,e.focused)),G("for",e.inputId)("data-pc-section","label"),p(),J(" ",e.label,"")}}var uue={provide:fn,useExisting:Zt(()=>Pa),multi:!0},Pa=(()=>{class i{cd;injector;config;value;name;disabled;binary;label;ariaLabelledBy;ariaLabel;tabindex;inputId;style;styleClass;labelStyleClass;formControl;checkboxIcon;readonly;required;autofocus;trueValue=!0;falseValue=!1;variant="outlined";onChange=new X;onFocus=new X;onBlur=new X;inputViewChild;templates;checkboxIconTemplate;model;onModelChange=()=>{};onModelTouched=()=>{};focused=!1;constructor(e,t,r){this.cd=e,this.injector=t,this.config=r}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"icon":this.checkboxIconTemplate=e.template;break}})}onClick(e,t,r){e.preventDefault(),!(this.disabled||this.readonly)&&(this.updateModel(e),r&&t.focus())}updateModel(e){let t,r=this.injector.get(ss,null,{optional:!0,self:!0}),o=r&&!this.formControl?r.value:this.model;this.binary?(t=this.checked()?this.falseValue:this.trueValue,this.model=t,this.onModelChange(t)):(this.checked()?t=o.filter(s=>!ge.equals(s,this.value)):t=o?[...o,this.value]:[this.value],this.onModelChange(t),this.model=t,this.formControl&&this.formControl.setValue(t)),this.onChange.emit({checked:t,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){setTimeout(()=>{this.disabled=e,this.cd.markForCheck()})}checked(){return this.binary?this.model===this.trueValue:ge.contains(this.value,this.model)}static \u0275fac=function(t){return new(t||i)(S(we),S(Ur),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-checkbox"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(eue,5),t&2){let o;te(o=ie())&&(r.inputViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:[2,"disabled","disabled",Y],binary:[2,"binary","binary",Y],label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:[2,"tabindex","tabindex",We],inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:[2,"readonly","readonly",Y],required:[2,"required","required",Y],autofocus:[2,"autofocus","autofocus",Y],trueValue:"trueValue",falseValue:"falseValue",variant:"variant"},outputs:{onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"},features:[et([uue]),tt],decls:7,vars:37,consts:[["input",""],[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox","pAutoFocus","",3,"change","focus","blur","value","checked","disabled","readonly","autofocus"],[1,"p-checkbox-box",3,"click","ngClass"],[4,"ngIf"],[3,"class","ngClass","click",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[3,"click","ngClass"]],template:function(t,r){if(t&1){let o=L();m(0,"div",1)(1,"div",2)(2,"input",3,0),k("change",function(a){return y(o),w(r.handleChange(a))})("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))}),g()(),m(4,"div",4),k("click",function(a){y(o);let l=He(3);return w(r.onClick(a,l,!0))}),v(5,due,3,2,"ng-container",5),g()(),v(6,pue,2,10,"label",6)}t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",xn(28,tue,r.checked(),r.disabled,r.focused,r.variant==="filled"||r.config.inputStyle()==="filled")),G("data-pc-name","checkbox")("data-pc-section","root"),p(),G("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),p(),f("value",r.value)("checked",r.checked())("disabled",r.disabled)("readonly",r.readonly)("autofocus",r.autofocus),G("id",r.inputId)("name",r.name)("tabindex",r.tabindex)("required",r.required)("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("aria-checked",r.checked())("data-pc-section","hiddenInput"),p(2),f("ngClass",en(33,iue,r.checked(),r.disabled,r.focused)),G("data-p-highlight",r.checked())("data-p-disabled",r.disabled)("data-p-focused",r.focused)("data-pc-section","input"),p(),f("ngIf",r.checked()),p(),f("ngIf",r.label))},dependencies:()=>[je,rt,mt,De,Zn,On],styles:[`@layer primeng{.p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}}
`],encapsulation:2,changeDetection:0})}return i})(),RO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,fr,On,dt]})}return i})();var hue=["mask"],fue=["*"],mue=i=>({"p-blockui-document":i,"p-blockui p-component-overlay p-component-overlay-enter":!0}),gue=()=>({display:"none"});function _ue(i,n){i&1&&ue(0)}var Igt=(()=>{class i{document;el;cd;config;renderer;platformId;target;autoZIndex=!0;baseZIndex=0;styleClass;get blocked(){return this._blocked}set blocked(e){this.mask&&this.mask.nativeElement?e?this.block():this.unblock():this._blocked=e}templates;mask;_blocked=!1;animationEndListener;contentTemplate;constructor(e,t,r,o,s,a){this.document=e,this.el=t,this.cd=r,this.config=o,this.renderer=s,this.platformId=a}ngAfterViewInit(){if(this._blocked&&this.block(),this.target&&!this.target.getBlockableElement)throw"Target of BlockUI must implement BlockableUI interface"}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}block(){bt(this.platformId)&&(this._blocked=!0,this.mask.nativeElement.style.display="flex",this.target?(this.target.getBlockableElement().appendChild(this.mask.nativeElement),this.target.getBlockableElement().style.position="relative"):(this.renderer.appendChild(this.document.body,this.mask.nativeElement),j.blockBodyScroll()),this.autoZIndex&&bi.set("modal",this.mask.nativeElement,this.baseZIndex+this.config.zIndex.modal))}unblock(){bt(this.platformId)&&this.mask&&!this.animationEndListener&&(this.animationEndListener=this.renderer.listen(this.mask.nativeElement,"animationend",this.destroyModal.bind(this)),j.addClass(this.mask.nativeElement,"p-component-overlay-leave"))}destroyModal(){this._blocked=!1,this.mask&&bt(this.platformId)&&(bi.clear(this.mask.nativeElement),j.removeClass(this.mask.nativeElement,"p-component-overlay-leave"),this.renderer.removeChild(this.el.nativeElement,this.mask.nativeElement),j.unblockBodyScroll()),this.unbindAnimationEndListener(),this.cd.markForCheck()}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.animationEndListener(),this.animationEndListener=null)}ngOnDestroy(){this.unblock(),this.destroyModal()}static \u0275fac=function(t){return new(t||i)(S(At),S(Ze),S(we),S(Ht),S(jt),S(ai))};static \u0275cmp=se({type:i,selectors:[["p-blockUI"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(hue,5),t&2){let o;te(o=ie())&&(r.mask=o.first)}},hostAttrs:[1,"p-element"],inputs:{target:"target",autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],styleClass:"styleClass",blocked:"blocked"},features:[tt],ngContentSelectors:fue,decls:4,vars:11,consts:[["mask",""],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&($i(),m(0,"div",1,0),hi(2),v(3,_ue,1,0,"ng-container",2),g()),t&2&&(ce(r.styleClass),f("ngClass",ne(8,mue,!r.target))("ngStyle",Ae(10,gue)),G("aria-busy",r.blocked)("data-pc-name","blockui")("data-pc-section","root"),p(3),f("ngTemplateOutlet",r.contentTemplate))},dependencies:[je,mt,De],styles:[`@layer primeng{.p-blockui{position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;transition-property:background-color;display:flex;align-items:center;justify-content:center}.p-blockui.p-component-overlay{position:absolute}.p-blockui-document.p-component-overlay{position:fixed}.p-blockui-leave.p-component-overlay{background-color:transparent}}
`],encapsulation:2,changeDetection:0})}return i})(),PO=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var Qi="primary",X_=Symbol("RouteTitle"),LO=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function rm(i){return new LO(i)}function Cue(i,n,e){let t=e.path.split("/");if(t.length>i.length||e.pathMatch==="full"&&(n.hasChildren()||t.length<i.length))return null;let r={};for(let o=0;o<t.length;o++){let s=t[o],a=i[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,t.length),posParams:r}}function Iue(i,n){if(i.length!==n.length)return!1;for(let e=0;e<i.length;++e)if(!gc(i[e],n[e]))return!1;return!0}function gc(i,n){let e=i?MO(i):void 0,t=n?MO(n):void 0;if(!e||!t||e.length!=t.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!v5(i[r],n[r]))return!1;return!0}function MO(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function v5(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;let e=[...i].sort(),t=[...n].sort();return e.every((r,o)=>t[o]===r)}else return i===n}function b5(i){return i.length>0?i[i.length-1]:null}function Pp(i){return $c(i)?i:mp(i)?bn(Promise.resolve(i)):vt(i)}var yue={exact:E5,subset:A5},S5={exact:wue,subset:vue,ignored:()=>!0};function u5(i,n,e){return yue[e.paths](i.root,n.root,e.matrixParams)&&S5[e.queryParams](i.queryParams,n.queryParams)&&!(e.fragment==="exact"&&i.fragment!==n.fragment)}function wue(i,n){return gc(i,n)}function E5(i,n,e){if(!dh(i.segments,n.segments)||!Ww(i.segments,n.segments,e)||i.numberOfChildren!==n.numberOfChildren)return!1;for(let t in n.children)if(!i.children[t]||!E5(i.children[t],n.children[t],e))return!1;return!0}function vue(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(e=>v5(i[e],n[e]))}function A5(i,n,e){return x5(i,n,n.segments,e)}function x5(i,n,e,t){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!dh(r,e)||n.hasChildren()||!Ww(r,e,t))}else if(i.segments.length===e.length){if(!dh(i.segments,e)||!Ww(i.segments,e,t))return!1;for(let r in n.children)if(!i.children[r]||!A5(i.children[r],n.children[r],t))return!1;return!0}else{let r=e.slice(0,i.segments.length),o=e.slice(i.segments.length);return!dh(i.segments,r)||!Ww(i.segments,r,t)||!i.children[Qi]?!1:x5(i.children[Qi],n,o,t)}}function Ww(i,n,e){return n.every((t,r)=>S5[e](i[r].parameters,t.parameters))}var _d=class{constructor(n=new Bn([],{}),e={},t=null){this.root=n,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=rm(this.queryParams),this._queryParamMap}toString(){return Eue.serialize(this)}},Bn=class{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zw(this)}},ch=class{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=rm(this.parameters),this._parameterMap}toString(){return O5(this)}};function bue(i,n){return dh(i,n)&&i.every((e,t)=>gc(e.parameters,n[t].parameters))}function dh(i,n){return i.length!==n.length?!1:i.every((e,t)=>e.path===n[t].path)}function Sue(i,n){let e=[];return Object.entries(i.children).forEach(([t,r])=>{t===Qi&&(e=e.concat(n(r,t)))}),Object.entries(i.children).forEach(([t,r])=>{t!==Qi&&(e=e.concat(n(r,t)))}),e}var Q_=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>new om,providedIn:"root"})}}return i})(),om=class{parse(n){let e=new BO(n);return new _d(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${V_(n.root,!0)}`,t=Tue(n.queryParams),r=typeof n.fragment=="string"?`#${Aue(n.fragment)}`:"";return`${e}${t}${r}`}},Eue=new om;function zw(i){return i.segments.map(n=>O5(n)).join("/")}function V_(i,n){if(!i.hasChildren())return zw(i);if(n){let e=i.children[Qi]?V_(i.children[Qi],!1):"",t=[];return Object.entries(i.children).forEach(([r,o])=>{r!==Qi&&t.push(`${r}:${V_(o,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=Sue(i,(t,r)=>r===Qi?[V_(i.children[Qi],!1)]:[`${r}:${V_(t,!1)}`]);return Object.keys(i.children).length===1&&i.children[Qi]!=null?`${zw(i)}/${e[0]}`:`${zw(i)}/(${e.join("//")})`}}function T5(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gw(i){return T5(i).replace(/%3B/gi,";")}function Aue(i){return encodeURI(i)}function VO(i){return T5(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kw(i){return decodeURIComponent(i)}function h5(i){return Kw(i.replace(/\+/g,"%20"))}function O5(i){return`${VO(i.path)}${xue(i.parameters)}`}function xue(i){return Object.entries(i).map(([n,e])=>`;${VO(n)}=${VO(e)}`).join("")}function Tue(i){let n=Object.entries(i).map(([e,t])=>Array.isArray(t)?t.map(r=>`${Gw(e)}=${Gw(r)}`).join("&"):`${Gw(e)}=${Gw(t)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var Oue=/^[^\/()?;#]+/;function DO(i){let n=i.match(Oue);return n?n[0]:""}var Rue=/^[^\/()?;=#]+/;function Pue(i){let n=i.match(Rue);return n?n[0]:""}var Due=/^[^=?&#]+/;function Fue(i){let n=i.match(Due);return n?n[0]:""}var kue=/^[^&#]+/;function Nue(i){let n=i.match(kue);return n?n[0]:""}var BO=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(t[Qi]=new Bn(n,e)),t}parseSegment(){let n=DO(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new xt(4009,!1);return this.capture(n),new ch(Kw(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=Pue(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let r=DO(this.remaining);r&&(t=r,this.capture(t))}n[Kw(e)]=Kw(t)}parseQueryParam(n){let e=Fue(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let s=Nue(this.remaining);s&&(t=s,this.capture(t))}let r=h5(e),o=h5(t);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(o)}else n[r]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=DO(this.remaining),r=this.remaining[t.length];if(r!=="/"&&r!==")"&&r!==";")throw new xt(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Qi);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Qi]:new Bn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new xt(4011,!1)}};function R5(i){return i.segments.length>0?new Bn([],{[Qi]:i}):i}function P5(i){let n={};for(let[t,r]of Object.entries(i.children)){let o=P5(r);if(t===Qi&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))n[s]=a;else(o.segments.length>0||o.hasChildren())&&(n[t]=o)}let e=new Bn(i.segments,n);return Lue(e)}function Lue(i){if(i.numberOfChildren===1&&i.children[Qi]){let n=i.children[Qi];return new Bn(i.segments.concat(n.segments),n.children)}return i}function ph(i){return i instanceof _d}function Mue(i,n,e=null,t=null){let r=D5(i);return F5(r,n,e,t)}function D5(i){let n;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new Bn(o.url,s);return o===i&&(n=a),a}let t=e(i.root),r=R5(t);return n??r}function F5(i,n,e,t){let r=i;for(;r.parent;)r=r.parent;if(n.length===0)return FO(r,r,r,e,t);let o=Vue(n);if(o.toRoot())return FO(r,r,new Bn([],{}),e,t);let s=Bue(o,r,i),a=s.processChildren?j_(s.segmentGroup,s.index,o.commands):N5(s.segmentGroup,s.index,o.commands);return FO(r,s.segmentGroup,a,e,t)}function $w(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function W_(i){return typeof i=="object"&&i!=null&&i.outlets}function FO(i,n,e,t,r){let o={};t&&Object.entries(t).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;i===n?s=e:s=k5(i,n,e);let a=R5(P5(s));return new _d(a,o,r)}function k5(i,n,e){let t={};return Object.entries(i.children).forEach(([r,o])=>{o===n?t[r]=e:t[r]=k5(o,n,e)}),new Bn(i.segments,t)}var Jw=class{constructor(n,e,t){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=t,n&&t.length>0&&$w(t[0]))throw new xt(4003,!1);let r=t.find(W_);if(r&&r!==b5(t))throw new xt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vue(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new Jw(!0,0,i);let n=0,e=!1,t=i.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Jw(e,n,t)}var tm=class{constructor(n,e,t){this.segmentGroup=n,this.processChildren=e,this.index=t}};function Bue(i,n,e){if(i.isAbsolute)return new tm(n,!0,0);if(!e)return new tm(n,!1,NaN);if(e.parent===null)return new tm(e,!0,0);let t=$w(i.commands[0])?0:1,r=e.segments.length-1+t;return Uue(e,r,i.numberOfDoubleDots)}function Uue(i,n,e){let t=i,r=n,o=e;for(;o>r;){if(o-=r,t=t.parent,!t)throw new xt(4005,!1);r=t.segments.length}return new tm(t,!1,r-o)}function jue(i){return W_(i[0])?i[0].outlets:{[Qi]:i}}function N5(i,n,e){if(i??=new Bn([],{}),i.segments.length===0&&i.hasChildren())return j_(i,n,e);let t=Gue(i,n,e),r=e.slice(t.commandIndex);if(t.match&&t.pathIndex<i.segments.length){let o=new Bn(i.segments.slice(0,t.pathIndex),{});return o.children[Qi]=new Bn(i.segments.slice(t.pathIndex),i.children),j_(o,0,r)}else return t.match&&r.length===0?new Bn(i.segments,{}):t.match&&!i.hasChildren()?UO(i,n,e):t.match?j_(i,0,r):UO(i,n,e)}function j_(i,n,e){if(e.length===0)return new Bn(i.segments,{});{let t=jue(e),r={};if(Object.keys(t).some(o=>o!==Qi)&&i.children[Qi]&&i.numberOfChildren===1&&i.children[Qi].segments.length===0){let o=j_(i.children[Qi],n,e);return new Bn(i.segments,o.children)}return Object.entries(t).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=N5(i.children[o],n,s))}),Object.entries(i.children).forEach(([o,s])=>{t[o]===void 0&&(r[o]=s)}),new Bn(i.segments,r)}}function Gue(i,n,e){let t=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(t>=e.length)return o;let s=i.segments[r],a=e[t];if(W_(a))break;let l=`${a}`,c=t<e.length-1?e[t+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!m5(l,c,s))return o;t+=2}else{if(!m5(l,{},s))return o;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}function UO(i,n,e){let t=i.segments.slice(0,n),r=0;for(;r<e.length;){let o=e[r];if(W_(o)){let l=Hue(o.outlets);return new Bn(t,l)}if(r===0&&$w(e[0])){let l=i.segments[n];t.push(new ch(l.path,f5(e[0]))),r++;continue}let s=W_(o)?o.outlets[Qi]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&$w(a)?(t.push(new ch(s,f5(a))),r+=2):(t.push(new ch(s,{})),r++)}return new Bn(t,{})}function Hue(i){let n={};return Object.entries(i).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(n[e]=UO(new Bn([],{}),0,t))}),n}function f5(i){let n={};return Object.entries(i).forEach(([e,t])=>n[e]=`${t}`),n}function m5(i,n,e){return i==e.path&&gc(n,e.parameters)}var G_="imperative",Wo=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Wo||{}),sl=class{constructor(n,e){this.id=n,this.url=e}},sm=class extends sl{constructor(n,e,t="imperative",r=null){super(n,e),this.type=Wo.NavigationStart,this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},js=class extends sl{constructor(n,e,t){super(n,e),this.urlAfterRedirects=t,this.type=Wo.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fa=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(Fa||{}),qw=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(qw||{}),gd=class extends sl{constructor(n,e,t,r){super(n,e),this.reason=t,this.code=r,this.type=Wo.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Op=class extends sl{constructor(n,e,t,r){super(n,e),this.reason=t,this.code=r,this.type=Wo.NavigationSkipped}},z_=class extends sl{constructor(n,e,t,r){super(n,e),this.error=t,this.target=r,this.type=Wo.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yw=class extends sl{constructor(n,e,t,r){super(n,e),this.urlAfterRedirects=t,this.state=r,this.type=Wo.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jO=class extends sl{constructor(n,e,t,r){super(n,e),this.urlAfterRedirects=t,this.state=r,this.type=Wo.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},GO=class extends sl{constructor(n,e,t,r,o){super(n,e),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=o,this.type=Wo.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},HO=class extends sl{constructor(n,e,t,r){super(n,e),this.urlAfterRedirects=t,this.state=r,this.type=Wo.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WO=class extends sl{constructor(n,e,t,r){super(n,e),this.urlAfterRedirects=t,this.state=r,this.type=Wo.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zO=class{constructor(n){this.route=n,this.type=Wo.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},KO=class{constructor(n){this.route=n,this.type=Wo.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$O=class{constructor(n){this.snapshot=n,this.type=Wo.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JO=class{constructor(n){this.snapshot=n,this.type=Wo.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qO=class{constructor(n){this.snapshot=n,this.type=Wo.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},YO=class{constructor(n){this.snapshot=n,this.type=Wo.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xw=class{constructor(n,e,t){this.routerEvent=n,this.position=e,this.anchor=t,this.type=Wo.Scroll}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},K_=class{},am=class{constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function Wue(i,n){return i.providers&&!i._injector&&(i._injector=Uy(i.providers,n,`Route: ${i.path}`)),i._injector??n}function kl(i){return i.outlet||Qi}function zue(i,n){let e=i.filter(t=>kl(t)===n);return e.push(...i.filter(t=>kl(t)!==n)),e}function Z_(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let n=i.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var XO=class{get injector(){return Z_(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new e0(this.rootInjector),this.attachRef=null}},e0=(()=>{class i{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,t){let r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new XO(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(t){return new(t||i)(de(Ls))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Qw=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=QO(n,this._root);return e?e.children.map(t=>t.value):[]}firstChild(n){let e=QO(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=ZO(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return ZO(n,this._root).map(e=>e.value)}};function QO(i,n){if(i===n.value)return n;for(let e of n.children){let t=QO(i,e);if(t)return t}return null}function ZO(i,n){if(i===n.value)return[n];for(let e of n.children){let t=ZO(i,e);if(t.length)return t.unshift(n),t}return[]}var Da=class{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function em(i){let n={};return i&&i.children.forEach(e=>n[e.value.outlet]=e),n}var Zw=class extends Qw{constructor(n,e){super(n),this.snapshot=e,l2(this,n)}toString(){return this.snapshot.toString()}};function L5(i){let n=Kue(i),e=new vn([new ch("",{})]),t=new vn({}),r=new vn({}),o=new vn({}),s=new vn(""),a=new Cd(e,t,o,s,r,Qi,i,n.root);return a.snapshot=n.root,new Zw(new Da(a,[]),n)}function Kue(i){let n={},e={},t={},r="",o=new im([],n,t,r,e,Qi,i,null,{});return new tv("",new Da(o,[]))}var Cd=class{constructor(n,e,t,r,o,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(K(c=>c[X_]))??vt(void 0),this.url=n,this.params=e,this.queryParams=t,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(n=>rm(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(n=>rm(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ev(i,n,e="emptyOnly"){let t,{routeConfig:r}=i;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?t={params:oe(oe({},n.params),i.params),data:oe(oe({},n.data),i.data),resolve:oe(oe(oe(oe({},i.data),n.data),r?.data),i._resolvedData)}:t={params:oe({},i.params),data:oe({},i.data),resolve:oe(oe({},i.data),i._resolvedData??{})},r&&V5(r)&&(t.resolve[X_]=r.title),t}var im=class{get title(){return this.data?.[X_]}constructor(n,e,t,r,o,s,a,l,c){this.url=n,this.params=e,this.queryParams=t,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rm(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},tv=class extends Qw{constructor(n,e){super(e),this.url=n,l2(this,e)}toString(){return M5(this._root)}};function l2(i,n){n.value._routerState=i,n.children.forEach(e=>l2(i,e))}function M5(i){let n=i.children.length>0?` { ${i.children.map(M5).join(", ")} } `:"";return`${i.value}${n}`}function kO(i){if(i.snapshot){let n=i.snapshot,e=i._futureSnapshot;i.snapshot=e,gc(n.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),gc(n.params,e.params)||i.paramsSubject.next(e.params),Iue(n.url,e.url)||i.urlSubject.next(e.url),gc(n.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function e2(i,n){let e=gc(i.params,n.params)&&bue(i.url,n.url),t=!i.parent!=!n.parent;return e&&!t&&(!i.parent||e2(i.parent,n.parent))}function V5(i){return typeof i.title=="string"||i.title===null}var $ue=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qi,this.activateEvents=new X,this.deactivateEvents=new X,this.attachEvents=new X,this.detachEvents=new X,this.parentContexts=Je(e0),this.location=Je(Ro),this.changeDetector=Je(we),this.inputBinder=Je(sv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:r}=e.name;if(t)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new xt(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new t2(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Et({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yi]})}}return i})(),t2=class i{__ngOutletInjector(n){return new i(this.route,this.childContexts,n)}constructor(n,e,t){this.route=n,this.childContexts=e,this.parent=t}get(n,e){return n===Cd?this.route:n===e0?this.childContexts:this.parent.get(n,e)}},sv=new Xe(""),g5=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:t}=e,r=Lg([t.queryParams,t.params,t.data]).pipe(xo(([o,s,a],l)=>(a=oe(oe(oe({},o),s),a),l===0?vt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==t||t.component===null){this.unsubscribeFromRouteData(e);return}let s=a4(t.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function Jue(i,n,e){let t=$_(i,n._root,e?e._root:void 0);return new Zw(t,n)}function $_(i,n,e){if(e&&i.shouldReuseRoute(n.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=n.value;let r=que(i,n,e);return new Da(t,r)}else{if(i.shouldAttach(n.value)){let o=i.retrieve(n.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>$_(i,a)),s}}let t=Yue(n.value),r=n.children.map(o=>$_(i,o));return new Da(t,r)}}function que(i,n,e){return n.children.map(t=>{for(let r of e.children)if(i.shouldReuseRoute(t.value,r.value.snapshot))return $_(i,t,r);return $_(i,t)})}function Yue(i){return new Cd(new vn(i.url),new vn(i.params),new vn(i.queryParams),new vn(i.fragment),new vn(i.data),i.outlet,i.component,i)}var J_=class{constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},B5="ngNavigationCancelingError";function iv(i,n){let{redirectTo:e,navigationBehaviorOptions:t}=ph(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=U5(!1,Fa.Redirect);return r.url=e,r.navigationBehaviorOptions=t,r}function U5(i,n){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[B5]=!0,e.cancellationCode=n,e}function Xue(i){return j5(i)&&ph(i.url)}function j5(i){return!!i&&i[B5]}var Que=(i,n,e,t)=>K(r=>(new i2(n,r.targetRouterState,r.currentRouterState,e,t).activate(i),r)),i2=class{constructor(n,e,t,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,n),kO(this.futureState.root),this.activateChildRoutes(e,t,n)}deactivateChildRoutes(n,e,t){let r=em(e);n.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],t),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(n,e,t){let r=n.value,o=e?e.value:null;if(r===o)if(r.component){let s=t.getContext(r.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,t);else o&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let t=e.getContext(n.value.outlet),r=t&&n.value.component?t.children:e,o=em(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(t&&t.outlet){let s=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let t=e.getContext(n.value.outlet),r=t&&n.value.component?t.children:e,o=em(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(n,e,t){let r=em(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],t),this.forwardEvent(new YO(o.value.snapshot))}),n.children.length&&this.forwardEvent(new JO(n.value.snapshot))}activateRoutes(n,e,t){let r=n.value,o=e?e.value:null;if(kO(r),r===o)if(r.component){let s=t.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,t);else if(r.component){let s=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),kO(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,t)}},nv=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},nm=class{constructor(n,e){this.component=n,this.route=e}};function Zue(i,n,e){let t=i._root,r=n?n._root:null;return B_(t,r,e,[t.value])}function ehe(i){let n=i.routeConfig?i.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:i,guards:n}}function cm(i,n){let e=Symbol(),t=n.get(i,e);return t===e?typeof i=="function"&&!fL(i)?i:n.get(i):t}function B_(i,n,e,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=em(n);return i.children.forEach(s=>{the(s,o[s.value.outlet],e,t.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>H_(a,e.getContext(s),r)),r}function the(i,n,e,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,s=n?n.value:null,a=e?e.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=ihe(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new nv(t)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?B_(i,n,a?a.children:null,t,r):B_(i,n,e,t,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new nm(a.outlet.component,s))}else s&&H_(n,a,r),r.canActivateChecks.push(new nv(t)),o.component?B_(i,null,a?a.children:null,t,r):B_(i,null,e,t,r);return r}function ihe(i,n,e){if(typeof e=="function")return e(i,n);switch(e){case"pathParamsChange":return!dh(i.url,n.url);case"pathParamsOrQueryParamsChange":return!dh(i.url,n.url)||!gc(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!e2(i,n)||!gc(i.queryParams,n.queryParams);case"paramsChange":default:return!e2(i,n)}}function H_(i,n,e){let t=em(i),r=i.value;Object.entries(t).forEach(([o,s])=>{r.component?n?H_(s,n.children.getContext(o),e):H_(s,null,e):H_(s,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new nm(n.outlet.component,r)):e.canDeactivateChecks.push(new nm(null,r)):e.canDeactivateChecks.push(new nm(null,r))}function t0(i){return typeof i=="function"}function nhe(i){return typeof i=="boolean"}function rhe(i){return i&&t0(i.canLoad)}function ohe(i){return i&&t0(i.canActivate)}function she(i){return i&&t0(i.canActivateChild)}function ahe(i){return i&&t0(i.canDeactivate)}function lhe(i){return i&&t0(i.canMatch)}function G5(i){return i instanceof ga||i?.name==="EmptyError"}var Hw=Symbol("INITIAL_VALUE");function lm(){return xo(i=>Lg(i.map(n=>n.pipe(ts(1),Bg(Hw)))).pipe(K(n=>{for(let e of n)if(e!==!0){if(e===Hw)return Hw;if(e===!1||che(e))return e}return!0}),Ao(n=>n!==Hw),ts(1)))}function che(i){return ph(i)||i instanceof J_}function dhe(i,n){return Yn(e=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?vt(ke(oe({},e),{guardsResult:!0})):phe(s,t,r,i).pipe(Yn(a=>a&&nhe(a)?uhe(t,o,i,n):vt(a)),K(a=>ke(oe({},e),{guardsResult:a})))})}function phe(i,n,e,t){return bn(i).pipe(Yn(r=>_he(r.component,r.route,e,n,t)),xl(r=>r!==!0,!0))}function uhe(i,n,e,t){return bn(n).pipe(Al(r=>Sl(fhe(r.route.parent,t),hhe(r.route,t),ghe(i,r.path,e),mhe(i,r.route,e))),xl(r=>r!==!0,!0))}function hhe(i,n){return i!==null&&n&&n(new qO(i)),vt(!0)}function fhe(i,n){return i!==null&&n&&n(new $O(i)),vt(!0)}function mhe(i,n,e){let t=n.routeConfig?n.routeConfig.canActivate:null;if(!t||t.length===0)return vt(!0);let r=t.map(o=>Lu(()=>{let s=Z_(n)??e,a=cm(o,s),l=ohe(a)?a.canActivate(n,i):Ja(s,()=>a(n,i));return Pp(l).pipe(xl())}));return vt(r).pipe(lm())}function ghe(i,n,e){let t=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>ehe(s)).filter(s=>s!==null).map(s=>Lu(()=>{let a=s.guards.map(l=>{let c=Z_(s.node)??e,d=cm(l,c),h=she(d)?d.canActivateChild(t,i):Ja(c,()=>d(t,i));return Pp(h).pipe(xl())});return vt(a).pipe(lm())}));return vt(o).pipe(lm())}function _he(i,n,e,t,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return vt(!0);let s=o.map(a=>{let l=Z_(n)??r,c=cm(a,l),d=ahe(c)?c.canDeactivate(i,n,e,t):Ja(l,()=>c(i,n,e,t));return Pp(d).pipe(xl())});return vt(s).pipe(lm())}function Che(i,n,e,t){let r=n.canLoad;if(r===void 0||r.length===0)return vt(!0);let o=r.map(s=>{let a=cm(s,i),l=rhe(a)?a.canLoad(n,e):Ja(i,()=>a(n,e));return Pp(l)});return vt(o).pipe(lm(),H5(t))}function H5(i){return mE(Lo(n=>{if(typeof n!="boolean")throw iv(i,n)}),K(n=>n===!0))}function Ihe(i,n,e,t){let r=n.canMatch;if(!r||r.length===0)return vt(!0);let o=r.map(s=>{let a=cm(s,i),l=lhe(a)?a.canMatch(n,e):Ja(i,()=>a(n,e));return Pp(l)});return vt(o).pipe(lm(),H5(t))}var q_=class{constructor(n){this.segmentGroup=n||null}},Y_=class extends Error{constructor(n){super(),this.urlTree=n}};function Zf(i){return ma(new q_(i))}function yhe(i){return ma(new xt(4e3,!1))}function whe(i){return ma(U5(!1,Fa.GuardRejected))}var n2=class{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let t=[],r=e.root;for(;;){if(t=t.concat(r.segments),r.numberOfChildren===0)return vt(t);if(r.numberOfChildren>1||!r.children[Qi])return yhe(`${n.redirectTo}`);r=r.children[Qi]}}applyRedirectCommands(n,e,t,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:d,url:h,outlet:_,params:C,data:I,title:b}=r,E=Ja(o,()=>a({params:C,data:I,queryParams:l,fragment:c,routeConfig:d,url:h,outlet:_,title:b}));if(E instanceof _d)throw new Y_(E);e=E}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,t);if(e[0]==="/")throw new Y_(s);return s}applyRedirectCreateUrlTree(n,e,t,r){let o=this.createSegmentGroup(n,e.root,t,r);return new _d(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let t={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);t[r]=e[a]}else t[r]=o}),t}createSegmentGroup(n,e,t,r){let o=this.createSegments(n,e.segments,t,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,t,r)}),new Bn(o,s)}createSegments(n,e,t,r){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,t))}findPosParam(n,e,t){let r=t[e.path.substring(1)];if(!r)throw new xt(4001,!1);return r}findOrReturn(n,e){let t=0;for(let r of e){if(r.path===n.path)return e.splice(t),r;t++}return n}},r2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vhe(i,n,e,t,r){let o=W5(i,n,e);return o.matched?(t=Wue(n,t),Ihe(t,n,e,r).pipe(K(s=>s===!0?o:oe({},r2)))):vt(o)}function W5(i,n,e){if(n.path==="**")return bhe(e);if(n.path==="")return n.pathMatch==="full"&&(i.hasChildren()||e.length>0)?oe({},r2):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||Cue)(e,i,n);if(!r)return oe({},r2);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?oe(oe({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function bhe(i){return{matched:!0,parameters:i.length>0?b5(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function _5(i,n,e,t){return e.length>0&&Ahe(i,e,t)?{segmentGroup:new Bn(n,Ehe(t,new Bn(e,i.children))),slicedSegments:[]}:e.length===0&&xhe(i,e,t)?{segmentGroup:new Bn(i.segments,She(i,e,t,i.children)),slicedSegments:e}:{segmentGroup:new Bn(i.segments,i.children),slicedSegments:e}}function She(i,n,e,t){let r={};for(let o of e)if(av(i,n,o)&&!t[kl(o)]){let s=new Bn([],{});r[kl(o)]=s}return oe(oe({},t),r)}function Ehe(i,n){let e={};e[Qi]=n;for(let t of i)if(t.path===""&&kl(t)!==Qi){let r=new Bn([],{});e[kl(t)]=r}return e}function Ahe(i,n,e){return e.some(t=>av(i,n,t)&&kl(t)!==Qi)}function xhe(i,n,e){return e.some(t=>av(i,n,t))}function av(i,n,e){return(i.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function The(i,n,e){return n.length===0&&!i.children[e]}var o2=class{};function Ohe(i,n,e,t,r,o,s="emptyOnly"){return new s2(i,n,e,t,r,s,o).recognize()}var Rhe=31,s2=class{constructor(n,e,t,r,o,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new n2(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new xt(4002,`'${n.segmentGroup}'`)}recognize(){let n=_5(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(K(({children:e,rootSnapshot:t})=>{let r=new Da(t,e),o=new tv("",r),s=Mue(t,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(n){let e=new im([],Object.freeze({}),Object.freeze(oe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Qi,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Qi,e).pipe(K(t=>({children:t,rootSnapshot:e})),q(t=>{if(t instanceof Y_)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof q_?this.noMatchError(t):t}))}processSegmentGroup(n,e,t,r,o){return t.segments.length===0&&t.hasChildren()?this.processChildren(n,e,t,o):this.processSegment(n,e,t,t.segments,r,!0,o).pipe(K(s=>s instanceof Da?[s]:[]))}processChildren(n,e,t,r){let o=[];for(let s of Object.keys(t.children))s==="primary"?o.unshift(s):o.push(s);return bn(o).pipe(Al(s=>{let a=t.children[s],l=zue(e,s);return this.processSegmentGroup(n,l,a,s,r)}),Vg((s,a)=>(s.push(...a),s)),rp(null),AE(),Yn(s=>{if(s===null)return Zf(t);let a=z5(s);return Phe(a),vt(a)}))}processSegment(n,e,t,r,o,s,a){return bn(e).pipe(Al(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,t,r,o,s,a).pipe(q(c=>{if(c instanceof q_)return vt(null);throw c}))),xl(l=>!!l),q(l=>{if(G5(l))return The(t,r,o)?vt(new o2):Zf(t);throw l}))}processSegmentAgainstRoute(n,e,t,r,o,s,a,l){return kl(t)!==s&&(s===Qi||!av(r,o,t))?Zf(r):t.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,t,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,t,o,s,l):Zf(r)}expandSegmentAgainstRouteUsingRedirect(n,e,t,r,o,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:h,remainingSegments:_}=W5(e,r,o);if(!l)return Zf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Rhe&&(this.allowRedirects=!1));let C=new im(o,c,Object.freeze(oe({},this.urlTree.queryParams)),this.urlTree.fragment,C5(r),kl(r),r.component??r._loadedComponent??null,r,I5(r)),I=ev(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(I.params),C.data=Object.freeze(I.data);let b=this.applyRedirects.applyRedirectCommands(d,r.redirectTo,h,C,n);return this.applyRedirects.lineralizeSegments(r,b).pipe(Yn(E=>this.processSegment(n,t,e,E.concat(_),s,!1,a)))}matchSegmentAgainstRoute(n,e,t,r,o,s){let a=vhe(e,t,r,n,this.urlSerializer);return t.path==="**"&&(e.children={}),a.pipe(xo(l=>l.matched?(n=t._injector??n,this.getChildConfig(n,t,r).pipe(xo(({routes:c})=>{let d=t._loadedInjector??n,{parameters:h,consumedSegments:_,remainingSegments:C}=l,I=new im(_,h,Object.freeze(oe({},this.urlTree.queryParams)),this.urlTree.fragment,C5(t),kl(t),t.component??t._loadedComponent??null,t,I5(t)),b=ev(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(b.params),I.data=Object.freeze(b.data);let{segmentGroup:E,slicedSegments:R}=_5(e,_,C,c);if(R.length===0&&E.hasChildren())return this.processChildren(d,c,E,I).pipe(K(A=>new Da(I,A)));if(c.length===0&&R.length===0)return vt(new Da(I,[]));let T=kl(t)===o;return this.processSegment(d,c,E,R,T?Qi:o,!0,I).pipe(K(A=>new Da(I,A instanceof Da?[A]:[])))}))):Zf(e)))}getChildConfig(n,e,t){return e.children?vt({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?vt({routes:e._loadedRoutes,injector:e._loadedInjector}):Che(n,e,t,this.urlSerializer).pipe(Yn(r=>r?this.configLoader.loadChildren(n,e).pipe(Lo(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):whe(e))):vt({routes:[],injector:n})}};function Phe(i){i.sort((n,e)=>n.value.outlet===Qi?-1:e.value.outlet===Qi?1:n.value.outlet.localeCompare(e.value.outlet))}function Dhe(i){let n=i.value.routeConfig;return n&&n.path===""}function z5(i){let n=[],e=new Set;for(let t of i){if(!Dhe(t)){n.push(t);continue}let r=n.find(o=>t.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...t.children),e.add(r)):n.push(t)}for(let t of e){let r=z5(t.children);n.push(new Da(t.value,r))}return n.filter(t=>!e.has(t))}function C5(i){return i.data||{}}function I5(i){return i.resolve||{}}function Fhe(i,n,e,t,r,o){return Yn(s=>Ohe(i,n,e,t,s.extractedUrl,r,o).pipe(K(({state:a,tree:l})=>ke(oe({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function khe(i,n){return Yn(e=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=e;if(!r.length)return vt(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of K5(l))s.add(c);let a=0;return bn(s).pipe(Al(l=>o.has(l)?Nhe(l,t,i,n):(l.data=ev(l,l.parent,i).resolve,vt(void 0))),Lo(()=>a++),tf(1),Yn(l=>a===s.size?vt(e):Eo))})}function K5(i){let n=i.children.map(e=>K5(e)).flat();return[i,...n]}function Nhe(i,n,e,t){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!V5(r)&&(o[X_]=r.title),Lhe(o,i,n,t).pipe(K(s=>(i._resolvedData=s,i.data=ev(i,i.parent,e).resolve,null)))}function Lhe(i,n,e,t){let r=MO(i);if(r.length===0)return vt({});let o={};return bn(r).pipe(Yn(s=>Mhe(i[s],n,e,t).pipe(xl(),Lo(a=>{if(a instanceof J_)throw iv(new om,a);o[s]=a}))),tf(1),Mu(o),q(s=>G5(s)?Eo:ma(s)))}function Mhe(i,n,e,t){let r=Z_(n)??t,o=cm(i,r),s=o.resolve?o.resolve(n,e):Ja(r,()=>o(n,e));return Pp(s)}function NO(i){return xo(n=>{let e=i(n);return e?bn(e).pipe(K(()=>n)):vt(n)})}var $5=(()=>{class i{buildTitle(e){let t,r=e.root;for(;r!==void 0;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(o=>o.outlet===Qi);return t}getResolvedTitleForRoute(e){return e.data[X_]}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(Vhe),providedIn:"root"})}}return i})(),Vhe=(()=>{class i extends $5{constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static{this.\u0275fac=function(t){return new(t||i)(de(J4))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),i0=new Xe("",{providedIn:"root",factory:()=>({})}),Bhe=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=se({type:i,selectors:[["ng-component"]],standalone:!0,features:[Ct],decls:1,vars:0,template:function(t,r){t&1&&P(0,"router-outlet")},dependencies:[$ue],encapsulation:2})}}return i})();function c2(i){let n=i.children&&i.children.map(c2),e=n?ke(oe({},i),{children:n}):oe({},i);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Qi&&(e.component=Bhe),e}var rv=new Xe(""),d2=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Je($y)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return vt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=Pp(e.loadComponent()).pipe(K(J5),Lo(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),op(()=>{this.componentLoaders.delete(e)})),r=new Yh(t,()=>new Ue).pipe(qh());return this.componentLoaders.set(e,r),r}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return vt({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let o=Uhe(t,this.compiler,e,this.onLoadEndListener).pipe(op(()=>{this.childrenLoaders.delete(t)})),s=new Yh(o,()=>new Ue).pipe(qh());return this.childrenLoaders.set(t,s),s}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Uhe(i,n,e,t){return Pp(i.loadChildren()).pipe(K(J5),Yn(r=>r instanceof Jg||Array.isArray(r)?vt(r):bn(n.compileModuleAsync(r))),K(r=>{t&&t(i);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(rv,[],{optional:!0,self:!0}).flat()),{routes:s.map(c2),injector:o}}))}function jhe(i){return i&&typeof i=="object"&&"default"in i}function J5(i){return jhe(i)?i.default:i}var p2=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(Ghe),providedIn:"root"})}}return i})(),Ghe=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),q5=new Xe(""),Y5=new Xe("");function Hhe(i,n,e){let t=i.get(Y5),r=i.get(At);return i.get(Lt).runOutsideAngular(()=>{if(!r.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),Whe(i))),{onViewTransitionCreated:l}=t;return l&&Ja(i,()=>l({transition:a,from:n,to:e})),s})}function Whe(i){return new Promise(n=>{zx({read:()=>setTimeout(n)},{injector:i})})}var zhe=new Xe(""),u2=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=Je(d2),this.environmentInjector=Je(Ls),this.urlSerializer=Je(Q_),this.rootContexts=Je(e0),this.location=Je(gp),this.inputBindingEnabled=Je(sv,{optional:!0})!==null,this.titleStrategy=Je($5),this.options=Je(i0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Je(p2),this.createViewTransition=Je(q5,{optional:!0}),this.navigationErrorHandler=Je(zhe,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>vt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new zO(r)),t=r=>this.events.next(new KO(r));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(ke(oe(oe({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,r){return this.transitions=new vn({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:G_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ao(o=>o.id!==0),K(o=>ke(oe({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xo(o=>{let s=!1,a=!1;return vt(o).pipe(xo(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Fa.SupersededByNewNavigation),Eo;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ke(oe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&d!=="reload"){let h="";return this.events.next(new Op(l.id,this.urlSerializer.serialize(l.rawUrl),h,qw.IgnoredSameUrlNavigation)),l.resolve(!1),Eo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return vt(l).pipe(xo(h=>{let _=this.transitions?.getValue();return this.events.next(new sm(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),_!==this.transitions?.getValue()?Eo:Promise.resolve(h)}),Fhe(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Lo(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ke(oe({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let _=new Yw(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:_,source:C,restoredState:I,extras:b}=l,E=new sm(h,this.urlSerializer.serialize(_),C,I);this.events.next(E);let R=L5(this.rootComponentType).snapshot;return this.currentTransition=o=ke(oe({},l),{targetSnapshot:R,urlAfterRedirects:_,extras:ke(oe({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,vt(o)}else{let h="";return this.events.next(new Op(l.id,this.urlSerializer.serialize(l.extractedUrl),h,qw.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Eo}}),Lo(l=>{let c=new jO(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),K(l=>(this.currentTransition=o=ke(oe({},l),{guards:Zue(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),dhe(this.environmentInjector,l=>this.events.next(l)),Lo(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw iv(this.urlSerializer,l.guardsResult);let c=new GO(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ao(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Fa.GuardRejected),!1)),NO(l=>{if(l.guards.canActivateChecks.length)return vt(l).pipe(Lo(c=>{let d=new HO(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),xo(c=>{let d=!1;return vt(c).pipe(khe(this.paramsInheritanceStrategy,this.environmentInjector),Lo({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Fa.NoDataFromResolver)}}))}),Lo(c=>{let d=new WO(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),NO(l=>{let c=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Lo(_=>{d.component=_}),K(()=>{})));for(let _ of d.children)h.push(...c(_));return h};return Lg(c(l.targetSnapshot.root)).pipe(rp(null),ts(1))}),NO(()=>this.afterPreactivation()),xo(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?bn(d).pipe(K(()=>o)):vt(o)}),K(l=>{let c=Jue(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ke(oe({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),Lo(()=>{this.events.next(new K_)}),Que(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ts(1),Lo({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new js(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Vu(this.transitionAbortSubject.pipe(Lo(l=>{throw l}))),op(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Fa.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),q(l=>{if(a=!0,j5(l))this.events.next(new gd(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Xue(l)?this.events.next(new am(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new z_(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=Ja(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof J_){let{message:h,cancellationCode:_}=iv(this.urlSerializer,d);this.events.next(new gd(o.id,this.urlSerializer.serialize(o.extractedUrl),h,_)),this.events.next(new am(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(c);let h=e.errorHandler(l);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Eo}))}))}cancelNavigationTransition(e,t,r){let o=new gd(e.id,this.urlSerializer.serialize(e.extractedUrl),t,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==t?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Khe(i){return i!==G_}var $he=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(Jhe),providedIn:"root"})}}return i})(),a2=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},Jhe=(()=>{class i extends a2{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),X5=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:()=>Je(qhe),providedIn:"root"})}}return i})(),qhe=(()=>{class i extends X5{constructor(){super(...arguments),this.location=Je(gp),this.urlSerializer=Je(Q_),this.options=Je(i0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Je(p2),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _d,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=L5(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof sm)this.stateMemento=this.createStateMemento();else if(e instanceof Op)this.rawUrlTree=t.initialUrl;else if(e instanceof Yw){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(t.targetBrowserUrl??r,t)}}else e instanceof K_?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(t.targetBrowserUrl??this.rawUrlTree,t)):e instanceof gd&&(e.code===Fa.GuardRejected||e.code===Fa.NoDataFromResolver)?this.restoreHistory(t):e instanceof z_?this.restoreHistory(t,!0):e instanceof js&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let r=e instanceof _d?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||t.extras.replaceUrl){let o=this.browserPageId,s=oe(oe({},t.extras.state),this.generateNgRouterState(t.id,o));this.location.replaceState(r,"",s)}else{let o=oe(oe({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),U_=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(U_||{});function Q5(i,n){i.events.pipe(Ao(e=>e instanceof js||e instanceof gd||e instanceof z_||e instanceof Op),K(e=>e instanceof js||e instanceof Op?U_.COMPLETE:(e instanceof gd?e.code===Fa.Redirect||e.code===Fa.SupersededByNewNavigation:!1)?U_.REDIRECTING:U_.FAILED),Ao(e=>e!==U_.REDIRECTING),ts(1)).subscribe(()=>{n()})}function Yhe(i){throw i}var Xhe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qhe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ct=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Je(Gy),this.stateManager=Je(X5),this.options=Je(i0,{optional:!0})||{},this.pendingTasks=Je(oc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Je(u2),this.urlSerializer=Je(Q_),this.location=Je(gp),this.urlHandlingStrategy=Je(p2),this._events=new Ue,this.errorHandler=this.options.errorHandler||Yhe,this.navigated=!1,this.routeReuseStrategy=Je($he),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Je(rv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Je(sv,{optional:!0}),this.eventsSubscription=new Dr,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(t,o),t instanceof gd&&t.code!==Fa.Redirect&&t.code!==Fa.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof js)this.navigated=!0;else if(t instanceof am){let s=t.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(t.url,r.currentRawUrl),l=oe({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Khe(r.source)},s);this.scheduleNavigation(a,G_,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}efe(t)&&this._events.next(t)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),G_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=oe({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,t,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(c2),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=t,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=oe(oe({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let _=r?r.snapshot:this.routerState.snapshot.root;h=D5(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return F5(h,e,d,c??null)}navigateByUrl(e,t={skipLocationChange:!1}){let r=ph(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,G_,null,t)}navigate(e,t={skipLocationChange:!1}){return Zhe(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let r;if(t===!0?r=oe({},Xhe):t===!1?r=oe({},Qhe):r=t,ph(e))return u5(this.currentUrlTree,e,r);let o=this.parseUrl(e);return u5(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((t,[r,o])=>(o!=null&&(t[r]=o),t),{})}scheduleNavigation(e,t,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,_)=>{a=h,l=_});let d=this.pendingTasks.add();return Q5(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Zhe(i){for(let n=0;n<i.length;n++)if(i[n]==null)throw new xt(4008,!1)}function efe(i){return!(i instanceof K_)&&!(i instanceof am)}var Rp=(()=>{class i{constructor(e,t,r,o,s,a){this.router=e,this.route=t,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new Ue,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof js&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ph(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,t,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||t||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let t=this.href===null?null:GM(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(e,t){let r=this.renderer,o=this.el.nativeElement;t!==null?r.setAttribute(o,e,t):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:ph(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(t){return new(t||i)(S(ct),S(Cd),Ix("tabindex"),S(jt),S(Ze),S(dd))}}static{this.\u0275dir=Et({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){t&1&&k("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),t&2&&G("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Y],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Y],replaceUrl:[2,"replaceUrl","replaceUrl",Y],routerLink:"routerLink"},standalone:!0,features:[tt,Yi]})}}return i})(),dm=(()=>{class i{get isActive(){return this._isActive}constructor(e,t,r,o,s){this.router=e,this.element=t,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new X,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof js&&this.update()})}ngAfterContentInit(){vt(this.links.changes,vt(null)).pipe(ql()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=bn(e).pipe(ql()).subscribe(t=>{this._isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(e){let t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(t=>{e?this.renderer.addClass(this.element.nativeElement,t):this.renderer.removeClass(this.element.nativeElement,t)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let t=tfe(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,t):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(t){return new(t||i)(S(ct),S(Ze),S(jt),S(we),S(Rp,8))}}static{this.\u0275dir=Et({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(t&1&&ut(o,Rp,5),t&2){let s;te(s=ie())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Yi]})}}return i})();function tfe(i){return!!i.paths}var ov=class{};var ife=(()=>{class i{constructor(e,t,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ao(e=>e instanceof js),Al(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){let r=[];for(let o of t){o.providers&&!o._injector&&(o._injector=Uy(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return bn(r).pipe(ql())}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>{let r;t.loadChildren&&t.canLoad===void 0?r=this.loader.loadChildren(e,t):r=vt(null);let o=r.pipe(Yn(s=>s===null?vt(void 0):(t._loadedRoutes=s.routes,t._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(t.loadComponent&&!t._loadedComponent){let s=this.loader.loadComponent(t);return bn([o,s]).pipe(ql())}else return o})}static{this.\u0275fac=function(t){return new(t||i)(de(ct),de($y),de(Ls),de(ov),de(d2))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Z5=new Xe(""),nfe=(()=>{class i{constructor(e,t,r,o,s={}){this.urlSerializer=e,this.transitions=t,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof sm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof js?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Op&&e.code===qw.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Xw&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xw(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,t))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(t){n3()}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function rfe(i){return i.routerState.root}function n0(i,n){return{\u0275kind:i,\u0275providers:n}}function ofe(){let i=Je(Ur);return n=>{let e=i.get(Rl);if(n!==e.components[0])return;let t=i.get(ct),r=i.get(eB);i.get(h2)===1&&t.initialNavigation(),i.get(tB,null,tn.Optional)?.setUpPreloading(),i.get(Z5,null,tn.Optional)?.init(),t.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var eB=new Xe("",{factory:()=>new Ue}),h2=new Xe("",{providedIn:"root",factory:()=>1});function sfe(){return n0(2,[{provide:h2,useValue:0},{provide:zy,multi:!0,deps:[Ur],useFactory:n=>{let e=n.get(C4,Promise.resolve());return()=>e.then(()=>new Promise(t=>{let r=n.get(ct),o=n.get(eB);Q5(r,()=>{t(!0)}),n.get(u2).afterPreactivation=()=>(t(!0),o.closed?vt(void 0):o),r.initialNavigation()}))}}])}function afe(){return n0(3,[{provide:zy,multi:!0,useFactory:()=>{let n=Je(ct);return()=>{n.setUpLocationChangeListener()}}},{provide:h2,useValue:2}])}var tB=new Xe("");function lfe(i){return n0(0,[{provide:tB,useExisting:ife},{provide:ov,useExisting:i}])}function cfe(){return n0(8,[g5,{provide:sv,useExisting:g5}])}function dfe(i){let n=[{provide:q5,useValue:Hhe},{provide:Y5,useValue:oe({skipNextTransition:!!i?.skipInitialTransition},i)}];return n0(9,n)}var y5=new Xe("ROUTER_FORROOT_GUARD"),pfe=[gp,{provide:Q_,useClass:om},ct,e0,{provide:Cd,useFactory:rfe,deps:[ct]},d2,[]],al=(()=>{class i{constructor(e){}static forRoot(e,t){return{ngModule:i,providers:[pfe,[],{provide:rv,multi:!0,useValue:e},{provide:y5,useFactory:mfe,deps:[[ct,new Qg,new gy]]},{provide:i0,useValue:t||{}},t?.useHash?hfe():ffe(),ufe(),t?.preloadingStrategy?lfe(t.preloadingStrategy).\u0275providers:[],t?.initialNavigation?gfe(t):[],t?.bindToComponentInputs?cfe().\u0275providers:[],t?.enableViewTransitions?dfe().\u0275providers:[],_fe()]}}static forChild(e){return{ngModule:i,providers:[{provide:rv,multi:!0,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||i)(de(y5,8))}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})();function ufe(){return{provide:Z5,useFactory:()=>{let i=Je(x4),n=Je(Lt),e=Je(i0),t=Je(u2),r=Je(Q_);return e.scrollOffset&&i.setOffset(e.scrollOffset),new nfe(r,t,i,n,e)}}}function hfe(){return{provide:dd,useClass:y4}}function ffe(){return{provide:dd,useClass:gT}}function mfe(i){return"guarded"}function gfe(i){return[i.initialNavigation==="disabled"?afe().\u0275providers:[],i.initialNavigation==="enabledBlocking"?sfe().\u0275providers:[]]}var w5=new Xe("");function _fe(){return[{provide:w5,useFactory:ofe},{provide:Ky,multi:!0,useExisting:w5}]}var Cfe=["pMenuItemContent",""],iB=i=>({"p-disabled":i}),lv=i=>({$implicit:i}),Ife=()=>({exact:!1});function yfe(i,n){i&1&&ue(0)}function wfe(i,n){if(i&1&&(m(0,"a",6),v(1,yfe,1,0,"ng-container",7),g()),i&2){let e=u(2),t=He(4);f("target",e.item.target)("ngClass",ne(9,iB,e.item.disabled)),G("title",e.item.title)("href",e.item.url||null,rs)("data-automationid",e.item.automationId)("tabindex",-1)("data-pc-section","action"),p(),f("ngTemplateOutlet",t)("ngTemplateOutletContext",ne(11,lv,e.item))}}function vfe(i,n){i&1&&ue(0)}function bfe(i,n){if(i&1&&(m(0,"a",8),v(1,vfe,1,0,"ng-container",7),g()),i&2){let e=u(2),t=He(4);f("routerLink",e.item.routerLink)("queryParams",e.item.queryParams)("routerLinkActiveOptions",e.item.routerLinkActiveOptions||Ae(17,Ife))("target",e.item.target)("ngClass",ne(18,iB,e.item.disabled))("fragment",e.item.fragment)("queryParamsHandling",e.item.queryParamsHandling)("preserveFragment",e.item.preserveFragment)("skipLocationChange",e.item.skipLocationChange)("replaceUrl",e.item.replaceUrl)("state",e.item.state),G("data-automationid",e.item.automationId)("tabindex",-1)("data-pc-section","action")("title",e.item.title),p(),f("ngTemplateOutlet",t)("ngTemplateOutletContext",ne(20,lv,e.item))}}function Sfe(i,n){if(i&1&&(he(0),v(1,wfe,2,13,"a",4)(2,bfe,2,22,"a",5),fe()),i&2){let e=u();p(),f("ngIf",!(e.item!=null&&e.item.routerLink)),p(),f("ngIf",e.item==null?null:e.item.routerLink)}}function Efe(i,n){}function Afe(i,n){i&1&&v(0,Efe,0,0,"ng-template")}function xfe(i,n){if(i&1&&(he(0),v(1,Afe,1,0,null,7),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",ne(2,lv,e.item))}}function Tfe(i,n){if(i&1&&P(0,"span",12),i&2){let e=u(2);ce(e.item.iconClass),f("ngClass",e.item.icon)("ngStyle",e.item.iconStyle)}}function Ofe(i,n){if(i&1&&(m(0,"span",13),F(1),g()),i&2){let e=u(2);p(),$(e.item.label)}}function Rfe(i,n){if(i&1&&(P(0,"span",14),D(1,"safeHtml")),i&2){let e=u(2);f("innerHTML",N(1,1,e.item.label),an)}}function Pfe(i,n){if(i&1&&(m(0,"span",15),F(1),g()),i&2){let e=u(2);f("ngClass",e.item.badgeStyleClass),p(),$(e.item.badge)}}function Dfe(i,n){if(i&1&&v(0,Tfe,1,4,"span",9)(1,Ofe,2,1,"span",10)(2,Rfe,2,3,"ng-template",null,1,Bt)(4,Pfe,2,2,"span",11),i&2){let e=He(3),t=u();f("ngIf",t.item.icon),p(),f("ngIf",t.item.escape!==!1)("ngIfElse",e),p(3),f("ngIf",t.item.badge)}}var Ffe=["list"],kfe=["container"],Nfe=i=>({"p-menu p-component":!0,"p-menu-overlay":i}),Lfe=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),Mfe=i=>({value:"visible",params:i}),f2=i=>({"p-hidden":i}),Vfe=(i,n)=>({"p-hidden":i,flex:n}),nB=(i,n,e)=>({"p-hidden":i,"p-focus":n,"p-disabled":e});function Bfe(i,n){i&1&&ue(0)}function Ufe(i,n){if(i&1&&(m(0,"div",9),v(1,Bfe,1,0,"ng-container",10),g()),i&2){let e=u(2);G("data-pc-section","start"),p(),f("ngTemplateOutlet",e.startTemplate)}}function jfe(i,n){if(i&1&&P(0,"li",14),i&2){let e=u().$implicit;f("ngClass",ne(1,f2,e.visible===!1))}}function Gfe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(3).$implicit;p(),$(e.label)}}function Hfe(i,n){if(i&1&&(P(0,"span",18),D(1,"safeHtml")),i&2){let e=u(3).$implicit;f("innerHTML",N(1,1,e.label),an)}}function Wfe(i,n){if(i&1&&(he(0),v(1,Gfe,2,1,"span",17)(2,Hfe,2,3,"ng-template",null,2,Bt),fe()),i&2){let e=He(3),t=u(2).$implicit;p(),f("ngIf",t.escape!==!1)("ngIfElse",e)}}function zfe(i,n){i&1&&ue(0)}function Kfe(i,n){if(i&1&&(m(0,"li",15),v(1,Wfe,4,2,"ng-container",7)(2,zfe,1,0,"ng-container",16),g()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u(3);f("ngClass",Qe(7,Vfe,t.visible===!1,t.visible))("tooltipOptions",t.tooltipOptions),G("data-automationid",t.automationId)("id",o.menuitemId(t,o.id,r)),p(),f("ngIf",!o.submenuHeaderTemplate),p(),f("ngTemplateOutlet",o.submenuHeaderTemplate)("ngTemplateOutletContext",ne(10,lv,t))}}function $fe(i,n){if(i&1&&P(0,"li",14),i&2){let e=u().$implicit,t=u().$implicit;f("ngClass",ne(1,f2,e.visible===!1||t.visible===!1))}}function Jfe(i,n){if(i&1){let e=L();m(0,"li",20),k("onMenuItemClick",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u().index,c=u(3);return w(c.itemClick(r,c.menuitemId(s,c.id,l,a)))}),g()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u(),s=o.$implicit,a=o.index,l=u(3);ce(t.styleClass),f("pMenuItemContent",t)("itemTemplate",l.itemTemplate)("ngClass",en(13,nB,t.visible===!1||s.visible===!1,l.focusedOptionId()&&l.menuitemId(t,l.id,a,r)===l.focusedOptionId(),l.disabled(t.disabled)))("ngStyle",t.style)("tooltipOptions",t.tooltipOptions),G("data-pc-section","menuitem")("aria-label",l.label(t.label))("data-p-focused",l.isItemFocused(l.menuitemId(t,l.id,a,r)))("data-p-disabled",l.disabled(t.disabled))("aria-disabled",l.disabled(t.disabled))("id",l.menuitemId(t,l.id,a,r))}}function qfe(i,n){if(i&1&&v(0,$fe,1,3,"li",12)(1,Jfe,1,17,"li",19),i&2){let e=n.$implicit;f("ngIf",e.separator),p(),f("ngIf",!e.separator)}}function Yfe(i,n){if(i&1&&v(0,jfe,1,3,"li",12)(1,Kfe,3,12,"li",13)(2,qfe,2,2,"ng-template",11),i&2){let e=n.$implicit;f("ngIf",e.separator),p(),f("ngIf",!e.separator),p(),f("ngForOf",e.items)}}function Xfe(i,n){if(i&1&&v(0,Yfe,3,3,"ng-template",11),i&2){let e=u(2);f("ngForOf",e.model)}}function Qfe(i,n){if(i&1&&P(0,"li",14),i&2){let e=u().$implicit;f("ngClass",ne(1,f2,e.visible===!1))}}function Zfe(i,n){if(i&1){let e=L();m(0,"li",20),k("onMenuItemClick",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u(3);return w(l.itemClick(r,l.menuitemId(s,l.id,a)))}),g()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u(3);ce(t.styleClass),f("pMenuItemContent",t)("itemTemplate",o.itemTemplate)("ngClass",en(13,nB,t.visible===!1,o.focusedOptionId()&&o.menuitemId(t,o.id,r,o.j)===o.focusedOptionId(),o.disabled(t.disabled)))("ngStyle",t.style)("tooltipOptions",t.tooltipOptions),G("data-pc-section","menuitem")("aria-label",o.label(t.label))("data-p-focused",o.isItemFocused(o.menuitemId(t,o.id,r)))("data-p-disabled",o.disabled(t.disabled))("aria-disabled",o.disabled(t.disabled))("id",o.menuitemId(t,o.id,r))}}function eme(i,n){if(i&1&&v(0,Qfe,1,3,"li",12)(1,Zfe,1,17,"li",19),i&2){let e=n.$implicit;f("ngIf",e.separator),p(),f("ngIf",!e.separator)}}function tme(i,n){if(i&1&&v(0,eme,2,2,"ng-template",11),i&2){let e=u(2);f("ngForOf",e.model)}}function ime(i,n){i&1&&ue(0)}function nme(i,n){if(i&1&&(m(0,"div",21),v(1,ime,1,0,"ng-container",10),g()),i&2){let e=u(2);G("data-pc-section","end"),p(),f("ngTemplateOutlet",e.endTemplate)}}function rme(i,n){if(i&1){let e=L();m(0,"div",4,0),k("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))})("@overlayAnimation.start",function(r){y(e);let o=u();return w(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){y(e);let o=u();return w(o.onOverlayAnimationEnd(r))}),v(2,Ufe,2,2,"div",5),m(3,"ul",6,1),k("focus",function(r){y(e);let o=u();return w(o.onListFocus(r))})("blur",function(r){y(e);let o=u();return w(o.onListBlur(r))})("keydown",function(r){y(e);let o=u();return w(o.onListKeyDown(r))}),v(5,Xfe,1,1,null,7)(6,tme,1,1,null,7),g(),v(7,nme,2,2,"div",8),g()}if(i&2){let e=u();ce(e.styleClass),f("ngClass",ne(18,Nfe,e.popup))("ngStyle",e.style)("@overlayAnimation",ne(23,Mfe,Qe(20,Lfe,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.popup!==!0),G("data-pc-name","menu")("id",e.id),p(2),f("ngIf",e.startTemplate),p(),G("id",e.id+"_list")("tabindex",e.getTabIndexValue())("data-pc-section","menu")("aria-activedescendant",e.activedescendant())("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy),p(2),f("ngIf",e.hasSubMenu()),p(),f("ngIf",!e.hasSubMenu()),p(),f("ngIf",e.endTemplate)}}var rB=(()=>{class i{platformId;sanitizer;constructor(e,t){this.platformId=e,this.sanitizer=t}transform(e){return!e||!bt(this.platformId)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(t){return new(t||i)(S(ai,16),S(Dl,16))};static \u0275pipe=ur({name:"safeHtml",type:i,pure:!0})}return i})(),ome=(()=>{class i{item;itemTemplate;onMenuItemClick=new X;menu;constructor(e){this.menu=e}onItemClick(e,t){this.onMenuItemClick.emit({originalEvent:e,item:t})}static \u0275fac=function(t){return new(t||i)(S(Zt(()=>uh)))};static \u0275cmp=se({type:i,selectors:[["","pMenuItemContent",""]],hostAttrs:[1,"p-element"],inputs:{item:[0,"pMenuItemContent","item"],itemTemplate:"itemTemplate"},outputs:{onMenuItemClick:"onMenuItemClick"},attrs:Cfe,decls:5,vars:3,consts:[["itemContent",""],["htmlLabel",""],[1,"p-menuitem-content",3,"click"],[4,"ngIf"],["class","p-menuitem-link","pRipple","",3,"target","ngClass",4,"ngIf"],["routerLinkActive","p-menuitem-link-active","class","p-menuitem-link","pRipple","",3,"routerLink","queryParams","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state",4,"ngIf"],["pRipple","",1,"p-menuitem-link",3,"target","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["routerLinkActive","p-menuitem-link-active","pRipple","",1,"p-menuitem-link",3,"routerLink","queryParams","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],["class","p-menuitem-icon",3,"ngClass","class","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"]],template:function(t,r){if(t&1){let o=L();m(0,"div",2),k("click",function(a){return y(o),w(r.onItemClick(a,r.item))}),v(1,Sfe,3,2,"ng-container",3)(2,xfe,2,4,"ng-container",3)(3,Dfe,5,4,"ng-template",null,0,Bt),g()}t&2&&(G("data-pc-section","content"),p(),f("ngIf",!r.itemTemplate),p(),f("ngIf",r.itemTemplate))},dependencies:[je,rt,mt,De,Rp,dm,nn,rB],encapsulation:2})}return i})(),uh=(()=>{class i{document;platformId;el;renderer;cd;config;overlayService;model;popup;style;styleClass;appendTo;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";ariaLabel;ariaLabelledBy;id;tabindex=0;onShow=new X;onHide=new X;onBlur=new X;onFocus=new X;listViewChild;containerViewChild;templates;startTemplate;endTemplate;itemTemplate;submenuHeaderTemplate;container;scrollHandler;documentClickListener;documentResizeListener;preventDocumentDefault;target;visible;focusedOptionId=Gr(()=>this.focusedOptionIndex()!==-1?this.focusedOptionIndex():null);focusedOptionIndex=Gi(-1);selectedOptionIndex=Gi(-1);focused=!1;overlayVisible=!1;relativeAlign;constructor(e,t,r,o,s,a,l){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.cd=s,this.config=a,this.overlayService=l,this.id=this.id||Tt()}toggle(e){this.visible?this.hide():this.show(e),this.preventDocumentDefault=!0}show(e){this.visible&&this.target!==e.currentTarget&&this.hide(),this.target=e.currentTarget,this.relativeAlign=e.relativeAlign,this.visible=!0,this.preventDocumentDefault=!0,this.overlayVisible=!0,this.cd.detectChanges()}ngOnInit(){this.popup||this.bindDocumentClickListener()}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template;break;case"itemTemplate":this.itemTemplate=e.template;break;case"submenuheader":this.submenuHeaderTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}getTabIndexValue(){return this.tabindex!==void 0?this.tabindex.toString():null}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.popup&&(this.container=e.element,this.moveOnTop(),this.onShow.emit({}),this.appendOverlay(),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),j.focus(this.listViewChild.nativeElement),this.preventDocumentDefault=!0);break;case"void":this.onOverlayHide(),this.onHide.emit({});break}}onOverlayAnimationEnd(e){switch(e.toState){case"void":this.autoZIndex&&bi.clear(e.element);break}}alignOverlay(){this.relativeAlign?j.relativePosition(this.container,this.target):j.absolutePosition(this.container,this.target)}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):j.appendChild(this.container,this.appendTo))}restoreOverlayAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}moveOnTop(){this.autoZIndex&&bi.set("menu",this.container,this.baseZIndex+this.config.zIndex.menu)}hide(){this.visible=!1,this.relativeAlign=!1,this.cd.detectChanges()}onWindowResize(){this.visible&&!j.isTouchDevice()&&this.hide()}menuitemId(e,t,r,o){return e?.id??`${t}_${r}${o!==void 0?"_"+o:""}`}isItemFocused(e){return this.focusedOptionId()===e}label(e){return typeof e=="function"?e():e}disabled(e){return typeof e=="function"?e():typeof e>"u"?!1:e}activedescendant(){return this.focused?this.focusedOptionId():void 0}onListFocus(e){this.focused||(this.focused=!0,this.onFocus.emit(e))}onListBlur(e){this.focused&&(this.focused=!1,this.changeFocusedOptionIndex(-1),this.selectedOptionIndex.set(-1),this.focusedOptionIndex.set(-1),this.onBlur.emit(e))}onListKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Enter":this.onEnterKey(e);break;case"NumpadEnter":this.onEnterKey(e);break;case"Space":this.onSpaceKey(e);break;case"Escape":case"Tab":this.popup&&(j.focus(this.target),this.hide()),this.overlayVisible&&this.hide();break;default:break}}onArrowDownKey(e){let t=this.findNextOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(t),e.preventDefault()}onArrowUpKey(e){if(e.altKey&&this.popup)j.focus(this.target),this.hide(),e.preventDefault();else{let t=this.findPrevOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(t),e.preventDefault()}}onHomeKey(e){this.changeFocusedOptionIndex(0),e.preventDefault()}onEndKey(e){this.changeFocusedOptionIndex(j.find(this.containerViewChild.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]').length-1),e.preventDefault()}onEnterKey(e){let t=j.findSingle(this.containerViewChild.nativeElement,`li[id="${`${this.focusedOptionIndex()}`}"]`),r=t&&j.findSingle(t,"a");this.popup&&j.focus(this.target),r?r.click():t&&t.click(),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}findNextOptionIndex(e){let r=[...j.find(this.containerViewChild.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]')].findIndex(o=>o.id===e);return r>-1?r+1:0}findPrevOptionIndex(e){let r=[...j.find(this.containerViewChild.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]')].findIndex(o=>o.id===e);return r>-1?r-1:0}changeFocusedOptionIndex(e){let t=j.find(this.containerViewChild.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]');if(t.length>0){let r=e>=t.length?t.length-1:e<0?0:e;r>-1&&this.focusedOptionIndex.set(t[r].getAttribute("id"))}}itemClick(e,t){let{originalEvent:r,item:o}=e;if(this.focused||(this.focused=!0,this.onFocus.emit()),o.disabled){r.preventDefault();return}!o.url&&!o.routerLink&&r.preventDefault(),o.command&&o.command({originalEvent:r,item:o}),this.popup&&this.hide(),!this.popup&&this.focusedOptionIndex()!==t&&this.focusedOptionIndex.set(t)}onOverlayClick(e){this.popup&&this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.preventDocumentDefault=!0}bindDocumentClickListener(){if(!this.documentClickListener&&bt(this.platformId)){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",t=>{let r=t.composed?t.composedPath()[0]:t.target,o=this.containerViewChild?.nativeElement&&!this.containerViewChild?.nativeElement.contains(r),s=!(this.target&&(this.target===r||this.target.contains(r)));!this.popup&&o&&s&&this.onListBlur(t),this.preventDocumentDefault&&this.overlayVisible&&o&&s&&(this.hide(),this.preventDocumentDefault=!1)})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){if(!this.documentResizeListener&&bt(this.platformId)){let e=this.document.defaultView;this.documentResizeListener=this.renderer.listen(e,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){!this.scrollHandler&&bt(this.platformId)&&(this.scrollHandler=new go(this.target,()=>{this.visible&&this.hide()})),this.scrollHandler?.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.preventDocumentDefault=!1}ngOnDestroy(){this.popup&&(this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&bi.clear(this.container),this.restoreOverlayAppend(),this.onOverlayHide()),this.popup||this.unbindDocumentClickListener()}hasSubMenu(){if(this.model){for(var e of this.model)if(e.items)return!0}return!1}isItemHidden(e){return e.separator?e.visible===!1||e.items&&e.items.some(t=>t.visible!==!1):e.visible===!1}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(we),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-menu"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Ffe,5),le(kfe,5)),t&2){let o;te(o=ie())&&(r.listViewChild=o.first),te(o=ie())&&(r.containerViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",popup:[2,"popup","popup",Y],style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",id:"id",tabindex:[2,"tabindex","tabindex",We]},outputs:{onShow:"onShow",onHide:"onHide",onBlur:"onBlur",onFocus:"onFocus"},features:[tt],decls:1,vars:1,consts:[["container",""],["list",""],["htmlSubmenuLabel",""],[3,"ngClass","class","ngStyle","click",4,"ngIf"],[3,"click","ngClass","ngStyle"],["class","p-menu-start",4,"ngIf"],["role","menu",1,"p-menu-list","p-reset",3,"focus","blur","keydown"],[4,"ngIf"],["class","p-menu-end",4,"ngIf"],[1,"p-menu-start"],[4,"ngTemplateOutlet"],["ngFor","",3,"ngForOf"],["class","p-menuitem-separator","role","separator",3,"ngClass",4,"ngIf"],["class","p-submenu-header","pTooltip","","role","none",3,"ngClass","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menuitem-separator",3,"ngClass"],["pTooltip","","role","none",1,"p-submenu-header",3,"ngClass","tooltipOptions"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf","ngIfElse"],[3,"innerHTML"],["class","p-menuitem","pTooltip","","role","menuitem",3,"pMenuItemContent","itemTemplate","ngClass","ngStyle","class","tooltipOptions","onMenuItemClick",4,"ngIf"],["pTooltip","","role","menuitem",1,"p-menuitem",3,"onMenuItemClick","pMenuItemContent","itemTemplate","ngClass","ngStyle","tooltipOptions"],[1,"p-menu-end"]],template:function(t,r){t&1&&v(0,rme,8,25,"div",3),t&2&&f("ngIf",!r.popup||r.visible)},dependencies:[je,hn,rt,mt,De,cn,ome,rB],styles:[`@layer primeng{.p-menu-overlay{position:absolute;top:0;left:0}.p-menu ul{margin:0;padding:0;list-style:none}.p-menu .p-submenu-header{align-items:center}.p-menu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menu .p-menuitem-text{line-height:1}}
`],encapsulation:2,data:{animation:[Tn("overlayAnimation",[ci(":enter",[qt({opacity:0,transform:"scaleY(0.8)"}),li("{{showTransitionParams}}")]),ci(":leave",[li("{{hideTransitionParams}}",qt({opacity:0}))])])]},changeDetection:0})}return i})(),oB=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,al,ln,oo,dt,al,oo,dt]})}return i})();var ka=No(_c());var O=function(i){return i[i.OBJ_FIREWALL=0]="OBJ_FIREWALL",i[i.OBJ_SERVICE_IP=1]="OBJ_SERVICE_IP",i[i.OBJ_SERVICE_TCP=2]="OBJ_SERVICE_TCP",i[i.OBJ_SERVICE_ICMP=3]="OBJ_SERVICE_ICMP",i[i.OBJ_SERVICE_UDP=4]="OBJ_SERVICE_UDP",i[i.OBJ_ADDRESS=5]="OBJ_ADDRESS",i[i.OBJ_ADDRESS_RANGE=6]="OBJ_ADDRESS_RANGE",i[i.OBJ_NETWORK=7]="OBJ_NETWORK",i[i.OBJ_HOST=8]="OBJ_HOST",i[i.OBJ_DNS=9]="OBJ_DNS",i[i.OBJ_INTERFACE_FIREWALL=10]="OBJ_INTERFACE_FIREWALL",i[i.OBJ_INTERFACE_HOST=11]="OBJ_INTERFACE_HOST",i[i.OBJ_GROUP=20]="OBJ_GROUP",i[i.OBJ_SERVICE_GROUP=21]="OBJ_SERVICE_GROUP",i[i.OBJ_CONTINENT=23]="OBJ_CONTINENT",i[i.OBJ_COUNTRIE=24]="OBJ_COUNTRIE",i[i.OBJ_MARK=30]="OBJ_MARK",i[i.OBJ_GEN_IP_OBJECT=99]="OBJ_GEN_IP_OBJECT",i[i.OBJ_CLUSTER=100]="OBJ_CLUSTER",i[i.OBJ_CLUSTER_NODE=101]="OBJ_CLUSTER_NODE",i[i.OBJ_GEN_RULE=199]="OBJ_GEN_RULE",i[i.OBJ_CA=300]="OBJ_CA",i[i.OBJ_CERT_CLI=301]="OBJ_CERT_CLI",i[i.OBJ_CERT_SER=302]="OBJ_CERT_SER",i[i.OBJ_OPENVPN_CONFIG=310]="OBJ_OPENVPN_CONFIG",i[i.OBJ_OPENVPN_CONFIG_CLI=311]="OBJ_OPENVPN_CONFIG_CLI",i[i.OBJ_OPENVPN_CONFIG_SER=312]="OBJ_OPENVPN_CONFIG_SER",i[i.OBJ_WG_CONFIG=320]="OBJ_WG_CONFIG",i[i.OBJ_WGC_CONFIG_CLI=321]="OBJ_WGC_CONFIG_CLI",i[i.OBJ_WGS_CONFIG_SER=322]="OBJ_WGS_CONFIG_SER",i[i.OBJ_IPSEC_CONFIG=330]="OBJ_IPSEC_CONFIG",i[i.OBJ_ISC_CONFIG_CLI=331]="OBJ_ISC_CONFIG_CLI",i[i.OBJ_ISS_CONFIG_SER=332]="OBJ_ISS_CONFIG_SER",i[i.OBJ_PREFIX_FOLDER=400]="OBJ_PREFIX_FOLDER",i[i.OBJ_OPENVPN_PREFIX=401]="OBJ_OPENVPN_PREFIX",i[i.OBJ_WIREGUARD_PREFIX=402]="OBJ_WIREGUARD_PREFIX",i[i.OBJ_IPSEC_PREFIX=403]="OBJ_IPSEC_PREFIX",i[i.OBJ_ROUTING_GATEWAY=500]="OBJ_ROUTING_GATEWAY",i[i.OBJ_ROUTING_RULE_FROM=600]="OBJ_ROUTING_RULE_FROM",i[i.OBJ_ROUTING_TABLE=201]="OBJ_ROUTING_TABLE",i[i.OBJ_ANY=-9999]="OBJ_ANY",i[i.OBJ_DHCP_RULE_RANGE=700]="OBJ_DHCP_RULE_RANGE",i[i.OBJ_DHCP_RULE_ROUTER=701]="OBJ_DHCP_RULE_ROUTER",i[i.OBJ_DHCP_RULE_NETWORK=750]="OBJ_DHCP_RULE_NETWORK",i[i.OBJ_DHCP_RULE_INTERFACE=755]="OBJ_DHCP_RULE_INTERFACE",i[i.OBJ_DHCP_RULE_IP=756]="OBJ_DHCP_RULE_IP",i[i.OBJ_DHCP_RULE_DNS=757]="OBJ_DHCP_RULE_DNS",i[i.OBJ_DHCP_MAX_LEASE_TIME=758]="OBJ_DHCP_MAX_LEASE_TIME",i[i.OBJ_DHCP_GROUP=800]="OBJ_DHCP_GROUP",i[i.OBJ_KEEPALIVED_GROUP=801]="OBJ_KEEPALIVED_GROUP",i[i.OBJ_KEEPALIVED_VIRTUAL_IPS=760]="OBJ_KEEPALIVED_VIRTUAL_IPS",i[i.OBJ_KEEPALIVED_MASTER_NODE=761]="OBJ_KEEPALIVED_MASTER_NODE",i[i.OBJ_KEEPALIVED_INTERFACE=762]="OBJ_KEEPALIVED_INTERFACE",i[i.OBJ_HAPROXY_GROUP=802]="OBJ_HAPROXY_GROUP",i[i.OBJ_HAPROXY_RULE_FRONTEND_IP=803]="OBJ_HAPROXY_RULE_FRONTEND_IP",i[i.OBJ_HAPROXY_RULE_FRONTEND_PORT=804]="OBJ_HAPROXY_RULE_FRONTEND_PORT",i[i.OBJ_HAPROXY_RULE_BACKEND_IPS=805]="OBJ_HAPROXY_RULE_BACKEND_IPS",i[i.OBJ_HAPROXY_RULE_BACKEND_PORT=806]="OBJ_HAPROXY_RULE_BACKEND_PORT",i}(O||{}),M=function(i){return i.OBJ_FIREWALL="FW",i.OBJ_CLUSTER="CL",i.OBJ_HOST="OIH",i.OBJ_ADDRESS="OIA",i.OBJ_DNS="ONS",i.OBJ_NETWORK="OIN",i.OBJ_GROUP="OIG",i.OBJ_IP_RANGE="OIR",i.OBJ_IF_FW="IFF",i.OBJ_IF_HOST="IFH",i.OBJ_MARK="MRK",i.SERVICE_IP="SOI",i.SERVICE_ICMP="SOM",i.SERVICE_UDP="SOU",i.SERVICE_TCP="SOT",i.SERVICE_GROUP="SOG",i.STANDARD="STD",i.FOLDER="FD",i.FOLDER_INTERFACES="FDI",i.FOLDER_OBJECTS="FDO",i.FOLDER_SERVICES="FDS",i.FOLDER_TIME="FDT",i.FOLDER_FW="FDF",i.FOLDER_CLUSTER="FDC",i.FOLDER_CLUSTER_FW="FCF",i.FOLDER_POLICY="FP",i.FOLDER_POLICY6="FP6",i.FOLDER_NAT="NT",i.FOLDER_ROUTING="ROU",i.FOLDER_ADDRESSES="OIA",i.FOLDER_NETWORKS="OIN",i.FOLDER_CA="FCA",i.FOLDER_VPN="VPN",i.FOLDER_SYSTEM="SYS",i.POLICY_INPUT="PI",i.POLICY_OUTPUT="PO",i.POLICY_FORWARD="PF",i.POLICY_ROUTING="RR",i.POLICY_SNAT="NTS",i.POLICY_DNAT="NTD",i.POLICY_DHCP="DHCP",i.POLICY_INPUT6="PI6",i.POLICY_OUTPUT6="PO6",i.POLICY_FORWARD6="PF6",i.POLICY_ROUTING6="RR6",i.POLICY_SNAT6="NS6",i.POLICY_DNAT6="ND6",i.OPENVPN_ROOT="OPN",i.OPENVPN_CA="CA",i.OPENVPN_CERT="CRT",i.OPENVPN_CONFIG_SER="OSR",i.OPENVPN_CONFIG_CLI="OCL",i.OPENVPN_PREFIX_FOLDER="PRE",i.OPENVPN_PREFIX="PRO",i.WIREGUARD_ROOT="WG",i.WIREGUARD_CA="CA",i.WIREGUARD_CERT="CRT",i.WIREGUARD_CONFIG_SER="WGS",i.WIREGUARD_CONFIG_CLI="WGC",i.WIREGUARD_PREFIX_FOLDER="PRE",i.WIREGUARD_PREFIX="PRW",i.IPSEC_ROOT="IS",i.IPSEC_CA="CA",i.IPSEC_CERT="CRT",i.IPSEC_CONFIG_SER="ISS",i.IPSEC_CONFIG_CLI="ISC",i.IPSEC_PREFIX_FOLDER="PRE",i.IPSEC_PREFIX="PRI",i.ROUTING_TABLES="RTS",i.ROUTING_TABLE="RT",i.COUNTRIES="COF",i.CONTINENT="CON",i.COUNTRIE="COD",i.AF="AF",i.AN="AN",i.AS="AS",i.EU="EU",i.NA="NA",i.OC="OC",i.SA="SA",i.DHCP="S01",i.DHCP_FIXED_IP="S04",i.KEEPALIVED="S02",i.HAPROXY="S03",i}(M||{}),Zr=function(i){return i[i.POLICY_ROUTING=6]="POLICY_ROUTING",i[i.ROUTING_TABLE=201]="ROUTING_TABLE",i}(Zr||{}),g2=function(i){return i[i.STATEFUL=1]="STATEFUL",i[i.CATCHALL=2]="CATCHALL",i[i.DOCKER=3]="DOCKER",i[i.CROWDSEC=4]="CROWDSEC",i[i.FAIL2BAN=5]="FAIL2BAN",i[i.HOOKSCRIPT=6]="HOOKSCRIPT",i}(g2||{}),Fi=function(i){return i[i.TO_POSITION=771]="TO_POSITION",i[i.GATEWAY_POSITION=881]="GATEWAY_POSITION",i[i.INTERFACE_POSITION=991]="INTERFACE_POSITION",i}(Fi||{}),_o=function(i){return i[i.FROM_POSITION=772]="FROM_POSITION",i[i.ROUTING_TABLE_POSITION=882]="ROUTING_TABLE_POSITION",i}(_o||{}),xs=function(i){return i[i.NETWORK=775]="NETWORK",i[i.RANGE=776]="RANGE",i[i.ROUTER=777]="ROUTER",i[i.DNS=778]="DNS",i[i.INTERFACE=779]="INTERFACE",i[i.IP=780]="IP",i}(xs||{}),Id=function(i){return i[i.INTERFACE=785]="INTERFACE",i[i.VIRTUAL_IPS=786]="VIRTUAL_IPS",i[i.MASTER_NODE=787]="MASTER_NODE",i}(Id||{}),Na=function(i){return i[i.FRONTEND_IP=790]="FRONTEND_IP",i[i.FRONTEND_PORT=791]="FRONTEND_PORT",i[i.BACKEND_IPS=792]="BACKEND_IPS",i[i.BACKEND_PORT=793]="BACKEND_PORT",i}(Na||{}),aB={[O.OBJ_INTERFACE_FIREWALL]:M.OBJ_IF_FW,[O.OBJ_INTERFACE_HOST]:M.OBJ_IF_HOST,[O.OBJ_ADDRESS]:M.OBJ_ADDRESS},yd=[M.POLICY_INPUT,M.POLICY_OUTPUT,M.POLICY_FORWARD,M.POLICY_SNAT,M.POLICY_DNAT,M.POLICY_ROUTING,M.POLICY_INPUT6,M.POLICY_OUTPUT6,M.POLICY_FORWARD6,M.POLICY_SNAT6,M.POLICY_DNAT6,M.ROUTING_TABLE,M.DHCP,M.DHCP_FIXED_IP,M.KEEPALIVED,M.HAPROXY],ki={[M.POLICY_INPUT]:1,[M.POLICY_OUTPUT]:2,[M.POLICY_FORWARD]:3,[M.POLICY_SNAT]:4,[M.POLICY_DNAT]:5,[M.POLICY_INPUT6]:61,[M.POLICY_OUTPUT6]:62,[M.POLICY_FORWARD6]:63,[M.POLICY_SNAT6]:64,[M.POLICY_DNAT6]:65,[M.DHCP]:66,[M.DHCP_FIXED_IP]:67,[M.KEEPALIVED]:68,[M.HAPROXY]:69,[M.POLICY_ROUTING]:Zr.POLICY_ROUTING,[M.ROUTING_TABLE]:Zr.ROUTING_TABLE},lB={1:"IPv4",2:"IPv4",3:"IPv4",4:"IPv4",5:"IPv4",61:"IPv6",62:"IPv6",63:"IPv6",64:"IPv6",65:"IPv6"},cB=yd.concat([M.FOLDER_POLICY,M.FOLDER_INTERFACES,M.FOLDER_VPN,M.OPENVPN_ROOT,M.WIREGUARD_ROOT,M.IPSEC_ROOT,M.OPENVPN_CA,M.OPENVPN_PREFIX_FOLDER,M.WIREGUARD_PREFIX_FOLDER,M.OPENVPN_CONFIG_SER,M.WIREGUARD_CONFIG_SER,M.IPSEC_CONFIG_SER]),dB=yd.concat([M.ROUTING_TABLES]),V=function(i){return i[i.NO_MENU=-1]="NO_MENU",i[i.SEPARATOR=-2]="SEPARATOR",i[i.COPY=900]="COPY",i[i.CUT=901]="CUT",i[i.PASTE=902]="PASTE",i[i.PASTE_ABOVE=903]="PASTE_ABOVE",i[i.PASTE_BELOW=904]="PASTE_BELOW",i[i.DELETE=905]="DELETE",i[i.EDIT=906]="EDIT",i[i.WHERE_USED=907]="WHERE_USED",i[i.FIND_IN_TREE=908]="FIND_IN_TREE",i[i.DELETE_FROM_GROUP=910]="DELETE_FROM_GROUP",i[i.DUPLICATE=911]="DUPLICATE",i[i.HELP=912]="HELP",i[i.FIREWALL_EDIT=1]="FIREWALL_EDIT",i[i.FIREWALL_NEW=2]="FIREWALL_NEW",i[i.FIREWALL_DELETE=3]="FIREWALL_DELETE",i[i.FIREWALL_COMPILE=4]="FIREWALL_COMPILE",i[i.FIREWALL_INSTALL=5]="FIREWALL_INSTALL",i[i.FIREWALL_COMPILE_ALL=6]="FIREWALL_COMPILE_ALL",i[i.FIREWALL_INSTALL_ALL=7]="FIREWALL_INSTALL_ALL",i[i.FIREWALL_TO_CLUSTER=8]="FIREWALL_TO_CLUSTER",i[i.FIREWALL_CLONE=9]="FIREWALL_CLONE",i[i.FIREWALL_IPTABLES_IMPORT=10]="FIREWALL_IPTABLES_IMPORT",i[i.FIREWALL_IPTABLES_EXPORT=11]="FIREWALL_IPTABLES_EXPORT",i[i.FIREWALL_IMPORT=12]="FIREWALL_IMPORT",i[i.POLICY_PANEL_SHOW=13]="POLICY_PANEL_SHOW",i[i.POLICY_PANEL_DOWNLOAD=14]="POLICY_PANEL_DOWNLOAD",i[i.NODE_EDIT=15]="NODE_EDIT",i[i.NODE_DELETE=16]="NODE_DELETE",i[i.POLICY_LOAD=17]="POLICY_LOAD",i[i.NGFW=18]="NGFW",i[i.PLUGINS=19]="PLUGINS",i[i.FOLDER_EXPAND=21]="FOLDER_EXPAND",i[i.FOLDER_COLLAPSE=22]="FOLDER_COLLAPSE",i[i.FOLDER_NEW=23]="FOLDER_NEW",i[i.FOLDER_DELETE=24]="FOLDER_DELETE",i[i.FOLDER_RENAME=25]="FOLDER_RENAME",i[i.NEW_INTERFACE=34]="NEW_INTERFACE",i[i.NEW_ADDRESS=41]="NEW_ADDRESS",i[i.NEW_GROUP=42]="NEW_GROUP",i[i.NEW_NETWORK=43]="NEW_NETWORK",i[i.NEW_IP_RANGE=44]="NEW_IP_RANGE",i[i.NEW_HOST=45]="NEW_HOST",i[i.NEW_DNS=46]="NEW_DNS",i[i.NEW_IP_SERVICE=51]="NEW_IP_SERVICE",i[i.NEW_ICMP_SERVICE=52]="NEW_ICMP_SERVICE",i[i.NEW_TCP_SERVICE=53]="NEW_TCP_SERVICE",i[i.NEW_UDP_SERVICE=54]="NEW_UDP_SERVICE",i[i.NEW_SERVICE_GROUP=55]="NEW_SERVICE_GROUP",i[i.TREE_RELOAD=61]="TREE_RELOAD",i[i.TREE_REPAIR=62]="TREE_REPAIR",i[i.CLUSTER_NEW=71]="CLUSTER_NEW",i[i.CLUSTER_EDIT=72]="CLUSTER_EDIT",i[i.CLUSTER_DELETE=73]="CLUSTER_DELETE",i[i.CLUSTER_COMPILE=74]="CLUSTER_COMPILE",i[i.CLUSTER_INSTALL=75]="CLUSTER_INSTALL",i[i.CLUSTER_COMPILE_ALL=76]="CLUSTER_COMPILE_ALL",i[i.CLUSTER_TO_FIREWALL=77]="CLUSTER_TO_FIREWALL",i[i.CLUSTER_CLONE=78]="CLUSTER_CLONE",i[i.CA_NEW=81]="CA_NEW",i[i.CA_VIEW=82]="CA_VIEW",i[i.CA_DELETE=83]="CA_DELETE",i[i.CA_EDIT=84]="CA_EDIT",i[i.CA_CRT_NEW=91]="CA_CRT_NEW",i[i.CA_CRT_VIEW=92]="CA_CRT_VIEW",i[i.CA_CRT_EDIT=97]="CA_CRT_EDIT",i[i.CA_CRT_DELETE=93]="CA_CRT_DELETE",i[i.CA_CRT_NEW_PREFIX=94]="CA_CRT_NEW_PREFIX",i[i.CA_CRT_EDIT_PREFIX=95]="CA_CRT_EDIT_PREFIX",i[i.CA_CRT_DELETE_PREFIX=96]="CA_CRT_DELETE_PREFIX",i[i.RULE_SELECT=101]="RULE_SELECT",i[i.RULE_UNSELECT=102]="RULE_UNSELECT",i[i.RULE_EDIT=103]="RULE_EDIT",i[i.RULE_ENABLE=104]="RULE_ENABLE",i[i.RULE_DISABLE=105]="RULE_DISABLE",i[i.RULE_DELETE=106]="RULE_DELETE",i[i.RULE_NEW_ABOVE=107]="RULE_NEW_ABOVE",i[i.RULE_NEW_BELOW=108]="RULE_NEW_BELOW",i[i.RULE_NEW_HS_ABOVE=10107]="RULE_NEW_HS_ABOVE",i[i.RULE_NEW_HS_BELOW=10108]="RULE_NEW_HS_BELOW",i[i.RULE_CREATE_GROUP=109]="RULE_CREATE_GROUP",i[i.RULE_REMOVE_GROUP=110]="RULE_REMOVE_GROUP",i[i.RULE_REMOVE_FROM_GROUP=111]="RULE_REMOVE_FROM_GROUP",i[i.RULE_MOVE_ABOVE=112]="RULE_MOVE_ABOVE",i[i.RULE_MOVE_BELOW=113]="RULE_MOVE_BELOW",i[i.RULE_COMPILE=114]="RULE_COMPILE",i[i.RULE_COLOR_CHANGE=120]="RULE_COLOR_CHANGE",i[i.RULE_COLOR_DEFAULT=121]="RULE_COLOR_DEFAULT",i[i.RULE_COLOR_RED=122]="RULE_COLOR_RED",i[i.RULE_COLOR_GREEN=123]="RULE_COLOR_GREEN",i[i.RULE_COLOR_BLUE=124]="RULE_COLOR_BLUE",i[i.RULE_COLOR_PURPLE=125]="RULE_COLOR_PURPLE",i[i.RULE_COLOR_TEAL=126]="RULE_COLOR_TEAL",i[i.RULE_COLOR_YELLOW=127]="RULE_COLOR_YELLOW",i[i.RULE_COLOR_ORANGE=128]="RULE_COLOR_ORANGE",i[i.RULE_COLOR_BROWN=129]="RULE_COLOR_BROWN",i[i.RULE_COLOR_CUSTOM=135]="RULE_COLOR_CUSTOM",i[i.VPN_OPTION_DELETE=141]="VPN_OPTION_DELETE",i[i.VPN_OPTION_SET_DEFAULT=142]="VPN_OPTION_SET_DEFAULT",i[i.VPN_OPTION_EMPTY=143]="VPN_OPTION_EMPTY",i[i.VPN_CONFIG_DELETE=151]="VPN_CONFIG_DELETE",i[i.VPN_CONFIG_FILE=152]="VPN_CONFIG_FILE",i[i.VPN_CONFIG_INSTALL=153]="VPN_CONFIG_INSTALL",i[i.VPN_CONFIG_SYNC_CCD=154]="VPN_CONFIG_SYNC_CCD",i[i.VPN_CONFIG_UNINSTALL=155]="VPN_CONFIG_UNINSTALL",i[i.VPN_CONFIG_NEW_PREFIX=156]="VPN_CONFIG_NEW_PREFIX",i[i.VPN_CONFIG_EDIT_PREFIX=157]="VPN_CONFIG_EDIT_PREFIX",i[i.VPN_CONFIG_DELETE_PREFIX=158]="VPN_CONFIG_DELETE_PREFIX",i[i.VPN_CONFIG_STATUS=159]="VPN_CONFIG_STATUS",i[i.VPN_CONFIG_INST_WINDOWS=160]="VPN_CONFIG_INST_WINDOWS",i[i.VPN_CONFIG_SYNC_PENDING_CCD=161]="VPN_CONFIG_SYNC_PENDING_CCD",i[i.VPN_CONFIG_BLOCK=162]="VPN_CONFIG_BLOCK",i[i.VPN_CONFIG_UNBLOCK=163]="VPN_CONFIG_UNBLOCK",i[i.VPN_CONFIG_HISTORIC=164]="VPN_CONFIG_HISTORIC",i[i.VPN_CONFIG_SYSTEMCTL=165]="VPN_CONFIG_SYSTEMCTL",i[i.MARK_NEW=170]="MARK_NEW",i[i.POSITION_NEGATE=201]="POSITION_NEGATE",i[i.POSITION_ALLOW=202]="POSITION_ALLOW",i[i.OBJECT_EDIT=301]="OBJECT_EDIT",i[i.RULE_GROUP_EDIT=401]="RULE_GROUP_EDIT",i[i.RULE_GROUP_COLOR_CHANGE=402]="RULE_GROUP_COLOR_CHANGE",i[i.COMPILE_IPTABLES=501]="COMPILE_IPTABLES",i[i.COMPILE_NFTABLES=502]="COMPILE_NFTABLES",i[i.ROUTING_TABLE_NEW=601]="ROUTING_TABLE_NEW",i[i.ROUTING_TABLE_EDIT=602]="ROUTING_TABLE_EDIT",i[i.ROUTING_TABLE_DELETE=603]="ROUTING_TABLE_DELETE",i[i.ROUTING_TABLE_NEW_ROUTE=610]="ROUTING_TABLE_NEW_ROUTE",i[i.DHCP_NEW_RULE_GROUP=615]="DHCP_NEW_RULE_GROUP",i[i.DHCP_EDIT_RULE_GROUP=616]="DHCP_EDIT_RULE_GROUP",i[i.DHCP_DELETE_RULE_GROUP=617]="DHCP_DELETE_RULE_GROUP",i[i.HAPROXY_NEW_RULE_GROUP=625]="HAPROXY_NEW_RULE_GROUP",i[i.HAPROXY_EDIT_RULE_GROUP=626]="HAPROXY_EDIT_RULE_GROUP",i[i.HAPROXY_DELETE_RULE_GROUP=627]="HAPROXY_DELETE_RULE_GROUP",i[i.SYSTEMCTL=651]="SYSTEMCTL",i[i.SYSTEMCTL_STATUS=652]="SYSTEMCTL_STATUS",i[i.SYSTEMCTL_START=653]="SYSTEMCTL_START",i[i.SYSTEMCTL_STOP=654]="SYSTEMCTL_STOP",i[i.SYSTEMCTL_RESTART=655]="SYSTEMCTL_RESTART",i[i.SYSTEMCTL_RELOAD=656]="SYSTEMCTL_RELOAD",i[i.SYSTEMCTL_ENABLE=657]="SYSTEMCTL_ENABLE",i[i.SYSTEMCTL_DISABLE=658]="SYSTEMCTL_DISABLE",i[i.SYSTEM_COMPILE=678]="SYSTEM_COMPILE",i[i.SYSTEM_INSTALL=679]="SYSTEM_INSTALL",i[i.SYSTEM_SHOW_CONFIG=680]="SYSTEM_SHOW_CONFIG",i[i.SYSTEM_DOWNLOAD_CONFIG=681]="SYSTEM_DOWNLOAD_CONFIG",i[i.AI_ASSISTANT=690]="AI_ASSISTANT",i}(V||{}),pB=["#ef9a9a","#F48FB1","#CE93D8","#B39DDB","#9FA8DA","#90CAF9","#81D4FA","#80DEEA","#80CBC4","#A5D6A7","#C5E1A5","#E6EE9C","#FFF59D","#FFE082","#FFCC80","#FFAB91"],r_t={[V.RULE_COLOR_DEFAULT]:"",[V.RULE_COLOR_RED]:"5px solid #ef9a9a",[V.RULE_COLOR_PURPLE]:"5px solid #CE93D8",[V.RULE_COLOR_BLUE]:"5px solid #90CAF9",[V.RULE_COLOR_TEAL]:"5px solid #80CBC4",[V.RULE_COLOR_GREEN]:"5px solid #A5D6A7",[V.RULE_COLOR_YELLOW]:"5px solid #FFF59D",[V.RULE_COLOR_ORANGE]:"5px solid #FFCC80",999:"5px solid #ff0000"},dv={[V.RULE_COLOR_DEFAULT]:"",[V.RULE_COLOR_RED]:"#ef9a9a",[V.RULE_COLOR_PURPLE]:"#CE93D8",[V.RULE_COLOR_BLUE]:"#90CAF9",[V.RULE_COLOR_TEAL]:"#80CBC4",[V.RULE_COLOR_GREEN]:"#A5D6A7",[V.RULE_COLOR_YELLOW]:"#FFF59D",[V.RULE_COLOR_ORANGE]:"#FFCC80",999:"#ef9a9a",1e3:"#cbcbcb"};var Or=function(i){return i[i.COPY=1]="COPY",i[i.CUT=2]="CUT",i[i.DELETE=3]="DELETE",i}(Or||{});var mi=function(i){return i[i.NEW_ITEM=1]="NEW_ITEM",i[i.MODIFY_ITEM=2]="MODIFY_ITEM",i[i.DELETE_ITEM=3]="DELETE_ITEM",i[i.RELOAD_TREE=10]="RELOAD_TREE",i[i.NEW_GROUP_ITEM=11]="NEW_GROUP_ITEM",i[i.DELETE_GROUP_ITEM=12]="DELETE_GROUP_ITEM",i}(mi||{}),qe=function(i){return i.C_FIREWALLS="firewalls",i.C_CLUSTERS="clusters",i.C_OBJECTS="objects",i.C_SERVICES="services",i.C_CA="ca",i.C_FIREWALLS_CONDENSED="fw_condensed",i}(qe||{}),Xt=function(i){return i[i.FW_DISABLED=0]="FW_DISABLED",i[i.FW_PENDING=1]="FW_PENDING",i[i.FW_PROCESSING=2]="FW_PROCESSING",i[i.FW_OK=3]="FW_OK",i[i.FW_ERROR=4]="FW_ERROR",i[i.FW_WARNING=5]="FW_WARNING",i}(Xt||{}),ao=function(i){return i[i.COMP_CLOUD=0]="COMP_CLOUD",i[i.COMP_CLUSTER=1]="COMP_CLUSTER",i[i.COMP_FIREWALL=2]="COMP_FIREWALL",i[i.COMP_CLUSTERS_ALL=3]="COMP_CLUSTERS_ALL",i[i.COMP_FIREWALLS_ALL=4]="COMP_FIREWALLS_ALL",i[i.COMP_COMPILE=0]="COMP_COMPILE",i[i.COMP_INSTALL=1]="COMP_INSTALL",i}(ao||{}),Cc={[Xt.FW_DISABLED]:"",[Xt.FW_PENDING]:"fa fa-lg fa-pause-circle fwcBlue",[Xt.FW_PROCESSING]:"fa fa-lg fa-cog fa-spin fwcBlue",[Xt.FW_OK]:"fa fa-lg fa-check-circle fwcBlue",[Xt.FW_ERROR]:"fa fa-lg fa-exclamation-circle fwcOrange",[Xt.FW_WARNING]:"fa fa-lg fa-times-circle fwcOrange"},o_t=[{id:0,name:"IPTables"},{id:1,name:"NFTables"}],Ne=function(i){return i.MSG_START="start",i.MSG_END="end",i.MSG_START_TASK="start_task",i.MSG_END_TASK="end_task",i.MSG_INFO="info",i.MSG_ERROR="error",i.MSG_WARNING="warning",i.MSG_OK="success",i.MSG_NOTICE="notice",i.MSG_SSH_CMD_OUTPUT="ssh_cmd_output",i.MSG_HEARTBEAT="heartbeat",i.MSG_SEPARATOR="separator",i}(Ne||{});var rn=function(i){return i.API_COOKIE="FWCloud.net-cookie",i.LS_TOKEN="FWCloud.net-token",i.LS_CUSTOMER_ID="FWCloud.net-customer_id",i.LS_USER_ID="FWCloud.net-user_id",i.LS_USER_NAME="FWCloud.net-user_name",i.LS_USER_ROLE="FWCloud.net-user_role",i.LS_CLOUD_ID="FWCloud.net-cloud_id",i.LS_CLOUD_NAME="FWCloud.net-cloud_name",i.LS_LANGUAGE="FWCloud.net-language",i.LS_PUBLIC_KEY="FWCloud.net-public_key",i.LS_PRIVATE_KEY="FWCloud.net-private_key",i.LS_RELOAD_APP="FWCloud.net-force_app_reload",i.LS_UI_THEME="FWCloud.net-UI-theme",i}(rn||{}),sme=function(i){return i[i.days=1]="days",i[i.years=2]="years",i}(sme||{}),pm=function(i){return i[i.client=1]="client",i[i.server=2]="server",i}(pm||{}),pe=function(i){return i[i.ccd=0]="ccd",i[i.ovp=1]="ovp",i[i.wg_server_interface=2]="wg_server_interface",i[i.wg_server_peer=3]="wg_server_peer",i[i.wg_client_interface=4]="wg_client_interface",i[i.wg_client_peer=5]="wg_client_peer",i[i.ipsec_server=6]="ipsec_server",i[i.ipsec_client=7]="ipsec_client",i[i.ipsec_server_client=8]="ipsec_server_client",i}(pe||{}),zo=function(i){return i.O_SERVER="server",i.O_CLIENT="ifconfig-push",i}(zo||{}),_2=[{label:"AES-128-CBC",value:"AES-128-CBC"},{label:"AES-128-CFB",value:"AES-128-CFB"},{label:"AES-128-CFB1",value:"AES-128-CFB1"},{label:"AES-128-CFB8",value:"AES-128-CFB8"},{label:"AES-128-GCM",value:"AES-128-GCM"},{label:"AES-128-OFB",value:"AES-128-OFB"},{label:"AES-192-CBC",value:"AES-192-CBC"},{label:"AES-192-CFB",value:"AES-192-CFB"},{label:"AES-192-CFB1",value:"AES-192-CFB1"},{label:"AES-192-CFB8",value:"AES-192-CFB8"},{label:"AES-192-GCM",value:"AES-192-GCM"},{label:"AES-192-OFB",value:"AES-192-OFB"},{label:"AES-256-CBC",value:"AES-256-CBC"},{label:"AES-256-CFB",value:"AES-256-CFB"},{label:"AES-256-CFB1",value:"AES-256-CFB1"},{label:"AES-256-CFB8",value:"AES-256-CFB8"},{label:"AES-256-GCM",value:"AES-256-GCM"},{label:"AES-256-OFB",value:"AES-256-OFB"},{label:"ARIA-128-CBC",value:"ARIA-128-CBC"},{label:"ARIA-128-CFB",value:"ARIA-128-CFB"},{label:"ARIA-128-CFB1",value:"ARIA-128-CFB1"},{label:"ARIA-128-CFB8",value:"ARIA-128-CFB8"},{label:"ARIA-128-GCM",value:"ARIA-128-GCM"},{label:"ARIA-128-OFB",value:"ARIA-128-OFB"},{label:"ARIA-192-CBC",value:"ARIA-192-CBC"},{label:"ARIA-192-CFB",value:"ARIA-192-CFB"},{label:"ARIA-192-CFB1",value:"ARIA-192-CFB1"},{label:"ARIA-192-CFB8",value:"ARIA-192-CFB8"},{label:"ARIA-192-GCM",value:"ARIA-192-GCM"},{label:"ARIA-192-OFB",value:"ARIA-192-OFB"},{label:"ARIA-256-CBC",value:"ARIA-256-CBC"},{label:"ARIA-256-CFB",value:"ARIA-256-CFB"},{label:"ARIA-256-CFB1",value:"ARIA-256-CFB1"},{label:"ARIA-256-CFB8",value:"ARIA-256-CFB8"},{label:"ARIA-256-GCM",value:"ARIA-256-GCM"},{label:"ARIA-256-OFB",value:"ARIA-256-OFB"},{label:"CAMELLIA-128-CBC",value:"CAMELLIA-128-CBC"},{label:"CAMELLIA-128-CFB",value:"CAMELLIA-128-CFB"},{label:"CAMELLIA-128-CFB1",value:"CAMELLIA-128-CFB1"},{label:"CAMELLIA-128-CFB8",value:"CAMELLIA-128-CFB8"},{label:"CAMELLIA-128-OFB",value:"CAMELLIA-128-OFB"},{label:"CAMELLIA-192-CBC",value:"CAMELLIA-192-CBC"},{label:"CAMELLIA-192-CFB",value:"CAMELLIA-192-CFB"},{label:"CAMELLIA-192-CFB1",value:"CAMELLIA-192-CFB1"},{label:"CAMELLIA-192-CFB8",value:"CAMELLIA-192-CFB8"},{label:"CAMELLIA-192-OFB",value:"CAMELLIA-192-OFB"},{label:"CAMELLIA-256-CBC",value:"CAMELLIA-256-CBC"},{label:"CAMELLIA-256-CFB",value:"CAMELLIA-256-CFB"},{label:"CAMELLIA-256-CFB1",value:"CAMELLIA-256-CFB1"},{label:"CAMELLIA-256-CFB8",value:"CAMELLIA-256-CFB8"},{label:"CAMELLIA-256-OFB",value:"CAMELLIA-256-OFB"},{label:"CHACHA20-POLY1305",value:"CHACHA20-POLY1305"},{label:"SM4-CBC",value:"SM4-CBC"},{label:"SM4-CFB",value:"SM4-CFB"},{label:"SM4-OFB",value:"SM4-OFB"},{label:"DES-EDE-CBC",value:"DES-EDE-CBC"},{label:"DES-EDE-CFB",value:"DES-EDE-CFB"},{label:"DES-EDE-OFB",value:"DES-EDE-OFB"},{label:"DES-EDE3-CBC",value:"DES-EDE3-CBC"},{label:"DES-EDE3-CFB",value:"DES-EDE3-CFB"},{label:"DES-EDE3-CFB1",value:"DES-EDE3-CFB1"},{label:"DES-EDE3-CFB8",value:"DES-EDE3-CFB8"},{label:"DES-EDE3-OFB",value:"DES-EDE3-OFB"}],C2=[{label:"yes",value:"yes"},{label:"no",value:"no"},{label:"adaptive",value:"adaptive"}],uB=["client","server","nobind","comp-lzo","ccd-exclusive","persist-key","persist-tun","daemon","duplicate-cn","ifconfig-pool-linear","comp-noadapt","multihome","fast-io"],I2=["remote","route","push","iroute","remote-cert-tls","tls-auth","tls-crypt"],pv=[{name:"server",arg:"",scope:pe.ovp,required:!0,readonly:!0,emptyMessageKey:"VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.HINT"},{name:"port",arg:"1194",scope:pe.ovp},{name:"proto",arg:"udp",scope:pe.ovp},{name:"dev",arg:"tun0",scope:pe.ovp},{name:"topology",arg:"subnet",scope:pe.ovp},{name:"ifconfig-pool-persist",arg:"/etc/openvpn/ipp.txt",scope:pe.ovp},{name:"ccd-exclusive",arg:"",scope:pe.ovp},{name:"client-config-dir",arg:"/etc/openvpn/ccd",scope:pe.ovp},{name:"keepalive",arg:"10 120",scope:pe.ovp},{name:"cipher",arg:"AES-128-GCM",scope:pe.ovp},{name:"data-ciphers",arg:"AES-128-GCM:CHACHA20-POLY1305",scope:pe.ovp},{name:"user",arg:"nobody",scope:pe.ovp},{name:"group",arg:"nogroup",scope:pe.ovp},{name:"persist-key",arg:"",scope:pe.ovp},{name:"persist-tun",arg:"",scope:pe.ovp},{name:"status",arg:"/etc/openvpn/openvpn-status.log",scope:pe.ovp},{name:"verb",arg:"3",scope:pe.ovp},{name:"multihome",arg:"",scope:pe.ovp},{name:"fast-io",arg:"",scope:pe.ovp}],hB=[{name:"remote",arg:"",scope:pe.ovp,required:!0,readonly:!0,emptyMessageKey:"VPN.CONFIG.ERRORS.REMOTEOPTION_ERROR.HINT"},{name:"client",arg:"",scope:pe.ovp},{name:"dev",arg:"tun",scope:pe.ovp},{name:"proto",arg:"udp",scope:pe.ovp},{name:"resolv-retry",arg:"infinite",scope:pe.ovp},{name:"nobind",arg:"",scope:pe.ovp},{name:"user",arg:"nobody",scope:pe.ovp},{name:"group",arg:"nogroup",scope:pe.ovp},{name:"persist-key",arg:"",scope:pe.ovp},{name:"persist-tun",arg:"",scope:pe.ovp},{name:"cipher",arg:"AES-128-GCM",scope:pe.ovp},{name:"auth-nocache",arg:"",scope:pe.ovp},{name:"tls-client",arg:"",scope:pe.ovp},{name:"verb",arg:"3",scope:pe.ovp},{name:"float",arg:"",scope:pe.ovp},{name:"remote-cert-tls",arg:"server",scope:pe.ovp}],fB=[{name:"ifconfig-push",arg:"",scope:pe.ccd,required:!0,readonly:!0}],mB=["push","push-reset","iroute","iroute-ipv6","ifconfig-push","ifconfig-ipv6-push","disable","config","max-routes-per-client","comp-lzo"],y2=["askpass","auth-gen-token","auth-nocache","auth-retry","auth-user-pass-verify","auth-user-pass","auth","bcast-buffers","block-outside-dns","ca","ccd-exclusive","cd","cert","chroot","cipher","client-cert-not-required","client-config-dir","client-connect","client-disconnect","client-to-client","client","comp-noadapt","config","connect-freq","comp-lzo","compress","connect-retry","crl-verify","cryptoapicert","daemon","data-ciphers","data-ciphers-fallback","dev-node","dev-type","dev","dh","dhcp-option","dhcp-release","disable-occ","dhcp-renew","disable-occ","disable","down-pre","down","duplicate-cn","echo","engine","explicit-exit-notify","fast-io","float","fragment","group","hand-window","hash-size","http-proxy-option","http-proxy-retry","http-proxy-timeout","http-proxy server","ifconfig-noexec","ifconfig-nowarn","ifconfig-pool-linear","ifconfig-pool-persist","ifconfig-pool","ifconfig-push","ifconfig","inactive","inetd","ip-win32 method","ipchange","iroute","keepalive","key-method","key","keysizen","learn-address","link-mtu","local","log-append","log","suppress-timestamps","lport","management-hold","management-log-cache","management-query-passwords","management","max-clients","max-routes-per-client","mktun","mlock","mode","mssfix","mtu-disc","mtu-test","multihome","mute-replay-warnings","mute","nice","no-iv","no-replay","nobind","ns-cert-type","passtos","pause-exit","persist-key","persist-local-ip","persist-remote-ip","persist-tun","ping-exit","ping-restart","ping-timer-rem","ping","pkcs12","plugin","port","proto","pull","push-reset","push","rcvbuf","redirect-gateway","remap-usr1","remote-cert-tls","remote-random","reneg-bytes","reneg-pkts","reneg-sec","replay-persist","replay-window","resolv-retry","rmtun","route-delay","route-gateway","route-method","route-noexec","route-up","route","rport","script-security","secret","server-bridge","server","service","setenv","shaper","show-adapters","show-ciphers","show-digests","show-engines","show-net-up","show-net","show-tls","show-valid-subnets","single-session","sndbuf","socks-proxy-retry","socks-proxy","status","status-version","syslog","tap-sleep","tcp-queue-limit","test-crypto","tls-auth","tls-cipher","tls-ciphersuites","tls-client","tls-crypt","tls-crypt-v2","tls-exit","tls-remote","tls-server","tls-timeout","tls-verify","tls-version-min","tls-version-max","tmp-dir","tran-window ","tun-ipv6","tun-mtu-extra","tun-mtu","txqueuelen","up-delay","up-restart","up","user","username-as-common-name ","verb","writepid"],Ic=function(i){return i.O_ADDRESS="Address",i.O_ALLOWED_IPS="AllowedIPs",i.O_VPN_NETWORK="<<vpn_network>>",i}(Ic||{}),w2=function(i){return i.O_ADDRESS="Address",i.O_ALLOWED_IPS="AllowedIPs",i.O_ENDPOINT="Endpoint",i.O_LISTENPORT="ListenPort",i.O_PRIVATE_KEY="PrivateKey",i.O_PUBLIC_KEY="PublicKey",i}(w2||{}),v2=function(i){return i.O_ADDRESS="Address",i.O_PRIVATE_KEY="PrivateKey",i.O_PUBLIC_KEY="PublicKey",i.O_ENDPOINT="Endpoint",i}(v2||{});var uv=[{name:"PrivateKey",arg:"",scope:pe.wg_server_interface},{name:"Address",arg:"",scope:pe.wg_server_interface,emptyMessageKey:"VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.HINT"},{name:"ListenPort",arg:"51820",scope:pe.wg_server_interface}],gB=[{name:"Address",arg:"",scope:pe.wg_server_interface,emptyMessageKey:"VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.HINT"},{name:"ListenPort",arg:"51820",scope:pe.wg_server_interface},{name:"DNS",arg:"",scope:pe.wg_server_interface},{name:"MTU",arg:"",scope:pe.wg_server_interface},{name:"Table",arg:"",scope:pe.wg_server_interface},{name:"PreUp",arg:"",scope:pe.wg_server_interface},{name:"PostUp",arg:"",scope:pe.wg_server_interface},{name:"PreDown",arg:"",scope:pe.wg_server_interface},{name:"PostDown",arg:"",scope:pe.wg_server_interface},{name:"SaveConfig",arg:"",scope:pe.wg_server_interface},{name:"FwMark",arg:"",scope:pe.wg_server_interface}],_B=[{name:"PublicKey",arg:"",scope:pe.wg_server_peer},{name:"AllowedIPs",arg:"",scope:pe.wg_server_peer}],CB=[{name:"AllowedIPs",arg:"",scope:pe.wg_server_peer},{name:"Endpoint",arg:"",scope:pe.wg_server_peer},{name:"PersistentKeepalive",arg:"",scope:pe.wg_server_peer},{name:"PresharedKey",arg:"",scope:pe.wg_server_peer}],hv=[{name:"PrivateKey",arg:"",scope:pe.wg_client_interface},{name:"Address",arg:"",scope:pe.wg_client_interface}],IB=[{name:"Address",arg:"",scope:pe.wg_client_interface},{name:"DNS",arg:"",scope:pe.wg_client_interface}],fv=[{name:"PublicKey",arg:"",scope:pe.wg_client_peer},{name:"Endpoint",arg:"",scope:pe.wg_client_peer,emptyMessageKey:"VPN.CONFIG.ERRORS.ENDPOINT_ERROR.HINT"},{name:"AllowedIPs",arg:"",scope:pe.wg_client_peer}],yB=[{name:"AllowedIPs",arg:"",scope:pe.wg_client_peer},{name:"Endpoint",arg:"",scope:pe.wg_client_peer,emptyMessageKey:"VPN.CONFIG.ERRORS.ENDPOINT_ERROR.HINT"},{name:"PersistentKeepalive",arg:"",scope:pe.wg_client_peer},{name:"PresharedKey",arg:"",scope:pe.wg_client_peer}],Dp=class i{static address(n){return/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}(,\s*(\d{1,3}\.){3}\d{1,3}\/\d{1,2})*$/.test(n.value)?null:{invalidAddress:{value:n.value}}}static dns(n){return/^((\d{1,3}\.){3}\d{1,3}|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](\.[a-zA-Z]{2,})+)(,\s*((\d{1,3}\.){3}\d{1,3}|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](\.[a-zA-Z]{2,})+))*$/.test(n.value)?null:{invalidDNS:{value:n.value}}}static listenPort(n){return/^([1-9]\d{0,3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(n.value)?null:{invalidListenPort:{value:n.value}}}static mtu(n){let e=parseInt(n.value,10);return/^\d+$/.test(n.value)&&e>=576&&e<=65535?null:{invalidMTU:{value:n.value}}}static table(n){let e=n.value;if(e==="off"||e==="auto")return null;let t=typeof e=="string"&&/^[0-9]+$/.test(e),r=typeof e=="number"&&Number.isInteger(e)&&e>=0;return t||r?null:{invalidTable:{value:e}}}static allowedIPs(n){let e=n.value;if(!e||typeof e!="string")return null;let t=new RegExp(Pt.ipV4Regexp),r=Pt.netmaskCIDRRegexp,o=e.split(",").map(s=>s.trim());for(let s of o){let[a,l]=s.split("/").map(h=>h.trim());if(!a||!l)return{invalidAllowedIPs:{value:e,invalidIp:s}};let c=t.test(a),d=r.test("/"+l)&&parseInt(l,10)>=0&&parseInt(l,10)<=32;if(!c||!d)return{invalidAllowedIPs:{value:e,invalidIp:s}}}return null}static endpoint(n){return/^((\d{1,3}\.){3}\d{1,3}|[a-zA-Z0-9.-]+):(\d{1,5})$/.test(n.value)?null:{invalidEndpoint:{value:n.value}}}static persistentKeepalive(n){return/^\d+$/.test(n.value)&&parseInt(n.value)<=65535?null:{invalidPersistentKeepalive:{value:n.value}}}static presharedKey(n){return/^[A-Za-z0-9+/]{43}=$/.test(n.value)?null:{invalidPresharedKey:{value:n.value}}}static command(n){return n.value&&n.value.length>0?null:{invalidCommand:{value:n.value}}}static wireGuardOptionValidator(n){return e=>{switch(n){case"Address":return i.address(e);case"DNS":return i.dns(e);case"ListenPort":return i.listenPort(e);case"MTU":return i.mtu(e);case"Table":return i.table(e);case"AllowedIPs":return i.allowedIPs(e);case"Endpoint":return i.endpoint(e);case"PersistentKeepalive":return i.persistentKeepalive(e);case"PresharedKey":return i.presharedKey(e);case"PreUp":case"PostUp":case"PreDown":case"PostDown":return i.command(e);default:return null}}}},Gs=function(i){return i.O_LEFT="left",i.O_RIGHT="right",i.O_LEFTSUBNET="leftsubnet",i.O_RIGHTSUBNET="rightsubnet",i.O_LEFTSOURCEIP="leftsourceip",i}(Gs||{}),mv=function(i){return i.O_kEYEXCHANGE="keyexchange",i.O_IKE="ike",i.O_ESP="esp",i.O_AUTO="auto",i.O_LEFT="left",i.O_LEFTID="leftid",i.O_LEFTCERT="leftcert",i}(mv||{}),gv=function(i){return i.O_KEYEXCHANGE="keyexchange",i.O_IKE="ike",i.O_ESP="esp",i.O_AUTO="auto",i.O_RIGHT="right",i.O_RIGHTID="rightid",i.O_LEFT="left",i.O_LEFTID="leftid",i.O_LEFTCERT="leftcert",i.O_LEFTSOURCEIP="leftsourceip",i}(gv||{});var _v=[{name:"keyexchange",arg:"ikev2",scope:pe.ipsec_server},{name:"ike",arg:"aes256-sha256-modp2048!",scope:pe.ipsec_server},{name:"esp",arg:"aes256-sha256!",scope:pe.ipsec_server},{name:"dpdaction",arg:"clear",scope:pe.ipsec_server},{name:"dpddelay",arg:"300s",scope:pe.ipsec_server},{name:"rekey",arg:"no",scope:pe.ipsec_server},{name:"left",arg:"%any",scope:pe.ipsec_server},{name:"leftid",arg:"CN=",scope:pe.ipsec_server},{name:"leftcert",arg:"",scope:pe.ipsec_server},{name:"leftsubnet",arg:"",scope:pe.ipsec_server,emptyMessageKey:"VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.HINT"},{name:"leftfirewall",arg:"yes",scope:pe.ipsec_server},{name:"rightauth",arg:"pubkey",scope:pe.ipsec_server,emptyMessageKey:"VPN.CONFIG.ERRORS.RIGHT_ERROR.HINT"},{name:"auto",arg:"ignore",scope:pe.ipsec_server},{name:"charondebug",arg:"ike 1, knl 1, cfg 0",scope:pe.ipsec_server}],wB=[{name:"keyexchange",arg:"ikev2",scope:pe.ipsec_server},{name:"ike",arg:"aes256-sha256-modp2048!",scope:pe.ipsec_server},{name:"esp",arg:"aes256-sha256!",scope:pe.ipsec_server},{name:"dpdaction",arg:"clear",scope:pe.ipsec_server},{name:"dpddelay",arg:"300s",scope:pe.ipsec_server},{name:"rekey",arg:"no",scope:pe.ipsec_server},{name:"left",arg:"%any",scope:pe.ipsec_server},{name:"leftid",arg:"CN=",scope:pe.ipsec_server},{name:"leftcert",arg:"",scope:pe.ipsec_server},{name:"leftsubnet",arg:"",scope:pe.ipsec_server,emptyMessageKey:"VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.HINT"},{name:"leftfirewall",arg:"yes",scope:pe.ipsec_server},{name:"right",arg:"",scope:pe.ipsec_server,emptyMessageKey:"VPN.CONFIG.ERRORS.RIGHT_ERROR.HINT"},{name:"rightauth",arg:"pubkey",scope:pe.ipsec_server},{name:"rightsubnet",arg:"",scope:pe.ipsec_server},{name:"auto",arg:"ignore",scope:pe.ipsec_server},{name:"charondebug",arg:"ike 1, knl 1, cfg 0",scope:pe.ipsec_server}],vB=[{name:"rightid",arg:"CN=",scope:pe.ipsec_client},{name:"rightcert",arg:"",scope:pe.ipsec_client},{name:"rightsourceip",arg:"",scope:pe.ipsec_client},{name:"auto",arg:"add",scope:pe.ipsec_client}],bB=[{name:"rightid",arg:"CN=",scope:pe.ipsec_client},{name:"rightcert",arg:"",scope:pe.ipsec_client},{name:"rightsourceip",arg:"",scope:pe.ipsec_client},{name:"rightsubnet",arg:"",scope:pe.ipsec_client},{name:"auto",arg:"add",scope:pe.ipsec_client},{name:"also",arg:"server_only",scope:pe.ipsec_client}],Cv=[{name:"keyexchange",arg:"ikev2",scope:pe.ipsec_client},{name:"ike",arg:"aes256-sha256-modp2048!",scope:pe.ipsec_client},{name:"esp",arg:"aes256-sha256!",scope:pe.ipsec_client},{name:"left",arg:"%defaultroute",scope:pe.ipsec_client},{name:"leftid",arg:"CN=",scope:pe.ipsec_client},{name:"leftcert",arg:"",scope:pe.ipsec_client},{name:"leftauth",arg:"pubkey",scope:pe.ipsec_client},{name:"leftsourceip",arg:"%config",scope:pe.ipsec_client},{name:"right",arg:"",scope:pe.ipsec_client,emptyMessageKey:"VPN.CONFIG.ERRORS.RIGHT_ERROR.HINT"},{name:"rightid",arg:"CN=",scope:pe.ipsec_client},{name:"rightauth",arg:"pubkey",scope:pe.ipsec_client},{name:"rightsubnet",arg:"",scope:pe.ipsec_client},{name:"charondebug",arg:"ike 1, cfg 0",scope:pe.ipsec_client},{name:"auto",arg:"start",scope:pe.ipsec_client}],Fp=class i{static ipAddress(n){if(!n.value)return null;let e=n.value.trim();if(e==="%any")return null;let t=/^(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)){3}$/,r=/^[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z]{2,}$/;return t.test(e)||r.test(e)?null:{invalidIPAddress:{value:n.value}}}static dns(n){return n.value?/^((\d{1,3}\.){3}\d{1,3}|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](\.[a-zA-Z]{2,})+)(,\s*((\d{1,3}\.){3}\d{1,3}|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](\.[a-zA-Z]{2,})+))*$/.test(n.value)?null:{invalidDNS:{value:n.value}}:null}static endpoint(n){if(!n.value)return null;let e=n.value.trim();return e==="%any"||e==="%defaultroute"||i.ipAddress({value:e})===null||i.dns({value:e})===null?null:{invalidEndpoint:{value:n.value}}}static id(n){return n.value?/^"@[\w\.-]+\.\w{2,}"$/.test(n.value)||/^"([a-zA-Z]+=[^,]+,?\s*)+"$/.test(n.value)?null:{invalidID:{value:n.value}}:null}static proposal(n){return n.value?/^([a-z0-9]+-){1,2}[a-z0-9]+(!)?$/.test(n.value)?null:{invalidProposal:{value:n.value}}:null}static keyExchange(n){return["ikev1","ikev2"].includes(n.value)?null:{invalidKeyExchange:{value:n.value}}}static dpdAction(n){return["clear","hold","restart","restart-by-peer","none"].includes(n.value)?null:{invalidDPDAction:{value:n.value}}}static duration(n){return/^\d+(s|m)$/.test(n.value)?null:{invalidDuration:{value:n.value}}}static booleanOption(n){return["true","false"].includes(n.value)?null:{invalidBoolean:{value:n.value}}}static autoOption(n){return["add","start","route","ignore"].includes(n.value)?null:{invalidAutoOption:{value:n.value}}}static certFile(n){return/^[\w.\-]+\.(crt|pem)$/.test(n.value)?null:{invalidCertFile:{value:n.value}}}static psk(n){return n.value?.length>=8?null:{invalidPSK:{value:n.value}}}static subnet(n){let e=/^((25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d{2}|[1-9]?\d)){3})\/([0-9]|[1-2][0-9]|3[0-2])$/;return(n.value||"").trim().split(",").map(s=>s.trim()).every(s=>e.test(s))?null:{invalidSubnet:{value:n.value}}}static sourceIP(n){let e=n.value;return e==="%config"?null:(e=typeof e=="string"?e.trim():e,i.ipAddress({value:e})===null?null:{invalidSourceIP:{value:n.value}})}static authMethod(n){let e=n.value?.toString().trim().toLowerCase();return e?["pubkey","psk","eap"].includes(e)?null:{invalidAuthMethod:{value:n.value}}:null}static charonDebug(n){return/^([a-z]{3,5} \d)(,\s*[a-z]{3,5} \d)*$/.test(n.value)?null:{invalidCharonDebug:{value:n.value}}}static yesNoOption(n){let e=n.value?.toString().trim().toLowerCase();return e?["yes","no","true","false"].includes(e)?null:{invalidYesNo:{value:n.value}}:null}static IPSecOptionValidator(n){return e=>{switch(n){case"left":case"right":return i.endpoint(e);case"leftid":case"rightid":return i.id(e);case"leftcert":case"rightcert":return i.certFile(e);case"leftsubnet":case"rightsubnet":return i.subnet(e);case"leftsourceip":case"rightsourceip":return i.sourceIP(e);case"leftauth":case"rightauth":return i.authMethod(e);case"ike":case"esp":return i.proposal(e);case"keyexchange":return i.keyExchange(e);case"dpdaction":return i.dpdAction(e);case"dpddelay":return i.duration(e);case"leftfirewall":case"rekey":return i.yesNoOption(e);case"charondebug":return i.charonDebug(e);case"auto":return i.autoOption(e);case"PSK":return i.psk(e);default:return null}}}},hh=function(i){return i[i.HINT_NO_FWCLOUDS=101]="HINT_NO_FWCLOUDS",i[i.HINT_NO_FW=102]="HINT_NO_FW",i[i.HINT_CA_CREATING=201]="HINT_CA_CREATING",i}(hh||{}),Pt={netmaskRegexp:/^(((255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.)(255|254|252|248|240|224|192|128|0+)(\.0+){2})|((255|254|252|248|240|224|192|128|0+)(\.0+){3}))$/,netmaskCIDRRegexp:/^\/([0-9]|[1-9][0-9]|1[01][0-9]|12[0-8])$/,netmaskFullRegexp:/^(^(255\.){3}(255|254|252|248|240|224|192|128|0+))|((255\.){2}(255|254|252|248|240|224|192|128|0+)\.0)|((255\.){1}(255|254|252|248|240|224|192|128|0+)\.0{2})|((255|254|252|248|240|224|192|128|0+)\.0{3})$|^\/([0-9]|[1-9][0-9]|1[01][0-9]|12[0-8])$/,ipV4Regexp:"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",ipV6Regexp:"(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))",macRegexp:"^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$",fqdnRegexp:"^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$",nameRegExp:"^[ -~\\x80-\\xFE]{1,64}$",posixPathRegexp:"^\\/{1}(((\\/{1}\\.{1})?[a-zA-Z0-9 ]+\\/?)+(\\.{1}[a-zA-Z0-9]{2,4})?)$",posixFilenameRegexp:"^[a-zA-Z0-9\\-_\\.]{4,64}$",wireGuardInstallName:"^.+\\.conf$",IPSecInstallName:"^.+\\.conf$",linuxUsername:"^[a-zA-Z_]([a-zA-Z0-9_-]{0,31}|[a-zA-Z0-9_-]{0,30}$)$",linuxPassword:"^[ -~\\x80-\\xFE]{2,64}$",webAddressRegexp:"^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$",passwordRegexp:"^[ -~\\x80-\\xFE]{6,64}$",portRegexp:"^\\d{1,5}$",cnRegExp:"^[a-zA-Z0-9-_.]{1,64}$",connNameRegExp:"^[a-zA-Z0-9-_.]{1,64}$",ipAddressValidator:function(i){let n=i.value||"",e=!1,t;this.formModel.controls.ip_version&&(t=this.formModel.controls.ip_version.value);try{t===6?ka.IPv6.isValid(n)&&(e=!0):ka.IPv4.isValid(n)&&new RegExp(Pt.ipV4Regexp).test(n)&&(e=!0)}catch{e=!1}return e?null:{ip:!0}},networkAddressValidator:function(i){let n=i.value||"",e=this.formModel?.controls.ip_version?.value,t=this.formModel?.controls.netmask?.value;if(!n||!t||e==null)return null;try{if(e===6){if(!ka.IPv6.isValid(n))return{ip:!0};let d=t.startsWith("/")?t.slice(1):t,h=`${n}/${d}`;if(!ka.IPv6.isValidCIDR(h))return{ip:!0};let[_,C]=ka.IPv6.parseCIDR(h),I=ka.IPv6.networkAddressFromCIDR(h);return _.toNormalizedString()===I.toNormalizedString()?null:{networkAddress:{network:`${I.toString()}/${C}`}}}if(!new RegExp(Pt.ipV4Regexp).test(n))return{ip:!0};let o;if(t.startsWith("/"))o=`${n}${t}`;else{let _=ka.IPv4.parse(t).octets.map(C=>C.toString(2).padStart(8,"0")).join("").indexOf("0");o=`${n}/${_>=0?_:32}`}if(!ka.IPv4.isValidCIDR(o))return{ip:!0};let[s,a]=ka.IPv4.parseCIDR(o),l=ka.IPv4.networkAddressFromCIDR(o);return s.toString()===l.toString()?null:{networkAddress:{network:`${l.toString()}/${a}`}}}catch{return null}},netmaskValidator:function(i){let n=i.value||"",e,t;if(this.formModel.controls.ip_version&&(t=this.formModel.controls.ip_version.value),t==4&&n.match(Pt.netmaskRegexp))e=!0;else{let o=new RegExp(Pt.netmaskCIDRRegexp).exec(n);if(o){let s,a;s=+o[1],t==4?a=32:t==6&&(a=128),e=s>=0&&s<=a}}return e?null:{netmask:!0}},distinctNameValidator(i){let n=1,e,t;if(this.formModel)for(let r=0;r<i.length&&n<=2;r++){e=i.at(r).get("name").value;for(let o=r+1;o<i.length;o++)t=i.at(o).get("name").value,e==t&&n++}return n<=1?null:{distinctnames:!0}}},fh=function(i){return i[i.ROLE_ADMINISTRATOR=1]="ROLE_ADMINISTRATOR",i[i.ROLE_MANAGER=2]="ROLE_MANAGER",i}(fh||{}),ll=function(i){return i.BACKUP_INTERVAL_TIME="BACKUP_INTERVAL_TIME",i.BACKUP_FIXED_TIME="BACKUP_FIXED_TIME",i.BACKUP_MAX_COPIES="BACKUP_MAX_COPIES",i.BACKUP_MAX_DAYS="BACKUP_MAX_DAYS",i}(ll||{}),Zs=function(i){return i[i.CREATE=1]="CREATE",i[i.UPDATE=2]="UPDATE",i[i.UPDATE_SPECIAL=3]="UPDATE_SPECIAL",i[i.NO_OP=9]="NO_OP",i}(Zs||{}),SB={[Zs.CREATE]:{icon:"fa fa-file",displayClass:"pillInfoBadge",translateKey:"ITEM_BATCH.OPS_TYPES.0"},[Zs.UPDATE]:{icon:"fa fa-pencil",displayClass:"pillWarnBadge",translateKey:"ITEM_BATCH.OPS_TYPES.1"},[Zs.UPDATE_SPECIAL]:{icon:"fa fa-pencil",displayClass:"pillInfoBadge",translateKey:"ITEM_BATCH.OPS_TYPES.3"},[Zs.NO_OP]:{icon:"fa fa-check",displayClass:"pillSecondaryBadge",translateKey:"ITEM_BATCH.OPS_TYPES.2"}},gr=function(i){return i[i.PENDING=1]="PENDING",i[i.RUNNING=2]="RUNNING",i[i.SUCCESS=3]="SUCCESS",i[i.ERROR=4]="ERROR",i[i.NO_OP=9]="NO_OP",i}(gr||{}),EB={[gr.PENDING]:{icon:"",displayClass:"fwcBlue",translateKey:"ITEM_BATCH.OPS_STATUS.0"},[gr.RUNNING]:{icon:"fa fa-spinner fa-pulse fa-fw",displayClass:"fwcBlue",translateKey:"ITEM_BATCH.OPS_STATUS.1"},[gr.SUCCESS]:{icon:"fa fa-check",displayClass:"fwcGreen",translateKey:"ITEM_BATCH.OPS_STATUS.2"},[gr.ERROR]:{icon:"fa fa-exclamation-triangle",displayClass:"fwcRed",translateKey:"ITEM_BATCH.OPS_STATUS.3"},[gr.NO_OP]:{icon:"fa fa-check",displayClass:"fwcPaleDark",translateKey:"ITEM_BATCH.OPS_STATUS.4"}},ri=function(i){return i.VPN_WINDOWS_INSTALLER="VPN_WINDOWS_INSTALLER",i.VPN_MESH_WIZARD="VPN_MESH_WIZARD",i.VPN_STATUS_PANEL="VPN_STATUS_PANEL",i.FIREWALL_IMPORT_WIZARD="FIREWALL_IMPORT_WIZARD",i.ITEM_BATCH_MANAGER="ITEM_BATCH_MANAGER",i.DOCS_PANEL="DOCS_PANEL",i.BLOCK_UI_PANEL="BLOCK_UI_PANEL",i.ITEM_PANEL="ITEM_PANEL",i.FIREWALL_PANEL="FIREWALL_PANEL",i.CLUSTER_PANEL="CLUSTER_PANEL",i.OVCONFIG_PANEL="OVCONFIG_PANEL",i.WIREGUARD_CONFIG_PANEL="WIREGUARD_CONFIG_PANEL",i.IPSEC_CONFIG_PANEL="IPSEC_CONFIG_PANEL",i.NGFW_PANEL="NGFW_PANEL",i.SYSTEMCTL_PANEL="SYSTEMCTL_PANEL",i.DHCP_INSTALL_PANEL="DHCP_INSTALL_PANEL",i.KEEPALIVED_INSTALL_PANEL="KEEPALIVED_INSTALL_PANEL",i}(ri||{}),s_t="open-solidarity.fwcloud.net",AB={cloud:"docs/Sections/FWClouds",policy:"docs/Sections/Policy",vpn:"docs/Sections/VPN",firewalls:"docs/Sections/Firewalls",configuration:"docs/Sections/Configuration",ipobjs:"docs/Sections/Objects"},a_t="assets/themes/fwc-light.css",l_t="assets/themes/fwc-dark.css",wt=(()=>{class i{constructor(){this.subjectHelp=new Ue,this.optionsTreeFw={user_id:void 0,fwcloud:void 0,container:qe.C_FIREWALLS,containerReadOnly:!1,objStandard:void 0,objCloud:void 0},this.optionsTreeObj={user_id:void 0,fwcloud:void 0,container:qe.C_OBJECTS,containerReadOnly:!0,objStandard:void 0,objCloud:void 0},this.optionsTreeSrv={user_id:void 0,fwcloud:void 0,container:qe.C_SERVICES,containerReadOnly:!0,objStandard:void 0,objCloud:void 0},this.optionsTreeCa={user_id:void 0,fwcloud:void 0,container:qe.C_CA,containerReadOnly:!0,objStandard:void 0,objCloud:void 0},this.optionsTreeFwCon={user_id:void 0,fwcloud:void 0,container:qe.C_FIREWALLS_CONDENSED,containerReadOnly:!1,objStandard:void 0,objCloud:void 0},this.enableInfoTooltip=!0}showHelp(e){return this.subjectHelp.next(e),this.subjectHelp.asObservable()}isValidIP(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e.trim())}isValidMask(e,t){let r=e.trim();if(t!==4&&t!==6&&(t=4),t===4&&r.match(Pt.netmaskRegexp))return!0;{let s=new RegExp(Pt.netmaskCIDRRegexp).exec(r);if(s){let a=+s[1],l=t===4?32:128;return a>=0&&a<=l}}return!1}convertToStandardNetmask(e){let t=e,r=Pt.netmaskCIDRRegexp.exec(t);if(r){let o=parseInt(r[1]);try{t=ka.IPv4.subnetMaskFromPrefixLength(o).toString()}catch{t=""}}return t}netmaskToCIDR(e){let t=e.split(".").map(Number);if(t.length!==4||t.some(a=>a<0||a>255))throw new Error("Netmask is invalid");let r=t.map(a=>a.toString(2).padStart(8,"0")).join(""),o=r.indexOf("0"),s=r.lastIndexOf("1");if(o!==-1&&s>o)throw new Error("Netmask is not contiguous");return r.split("1").length-1}intToIp(e){return[e>>>24&255,e>>>16&255,e>>>8&255,e&255].join(".")}ipToLong(e){return e.split(".").reduce((t,r)=>(t<<8)+Number(r),0)>>>0}byteArrayToInt(e){return e.reduce((t,r)=>(t<<8)+r,0)}ipToInt(e){return e.split(".").reduce((t,r)=>(t<<8)+parseInt(r,10),0)}setControlError(e,t){if(!e)return;let r=e.errors||{};r[t]||e.setErrors(ke(oe({},r),{[t]:!0}))}clearControlErrors(e){e&&e.errors&&e.setErrors(null)}normalizeFirstTo32(e){if(!e)return"";let t=e.split(",").map(o=>o.trim());if(t.length===0)return"";let r=t[0].split("/")[0];return t[0]=`${r}/32`,t.join(", ")}getNormalizedAllowedIps(e){return this.normalizeFirstTo32(e.allowedips||"")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var xB={[O.OBJ_FIREWALL]:"fwci-firewall",[O.OBJ_SERVICE_IP]:"fwci-ipservice",[O.OBJ_SERVICE_TCP]:"fwci-tcpservice",[O.OBJ_SERVICE_ICMP]:"fwci-icmpservice",[O.OBJ_SERVICE_UDP]:"fwci-udpservice",[O.OBJ_ADDRESS]:"fwci-address",[O.OBJ_ADDRESS_RANGE]:"fwci-addressrange",[O.OBJ_NETWORK]:"fwci-network",[O.OBJ_HOST]:"fwci-host",[O.OBJ_INTERFACE_FIREWALL]:"fwci-interface fwcGreen",[O.OBJ_INTERFACE_HOST]:"fwci-interface fwcGreen",[O.OBJ_GROUP]:"fwci-objectgroup",[O.OBJ_SERVICE_GROUP]:"fwci-servicegroup",[O.OBJ_GEN_IP_OBJECT]:"fwci-ipobjects",[O.OBJ_CLUSTER]:"fwci-cluster fwcDarkBlue",[O.OBJ_DNS]:"fwci2-dns-in",[O.OBJ_MARK]:"fwci2-label",[O.OBJ_CA]:"fwci2-ca",[O.OBJ_CERT_CLI]:"fwci2-certificate",[O.OBJ_CERT_SER]:"fwci2-certificate fwcDarkBlue",[O.OBJ_OPENVPN_CONFIG_CLI]:"fwci2-openvpn fwcOrange",[O.OBJ_OPENVPN_CONFIG_SER]:"fwci2-openvpn fwcDarkBlue",[O.OBJ_WGC_CONFIG_CLI]:"fwci2-wireguard fwcOrange",[O.OBJ_WGS_CONFIG_SER]:"fwci2-wireguard fwcDarkBlue",[O.OBJ_ISC_CONFIG_CLI]:"fwci2-ipsec fwcOrange",[O.OBJ_ISS_CONFIG_SER]:"fwci2-ipsec fwcDarkBlue",[O.OBJ_PREFIX_FOLDER]:"fwci2-folder",[O.OBJ_OPENVPN_PREFIX]:"fwci2-certificate-prefix",[O.OBJ_WIREGUARD_PREFIX]:"fwci2-certificate-prefix",[O.OBJ_IPSEC_PREFIX]:"fwci2-certificate-prefix",[O.OBJ_GEN_RULE]:"fwci-rule"},TB={[M.FOLDER_CLUSTER]:"fwci-clusters fwcDarkBlue",[M.FOLDER_CLUSTER_FW]:"fwci-compileallfirewalls2",[M.FOLDER_CA]:"fwci2-ca fwcDarkBlue",[M.FOLDER]:"fwci2-folder",[M.STANDARD]:"fwci2-folderstd",[M.FOLDER_FW]:"fwci-firewalls",[M.OBJ_FIREWALL]:"fwci-firewall",[M.FOLDER_OBJECTS]:"fwci-ipobjects",[M.FOLDER_SERVICES]:"fwci-services",[M.FOLDER_POLICY]:"fwci-filterpolicies",[M.POLICY_INPUT]:"fwci-input",[M.POLICY_OUTPUT]:"fwci-output",[M.POLICY_FORWARD]:"fwci-forward",[M.FOLDER_NAT]:"fwci-nat",[M.POLICY_SNAT]:"fwci-snat",[M.POLICY_DNAT]:"fwci-dnat",[M.FOLDER_ROUTING]:"fwci-routing",[M.POLICY_ROUTING]:"fwci-routing",[M.ROUTING_TABLES]:"fwci-policy",[M.ROUTING_TABLE]:"fwci-policy",[M.FOLDER_POLICY6]:"fwci-filterpolicies",[M.POLICY_INPUT6]:"fwci-input",[M.POLICY_OUTPUT6]:"fwci-output",[M.POLICY_FORWARD6]:"fwci-forward",[M.POLICY_SNAT6]:"fwci-snat",[M.POLICY_DNAT6]:"fwci-dnat",[M.POLICY_ROUTING6]:"fwci-routing",[M.OPENVPN_ROOT]:"fwci2-openvpn",[M.WIREGUARD_ROOT]:"fwci2-wireguard",[M.IPSEC_ROOT]:"fwci2-ipsec",[M.COUNTRIES]:"fa fa-globe",[M.AF]:"fa fa-earth-africa",[M.AN]:"fa fa-snowflake",[M.AS]:"fa fa-earth-asia",[M.EU]:"fa fa-earth-europe",[M.NA]:"fa fa-earth-americas",[M.OC]:"fa fa-earth-oceania",[M.SA]:"fa fa-earth-americas"},Sn=(()=>{class i{transform(e,t,r){let o="fwcBlue",s="";return t&&TB[t]?s=TB[t]:xB[e]&&(s=xB[e]),r&&(o=r,s=s.split(" ")[0]),s+=" "+o,s}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"fwcIcon",type:i,pure:!0})}}return i})();var ame=(i,n)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":n}),lme=(i,n)=>({width:i,display:"flex",background:n}),cme=i=>({$implicit:i}),dme=i=>({display:i}),pme=i=>({background:i});function ume(i,n){if(i&1&&(m(0,"div",7),F(1),g()),i&2){let e=u(2);f("ngStyle",ne(4,dme,e.value!=null&&e.value!==0?"flex":"none")),G("data-pc-section","label"),p(),Es(" ",e.value,"",e.unit," ")}}function hme(i,n){i&1&&ue(0)}function fme(i,n){if(i&1&&(m(0,"div",3)(1,"div",4),v(2,ume,2,6,"div",5)(3,hme,1,0,"ng-container",6),g()()),i&2){let e=u();f("ngStyle",Qe(5,lme,e.value+"%",e.color)),G("data-pc-section","value"),p(2),f("ngIf",e.showValue&&!e.contentTemplate),p(),f("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ne(8,cme,e.value))}}function mme(i,n){if(i&1&&(m(0,"div",8),P(1,"div",3),g()),i&2){let e=u();G("data-pc-section","container"),p(),f("ngStyle",ne(3,pme,e.color)),G("data-pc-section","value")}}var Iv=(()=>{class i{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-progressBar"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:[2,"value","value",We],showValue:[2,"showValue","showValue",Y],styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},features:[tt],decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate",3,"ngStyle",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",3,"ngStyle"],[1,"p-progressbar-label"],[3,"ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngStyle"],[1,"p-progressbar-indeterminate-container"]],template:function(t,r){t&1&&(m(0,"div",0),v(1,fme,4,10,"div",1)(2,mme,2,5,"div",2),g()),t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",Qe(11,ame,r.mode==="determinate",r.mode==="indeterminate")),G("aria-valuemin",0)("aria-valuenow",r.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),p(),f("ngIf",r.mode==="determinate"),p(),f("ngIf",r.mode==="indeterminate"))},dependencies:[je,rt,mt,De],styles:[`@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;-webkit-animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;-webkit-animation-delay:1.15s;animation-delay:1.15s}}@-webkit-keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@-webkit-keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}
`],encapsulation:2,changeDetection:0})}return i})(),b2=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var gme=i=>["divFwcMessage",i],_me=(i,n,e,t)=>({"divFwcMessage--horizontal":i,"divFwcMessage--highlight":n,"divFwcMessage--compact":e,bordered:t}),Cme=i=>({"font-size":i}),Ime=()=>({height:"6px"});function yme(i,n){if(i&1&&(m(0,"div",2),P(1,"i",8),g()),i&2){let e=u(2);p(),f("ngClass",e.FwcMessageTypes[e._message.type])("ngStyle",ne(2,Cme,e._message.compact?"1.2rem":""))}}function wme(i,n){if(i&1&&(m(0,"p",5),P(1,"p-progressBar",9),g()),i&2){let e=u(2);p(),st(Ae(4,Ime)),f("value",e.progress)("showValue",!1)}}function vme(i,n){if(i&1&&(m(0,"p",6),F(1),g()),i&2){let e=u(2);p(),J(" ",e._message.status," ")}}function bme(i,n){if(i&1&&(m(0,"div",13),F(1),D(2,"json"),g()),i&2){let e=u(3);p(),J(" ",N(2,1,e._message.details)," ")}}function Sme(i,n){if(i&1){let e=L();m(0,"div",7)(1,"div",10)(2,"span",11),k("click",function(){y(e);let r=u(2);return w(r.onToggleDetails())}),F(3),D(4,"translate"),P(5,"i",12),g()(),v(6,bme,3,3,"div",13),g()}if(i&2){let e=u(2);p(3),J(" ",N(4,3,"GLOBALS.MSG_BUTTONS.DETAILS")," "),p(2),f("ngClass",e.state!=null&&e.state.showDetails?"fa-chevron-up":"fa-chevron-down"),p(),W(e.state!=null&&e.state.showDetails?6:-1)}}function Eme(i,n){if(i&1&&(m(0,"div",1),v(1,yme,2,4,"div",2),m(2,"div",3)(3,"h6"),F(4),g(),P(5,"p",4),v(6,wme,2,5,"p",5)(7,vme,2,1,"p",6)(8,Sme,7,5,"div",7),g()()),i&2){let e=u();ce(ne(9,gme,e._message.type).join(" ")),f("ngClass",xn(11,_me,e._message.horizontal,e._message.highlight,e._message.compact,e._message.bordered)),p(),W(e._message.type!=="none"?1:-1),p(3),J(" ",e._message.title," "),p(),f("innerHTML",e._message.text,an),p(),W(e.progress?6:-1),p(),W(e._message.status?7:-1),p(),W(e._message.details?8:-1)}}var Ame={none:"",success:"fa fa-4x fa-check-circle fwcGreen",info:"fa fa-4x fa-info-circle fwcBlue",warning:"fa fa-4x fa-warning fwcOrange",error:"fa fa-4x fa-exclamation-circle fwcRed",loading:"fa fa-4x fa-cog fa-spin fwcBlue"},Fn=(()=>{class i{set message(e){this._message=oe({},e)}constructor(e,t){this.cd=e,this.translate=t,this.FwcMessageTypes=Ame,this.state={showDetails:!1}}ngOnInit(){}onToggleDetails(){this.state.showDetails=!this.state.showDetails}changeText(e){this._message.text=e,this.cd.destroyed||this.cd.detectChanges()}changeStatus(e,t){let r=/(\d+)\/(\d+)/.exec(e);this._message||(this._message={type:"info",text:this.translate.instant("GLOBALS.MSG_OP_RESULT.OPERATION_IN_PROGRESS")});let o=e;if(r){let s=Number.parseInt(r[1]),a=Number.parseInt(r[2]),l=Math.round(s/a*100);Number.isNaN(l)||(this.progress=l,o=`${t||""} ${s}/${a}`)}o&&(this._message.status=o),this.cd.destroyed||this.cd.detectChanges()}static{this.\u0275fac=function(t){return new(t||i)(S(we),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-message"]],inputs:{message:"message"},decls:1,vars:1,consts:[[3,"class","ngClass"],[3,"ngClass"],[1,"divFwcMessage-icon"],[1,"divFwcMessage-content"],[1,"divFwcMessage-text",3,"innerHTML"],[1,"divFwcMessage-progressbar"],[1,"divFwcMessage-status"],[1,"divFwcMessage-content-footer"],[3,"ngClass","ngStyle"],[3,"value","showValue"],[1,"divFwcMessage-content-footer-toggler"],[3,"click"],[1,"fa","fa-fw",3,"ngClass"],[1,"divFwcMessage-content-footer-details"]],template:function(t,r){t&1&&v(0,Eme,9,16,"div",0),t&2&&W(r._message?0:-1)},dependencies:[je,De,Iv,sw,gt],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divFwcMessage[_ngcontent-%COMP%]{font-family:Montserrat,Arial,sans-serif!important;display:flex;flex-direction:column;overflow:auto;padding:.5rem}.divFwcMessage.bordered[_ngcontent-%COMP%]{border:1px solid var(--fwcGrey2)}.divFwcMessage-icon[_ngcontent-%COMP%]{text-align:center}.divFwcMessage-content[_ngcontent-%COMP%]{max-width:80vw;text-align:center}.divFwcMessage-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.2rem}.divFwcMessage-content[_ngcontent-%COMP%]   p.divFwcMessage-text[_ngcontent-%COMP%]{font-size:.9rem;color:var(--fwcMidDark) 2}.divFwcMessage-content[_ngcontent-%COMP%]   p.divFwcMessage-status[_ngcontent-%COMP%]{font-size:small;color:var(--fwcMidDark)}.divFwcMessage-content-footer[_ngcontent-%COMP%]{margin-top:.5rem;font-size:smaller}.divFwcMessage-content-footer-toggler[_ngcontent-%COMP%]{font-weight:700;text-align:right;margin-bottom:.3rem}.divFwcMessage-content-footer-toggler[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--fwcBlue);cursor:pointer}.divFwcMessage-content-footer-details[_ngcontent-%COMP%]{padding:.5rem;text-align:left;font-family:monospace;border:1px solid var(--fwcGrey2);background:var(--fwcPaleWhite);color:var(--fwcMidDark) 2;overflow:auto;max-height:6rem}.divFwcMessage.divFwcMessage--compact[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{display:none}.divFwcMessage.divFwcMessage--compact.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .divFwcMessage.divFwcMessage--compact.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--fwcBlue)}.divFwcMessage.divFwcMessage--compact.success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--fwcGreen)}.divFwcMessage.divFwcMessage--compact.error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--fwcRed)}.divFwcMessage.divFwcMessage--highlight[_ngcontent-%COMP%]{border-radius:3px;border:1px solid var(--fwcGrey)}.divFwcMessage.divFwcMessage--horizontal[_ngcontent-%COMP%]{flex-direction:row;align-items:end}.divFwcMessage.divFwcMessage--horizontal[_ngcontent-%COMP%]   .divFwcMessage-icon[_ngcontent-%COMP%]{flex:0;margin-right:.7rem}.divFwcMessage.divFwcMessage--horizontal[_ngcontent-%COMP%]   .divFwcMessage-content[_ngcontent-%COMP%]{flex:1;text-align:left}.divFwcMessage.default[_ngcontent-%COMP%]{border:none}.divFwcMessage.info.bordered[_ngcontent-%COMP%]{background:var(--fwcPaleBlue2);border:1px solid var(--fwcBlue);border-top:2px solid var(--fwcBlue);border-radius:3px}.divFwcMessage.info[_ngcontent-%COMP%]   .divFwcMessage-icon[_ngcontent-%COMP%]{color:var(--fwcBlue)}.divFwcMessage.error.bordered[_ngcontent-%COMP%]{background:var(--fwcPaleRed2);border:1px solid var(--fwcPaleRed);border-top:2px solid var(--fwcPaleRed);border-radius:3px}.divFwcMessage.error[_ngcontent-%COMP%]   .divFwcMessage-icon[_ngcontent-%COMP%], .divFwcMessage.error[_ngcontent-%COMP%]   .divFwcMessage-content-footer-toggler[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--fwcRed)}"]})}}return i})();var xme=1e3,St=(()=>{class i{constructor(){this.dialogCounter=xme,this.searchShowDialogSubject=new Ue}createDialog(e,t,r){let o;return o=this.dialogCounter++,{dialogId:o,dialogIcon:t,dialogName:e,dialogUUID:r}}findDialog(e){let t;return Array.isArray(this.dialogPanels)&&(t=this.dialogPanels.find(r=>r.dialogId==e)),t}findDialogByUUID(e){let t;return Array.isArray(this.dialogPanels)&&(t=this.dialogPanels.find(r=>r.dialogUUID===e)),t}searchAndShowDialog(e){return e&&this.searchShowDialogSubject.next(e),this.searchShowDialogSubject.asObservable()}openDynamicDialog(e,t){let r=this.findDialogByUUID(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var yv=(()=>{class i{constructor(){this.hints=[],this.subjectHint=new Ue,this.hintElementSubject=new vn(null),this.hintElement$=this.hintElementSubject.asObservable()}setHintElement(e){this.hintElementSubject.next(e)}clearHintElement(){this.hintElementSubject.next(null)}registerHint(e){this.hints.push(e),this.hintElementSubject.next(e.target)}showRegisteredHint(e,t,r){let o;for(let s=0;s<this.hints.length;s++)if(this.hints[s].id==e){o=this.hints[s];break}o&&(r?o.event=r:t&&(o.target=t),this.setHintToShow(o))}setHintToShow(e){this.subjectHint.next(e)}getHintToShow(){return this.subjectHint.asObservable()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var S_t=(()=>{class i{constructor(){this.subjectMessage=new Ue,this.subjectStaticMessage=new Ue}sprintf(e,...t){let r=0;return e.replace(/%s/g,function(){return t[r++]})}addNewText(e){this.subjectMessage.next(e)}getMessage(){return this.subjectMessage.asObservable()}addStaticMessage(e){this.subjectStaticMessage.next(e)}getStaticMessage(){return this.subjectStaticMessage.asObservable()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Ts=(()=>{class i{constructor(){this.appRef=null}getAppRef(){return this.appRef}setAppRef(e){this.appRef=e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Mi=(()=>{class i{get endpoint(){return this._endpoint}set endpoint(e){this._endpoint=e}constructor(e){this.httpClient=e}handleAPIResponse(e){let t;return t={data:e||{}},t}handleAPIResponseNew(e){let t;return t=e,t}handleAPIError(e){let t,r;if(!e)return ma(null);if(e.error&&e.error.isJoi){let o="";if(Array.isArray(e.error.details))for(let s=0;s<e.error.details.length;s++)o=o.length?", ":""+e.error.details[s].message;else o="UNKNOWN ERROR";r={fwcErr:999999,msg:o}}else e.error&&(e.error.fwcErr||e.status==403)?r=e.error:e.error?r={fwcErr:999999,msg:JSON.stringify(e.error)}:r=void 0;return t={status:e.status,data:e.error&&e.error.data?e.error.data:{},error:r},ma(t)}handleAPIErrorNew(e){if(e&&e.error&&e.error.status!==void 0&&e.error.response!==void 0&&e.error.message!==void 0&&e.error.stack!==void 0){let t={status:e.status,data:e.error.response,error:e.error.message,errors:e.error.errors};return ma(t)}else{let t,r,o;if(e.error&&(e.error.fwcErr||e.status==403))t=e.error,o="CONFIRMATION_TOKEN",r=e.status;else{r=500,o="UNKNOWN_ERROR_FORMAT";try{t=JSON.stringify(e.error)}catch{t="Unparseable error"}}return ma({status:r,data:o,error:t})}}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Np=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e}getAiAssistantApikey(){let e=`${_e.settings.fwcAppURL}/aiassistant`;return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}saveAiAssistantApikey(e){let t=`${_e.settings.fwcAppURL}/aiassistant`;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteAiAssistantApikey(){let e=`${_e.settings.fwcAppURL}/aiassistant`;return this.httpClient.delete(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkPolicyScript(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/AIassistant`;return this.httpClient.post(o,{prompt:r}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkCompiledRules(e,t,r,o){let s=o.map(l=>`rules[]=${l}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/AIassistant/rules?${s}`;return this.httpClient.post(a,{prompt:r}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var PB=(()=>{class i{constructor(e){this.fwcAiAssistantService=e,this.aiAssistantCheckEnabledSubject=new vn(void 0)}initFromApi(){this.aiAssistantCheckEnabledSubject.value===void 0&&this.fwcAiAssistantService.getAiAssistantApikey().subscribe({next:e=>{this.aiAssistantCheckEnabledSubject.next(!!(e&&e.data&&e.data.length))},error:()=>{this.aiAssistantCheckEnabledSubject.next(!1)}})}getaiAssistantCheckEnabled(){return this.aiAssistantCheckEnabledSubject.value===void 0&&this.initFromApi(),this.aiAssistantCheckEnabledSubject.asObservable()}setaiAssistantCheckEnabled(e){this.aiAssistantCheckEnabledSubject.next(e)}static{this.\u0275fac=function(t){return new(t||i)(de(Np))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var DB=(()=>{class i{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=bt(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),i.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let r=i.getCookieRegExp(e).exec(this.document.cookie);return r[1]?i.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(r=>{let[o,s]=r.split("=");e[i.safeDecodeURIComponent(o.replace(/^ /,""))]=i.safeDecodeURIComponent(s)}),e}set(e,t,r,o,s,a,l,c){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||o||s||a||l){let _={expires:r,path:o,domain:s,secure:a,sameSite:l||"Lax",partitioned:c};this.set(e,t,_);return}let d=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",h=r||{};if(h.expires)if(typeof h.expires=="number"){let _=new Date(new Date().getTime()+h.expires*1e3*60*60*24);d+="expires="+_.toUTCString()+";"}else d+="expires="+h.expires.toUTCString()+";";h.path&&(d+="path="+h.path+";"),h.domain&&(d+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(d+="secure;"),h.sameSite||(h.sameSite="Lax"),d+="sameSite="+h.sameSite+";",h.partitioned&&(d+="Partitioned;"),this.document.cookie=d}delete(e,t,r,o,s="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:a,path:t,domain:r,secure:o,sameSite:s})}deleteAll(e,t,r,o="Lax"){if(!this.documentIsAccessible)return;let s=this.getAll();for(let a in s)s.hasOwnProperty(a)&&this.delete(a,e,t,r,o)}static{this.\u0275fac=function(t){return new(t||i)(de(At),de(ai))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ea=(()=>{class i{constructor(e){this.cookieService=e}initializeAuth(){this.isLogged()||this.resetData()}resetData(){this.cookieService.delete(rn.API_COOKIE),localStorage.removeItem(rn.LS_CUSTOMER_ID),localStorage.removeItem(rn.LS_USER_ID),localStorage.removeItem(rn.LS_USER_NAME),localStorage.removeItem(rn.LS_USER_ROLE),localStorage.removeItem(rn.LS_TOKEN),localStorage.removeItem(rn.LS_CLOUD_ID),localStorage.removeItem(rn.LS_CLOUD_NAME),localStorage.removeItem(rn.LS_PUBLIC_KEY),localStorage.removeItem(rn.LS_PRIVATE_KEY)}login(e,t,r,o,s,a,l){let c=this.cookieService.get(rn.API_COOKIE)||"";localStorage.setItem(rn.LS_TOKEN,c),localStorage.setItem(rn.LS_CUSTOMER_ID,e.toString()),localStorage.setItem(rn.LS_USER_ID,t.toString()),localStorage.setItem(rn.LS_USER_NAME,r),localStorage.setItem(rn.LS_USER_ROLE,o.toString()),localStorage.setItem(rn.LS_PUBLIC_KEY,a),localStorage.setItem(rn.LS_PRIVATE_KEY,l),localStorage.setItem(rn.LS_LANGUAGE,s)}logout(){this.resetData()}isLogged(){let e=!1,t=this.cookieService.get(rn.API_COOKIE),r=localStorage.getItem(rn.LS_TOKEN);return t&&r&&t.length&&r.length&&t===r&&localStorage.getItem(rn.LS_CUSTOMER_ID)&&localStorage.getItem(rn.LS_USER_ID)&&(e=!0),e}getLoggedUser(){let e;return e={customer_id:+localStorage.getItem(rn.LS_CUSTOMER_ID)||null,user_id:+localStorage.getItem(rn.LS_USER_ID)||null,user_name:localStorage.getItem(rn.LS_USER_NAME)||null,role:+localStorage.getItem(rn.LS_USER_ROLE)||null,cloud_id:+localStorage.getItem(rn.LS_CLOUD_ID)||null,cloud_name:localStorage.getItem(rn.LS_CLOUD_NAME)||null,language:localStorage.getItem(rn.LS_LANGUAGE),publicKey:localStorage.getItem(rn.LS_PUBLIC_KEY),privateKey:localStorage.getItem(rn.LS_PRIVATE_KEY)},e}getLanguage(){return localStorage.getItem(rn.LS_LANGUAGE)}setSelectedFwCloud(e,t){localStorage.setItem(rn.LS_CLOUD_ID,e.toString()),localStorage.setItem(rn.LS_CLOUD_NAME,t)}setAppUnderMaintenance(e){this.appUnderMaintenance=e}getAppUnderMaintenance(){return this.appUnderMaintenance}static{this.\u0275fac=function(t){return new(t||i)(de(DB))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var j_t=(()=>{class i{constructor(e,t){this.fwcAuthService=e,this._router=t}canActivate(){return this.fwcAuthService.isLogged()?!0:(this._router.navigate(["/user/login"]),!1)}static{this.\u0275fac=function(t){return new(t||i)(de(ea),de(ct))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Sv=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/backups`}getBackups(){let e=this.endpoint;return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}doBackup(e,t){let r=`${this.endpoint}?channel_id=${e}`;return this.httpClient.post(r,t).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}restoreBackup(e,t){let r=`${this.endpoint}/${t}/restore?channel_id=${e}`;return this.httpClient.post(r,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}deleteBackup(e){let t=`${this.endpoint}/${e}`;return this.httpClient.delete(t).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}exportBackup(e){let t=`${this.endpoint}/${e}/export`;return this.httpClient.get(t,{observe:"response",responseType:"blob"}).pipe(q(this.handleAPIError))}importBackup(e){let t=`${this.endpoint}/import`;return this.httpClient.post(t,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}getBackupConfig(){let e=this.endpoint+"/config";return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}saveBackupConfig(e){let t=this.endpoint+"/config";return this.httpClient.put(t,e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var q_t=(()=>{class i{constructor(e,t){this.fwcAuthService=e,this._router=t}canActivate(){return this.fwcAuthService.getAppUnderMaintenance()?!0:(this._router.navigate(["/user/login"]),!1)}static{this.\u0275fac=function(t){return new(t||i)(de(ea),de(ct))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var ta=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=_e.settings.fwcAppURL+"/fwcloud"}getClouds(){let e=`${this.endpoint}/all/get`;return this.httpClient.get(e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCloud(e){let t=`${this.endpoint}/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newCloud(e){let t=_e.settings.fwcAppURL+"/fwclouds";return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateCloud(e){let t=_e.settings.fwcAppURL+"/fwclouds/"+e.fwcloud,r=Object.assign({},e);return delete r.fwcloud,this.httpClient.put(t,JSON.stringify(r)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteCloud(e){let t=`${this.endpoint}/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}generateWindowsInstaller(e,t,r,o){let{openvpn:s}=r,a=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/openvpns/${s}/installer`,l={connection_name:o};return this.httpClient.post(a,JSON.stringify(l),{observe:"response",responseType:"blob"}).pipe(q(this.handleAPIError))}exportCloud(e){let t=`${_e.settings.fwcAppURL}/fwclouds/${e}/export`,r=new Mo;return r=r.set("X-FWC-TIMEOUT","9999999"),this.httpClient.post(t,{},{headers:r,observe:"response",responseType:"blob"}).pipe(q(this.handleAPIError))}importCloud(e){let t=`${_e.settings.fwcAppURL}/fwclouds/import`,r=new Mo;return r=r.set("X-FWC-TIMEOUT","9999999"),this.httpClient.post(t,e,{headers:r}).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCloudColors(e){let t=`${_e.settings.fwcAppURL}/fwclouds/${e}/colors`;return this.httpClient.get(t).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}lockCloud(e){let t=`${this.endpoint}/lock`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}unlockCloud(e){let t=`${this.endpoint}/unlock`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var at=(()=>{class i extends Mi{constructor(e,t){super(e),this.httpClient=e,this.fwcAuthService=t,this.subjectReloadFWCloud=new Ue,this.headerOptions=null,this.endpoint=`${_e.settings.fwcAppURL}/user`;let r=this.fwcAuthService.getLoggedUser();this.fwcUser=new vn({user_id:r.user_id,customer_id:r.customer_id,user_name:r.user_name,role:r.role,selectedFwCloud:r.cloud_id,selectedFwCloudName:r.cloud_name,selectedLanguage:r.language||"en",showStandardObjects:1,showCloudObjects:1,authToken:"",confirmationToken:"",publicKey:r.publicKey,privateKey:r.privateKey,withCredentials:!0,lockInfo:{result:!1}}),this.fwcUser$=this.fwcUser.asObservable()}getFwcUser(){return this.fwcUser$}getActualFwcUser(){return this.fwcUser.getValue()}getActualFwSelectedCloud(){return this.fwcUser.getValue().selectedFwCloud}setFwcUser(e){this.fwcUser.next(e)}setUserId(e){let t=this.fwcUser.getValue();t.user_id=e,this.fwcUser.next(t)}setCustomerId(e){let t=this.fwcUser.getValue();t.customer_id=e,this.fwcUser.next(t)}setUsername(e){let t=this.fwcUser.getValue();t.user_name=e,this.fwcUser.next(t)}setUserRole(e){let t=this.fwcUser.getValue();t.role=e,this.fwcUser.next(t)}setPublicKey(e){let t=this.fwcUser.getValue();t.publicKey=e,this.fwcUser.next(t)}setPrivateKey(e){let t=this.fwcUser.getValue();t.privateKey=e,this.fwcUser.next(t)}setUserCustomerId(e,t){let r=this.fwcUser.getValue();r.user_id=e,r.customer_id=t,this.fwcUser.next(r)}setSelectedFwCloud(e,t){let r=this.fwcUser.getValue();r.selectedFwCloud=e,r.selectedFwCloudName=t,this.fwcUser.next(r)}setLanguage(e){let t=this.fwcUser.getValue();t.selectedLanguage=e,this.fwcUser.next(t)}setAuthToken(e){let t=this.fwcUser.getValue();t.authToken=e,this.fwcUser.next(t)}setConfirmationToken(e){let t=this.fwcUser.getValue();t.confirmationToken=e,this.fwcUser.next(t)}setWithCredentials(e){let t=this.fwcUser.getValue();t.withCredentials=e,this.fwcUser.next(t)}setAlreadyCheckedForUpdates(e){let t=this.fwcUser.getValue();t.alreadyCheckedForUpdates=e}setAppVersions(e){let t=this.fwcUser.getValue();t.appVersions=e}set2FA(e){let t=this.fwcUser.getValue();t.tfa=e}setLockInfo(e){let t=this.fwcUser.getValue();t.lockInfo=e,this.fwcUser.next(t)}logUser(e){let t=`${this.endpoint}/login`;return e.authCode!=""&&(this.headerOptions=new Mo({"x-tfa":e.authCode})),this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}setupAuth(e){let t=`${_e.settings.fwcAppURL}/profile/tfa/setup`,r={user:e.id,username:e.username};return this.httpClient.post(t,JSON.stringify(r)).pipe(q(this.handleAPIError))}verifyAuth(e){let t=`${_e.settings.fwcAppURL}/profile/tfa/verify`,r={tempSecret:e.tempSecret,authCode:e.authCode};return this.httpClient.post(t,JSON.stringify(r)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getAuth(){let e=`${_e.settings.fwcAppURL}/profile/tfa/setup`;return this.httpClient.get(e).pipe(q(this.handleAPIError))}deleteAuth(){let e=`${_e.settings.fwcAppURL}/profile/tfa/setup`;return this.httpClient.delete(e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}logoutUser(){let e=`${this.endpoint}/logout`;return this.httpClient.post(e,{}).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getUser(e){let t=`${this.endpoint}/get`;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteUser(e){let t=`${this.endpoint}/del`;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newUser(e){let t=this.endpoint;return this.httpClient.post(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateUser(e){let t=this.endpoint;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getUserClouds(e){let t=`${this.endpoint}/fwcloud/get`,r={user:e};return this.httpClient.put(t,r).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}removeUserCloud(e,t){let r=`${this.endpoint}/fwcloud/del`,o={user:e,fwcloud:t};return this.httpClient.put(r,o).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}addUserCloud(e,t){let r=`${this.endpoint}/fwcloud`,o={user:e,fwcloud:t};return this.httpClient.post(r,o).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateUserPassword(e){let t=`${this.endpoint}/changepass`,r={password:e};return this.httpClient.put(t,r).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkUserRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}reloadSelectedFWCloud(){return this.subjectReloadFWCloud.next(!0),this.subjectReloadFWCloud.asObservable()}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(ea))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Pme=typeof global=="object"&&global&&global.Object===Object&&global,Ev=Pme;var Dme=typeof self=="object"&&self&&self.Object===Object&&self,Fme=Ev||Dme||Function("return this")(),Co=Fme;var kme=Co.Symbol,Hs=kme;var FB=Object.prototype,Nme=FB.hasOwnProperty,Lme=FB.toString,r0=Hs?Hs.toStringTag:void 0;function Mme(i){var n=Nme.call(i,r0),e=i[r0];try{i[r0]=void 0;var t=!0}catch{}var r=Lme.call(i);return t&&(n?i[r0]=e:delete i[r0]),r}var kB=Mme;var Vme=Object.prototype,Bme=Vme.toString;function Ume(i){return Bme.call(i)}var NB=Ume;var jme="[object Null]",Gme="[object Undefined]",LB=Hs?Hs.toStringTag:void 0;function Hme(i){return i==null?i===void 0?Gme:jme:LB&&LB in Object(i)?kB(i):NB(i)}var Nl=Hme;function Wme(i){return i!=null&&typeof i=="object"}var Ws=Wme;var zme="[object Symbol]";function Kme(i){return typeof i=="symbol"||Ws(i)&&Nl(i)==zme}var vd=Kme;function $me(i,n){for(var e=-1,t=i==null?0:i.length,r=Array(t);++e<t;)r[e]=n(i[e],e,i);return r}var um=$me;var Jme=Array.isArray,Fr=Jme;var qme=1/0,MB=Hs?Hs.prototype:void 0,VB=MB?MB.toString:void 0;function BB(i){if(typeof i=="string")return i;if(Fr(i))return um(i,BB)+"";if(vd(i))return VB?VB.call(i):"";var n=i+"";return n=="0"&&1/i==-qme?"-0":n}var UB=BB;function Yme(i){var n=typeof i;return i!=null&&(n=="object"||n=="function")}var cl=Yme;function Xme(i){return i}var Av=Xme;var Qme="[object AsyncFunction]",Zme="[object Function]",ege="[object GeneratorFunction]",tge="[object Proxy]";function ige(i){if(!cl(i))return!1;var n=Nl(i);return n==Zme||n==ege||n==Qme||n==tge}var xv=ige;var nge=Co["__core-js_shared__"],Tv=nge;var jB=function(){var i=/[^.]+$/.exec(Tv&&Tv.keys&&Tv.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function rge(i){return!!jB&&jB in i}var GB=rge;var oge=Function.prototype,sge=oge.toString;function age(i){if(i!=null){try{return sge.call(i)}catch{}try{return i+""}catch{}}return""}var bd=age;var lge=/[\\^$.*+?()[\]{}|]/g,cge=/^\[object .+?Constructor\]$/,dge=Function.prototype,pge=Object.prototype,uge=dge.toString,hge=pge.hasOwnProperty,fge=RegExp("^"+uge.call(hge).replace(lge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mge(i){if(!cl(i)||GB(i))return!1;var n=xv(i)?fge:cge;return n.test(bd(i))}var HB=mge;function gge(i,n){return i?.[n]}var WB=gge;function _ge(i,n){var e=WB(i,n);return HB(e)?e:void 0}var ia=_ge;var Cge=ia(Co,"WeakMap"),Ov=Cge;var zB=Object.create,Ige=function(){function i(){}return function(n){if(!cl(n))return{};if(zB)return zB(n);i.prototype=n;var e=new i;return i.prototype=void 0,e}}(),KB=Ige;function yge(i,n){var e=-1,t=i.length;for(n||(n=Array(t));++e<t;)n[e]=i[e];return n}var $B=yge;var wge=function(){try{var i=ia(Object,"defineProperty");return i({},"",{}),i}catch{}}(),S2=wge;function vge(i,n){for(var e=-1,t=i==null?0:i.length;++e<t&&n(i[e],e,i)!==!1;);return i}var JB=vge;var bge=9007199254740991,Sge=/^(?:0|[1-9]\d*)$/;function Ege(i,n){var e=typeof i;return n=n??bge,!!n&&(e=="number"||e!="symbol"&&Sge.test(i))&&i>-1&&i%1==0&&i<n}var Rv=Ege;function Age(i,n,e){n=="__proto__"&&S2?S2(i,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[n]=e}var Pv=Age;function xge(i,n){return i===n||i!==i&&n!==n}var hm=xge;var Tge=Object.prototype,Oge=Tge.hasOwnProperty;function Rge(i,n,e){var t=i[n];(!(Oge.call(i,n)&&hm(t,e))||e===void 0&&!(n in i))&&Pv(i,n,e)}var Dv=Rge;function Pge(i,n,e,t){var r=!e;e||(e={});for(var o=-1,s=n.length;++o<s;){var a=n[o],l=t?t(e[a],i[a],a,e,i):void 0;l===void 0&&(l=i[a]),r?Pv(e,a,l):Dv(e,a,l)}return e}var Lp=Pge;var Dge=9007199254740991;function Fge(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Dge}var fm=Fge;function kge(i){return i!=null&&fm(i.length)&&!xv(i)}var Mp=kge;var Nge=Object.prototype;function Lge(i){var n=i&&i.constructor,e=typeof n=="function"&&n.prototype||Nge;return i===e}var mm=Lge;function Mge(i,n){for(var e=-1,t=Array(i);++e<i;)t[e]=n(e);return t}var qB=Mge;var Vge="[object Arguments]";function Bge(i){return Ws(i)&&Nl(i)==Vge}var E2=Bge;var YB=Object.prototype,Uge=YB.hasOwnProperty,jge=YB.propertyIsEnumerable,Gge=E2(function(){return arguments}())?E2:function(i){return Ws(i)&&Uge.call(i,"callee")&&!jge.call(i,"callee")},Fv=Gge;function Hge(){return!1}var XB=Hge;var e6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QB=e6&&typeof module=="object"&&module&&!module.nodeType&&module,Wge=QB&&QB.exports===e6,ZB=Wge?Co.Buffer:void 0,zge=ZB?ZB.isBuffer:void 0,Kge=zge||XB,gh=Kge;var $ge="[object Arguments]",Jge="[object Array]",qge="[object Boolean]",Yge="[object Date]",Xge="[object Error]",Qge="[object Function]",Zge="[object Map]",e_e="[object Number]",t_e="[object Object]",i_e="[object RegExp]",n_e="[object Set]",r_e="[object String]",o_e="[object WeakMap]",s_e="[object ArrayBuffer]",a_e="[object DataView]",l_e="[object Float32Array]",c_e="[object Float64Array]",d_e="[object Int8Array]",p_e="[object Int16Array]",u_e="[object Int32Array]",h_e="[object Uint8Array]",f_e="[object Uint8ClampedArray]",m_e="[object Uint16Array]",g_e="[object Uint32Array]",Rr={};Rr[l_e]=Rr[c_e]=Rr[d_e]=Rr[p_e]=Rr[u_e]=Rr[h_e]=Rr[f_e]=Rr[m_e]=Rr[g_e]=!0;Rr[$ge]=Rr[Jge]=Rr[s_e]=Rr[qge]=Rr[a_e]=Rr[Yge]=Rr[Xge]=Rr[Qge]=Rr[Zge]=Rr[e_e]=Rr[t_e]=Rr[i_e]=Rr[n_e]=Rr[r_e]=Rr[o_e]=!1;function __e(i){return Ws(i)&&fm(i.length)&&!!Rr[Nl(i)]}var t6=__e;function C_e(i){return function(n){return i(n)}}var Vp=C_e;var i6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,o0=i6&&typeof module=="object"&&module&&!module.nodeType&&module,I_e=o0&&o0.exports===i6,A2=I_e&&Ev.process,y_e=function(){try{var i=o0&&o0.require&&o0.require("util").types;return i||A2&&A2.binding&&A2.binding("util")}catch{}}(),Sd=y_e;var n6=Sd&&Sd.isTypedArray,w_e=n6?Vp(n6):t6,kv=w_e;var v_e=Object.prototype,b_e=v_e.hasOwnProperty;function S_e(i,n){var e=Fr(i),t=!e&&Fv(i),r=!e&&!t&&gh(i),o=!e&&!t&&!r&&kv(i),s=e||t||r||o,a=s?qB(i.length,String):[],l=a.length;for(var c in i)(n||b_e.call(i,c))&&!(s&&(c=="length"||r&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Rv(c,l)))&&a.push(c);return a}var Nv=S_e;function E_e(i,n){return function(e){return i(n(e))}}var Lv=E_e;var A_e=Lv(Object.keys,Object),r6=A_e;var x_e=Object.prototype,T_e=x_e.hasOwnProperty;function O_e(i){if(!mm(i))return r6(i);var n=[];for(var e in Object(i))T_e.call(i,e)&&e!="constructor"&&n.push(e);return n}var o6=O_e;function R_e(i){return Mp(i)?Nv(i):o6(i)}var yc=R_e;function P_e(i){var n=[];if(i!=null)for(var e in Object(i))n.push(e);return n}var s6=P_e;var D_e=Object.prototype,F_e=D_e.hasOwnProperty;function k_e(i){if(!cl(i))return s6(i);var n=mm(i),e=[];for(var t in i)t=="constructor"&&(n||!F_e.call(i,t))||e.push(t);return e}var a6=k_e;function N_e(i){return Mp(i)?Nv(i,!0):a6(i)}var gm=N_e;var L_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M_e=/^\w*$/;function V_e(i,n){if(Fr(i))return!1;var e=typeof i;return e=="number"||e=="symbol"||e=="boolean"||i==null||vd(i)?!0:M_e.test(i)||!L_e.test(i)||n!=null&&i in Object(n)}var _m=V_e;var B_e=ia(Object,"create"),Ed=B_e;function U_e(){this.__data__=Ed?Ed(null):{},this.size=0}var l6=U_e;function j_e(i){var n=this.has(i)&&delete this.__data__[i];return this.size-=n?1:0,n}var c6=j_e;var G_e="__lodash_hash_undefined__",H_e=Object.prototype,W_e=H_e.hasOwnProperty;function z_e(i){var n=this.__data__;if(Ed){var e=n[i];return e===G_e?void 0:e}return W_e.call(n,i)?n[i]:void 0}var d6=z_e;var K_e=Object.prototype,$_e=K_e.hasOwnProperty;function J_e(i){var n=this.__data__;return Ed?n[i]!==void 0:$_e.call(n,i)}var p6=J_e;var q_e="__lodash_hash_undefined__";function Y_e(i,n){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=Ed&&n===void 0?q_e:n,this}var u6=Y_e;function Cm(i){var n=-1,e=i==null?0:i.length;for(this.clear();++n<e;){var t=i[n];this.set(t[0],t[1])}}Cm.prototype.clear=l6;Cm.prototype.delete=c6;Cm.prototype.get=d6;Cm.prototype.has=p6;Cm.prototype.set=u6;var x2=Cm;function X_e(){this.__data__=[],this.size=0}var h6=X_e;function Q_e(i,n){for(var e=i.length;e--;)if(hm(i[e][0],n))return e;return-1}var Bp=Q_e;var Z_e=Array.prototype,e0e=Z_e.splice;function t0e(i){var n=this.__data__,e=Bp(n,i);if(e<0)return!1;var t=n.length-1;return e==t?n.pop():e0e.call(n,e,1),--this.size,!0}var f6=t0e;function i0e(i){var n=this.__data__,e=Bp(n,i);return e<0?void 0:n[e][1]}var m6=i0e;function n0e(i){return Bp(this.__data__,i)>-1}var g6=n0e;function r0e(i,n){var e=this.__data__,t=Bp(e,i);return t<0?(++this.size,e.push([i,n])):e[t][1]=n,this}var _6=r0e;function Im(i){var n=-1,e=i==null?0:i.length;for(this.clear();++n<e;){var t=i[n];this.set(t[0],t[1])}}Im.prototype.clear=h6;Im.prototype.delete=f6;Im.prototype.get=m6;Im.prototype.has=g6;Im.prototype.set=_6;var Up=Im;var o0e=ia(Co,"Map"),jp=o0e;function s0e(){this.size=0,this.__data__={hash:new x2,map:new(jp||Up),string:new x2}}var C6=s0e;function a0e(i){var n=typeof i;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?i!=="__proto__":i===null}var I6=a0e;function l0e(i,n){var e=i.__data__;return I6(n)?e[typeof n=="string"?"string":"hash"]:e.map}var Gp=l0e;function c0e(i){var n=Gp(this,i).delete(i);return this.size-=n?1:0,n}var y6=c0e;function d0e(i){return Gp(this,i).get(i)}var w6=d0e;function p0e(i){return Gp(this,i).has(i)}var v6=p0e;function u0e(i,n){var e=Gp(this,i),t=e.size;return e.set(i,n),this.size+=e.size==t?0:1,this}var b6=u0e;function ym(i){var n=-1,e=i==null?0:i.length;for(this.clear();++n<e;){var t=i[n];this.set(t[0],t[1])}}ym.prototype.clear=C6;ym.prototype.delete=y6;ym.prototype.get=w6;ym.prototype.has=v6;ym.prototype.set=b6;var _h=ym;var h0e="Expected a function";function T2(i,n){if(typeof i!="function"||n!=null&&typeof n!="function")throw new TypeError(h0e);var e=function(){var t=arguments,r=n?n.apply(this,t):t[0],o=e.cache;if(o.has(r))return o.get(r);var s=i.apply(this,t);return e.cache=o.set(r,s)||o,s};return e.cache=new(T2.Cache||_h),e}T2.Cache=_h;var S6=T2;var f0e=500;function m0e(i){var n=S6(i,function(t){return e.size===f0e&&e.clear(),t}),e=n.cache;return n}var E6=m0e;var g0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_0e=/\\(\\)?/g,C0e=E6(function(i){var n=[];return i.charCodeAt(0)===46&&n.push(""),i.replace(g0e,function(e,t,r,o){n.push(r?o.replace(_0e,"$1"):t||e)}),n}),A6=C0e;function I0e(i){return i==null?"":UB(i)}var x6=I0e;function y0e(i,n){return Fr(i)?i:_m(i,n)?[i]:A6(x6(i))}var Mv=y0e;var w0e=1/0;function v0e(i){if(typeof i=="string"||vd(i))return i;var n=i+"";return n=="0"&&1/i==-w0e?"-0":n}var Hp=v0e;function b0e(i,n){n=Mv(n,i);for(var e=0,t=n.length;i!=null&&e<t;)i=i[Hp(n[e++])];return e&&e==t?i:void 0}var wm=b0e;function S0e(i,n,e){var t=i==null?void 0:wm(i,n);return t===void 0?e:t}var T6=S0e;function E0e(i,n){for(var e=-1,t=n.length,r=i.length;++e<t;)i[r+e]=n[e];return i}var Vv=E0e;var A0e=Lv(Object.getPrototypeOf,Object),Bv=A0e;function x0e(){this.__data__=new Up,this.size=0}var O6=x0e;function T0e(i){var n=this.__data__,e=n.delete(i);return this.size=n.size,e}var R6=T0e;function O0e(i){return this.__data__.get(i)}var P6=O0e;function R0e(i){return this.__data__.has(i)}var D6=R0e;var P0e=200;function D0e(i,n){var e=this.__data__;if(e instanceof Up){var t=e.__data__;if(!jp||t.length<P0e-1)return t.push([i,n]),this.size=++e.size,this;e=this.__data__=new _h(t)}return e.set(i,n),this.size=e.size,this}var F6=D0e;function vm(i){var n=this.__data__=new Up(i);this.size=n.size}vm.prototype.clear=O6;vm.prototype.delete=R6;vm.prototype.get=P6;vm.prototype.has=D6;vm.prototype.set=F6;var Wp=vm;function F0e(i,n){return i&&Lp(n,yc(n),i)}var k6=F0e;function k0e(i,n){return i&&Lp(n,gm(n),i)}var N6=k0e;var B6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,L6=B6&&typeof module=="object"&&module&&!module.nodeType&&module,N0e=L6&&L6.exports===B6,M6=N0e?Co.Buffer:void 0,V6=M6?M6.allocUnsafe:void 0;function L0e(i,n){if(n)return i.slice();var e=i.length,t=V6?V6(e):new i.constructor(e);return i.copy(t),t}var U6=L0e;function M0e(i,n){for(var e=-1,t=i==null?0:i.length,r=0,o=[];++e<t;){var s=i[e];n(s,e,i)&&(o[r++]=s)}return o}var j6=M0e;function V0e(){return[]}var Uv=V0e;var B0e=Object.prototype,U0e=B0e.propertyIsEnumerable,G6=Object.getOwnPropertySymbols,j0e=G6?function(i){return i==null?[]:(i=Object(i),j6(G6(i),function(n){return U0e.call(i,n)}))}:Uv,bm=j0e;function G0e(i,n){return Lp(i,bm(i),n)}var H6=G0e;var H0e=Object.getOwnPropertySymbols,W0e=H0e?function(i){for(var n=[];i;)Vv(n,bm(i)),i=Bv(i);return n}:Uv,jv=W0e;function z0e(i,n){return Lp(i,jv(i),n)}var W6=z0e;function K0e(i,n,e){var t=n(i);return Fr(i)?t:Vv(t,e(i))}var Gv=K0e;function $0e(i){return Gv(i,yc,bm)}var s0=$0e;function J0e(i){return Gv(i,gm,jv)}var z6=J0e;var q0e=ia(Co,"DataView"),Hv=q0e;var Y0e=ia(Co,"Promise"),Wv=Y0e;var X0e=ia(Co,"Set"),zv=X0e;var K6="[object Map]",Q0e="[object Object]",$6="[object Promise]",J6="[object Set]",q6="[object WeakMap]",Y6="[object DataView]",Z0e=bd(Hv),eCe=bd(jp),tCe=bd(Wv),iCe=bd(zv),nCe=bd(Ov),Ch=Nl;(Hv&&Ch(new Hv(new ArrayBuffer(1)))!=Y6||jp&&Ch(new jp)!=K6||Wv&&Ch(Wv.resolve())!=$6||zv&&Ch(new zv)!=J6||Ov&&Ch(new Ov)!=q6)&&(Ch=function(i){var n=Nl(i),e=n==Q0e?i.constructor:void 0,t=e?bd(e):"";if(t)switch(t){case Z0e:return Y6;case eCe:return K6;case tCe:return $6;case iCe:return J6;case nCe:return q6}return n});var Ad=Ch;var rCe=Object.prototype,oCe=rCe.hasOwnProperty;function sCe(i){var n=i.length,e=new i.constructor(n);return n&&typeof i[0]=="string"&&oCe.call(i,"index")&&(e.index=i.index,e.input=i.input),e}var X6=sCe;var aCe=Co.Uint8Array,Sm=aCe;function lCe(i){var n=new i.constructor(i.byteLength);return new Sm(n).set(new Sm(i)),n}var Em=lCe;function cCe(i,n){var e=n?Em(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.byteLength)}var Q6=cCe;var dCe=/\w*$/;function pCe(i){var n=new i.constructor(i.source,dCe.exec(i));return n.lastIndex=i.lastIndex,n}var Z6=pCe;var eU=Hs?Hs.prototype:void 0,tU=eU?eU.valueOf:void 0;function uCe(i){return tU?Object(tU.call(i)):{}}var iU=uCe;function hCe(i,n){var e=n?Em(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var nU=hCe;var fCe="[object Boolean]",mCe="[object Date]",gCe="[object Map]",_Ce="[object Number]",CCe="[object RegExp]",ICe="[object Set]",yCe="[object String]",wCe="[object Symbol]",vCe="[object ArrayBuffer]",bCe="[object DataView]",SCe="[object Float32Array]",ECe="[object Float64Array]",ACe="[object Int8Array]",xCe="[object Int16Array]",TCe="[object Int32Array]",OCe="[object Uint8Array]",RCe="[object Uint8ClampedArray]",PCe="[object Uint16Array]",DCe="[object Uint32Array]";function FCe(i,n,e){var t=i.constructor;switch(n){case vCe:return Em(i);case fCe:case mCe:return new t(+i);case bCe:return Q6(i,e);case SCe:case ECe:case ACe:case xCe:case TCe:case OCe:case RCe:case PCe:case DCe:return nU(i,e);case gCe:return new t;case _Ce:case yCe:return new t(i);case CCe:return Z6(i);case ICe:return new t;case wCe:return iU(i)}}var rU=FCe;function kCe(i){return typeof i.constructor=="function"&&!mm(i)?KB(Bv(i)):{}}var oU=kCe;var NCe="[object Map]";function LCe(i){return Ws(i)&&Ad(i)==NCe}var sU=LCe;var aU=Sd&&Sd.isMap,MCe=aU?Vp(aU):sU,lU=MCe;var VCe="[object Set]";function BCe(i){return Ws(i)&&Ad(i)==VCe}var cU=BCe;var dU=Sd&&Sd.isSet,UCe=dU?Vp(dU):cU,pU=UCe;var jCe=1,GCe=2,HCe=4,uU="[object Arguments]",WCe="[object Array]",zCe="[object Boolean]",KCe="[object Date]",$Ce="[object Error]",hU="[object Function]",JCe="[object GeneratorFunction]",qCe="[object Map]",YCe="[object Number]",fU="[object Object]",XCe="[object RegExp]",QCe="[object Set]",ZCe="[object String]",eIe="[object Symbol]",tIe="[object WeakMap]",iIe="[object ArrayBuffer]",nIe="[object DataView]",rIe="[object Float32Array]",oIe="[object Float64Array]",sIe="[object Int8Array]",aIe="[object Int16Array]",lIe="[object Int32Array]",cIe="[object Uint8Array]",dIe="[object Uint8ClampedArray]",pIe="[object Uint16Array]",uIe="[object Uint32Array]",_r={};_r[uU]=_r[WCe]=_r[iIe]=_r[nIe]=_r[zCe]=_r[KCe]=_r[rIe]=_r[oIe]=_r[sIe]=_r[aIe]=_r[lIe]=_r[qCe]=_r[YCe]=_r[fU]=_r[XCe]=_r[QCe]=_r[ZCe]=_r[eIe]=_r[cIe]=_r[dIe]=_r[pIe]=_r[uIe]=!0;_r[$Ce]=_r[hU]=_r[tIe]=!1;function Kv(i,n,e,t,r,o){var s,a=n&jCe,l=n&GCe,c=n&HCe;if(e&&(s=r?e(i,t,r,o):e(i)),s!==void 0)return s;if(!cl(i))return i;var d=Fr(i);if(d){if(s=X6(i),!a)return $B(i,s)}else{var h=Ad(i),_=h==hU||h==JCe;if(gh(i))return U6(i,a);if(h==fU||h==uU||_&&!r){if(s=l||_?{}:oU(i),!a)return l?W6(i,N6(s,i)):H6(i,k6(s,i))}else{if(!_r[h])return r?i:{};s=rU(i,h,a)}}o||(o=new Wp);var C=o.get(i);if(C)return C;o.set(i,s),pU(i)?i.forEach(function(E){s.add(Kv(E,n,e,E,i,o))}):lU(i)&&i.forEach(function(E,R){s.set(R,Kv(E,n,e,R,i,o))});var I=c?l?z6:s0:l?gm:yc,b=d?void 0:I(i);return JB(b||i,function(E,R){b&&(R=E,E=i[R]),Dv(s,R,Kv(E,n,e,R,i,o))}),s}var mU=Kv;var hIe=1,fIe=4;function mIe(i){return mU(i,hIe|fIe)}var Wt=mIe;var gIe="__lodash_hash_undefined__";function _Ie(i){return this.__data__.set(i,gIe),this}var gU=_Ie;function CIe(i){return this.__data__.has(i)}var _U=CIe;function $v(i){var n=-1,e=i==null?0:i.length;for(this.__data__=new _h;++n<e;)this.add(i[n])}$v.prototype.add=$v.prototype.push=gU;$v.prototype.has=_U;var CU=$v;function IIe(i,n){for(var e=-1,t=i==null?0:i.length;++e<t;)if(n(i[e],e,i))return!0;return!1}var IU=IIe;function yIe(i,n){return i.has(n)}var yU=yIe;var wIe=1,vIe=2;function bIe(i,n,e,t,r,o){var s=e&wIe,a=i.length,l=n.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(i),d=o.get(n);if(c&&d)return c==n&&d==i;var h=-1,_=!0,C=e&vIe?new CU:void 0;for(o.set(i,n),o.set(n,i);++h<a;){var I=i[h],b=n[h];if(t)var E=s?t(b,I,h,n,i,o):t(I,b,h,i,n,o);if(E!==void 0){if(E)continue;_=!1;break}if(C){if(!IU(n,function(R,T){if(!yU(C,T)&&(I===R||r(I,R,e,t,o)))return C.push(T)})){_=!1;break}}else if(!(I===b||r(I,b,e,t,o))){_=!1;break}}return o.delete(i),o.delete(n),_}var Jv=bIe;function SIe(i){var n=-1,e=Array(i.size);return i.forEach(function(t,r){e[++n]=[r,t]}),e}var wU=SIe;function EIe(i){var n=-1,e=Array(i.size);return i.forEach(function(t){e[++n]=t}),e}var vU=EIe;var AIe=1,xIe=2,TIe="[object Boolean]",OIe="[object Date]",RIe="[object Error]",PIe="[object Map]",DIe="[object Number]",FIe="[object RegExp]",kIe="[object Set]",NIe="[object String]",LIe="[object Symbol]",MIe="[object ArrayBuffer]",VIe="[object DataView]",bU=Hs?Hs.prototype:void 0,O2=bU?bU.valueOf:void 0;function BIe(i,n,e,t,r,o,s){switch(e){case VIe:if(i.byteLength!=n.byteLength||i.byteOffset!=n.byteOffset)return!1;i=i.buffer,n=n.buffer;case MIe:return!(i.byteLength!=n.byteLength||!o(new Sm(i),new Sm(n)));case TIe:case OIe:case DIe:return hm(+i,+n);case RIe:return i.name==n.name&&i.message==n.message;case FIe:case NIe:return i==n+"";case PIe:var a=wU;case kIe:var l=t&AIe;if(a||(a=vU),i.size!=n.size&&!l)return!1;var c=s.get(i);if(c)return c==n;t|=xIe,s.set(i,n);var d=Jv(a(i),a(n),t,r,o,s);return s.delete(i),d;case LIe:if(O2)return O2.call(i)==O2.call(n)}return!1}var SU=BIe;var UIe=1,jIe=Object.prototype,GIe=jIe.hasOwnProperty;function HIe(i,n,e,t,r,o){var s=e&UIe,a=s0(i),l=a.length,c=s0(n),d=c.length;if(l!=d&&!s)return!1;for(var h=l;h--;){var _=a[h];if(!(s?_ in n:GIe.call(n,_)))return!1}var C=o.get(i),I=o.get(n);if(C&&I)return C==n&&I==i;var b=!0;o.set(i,n),o.set(n,i);for(var E=s;++h<l;){_=a[h];var R=i[_],T=n[_];if(t)var A=s?t(T,R,_,n,i,o):t(R,T,_,i,n,o);if(!(A===void 0?R===T||r(R,T,e,t,o):A)){b=!1;break}E||(E=_=="constructor")}if(b&&!E){var U=i.constructor,z=n.constructor;U!=z&&"constructor"in i&&"constructor"in n&&!(typeof U=="function"&&U instanceof U&&typeof z=="function"&&z instanceof z)&&(b=!1)}return o.delete(i),o.delete(n),b}var EU=HIe;var WIe=1,AU="[object Arguments]",xU="[object Array]",qv="[object Object]",zIe=Object.prototype,TU=zIe.hasOwnProperty;function KIe(i,n,e,t,r,o){var s=Fr(i),a=Fr(n),l=s?xU:Ad(i),c=a?xU:Ad(n);l=l==AU?qv:l,c=c==AU?qv:c;var d=l==qv,h=c==qv,_=l==c;if(_&&gh(i)){if(!gh(n))return!1;s=!0,d=!1}if(_&&!d)return o||(o=new Wp),s||kv(i)?Jv(i,n,e,t,r,o):SU(i,n,l,e,t,r,o);if(!(e&WIe)){var C=d&&TU.call(i,"__wrapped__"),I=h&&TU.call(n,"__wrapped__");if(C||I){var b=C?i.value():i,E=I?n.value():n;return o||(o=new Wp),r(b,E,e,t,o)}}return _?(o||(o=new Wp),EU(i,n,e,t,r,o)):!1}var OU=KIe;function RU(i,n,e,t,r){return i===n?!0:i==null||n==null||!Ws(i)&&!Ws(n)?i!==i&&n!==n:OU(i,n,e,t,RU,r)}var Yv=RU;var $Ie=1,JIe=2;function qIe(i,n,e,t){var r=e.length,o=r,s=!t;if(i==null)return!o;for(i=Object(i);r--;){var a=e[r];if(s&&a[2]?a[1]!==i[a[0]]:!(a[0]in i))return!1}for(;++r<o;){a=e[r];var l=a[0],c=i[l],d=a[1];if(s&&a[2]){if(c===void 0&&!(l in i))return!1}else{var h=new Wp;if(t)var _=t(c,d,l,i,n,h);if(!(_===void 0?Yv(d,c,$Ie|JIe,t,h):_))return!1}}return!0}var PU=qIe;function YIe(i){return i===i&&!cl(i)}var Xv=YIe;function XIe(i){for(var n=yc(i),e=n.length;e--;){var t=n[e],r=i[t];n[e]=[t,r,Xv(r)]}return n}var DU=XIe;function QIe(i,n){return function(e){return e==null?!1:e[i]===n&&(n!==void 0||i in Object(e))}}var Qv=QIe;function ZIe(i){var n=DU(i);return n.length==1&&n[0][2]?Qv(n[0][0],n[0][1]):function(e){return e===i||PU(e,i,n)}}var FU=ZIe;function eye(i,n){return i!=null&&n in Object(i)}var kU=eye;function tye(i,n,e){n=Mv(n,i);for(var t=-1,r=n.length,o=!1;++t<r;){var s=Hp(n[t]);if(!(o=i!=null&&e(i,s)))break;i=i[s]}return o||++t!=r?o:(r=i==null?0:i.length,!!r&&fm(r)&&Rv(s,r)&&(Fr(i)||Fv(i)))}var NU=tye;function iye(i,n){return i!=null&&NU(i,n,kU)}var LU=iye;var nye=1,rye=2;function oye(i,n){return _m(i)&&Xv(n)?Qv(Hp(i),n):function(e){var t=T6(e,i);return t===void 0&&t===n?LU(e,i):Yv(n,t,nye|rye)}}var MU=oye;function sye(i){return function(n){return n?.[i]}}var VU=sye;function aye(i){return function(n){return wm(n,i)}}var BU=aye;function lye(i){return _m(i)?VU(Hp(i)):BU(i)}var UU=lye;function cye(i){return typeof i=="function"?i:i==null?Av:typeof i=="object"?Fr(i)?MU(i[0],i[1]):FU(i):UU(i)}var jU=cye;function dye(i){return function(n,e,t){for(var r=-1,o=Object(n),s=t(n),a=s.length;a--;){var l=s[i?a:++r];if(e(o[l],l,o)===!1)break}return n}}var GU=dye;var pye=GU(),HU=pye;function uye(i,n){return i&&HU(i,n,yc)}var WU=uye;function hye(i,n){return function(e,t){if(e==null)return e;if(!Mp(e))return i(e,t);for(var r=e.length,o=n?r:-1,s=Object(e);(n?o--:++o<r)&&t(s[o],o,s)!==!1;);return e}}var zU=hye;var fye=zU(WU),KU=fye;function mye(i,n){var e=-1,t=Mp(i)?Array(i.length):[];return KU(i,function(r,o,s){t[++e]=n(r,o,s)}),t}var $U=mye;function gye(i,n){var e=i.length;for(i.sort(n);e--;)i[e]=i[e].value;return i}var JU=gye;function _ye(i,n){if(i!==n){var e=i!==void 0,t=i===null,r=i===i,o=vd(i),s=n!==void 0,a=n===null,l=n===n,c=vd(n);if(!a&&!c&&!o&&i>n||o&&s&&l&&!a&&!c||t&&s&&l||!e&&l||!r)return 1;if(!t&&!o&&!c&&i<n||c&&e&&r&&!t&&!o||a&&e&&r||!s&&r||!l)return-1}return 0}var qU=_ye;function Cye(i,n,e){for(var t=-1,r=i.criteria,o=n.criteria,s=r.length,a=e.length;++t<s;){var l=qU(r[t],o[t]);if(l){if(t>=a)return l;var c=e[t];return l*(c=="desc"?-1:1)}}return i.index-n.index}var YU=Cye;function Iye(i,n,e){n.length?n=um(n,function(o){return Fr(o)?function(s){return wm(s,o.length===1?o[0]:o)}:o}):n=[Av];var t=-1;n=um(n,Vp(jU));var r=$U(i,function(o,s,a){var l=um(n,function(c){return c(o)});return{criteria:l,index:++t,value:o}});return JU(r,function(o,s){return YU(o,s,e)})}var XU=Iye;function yye(i,n,e,t){return i==null?[]:(Fr(n)||(n=n==null?[]:[n]),e=t?void 0:e,Fr(e)||(e=e==null?[]:[e]),XU(i,n,e))}var R2=yye;var Am=(()=>{class i{constructor(e,t){this.fwcUserService=e,this.translate=t,this.menuSettingsTree={},this.menuSettingsPosition={},this.menuSettingsRule={},this.menuSettingsGroupObject={},this.menuSettingsRuleGroup={},this.alive=!0,this.buildMenus()}buildMenus(){this.menuSettingsTree={},this.menuSettingsPosition={},this.menuSettingsRule={},this.menuSettingsGroupObject={},this.menuSettingsRuleGroup={};let e={items:[]},t={items:[{id:V.FOLDER_EXPAND,text:this.translate.instant("CONTEXT.FOLDERS.EXPAND"),icon:"fwcMenuIcon fwci-expand fwcBlue"},{id:V.FOLDER_COLLAPSE,text:this.translate.instant("CONTEXT.FOLDERS.COLLAPSE"),icon:"fwcMenuIcon fwci-collapse fwcBlue"}]},r={items:[{id:V.DUPLICATE,text:this.translate.instant("CONTEXT.OBJECTS.DUPLICATE"),icon:"fwcMenuIcon fwci-copy fwcBlue",finalObject:!0,objectInGroup:!1},{id:V.EDIT,text:this.translate.instant("CONTEXT.OBJECTS.EDIT"),icon:"fwcMenuIcon fwci-edit fwcBlue",finalObject:!0},{id:V.DELETE,text:this.translate.instant("CONTEXT.OBJECTS.DELETE"),icon:"fwcMenuIcon fwci-delete fwcRed",finalObject:!0,objectInGroup:!1,userObject:!0},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0}]},o={items:[{id:V.COMPILE_IPTABLES,text:this.translate.instant("CONTEXT.COMPILER.IPTABLES")},{id:V.COMPILE_NFTABLES,text:this.translate.instant("CONTEXT.COMPILER.NFTABLES")}]},s=[{id:V.SYSTEM_COMPILE,text:this.translate.instant("CONTEXT.FW.COMPILE"),icon:"fwcMenuIcon fwci-compilerule fwcBlue",finalObject:!0,visible:!0},{id:V.SYSTEM_INSTALL,text:this.translate.instant("CONTEXT.FW.INSTALL"),icon:"fwcMenuIcon fwci-installfirewall fwcBlue",finalObject:!0,visible:!0},{id:V.SEPARATOR,type:"separator"},{id:V.SYSTEM_SHOW_CONFIG,text:this.translate.instant("CONTEXT.VPN_CONFIG.FILE"),icon:"fwcMenuIcon2 fwci2-file-vpnconfig fwcBlue",finalObject:!0,visible:!0},{id:V.SYSTEM_DOWNLOAD_CONFIG,text:this.translate.instant("CONTEXT.VPN_CONFIG.DOWNLOAD_FILE"),icon:"fa fa-download fwcBlue",finalObject:!0,visible:!0},{id:V.SEPARATOR,type:"separator"},{id:V.SYSTEMCTL,text:this.translate.instant("CONTEXT.SYSTEMCTL.SYSTEMCTL"),icon:"fa fa-terminal fwcBlue",finalObject:!0,visible:!0}];this.menuSettingsTree.NO_MENU={items:[{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS")}]},this.menuSettingsTree[M.OBJ_FIREWALL]=Wt(e),this.menuSettingsTree[M.OBJ_FIREWALL].items=this.menuSettingsTree[M.OBJ_FIREWALL].items.concat([{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),finalObject:!0,clusterNode:!0,visible:!1},{id:V.FIREWALL_EDIT,text:this.translate.instant("CONTEXT.FW.EDIT"),icon:"fwcMenuIcon fwci-editfirewall fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_COMPILE,text:this.translate.instant("CONTEXT.FW.COMPILE"),icon:"fwcMenuIcon fwci-compilefirewall fwcBlue",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_INSTALL,text:this.translate.instant("CONTEXT.FW.INSTALL"),icon:"fwcMenuIcon fwci-installfirewall fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.PLUGINS,text:this.translate.instant("FW.MSG_FW_EDITION.PLUGINS"),icon:"fa fa-puzzle-piece fwcOrange",finalObject:!0,clusterNode:!1,visible:!0},{id:V.NGFW,text:this.translate.instant("NGFW.TITLE"),icon:"fa fa-n fwcOrange",finalObject:!0,clusterNode:!1,visible:!0},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.POLICY_PANEL_SHOW,text:this.translate.instant("CONTEXT.FW.SHOW"),icon:"fa fa-eye fwcBlue",finalObject:!0,clusterNode:!1},{id:V.POLICY_PANEL_DOWNLOAD,text:this.translate.instant("CONTEXT.FW.DOWNLOAD"),icon:"fa fa-download fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_DELETE,text:this.translate.instant("CONTEXT.FW.DELETE"),icon:"fwcMenuIcon fwci-delete fwcRed",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_TO_CLUSTER,text:this.translate.instant("CONTEXT.FW.TO_CLUSTER"),icon:"fwcMenuIcon2 fwci2-firewall_to_cluster fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_CLONE,text:this.translate.instant("CONTEXT.FW.CLONE"),icon:"fwcMenuIcon2 fwci2-firewall_clone fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_IPTABLES_IMPORT,text:this.translate.instant("CONTEXT.FW.IPTABLES_SAVE_IMPORT"),icon:"fwcMenuIcon fwci-input fwcBlue",finalObject:!0,clusterNode:!1},{id:V.FIREWALL_IPTABLES_EXPORT,text:this.translate.instant("CONTEXT.FW.IPTABLES_SAVE_EXPORT"),icon:"fwcMenuIcon fwci-output fwcBlue",finalObject:!0,clusterNode:!1},,]),this.menuSettingsTree[M.POLICY_INPUT]={items:[{id:V.POLICY_LOAD,text:this.translate.instant("CONTEXT.POLICY.LOAD"),finalObject:!0,icon:"fwcMenuIcon fwci-loadpolicy fwcBlue"}]},this.menuSettingsTree[M.POLICY_OUTPUT]=this.menuSettingsTree[M.POLICY_FORWARD]=this.menuSettingsTree[M.POLICY_ROUTING]=this.menuSettingsTree[M.POLICY_SNAT]=this.menuSettingsTree[M.POLICY_DNAT]=this.menuSettingsTree[M.POLICY_INPUT]=this.menuSettingsTree[M.DHCP]=this.menuSettingsTree[M.DHCP_FIXED_IP]=this.menuSettingsTree[M.KEEPALIVED]=this.menuSettingsTree[M.HAPROXY],this.menuSettingsTree[M.POLICY_INPUT6]=this.menuSettingsTree[M.POLICY_OUTPUT6]=this.menuSettingsTree[M.POLICY_FORWARD6]=this.menuSettingsTree[M.POLICY_ROUTING6]=this.menuSettingsTree[M.POLICY_SNAT6]=this.menuSettingsTree[M.POLICY_DNAT6]=this.menuSettingsTree[M.POLICY_INPUT],this.menuSettingsTree[M.FOLDER_POLICY]=Wt(t),this.menuSettingsTree[M.FOLDER_POLICY6]=Wt(t),this.menuSettingsTree[M.FOLDER_NAT]=t,this.menuSettingsTree[M.FOLDER]=Wt(t),this.menuSettingsTree[M.FOLDER].items=this.menuSettingsTree[M.FOLDER].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.FOLDER_RENAME,text:this.translate.instant("CONTEXT.FD.RENAME"),icon:"fwcMenuIcon fwci2-renamefolder fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.FIREWALL_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FDF"),icon:"fwcMenuIcon fwci-newfirewall fwcGreen"},{id:V.CLUSTER_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FDC"),icon:"fwcMenuIcon fwci2-newcluster fwcGreen"},{id:V.FOLDER_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FD"),icon:"fwcMenuIcon fwci2-newfolder fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.FOLDER_DELETE,text:this.translate.instant("CONTEXT.FD.DELETE"),icon:"fwcMenuIcon fwci2-deletefolder fwcRed"}]),this.menuSettingsTree[M.FOLDER_FW]={items:[{id:V.FIREWALL_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FDF"),icon:"fwci-newfirewall fwcGreen"},{id:V.CLUSTER_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FDC"),icon:"fwci2-newcluster fwcGreen"},{id:V.FOLDER_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FD"),icon:"fwci2-newfolder fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.FIREWALL_COMPILE_ALL,text:this.translate.instant("CONTEXT.FDF.COMPILE_ALL"),icon:"fwci-compileallfirewalls fwcBlue"},{id:V.FIREWALL_INSTALL_ALL,text:this.translate.instant("CONTEXT.FDF.INSTALL_ALL"),icon:"fwci-installallfirewalls fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.FIREWALL_IMPORT,text:this.translate.instant("CONTEXT.FDF.IMPORT"),icon:"fwci2-moveup fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwci-reload fwcBlue"},{id:V.TREE_REPAIR,text:this.translate.instant("CONTEXT.FDF.REPAIR"),icon:"fa fa-wrench fwcBlue"},{id:V.SEPARATOR,type:"separator"}].concat(t.items)},this.menuSettingsTree[M.FOLDER_CA]=Wt(t),this.menuSettingsTree[M.FOLDER_CA].items=this.menuSettingsTree[M.FOLDER_CA].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FCA"),icon:"fwcMenuIcon2 fwci2-new-ca fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwcMenuIcon fwci-reload fwcBlue"}]),this.menuSettingsTree[M.OPENVPN_CA]=Wt(t),this.menuSettingsTree[M.OPENVPN_CA].items=this.menuSettingsTree[M.OPENVPN_CA].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.CA"),icon:"fwcMenuIcon2 fwci2-new-certificate fwcGreen",finalObject:!0,disableOnCACreation:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_NEW_PREFIX,text:this.translate.instant("CONTEXT.NEW_OBJ.PRE"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-new fwcGreen",finalObject:!0,disableOnCACreation:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_VIEW,text:this.translate.instant("CONTEXT.FCA.VIEW"),icon:"fwcTreeIcon fwci2-ca fwcBlue",finalObject:!0},{id:V.CA_EDIT,text:this.translate.instant("CONTEXT.FCA.EDIT"),icon:"fwcMenuIcon2 fwci2-edit-ca fwcBlue",finalObject:!0},{id:V.CA_DELETE,text:this.translate.instant("CONTEXT.FCA.DELETE"),icon:"fwcMenuIcon2 fwci2-delete-ca fwcRed",finalObject:!0}]),this.menuSettingsTree[M.OPENVPN_CERT]=Wt(t),this.menuSettingsTree[M.OPENVPN_CERT].items=this.menuSettingsTree[M.OPENVPN_CERT].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_VIEW,text:this.translate.instant("CONTEXT.CA.VIEW_CERT"),icon:"fwcTreeIcon fwci2-certificate fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_EDIT,text:this.translate.instant("CONTEXT.CA.EDIT_CERT"),icon:"fwcMenuIcon2 fwci2-edit-certificate fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_DELETE,text:this.translate.instant("CONTEXT.CA.DELETE_CERT"),icon:"fwcMenuIcon2 fwci2-delete-certificate fwcRed",finalObject:!0}]),this.menuSettingsTree[M.OPENVPN_PREFIX_FOLDER]=Wt(t),this.menuSettingsTree[M.OPENVPN_PREFIX_FOLDER].items=this.menuSettingsTree[M.OPENVPN_PREFIX_FOLDER].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.CA"),icon:"fwcMenuIcon2 fwci2-new-certificate fwcGreen",finalObject:!0,disableOnCACreation:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_EDIT_PREFIX,text:this.translate.instant("CONTEXT.CA.EDIT_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_DELETE_PREFIX,text:this.translate.instant("CONTEXT.CA.DELETE_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0}]),this.menuSettingsTree[M.WIREGUARD_PREFIX_FOLDER]=Wt(t),this.menuSettingsTree[M.WIREGUARD_PREFIX_FOLDER].items=this.menuSettingsTree[M.WIREGUARD_PREFIX_FOLDER].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.CA"),icon:"fwcMenuIcon2 fwci2-new-certificate fwcGreen",finalObject:!0,disableOnCACreation:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_EDIT_PREFIX,text:this.translate.instant("CONTEXT.CA.EDIT_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_DELETE_PREFIX,text:this.translate.instant("CONTEXT.CA.DELETE_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0}]),this.menuSettingsTree[M.IPSEC_PREFIX_FOLDER]=Wt(t),this.menuSettingsTree[M.IPSEC_PREFIX_FOLDER].items=this.menuSettingsTree[M.IPSEC_PREFIX_FOLDER].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.CA"),icon:"fwcMenuIcon2 fwci2-new-certificate fwcGreen",finalObject:!0,disableOnCACreation:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_EDIT_PREFIX,text:this.translate.instant("CONTEXT.CA.EDIT_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CA_CRT_DELETE_PREFIX,text:this.translate.instant("CONTEXT.CA.DELETE_CERT_PREFIX_FOLDER"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0}]),this.menuSettingsTree[M.OPENVPN_PREFIX]=Wt(t),this.menuSettingsTree[M.OPENVPN_PREFIX].items=this.menuSettingsTree[M.OPENVPN_PREFIX].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_EDIT_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0,objectInGroup:!1,container:qe.C_FIREWALLS_CONDENSED},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED}]),this.menuSettingsTree[M.OPENVPN_CONFIG_SER]=Wt(t),this.menuSettingsTree[M.OPENVPN_CONFIG_SER].items=this.menuSettingsTree[M.OPENVPN_CONFIG_SER].items.concat([{id:V.VPN_CONFIG_NEW_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.NEW_PREFIX"),icon:"fwcMenuIcon2 fwci2-syncccd-vpnconfig fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_SER,objectInGroup:!1},{id:V.SEPARATOR,type:"separator"},{id:V.EDIT,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT"),icon:"fwcMenuIcon2 fwci2-openvpn fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_STATUS,text:this.translate.instant("CONTEXT.VPN_CONFIG.STATUS"),icon:"fwcMenuIcon fwci-help fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_SER},{id:V.VPN_CONFIG_HISTORIC,text:this.translate.instant("CONTEXT.VPN_CONFIG.HISTORIC"),icon:"fa fa-list-alt fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.VPN_CONFIG_FILE,text:this.translate.instant("CONTEXT.VPN_CONFIG.FILE"),icon:"fwcMenuIcon2 fwci2-file-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.VPN_CONFIG_INSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.INSTALL"),icon:"fwcMenuIcon2 fwci2-install-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.VPN_CONFIG_SYNC_CCD,text:this.translate.instant("CONTEXT.VPN_CONFIG.SYNC_CCD"),icon:"fwcMenuIcon2 fwci2-syncccd-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_SER,objectInGroup:!1},{id:V.VPN_CONFIG_INST_WINDOWS,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_WINDOWS"),icon:"fa-brands fa-windows fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_CLI},{id:V.VPN_CONFIG_UNINSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.UNINSTALL"),icon:"fwcMenuIcon2 fwci2-uninstall-vpnconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE"),icon:"fwcMenuIcon2 fwci2-openvpn-deleteconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.VPN_CONFIG_BLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_BLOCK"),icon:"fwcMenuIcon fwci-reject fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_CLI},{id:V.VPN_CONFIG_UNBLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_UNBLOCK"),icon:"fwcMenuIcon fwci-accept fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_CLI},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_CLI},{id:V.SYSTEMCTL,text:this.translate.instant("CONTEXT.SYSTEMCTL.SYSTEMCTL"),icon:"fa fa-terminal fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.OPENVPN_CONFIG_SER}]),this.menuSettingsTree[M.WIREGUARD_PREFIX]=Wt(t),this.menuSettingsTree[M.WIREGUARD_PREFIX].items=this.menuSettingsTree[M.WIREGUARD_PREFIX].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_EDIT_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0,objectInGroup:!1,container:qe.C_FIREWALLS_CONDENSED},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED}]),this.menuSettingsTree[M.WIREGUARD_CONFIG_SER]=Wt(t),this.menuSettingsTree[M.WIREGUARD_CONFIG_SER].items=this.menuSettingsTree[M.WIREGUARD_CONFIG_SER].items.concat([{id:V.VPN_CONFIG_NEW_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.NEW_PREFIX"),icon:"fwcMenuIcon2 fwci2-syncccd-vpnconfig fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_SER,objectInGroup:!1},{id:V.SEPARATOR,type:"separator"},{id:V.EDIT,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT"),icon:"fwcMenuIcon2 fwci2-openvpn fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_FILE,text:this.translate.instant("CONTEXT.VPN_CONFIG.FILE"),icon:"fwcMenuIcon2 fwci2-file-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.VPN_CONFIG_INSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.INSTALL"),icon:"fwcMenuIcon2 fwci2-install-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_SER,objectInGroup:!1},{id:V.VPN_CONFIG_UNINSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.UNINSTALL"),icon:"fwcMenuIcon2 fwci2-uninstall-vpnconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_SER,objectInGroup:!1},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE"),icon:"fwcMenuIcon2 fwci2-openvpn-deleteconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.VPN_CONFIG_BLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_BLOCK"),icon:"fwcMenuIcon fwci-reject fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_CLI},{id:V.VPN_CONFIG_UNBLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_UNBLOCK"),icon:"fwcMenuIcon fwci-accept fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_CLI},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_CLI},{id:V.SYSTEMCTL,text:this.translate.instant("CONTEXT.SYSTEMCTL.SYSTEMCTL"),icon:"fa fa-terminal fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.WIREGUARD_CONFIG_SER}]),this.menuSettingsTree[M.IPSEC_PREFIX]=Wt(t),this.menuSettingsTree[M.IPSEC_PREFIX].items=this.menuSettingsTree[M.IPSEC_PREFIX].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_EDIT_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-edit fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE_PREFIX"),icon:"fwcMenuIcon2 fwci2-certificate-prefix-delete fwcRed",finalObject:!0,objectInGroup:!1,container:qe.C_FIREWALLS_CONDENSED},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED}]),this.menuSettingsTree[M.IPSEC_CONFIG_SER]=Wt(t),this.menuSettingsTree[M.IPSEC_CONFIG_SER].items=this.menuSettingsTree[M.IPSEC_CONFIG_SER].items.concat([{id:V.VPN_CONFIG_NEW_PREFIX,text:this.translate.instant("CONTEXT.VPN_CONFIG.NEW_PREFIX"),icon:"fwcMenuIcon2 fwci2-syncccd-vpnconfig fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.IPSEC_CONFIG_SER,objectInGroup:!1},{id:V.SEPARATOR,type:"separator"},{id:V.EDIT,text:this.translate.instant("CONTEXT.VPN_CONFIG.EDIT"),icon:"fwcMenuIcon2 fwci2-openvpn fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_FILE,text:this.translate.instant("CONTEXT.VPN_CONFIG.FILE"),icon:"fwcMenuIcon2 fwci2-file-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.VPN_CONFIG_INSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.INSTALL"),icon:"fwcMenuIcon2 fwci2-install-vpnconfig fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1,onlyOnNodeType:M.IPSEC_CONFIG_SER},{id:V.VPN_CONFIG_UNINSTALL,text:this.translate.instant("CONTEXT.VPN_CONFIG.UNINSTALL"),icon:"fwcMenuIcon2 fwci2-uninstall-vpnconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1,onlyOnNodeType:M.IPSEC_CONFIG_SER},{id:V.SEPARATOR,type:"separator"},{id:V.VPN_CONFIG_DELETE,text:this.translate.instant("CONTEXT.VPN_CONFIG.DELETE"),icon:"fwcMenuIcon2 fwci2-openvpn-deleteconfig fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,objectInGroup:!1},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",finalObject:!0,objectInGroup:!0,userObject:!0},{id:V.VPN_CONFIG_BLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_BLOCK"),icon:"fwcMenuIcon fwci-reject fwcRed",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.IPSEC_CONFIG_CLI},{id:V.VPN_CONFIG_UNBLOCK,text:this.translate.instant("CONTEXT.VPN_CONFIG.INST_UNBLOCK"),icon:"fwcMenuIcon fwci-accept fwcGreen",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.IPSEC_CONFIG_CLI},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.IPSEC_CONFIG_CLI},{id:V.SYSTEMCTL,text:this.translate.instant("CONTEXT.SYSTEMCTL.SYSTEMCTL"),icon:"fa fa-terminal fwcBlue",finalObject:!0,container:qe.C_FIREWALLS_CONDENSED,onlyOnNodeType:M.IPSEC_CONFIG_SER}]),this.menuSettingsTree[M.OPENVPN_CONFIG_CLI]=Wt(this.menuSettingsTree[M.OPENVPN_CONFIG_SER]),this.menuSettingsTree[M.WIREGUARD_CONFIG_CLI]=Wt(this.menuSettingsTree[M.WIREGUARD_CONFIG_SER]),this.menuSettingsTree[M.IPSEC_CONFIG_CLI]=Wt(this.menuSettingsTree[M.IPSEC_CONFIG_SER]),this.menuSettingsTree[M.FOLDER_CLUSTER_FW]=Wt(t),this.menuSettingsTree[M.FOLDER_CLUSTER]=Wt(t),this.menuSettingsTree[M.FOLDER_CLUSTER].items=this.menuSettingsTree[M.FOLDER_CLUSTER].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwcMenuIcon fwci-reload fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.CLUSTER_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.FDC"),icon:"fwcMenuIcon fwci2-newcluster fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.CLUSTER_COMPILE_ALL,text:this.translate.instant("CONTEXT.FDF.COMPILE_ALL"),icon:"fwcMenuIcon fwci-compileallfirewalls fwcBlue"}]),this.menuSettingsTree[M.FOLDER_INTERFACES]=Wt(t),this.menuSettingsTree[M.FOLDER_INTERFACES].items=this.menuSettingsTree[M.FOLDER_INTERFACES].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.NEW_INTERFACE,text:this.translate.instant("CONTEXT.NEW_OBJ.FDI"),icon:"fwcMenuIcon fwci-newinterface fwcGreen",finalObject:!0,clusterNode:!1},{id:V.NEW_INTERFACE,text:this.translate.instant("CONTEXT.NEW_OBJ.FDI"),icon:"fwcMenuIcon fwci-newinterface fwcGreen",finalObject:!0,clusterNode:!0}]),this.menuSettingsTree[M.FOLDER_OBJECTS]={items:[{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwcMenuIcon fwci-reload fwcBlue"},{id:V.TREE_REPAIR,text:this.translate.instant("CONTEXT.FDF.REPAIR"),icon:"fa fa-wrench fwcBlue"},{id:V.SEPARATOR,type:"separator"}].concat(t.items)},this.menuSettingsTree[M.FOLDER_SERVICES]={items:[{id:V.SEPARATOR,type:"separator"},{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwcMenuIcon fwci-reload fwcBlue"},{id:V.TREE_REPAIR,text:this.translate.instant("CONTEXT.FDF.REPAIR"),icon:"fa fa-wrench fwcBlue"}].concat(t.items)},this.menuSettingsTree[M.FOLDER_TIME]=Wt(t),this.menuSettingsTree[M.FOLDER_TIME].items=this.menuSettingsTree[M.FOLDER_TIME].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwcMenuIcon fwci-reload fwcBlue"}]),this.menuSettingsTree[M.OBJ_IF_FW]=Wt(t),this.menuSettingsTree[M.OBJ_IF_FW].items.push({id:V.SEPARATOR,type:"separator",finalObject:!0}),this.menuSettingsTree[M.OBJ_IF_FW].items.push({id:V.NEW_ADDRESS,text:this.translate.instant("CONTEXT.NEW_OBJ.IFF"),icon:"fwcMenuIcon fwci-newadress fwcGreen",finalObject:!0,userObject:!0}),this.menuSettingsTree[M.OBJ_IF_FW].items=this.menuSettingsTree[M.OBJ_IF_FW].items.concat(r.items),this.menuSettingsTree[M.OBJ_IF_HOST]=Wt(t),this.menuSettingsTree[M.OBJ_IF_HOST].items.push({id:V.SEPARATOR,type:"separator",finalObject:!0}),this.menuSettingsTree[M.OBJ_IF_HOST].items.push({id:V.NEW_ADDRESS,text:this.translate.instant("CONTEXT.NEW_OBJ.IFF"),icon:"fwcMenuIcon fwci-newadress fwcGreen",finalObject:!0,userObject:!0}),this.menuSettingsTree[M.OBJ_IF_HOST].items=this.menuSettingsTree[M.OBJ_IF_HOST].items.concat(r.items),this.menuSettingsTree[M.OBJ_ADDRESS]=Wt(t),this.menuSettingsTree[M.OBJ_ADDRESS].items.push({id:V.NEW_ADDRESS,text:this.translate.instant("CONTEXT.NEW_OBJ.IFF"),icon:"fwcMenuIcon fwci-newadress fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_ADDRESS].items=this.menuSettingsTree[M.OBJ_ADDRESS].items.concat(r.items),this.menuSettingsTree[M.OBJ_GROUP]=Wt(t),this.menuSettingsTree[M.OBJ_GROUP].items.push({id:V.NEW_GROUP,text:this.translate.instant("CONTEXT.NEW_OBJ.OIG"),icon:"fwcMenuIcon fwci-objectgroup fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_GROUP].items=this.menuSettingsTree[M.OBJ_GROUP].items.concat(r.items),this.menuSettingsTree[M.OBJ_HOST]=Wt(t),this.menuSettingsTree[M.OBJ_HOST].items.push({id:V.NEW_HOST,text:this.translate.instant("CONTEXT.NEW_OBJ.OIH"),icon:"fwcMenuIcon fwci-host fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_HOST].items.push({id:V.SEPARATOR,type:"separator",finalObject:!0}),this.menuSettingsTree[M.OBJ_HOST].items.push({id:V.NEW_INTERFACE,text:this.translate.instant("CONTEXT.NEW_OBJ.FDI"),icon:"fwcMenuIcon fwci-newinterface fwcGreen",finalObject:!0,userObject:!0}),this.menuSettingsTree[M.OBJ_HOST].items=this.menuSettingsTree[M.OBJ_HOST].items.concat(r.items),this.menuSettingsTree[M.OBJ_DNS]=Wt(t),this.menuSettingsTree[M.OBJ_DNS].items.push({id:V.NEW_DNS,text:this.translate.instant("CONTEXT.NEW_OBJ.ONS"),icon:"fwcMenuIcon fwci-network fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_DNS].items=this.menuSettingsTree[M.OBJ_DNS].items.concat(r.items),this.menuSettingsTree[M.OBJ_NETWORK]=Wt(t),this.menuSettingsTree[M.OBJ_NETWORK].items.push({id:V.NEW_NETWORK,text:this.translate.instant("CONTEXT.NEW_OBJ.OIN"),icon:"fwcMenuIcon fwci-network fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_NETWORK].items=this.menuSettingsTree[M.OBJ_NETWORK].items.concat(r.items),this.menuSettingsTree[M.OBJ_IP_RANGE]=Wt(t),this.menuSettingsTree[M.OBJ_IP_RANGE].items.push({id:V.NEW_IP_RANGE,text:this.translate.instant("CONTEXT.NEW_OBJ.OIR"),icon:"fwcMenuIcon fwci-addressrange fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_IP_RANGE].items=this.menuSettingsTree[M.OBJ_IP_RANGE].items.concat(r.items),this.menuSettingsTree[M.SERVICE_IP]=Wt(t),this.menuSettingsTree[M.SERVICE_IP].items.push({id:V.NEW_IP_SERVICE,text:this.translate.instant("CONTEXT.NEW_OBJ.SOI"),icon:"fwcMenuIcon fwci-ipservice fwcGreen",finalObject:!1}),this.menuSettingsTree[M.SERVICE_IP].items=this.menuSettingsTree[M.SERVICE_IP].items.concat(r.items),this.menuSettingsTree[M.SERVICE_ICMP]=Wt(t),this.menuSettingsTree[M.SERVICE_ICMP].items.push({id:V.NEW_ICMP_SERVICE,text:this.translate.instant("CONTEXT.NEW_OBJ.SOM"),icon:"fwcMenuIcon fwci-icmpservice fwcGreen",finalObject:!1}),this.menuSettingsTree[M.SERVICE_ICMP].items=this.menuSettingsTree[M.SERVICE_ICMP].items.concat(r.items),this.menuSettingsTree[M.SERVICE_TCP]=Wt(t),this.menuSettingsTree[M.SERVICE_TCP].items.push({id:V.NEW_TCP_SERVICE,text:this.translate.instant("CONTEXT.NEW_OBJ.SOT"),icon:"fwcMenuIcon fwci-tcpservice fwcGreen",finalObject:!1}),this.menuSettingsTree[M.SERVICE_TCP].items=this.menuSettingsTree[M.SERVICE_TCP].items.concat(r.items),this.menuSettingsTree[M.SERVICE_UDP]=Wt(t),this.menuSettingsTree[M.SERVICE_UDP].items.push({id:V.NEW_UDP_SERVICE,text:this.translate.instant("CONTEXT.NEW_OBJ.SOU"),icon:"fwcMenuIcon fwci-udpservice fwcGreen",finalObject:!1}),this.menuSettingsTree[M.SERVICE_UDP].items=this.menuSettingsTree[M.SERVICE_UDP].items.concat(r.items),this.menuSettingsTree[M.SERVICE_GROUP]=Wt(t),this.menuSettingsTree[M.SERVICE_GROUP].items.push({id:V.NEW_SERVICE_GROUP,text:this.translate.instant("CONTEXT.NEW_OBJ.SOG"),icon:"fwcMenuIcon fwci-servicegroup fwcGreen",finalObject:!1}),this.menuSettingsTree[M.SERVICE_GROUP].items=this.menuSettingsTree[M.SERVICE_GROUP].items.concat(r.items),this.menuSettingsTree[M.OBJ_CLUSTER]=Wt(t),this.menuSettingsTree[M.OBJ_CLUSTER].items=this.menuSettingsTree[M.OBJ_CLUSTER].items.concat([{id:V.CLUSTER_EDIT,text:this.translate.instant("CONTEXT.CL.EDIT"),icon:"fwcMenuIcon fwci-edit fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.FIREWALL_COMPILE,text:this.translate.instant("CONTEXT.CL.COMPILE"),icon:"fwcMenuIcon fwci-compilefirewall fwcBlue",finalObject:!0},{id:V.FIREWALL_INSTALL,text:this.translate.instant("CONTEXT.CL.INSTALL"),icon:"fwcMenuIcon fwci-installfirewall fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.PLUGINS,text:this.translate.instant("FW.MSG_FW_EDITION.PLUGINS"),icon:"fa fa-puzzle-piece fwcOrange",finalObject:!0,clusterNode:!1,visible:!0},{id:V.NGFW,text:this.translate.instant("NGFW.TITLE"),icon:"fa fa-n fwcOrange",finalObject:!0,clusterNode:!1,visible:!0},{id:V.SEPARATOR,type:"separator",finalObject:!0,clusterNode:!1},{id:V.POLICY_PANEL_SHOW,text:this.translate.instant("CONTEXT.CL.SHOW"),icon:"fa fa-eye fwcBlue",finalObject:!0,clusterNode:!1},{id:V.POLICY_PANEL_DOWNLOAD,text:this.translate.instant("CONTEXT.CL.DOWNLOAD"),icon:"fa fa-download fwcBlue",finalObject:!0,clusterNode:!1},{id:V.SEPARATOR,type:"separator"},{id:V.CLUSTER_DELETE,text:this.translate.instant("CONTEXT.CL.DELETE"),icon:"fwcMenuIcon fwci-delete fwcRed",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CLUSTER_TO_FIREWALL,text:this.translate.instant("CONTEXT.CL.TO_FW"),icon:"fwcMenuIcon fwci2-cluster_to_firewall fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.CLUSTER_CLONE,text:this.translate.instant("CONTEXT.CL.CLONE"),icon:"fwcMenuIcon2 fwci2-cluster_clone fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.FIREWALL_IPTABLES_IMPORT,text:this.translate.instant("CONTEXT.FW.IPTABLES_SAVE_IMPORT"),icon:"fwcMenuIcon fwci-input fwcBlue",finalObject:!0},{id:V.FIREWALL_IPTABLES_EXPORT,text:this.translate.instant("CONTEXT.FW.IPTABLES_SAVE_EXPORT"),icon:"fwcMenuIcon fwci-output fwcBlue",finalObject:!0}]),this.menuSettingsTree[M.OBJ_MARK]=Wt(t),this.menuSettingsTree[M.OBJ_MARK].items.push({id:V.MARK_NEW,text:this.translate.instant("CONTEXT.NEW_OBJ.MRK"),icon:"fwcMenuIcon fwci2-label fwcGreen",finalObject:!1}),this.menuSettingsTree[M.OBJ_MARK].items=this.menuSettingsTree[M.OBJ_MARK].items.concat(r.items),this.menuSettingsTree[M.FOLDER_ROUTING]=Wt(t),this.menuSettingsTree[M.ROUTING_TABLES]=Wt(t),this.menuSettingsTree[M.ROUTING_TABLES].items=this.menuSettingsTree[M.ROUTING_TABLES].items.concat([{id:V.SEPARATOR,type:"separator"},{id:V.ROUTING_TABLE_NEW,text:this.translate.instant("CONTEXT.ROUTING.NEW_TABLE"),icon:"fa fa-file fwcGreen",finalObject:!0}]),this.menuSettingsTree[M.ROUTING_TABLE]={items:[{id:V.ROUTING_TABLE_EDIT,text:this.translate.instant("CONTEXT.ROUTING.EDIT_TABLE"),icon:"fwcMenuIcon fwci-edit fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.ROUTING_TABLE_NEW_ROUTE,text:this.translate.instant("CONTEXT.ROUTING.NEW_TABLE_ROUTE"),icon:"fa fa-plus fwcGreen",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.ROUTING_TABLE_DELETE,text:this.translate.instant("CONTEXT.ROUTING.DELETE_TABLE"),icon:"fa fa-trash fwcRed",finalObject:!0}]},this.menuSettingsTree[M.COUNTRIES]={items:[{id:V.TREE_RELOAD,text:this.translate.instant("CONTEXT.FDF.RELOAD"),icon:"fwci-reload fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.FOLDER_EXPAND,text:this.translate.instant("CONTEXT.FOLDERS.EXPAND"),icon:"fwcMenuIcon fwci-expand fwcBlue"},{id:V.FOLDER_COLLAPSE,text:this.translate.instant("CONTEXT.FOLDERS.COLLAPSE"),icon:"fwcMenuIcon fwci-collapse fwcBlue"}]},this.menuSettingsTree[M.CONTINENT]={items:[{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0},{id:V.SEPARATOR,type:"separator"},{id:V.FOLDER_EXPAND,text:this.translate.instant("CONTEXT.FOLDERS.EXPAND"),icon:"fwcMenuIcon fwci-expand fwcBlue"},{id:V.FOLDER_COLLAPSE,text:this.translate.instant("CONTEXT.FOLDERS.COLLAPSE"),icon:"fwcMenuIcon fwci-collapse fwcBlue"}]},this.menuSettingsTree[M.COUNTRIE]={items:[{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue",finalObject:!0}]},this.menuSettingsTree[M.FOLDER_SYSTEM]=Wt(t),this.menuSettingsTree[M.DHCP]=Wt(t),this.menuSettingsTree[M.DHCP]={items:[...s]},this.menuSettingsTree[M.KEEPALIVED]={items:[...s]},this.menuSettingsTree[M.HAPROXY]={items:[...s]},this.menuSettingsPosition.POSITION={items:[{id:V.POSITION_NEGATE,text:this.translate.instant("CONTEXT.POSITION.NEGATE"),icon:"fwcMenuIcon fwci-negateposition fwcBlue",visible:!1},{id:V.POSITION_ALLOW,text:this.translate.instant("CONTEXT.POSITION.ALLOW"),icon:"fwcMenuIcon fwci-enableposition fwcBlue",visible:!1},{id:V.OBJECT_EDIT,text:this.translate.instant("CONTEXT.POSITION.EDIT_OBJ"),icon:"fwcMenuIcon fwci-edit fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.COPY,text:this.translate.instant("CONTEXT.POSITION.COPY"),icon:"fwcMenuIcon fwci-copy fwcBlue"},{id:V.CUT,text:this.translate.instant("CONTEXT.POSITION.CUT"),icon:"fwcMenuIcon fwci-cut fwcBlue"},{id:V.PASTE,text:this.translate.instant("CONTEXT.POSITION.PASTE"),icon:"fwcMenuIcon fwci-paste fwcBlue",visible:!1},{id:V.DELETE,text:this.translate.instant("CONTEXT.OBJECTS.DELETE"),icon:"fwcMenuIcon fwci-delete fwcRed"},{id:V.SEPARATOR,type:"separator"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue"},{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),visible:!1}]},this.menuSettingsPosition.NO_MENU={items:[{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS")}]};let a=[{id:V.RULE_COLOR_DEFAULT,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.NONE"),icon:"fwci2-cuadrado fwcWhite"},{id:V.RULE_COLOR_RED,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.RED"),icon:"fwci2-cuadrado fwcRulePink"},{id:V.RULE_COLOR_PURPLE,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.PURPLE"),icon:"fwci2-cuadrado fwcRulePurple"},{id:V.RULE_COLOR_BLUE,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.BLUE"),icon:"fwci2-cuadrado fwcRuleBlue"},{id:V.RULE_COLOR_TEAL,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.TEAL"),icon:"fwci2-cuadrado fwcRuleTeal"},{id:V.RULE_COLOR_GREEN,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.GREEN"),icon:"fwci2-cuadrado fwcRuleGreen"},{id:V.RULE_COLOR_YELLOW,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.YELLOW"),icon:"fwci2-cuadrado fwcRuleYellow"},{id:V.RULE_COLOR_ORANGE,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.ORANGE"),icon:"fwci2-cuadrado fwcRuleOrange"},{id:V.RULE_COLOR_CUSTOM,pid:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.COLORS.CUSTOM"),icon:"fa fa-crosshairs fwcBlue"}];this.menuSettingsRule.RULE={items:[{id:V.RULE_COMPILE,text:this.translate.instant("CONTEXT.RULE.COMP_S"),textSingle:this.translate.instant("CONTEXT.RULE.COMP_S"),textMulti:this.translate.instant("CONTEXT.RULE.COMP_M"),icon:"fwcMenuIcon fwci-compilerule fwcBlue",items:o.items},{id:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.RULE.COLOR_S"),textSingle:this.translate.instant("CONTEXT.RULE.COLOR_S"),textMulti:this.translate.instant("CONTEXT.RULE.COLOR_M"),icon:"fwcMenuIcon fwci-rulecolor fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_NEW_ABOVE,text:this.translate.instant("CONTEXT.RULE.NEW_AB"),icon:"fwcMenuIcon fwci-newruleabove fwcGreen"},{id:V.RULE_NEW_BELOW,text:this.translate.instant("CONTEXT.RULE.NEW_BE"),icon:"fwcMenuIcon fwci-newrulebelow fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_NEW_HS_ABOVE,text:this.translate.instant("CONTEXT.RULE.NEW_HS_AB"),icon:"fa fa-file-code fwcOrange"},{id:V.RULE_NEW_HS_BELOW,text:this.translate.instant("CONTEXT.RULE.NEW_HS_BE"),icon:"fa fa-file-code fwcOrange"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_EDIT,text:this.translate.instant("CONTEXT.RULE.EDIT"),icon:"fwcMenuIcon fwci-editrule fwcBlue"},{id:V.RULE_ENABLE,text:this.translate.instant("CONTEXT.RULE.ENABLE_S"),textSingle:this.translate.instant("CONTEXT.RULE.ENABLE_S"),textMulti:this.translate.instant("CONTEXT.RULE.ENABLE_M"),icon:"fwcMenuIcon fwci-enablerule fwcBlue"},{id:V.RULE_DISABLE,text:this.translate.instant("CONTEXT.RULE.DISABLE_S"),textSingle:this.translate.instant("CONTEXT.RULE.DISABLE_S"),textMulti:this.translate.instant("CONTEXT.RULE.DISABLE_M"),icon:"fwcMenuIcon fwci-disablerule fwcBlue",textUnselected:"Disable rule",textSelected:"Enable rule"},{id:V.RULE_DELETE,text:this.translate.instant("CONTEXT.RULE.DELETE"),textSingle:this.translate.instant("CONTEXT.RULE.DELETE"),textMulti:this.translate.instant("CONTEXT.RULE.DELETE_M"),icon:"fwcMenuIcon fwci-deleterule fwcRed"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_MOVE_ABOVE,text:this.translate.instant("CONTEXT.RULE.MOVE_AB"),textNormal:this.translate.instant("CONTEXT.RULE.MOVE_AB"),textGroup:this.translate.instant("CONTEXT.RULE.MOVE_AB_GR"),icon:"fwcMenuIcon fwci2-moveup fwcBlue"},{id:V.RULE_MOVE_BELOW,text:this.translate.instant("CONTEXT.RULE.MOVE_BE"),textNormal:this.translate.instant("CONTEXT.RULE.MOVE_BE"),textGroup:this.translate.instant("CONTEXT.RULE.MOVE_BE_GR"),icon:"fwcMenuIcon fwci-movedown fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.COPY,text:this.translate.instant("CONTEXT.POSITION.COPY"),icon:"fwcMenuIcon fwci-copy fwcBlue"},{id:V.CUT,text:this.translate.instant("CONTEXT.POSITION.CUT"),icon:"fwcMenuIcon fwci-cut fwcBlue"},{id:V.PASTE_ABOVE,text:this.translate.instant("CONTEXT.RULE.PASTE_AB"),icon:"fwcMenuIcon fwci2-pasteabove fwcBlue"},{id:V.PASTE_BELOW,text:this.translate.instant("CONTEXT.RULE.PASTE_BE"),icon:"fwcMenuIcon fwci2-pastebelow fwcBlue"},{id:V.RULE_CREATE_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_CREATE"),icon:"fwcMenuIcon fwci-objectgroup fwcGreen"},{id:V.RULE_REMOVE_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_DELETE"),icon:"fwcMenuIcon fwci-removegroup fwcRed"},{id:V.RULE_REMOVE_FROM_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_RULE_DELETE"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed"},{id:V.SEPARATOR,type:"separator"},{id:V.AI_ASSISTANT,text:this.translate.instant("CONTEXT.AI_ASSISTANT.AI_TITLE"),icon:"fa fa-robot fwcBlue",finalObject:!0,visible:!0}]},this.menuSettingsRule.ROUTING_RULE=Wt(this.menuSettingsRule.RULE),this.menuSettingsRule.ROUTING_RULE.items=this.menuSettingsRule.ROUTING_RULE.items.filter(c=>{if(c.id!=V.RULE_EDIT&&c.id!=V.RULE_NEW_HS_ABOVE&&c.id!=V.RULE_NEW_HS_BELOW&&c.id!=V.AI_ASSISTANT)return!0});let l=this.menuSettingsRule.ROUTING_RULE.items.findIndex(c=>c.id===V.RULE_COMPILE);l!==-1&&(this.menuSettingsRule.ROUTING_RULE.items[l]={id:V.RULE_COMPILE,text:this.translate.instant("CONTEXT.ROUTING.ROUTING_RULE.COMP_S"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTING_RULE.COMP_S"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTING_RULE.COMP_M"),icon:"fwcMenuIcon fwci-compilerule fwcBlue"}),this.configureMenuSettingsRule("DHCP_RULE",[V.RULE_NEW_HS_ABOVE,V.RULE_NEW_HS_BELOW,V.RULE_EDIT,V.AI_ASSISTANT]),this.configureMenuSettingsRule("KEEPALIVED_RULE",[V.RULE_NEW_HS_ABOVE,V.RULE_NEW_HS_BELOW,V.RULE_EDIT,V.AI_ASSISTANT]),this.configureMenuSettingsRule("HAPROXY_RULE",[V.RULE_NEW_HS_ABOVE,V.RULE_NEW_HS_BELOW,V.RULE_EDIT,V.AI_ASSISTANT]),this.menuSettingsRule.ROUTE={items:[{id:V.RULE_COMPILE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.COMP_S"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTE.COMP_S"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTE.COMP_M"),icon:"fwcMenuIcon fwci-compilerule fwcBlue"},{id:V.RULE_COLOR_CHANGE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.COLOR_S"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTE.COLOR_S"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTE.COLOR_M"),icon:"fwcMenuIcon fwci-rulecolor fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_NEW_ABOVE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.NEW_AB"),icon:"fwcMenuIcon fwci-newruleabove fwcGreen"},{id:V.RULE_NEW_BELOW,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.NEW_BE"),icon:"fwcMenuIcon fwci-newrulebelow fwcGreen"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_ENABLE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.ENABLE_S"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTE.ENABLE_S"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTE.ENABLE_M"),icon:"fwcMenuIcon fwci-enablerule fwcBlue"},{id:V.RULE_DISABLE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.DISABLE_S"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTE.DISABLE_S"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTE.DISABLE_M"),icon:"fwcMenuIcon fwci-disablerule fwcBlue",textUnselected:"Disable rule",textSelected:"Enable rule"},{id:V.RULE_DELETE,text:this.translate.instant("CONTEXT.ROUTING.ROUTE.DELETE"),textSingle:this.translate.instant("CONTEXT.ROUTING.ROUTE.DELETE"),textMulti:this.translate.instant("CONTEXT.ROUTING.ROUTE.DELETE_M"),icon:"fwcMenuIcon fwci-deleterule fwcRed"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_MOVE_ABOVE,text:this.translate.instant("CONTEXT.RULE.MOVE_AB"),textNormal:this.translate.instant("CONTEXT.RULE.MOVE_AB"),textGroup:this.translate.instant("CONTEXT.RULE.MOVE_AB_GR"),icon:"fwcMenuIcon fwci2-moveup fwcBlue"},{id:V.RULE_MOVE_BELOW,text:this.translate.instant("CONTEXT.RULE.MOVE_BE"),textNormal:this.translate.instant("CONTEXT.RULE.MOVE_BE"),textGroup:this.translate.instant("CONTEXT.RULE.MOVE_BE_GR"),icon:"fwcMenuIcon fwci-movedown fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.COPY,text:this.translate.instant("CONTEXT.POSITION.COPY"),icon:"fwcMenuIcon fwci-copy fwcBlue"},{id:V.CUT,text:this.translate.instant("CONTEXT.POSITION.CUT"),icon:"fwcMenuIcon fwci-cut fwcBlue"},{id:V.PASTE_ABOVE,text:this.translate.instant("CONTEXT.RULE.PASTE_AB"),icon:"fwcMenuIcon fwci2-pasteabove fwcBlue"},{id:V.PASTE_BELOW,text:this.translate.instant("CONTEXT.RULE.PASTE_BE"),icon:"fwcMenuIcon fwci2-pastebelow fwcBlue"},{id:V.RULE_CREATE_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_CREATE"),icon:"fwcMenuIcon fwci-objectgroup fwcGreen"},{id:V.RULE_REMOVE_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_DELETE"),icon:"fwcMenuIcon fwci-removegroup fwcRed"},{id:V.RULE_REMOVE_FROM_GROUP,text:this.translate.instant("CONTEXT.RULE.GR_RULE_DELETE"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed"}]},this.menuSettingsGroupObject.OBJECT={items:[{id:V.FIND_IN_TREE,text:this.translate.instant("CONTEXT.OBJECTS.FIND_IN_TREE"),icon:"fwcMenuIcon fwci2-findintree fwcBlue"},{id:V.WHERE_USED,text:this.translate.instant("CONTEXT.OBJECTS.WU"),icon:"fwcMenuIcon fwci-whereused fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.DELETE_FROM_GROUP,text:this.translate.instant("CONTEXT.OBJECTS.DEL_F_GROUP"),icon:"fwcMenuIcon fwci-removefromgroup fwcRed",userObject:!0},{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),visible:!1}]},this.menuSettingsGroupObject.OBJECT_CUSTOMFORM={items:[{id:V.DELETE,text:this.translate.instant("CONTEXT.OBJECTS.DELETE"),icon:"fwcMenuIcon fwci-delete fwcRed"}]},this.menuSettingsRuleGroup.RULE_GROUP=Wt(t),this.menuSettingsRuleGroup.RULE_GROUP.items=this.menuSettingsRuleGroup.RULE_GROUP.items.concat([{id:V.RULE_GROUP_EDIT,text:this.translate.instant("CONTEXT.RULE_GR.NAME"),icon:"fwcMenuIcon fwci-groupname fwcBlue"},{id:V.RULE_GROUP_COLOR_CHANGE,text:this.translate.instant("CONTEXT.RULE_GR.COLOR"),icon:"fwcMenuIcon fwci-groupcolor fwcBlue"},{id:V.SEPARATOR,type:"separator"},{id:V.RULE_REMOVE_GROUP,text:this.translate.instant("CONTEXT.RULE_GR.DELETE"),icon:"fwcMenuIcon fwci-removegroup fwcBlue"}])}configureMenuSettingsRule(e,t){this.menuSettingsRule[e]=Wt(this.menuSettingsRule.RULE);let r=[...this.menuSettingsRule[e].items];this.menuSettingsRule[e].items=this.menuSettingsRule[e].items.map(s=>t.includes(s.id)?ke(oe({},s),{visible:!1}):s);let o=this.menuSettingsRule[e].items.find(s=>s.id==V.RULE_COMPILE);o&&delete o.items,t.forEach(s=>{let a=r.findIndex(l=>l.id===s);if(a>0&&r[a-1].type==="separator"){let l=this.menuSettingsRule[e].items.findIndex(c=>c.id===s)-1;l>=0&&this.menuSettingsRule[e].items[l].type==="separator"&&(this.menuSettingsRule[e].items[l].visible=!1)}if(a<r.length-1&&r[a+1].type==="separator"){let l=this.menuSettingsRule[e].items.findIndex(c=>c.id===s)+1;l<this.menuSettingsRule[e].items.length&&this.menuSettingsRule[e].items[l].type==="separator"&&(this.menuSettingsRule[e].items[l].visible=!1)}}),this.menuSettingsRule[e].items=this.menuSettingsRule[e].items.filter((s,a,l)=>s.visible!==!1&&(s.type!=="separator"||a>0&&a<l.length-1&&l[a-1].type!=="separator"&&l[a+1].type!=="separator"))}getTreeMenu(e){return e.node_type?this.menuSettingsTree[e.node_type]:{items:[]}}getTreeMenus(){return this.menuSettingsTree}getPositionMenus(){return this.menuSettingsPosition}getRuleMenus(){return this.menuSettingsRule}getRuleGroupMenus(){return this.menuSettingsRuleGroup}getGroupObjectMenus(){return this.menuSettingsGroupObject}setMenuOption(e,t,r,o){try{let s=e.items.filter(function(a){return a.id==t});return s[0]&&(s[0][r]=o),!0}catch(s){return console.error(s),!1}}swapMenuOptions(e,t,r){for(let o=0;o<e.items.length;o++)e.items[o][r]&&(e.items[o][t]=e.items[o][r])}swapMenuOptionText(e,t,r,o){try{let s=e.items.filter(function(a){return a.id==t});return s[0]&&s[0][r]&&(s[0][r]=s[0][o]),!0}catch(s){return console.error(s),!1}}swapMenuText(e,t,r){try{let o=e.items.filter(function(s){return s.id==t});return o[0]&&(o[0].text=r?o[0].textSelected:o[0].textUnselected),!0}catch(o){return console.error(o),!1}}static{this.\u0275fac=function(t){return new(t||i)(de(at),de(Ye))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Zv=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/customer`}getCustomers(){let e=`${this.endpoint}/get`;return this.httpClient.put(e,{}).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCustomer(e){let t=`${this.endpoint}/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newCustomer(e){let t=`${this.endpoint}`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateCustomer(e){let t=`${this.endpoint}`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteCustomer(e){let t=`${this.endpoint}/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkCustomerRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Ll=function(i){return i[i.EVENT_GENERIC=1]="EVENT_GENERIC",i[i.EVENT_LOG=10]="EVENT_LOG",i[i.EVENT_PLUGIN_PANEL_CLOSED=11]="EVENT_PLUGIN_PANEL_CLOSED",i[i.EVENT_CONNECTION_ESTABLISHED=20]="EVENT_CONNECTION_ESTABLISHED",i[i.EVENT_CONNECTION_LOST=21]="EVENT_CONNECTION_LOST",i}(Ll||{});var dn=(()=>{class i{constructor(){this.subjectEvent=new Ue,this.subjectLogEvent=new Ue}emitEvent(e){e&&(e.type==Ll.EVENT_LOG?this.subjectLogEvent.next(e):this.subjectEvent.next(e))}getEvent(){return this.subjectEvent.asObservable()}getLogEvent(){return this.subjectLogEvent.asObservable()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Dt=(()=>{class i extends Mi{constructor(e,t){super(e),this.httpClient=e,this.fwcUserService=t,this.endpoint=`${_e.settings.fwcAppURL}/firewall`}getFirewall(e,t){let r=`${this.endpoint}/get`,o={firewall:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getFirewallsByCloud(e,t){let r=`${this.endpoint}/cloud/get`,o={fwcloud:e};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateFirewall(e){let t=`${this.endpoint}`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newFirewall(e){let t=`${this.endpoint}`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteFirewall(e,t){let r=`${this.endpoint}/del`,o={firewall:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}cloneFirewall(e){let t=`${this.endpoint}/clone`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkFwRestrictions(e,t){let r=`${this.endpoint}/restricted`,o={firewall:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}installPlugins(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/plugin?channel_id=${r}`;return this.httpClient.post(o,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkFwCommunication(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/communication/ping`;return this.httpClient.post(r,t).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getFirewallInformation(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/communication/info`;return this.httpClient.post(r,t).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getSystemctlInformation(e){let t=`${_e.settings.fwcAppURL}/systemctl`;return this.httpClient.post(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getClustersByCloud(e){let t=`${_e.settings.fwcAppURL}/cluster/cloud/get`,r={fwcloud:e};return this.httpClient.put(t,JSON.stringify(r)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCluster(e,t){let r=`${_e.settings.fwcAppURL}/cluster/get`,o={cluster:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getClusterNodes(e,t){let r=`${this.endpoint}/cluster/get`,o={cluster:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteClusterNode(e,t,r){let o=`${this.endpoint}/delfromcluster`,s={cluster:e,firewall:t,fwcloud:r};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getClusterMasterNode(e,t){let r=`${this.endpoint}/cluster/get`,o={cluster:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),K(this.parseClusterMasterNode),q(this.handleAPIError))}parseClusterMasterNode(e){let t,r={error:{msg:"No master node"}};t=e.data;for(let o=0;t&&o<t.length;o++)if(t[o].fwmaster){r={data:Object.assign({},t[o])};break}return r}newCluster(e,t,r){let o=`${_e.settings.fwcAppURL}/cluster`,s={fwcloud:t,node_id:r,clusterData:e};return this.httpClient.post(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateCluster(e,t,r){let o=`${_e.settings.fwcAppURL}/cluster`,s={fwcloud:t,clusterData:e};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteCluster(e,t){let r=`${_e.settings.fwcAppURL}/cluster/del`,o={cluster:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}convertFwToCluster(e){let t=`${_e.settings.fwcAppURL}/cluster/fwtocluster`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}convertClusterToFw(e){let t=`${_e.settings.fwcAppURL}/cluster/clustertofw`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}cloneCluster(e){let t=`${_e.settings.fwcAppURL}/cluster/clone`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkClusterRestrictions(e,t){let r=`${_e.settings.fwcAppURL}/cluster/restricted`,o={firewall:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}autoDiscoverInterfaces(e){let t=`${_e.settings.fwcAppURL}/interface/autodiscover`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}ipTablesSaveImport(e,t){let r=`${_e.settings.fwcAppURL}/iptables-save/import?channel_id=${t}`,o=new Mo;return o=o.set("X-FWC-TIMEOUT","9999999"),this.httpClient.put(r,JSON.stringify(e),{headers:o}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}ipTablesSaveExport(e,t){let r=`${_e.settings.fwcAppURL}/iptables-save/export`;return this.httpClient.put(r,JSON.stringify(e)).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}loadBackEndConfig(){let e=`${_e.settings.fwcAppURL}/config`;return this.httpClient.get(e)}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(at))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Io=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/interface`}getInterfacesInFw(e,t){let r=`${this.endpoint}/fw/all/get`,o;return o={firewall:e,fwcloud:t},this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getInterfacesInFwFull(e,t){let r=`${this.endpoint}/fw/full/get`,o;return o={firewall:e,fwcloud:t},this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getInterface(e,t,r){let o=`${this.endpoint}/fw/get`,s;return s={firewall:e,id:t,fwcloud:r},this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getInterfaceHost(e,t,r){let o=`${this.endpoint}/host/get`,s;return s={host:e,id:t,fwcloud:r},this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newInterface(e){let t=`${this.endpoint}`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateInterface(e){let t=`${this.endpoint}`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteInterfaceFw(e){let t=`${this.endpoint}/fw/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteInterfaceHost(e){let t=`${this.endpoint}/host/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getInterfaceWhereUsed(e,t,r){let o=`${this.endpoint}/where`,s={fwcloud:r,id:e,type:t};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkInterfaceRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var eb=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/ipobj/mark`}newMark(e){let t=this.endpoint;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getMark(e){let t=`${this.endpoint}/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateMark(e){let t=this.endpoint;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteMark(e){let t=`${this.endpoint}/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getMarkWhereUsed(e){let t=`${this.endpoint}/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkMarkRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var En=(()=>{class i extends Mi{constructor(e,t){super(e),this.httpClient=e,this.cd=t,this.items=[],this.nodeCounter=0,this.endpoint=`${_e.settings.fwcAppURL}/tree`}getTree(e,t){let r="",o=e.container,s=e.objStandard,a=e.objCloud,l={};switch(e._siblingTree&&(o=e._siblingTree),l.fwcloud=t,o){case qe.C_FIREWALLS:case qe.C_FIREWALLS_CONDENSED:r=`${this.endpoint}/firewalls/get`;break;case qe.C_OBJECTS:r=`${this.endpoint}/objects/get`,l.objStandard=s,l.objCloud=a;break;case qe.C_CA:r=`${this.endpoint}/ca/get`;break;case qe.C_SERVICES:r=`${this.endpoint}/services/get`,l.objStandard=s,l.objCloud=a;break}return this.cd.detectChanges(),this.httpClient.put(r,JSON.stringify(l)).pipe(K(this.handleAPIResponse),K(c=>this.extractTreeData(c,e)),q(this.handleAPIError))}getTreeChildTypes(){let e="API CALL FOR GETTING THE CHILD TYPES",t={data:[{id_node:M.OBJ_ADDRESS,node_type:M.OBJ_ADDRESS},{id_node:M.OBJ_IP_RANGE,node_type:M.OBJ_IP_RANGE},{id_node:M.OBJ_HOST,node_type:M.OBJ_IF_HOST,is_object:!0},{id_node:M.OBJ_HOST,node_type:M.OBJ_HOST},{id_node:M.OBJ_GROUP,node_type:M.OBJ_GROUP},{id_node:M.OBJ_NETWORK,node_type:M.OBJ_NETWORK},{id_node:M.OBJ_DNS,node_type:M.OBJ_DNS},{id_node:M.FOLDER_INTERFACES,node_type:M.OBJ_IF_FW,is_object:!0},{id_node:M.OBJ_IF_FW,node_type:M.OBJ_ADDRESS,is_object:!0},{id_node:M.OBJ_IF_HOST,node_type:M.OBJ_ADDRESS,is_object:!0},{id_node:M.SERVICE_IP,node_type:M.SERVICE_IP},{id_node:M.SERVICE_TCP,node_type:M.SERVICE_TCP},{id_node:M.SERVICE_ICMP,node_type:M.SERVICE_ICMP},{id_node:M.SERVICE_UDP,node_type:M.SERVICE_UDP},{id_node:M.SERVICE_GROUP,node_type:M.SERVICE_GROUP}]};return this.cd.detectChanges(),vt(t)}newFolder(e){let t=`${this.endpoint}/folder`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}dropInFolder(e){let t=`${this.endpoint}/folder/drop`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteFolder(e){let t=`${this.endpoint}/folder/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateFolder(e){let t=`${this.endpoint}/folder`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}repairTree(e,t,r){let o=`${this.endpoint}/repair?channel_id=${r}`,s={type:e,fwcloud:t};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getNodes(e,t,r){let o=`${this.endpoint}/node/get`,s={node_type:e,fwcloud:t,id_obj:r||null};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getNodesByNodeType(e,t){let r=`${this.endpoint}/node/getByNodeType`,o={node_type:e,fwcloud:t};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getNodesFull(e,t,r,o){let s=[],a,l;for(s.push(...e);s.length>0;)if(a=s.pop(),a.node_type===t){if(r?l=a.id_obj===r:l=!0,o&&(l=l&&a.text===o),l)return a}else if(a.items&&a.items.length)for(let c=0;c<a.items.length;c++)s.push(a.items[c]);return null}extractTreeData(e,t){try{let r=JSON.stringify(e.data);r=r.replace(/"children"/g,'"items"'),r=r.replace(/"allowdrag"/g,'"allowDrag"'),e.data=JSON.parse(r),t.container==qe.C_FIREWALLS_CONDENSED}catch{}return e}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(we))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var tb=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/ipobj`}getObjectTypes(){let e=`${this.endpoint}/types`;return this.httpClient.get(e).pipe(K(this.handleAPIResponse),K(this.parseObjectTypeNames),q(this.handleAPIError))}getObjectType(e){let t,r=`${this.endpoint}/types/get`;return t={id:e},this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}parseObjectTypeNames(e){if(e){let t=e.data;t&&Array.isArray(t)&&t.forEach(r=>{r.type=r.type.replace(" ","_")})}return e}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Vi=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/ipobj`}getObject(e,t){let r=`${this.endpoint}/get`,o={fwcloud:t,id:e};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),K(this.addFields),q(this.handleAPIError))}getPolicyRuleObjects(e,t,r){let o=`${_e.settings.fwcAppURL}/policy/ipobj/get`,s={fwcloud:r,firewall:e,rule:t};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateObject(e){let t=this.endpoint;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteObject(e){let t=`${this.endpoint}/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newObject(e){let t=this.endpoint;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}searchObject(e){let t=`${this.endpoint}/ipobj_search_used/${e._fwcObjId}/${e._fwcObjType}`;return this.httpClient.get(t).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkObjectRestrictions(e){let t=`${this.endpoint}/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getObjectGroup(e,t){let r=`${this.endpoint}/group/get`,o={fwcloud:t,id:e};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getObjectGroupAllowedTypes(){let e=[];return e[O.OBJ_GROUP]=[O.OBJ_ADDRESS,O.OBJ_ADDRESS_RANGE,O.OBJ_NETWORK,O.OBJ_HOST,O.OBJ_OPENVPN_CONFIG_CLI,O.OBJ_OPENVPN_PREFIX,O.OBJ_WGC_CONFIG_CLI,O.OBJ_WIREGUARD_PREFIX,O.OBJ_ISC_CONFIG_CLI,O.OBJ_IPSEC_PREFIX,O.OBJ_DNS],e[O.OBJ_SERVICE_GROUP]=[O.OBJ_SERVICE_IP,O.OBJ_SERVICE_TCP,O.OBJ_SERVICE_ICMP,O.OBJ_SERVICE_UDP],e[O.OBJ_ROUTING_GATEWAY]=[O.OBJ_ADDRESS],e[O.OBJ_ROUTING_RULE_FROM]=[O.OBJ_ADDRESS,O.OBJ_ADDRESS_RANGE,O.OBJ_NETWORK,O.OBJ_HOST,O.OBJ_OPENVPN_CONFIG_CLI,O.OBJ_OPENVPN_PREFIX,O.OBJ_WGC_CONFIG_CLI,O.OBJ_WIREGUARD_PREFIX,O.OBJ_ISC_CONFIG_CLI,O.OBJ_IPSEC_PREFIX,O.OBJ_GROUP,O.OBJ_DNS,O.OBJ_MARK],e[O.OBJ_DHCP_RULE_NETWORK]=[O.OBJ_NETWORK],e[O.OBJ_DHCP_RULE_RANGE]=[O.OBJ_ADDRESS_RANGE],e[O.OBJ_DHCP_RULE_ROUTER]=[O.OBJ_ADDRESS],e[O.OBJ_DHCP_RULE_DNS]=[O.OBJ_ADDRESS],e[O.OBJ_DHCP_RULE_INTERFACE]=[O.OBJ_INTERFACE_FIREWALL,O.OBJ_INTERFACE_HOST],e[O.OBJ_DHCP_RULE_IP]=[O.OBJ_ADDRESS],e[O.OBJ_KEEPALIVED_INTERFACE]=[O.OBJ_INTERFACE_FIREWALL],e[O.OBJ_KEEPALIVED_VIRTUAL_IPS]=[O.OBJ_ADDRESS],e[O.OBJ_KEEPALIVED_MASTER_NODE]=[O.OBJ_FIREWALL],e[O.OBJ_HAPROXY_RULE_FRONTEND_IP]=[O.OBJ_ADDRESS],e[O.OBJ_HAPROXY_RULE_FRONTEND_PORT]=[O.OBJ_SERVICE_TCP,O.OBJ_SERVICE_UDP],e[O.OBJ_HAPROXY_RULE_BACKEND_IPS]=[O.OBJ_ADDRESS],e[O.OBJ_HAPROXY_RULE_BACKEND_PORT]=[O.OBJ_SERVICE_TCP,O.OBJ_SERVICE_UDP],vt(e)}newObjectGroup(e){let t=`${this.endpoint}/group`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateObjectGroup(e){let t=`${this.endpoint}/group`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteObjectGroup(e){let t=`${this.endpoint}/group/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newObjectGroupObject(e){let t=`${this.endpoint}/group/addto`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteObjectGroupObject(e){let t=`${this.endpoint}/group/delfrom`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getObjectWhereUsed(e,t,r){let o=`${this.endpoint}/where`,s={id:e,type:t,fwcloud:r};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getObjectGroupWhereUsed(e,t){let r=`${this.endpoint}/group/where`,o={fwcloud:t,id:e};return this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkObjectGroupRestrictions(e){let t=`${this.endpoint}/group/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPProtocols(){let e=`${this.endpoint}-protocols`;return this.httpClient.get(e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}addFields(e){let t=[];return t.push(e.data),t.forEach(r=>{r._fwcObjId=r.id,r._fwcObjName=r.name,r._fwcObjType=r.obj_type=r.type}),e}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function P2(i,n){let e=!n?.manualCleanup;e&&!n?.injector&&Iy(P2);let t=e?n?.injector?.get(Zu)??Je(Zu):null,r=Aye(n?.equal),o;n?.requireSync?o=Gi({kind:0},{equal:r}):o=Gi({kind:1,value:n?.initialValue},{equal:r});let s=i.subscribe({next:a=>o.set({kind:1,value:a}),error:a=>{if(n?.rejectErrors)throw a;o.set({kind:2,error:a})}});if(n?.requireSync&&o().kind===0)throw new xt(601,!1);return t?.onDestroy(s.unsubscribe.bind(s)),Gr(()=>{let a=o();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new xt(601,!1)}},{equal:n?.equal})}function Aye(i=Object.is){return(n,e)=>n.kind===1&&e.kind===1&&i(n.value,e.value)}var N2={};function lo(i,n){if(N2[i]=(N2[i]||0)+1,typeof n=="function")return D2(i,(...t)=>ke(oe({},n(...t)),{type:i}));switch(n?n._as:"empty"){case"empty":return D2(i,()=>({type:i}));case"props":return D2(i,t=>ke(oe({},t),{type:i}));default:throw new Error("Unexpected config.")}}function ls(){return{_as:"props",_p:void 0}}function D2(i,n){return Object.defineProperty(n,"type",{value:i,writable:!1})}var h8="@ngrx/store/init",xm=(()=>{class i extends vn{constructor(){super({type:h8})}next(e){if(typeof e=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),xye=[xm],f8=new Xe("@ngrx/store Internal Root Guard"),QU=new Xe("@ngrx/store Internal Initial State"),B2=new Xe("@ngrx/store Initial State"),m8=new Xe("@ngrx/store Reducer Factory"),ZU=new Xe("@ngrx/store Internal Reducer Factory Provider"),g8=new Xe("@ngrx/store Initial Reducers"),F2=new Xe("@ngrx/store Internal Initial Reducers"),e8=new Xe("@ngrx/store Store Features"),t8=new Xe("@ngrx/store Internal Store Reducers"),k2=new Xe("@ngrx/store Internal Feature Reducers"),i8=new Xe("@ngrx/store Internal Feature Configs"),_8=new Xe("@ngrx/store Internal Store Features"),n8=new Xe("@ngrx/store Internal Feature Reducers Token"),C8=new Xe("@ngrx/store Feature Reducers"),r8=new Xe("@ngrx/store User Provided Meta Reducers"),ib=new Xe("@ngrx/store Meta Reducers"),o8=new Xe("@ngrx/store Internal Resolved Meta Reducers"),s8=new Xe("@ngrx/store User Runtime Checks Config"),a8=new Xe("@ngrx/store Internal User Runtime Checks Config"),a0=new Xe("@ngrx/store Internal Runtime Checks"),U2=new Xe("@ngrx/store Check if Action types are unique"),yEt=new Xe("@ngrx/store Root Store Provider"),wEt=new Xe("@ngrx/store Feature State Provider");function j2(i,n={}){let e=Object.keys(i),t={};for(let o=0;o<e.length;o++){let s=e[o];typeof i[s]=="function"&&(t[s]=i[s])}let r=Object.keys(t);return function(s,a){s=s===void 0?n:s;let l=!1,c={};for(let d=0;d<r.length;d++){let h=r[d],_=t[h],C=s[h],I=_(C,a);c[h]=I,l=l||I!==C}return l?c:s}}function Tye(i,n){return Object.keys(i).filter(e=>e!==n).reduce((e,t)=>Object.assign(e,{[t]:i[t]}),{})}function I8(...i){return function(n){if(i.length===0)return n;let e=i[i.length-1];return i.slice(0,-1).reduceRight((r,o)=>o(r),e(n))}}function y8(i,n){return Array.isArray(n)&&n.length>0&&(i=I8.apply(null,[...n,i])),(e,t)=>{let r=i(e);return(o,s)=>(o=o===void 0?t:o,r(o,s))}}function Oye(i){let n=Array.isArray(i)&&i.length>0?I8(...i):e=>e;return(e,t)=>(e=n(e),(r,o)=>(r=r===void 0?t:r,e(r,o)))}var l0=class extends Ai{},nb=class extends xm{},Rye="@ngrx/store/update-reducers",rb=(()=>{class i extends vn{get currentReducers(){return this.reducers}constructor(e,t,r,o){super(o(r,t)),this.dispatcher=e,this.initialState=t,this.reducers=r,this.reducerFactory=o}addFeature(e){this.addFeatures([e])}addFeatures(e){let t=e.reduce((r,{reducers:o,reducerFactory:s,metaReducers:a,initialState:l,key:c})=>{let d=typeof o=="function"?Oye(a)(o,l):y8(s,a)(o,l);return r[c]=d,r},{});this.addReducers(t)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(t=>t.key))}addReducer(e,t){this.addReducers({[e]:t})}addReducers(e){this.reducers=oe(oe({},this.reducers),e),this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(t=>{this.reducers=Tye(this.reducers,t)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Rye,features:e})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(t){return new(t||i)(de(nb),de(B2),de(g8),de(m8))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),Pye=[rb,{provide:l0,useExisting:rb},{provide:nb,useExisting:xm}],G2=(()=>{class i extends Ue{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})()}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),Dye=[G2],ob=class extends Ai{},l8=(()=>{class i extends vn{static{this.INIT=h8}constructor(e,t,r,o){super(o);let a=e.pipe(Nu(CE)).pipe(RE(t)),l={state:o},c=a.pipe(Vg(Fye,l));this.stateSubscription=c.subscribe(({state:d,action:h})=>{this.next(d),r.next(h)}),this.state=P2(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static{this.\u0275fac=function(t){return new(t||i)(de(xm),de(l0),de(G2),de(B2))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();function Fye(i={state:void 0},[n,e]){let{state:t}=i;return{state:e(t,n),action:n}}var kye=[l8,{provide:ob,useExisting:l8}],nt=(()=>{class i extends Ai{constructor(e,t,r){super(),this.actionsObserver=t,this.reducerManager=r,this.source=e,this.state=e.state}select(e,...t){return Cn.call(null,e,...t)(this)}selectSignal(e,t){return Gr(()=>e(this.state()),t)}lift(e){let t=new i(this,this.actionsObserver,this.reducerManager);return t.operator=e,t}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,t){this.reducerManager.addReducer(e,t)}removeReducer(e){this.reducerManager.removeReducer(e)}static{this.\u0275fac=function(t){return new(t||i)(de(ob),de(xm),de(rb))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),Nye=[nt];function Cn(i,n,...e){return function(r){let o;if(typeof i=="string"){let s=[n,...e].filter(Boolean);o=r.pipe(xE(i,...s))}else if(typeof i=="function")o=r.pipe(K(s=>i(s,n)));else throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);return o.pipe(qc())}}var H2="https://ngrx.io/guide/store/configuration/runtime-checks";function c8(i){return i===void 0}function d8(i){return i===null}function w8(i){return Array.isArray(i)}function Lye(i){return typeof i=="string"}function Mye(i){return typeof i=="boolean"}function Vye(i){return typeof i=="number"}function v8(i){return typeof i=="object"&&i!==null}function Bye(i){return v8(i)&&!w8(i)}function Uye(i){if(!Bye(i))return!1;let n=Object.getPrototypeOf(i);return n===Object.prototype||n===null}function L2(i){return typeof i=="function"}function jye(i){return L2(i)&&i.hasOwnProperty("\u0275cmp")}function Gye(i,n){return Object.prototype.hasOwnProperty.call(i,n)}var Hye=!1;function Wye(){return Hye}function p8(i,n){return i===n}function zye(i,n,e){for(let t=0;t<i.length;t++)if(!e(i[t],n[t]))return!0;return!1}function b8(i,n=p8,e=p8){let t=null,r=null,o;function s(){t=null,r=null}function a(d=void 0){o={result:d}}function l(){o=void 0}function c(){if(o!==void 0)return o.result;if(!t)return r=i.apply(null,arguments),t=arguments,r;if(!zye(arguments,t,n))return r;let d=i.apply(null,arguments);return t=arguments,e(r,d)?r:(r=d,d)}return{memoized:c,reset:s,setResult:a,clearResult:l}}function kr(...i){return $ye(b8)(...i)}function Kye(i,n,e,t){if(e===void 0){let o=n.map(s=>s(i));return t.memoized.apply(null,o)}let r=n.map(o=>o(i,e));return t.memoized.apply(null,[...r,e])}function $ye(i,n={stateFn:Kye}){return function(...e){let t=e;if(Array.isArray(t[0])){let[d,...h]=t;t=[...d,...h]}else t.length===1&&Jye(t[0])&&(t=qye(t[0]));let r=t.slice(0,t.length-1),o=t[t.length-1],s=r.filter(d=>d.release&&typeof d.release=="function"),a=i(function(...d){return o.apply(null,d)}),l=b8(function(d,h){return n.stateFn.apply(null,[d,r,h,a])});function c(){l.reset(),a.reset(),s.forEach(d=>d.release())}return Object.assign(l.memoized,{release:c,projector:a.memoized,setResult:l.setResult,clearResult:l.clearResult})}}function zp(i){return kr(n=>{let e=n[i];return!Wye()&&a_()&&!(i in n)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},n=>n)}function Jye(i){return!!i&&typeof i=="object"&&Object.values(i).every(n=>typeof n=="function")}function qye(i){let n=Object.values(i),e=Object.keys(i),t=(...r)=>e.reduce((o,s,a)=>ke(oe({},o),{[s]:r[a]}),{});return[...n,t]}function Yye(i){return i instanceof Xe?Je(i):i}function Xye(i,n){return n.map((e,t)=>{if(i[t]instanceof Xe){let r=Je(i[t]);return{key:e.key,reducerFactory:r.reducerFactory?r.reducerFactory:j2,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return e})}function Qye(i){return i.map(n=>n instanceof Xe?Je(n):n)}function S8(i){return typeof i=="function"?i():i}function Zye(i,n){return i.concat(n)}function ewe(){if(Je(nt,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function twe(i,n){return function(e,t){let r=n.action(t)?M2(t):t,o=i(e,r);return n.state()?M2(o):o}}function M2(i){Object.freeze(i);let n=L2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&Gye(i,e)&&(!n||e!=="caller"&&e!=="callee"&&e!=="arguments")){let t=i[e];(v8(t)||L2(t))&&!Object.isFrozen(t)&&M2(t)}}),i}function iwe(i,n){return function(e,t){if(n.action(t)){let o=V2(t);u8(o,"action")}let r=i(e,t);if(n.state()){let o=V2(r);u8(o,"state")}return r}}function V2(i,n=[]){return(c8(i)||d8(i))&&n.length===0?{path:["root"],value:i}:Object.keys(i).reduce((t,r)=>{if(t)return t;let o=i[r];return jye(o)?t:c8(o)||d8(o)||Vye(o)||Mye(o)||Lye(o)||w8(o)?!1:Uye(o)?V2(o,[...n,r]):{path:[...n,r],value:o}},!1)}function u8(i,n){if(i===!1)return;let e=i.path.join("."),t=new Error(`Detected unserializable ${n} at "${e}". ${H2}#strict${n}serializability`);throw t.value=i.value,t.unserializablePath=e,t}function nwe(i,n){return function(e,t){if(n.action(t)&&!Lt.isInAngularZone())throw new Error(`Action '${t.type}' running outside NgZone. ${H2}#strictactionwithinngzone`);return i(e,t)}}function rwe(i){return a_()?oe({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},i):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function owe({strictActionSerializability:i,strictStateSerializability:n}){return e=>i||n?iwe(e,{action:t=>i&&!W2(t),state:()=>n}):e}function swe({strictActionImmutability:i,strictStateImmutability:n}){return e=>i||n?twe(e,{action:t=>i&&!W2(t),state:()=>n}):e}function W2(i){return i.type.startsWith("@ngrx")}function awe({strictActionWithinNgZone:i}){return n=>i?nwe(n,{action:e=>i&&!W2(e)}):n}function lwe(i){return[{provide:a8,useValue:i},{provide:s8,useFactory:cwe,deps:[a8]},{provide:a0,deps:[s8],useFactory:rwe},{provide:ib,multi:!0,deps:[a0],useFactory:swe},{provide:ib,multi:!0,deps:[a0],useFactory:owe},{provide:ib,multi:!0,deps:[a0],useFactory:awe}]}function E8(){return[{provide:U2,multi:!0,deps:[a0],useFactory:dwe}]}function cwe(i){return i}function dwe(i){if(!i.strictActionTypeUniqueness)return;let n=Object.entries(N2).filter(([,e])=>e>1).map(([e])=>e);if(n.length)throw new Error(`Action types are registered more than once, ${n.map(e=>`"${e}"`).join(", ")}. ${H2}#strictactiontypeuniqueness`)}function pwe(i={},n={}){return[{provide:f8,useFactory:ewe},{provide:QU,useValue:n.initialState},{provide:B2,useFactory:S8,deps:[QU]},{provide:F2,useValue:i},{provide:t8,useExisting:i instanceof Xe?i:F2},{provide:g8,deps:[F2,[new sx(t8)]],useFactory:Yye},{provide:r8,useValue:n.metaReducers?n.metaReducers:[]},{provide:o8,deps:[ib,r8],useFactory:Zye},{provide:ZU,useValue:n.reducerFactory?n.reducerFactory:j2},{provide:m8,deps:[ZU,o8],useFactory:y8},xye,Pye,Dye,kye,Nye,lwe(n.runtimeChecks),E8()]}function uwe(i,n,e={}){return[{provide:i8,multi:!0,useValue:i instanceof Object?{}:e},{provide:e8,multi:!0,useValue:{key:i instanceof Object?i.name:i,reducerFactory:!(e instanceof Xe)&&e.reducerFactory?e.reducerFactory:j2,metaReducers:!(e instanceof Xe)&&e.metaReducers?e.metaReducers:[],initialState:!(e instanceof Xe)&&e.initialState?e.initialState:void 0}},{provide:_8,deps:[i8,e8],useFactory:Xye},{provide:k2,multi:!0,useValue:i instanceof Object?i.reducer:n},{provide:n8,multi:!0,useExisting:n instanceof Xe?n:k2},{provide:C8,multi:!0,deps:[k2,[new sx(n8)]],useFactory:Qye},E8()]}var A8=(()=>{class i{constructor(e,t,r,o,s,a){}static{this.\u0275fac=function(t){return new(t||i)(de(xm),de(l0),de(G2),de(nt),de(f8,8),de(U2,8))}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})(),hwe=(()=>{class i{constructor(e,t,r,o,s){this.features=e,this.featureReducers=t,this.reducerManager=r;let a=e.map((l,c)=>{let h=t.shift()[c];return ke(oe({},l),{reducers:h,initialState:S8(l.initialState)})});r.addFeatures(a)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static{this.\u0275fac=function(t){return new(t||i)(de(_8),de(C8),de(rb),de(A8),de(U2,8))}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})(),vEt=(()=>{class i{static forRoot(e,t){return{ngModule:A8,providers:[...pwe(e,t)]}}static forFeature(e,t,r={}){return{ngModule:hwe,providers:[...uwe(e,t,r)]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({})}}return i})();function xd(...i){let n=i.pop(),e=i.map(t=>t.type);return{reducer:n,types:e}}function x8(i,...n){let e=new Map;for(let t of n)for(let r of t.types){let o=e.get(r);if(o){let s=(a,l)=>t.reducer(o(a,l),l);e.set(r,s)}else e.set(r,t.reducer)}return function(t=i,r){let o=e.get(r.type);return o?o(t,r):t}}var T8=zp("ui"),EEt=kr(T8,i=>i.blockUi),Ko=kr(T8,i=>i.theme);var c0={};ep(c0,{selectItemToSelect:()=>mwe,selectItemUpdateFwStatus:()=>gwe,selectTreeState:()=>z2});var z2=zp("tree"),mwe=kr(z2,i=>i.itemToSelect),gwe=kr(z2,i=>i.updateFwStatus);var na={};ep(na,{selectDialogState:()=>p0,selectDialogUuidsToReload:()=>Hwe,selectLastDialogId:()=>Uwe,selectMinimizedDialogs:()=>jwe,selectMinimizedDialogsIds:()=>D8,selectVisibleDialogs:()=>Gwe,selectVisibleDialogsIds:()=>F8});function _we(){return{ids:[],entities:{}}}function Cwe(){function i(n={}){return Object.assign(_we(),n)}return{getInitialState:i}}function Iwe(){function i(n){let e=s=>s.ids,t=s=>s.entities,r=kr(e,t,(s,a)=>s.map(l=>a[l])),o=kr(e,s=>s.length);return n?{selectIds:kr(n,e),selectEntities:kr(n,t),selectAll:kr(n,r),selectTotal:kr(n,o)}:{selectIds:e,selectEntities:t,selectAll:r,selectTotal:o}}return{getSelectors:i}}var Ii=function(i){return i[i.EntitiesOnly=0]="EntitiesOnly",i[i.Both=1]="Both",i[i.None=2]="None",i}(Ii||{});function Nr(i){return function(e,t){let r={ids:[...t.ids],entities:oe({},t.entities)},o=i(e,r);return o===Ii.Both?Object.assign({},t,r):o===Ii.EntitiesOnly?ke(oe({},t),{entities:r.entities}):t}}function Td(i,n){let e=n(i);return a_()&&e===void 0&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",i,"The `selectId` implementation:",n.toString()),e}function O8(i){function n(E,R){let T=Td(E,i);return T in R.entities?Ii.None:(R.ids.push(T),R.entities[T]=E,Ii.Both)}function e(E,R){let T=!1;for(let A of E)T=n(A,R)!==Ii.None||T;return T?Ii.Both:Ii.None}function t(E,R){return R.ids=[],R.entities={},e(E,R),Ii.Both}function r(E,R){let T=Td(E,i);return T in R.entities?(R.entities[T]=E,Ii.EntitiesOnly):(R.ids.push(T),R.entities[T]=E,Ii.Both)}function o(E,R){let T=E.map(A=>r(A,R));switch(!0){case T.some(A=>A===Ii.Both):return Ii.Both;case T.some(A=>A===Ii.EntitiesOnly):return Ii.EntitiesOnly;default:return Ii.None}}function s(E,R){return a([E],R)}function a(E,R){let A=(E instanceof Array?E:R.ids.filter(U=>E(R.entities[U]))).filter(U=>U in R.entities).map(U=>delete R.entities[U]).length>0;return A&&(R.ids=R.ids.filter(U=>U in R.entities)),A?Ii.Both:Ii.None}function l(E){return Object.assign({},E,{ids:[],entities:{}})}function c(E,R,T){let A=T.entities[R.id],U=Object.assign({},A,R.changes),z=Td(U,i),ee=z!==R.id;return ee&&(E[R.id]=z,delete T.entities[R.id]),T.entities[z]=U,ee}function d(E,R){return h([E],R)}function h(E,R){let T={};return E=E.filter(U=>U.id in R.entities),E.length>0?E.filter(z=>c(T,z,R)).length>0?(R.ids=R.ids.map(z=>T[z]||z),Ii.Both):Ii.EntitiesOnly:Ii.None}function _(E,R){let A=R.ids.reduce((U,z)=>{let ee=E(R.entities[z]);return ee!==R.entities[z]&&U.push({id:z,changes:ee}),U},[]).filter(({id:U})=>U in R.entities);return h(A,R)}function C({map:E,id:R},T){let A=T.entities[R];if(!A)return Ii.None;let U=E(A);return d({id:R,changes:U},T)}function I(E,R){return b([E],R)}function b(E,R){let T=[],A=[];for(let ee of E){let re=Td(ee,i);re in R.entities?A.push({id:re,changes:ee}):T.push(ee)}let U=h(A,R),z=e(T,R);switch(!0){case(z===Ii.None&&U===Ii.None):return Ii.None;case(z===Ii.Both||U===Ii.Both):return Ii.Both;default:return Ii.EntitiesOnly}}return{removeAll:l,addOne:Nr(n),addMany:Nr(e),setAll:Nr(t),setOne:Nr(r),setMany:Nr(o),updateOne:Nr(d),updateMany:Nr(h),upsertOne:Nr(I),upsertMany:Nr(b),removeOne:Nr(s),removeMany:Nr(a),map:Nr(_),mapOne:Nr(C)}}function ywe(i,n){let{removeOne:e,removeMany:t,removeAll:r}=O8(i);function o(T,A){return s([T],A)}function s(T,A){let U=T.filter(z=>!(Td(z,i)in A.entities));return U.length===0?Ii.None:(R(U,A),Ii.Both)}function a(T,A){return A.entities={},A.ids=[],s(T,A),Ii.Both}function l(T,A){let U=Td(T,i);return U in A.entities?(A.ids=A.ids.filter(z=>z!==U),R([T],A),Ii.Both):o(T,A)}function c(T,A){let U=T.map(z=>l(z,A));switch(!0){case U.some(z=>z===Ii.Both):return Ii.Both;case U.some(z=>z===Ii.EntitiesOnly):return Ii.EntitiesOnly;default:return Ii.None}}function d(T,A){return _([T],A)}function h(T,A,U){if(!(A.id in U.entities))return!1;let z=U.entities[A.id],ee=Object.assign({},z,A.changes),re=Td(ee,i);return delete U.entities[A.id],T.push(ee),re!==A.id}function _(T,A){let U=[],z=T.filter(ee=>h(U,ee,A)).length>0;if(U.length===0)return Ii.None;{let ee=A.ids,re=[];return A.ids=A.ids.filter((Z,ae)=>Z in A.entities?!0:(re.push(ae),!1)),R(U,A),!z&&re.every(Z=>A.ids[Z]===ee[Z])?Ii.EntitiesOnly:Ii.Both}}function C(T,A){let U=A.ids.reduce((z,ee)=>{let re=T(A.entities[ee]);return re!==A.entities[ee]&&z.push({id:ee,changes:re}),z},[]);return _(U,A)}function I({map:T,id:A},U){let z=U.entities[A];if(!z)return Ii.None;let ee=T(z);return d({id:A,changes:ee},U)}function b(T,A){return E([T],A)}function E(T,A){let U=[],z=[];for(let Z of T){let ae=Td(Z,i);ae in A.entities?z.push({id:ae,changes:Z}):U.push(Z)}let ee=_(z,A),re=s(U,A);switch(!0){case(re===Ii.None&&ee===Ii.None):return Ii.None;case(re===Ii.Both||ee===Ii.Both):return Ii.Both;default:return Ii.EntitiesOnly}}function R(T,A){T.sort(n);let U=[],z=0,ee=0;for(;z<T.length&&ee<A.ids.length;){let re=T[z],Z=Td(re,i),ae=A.ids[ee],Ie=A.entities[ae];n(re,Ie)<=0?(U.push(Z),z++):(U.push(ae),ee++)}z<T.length?A.ids=U.concat(T.slice(z).map(i)):A.ids=U.concat(A.ids.slice(ee)),T.forEach((re,Z)=>{A.entities[i(re)]=re})}return{removeOne:e,removeMany:t,removeAll:r,addOne:Nr(o),updateOne:Nr(d),upsertOne:Nr(b),setAll:Nr(a),setOne:Nr(l),setMany:Nr(c),addMany:Nr(s),updateMany:Nr(_),upsertMany:Nr(E),map:Nr(C),mapOne:Nr(I)}}function R8(i={}){let{selectId:n,sortComparer:e}={selectId:i.selectId??(s=>s.id),sortComparer:i.sortComparer??!1},t=Cwe(),r=Iwe(),o=e?ywe(n,e):O8(n);return oe(oe(oe({selectId:n,sortComparer:e},t),r),o)}var Bi={};ep(Bi,{requestBlockUI:()=>wwe,requestUnblockUI:()=>vwe,setTheme:()=>bwe});var wwe=lo("[UI] Block UI"),vwe=lo("[UI] Unblock UI"),bwe=lo("[UI] Change theme",ls());var eo={};ep(eo,{reloadTree:()=>Ewe,selectTreeItem:()=>Swe,updateFwStatus:()=>Awe});var Swe=lo("[Tree] Select item",ls()),Ewe=lo("[Tree] Reload tree",ls()),Awe=lo("[Tree] Update firewall status",ls());var on={};ep(on,{addDialog:()=>xwe,hideDialog:()=>Rwe,minimizeDialog:()=>Twe,reloadDialog:()=>Fwe,reloadDialogFinished:()=>kwe,removeDialog:()=>Dwe,removeMinimizedDialogs:()=>Pwe,restoreDialog:()=>Owe});var xwe=lo("[Dialog] Add new dialog",ls()),Twe=lo("[Dialog] Minimize dialog",ls()),Owe=lo("[Dialog] Restore dialog",ls()),Rwe=lo("[Dialog] Hide dialog",ls()),Pwe=lo("[Dialog] Remove minimized dialogs"),Dwe=lo("[Dialog] Remove dialog",ls()),Fwe=lo("[Dialog] Reload dialog",ls()),kwe=lo("[Dialog] Dialog reloaded",ls());var P8={};ep(P8,{loadPolicyTypes:()=>Lwe,policyTypesLoaded:()=>Mwe,reloadPolicy:()=>Nwe});var Nwe=lo("[Policy] Reload policy",ls()),Lwe=lo("[Policy] Load policy types"),Mwe=lo("[Policy] Policy types loaded",ls());var d0=R8({selectId:i=>i.dialogId}),Vwe=d0.getInitialState({minimizedDialogIds:[],visibleDialogIds:[],dialogsToReloadUuids:[]}),Bwe=x8(Vwe,xd(on.addDialog,(i,{dialog:n})=>d0.addOne(n,oe({},i))),xd(on.removeMinimizedDialogs,i=>ke(oe({},i),{minimizedDialogIds:[]})),xd(on.minimizeDialog,(i,n)=>ke(oe({},i),{minimizedDialogIds:[...i.minimizedDialogIds,n.dialogId],visibleDialogIds:i.visibleDialogIds.filter(e=>e!==n.dialogId)})),xd(on.restoreDialog,(i,n)=>ke(oe({},i),{minimizedDialogIds:i.minimizedDialogIds.filter(e=>e!==n.dialogId),visibleDialogIds:[...i.visibleDialogIds,n.dialogId]})),xd(on.hideDialog,(i,n)=>ke(oe({},i),{minimizedDialogIds:i.minimizedDialogIds.filter(e=>e!==n.dialogId),visibleDialogIds:i.visibleDialogIds.filter(e=>e!==n.dialogId)})),xd(on.removeDialog,(i,n)=>d0.removeOne(n.dialogId,ke(oe({},i),{minimizedDialogIds:i.minimizedDialogIds.filter(e=>e!==n.dialogId),visibleDialogIds:i.visibleDialogIds.filter(e=>e!==n.dialogId)}))),xd(on.reloadDialog,(i,n)=>ke(oe({},i),{dialogsToReloadUuids:n.dialogUuids})),xd(on.reloadDialogFinished,(i,n)=>ke(oe({},i),{dialogsToReloadUuids:null})));function BEt(i,n){return Bwe(i,n)}var p0=zp("dialog"),K2=d0.getSelectors(p0),Uwe=kr(K2.selectIds,i=>{let n=0;if(Array.isArray(i)){let e=Math.max(...i);e>n&&(n=e)}return n}),D8=kr(p0,i=>i.minimizedDialogIds),jwe=kr(K2.selectAll,D8,(i,n)=>i.filter(e=>n.includes(e.dialogId))),F8=kr(p0,i=>i.visibleDialogIds),Gwe=kr(K2.selectAll,F8,(i,n)=>i.filter(e=>n.includes(e.dialogId))),Hwe=kr(p0,i=>i.dialogsToReloadUuids);var sb={};ep(sb,{selectPolicyLoaded:()=>Wwe,selectPolicyState:()=>$2,selectPolicyTypes:()=>zwe});var $2=zp("policy"),Wwe=kr($2,i=>i.loadedPolicy),zwe=kr($2,i=>i.policyTypes);var Un=(()=>{class i extends Mi{constructor(e,t){super(e),this.httpClient=e,this.store=t,this.fwcPolicy=[],this.subjectSelectedPolicy=new Ue,this.subjectReloadPolicy=new Ue,this.alive=!0,this.endpoint=`${_e.settings.fwcAppURL}/policy`,this.store.pipe(yt(()=>this.alive),Cn(sb.selectPolicyTypes)).subscribe(r=>{this.fwcPolicyTypes=r})}ngOnDestroy(){this.alive=!1}setSelectedPolicy(e){if(!e)return;let t=Object.assign({},e),r="",o="";if(this.selectedPolicy&&(o=this.selectedPolicy._fwcFwName),e._fwcFwName&&(o=e._fwcFwName),Array.isArray(this.fwcPolicyTypes)){for(let s=0;s<this.fwcPolicyTypes.length;s++)this.fwcPolicyTypes[s].id==e._fwcPolicyType&&(r=this.fwcPolicyTypes[s].name);t._fwcFwId=e._fwcFwId,t._fwcFwName=o,t._fwcPolicyType=e._fwcPolicyType,t._fwcPolicyName=r||e._fwcPolicyName,t._fwcPolicyIPVersion=lB[e._fwcPolicyType],this.selectedPolicy=t,this.subjectSelectedPolicy.next(t)}else _e.log("There are no policy types")}getSelectedPolicy(){return this.subjectSelectedPolicy.asObservable()}getActualSelectedPolicy(){return this.selectedPolicy}getPolicy(e,t,r,o){let s=o?"rule/type/grouped/get":"rule/type/get",a=`${this.endpoint}/${s}`,l={fwcloud:r,firewall:e,type:t};return this.httpClient.put(a,JSON.stringify(l)).pipe(K(c=>this.handleAPIResponse(c)),K(c=>this.extractPolicyData(c)),q(c=>this.handleAPIError(c)))}getPolicyRulesInGroup(e,t,r,o){let s=`${this.endpoint}/rule/type/ingroup/get`,a={fwcloud:r,firewall:e,type:t,idgroup:o};return this.httpClient.put(s,JSON.stringify(a)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getActualPolicy(){return this.fwcPolicy}getActualPolicySequential(){return this.fwcPolicySequential}setActualPolicy(e){if(e){this.fwcPolicy=e,this.fwcPolicySequential=[];for(let t=0;t<this.fwcPolicy.length;t++){let r=this.fwcPolicy[t];if(r.rule_group)for(let o=0;o<r.rules.length;o++){let s=r.rules[o];this.fwcPolicySequential.push(s)}else this.fwcPolicySequential.push(r)}}else this.fwcPolicy=[],this.fwcPolicySequential=[]}reloadPolicy(){return this.subjectReloadPolicy.next(!0),this.subjectReloadPolicy.asObservable()}newPolicyRule(e){let t=`${this.endpoint}/rule`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRule(e){let t=`${this.endpoint}/rule`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRuleAsObject(e){let t=`${this.endpoint}/rule`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deletePolicyRules(e,t,r){let o=`${this.endpoint}/rule/del`,s={fwcloud:r,firewall:e,rulesIds:t};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRulesActive(e){let t=`${this.endpoint}/rule/active`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRulesStyle(e){let t=`${this.endpoint}/rule/style`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyObject(e,t,r){let o,s;return t=="O"?e.prefix!==void 0&&e.prefix!==null?r==O.OBJ_OPENVPN_CONFIG_CLI||r==O.OBJ_OPENVPN_PREFIX?s="prefix/openvpn":r==O.OBJ_WGC_CONFIG_CLI||r==O.OBJ_WIREGUARD_PREFIX?s="prefix/wireguard":(r==O.OBJ_ISC_CONFIG_CLI||r==O.OBJ_IPSEC_PREFIX)&&(s="prefix/ipsec"):e.openvpn!==void 0&&e.openvpn!==null?s="openvpn":e.wireguard!==void 0&&e.wireguard!==null?s="wireguard":e.ipsec!==void 0&&e.ipsec!==null?s="ipsec":s="ipobj":s="interface",e.rule==e.new_rule&&e.position==e.new_position?o=`${this.endpoint}/${s}/order`:o=`${this.endpoint}/${s}/move`,this.httpClient.put(o,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}negatePolicyObject(e,t){let r;if(e)return t?r=`${this.endpoint}/rule/position/negate`:r=`${this.endpoint}/rule/position/allow`,this.httpClient.put(r,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newPolicyObject(e,t,r){let o;return t=="O"?e.prefix?r==O.OBJ_OPENVPN_PREFIX||r==O.OBJ_OPENVPN_CONFIG_CLI?o=`${this.endpoint}/prefix/openvpn`:r==O.OBJ_WIREGUARD_PREFIX||r==O.OBJ_WGC_CONFIG_CLI?o=`${this.endpoint}/prefix/wireguard`:(r==O.OBJ_IPSEC_PREFIX||r==O.OBJ_ISC_CONFIG_CLI)&&(o=`${this.endpoint}/prefix/ipsec`):e.openvpn?o=`${this.endpoint}/openvpn`:e.wireguard?o=`${this.endpoint}/wireguard`:e.ipsec?o=`${this.endpoint}/ipsec`:o=`${this.endpoint}/ipobj`:o=`${this.endpoint}/interface`,this.httpClient.post(o,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deletePolicyObject(e,t,r){let o,s;return t=="O"?(e.prefix!==void 0&&e.prefix!==null?r==O.OBJ_OPENVPN_CONFIG_CLI||r==O.OBJ_OPENVPN_PREFIX?s="prefix/openvpn":r==O.OBJ_WGC_CONFIG_CLI||r==O.OBJ_WIREGUARD_PREFIX?s="prefix/wireguard":(r==O.OBJ_ISC_CONFIG_CLI||r==O.OBJ_IPSEC_PREFIX)&&(s="prefix/ipsec"):e.openvpn!==void 0&&e.openvpn!==null?s="openvpn":e.wireguard!==void 0&&e.wireguard!==null?s="wireguard":e.ipsec!==void 0&&e.ipsec!==null?s="ipsec":s="ipobj",o=`${this.endpoint}/${s}/del`):o=`${this.endpoint}/interface/del`,this.httpClient.put(o,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getPolicyTypes(){let e=`${this.endpoint}/types`;return this.httpClient.get(e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}managePolicyRules(e,t){let r=`${this.endpoint}/rule/copy`,o=`${this.endpoint}/rule/move`,s,a=Object.assign({},e);return t==Or.COPY?s=r:t==Or.CUT&&(s=o),delete a.action,delete a.idgroup,delete a.rulesOrder,delete a.pasteOnRuleOrder,this.httpClient.put(s,JSON.stringify(a)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newPolicyRulesGroup(e){let t=`${this.endpoint}/group`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRulesGroup(e){let t=`${this.endpoint}/group`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updatePolicyRulesGroupStyleOrName(e,t){let r,o={fwcloud:e.fwcloud,firewall:e.firewall};return t?(r=`${this.endpoint}/group/style`,o.style=e.style,o.groupIds=e.groupIds):(r=`${this.endpoint}/group/name`,o.id=e.id,o.name=e.name),this.httpClient.put(r,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deletePolicyRulesGroup(e,t,r){let o=`${this.endpoint}/group/del`,s={fwcloud:r,firewall:e,id:t};return this.httpClient.put(o,JSON.stringify(s)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deletePolicyRulesGroupRuleFromGroup(e){let t=`${this.endpoint}/group/rules/del`,r={fwcloud:e.fwcloud,firewall:e.firewall,id:e.idgroup,rulesIds:e.rulesIds};return this.httpClient.put(t,r).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}setSelectedRule(e){_e.log("Inside policy component: ",e)}getPolicyRule(e,t,r,o){let s=`${this.endpoint}/rule/get`,a={fwcloud:o,firewall:e,type:t,rule:r};return this.httpClient.put(s,JSON.stringify(a)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getPolicyRules(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/policyRules/read`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}getPolicyRuleFull(e,t,r,o){let s=`${this.endpoint}/rule/full/get`,a={fwcloud:o,firewall:e,type:t,rule:r};return this.httpClient.put(s,JSON.stringify(a)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getPolicyRuleCompilation(e,t,r,o){let s=`${this.endpoint}/compile/rule`,a={fwcloud:o,firewall:e,type:t,rule:r};return this.httpClient.put(s,JSON.stringify(a)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getPolicyRulesCompilation(e,t,r,o,s){let a=`${this.endpoint}/compile/rule`,l={fwcloud:o,firewall:e,type:t,rules:r,compiler:s};return this.httpClient.put(a,JSON.stringify(l)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}compileFirewall(e,t,r){let o=`${_e.settings.fwcAppURL}/policy/compile?channel_id=${r}`,s={fwcloud:t,firewall:e};return this.httpClient.put(o,s).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}installFirewall(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/policy/install?channel_id=${s}`,l={fwcloud:t,firewall:e,sshuser:r,sshpass:o};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}generatePolicyScript(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/policyRules/download`;return this.httpClient.post(r,null,{observe:"response",responseType:"blob"}).pipe(q(this.handleAPIError))}extractPolicyData(e){return this.fwcPolicy=e.data,e||{}}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(nt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var ab=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/policy/positions`}getPositions(e){let t={type:e},r=`${this.endpoint}/get`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getAllPositions(){let e=`${this.endpoint}/all/get`;return this.httpClient.put(e,{}).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getTypesPositions(){let e=`${_e.settings.fwcAppURL}/ipobj/positions/policy`;return this.httpClient.get(e).pipe(K(this.handleAPIResponse),K(this.addSpecialPolicyTypesPositions),q(this.handleAPIError))}addSpecialPolicyTypesPositions(e){return Array.isArray(e.data)&&(e.data=[...e.data,{type:O.OBJ_ADDRESS,position:Fi.GATEWAY_POSITION},{type:O.OBJ_INTERFACE_FIREWALL,position:Fi.INTERFACE_POSITION},{type:O.OBJ_ADDRESS,position:Fi.TO_POSITION},{type:O.OBJ_ADDRESS_RANGE,position:Fi.TO_POSITION},{type:O.OBJ_NETWORK,position:Fi.TO_POSITION},{type:O.OBJ_HOST,position:Fi.TO_POSITION},{type:O.OBJ_DNS,position:Fi.TO_POSITION},{type:O.OBJ_GROUP,position:Fi.TO_POSITION},{type:O.OBJ_OPENVPN_CONFIG_CLI,position:Fi.TO_POSITION},{type:O.OBJ_OPENVPN_PREFIX,position:Fi.TO_POSITION},{type:O.OBJ_WGC_CONFIG_CLI,position:Fi.TO_POSITION},{type:O.OBJ_WIREGUARD_PREFIX,position:Fi.TO_POSITION},{type:O.OBJ_ISC_CONFIG_CLI,position:Fi.TO_POSITION},{type:O.OBJ_IPSEC_PREFIX,position:Fi.TO_POSITION},{type:O.OBJ_ADDRESS,position:_o.FROM_POSITION},{type:O.OBJ_ADDRESS_RANGE,position:_o.FROM_POSITION},{type:O.OBJ_NETWORK,position:_o.FROM_POSITION},{type:O.OBJ_HOST,position:_o.FROM_POSITION},{type:O.OBJ_DNS,position:_o.FROM_POSITION},{type:O.OBJ_GROUP,position:_o.FROM_POSITION},{type:O.OBJ_OPENVPN_CONFIG_CLI,position:_o.FROM_POSITION},{type:O.OBJ_OPENVPN_PREFIX,position:_o.FROM_POSITION},{type:O.OBJ_MARK,position:_o.FROM_POSITION},{type:O.OBJ_WGC_CONFIG_CLI,position:_o.FROM_POSITION},{type:O.OBJ_WIREGUARD_PREFIX,position:_o.FROM_POSITION},{type:O.OBJ_ISC_CONFIG_CLI,position:_o.FROM_POSITION},{type:O.OBJ_IPSEC_PREFIX,position:_o.FROM_POSITION},{type:O.OBJ_NETWORK,position:xs.NETWORK},{type:O.OBJ_ADDRESS_RANGE,position:xs.RANGE},{type:O.OBJ_ADDRESS,position:xs.ROUTER},{type:O.OBJ_ADDRESS,position:xs.DNS},{type:O.OBJ_INTERFACE_FIREWALL,position:xs.INTERFACE},{type:O.OBJ_INTERFACE_HOST,position:xs.INTERFACE},{type:O.OBJ_ADDRESS,position:xs.IP},{type:O.OBJ_ADDRESS,position:Id.VIRTUAL_IPS},{type:O.OBJ_INTERFACE_FIREWALL,position:Id.INTERFACE},{type:O.OBJ_FIREWALL,position:Id.MASTER_NODE},{type:O.OBJ_ADDRESS,position:Na.FRONTEND_IP},{type:O.OBJ_SERVICE_TCP,position:Na.FRONTEND_PORT},{type:O.OBJ_SERVICE_UDP,position:Na.FRONTEND_PORT},{type:O.OBJ_ADDRESS,position:Na.BACKEND_IPS},{type:O.OBJ_SERVICE_TCP,position:Na.BACKEND_PORT},{type:O.OBJ_SERVICE_UDP,position:Na.BACKEND_PORT}]),e}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Kp=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e}getRoutingPolicy(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getRoutingPolicyGrid(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/grid`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newRoutingPolicyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules`;return this.httpClient.post(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingPolicyRule(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}moveObjectBetweenFromPositions(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/moveFrom`;return this.httpClient.put(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingPolicyRules(e,t,r,o){let s=r.map(c=>`rules[]=${c}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/bulkUpdate?${s}`,l={active:o.active,style:o.style,routingGroupId:o.routingGroupId};return this.httpClient.put(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingPolicyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingPolicyRules(e,t,r){let o=r.map(a=>`rules[]=${a}`).join("&"),s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/bulkRemove?${o}`;return this.httpClient.delete(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}manageRoutingPolicyRules(e,t,r,o,s,a){let l="copy",c=this.httpClient.post,d=o<0?"above":"below";a===Or.CUT&&(l="move",c=this.httpClient.put);let h=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/${l}`,_={to:r,offset:d,rules:s};return c.call(this.httpClient,h,_).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}compileRoutingPolicyRules(e,t,r){let o=r.map(a=>`rules[]=${a}`).join("&"),s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingRules/compile?${o}`;return this.httpClient.get(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newRoutingPolicyRuleGroup(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingGroups`,l={name:r,comment:o,routingRules:s};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingPolicyRuleGroup(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingGroups/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingPolicyRulesGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingGroups/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var Os=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e}getRoutingTables(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getRoutingTable(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getRoutingTableRoutesGrid(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/grid`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newRoutingTable(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables`;return this.httpClient.post(a,{number:r,name:o,comment:s}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingTable(e,t,r,o,s,a){let l=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}`;return this.httpClient.put(l,{number:o,name:s,comment:a}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingTable(e){let{fwcloud:t,firewall:r,id:o}=e,s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${r}/routingTables/${o}`;return this.httpClient.delete(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkTableRestrictions(e){let{fwcloud:t,firewall:r,id:o}=e,s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${r}/routingTables/${o}/restricted`;return this.httpClient.get(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newRoutingTableRoute(e,t,r,o,s,a,l){let c=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes`,d=l<0?"above":"below";return this.httpClient.post(c,{gatewayId:o,to:a,offset:d,comment:s}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingTableRoute(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/${o}`;return this.httpClient.put(a,s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}moveObjectInRoutes(e,t,r,o,s){let a;switch(o){case Fi.TO_POSITION:a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/moveTo`;break;case Fi.GATEWAY_POSITION:a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/moveToGateway`;break;case Fi.INTERFACE_POSITION:a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/moveInterface`;break}return this.httpClient.put(a,s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingTableRoutes(e,t,r,o,s){let a=o.map(d=>`routes[]=${d}`).join("&"),l=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/bulkUpdate?${a}`,c={active:s.active,style:s.style,routeGroupId:s.routeGroupId};return this.httpClient.put(l,c).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingTableRoutes(e,t,r,o){let s=o.map(l=>`routes[]=${l}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/bulkRemove?${s}`;return this.httpClient.delete(a).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}compileRoutingTableRoutes(e,t,r,o){let s=o.map(l=>`routes[]=${l}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/compile?${s}`;return this.httpClient.get(a).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}manageTableRoutes(e,t,r,o,s,a,l){let c="copy",d=this.httpClient.post;l===Or.CUT&&(c="move",d=this.httpClient.put);let h=s<0?"above":"below",_=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routingTables/${r}/routes/${c}`,C={to:o,offset:h,routes:a};return d.call(this.httpClient,_,C).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newRoutingTableRouteGroup(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routeGroups`,l={name:r,comment:o,routes:s};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateRoutingTableRouteGroup(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routeGroups/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteRoutingTableRouteGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/routeGroups/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var lb=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e}getSnapshots(e){let t=`${_e.settings.fwcAppURL}/fwclouds/${e}/snapshots`;return this.httpClient.get(t).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}createSnapshot(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/snapshots?channel_id=${t}`;return this.httpClient.post(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}restoreSnapshot(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/snapshots/${t}/restore?channel_id=${r}`;return this.httpClient.post(o,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}deleteSnapshot(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${e}/snapshots/${t}`;return this.httpClient.delete(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var er=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this.endpoint=`${_e.settings.fwcAppURL}/vpn`}getCA(e){let t=`${this.endpoint}/pki/ca/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newCA(e){let t=`${this.endpoint}/pki/ca`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateCA(e){let t=`${_e.settings.fwcAppURL}/fwclouds/${e.fwcloud}/cas/${e.id}`,r={comment:e.comment};return this.httpClient.put(t,JSON.stringify(r)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateCRT(e){let t=`${_e.settings.fwcAppURL}/fwclouds/${e.fwcloud}/cas/${e.ca}/crts/${e.id}`,r={comment:e.comment};return this.httpClient.put(t,JSON.stringify(r)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteCA(e){let t=`${this.endpoint}/pki/ca/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkCARestrictions(e){let t=`${this.endpoint}/pki/ca/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCertificate(e){let t=`${this.endpoint}/pki/crt/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newCertificate(e){let t=`${this.endpoint}/pki/crt`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteCertificate(e){let t=`${this.endpoint}/pki/crt/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkCertificateRestrictions(e){let t=`${this.endpoint}/pki/crt/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newPrefixFolder(e){let t=`${this.endpoint}/pki/prefix`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}editPrefixFolder(e){let t=`${this.endpoint}/pki/prefix`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deletePrefixFolder(e){let t=`${this.endpoint}/pki/prefix/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkPrefixFolderRestrictions(e){return vt({data:{},status:200})}newOpenVPNPrefix(e){let t=`${this.endpoint}/openvpn/prefix`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}editOpenVPNPrefix(e){let t=`${this.endpoint}/openvpn/prefix`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteOpenVPNPrefix(e){let t=`${this.endpoint}/openvpn/prefix/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkOpenVPNPrefixRestrictions(e){let t=`${this.endpoint}/openvpn/prefix/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getOpenVPNPrefixInfo(e){let t=`${this.endpoint}/openvpn/prefix/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getOpenVPNWhereUsed(e){let t=`${this.endpoint}/openvpn/prefix/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfig(e){let t=`${this.endpoint}/openvpn/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteConfig(e){let t=`${this.endpoint}/openvpn/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newConfig(e){let t=`${this.endpoint}/openvpn`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateConfig(e){let t=`${this.endpoint}/openvpn`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}installConfig(e,t){let r=`${this.endpoint}/openvpn/install?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}uninstallConfig(e,t){let r=`${this.endpoint}/openvpn/uninstall?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncConfigCCD(e,t){let r=`${this.endpoint}/openvpn/ccdsync?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncConfigPendingCCD(e,t){return t.onlyPending=1,this.syncConfigCCD(e,t)}getConfigFile(e){let t=`${this.endpoint}/openvpn/file/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getVPNLanNextFreeIP(e){let t=`${this.endpoint}/openvpn/ip/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkConfigRestrictions(e){let t=`${this.endpoint}/openvpn/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfigIPObjects(e){let t=`${this.endpoint}/openvpn/ipobj/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfigInfo(e){let t=`${this.endpoint}/openvpn/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfigWhereUsed(e){let t=`${this.endpoint}/openvpn/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfigStatus(e){let t=`${this.endpoint}/openvpn/status/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getConfigHistoricCall(e,t,r,o,s){let a=new dc;if(s)for(let c in s)s[c]&&(a=a.set(c,s[c]));let l=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/openvpns/${r}/${o}`;return a.toString()&&(l+=`?${a.toString()}`),this.httpClient.get(l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getConfigHistoric(e,t,r,o){return this.getConfigHistoricCall(e,t,r,"history",o)}getConfigHistoricGraph(e,t,r,o){return this.getConfigHistoricCall(e,t,r,"graph",o)}getFirewallOVPNServers(e){let t=`${this.endpoint}/openvpn/firewall/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getCNExistsInCA(e){let t=`${this.endpoint}/pki/crt/exists`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}doHistoric(e){let t=`${_e.settings.fwcAppURL}/openvpnarchives?channel_id=${e}`;return this.httpClient.post(t,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}getHistoricConfig(){let e=`${_e.settings.fwcAppURL}/openvpnarchives/config`;return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}saveHistoricConfig(e){let t=`${_e.settings.fwcAppURL}/openvpnarchives/config`;return this.httpClient.put(t,e).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newWireGuardPrefix(e){let t=`${this.endpoint}/wireguard/prefix`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}editWireGuardPrefix(e){let t=`${this.endpoint}/wireguard/prefix`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteWireGuardPrefix(e){let t=`${this.endpoint}/wireguard/prefix/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkWireGuardPrefixRestrictions(e){let t=`${this.endpoint}/wireguard/prefix/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardPrefixInfo(e){let t=`${this.endpoint}/wireguard/prefix/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardWhereUsed(e){let t=`${this.endpoint}/wireguard/prefix/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardConfig(e){let t=`${this.endpoint}/wireguard/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteWireGuardConfig(e){let t=`${this.endpoint}/wireguard/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardClient(e){let t=`${this.endpoint}/wireguard/client/get`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardClientOptions(e){let t=`${this.endpoint}/wireguard/client/options/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardClients(e){let t=`${this.endpoint}/wireguard/clients/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newWireGuardConfig(e){let t=`${this.endpoint}/wireguard`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateWireGuardConfig(e){let t=`${this.endpoint}/wireguard`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateWireGuardClientOptions(e){let t=`${this.endpoint}/wireguard/client/options/update`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}installWireGuardConfig(e,t){let r=`${this.endpoint}/wireguard/install?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}uninstallWireGuardConfig(e,t){let r=`${this.endpoint}/wireguard/uninstall?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncWireGuardConfigCCD(e,t){let r=`${this.endpoint}/wireguard/ccdsync?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncWireGuardConfigPendingCCD(e,t){return t.onlyPending=1,this.syncWireGuardConfigCCD(e,t)}getWireGuardConfigFile(e){let t=`${this.endpoint}/wireguard/file/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireguardConfigFilename(e){let t=`${this.endpoint}/wireguard/config/filename`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardVPNLanNextFreeIP(e){let t=`${this.endpoint}/wireguard/ip/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkWireGuardConfigRestrictions(e){let t=`${this.endpoint}/wireguard/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardConfigIPObjects(e){let t=`${this.endpoint}/wireguard/ipobj/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardConfigInfo(e){let t=`${this.endpoint}/wireguard/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getWireGuardConfigWhereUsed(e){let t=`${this.endpoint}/wireguard/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newIPSecPrefix(e){let t=`${this.endpoint}/ipsec/prefix`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}editIPSecPrefix(e){let t=`${this.endpoint}/ipsec/prefix`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteIPSecPrefix(e){let t=`${this.endpoint}/ipsec/prefix/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkIPSecPrefixRestrictions(e){let t=`${this.endpoint}/ipsec/prefix/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecPrefixInfo(e){let t=`${this.endpoint}/ipsec/prefix/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecWhereUsed(e){let t=`${this.endpoint}/ipsec/prefix/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecConfig(e){let t=`${this.endpoint}/ipsec/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecServerConfig(e){let t=`${this.endpoint}/ipsec/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}deleteIPSecConfig(e){let t=`${this.endpoint}/ipsec/del`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecClient(e){let t=`${this.endpoint}/ipsec/client/get`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecClientOptions(e){let t=`${this.endpoint}/ipsec/client/options/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecClients(e){let t=`${this.endpoint}/ipsec/clients/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}newIPSecConfig(e){let t=`${this.endpoint}/ipsec`;return this.httpClient.post(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateIPSecConfig(e){let t=`${this.endpoint}/ipsec`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}updateIPSecClientOptions(e){let t=`${this.endpoint}/ipsec/client/options/update`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}installIPSecConfig(e,t){let r=`${this.endpoint}/ipsec/install?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}uninstallIPSecConfig(e,t){let r=`${this.endpoint}/ipsec/uninstall?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncIPSecConfigCCD(e,t){let r=`${this.endpoint}/ipsec/ccdsync?channel_id=${e}`;return this.httpClient.put(r,JSON.stringify(t)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}syncIPSecConfigPendingCCD(e,t){return t.onlyPending=1,this.syncIPSecConfigCCD(e,t)}getIPSecConfigFile(e){let t=`${this.endpoint}/ipsec/file/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecConfigFilename(e){let t=`${this.endpoint}/ipsec/config/filename`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecVPNLanNextFreeIP(e){let t=`${this.endpoint}/ipsec/ip/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}checkIPSecConfigRestrictions(e){let t=`${this.endpoint}/ipsec/restricted`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecConfigIPObjects(e){let t=`${this.endpoint}/ipsec/ipobj/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecConfigInfo(e){let t=`${this.endpoint}/ipsec/info/get`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}getIPSecConfigWhereUsed(e){let t=`${this.endpoint}/ipsec/where`;return this.httpClient.put(t,JSON.stringify(e)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Cr=(()=>{class i{constructor(){this.subjectInputData=new Ue}setInputData(e){this.subjectInputData.next(e)}getInputData(){return this.subjectInputData.asObservable()}getInputDataValue(e){let t={};if(e&&e.formControls)for(let r of e.formControls)r.value!==void 0&&(t[r.name]=r.value);return t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ht=(()=>{class i{constructor(){this.focused=!1,this.item=void 0,this.subjectItem=new Ue,this.subjectHideObjectPanel=new Ue,this.subjectClipboardItem=new Ue,this.subjectModifiedItem=new Ue,this.subjectSearchItem=new Ue,this.subjectObjectInfo=new Ue,this.subjectMessage=new Ue,this.subjectSelectedTreeNode=new Ue,this.subjectFwcTreeComponents=new vn(null),this.subjectCloudCompile=new Ue,this.subjectFirewallPluginOperation=new Ue,this.subjectClusterPluginOperation=new Ue,this.subjectScrollTo=new Ue,this.subjectLastMinifiedDialogId=new Ue}setItem(e){this.item=e,this.subjectItem.next(e)}getItem(){return this.subjectItem.asObservable()}getActualItem(){return this.item}hideObjectPanel(){return this.subjectHideObjectPanel.next(!0),this.subjectHideObjectPanel.asObservable()}setClipboardItem(e,t){this.clipboardItem=e,this.clipboardItem.action=t,this.subjectClipboardItem.next(this.clipboardItem)}getClipboardItem(){return this.subjectClipboardItem.asObservable()}getActualClipboardItem(){return this.clipboardItem}clearClipboardItem(){this.clipboardItem=null,this.subjectClipboardItem.next(this.clipboardItem)}updateClipboardItem(e){this.clipboardItem&&e&&this.clipboardItem._fwcObjId==e._fwcObjId&&(this.clipboardItem._fwcObjName=e._fwcObjName),this.subjectClipboardItem.next(this.clipboardItem)}setDragItem(e){this.dragItem=e}getDragItem(){return this.dragItem}clearDragItem(){this.dragItem=null}setModifiedItem(e,t,r,o,s){e&&(t&&(e.deleteFromList=!0),r&&(e.addToList=!0),o&&(e.selectItemInPosition=!0),s&&(e.highlightItem=!0),this.modifiedItem=e,this.subjectModifiedItem.next(e))}getModifiedItem(){return this.subjectModifiedItem.asObservable()}setSearchItem(e){this.searchItem=e,this.subjectSearchItem.next(e)}getSearchItem(){return this.subjectSearchItem.asObservable()}getCloudToCompile(){return this.subjectCloudCompile.asObservable()}setCloudToCompile(e){this.subjectCloudCompile.next(e)}getFirewallToPluginOperation(){return this.subjectFirewallPluginOperation.asObservable()}setFirewallToPluginOperation(e){return this.subjectFirewallPluginOperation.next(e)}getClusterToPluginOperation(){return this.subjectClusterPluginOperation.asObservable()}setClusterToPluginOperation(e){return this.subjectClusterPluginOperation.next(e)}setObjectInfo(e,t){if(this.focused)return;let r,o=e?Object.assign({},e):void 0;t&&t.targetElement?r={obj:o,event:t.event,targetElement:t.targetElement}:r={obj:o,event:t||void 0},this.subjectObjectInfo.next(r)}getObjectInfo(){return this.subjectObjectInfo.asObservable()}setMessage(e){this.subjectMessage.next(e)}getMessage(){return this.subjectMessage.asObservable()}isFocused(){this.focused=!0}isBlur(){this.focused=!1,this.setObjectInfo(void 0,null)}setScrollToElement(e){this.subjectScrollTo.next(e)}getScrollToElement(){return this.subjectScrollTo.asObservable()}setLastMinifiedDialogId(e){this.lastMinifiedDialogId=e,this.subjectLastMinifiedDialogId.next(e)}getActualLastMinifiedDialogId(){return this.lastMinifiedDialogId}setFwcTreeComponents(e){this.subjectFwcTreeComponents.next(e)}getActualFwcTreeComponents(){return this.subjectFwcTreeComponents.getValue()}setSelectedTreeNode(e){this.subjectSelectedTreeNode.next(e)}getSelectedTreeNode(){return this.subjectSelectedTreeNode.asObservable()}setPrefixItem(e){this.setItem(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var $p=(()=>{class i{constructor(){this.subjectRule=new Ue,this.subjectSelectedRules=new Ue,this.subjectSelectedRulesRange=new Ue,this.subjectCompileSelectedRules=new Ue,this.subjectModifiedRule=new Ue,this.subjectClipboardRules=new Ue,this.subjectRuleStatus=new Ue,this.subjectRuleHeightRecalculate=new Ue,this.selectedRules=[]}setRule(e){this.rule=e,this.subjectRule.next(e)}getRule(){return this.subjectRule.asObservable()}addSelectedRule(e){let t=this.selectedRules.push(e);return this.subjectSelectedRules.next(this.selectedRules),t}removeSelectedRule(e){for(let t=0;t<this.selectedRules.length;t++)this.selectedRules[t].id==e.id&&(this.selectedRules.splice(t,1),this.subjectSelectedRules.next(this.selectedRules))}clearSelectedRules(){this.selectedRules=[],this.subjectSelectedRules.next([])}getSelectedRules(){return this.subjectSelectedRules.asObservable()}getActualSelectedRules(e){if(e)for(let t=0;t<this.selectedRules.length;t++){let r=[];return this.selectedRules[t].id==e&&r.push(this.selectedRules[t]),r.length?r:null}else return this.selectedRules.length?this.selectedRules:null}setSelectedRuleRange(e,t){this.selectedRulesRange={minRuleOrder:e,maxRuleOrder:t},this.subjectSelectedRulesRange.next(this.selectedRulesRange)}getSelectedRuleRange(){return this.subjectSelectedRulesRange.asObservable()}setSelectedRules(e){this.selectedRules=e,this.subjectSelectedRules.next(this.selectedRules)}updateSelectedRules(e,t){if(e&&e.length&&t&&t.length){this.selectedRules=[];for(let r=0;r<e.length;r++){let o=e[r];for(let s=0;s<t.length;s++)o.id==t[s].id&&o.firewall==t[s].firewall&&this.selectedRules.push(t[s])}}}getSelectedRulesLength(){return this.selectedRules.length}isRuleSelected(e){let t=!1;for(let r=0;r<this.selectedRules.length&&!t;r++)this.selectedRules[r].id==e&&(t=!0);return t}copyRulesToClipboard(){this.clipboardRules={action:Or.COPY,rules:this.selectedRules.slice(0)},this.subjectClipboardRules.next(this.clipboardRules)}cutRulesToClipboard(){this.clipboardRules={action:Or.CUT,rules:this.selectedRules.slice(0)},this.subjectClipboardRules.next(this.clipboardRules)}clearClipboardRules(){this.clipboardRules=null,this.subjectClipboardRules.next(this.clipboardRules)}getClipboardRules(){return this.subjectClipboardRules.asObservable()}getActualClipboardRules(){return this.clipboardRules&&this.clipboardRules.rules.length?this.clipboardRules:null}getActualClipboardRulesLength(){let e=0;return this.clipboardRules&&this.clipboardRules.rules&&(e=this.clipboardRules.rules.length),e}getClipboardRulesGroups(){return this.getRulesGroups(this.clipboardRules.rules)}getSelectedRulesGroups(){return this.getRulesGroups(this.selectedRules)}getRulesGroups(e){let t=[];for(let r=0;r<e.length;r++){let o=e[r].idgroup;o===null&&(o=-1),t.indexOf(o)==-1&&t.push(o)}return t}setSelectedRulesToCompile(){this.subjectCompileSelectedRules.next(!0)}getSelectedRulesToCompile(){return this.subjectCompileSelectedRules.asObservable()}getRulesOrderedIds(e,t){if(e){let r=e.slice(0),o=[],s;r.sort(function(a,l){return a.rule_order>l.rule_order?1:a.rule_order<l.rule_order?-1:0}),t&&(r=r.filter(a=>!a.special||a.special===g2.HOOKSCRIPT));for(let a=0;a<r.length;a++)o.push(r[a].id);return s={orderedRules:r,rulesIds:o},s}else return null}setModifiedRule(e){this.subjectModifiedRule.next(e)}getModifiedRule(){return this.subjectModifiedRule.asObservable()}setRuleStatus(e){this.subjectRuleStatus.next(e)}getRuleStatus(){return this.subjectRuleStatus.asObservable()}setRuleHeightRecalculate(e){this.subjectRuleHeightRecalculate.next(e)}getRuleHeightRecalculate(){return this.subjectRuleHeightRecalculate.asObservable()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var DAt=(()=>{class i{constructor(){}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ml=Object.create(null);Ml.open="0";Ml.close="1";Ml.ping="2";Ml.pong="3";Ml.message="4";Ml.upgrade="5";Ml.noop="6";var u0=Object.create(null);Object.keys(Ml).forEach(i=>{u0[Ml[i]]=i});var h0={type:"error",data:"parser error"};var M8=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",V8=typeof ArrayBuffer=="function",B8=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,f0=({type:i,data:n},e,t)=>M8&&n instanceof Blob?e?t(n):N8(n,t):V8&&(n instanceof ArrayBuffer||B8(n))?e?t(n):N8(new Blob([n]),t):t(Ml[i]+(n||"")),N8=(i,n)=>{let e=new FileReader;return e.onload=function(){let t=e.result.split(",")[1];n("b"+(t||""))},e.readAsDataURL(i)};function L8(i){return i instanceof Uint8Array?i:i instanceof ArrayBuffer?new Uint8Array(i):new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}var J2;function U8(i,n){if(M8&&i.data instanceof Blob)return i.data.arrayBuffer().then(L8).then(n);if(V8&&(i.data instanceof ArrayBuffer||B8(i.data)))return n(L8(i.data));f0(i,!1,e=>{J2||(J2=new TextEncoder),n(J2.encode(e))})}var j8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<j8.length;i++)m0[j8.charCodeAt(i)]=i;var G8=i=>{let n=i.length*.75,e=i.length,t,r=0,o,s,a,l;i[i.length-1]==="="&&(n--,i[i.length-2]==="="&&n--);let c=new ArrayBuffer(n),d=new Uint8Array(c);for(t=0;t<e;t+=4)o=m0[i.charCodeAt(t)],s=m0[i.charCodeAt(t+1)],a=m0[i.charCodeAt(t+2)],l=m0[i.charCodeAt(t+3)],d[r++]=o<<2|s>>4,d[r++]=(s&15)<<4|a>>2,d[r++]=(a&3)<<6|l&63;return c};var Jwe=typeof ArrayBuffer=="function",g0=(i,n)=>{if(typeof i!="string")return{type:"message",data:H8(i,n)};let e=i.charAt(0);return e==="b"?{type:"message",data:qwe(i.substring(1),n)}:u0[e]?i.length>1?{type:u0[e],data:i.substring(1)}:{type:u0[e]}:h0},qwe=(i,n)=>{if(Jwe){let e=G8(i);return H8(e,n)}else return{base64:!0,data:i}},H8=(i,n)=>{switch(n){case"blob":return i instanceof Blob?i:new Blob([i]);case"arraybuffer":default:return i instanceof ArrayBuffer?i:i.buffer}};var W8="",z8=(i,n)=>{let e=i.length,t=new Array(e),r=0;i.forEach((o,s)=>{f0(o,!1,a=>{t[s]=a,++r===e&&n(t.join(W8))})})},K8=(i,n)=>{let e=i.split(W8),t=[];for(let r=0;r<e.length;r++){let o=g0(e[r],n);if(t.push(o),o.type==="error")break}return t};function $8(){return new TransformStream({transform(i,n){U8(i,e=>{let t=e.length,r;if(t<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,t);else if(t<65536){r=new Uint8Array(3);let o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,t)}else{r=new Uint8Array(9);let o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(t))}i.data&&typeof i.data!="string"&&(r[0]|=128),n.enqueue(r),n.enqueue(e)})}})}var q2;function db(i){return i.reduce((n,e)=>n+e.length,0)}function pb(i,n){if(i[0].length===n)return i.shift();let e=new Uint8Array(n),t=0;for(let r=0;r<n;r++)e[r]=i[0][t++],t===i[0].length&&(i.shift(),t=0);return i.length&&t<i[0].length&&(i[0]=i[0].slice(t)),e}function J8(i,n){q2||(q2=new TextDecoder);let e=[],t=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(e.push(s);;){if(t===0){if(db(e)<1)break;let l=pb(e,1);o=(l[0]&128)===128,r=l[0]&127,r<126?t=3:r===126?t=1:t=2}else if(t===1){if(db(e)<2)break;let l=pb(e,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),t=3}else if(t===2){if(db(e)<8)break;let l=pb(e,8),c=new DataView(l.buffer,l.byteOffset,l.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(h0);break}r=d*Math.pow(2,32)+c.getUint32(4),t=3}else{if(db(e)<r)break;let l=pb(e,r);a.enqueue(g0(o?l:q2.decode(l),n)),t=0}if(r===0||r>i){a.enqueue(h0);break}}}})}var Y2=4;function Ir(i){if(i)return Ywe(i)}function Ywe(i){for(var n in Ir.prototype)i[n]=Ir.prototype[n];return i}Ir.prototype.on=Ir.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this};Ir.prototype.once=function(i,n){function e(){this.off(i,e),n.apply(this,arguments)}return e.fn=n,this.on(i,e),this};Ir.prototype.off=Ir.prototype.removeListener=Ir.prototype.removeAllListeners=Ir.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+i];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var t,r=0;r<e.length;r++)if(t=e[r],t===n||t.fn===n){e.splice(r,1);break}return e.length===0&&delete this._callbacks["$"+i],this};Ir.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),e=this._callbacks["$"+i],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(e){e=e.slice(0);for(var t=0,r=e.length;t<r;++t)e[t].apply(this,n)}return this};Ir.prototype.emitReserved=Ir.prototype.emit;Ir.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};Ir.prototype.hasListeners=function(i){return!!this.listeners(i).length};var Od=typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,e)=>e(n,0),zs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),q8="arraybuffer";function ub(i,...n){return n.reduce((e,t)=>(i.hasOwnProperty(t)&&(e[t]=i[t]),e),{})}var Xwe=zs.setTimeout,Qwe=zs.clearTimeout;function Rd(i,n){n.useNativeTimers?(i.setTimeoutFn=Xwe.bind(zs),i.clearTimeoutFn=Qwe.bind(zs)):(i.setTimeoutFn=zs.setTimeout.bind(zs),i.clearTimeoutFn=zs.clearTimeout.bind(zs))}var Zwe=1.33;function Y8(i){return typeof i=="string"?eve(i):Math.ceil((i.byteLength||i.size)*Zwe)}function eve(i){let n=0,e=0;for(let t=0,r=i.length;t<r;t++)n=i.charCodeAt(t),n<128?e+=1:n<2048?e+=2:n<55296||n>=57344?e+=3:(t++,e+=4);return e}function hb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function X8(i){let n="";for(let e in i)i.hasOwnProperty(e)&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(i[e]));return n}function Q8(i){let n={},e=i.split("&");for(let t=0,r=e.length;t<r;t++){let o=e[t].split("=");n[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return n}var fb=class extends Error{constructor(n,e,t){super(n),this.description=e,this.context=t,this.type="TransportError"}},Pd=class extends Ir{constructor(n){super(),this.writable=!1,Rd(this,n),this.opts=n,this.query=n.query,this.socket=n.socket,this.supportsBinary=!n.forceBase64}onError(n,e,t){return super.emitReserved("error",new fb(n,e,t)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(n){this.readyState==="open"&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){let e=g0(n,this.socket.binaryType);this.onPacket(e)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}pause(n){}createUri(n,e={}){return n+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){let n=this.opts.hostname;return n.indexOf(":")===-1?n:"["+n+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(n){let e=X8(n);return e.length?"?"+e:""}};var _0=class extends Pd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(n){this.readyState="pausing";let e=()=>{this.readyState="paused",n()};if(this._polling||!this.writable){let t=0;this._polling&&(t++,this.once("pollComplete",function(){--t||e()})),this.writable||(t++,this.once("drain",function(){--t||e()}))}else e()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){let e=t=>{if(this.readyState==="opening"&&t.type==="open"&&this.onOpen(),t.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)};K8(n,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let n=()=>{this.write([{type:"close"}])};this.readyState==="open"?n():this.once("open",n)}write(n){this.writable=!1,z8(n,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let n=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=hb()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.createUri(n,e)}};var Z8=!1;try{Z8=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var ej=Z8;function tve(){}var X2=class extends _0{constructor(n){if(super(n),typeof location<"u"){let e=location.protocol==="https:",t=location.port;t||(t=e?"443":"80"),this.xd=typeof location<"u"&&n.hostname!==location.hostname||t!==n.port}}doWrite(n,e){let t=this.request({method:"POST",data:n});t.on("success",e),t.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){let n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=n}},mb=(()=>{class i extends Ir{constructor(e,t,r){super(),this.createRequest=e,Rd(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;let t=ub(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=i.requestsCount++,i.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=tve,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete i.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return i.requestsCount=0,i.requests={},i})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",tj);else if(typeof addEventListener=="function"){let i="onpagehide"in zs?"pagehide":"unload";addEventListener(i,tj,!1)}}function tj(){for(let i in mb.requests)mb.requests.hasOwnProperty(i)&&mb.requests[i].abort()}var ive=function(){let i=ij({xdomain:!1});return i&&i.responseType!==null}(),Jp=class extends X2{constructor(n){super(n);let e=n&&n.forceBase64;this.supportsBinary=ive&&!e}request(n={}){return Object.assign(n,{xd:this.xd},this.opts),new mb(ij,this.uri(),n)}};function ij(i){let n=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!n||ej))return new XMLHttpRequest}catch{}if(!n)try{return new zs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var nj=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Z2=class extends Pd{get name(){return"websocket"}doOpen(){let n=this.uri(),e=this.opts.protocols,t=nj?{}:ub(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(t.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(n,e,t)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let e=0;e<n.length;e++){let t=n[e],r=e===n.length-1;f0(t,this.supportsBinary,o=>{try{this.doWrite(t,o)}catch{}r&&Od(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let n=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=hb()),this.supportsBinary||(e.b64=1),this.createUri(n,e)}},Q2=zs.WebSocket||zs.MozWebSocket,qp=class extends Z2{createSocket(n,e,t){return nj?new Q2(n,e,t):e?new Q2(n,e):new Q2(n)}doWrite(n,e){this.ws.send(e)}};var Tm=class extends Pd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(n){return this.emitReserved("error",n)}this._transport.closed.then(()=>{this.onClose()}).catch(n=>{this.onError("webtransport error",n)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(n=>{let e=J8(Number.MAX_SAFE_INTEGER,this.socket.binaryType),t=n.readable.pipeThrough(e).getReader(),r=$8();r.readable.pipeTo(n.writable),this._writer=r.writable.getWriter();let o=()=>{t.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(n){this.writable=!1;for(let e=0;e<n.length;e++){let t=n[e],r=e===n.length-1;this._writer.write(t).then(()=>{r&&Od(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var n;(n=this._transport)===null||n===void 0||n.close()}};var eR={websocket:qp,webtransport:Tm,polling:Jp};var nve=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rve=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Om(i){if(i.length>8e3)throw"URI too long";let n=i,e=i.indexOf("["),t=i.indexOf("]");e!=-1&&t!=-1&&(i=i.substring(0,e)+i.substring(e,t).replace(/:/g,";")+i.substring(t,i.length));let r=nve.exec(i||""),o={},s=14;for(;s--;)o[rve[s]]=r[s]||"";return e!=-1&&t!=-1&&(o.source=n,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=ove(o,o.path),o.queryKey=sve(o,o.query),o}function ove(i,n){let e=/\/{2,9}/g,t=n.replace(e,"/").split("/");return(n.slice(0,1)=="/"||n.length===0)&&t.splice(0,1),n.slice(-1)=="/"&&t.splice(t.length-1,1),t}function sve(i,n){let e={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,r,o){r&&(e[r]=o)}),e}var tR=typeof addEventListener=="function"&&typeof removeEventListener=="function",gb=[];tR&&addEventListener("offline",()=>{gb.forEach(i=>i())},!1);var _b=(()=>{class i extends Ir{constructor(e,t){if(super(),this.binaryType=q8,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){let r=Om(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=Om(t.host).host);Rd(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{let o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Q8(this.opts.query)),tR&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=Y2,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&i.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",i.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){let o=this.writeBuffer[r].data;if(o&&(t+=Y8(o)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Od(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,o){if(typeof t=="function"&&(o=t,t=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;let s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),o&&this.once("flush",o),this.flush()}close(){let e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(i.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),tR&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let r=gb.indexOf(this._offlineEventListener);r!==-1&&gb.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}return i.protocol=Y2,i})(),Cb=class extends _b{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let n=0;n<this._upgrades.length;n++)this._probe(this._upgrades[n])}_probe(n){let e=this.createTransport(n),t=!1;_b.priorWebsocketSuccess=!1;let r=()=>{t||(e.send([{type:"ping",data:"probe"}]),e.once("packet",h=>{if(!t)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;_b.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{t||this.readyState!=="closed"&&(d(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let _=new Error("probe error");_.transport=e.name,this.emitReserved("upgradeError",_)}}))};function o(){t||(t=!0,d(),e.close(),e=null)}let s=h=>{let _=new Error("probe error: "+h);_.transport=e.name,o(),this.emitReserved("upgradeError",_)};function a(){s("transport closed")}function l(){s("socket closed")}function c(h){e&&h.name!==e.name&&o()}let d=()=>{e.removeListener("open",r),e.removeListener("error",s),e.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};e.once("open",r),e.once("error",s),e.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&n!=="webtransport"?this.setTimeoutFn(()=>{t||e.open()},200):e.open()}onHandshake(n){this._upgrades=this._filterUpgrades(n.upgrades),super.onHandshake(n)}_filterUpgrades(n){let e=[];for(let t=0;t<n.length;t++)~this.transports.indexOf(n[t])&&e.push(n[t]);return e}},Rm=class extends Cb{constructor(n,e={}){let t=typeof n=="object"?n:e;(!t.transports||t.transports&&typeof t.transports[0]=="string")&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(r=>eR[r]).filter(r=>!!r)),super(n,t)}};var Vxt=Rm.protocol;function rj(i,n="",e){let t=i;e=e||typeof location<"u"&&location,i==null&&(i=e.protocol+"//"+e.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=e.protocol+i:i=e.host+i),/^(https?|wss?):\/\//.test(i)||(typeof e<"u"?i=e.protocol+"//"+i:i="https://"+i),t=Om(i)),t.port||(/^(http|ws)$/.test(t.protocol)?t.port="80":/^(http|ws)s$/.test(t.protocol)&&(t.port="443")),t.path=t.path||"/";let o=t.host.indexOf(":")!==-1?"["+t.host+"]":t.host;return t.id=t.protocol+"://"+o+":"+t.port+n,t.href=t.protocol+"://"+o+(e&&e.port===t.port?"":":"+t.port),t}var aR={};ep(aR,{Decoder:()=>oR,Encoder:()=>rR,PacketType:()=>In,protocol:()=>cj});var lve=typeof ArrayBuffer=="function",cve=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,oj=Object.prototype.toString,dve=typeof Blob=="function"||typeof Blob<"u"&&oj.call(Blob)==="[object BlobConstructor]",pve=typeof File=="function"||typeof File<"u"&&oj.call(File)==="[object FileConstructor]";function I0(i){return lve&&(i instanceof ArrayBuffer||cve(i))||dve&&i instanceof Blob||pve&&i instanceof File}function C0(i,n){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let e=0,t=i.length;e<t;e++)if(C0(i[e]))return!0;return!1}if(I0(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return C0(i.toJSON(),!0);for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&C0(i[e]))return!0;return!1}function sj(i){let n=[],e=i.data,t=i;return t.data=iR(e,n),t.attachments=n.length,{packet:t,buffers:n}}function iR(i,n){if(!i)return i;if(I0(i)){let e={_placeholder:!0,num:n.length};return n.push(i),e}else if(Array.isArray(i)){let e=new Array(i.length);for(let t=0;t<i.length;t++)e[t]=iR(i[t],n);return e}else if(typeof i=="object"&&!(i instanceof Date)){let e={};for(let t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=iR(i[t],n));return e}return i}function aj(i,n){return i.data=nR(i.data,n),delete i.attachments,i}function nR(i,n){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<n.length)return n[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=nR(i[e],n);else if(typeof i=="object")for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&(i[e]=nR(i[e],n));return i}var uve=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],cj=5,In=function(i){return i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK",i}(In||{}),rR=class{constructor(n){this.replacer=n}encode(n){return(n.type===In.EVENT||n.type===In.ACK)&&C0(n)?this.encodeAsBinary({type:n.type===In.EVENT?In.BINARY_EVENT:In.BINARY_ACK,nsp:n.nsp,data:n.data,id:n.id}):[this.encodeAsString(n)]}encodeAsString(n){let e=""+n.type;return(n.type===In.BINARY_EVENT||n.type===In.BINARY_ACK)&&(e+=n.attachments+"-"),n.nsp&&n.nsp!=="/"&&(e+=n.nsp+","),n.id!=null&&(e+=n.id),n.data!=null&&(e+=JSON.stringify(n.data,this.replacer)),e}encodeAsBinary(n){let e=sj(n),t=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(t),r}};function lj(i){return Object.prototype.toString.call(i)==="[object Object]"}var oR=class i extends Ir{constructor(n){super(),this.reviver=n}add(n){let e;if(typeof n=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(n);let t=e.type===In.BINARY_EVENT;t||e.type===In.BINARY_ACK?(e.type=t?In.EVENT:In.ACK,this.reconstructor=new sR(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else if(I0(n)||n.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(n),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+n)}decodeString(n){let e=0,t={type:Number(n.charAt(0))};if(In[t.type]===void 0)throw new Error("unknown packet type "+t.type);if(t.type===In.BINARY_EVENT||t.type===In.BINARY_ACK){let o=e+1;for(;n.charAt(++e)!=="-"&&e!=n.length;);let s=n.substring(o,e);if(s!=Number(s)||n.charAt(e)!=="-")throw new Error("Illegal attachments");t.attachments=Number(s)}if(n.charAt(e+1)==="/"){let o=e+1;for(;++e&&!(n.charAt(e)===","||e===n.length););t.nsp=n.substring(o,e)}else t.nsp="/";let r=n.charAt(e+1);if(r!==""&&Number(r)==r){let o=e+1;for(;++e;){let s=n.charAt(e);if(s==null||Number(s)!=s){--e;break}if(e===n.length)break}t.id=Number(n.substring(o,e+1))}if(n.charAt(++e)){let o=this.tryParse(n.substr(e));if(i.isPayloadValid(t.type,o))t.data=o;else throw new Error("invalid payload")}return t}tryParse(n){try{return JSON.parse(n,this.reviver)}catch{return!1}}static isPayloadValid(n,e){switch(n){case In.CONNECT:return lj(e);case In.DISCONNECT:return e===void 0;case In.CONNECT_ERROR:return typeof e=="string"||lj(e);case In.EVENT:case In.BINARY_EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&uve.indexOf(e[0])===-1);case In.ACK:case In.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},sR=class{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){let e=aj(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Ma(i,n,e){return i.on(n,e),function(){i.off(n,e)}}var hve=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Pm=class extends Ir{constructor(n,e,t){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=e,t&&t.auth&&(this.auth=t.auth),this._opts=Object.assign({},t),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let n=this.io;this.subs=[Ma(n,"open",this.onopen.bind(this)),Ma(n,"packet",this.onpacket.bind(this)),Ma(n,"error",this.onerror.bind(this)),Ma(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...e){var t,r,o;if(hve.hasOwnProperty(n))throw new Error('"'+n.toString()+'" is a reserved event name');if(e.unshift(n),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;let s={type:In.EVENT,data:e};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let d=this.ids++,h=e.pop();this._registerAckCallback(d,h),s.id=d}let a=(r=(t=this.io.engine)===null||t===void 0?void 0:t.transport)===null||r===void 0?void 0:r.writable,l=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(n,e){var t;let r=(t=this.flags.timeout)!==null&&t!==void 0?t:this._opts.ackTimeout;if(r===void 0){this.acks[n]=e;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===n&&this.sendBuffer.splice(a,1);e.call(this,new Error("operation has timed out"))},r),s=(...a)=>{this.io.clearTimeoutFn(o),e.apply(this,a)};s.withError=!0,this.acks[n]=s}emitWithAck(n,...e){return new Promise((t,r)=>{let o=(s,a)=>s?r(s):t(a);o.withError=!0,e.push(o),this.emit(n,...e)})}_addToQueue(n){let e;typeof n[n.length-1]=="function"&&(e=n.pop());let t={id:this._queueSeq++,tryCount:0,pending:!1,args:n,flags:Object.assign({fromQueue:!0},this.flags)};n.push((r,...o)=>t!==this._queue[0]?void 0:(r!==null?t.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(r)):(this._queue.shift(),e&&e(null,...o)),t.pending=!1,this._drainQueue())),this._queue.push(t),this._drainQueue()}_drainQueue(n=!1){if(!this.connected||this._queue.length===0)return;let e=this._queue[0];e.pending&&!n||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){typeof this.auth=="function"?this.auth(n=>{this._sendConnectPacket(n)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(n){this.packet({type:In.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},n):n})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,e),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(n=>{if(!this.sendBuffer.some(t=>String(t.id)===n)){let t=this.acks[n];delete this.acks[n],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case In.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid,n.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case In.EVENT:case In.BINARY_EVENT:this.onevent(n);break;case In.ACK:case In.BINARY_ACK:this.onack(n);break;case In.DISCONNECT:this.ondisconnect();break;case In.CONNECT_ERROR:this.destroy();let t=new Error(n.data.message);t.data=n.data.data,this.emitReserved("connect_error",t);break}}onevent(n){let e=n.data||[];n.id!=null&&e.push(this.ack(n.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let t of e)t.apply(this,n)}super.emit.apply(this,n),this._pid&&n.length&&typeof n[n.length-1]=="string"&&(this._lastOffset=n[n.length-1])}ack(n){let e=this,t=!1;return function(...r){t||(t=!0,e.packet({type:In.ACK,id:n,data:r}))}}onack(n){let e=this.acks[n.id];typeof e=="function"&&(delete this.acks[n.id],e.withError&&n.data.unshift(null),e.apply(this,n.data))}onconnect(n,e){this.id=n,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:In.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){let e=this._anyListeners;for(let t=0;t<e.length;t++)if(n===e[t])return e.splice(t,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){let e=this._anyOutgoingListeners;for(let t=0;t<e.length;t++)if(n===e[t])return e.splice(t,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let t of e)t.apply(this,n.data)}}};function Ih(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Ih.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),e=Math.floor(n*this.jitter*i);i=Math.floor(n*10)&1?i+e:i-e}return Math.min(i,this.max)|0};Ih.prototype.reset=function(){this.attempts=0};Ih.prototype.setMin=function(i){this.ms=i};Ih.prototype.setMax=function(i){this.max=i};Ih.prototype.setJitter=function(i){this.jitter=i};var Dm=class extends Ir{constructor(n,e){var t;super(),this.nsps={},this.subs=[],n&&typeof n=="object"&&(e=n,n=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,Rd(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((t=e.randomizationFactor)!==null&&t!==void 0?t:.5),this.backoff=new Ih({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=n;let r=e.parser||aR;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,n||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(n){return n===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var e;return n===void 0?this._reconnectionDelay:(this._reconnectionDelay=n,(e=this.backoff)===null||e===void 0||e.setMin(n),this)}randomizationFactor(n){var e;return n===void 0?this._randomizationFactor:(this._randomizationFactor=n,(e=this.backoff)===null||e===void 0||e.setJitter(n),this)}reconnectionDelayMax(n){var e;return n===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,(e=this.backoff)===null||e===void 0||e.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new Rm(this.uri,this.opts);let e=this.engine,t=this;this._readyState="opening",this.skipReconnect=!1;let r=Ma(e,"open",function(){t.onopen(),n&&n()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),n?n(a):this.maybeReconnectOnOpen()},s=Ma(e,"error",o);if(this._timeout!==!1){let a=this._timeout,l=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),e.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(r),this.subs.push(s),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let n=this.engine;this.subs.push(Ma(n,"ping",this.onping.bind(this)),Ma(n,"data",this.ondata.bind(this)),Ma(n,"error",this.onerror.bind(this)),Ma(n,"close",this.onclose.bind(this)),Ma(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){try{this.decoder.add(n)}catch(e){this.onclose("parse error",e)}}ondecoded(n){Od(()=>{this.emitReserved("packet",n)},this.setTimeoutFn)}onerror(n){this.emitReserved("error",n)}socket(n,e){let t=this.nsps[n];return t?this._autoConnect&&!t.active&&t.connect():(t=new Pm(this,n,e),this.nsps[n]=t),t}_destroy(n){let e=Object.keys(this.nsps);for(let t of e)if(this.nsps[t].active)return;this._close()}_packet(n){let e=this.encoder.encode(n);for(let t=0;t<e.length;t++)this.engine.write(e[t],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(n,e){var t;this.cleanup(),(t=this.engine)===null||t===void 0||t.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let t=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(r=>{r?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",r)):n.onreconnect()}))},e);this.opts.autoUnref&&t.unref(),this.subs.push(()=>{this.clearTimeoutFn(t)})}}onreconnect(){let n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}};var y0={};function w0(i,n){typeof i=="object"&&(n=i,i=void 0),n=n||{};let e=rj(i,n.path||"/socket.io"),t=e.source,r=e.id,o=e.path,s=y0[r]&&o in y0[r].nsps,a=n.forceNew||n["force new connection"]||n.multiplex===!1||s,l;return a?l=new Dm(t,n):(y0[r]||(y0[r]=new Dm(t,n)),l=y0[r]),e.query&&!n.query&&(n.query=e.queryKey),l.socket(e.path,n)}Object.assign(w0,{Manager:Dm,Socket:Pm,io:w0,connect:w0});var pl=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},km=Symbol("doneWritingPromise"),r7=Symbol("doneWritingResolve"),o7=Symbol("doneWritingReject"),v0=Symbol("readingIndex"),ul=class i extends Array{constructor(){super(),Object.setPrototypeOf(this,i.prototype),this[km]=new Promise((n,e)=>{this[r7]=n,this[o7]=e}),this[km].catch(()=>{})}};function uo(i){return i&&i.getReader&&Array.isArray(i)}function O0(i){if(!uo(i)){let n=i.getWriter(),e=n.releaseLock;return n.releaseLock=()=>{n.closed.catch(function(){}),e.call(n)},n}this.stream=i}function da(i){if(uo(i))return"array";if(pl.ReadableStream&&pl.ReadableStream.prototype.isPrototypeOf(i))return"web";if(i&&!(pl.ReadableStream&&i instanceof pl.ReadableStream)&&typeof i._read=="function"&&typeof i._readableState=="object")throw Error("Native Node streams are no longer supported: please manually convert the stream to a WebStream, using e.g. `stream.Readable.toWeb`");return!(!i||!i.getReader)&&"web-like"}function a1(i){return Uint8Array.prototype.isPrototypeOf(i)}function s7(i){if(i.length===1)return i[0];let n=0;for(let r=0;r<i.length;r++){if(!a1(i[r]))throw Error("concatUint8Array: Data must be in the form of a Uint8Array");n+=i[r].length}let e=new Uint8Array(n),t=0;return i.forEach(function(r){e.set(r,t),t+=r.length}),e}ul.prototype.getReader=function(){return this[v0]===void 0&&(this[v0]=0),{read:()=>B(this,null,function*(){return yield this[km],this[v0]===this.length?{value:void 0,done:!0}:{value:this[this[v0]++],done:!1}})}},ul.prototype.readToEnd=function(i){return B(this,null,function*(){yield this[km];let n=i(this.slice(this[v0]));return this.length=0,n})},ul.prototype.clone=function(){let i=new ul;return i[km]=this[km].then(()=>{i.push(...this)}),i},O0.prototype.write=function(i){return B(this,null,function*(){this.stream.push(i)})},O0.prototype.close=function(){return B(this,null,function*(){this.stream[r7]()})},O0.prototype.abort=function(i){return B(this,null,function*(){return this.stream[o7](i),i})},O0.prototype.releaseLock=function(){},typeof pl.process=="object"&&pl.process.versions;var dj=new WeakSet,yr=Symbol("externalBuffer");function wc(i){if(this.stream=i,i[yr]&&(this[yr]=i[yr].slice()),uo(i)){let e=i.getReader();return this._read=e.read.bind(e),this._releaseLock=()=>{},void(this._cancel=()=>{})}if(da(i)){let e=i.getReader();return this._read=e.read.bind(e),this._releaseLock=()=>{e.closed.catch(function(){}),e.releaseLock()},void(this._cancel=e.cancel.bind(e))}let n=!1;this._read=()=>B(this,null,function*(){return n||dj.has(i)?{value:void 0,done:!0}:(n=!0,{value:i,done:!1})}),this._releaseLock=()=>{if(n)try{dj.add(i)}catch{}}}function sP(i){return da(i)?i:new ReadableStream({start(n){n.enqueue(i),n.close()}})}function a7(i){if(da(i))return i;let n=new ul;return B(this,null,function*(){let e=Ga(n);yield e.write(i),yield e.close()}),n}function oa(i){return i.some(n=>da(n)&&!uo(n))?function(n){n=n.map(sP);let e=c7(function(o){return B(this,null,function*(){yield Promise.all(r.map(s=>AR(s,o)))})}),t=Promise.resolve(),r=n.map((o,s)=>au(o,(a,l)=>(t=t.then(()=>Ah(a,e.writable,{preventClose:s!==n.length-1})),t)));return e.readable}(i):i.some(n=>uo(n))?function(n){let e=new ul,t=Promise.resolve();return n.forEach((r,o)=>(t=t.then(()=>Ah(r,e,{preventClose:o!==n.length-1})),t)),e}(i):typeof i[0]=="string"?i.join(""):s7(i)}function Ah(o,s){return B(this,arguments,function*(i,n,{preventClose:e=!1,preventAbort:t=!1,preventCancel:r=!1}={}){if(da(i)&&!uo(i)){i=sP(i);try{if(i[yr]){let c=Ga(n);for(let d=0;d<i[yr].length;d++)yield c.ready,yield c.write(i[yr][d]);c.releaseLock()}yield i.pipeTo(n,{preventClose:e,preventAbort:t,preventCancel:r})}catch{}return}let a=Bd(i=a7(i)),l=Ga(n);try{for(;;){yield l.ready;let{done:c,value:d}=yield a.read();if(c){e||(yield l.close());break}yield l.write(d)}}catch(c){t||(yield l.abort(c))}finally{a.releaseLock(),l.releaseLock()}})}function l7(i,n){let e=new TransformStream(n);return Ah(i,e.writable),e.readable}function c7(i){let n,e,t,r=!1,o=!1;return{readable:new ReadableStream({start(a){t=a},pull(){n?n():r=!0},cancel(a){return B(this,null,function*(){o=!0,i&&(yield i(a)),e&&e(a)})}},{highWaterMark:0}),writable:new WritableStream({write:function(a){return B(this,null,function*(){if(o)throw Error("Stream is cancelled");t.enqueue(a),r?r=!1:(yield new Promise((l,c)=>{n=l,e=c}),n=null,e=null)})},close:t.close.bind(t),abort:t.error.bind(t)})}}function io(i,n=()=>{},e=()=>{}){if(uo(i)){let s=new ul;return B(this,null,function*(){let a=Ga(s);try{let l=yield yo(i),c=n(l),d=e(),h;h=c!==void 0&&d!==void 0?oa([c,d]):c!==void 0?c:d,yield a.write(h),yield a.close()}catch(l){yield a.abort(l)}}),s}if(da(i))return l7(i,{transform(s,a){return B(this,null,function*(){try{let l=yield n(s);l!==void 0&&a.enqueue(l)}catch(l){a.error(l)}})},flush(s){return B(this,null,function*(){try{let a=yield e();a!==void 0&&s.enqueue(a)}catch(a){s.error(a)}})}});let t=n(i),r=e();return t!==void 0&&r!==void 0?oa([t,r]):t!==void 0?t:r}function au(i,n){if(da(i)&&!uo(i)){let t,r=new TransformStream({start(a){t=a}}),o=Ah(i,r.writable),s=c7(function(a){return B(this,null,function*(){t.error(a),yield o,yield new Promise(setTimeout)})});return n(r.readable,s.writable),s.readable}i=a7(i);let e=new ul;return n(i,e),e}function l1(i,n){let e,t=au(i,(r,o)=>{let s=Bd(r);s.remainder=()=>(s.releaseLock(),Ah(r,o),t),e=n(s)});return e}function xh(i){if(uo(i))return i.clone();if(da(i)){let n=function(e){if(uo(e))throw Error("ArrayStream cannot be tee()d, use clone() instead");if(da(e)){let t=sP(e).tee();return t[0][yr]=t[1][yr]=e[yr],t}return[ds(e),ds(e)]}(i);return d7(i,n[0]),n[1]}return ds(i)}function L0(i){return uo(i)?xh(i):da(i)?new ReadableStream({start(n){let e=au(i,(t,r)=>B(this,null,function*(){let o=Bd(t),s=Ga(r);try{for(;;){yield s.ready;let{done:a,value:l}=yield o.read();if(a){try{n.close()}catch{}return void(yield s.close())}try{n.enqueue(l)}catch{}yield s.write(l)}}catch(a){n.error(a),yield s.abort(a)}}));d7(i,e)}}):ds(i)}function d7(i,n){Object.entries(Object.getOwnPropertyDescriptors(i.constructor.prototype)).forEach(([e,t])=>{e!=="constructor"&&(t.value?t.value=t.value.bind(n):t.get=t.get.bind(n),Object.defineProperty(i,e,t))})}function ds(i,n=0,e=1/0){if(uo(i))throw Error("Not implemented");if(da(i)){if(n>=0&&e>=0){let t=0;return l7(i,{transform(r,o){t<e?(t+r.length>=n&&o.enqueue(ds(r,Math.max(n-t,0),e-t)),t+=r.length):o.terminate()}})}if(n<0&&(e<0||e===1/0)){let t=[];return io(i,r=>{r.length>=-n?t=[r]:t.push(r)},()=>ds(oa(t),n,e))}if(n===0&&e<0){let t;return io(i,r=>{let o=t?oa([t,r]):r;if(o.length>=-e)return t=ds(o,e),ds(o,n,e);t=o})}return console.warn(`stream.slice(input, ${n}, ${e}) not implemented efficiently.`),lu(()=>B(this,null,function*(){return ds(yield yo(i),n,e)}))}return i[yr]&&(i=oa(i[yr].concat([i]))),a1(i)?i.subarray(n,e===1/0?i.length:e):i.slice(n,e)}function yo(e){return B(this,arguments,function*(i,n=oa){return uo(i)?i.readToEnd(n):da(i)?Bd(i).readToEnd(n):i})}function AR(i,n){return B(this,null,function*(){if(da(i)){if(i.cancel){let e=yield i.cancel(n);return yield new Promise(setTimeout),e}if(i.destroy)return i.destroy(n),yield new Promise(setTimeout),n}})}function lu(i){let n=new ul;return B(this,null,function*(){let e=Ga(n);try{yield e.write(yield i()),yield e.close()}catch(t){yield e.abort(t)}}),n}function Bd(i){return new wc(i)}function Ga(i){return new O0(i)}wc.prototype.read=function(){return B(this,null,function*(){return this[yr]&&this[yr].length?{done:!1,value:this[yr].shift()}:this._read()})},wc.prototype.releaseLock=function(){this[yr]&&(this.stream[yr]=this[yr]),this._releaseLock()},wc.prototype.cancel=function(i){return this._cancel(i)},wc.prototype.readLine=function(){return B(this,null,function*(){let i,n=[];for(;!i;){let{done:e,value:t}=yield this.read();if(t+="",e)return n.length?oa(n):void 0;let r=t.indexOf(`
`)+1;r&&(i=oa(n.concat(t.substr(0,r))),n=[]),r!==t.length&&n.push(t.substr(r))}return this.unshift(...n),i})},wc.prototype.readByte=function(){return B(this,null,function*(){let{done:i,value:n}=yield this.read();if(i)return;let e=n[0];return this.unshift(ds(n,1)),e})},wc.prototype.readBytes=function(i){return B(this,null,function*(){let n=[],e=0;for(;;){let{done:t,value:r}=yield this.read();if(t)return n.length?oa(n):void 0;if(n.push(r),e+=r.length,e>=i){let o=oa(n);return this.unshift(ds(o,i)),ds(o,0,i)}}})},wc.prototype.peekBytes=function(i){return B(this,null,function*(){let n=yield this.readBytes(i);return this.unshift(n),n})},wc.prototype.unshift=function(...i){this[yr]||(this[yr]=[]),i.length===1&&a1(i[0])&&this[yr].length&&i[0].length&&this[yr][0].byteOffset>=i[0].length?this[yr][0]=new Uint8Array(this[yr][0].buffer,this[yr][0].byteOffset-i[0].length,this[yr][0].byteLength+i[0].length):this[yr].unshift(...i.filter(n=>n&&n.length))},wc.prototype.readToEnd=function(){return B(this,arguments,function*(i=oa){let n=[];for(;;){let{done:e,value:t}=yield this.read();if(e)break;n.push(t)}return i(n)})};var b0=Symbol("byValue"),x={curve:{nistP256:"nistP256",p256:"nistP256",nistP384:"nistP384",p384:"nistP384",nistP521:"nistP521",p521:"nistP521",secp256k1:"secp256k1",ed25519Legacy:"ed25519Legacy",ed25519:"ed25519Legacy",curve25519Legacy:"curve25519Legacy",curve25519:"curve25519Legacy",brainpoolP256r1:"brainpoolP256r1",brainpoolP384r1:"brainpoolP384r1",brainpoolP512r1:"brainpoolP512r1"},s2k:{simple:0,salted:1,iterated:3,argon2:4,gnu:101},publicKey:{rsaEncryptSign:1,rsaEncrypt:2,rsaSign:3,elgamal:16,dsa:17,ecdh:18,ecdsa:19,eddsaLegacy:22,aedh:23,aedsa:24,x25519:25,x448:26,ed25519:27,ed448:28},symmetric:{idea:1,tripledes:2,cast5:3,blowfish:4,aes128:7,aes192:8,aes256:9,twofish:10},compression:{uncompressed:0,zip:1,zlib:2,bzip2:3},hash:{md5:1,sha1:2,ripemd:3,sha256:8,sha384:9,sha512:10,sha224:11,sha3_256:12,sha3_512:14},webHash:{"SHA-1":2,"SHA-256":8,"SHA-384":9,"SHA-512":10},aead:{eax:1,ocb:2,gcm:3,experimentalGCM:100},packet:{publicKeyEncryptedSessionKey:1,signature:2,symEncryptedSessionKey:3,onePassSignature:4,secretKey:5,publicKey:6,secretSubkey:7,compressedData:8,symmetricallyEncryptedData:9,marker:10,literalData:11,trust:12,userID:13,publicSubkey:14,userAttribute:17,symEncryptedIntegrityProtectedData:18,modificationDetectionCode:19,aeadEncryptedData:20,padding:21},literal:{binary:98,text:116,utf8:117,mime:109},signature:{binary:0,text:1,standalone:2,certGeneric:16,certPersona:17,certCasual:18,certPositive:19,certRevocation:48,subkeyBinding:24,keyBinding:25,key:31,keyRevocation:32,subkeyRevocation:40,timestamp:64,thirdParty:80},signatureSubpacket:{signatureCreationTime:2,signatureExpirationTime:3,exportableCertification:4,trustSignature:5,regularExpression:6,revocable:7,keyExpirationTime:9,placeholderBackwardsCompatibility:10,preferredSymmetricAlgorithms:11,revocationKey:12,issuerKeyID:16,notationData:20,preferredHashAlgorithms:21,preferredCompressionAlgorithms:22,keyServerPreferences:23,preferredKeyServer:24,primaryUserID:25,policyURI:26,keyFlags:27,signersUserID:28,reasonForRevocation:29,features:30,signatureTarget:31,embeddedSignature:32,issuerFingerprint:33,preferredAEADAlgorithms:34,preferredCipherSuites:39},keyFlags:{certifyKeys:1,signData:2,encryptCommunication:4,encryptStorage:8,splitPrivateKey:16,authentication:32,sharedPrivateKey:128},armor:{multipartSection:0,multipartLast:1,signed:2,message:3,publicKey:4,privateKey:5,signature:6},reasonForRevocation:{noReason:0,keySuperseded:1,keyCompromised:2,keyRetired:3,userIDInvalid:32},features:{modificationDetection:1,aead:2,v5Keys:4,seipdv2:8},write:function(i,n){if(typeof n=="number"&&(n=this.read(i,n)),i[n]!==void 0)return i[n];throw Error("Invalid enum value.")},read:function(i,n){if(i[b0]||(i[b0]=[],Object.entries(i).forEach(([e,t])=>{i[b0][t]=e})),i[b0][n]!==void 0)return i[b0][n];throw Error("Invalid enum value.")}},_t={preferredHashAlgorithm:x.hash.sha512,preferredSymmetricAlgorithm:x.symmetric.aes256,preferredCompressionAlgorithm:x.compression.uncompressed,aeadProtect:!1,parseAEADEncryptedV4KeysAsLegacy:!1,preferredAEADAlgorithm:x.aead.gcm,aeadChunkSizeByte:12,v6Keys:!1,enableParsingV5Entities:!1,s2kType:x.s2k.iterated,s2kIterationCountByte:224,s2kArgon2Params:{passes:3,parallelism:4,memoryExponent:16},allowUnauthenticatedMessages:!1,allowUnauthenticatedStream:!1,minRSABits:2047,passwordCollisionCheck:!1,allowInsecureDecryptionWithSigningKeys:!1,allowInsecureVerificationWithReformattedKeys:!1,allowMissingKeyFlags:!1,constantTimePKCS1Decryption:!1,constantTimePKCS1DecryptionSupportedSymmetricAlgorithms:new Set([x.symmetric.aes128,x.symmetric.aes192,x.symmetric.aes256]),ignoreUnsupportedPackets:!0,ignoreMalformedPackets:!1,enforceGrammar:!0,additionalAllowedPackets:[],showVersion:!1,showComment:!1,versionString:"OpenPGP.js 6.2.0",commentString:"https://openpgpjs.org",maxUserIDLength:5120,knownNotations:[],nonDeterministicSignaturesViaNotation:!0,useEllipticFallback:!0,rejectHashAlgorithms:new Set([x.hash.md5,x.hash.ripemd]),rejectMessageHashAlgorithms:new Set([x.hash.md5,x.hash.ripemd,x.hash.sha1]),rejectPublicKeyAlgorithms:new Set([x.publicKey.elgamal,x.publicKey.dsa]),rejectCurves:new Set([x.curve.secp256k1])},pj=(()=>{try{return!1}catch{}return!1})(),H={isString:function(i){return typeof i=="string"||i instanceof String},nodeRequire:()=>{},isArray:function(i){return i instanceof Array},isUint8Array:a1,isStream:da,getNobleCurve:(i,n)=>B(void 0,null,function*(){if(!_t.useEllipticFallback)throw Error("This curve is only supported in the full build of OpenPGP.js");let{nobleCurves:e}=yield import("./chunk-GKXVNUXL.js");switch(i){case x.publicKey.ecdh:case x.publicKey.ecdsa:{let t=e.get(n);if(!t)throw Error("Unsupported curve");return t}case x.publicKey.x448:return e.get("x448");case x.publicKey.ed448:return e.get("ed448");default:throw Error("Unsupported curve")}}),readNumber:function(i){let n=0;for(let e=0;e<i.length;e++)n+=256**e*i[i.length-1-e];return n},writeNumber:function(i,n){let e=new Uint8Array(n);for(let t=0;t<n;t++)e[t]=i>>8*(n-t-1)&255;return e},readDate:function(i){let n=H.readNumber(i);return new Date(1e3*n)},writeDate:function(i){let n=Math.floor(i.getTime()/1e3);return H.writeNumber(n,4)},normalizeDate:function(i=Date.now()){return i===null||i===1/0?i:new Date(1e3*Math.floor(+i/1e3))},readMPI:function(i){let n=(i[0]<<8|i[1])+7>>>3;return H.readExactSubarray(i,2,2+n)},readExactSubarray:function(i,n,e){if(i.length<e-n)throw Error("Input array too short");return i.subarray(n,e)},leftPad(i,n){if(i.length>n)throw Error("Input array too long");let e=new Uint8Array(n),t=n-i.length;return e.set(i,t),e},uint8ArrayToMPI:function(i){let n=H.uint8ArrayBitLength(i);if(n===0)throw Error("Zero MPI");let e=i.subarray(i.length-Math.ceil(n/8)),t=new Uint8Array([(65280&n)>>8,255&n]);return H.concatUint8Array([t,e])},uint8ArrayBitLength:function(i){let n;for(n=0;n<i.length&&i[n]===0;n++);if(n===i.length)return 0;let e=i.subarray(n);return 8*(e.length-1)+H.nbits(e[0])},hexToUint8Array:function(i){let n=new Uint8Array(i.length>>1);for(let e=0;e<i.length>>1;e++)n[e]=parseInt(i.substr(e<<1,2),16);return n},uint8ArrayToHex:function(i){let n="0123456789abcdef",e="";return i.forEach(t=>{e+=n[t>>4]+n[15&t]}),e},stringToUint8Array:function(i){return io(i,n=>{if(!H.isString(n))throw Error("stringToUint8Array: Data must be in the form of a string");let e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e})},uint8ArrayToString:function(i){let n=[],t=(i=new Uint8Array(i)).length;for(let r=0;r<t;r+=16384)n.push(String.fromCharCode.apply(String,i.subarray(r,r+16384<t?r+16384:t)));return n.join("")},encodeUTF8:function(i){let n=new TextEncoder("utf-8");function e(t,r=!1){return n.encode(t,{stream:!r})}return io(i,e,()=>e("",!0))},decodeUTF8:function(i){let n=new TextDecoder("utf-8");function e(t,r=!1){return n.decode(t,{stream:!r})}return io(i,e,()=>e(new Uint8Array,!0))},concat:oa,concatUint8Array:s7,equalsUint8Array:function(i,n){if(!H.isUint8Array(i)||!H.isUint8Array(n))throw Error("Data must be in the form of a Uint8Array");if(i.length!==n.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==n[e])return!1;return!0},findLastIndex:function(i,n){for(let e=i.length;e>=0;e--)if(n(i[e],e,i))return e;return-1},writeChecksum:function(i){let n=0;for(let e=0;e<i.length;e++)n=n+i[e]&65535;return H.writeNumber(n,2)},printDebug:function(i){pj&&console.log("[OpenPGP.js debug]",i)},printDebugError:function(i){pj&&console.error("[OpenPGP.js debug]",i)},nbits:function(i){let n=1,e=i>>>16;return e!==0&&(i=e,n+=16),e=i>>8,e!==0&&(i=e,n+=8),e=i>>4,e!==0&&(i=e,n+=4),e=i>>2,e!==0&&(i=e,n+=2),e=i>>1,e!==0&&(i=e,n+=1),n},double:function(i){let n=new Uint8Array(i.length),e=i.length-1;for(let t=0;t<e;t++)n[t]=i[t]<<1^i[t+1]>>7;return n[e]=i[e]<<1^135*(i[0]>>7),n},shiftRight:function(i,n){if(n)for(let e=i.length-1;e>=0;e--)i[e]>>=n,e>0&&(i[e]|=i[e-1]<<8-n);return i},getWebCrypto:function(){let i=pl!==void 0&&pl.crypto&&pl.crypto.subtle||this.getNodeCrypto()?.webcrypto.subtle;if(!i)throw Error("The WebCrypto API is not available");return i},getNodeCrypto:function(){return this.nodeRequire("crypto")},getNodeZlib:function(){return this.nodeRequire("zlib")},getNodeBuffer:function(){return(this.nodeRequire("buffer")||{}).Buffer},getHardwareConcurrency:function(){return typeof navigator<"u"?navigator.hardwareConcurrency||1:this.nodeRequire("os").cpus().length},isEmailAddress:function(i){return H.isString(i)?/^[^\p{C}\p{Z}@<>\\]+@[^\p{C}\p{Z}@<>\\]+[^\p{C}\p{Z}\p{P}]$/u.test(i):!1},canonicalizeEOL:function(i){let n=!1;return io(i,e=>{let t;n&&(e=H.concatUint8Array([new Uint8Array([13]),e])),e[e.length-1]===13?(n=!0,e=e.subarray(0,-1)):n=!1;let r=[];for(let a=0;t=e.indexOf(10,a)+1,t;a=t)e[t-2]!==13&&r.push(t);if(!r.length)return e;let o=new Uint8Array(e.length+r.length),s=0;for(let a=0;a<r.length;a++){let l=e.subarray(r[a-1]||0,r[a]);o.set(l,s),s+=l.length,o[s-1]=13,o[s]=10,s++}return o.set(e.subarray(r[r.length-1]||0),s),o},()=>n?new Uint8Array([13]):void 0)},nativeEOL:function(i){let n=!1;return io(i,e=>{let t;(e=n&&e[0]!==10?H.concatUint8Array([new Uint8Array([13]),e]):new Uint8Array(e))[e.length-1]===13?(n=!0,e=e.subarray(0,-1)):n=!1;let r=0;for(let o=0;o!==e.length;o=t){t=e.indexOf(13,o)+1,t||(t=e.length);let s=t-(e[t]===10?1:0);o&&e.copyWithin(r,o,s),r+=s-o}return e.subarray(0,r)},()=>n?new Uint8Array([13]):void 0)},removeTrailingSpaces:function(i){return i.split(`
`).map(n=>{let e=n.length-1;for(;e>=0&&(n[e]===" "||n[e]==="	"||n[e]==="\r");e--);return n.substr(0,e+1)}).join(`
`)},wrapError:function(i,n){if(!n)return i instanceof Error?i:Error(i);if(i instanceof Error){try{i.message+=": "+n.message,i.cause=n}catch{}return i}return Error(i+": "+n.message,{cause:n})},constructAllowedPackets:function(i){let n={};return i.forEach(e=>{if(!e.tag)throw Error("Invalid input: expected a packet class");n[e.tag]=e}),n},anyPromise:function(i){return new Promise((n,e)=>B(this,null,function*(){let t;yield Promise.all(i.map(r=>B(this,null,function*(){try{n(yield r)}catch(o){t=o}}))),e(t)}))},selectUint8Array:function(i,n,e){let t=Math.max(n.length,e.length),r=new Uint8Array(t),o=0;for(let s=0;s<r.length;s++)r[s]=n[s]&256-i|e[s]&255+i,o+=i&s<n.length|1-i&s<e.length;return r.subarray(0,o)},selectUint8:function(i,n,e){return n&256-i|e&255+i},isAES:function(i){return i===x.symmetric.aes128||i===x.symmetric.aes192||i===x.symmetric.aes256}},lR=H.getNodeBuffer(),Db,Fb;function kd(i){let n=new Uint8Array;return io(i,e=>{n=H.concatUint8Array([n,e]);let t=[],r=Math.floor(n.length/45),o=45*r,s=Db(n.subarray(0,o));for(let a=0;a<r;a++)t.push(s.substr(60*a,60)),t.push(`
`);return n=n.subarray(o),t.join("")},()=>n.length?Db(n)+`
`:"")}function p7(i){let n="";return io(i,e=>{n+=e;let t=0,r=[" ","	","\r",`
`];for(let a=0;a<r.length;a++){let l=r[a];for(let c=n.indexOf(l);c!==-1;c=n.indexOf(l,c+1))t++}let o=n.length;for(;o>0&&(o-t)%4!=0;o--)r.includes(n[o])&&t--;let s=Fb(n.substr(0,o));return n=n.substr(o),s},()=>Fb(n))}function sa(i){return p7(i.replace(/-/g,"+").replace(/_/g,"/"))}function cs(i,n){let e=kd(i).replace(/[\r\n]/g,"");return e=e.replace(/[+]/g,"-").replace(/[/]/g,"_").replace(/[=]/g,""),e}function fve(i){let n=i.match(/^-----BEGIN PGP (MESSAGE, PART \d+\/\d+|MESSAGE, PART \d+|SIGNED MESSAGE|MESSAGE|PUBLIC KEY BLOCK|PRIVATE KEY BLOCK|SIGNATURE)-----$/m);if(!n)throw Error("Unknown ASCII armor type");return/MESSAGE, PART \d+\/\d+/.test(n[1])?x.armor.multipartSection:/MESSAGE, PART \d+/.test(n[1])?x.armor.multipartLast:/SIGNED MESSAGE/.test(n[1])?x.armor.signed:/MESSAGE/.test(n[1])?x.armor.message:/PUBLIC KEY BLOCK/.test(n[1])?x.armor.publicKey:/PRIVATE KEY BLOCK/.test(n[1])?x.armor.privateKey:/SIGNATURE/.test(n[1])?x.armor.signature:void 0}function yh(i,n){let e="";return n.showVersion&&(e+="Version: "+n.versionString+`
`),n.showComment&&(e+="Comment: "+n.commentString+`
`),i&&(e+="Comment: "+i+`
`),e+=`
`,e}function wh(i){let n=function(e){let t=13501623;return io(e,r=>{let o=mve?Math.floor(r.length/4):0,s=new Uint32Array(r.buffer,r.byteOffset,o);for(let a=0;a<o;a++)t^=s[a],t=Jo[0][t>>24&255]^Jo[1][t>>16&255]^Jo[2][t>>8&255]^Jo[3][255&t];for(let a=4*o;a<r.length;a++)t=t>>8^Jo[0][255&t^r[a]]},()=>new Uint8Array([t,t>>8,t>>16]))}(i);return kd(n)}lR?(Db=i=>lR.from(i).toString("base64"),Fb=i=>{let n=lR.from(i,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}):(Db=i=>btoa(H.uint8ArrayToString(i)),Fb=i=>H.stringToUint8Array(atob(i)));var Jo=[Array(255),Array(255),Array(255),Array(255)];for(let i=0;i<=255;i++){let n=i<<16;for(let e=0;e<8;e++)n=n<<1^(8388608&n?8801531:0);Jo[0][i]=(16711680&n)>>16|65280&n|(255&n)<<16}for(let i=0;i<=255;i++)Jo[1][i]=Jo[0][i]>>8^Jo[0][255&Jo[0][i]];for(let i=0;i<=255;i++)Jo[2][i]=Jo[1][i]>>8^Jo[0][255&Jo[1][i]];for(let i=0;i<=255;i++)Jo[3][i]=Jo[2][i]>>8^Jo[0][255&Jo[2][i]];var mve=function(){let i=new ArrayBuffer(2);return new DataView(i).setInt16(0,255,!0),new Int16Array(i)[0]===255}();function uj(i){for(let n=0;n<i.length;n++)/^([^\s:]|[^\s:][^:]*[^\s:]): .+$/.test(i[n])||H.printDebugError(Error("Improperly formatted armor header: "+i[n])),/^(Version|Comment|MessageID|Hash|Charset): .+$/.test(i[n])||H.printDebugError(Error("Unknown header: "+i[n]))}function gve(i){let n=i,e=i.lastIndexOf("=");return e>=0&&e!==i.length-1&&(n=i.slice(0,e)),n}function Z0(i){return new Promise((n,e)=>B(this,null,function*(){try{let t=/^-----[^-]+-----$/m,r=/^[ \f\r\t\u00a0\u2000-\u200a\u202f\u205f\u3000]*$/,o,s=[],a,l,c=s,d=[],h=p7(au(i,(_,C)=>B(this,null,function*(){let I=Bd(_);try{for(;;){let E=yield I.readLine();if(E===void 0)throw Error("Misformed armored text");if(E=H.removeTrailingSpaces(E.replace(/[\r\n]/g,"")),o)if(a)l||o!==x.armor.signed||(t.test(E)?(d=d.join(`\r
`),l=!0,uj(c),c=[],a=!1):d.push(E.replace(/^- /,"")));else if(t.test(E)&&e(Error("Mandatory blank line missing between armor headers and armor data")),r.test(E)){if(uj(c),a=!0,l||o!==x.armor.signed){n({text:d,data:h,headers:s,type:o});break}}else c.push(E);else t.test(E)&&(o=fve(E))}}catch(E){return void e(E)}let b=Ga(C);try{for(;;){yield b.ready;let{done:E,value:R}=yield I.read();if(E)throw Error("Misformed armored text");let T=R+"";if(T.indexOf("=")!==-1||T.indexOf("-")!==-1){let A=yield I.readToEnd();A.length||(A=""),A=T+A,A=H.removeTrailingSpaces(A.replace(/\r/g,""));let U=A.split(t);if(U.length===1)throw Error("Misformed armored text");let z=gve(U[0].slice(0,-1));yield b.write(z);break}yield b.write(T)}yield b.ready,yield b.close()}catch(E){yield b.abort(E)}})))}catch(t){e(t)}})).then(n=>B(this,null,function*(){return uo(n.data)&&(n.data=yield yo(n.data)),n}))}function eC(i,n,e,t,r,o=!1,s=_t){let a,l;i===x.armor.signed&&(a=n.text,l=n.hash,n=n.data);let c=o&&L0(n),d=[];switch(i){case x.armor.multipartSection:d.push("-----BEGIN PGP MESSAGE, PART "+e+"/"+t+`-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push("-----END PGP MESSAGE, PART "+e+"/"+t+`-----
`);break;case x.armor.multipartLast:d.push("-----BEGIN PGP MESSAGE, PART "+e+`-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push("-----END PGP MESSAGE, PART "+e+`-----
`);break;case x.armor.signed:d.push(`-----BEGIN PGP SIGNED MESSAGE-----
`),d.push(l?`Hash: ${l}

`:`
`),d.push(a.replace(/^-/gm,"- -")),d.push(`
-----BEGIN PGP SIGNATURE-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push(`-----END PGP SIGNATURE-----
`);break;case x.armor.message:d.push(`-----BEGIN PGP MESSAGE-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push(`-----END PGP MESSAGE-----
`);break;case x.armor.publicKey:d.push(`-----BEGIN PGP PUBLIC KEY BLOCK-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push(`-----END PGP PUBLIC KEY BLOCK-----
`);break;case x.armor.privateKey:d.push(`-----BEGIN PGP PRIVATE KEY BLOCK-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push(`-----END PGP PRIVATE KEY BLOCK-----
`);break;case x.armor.signature:d.push(`-----BEGIN PGP SIGNATURE-----
`),d.push(yh(r,s)),d.push(kd(n)),c&&d.push("=",wh(c)),d.push(`-----END PGP SIGNATURE-----
`)}return H.concat(d)}var la=BigInt(0),Bm=BigInt(1);function di(i){let n="0123456789ABCDEF",e="";return i.forEach(t=>{e+=n[t>>4]+n[15&t]}),BigInt("0x0"+e)}function yn(i,n){let e=i%n;return e<la?e+n:e}function qo(i,n,e){if(e===la)throw Error("Modulo cannot be zero");if(e===Bm)return BigInt(0);if(n<la)throw Error("Unsopported negative exponent");let t=n,r=i;r%=e;let o=BigInt(1);for(;t>la;){let s=t&Bm;t>>=Bm,o=s?o*r%e:o,r=r*r%e}return o}function hj(i){return i>=la?i:-i}function Hm(i,n){let{gcd:e,x:t}=function(r,o){let s=BigInt(0),a=BigInt(1),l=BigInt(1),c=BigInt(0),d=hj(r),h=hj(o),_=r<la,C=o<la;for(;h!==la;){let I=d/h,b=s;s=l-I*s,l=b,b=a,a=c-I*a,c=b,b=h,h=d%h,d=b}return{x:_?-l:l,y:C?-c:c,gcd:d}}(i,n);if(e!==Bm)throw Error("Inverse does not exist");return yn(t+n,n)}function xR(i){let n=Number(i);if(n>Number.MAX_SAFE_INTEGER)throw Error("Number can only safely store up to 53 bits");return n}function _ve(i,n){return(i>>BigInt(n)&Bm)===la?0:1}function Um(i){let n=i<la?BigInt(-1):la,e=1,t=i;for(;(t>>=Bm)!==n;)e++;return e}function ca(i){let n=i<la?BigInt(-1):la,e=BigInt(8),t=1,r=i;for(;(r>>=e)!==n;)t++;return t}function po(i,n="be",e){let t=i.toString(16);t.length%2==1&&(t="0"+t);let r=t.length/2,o=new Uint8Array(e||r),s=e?e-r:0,a=0;for(;a<r;)o[a+s]=parseInt(t.slice(2*a,2*a+2),16),a++;return n!=="be"&&o.reverse(),o}var Cve=H.getNodeCrypto();function Yo(i){let n=typeof crypto<"u"?crypto:Cve?.webcrypto;if(n?.getRandomValues){let e=new Uint8Array(i);return n.getRandomValues(e)}throw Error("No secure random number generator available.")}function iu(i,n){if(n<i)throw Error("Illegal parameter value: max <= min");let e=n-i;return yn(di(Yo(ca(e)+8)),e)+i}var bc=BigInt(1);function fj(i,n,e){let t=BigInt(30),r=bc<<BigInt(i-1),o=[1,6,5,4,3,2,1,4,3,2,1,2,1,4,3,2,1,2,1,4,3,2,1,6,5,4,3,2,1,2],s=iu(r,r<<bc),a=xR(yn(s,t));do s+=BigInt(o[a]),a=(a+o[a])%o.length,Um(s)>i&&(s=yn(s,r<<bc),s+=r,a=xR(yn(s,t)));while(!u7(s,n,e));return s}function u7(i,n,e){return(!n||function(t,r){let o=t,s=r;for(;s!==la;){let a=s;s=o%s,o=a}return o}(i-bc,n)===bc)&&!!function(t){let r=BigInt(0);return Ive.every(o=>yn(t,o)!==r)}(i)&&!!function(t,r=BigInt(2)){return qo(r,t-bc,t)===bc}(i)&&!!function(t,r){let o=Um(t);r||(r=Math.max(1,o/48|0));let s=t-bc,a=0;for(;!_ve(s,a);)a++;let l=t>>BigInt(a);for(;r>0;r--){let c,d=qo(iu(BigInt(2),s),l,t);if(d!==bc&&d!==s){for(c=1;c<a;c++){if(d=yn(d*d,t),d===bc)return!1;if(d===s)break}if(c===a)return!1}}return!0}(i,e)}var Ive=[7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999].map(i=>BigInt(i)),mj=H.getWebCrypto(),kb=H.getNodeCrypto(),yve=kb&&kb.getHashes();function Ud(i){if(kb&&yve.includes(i))return function(n){return B(this,null,function*(){let e=kb.createHash(i);return io(n,t=>{e.update(t)},()=>new Uint8Array(e.digest()))})}}function jd(i,n){let e=()=>B(this,null,function*(){let{nobleHashes:t}=yield import("./chunk-UJMQWSKZ.js"),r=t.get(i);if(!r)throw Error("Unsupported hash");return r});return function(t){return B(this,null,function*(){if(uo(t)&&(t=yield yo(t)),H.isStream(t)){let r=(yield e()).create();return io(t,o=>{r.update(o)},()=>r.digest())}return mj&&n?new Uint8Array(yield mj.digest(n,t)):(yield e())(t)})}}var wve=Ud("md5")||jd("md5"),vve=Ud("sha1")||jd("sha1","SHA-1"),bve=Ud("sha224")||jd("sha224"),Sve=Ud("sha256")||jd("sha256","SHA-256"),Eve=Ud("sha384")||jd("sha384","SHA-384"),Ave=Ud("sha512")||jd("sha512","SHA-512"),xve=Ud("ripemd160")||jd("ripemd160"),Tve=Ud("sha3-256")||jd("sha3_256"),Ove=Ud("sha3-512")||jd("sha3_512");function kc(i,n){switch(i){case x.hash.md5:return wve(n);case x.hash.sha1:return vve(n);case x.hash.ripemd:return xve(n);case x.hash.sha256:return Sve(n);case x.hash.sha384:return Eve(n);case x.hash.sha512:return Ave(n);case x.hash.sha224:return bve(n);case x.hash.sha3_256:return Tve(n);case x.hash.sha3_512:return Ove(n);default:throw Error("Unsupported hash function")}}function Do(i){switch(i){case x.hash.md5:return 16;case x.hash.sha1:case x.hash.ripemd:return 20;case x.hash.sha256:return 32;case x.hash.sha384:return 48;case x.hash.sha512:return 64;case x.hash.sha224:return 28;case x.hash.sha3_256:return 32;case x.hash.sha3_512:return 64;default:throw Error("Invalid hash algorithm.")}}var Sc=[];function h7(i,n){let e=i.length;if(e>n-11)throw Error("Message too long");let t=function(o){let s=new Uint8Array(o),a=0;for(;a<o;){let l=Yo(o-a);for(let c=0;c<l.length;c++)l[c]!==0&&(s[a++]=l[c])}return s}(n-e-3),r=new Uint8Array(n);return r[1]=2,r.set(t,2),r.set(i,n-e),r}function f7(i,n){let e=2,t=1;for(let a=e;a<i.length;a++)t&=i[a]!==0,e+=t;let r=e-2,o=i.subarray(e+1),s=i[0]===0&i[1]===2&r>=8&!t;if(n)return H.selectUint8Array(s,o,n);if(s)return o;throw Error("Decryption error")}function m7(i,n,e){let t;if(n.length!==Do(i))throw Error("Invalid hash length");let r=new Uint8Array(Sc[i].length);for(t=0;t<Sc[i].length;t++)r[t]=Sc[i][t];let o=r.length+n.length;if(e<o+11)throw Error("Intended encoded message length too short");let s=new Uint8Array(e-o-3).fill(255),a=new Uint8Array(e);return a[1]=1,a.set(s,2),a.set(r,e-o),a.set(n,e-n.length),a}Sc[1]=[48,32,48,12,6,8,42,134,72,134,247,13,2,5,5,0,4,16],Sc[2]=[48,33,48,9,6,5,43,14,3,2,26,5,0,4,20],Sc[3]=[48,33,48,9,6,5,43,36,3,2,1,5,0,4,20],Sc[8]=[48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32],Sc[9]=[48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48],Sc[10]=[48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64],Sc[11]=[48,45,48,13,6,9,96,134,72,1,101,3,4,2,4,5,0,4,28];var Wm=H.getWebCrypto(),Th=H.getNodeCrypto(),nu=BigInt(1);function Rve(i,n,e,t,r,o,s,a,l){return B(this,null,function*(){if(Do(i)>=e.length)throw Error("Digest size cannot exceed key modulus size");if(n&&!H.isStream(n)){if(H.getWebCrypto())try{return yield function(c,d,h,_,C,I,b,E){return B(this,null,function*(){let R=yield TR(h,_,C,I,b,E),T={name:"RSASSA-PKCS1-v1_5",hash:{name:c}},A=yield Wm.importKey("jwk",R,T,!1,["sign"]);return new Uint8Array(yield Wm.sign("RSASSA-PKCS1-v1_5",A,d))})}(x.read(x.webHash,i),n,e,t,r,o,s,a)}catch(c){H.printDebugError(c)}else if(H.getNodeCrypto())return function(c,d,h,_,C,I,b,E){return B(this,null,function*(){let R=Th.createSign(x.read(x.hash,c));R.write(d),R.end();let T=yield TR(h,_,C,I,b,E);return new Uint8Array(R.sign({key:T,format:"jwk",type:"pkcs1"}))})}(i,n,e,t,r,o,s,a)}return function(c,d,h,_){return B(this,null,function*(){d=di(d);let C=di(m7(c,_,ca(d)));return h=di(h),po(qo(C,h,d),"be",ca(d))})}(i,e,r,l)})}function Pve(i,n,e,t,r,o){return B(this,null,function*(){if(n&&!H.isStream(n)){if(H.getWebCrypto())try{return yield function(s,a,l,c,d){return B(this,null,function*(){let h=OR(c,d),_=yield Wm.importKey("jwk",h,{name:"RSASSA-PKCS1-v1_5",hash:{name:s}},!1,["verify"]);return Wm.verify("RSASSA-PKCS1-v1_5",_,l,a)})}(x.read(x.webHash,i),n,e,t,r)}catch(s){H.printDebugError(s)}else if(H.getNodeCrypto())return function(s,a,l,c,d){return B(this,null,function*(){let h=OR(c,d),_={key:h,format:"jwk",type:"pkcs1"},C=Th.createVerify(x.read(x.hash,s));C.write(a),C.end();try{return C.verify(_,l)}catch{return!1}})}(i,n,e,t,r)}return function(s,a,l,c,d){return B(this,null,function*(){if(l=di(l),a=di(a),c=di(c),a>=l)throw Error("Signature size cannot exceed modulus size");let h=po(qo(a,c,l),"be",ca(l)),_=m7(s,d,ca(l));return H.equalsUint8Array(h,_)})}(i,e,t,r,o)})}function Dve(i,n,e){return B(this,null,function*(){return H.getNodeCrypto()?function(t,r,o){return B(this,null,function*(){let s=OR(r,o),a={key:s,format:"jwk",type:"pkcs1",padding:Th.constants.RSA_PKCS1_PADDING};return new Uint8Array(Th.publicEncrypt(a,t))})}(i,n,e):function(t,r,o){return B(this,null,function*(){if(r=di(r),t=di(h7(t,ca(r))),o=di(o),t>=r)throw Error("Message size cannot exceed modulus size");return po(qo(t,o,r),"be",ca(r))})}(i,n,e)})}function Fve(i,n,e,t,r,o,s,a){return B(this,null,function*(){if(H.getNodeCrypto()&&!a)try{return yield function(l,c,d,h,_,C,I){return B(this,null,function*(){let b=yield TR(c,d,h,_,C,I),E={key:b,format:"jwk",type:"pkcs1",padding:Th.constants.RSA_PKCS1_PADDING};try{return new Uint8Array(Th.privateDecrypt(E,l))}catch{throw Error("Decryption error")}})}(i,n,e,t,r,o,s)}catch(l){H.printDebugError(l)}return function(l,c,d,h,_,C,I,b){return B(this,null,function*(){if(l=di(l),c=di(c),d=di(d),h=di(h),_=di(_),C=di(C),I=di(I),l>=c)throw Error("Data too large.");let E=yn(h,C-nu),R=yn(h,_-nu),T=iu(BigInt(2),c),A=qo(Hm(T,c),d,c);l=yn(l*A,c);let U=qo(l,R,_),z=qo(l,E,C),re=yn(I*(z-U),C)*_+U;return re=yn(re*T,c),f7(po(re,"be",ca(c)),b)})}(i,n,e,t,r,o,s,a)})}function TR(i,n,e,t,r,o){return B(this,null,function*(){let s=di(t),a=di(r),l=di(e),c=yn(l,a-nu),d=yn(l,s-nu);return d=po(d),c=po(c),{kty:"RSA",n:cs(i),e:cs(n),d:cs(e),p:cs(r),q:cs(t),dp:cs(c),dq:cs(d),qi:cs(o),ext:!0}})}function OR(i,n){return{kty:"RSA",n:cs(i),e:cs(n),ext:!0}}function gj(i,n){return{n:sa(i.n),e:po(n),d:sa(i.d),p:sa(i.q),q:sa(i.p),u:sa(i.qi)}}var Xp=BigInt(1),cR=typeof pl=="object"&&"crypto"in pl?pl.crypto:void 0,Lr={},ii=function(i){var n,e=new Float64Array(16);if(i)for(n=0;n<i.length;n++)e[n]=i[n];return e},RR=function(){throw Error("no PRNG")},g7=new Uint8Array(32);g7[0]=9;var PR=ii(),Nb=ii([1]),kve=ii([56129,1]),Nve=ii([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Lve=ii([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_j=ii([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Cj=ii([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Mve=ii([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ij(i,n,e,t){i[n]=e>>24&255,i[n+1]=e>>16&255,i[n+2]=e>>8&255,i[n+3]=255&e,i[n+4]=t>>24&255,i[n+5]=t>>16&255,i[n+6]=t>>8&255,i[n+7]=255&t}function _7(i,n,e,t){return function(r,o,s,a,l){var c,d=0;for(c=0;c<l;c++)d|=r[o+c]^s[a+c];return(1&d-1>>>8)-1}(i,n,e,t,32)}function Zp(i,n){var e;for(e=0;e<16;e++)i[e]=0|n[e]}function dR(i){var n,e,t=1;for(n=0;n<16;n++)e=i[n]+t+65535,t=Math.floor(e/65536),i[n]=e-65536*t;i[0]+=t-1+37*(t-1)}function Nm(i,n,e){for(var t,r=~(e-1),o=0;o<16;o++)t=r&(i[o]^n[o]),i[o]^=t,n[o]^=t}function V0(i,n){var e,t,r,o=ii(),s=ii();for(e=0;e<16;e++)s[e]=n[e];for(dR(s),dR(s),dR(s),t=0;t<2;t++){for(o[0]=s[0]-65517,e=1;e<15;e++)o[e]=s[e]-65535-(o[e-1]>>16&1),o[e-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),r=o[15]>>16&1,o[14]&=65535,Nm(s,o,1-r)}for(e=0;e<16;e++)i[2*e]=255&s[e],i[2*e+1]=s[e]>>8}function yj(i,n){var e=new Uint8Array(32),t=new Uint8Array(32);return V0(e,i),V0(t,n),_7(e,0,t,0)}function C7(i){var n=new Uint8Array(32);return V0(n,i),1&n[0]}function I7(i,n){var e;for(e=0;e<16;e++)i[e]=n[2*e]+(n[2*e+1]<<8);i[15]&=32767}function Ac(i,n,e){for(var t=0;t<16;t++)i[t]=n[t]+e[t]}function Tc(i,n,e){for(var t=0;t<16;t++)i[t]=n[t]-e[t]}function An(i,n,e){var t,r,o=0,s=0,a=0,l=0,c=0,d=0,h=0,_=0,C=0,I=0,b=0,E=0,R=0,T=0,A=0,U=0,z=0,ee=0,re=0,Z=0,ae=0,Ie=0,ye=0,xe=0,Le=0,gi=0,be=0,$e=0,oi=0,Hi=0,Ui=0,fi=e[0],ji=e[1],pi=e[2],Ti=e[3],Ut=e[4],Ot=e[5],_i=e[6],Hn=e[7],yi=e[8],ze=e[9],Ge=e[10],Fe=e[11],ot=e[12],Vt=e[13],zt=e[14],Ft=e[15];o+=(t=n[0])*fi,s+=t*ji,a+=t*pi,l+=t*Ti,c+=t*Ut,d+=t*Ot,h+=t*_i,_+=t*Hn,C+=t*yi,I+=t*ze,b+=t*Ge,E+=t*Fe,R+=t*ot,T+=t*Vt,A+=t*zt,U+=t*Ft,s+=(t=n[1])*fi,a+=t*ji,l+=t*pi,c+=t*Ti,d+=t*Ut,h+=t*Ot,_+=t*_i,C+=t*Hn,I+=t*yi,b+=t*ze,E+=t*Ge,R+=t*Fe,T+=t*ot,A+=t*Vt,U+=t*zt,z+=t*Ft,a+=(t=n[2])*fi,l+=t*ji,c+=t*pi,d+=t*Ti,h+=t*Ut,_+=t*Ot,C+=t*_i,I+=t*Hn,b+=t*yi,E+=t*ze,R+=t*Ge,T+=t*Fe,A+=t*ot,U+=t*Vt,z+=t*zt,ee+=t*Ft,l+=(t=n[3])*fi,c+=t*ji,d+=t*pi,h+=t*Ti,_+=t*Ut,C+=t*Ot,I+=t*_i,b+=t*Hn,E+=t*yi,R+=t*ze,T+=t*Ge,A+=t*Fe,U+=t*ot,z+=t*Vt,ee+=t*zt,re+=t*Ft,c+=(t=n[4])*fi,d+=t*ji,h+=t*pi,_+=t*Ti,C+=t*Ut,I+=t*Ot,b+=t*_i,E+=t*Hn,R+=t*yi,T+=t*ze,A+=t*Ge,U+=t*Fe,z+=t*ot,ee+=t*Vt,re+=t*zt,Z+=t*Ft,d+=(t=n[5])*fi,h+=t*ji,_+=t*pi,C+=t*Ti,I+=t*Ut,b+=t*Ot,E+=t*_i,R+=t*Hn,T+=t*yi,A+=t*ze,U+=t*Ge,z+=t*Fe,ee+=t*ot,re+=t*Vt,Z+=t*zt,ae+=t*Ft,h+=(t=n[6])*fi,_+=t*ji,C+=t*pi,I+=t*Ti,b+=t*Ut,E+=t*Ot,R+=t*_i,T+=t*Hn,A+=t*yi,U+=t*ze,z+=t*Ge,ee+=t*Fe,re+=t*ot,Z+=t*Vt,ae+=t*zt,Ie+=t*Ft,_+=(t=n[7])*fi,C+=t*ji,I+=t*pi,b+=t*Ti,E+=t*Ut,R+=t*Ot,T+=t*_i,A+=t*Hn,U+=t*yi,z+=t*ze,ee+=t*Ge,re+=t*Fe,Z+=t*ot,ae+=t*Vt,Ie+=t*zt,ye+=t*Ft,C+=(t=n[8])*fi,I+=t*ji,b+=t*pi,E+=t*Ti,R+=t*Ut,T+=t*Ot,A+=t*_i,U+=t*Hn,z+=t*yi,ee+=t*ze,re+=t*Ge,Z+=t*Fe,ae+=t*ot,Ie+=t*Vt,ye+=t*zt,xe+=t*Ft,I+=(t=n[9])*fi,b+=t*ji,E+=t*pi,R+=t*Ti,T+=t*Ut,A+=t*Ot,U+=t*_i,z+=t*Hn,ee+=t*yi,re+=t*ze,Z+=t*Ge,ae+=t*Fe,Ie+=t*ot,ye+=t*Vt,xe+=t*zt,Le+=t*Ft,b+=(t=n[10])*fi,E+=t*ji,R+=t*pi,T+=t*Ti,A+=t*Ut,U+=t*Ot,z+=t*_i,ee+=t*Hn,re+=t*yi,Z+=t*ze,ae+=t*Ge,Ie+=t*Fe,ye+=t*ot,xe+=t*Vt,Le+=t*zt,gi+=t*Ft,E+=(t=n[11])*fi,R+=t*ji,T+=t*pi,A+=t*Ti,U+=t*Ut,z+=t*Ot,ee+=t*_i,re+=t*Hn,Z+=t*yi,ae+=t*ze,Ie+=t*Ge,ye+=t*Fe,xe+=t*ot,Le+=t*Vt,gi+=t*zt,be+=t*Ft,R+=(t=n[12])*fi,T+=t*ji,A+=t*pi,U+=t*Ti,z+=t*Ut,ee+=t*Ot,re+=t*_i,Z+=t*Hn,ae+=t*yi,Ie+=t*ze,ye+=t*Ge,xe+=t*Fe,Le+=t*ot,gi+=t*Vt,be+=t*zt,$e+=t*Ft,T+=(t=n[13])*fi,A+=t*ji,U+=t*pi,z+=t*Ti,ee+=t*Ut,re+=t*Ot,Z+=t*_i,ae+=t*Hn,Ie+=t*yi,ye+=t*ze,xe+=t*Ge,Le+=t*Fe,gi+=t*ot,be+=t*Vt,$e+=t*zt,oi+=t*Ft,A+=(t=n[14])*fi,U+=t*ji,z+=t*pi,ee+=t*Ti,re+=t*Ut,Z+=t*Ot,ae+=t*_i,Ie+=t*Hn,ye+=t*yi,xe+=t*ze,Le+=t*Ge,gi+=t*Fe,be+=t*ot,$e+=t*Vt,oi+=t*zt,Hi+=t*Ft,U+=(t=n[15])*fi,s+=38*(ee+=t*pi),a+=38*(re+=t*Ti),l+=38*(Z+=t*Ut),c+=38*(ae+=t*Ot),d+=38*(Ie+=t*_i),h+=38*(ye+=t*Hn),_+=38*(xe+=t*yi),C+=38*(Le+=t*ze),I+=38*(gi+=t*Ge),b+=38*(be+=t*Fe),E+=38*($e+=t*ot),R+=38*(oi+=t*Vt),T+=38*(Hi+=t*zt),A+=38*(Ui+=t*Ft),o=(t=(o+=38*(z+=t*ji))+(r=1)+65535)-65536*(r=Math.floor(t/65536)),s=(t=s+r+65535)-65536*(r=Math.floor(t/65536)),a=(t=a+r+65535)-65536*(r=Math.floor(t/65536)),l=(t=l+r+65535)-65536*(r=Math.floor(t/65536)),c=(t=c+r+65535)-65536*(r=Math.floor(t/65536)),d=(t=d+r+65535)-65536*(r=Math.floor(t/65536)),h=(t=h+r+65535)-65536*(r=Math.floor(t/65536)),_=(t=_+r+65535)-65536*(r=Math.floor(t/65536)),C=(t=C+r+65535)-65536*(r=Math.floor(t/65536)),I=(t=I+r+65535)-65536*(r=Math.floor(t/65536)),b=(t=b+r+65535)-65536*(r=Math.floor(t/65536)),E=(t=E+r+65535)-65536*(r=Math.floor(t/65536)),R=(t=R+r+65535)-65536*(r=Math.floor(t/65536)),T=(t=T+r+65535)-65536*(r=Math.floor(t/65536)),A=(t=A+r+65535)-65536*(r=Math.floor(t/65536)),U=(t=U+r+65535)-65536*(r=Math.floor(t/65536)),o=(t=(o+=r-1+37*(r-1))+(r=1)+65535)-65536*(r=Math.floor(t/65536)),s=(t=s+r+65535)-65536*(r=Math.floor(t/65536)),a=(t=a+r+65535)-65536*(r=Math.floor(t/65536)),l=(t=l+r+65535)-65536*(r=Math.floor(t/65536)),c=(t=c+r+65535)-65536*(r=Math.floor(t/65536)),d=(t=d+r+65535)-65536*(r=Math.floor(t/65536)),h=(t=h+r+65535)-65536*(r=Math.floor(t/65536)),_=(t=_+r+65535)-65536*(r=Math.floor(t/65536)),C=(t=C+r+65535)-65536*(r=Math.floor(t/65536)),I=(t=I+r+65535)-65536*(r=Math.floor(t/65536)),b=(t=b+r+65535)-65536*(r=Math.floor(t/65536)),E=(t=E+r+65535)-65536*(r=Math.floor(t/65536)),R=(t=R+r+65535)-65536*(r=Math.floor(t/65536)),T=(t=T+r+65535)-65536*(r=Math.floor(t/65536)),A=(t=A+r+65535)-65536*(r=Math.floor(t/65536)),U=(t=U+r+65535)-65536*(r=Math.floor(t/65536)),o+=r-1+37*(r-1),i[0]=o,i[1]=s,i[2]=a,i[3]=l,i[4]=c,i[5]=d,i[6]=h,i[7]=_,i[8]=C,i[9]=I,i[10]=b,i[11]=E,i[12]=R,i[13]=T,i[14]=A,i[15]=U}function Ul(i,n){An(i,n,n)}function y7(i,n){var e,t=ii();for(e=0;e<16;e++)t[e]=n[e];for(e=253;e>=0;e--)Ul(t,t),e!==2&&e!==4&&An(t,t,n);for(e=0;e<16;e++)i[e]=t[e]}function w7(i,n,e){var t,r,o=new Uint8Array(32),s=new Float64Array(80),a=ii(),l=ii(),c=ii(),d=ii(),h=ii(),_=ii();for(r=0;r<31;r++)o[r]=n[r];for(o[31]=127&n[31]|64,o[0]&=248,I7(s,e),r=0;r<16;r++)l[r]=s[r],d[r]=a[r]=c[r]=0;for(a[0]=d[0]=1,r=254;r>=0;--r)Nm(a,l,t=o[r>>>3]>>>(7&r)&1),Nm(c,d,t),Ac(h,a,c),Tc(a,a,c),Ac(c,l,d),Tc(l,l,d),Ul(d,h),Ul(_,a),An(a,c,a),An(c,l,h),Ac(h,a,c),Tc(a,a,c),Ul(l,a),Tc(c,d,_),An(a,c,kve),Ac(a,a,d),An(c,c,a),An(a,d,_),An(d,l,s),Ul(l,h),Nm(a,l,t),Nm(c,d,t);for(r=0;r<16;r++)s[r+16]=a[r],s[r+32]=c[r],s[r+48]=l[r],s[r+64]=d[r];var C=s.subarray(32),I=s.subarray(16);return y7(C,C),An(I,I,C),V0(i,I),0}function wj(i,n){return w7(i,n,g7)}var vj=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function bj(i,n,e,t){for(var r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A,U,z,ee,re,Z,ae,Ie,ye,xe,Le,gi=new Int32Array(16),be=new Int32Array(16),$e=i[0],oi=i[1],Hi=i[2],Ui=i[3],fi=i[4],ji=i[5],pi=i[6],Ti=i[7],Ut=n[0],Ot=n[1],_i=n[2],Hn=n[3],yi=n[4],ze=n[5],Ge=n[6],Fe=n[7],ot=0;t>=128;){for(ee=0;ee<16;ee++)re=8*ee+ot,gi[ee]=e[re+0]<<24|e[re+1]<<16|e[re+2]<<8|e[re+3],be[ee]=e[re+4]<<24|e[re+5]<<16|e[re+6]<<8|e[re+7];for(ee=0;ee<80;ee++)if(r=$e,o=oi,s=Hi,a=Ui,l=fi,c=ji,d=pi,_=Ut,C=Ot,I=_i,b=Hn,E=yi,R=ze,T=Ge,Ie=65535&(ae=Fe),ye=ae>>>16,xe=65535&(Z=Ti),Le=Z>>>16,Ie+=65535&(ae=(yi>>>14|fi<<18)^(yi>>>18|fi<<14)^(fi>>>9|yi<<23)),ye+=ae>>>16,xe+=65535&(Z=(fi>>>14|yi<<18)^(fi>>>18|yi<<14)^(yi>>>9|fi<<23)),Le+=Z>>>16,Ie+=65535&(ae=yi&ze^~yi&Ge),ye+=ae>>>16,xe+=65535&(Z=fi&ji^~fi&pi),Le+=Z>>>16,Ie+=65535&(ae=vj[2*ee+1]),ye+=ae>>>16,xe+=65535&(Z=vj[2*ee]),Le+=Z>>>16,Z=gi[ee%16],ye+=(ae=be[ee%16])>>>16,xe+=65535&Z,Le+=Z>>>16,xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16,Ie=65535&(ae=z=65535&Ie|ye<<16),ye=ae>>>16,xe=65535&(Z=U=65535&xe|(Le+=xe>>>16)<<16),Le=Z>>>16,Ie+=65535&(ae=(Ut>>>28|$e<<4)^($e>>>2|Ut<<30)^($e>>>7|Ut<<25)),ye+=ae>>>16,xe+=65535&(Z=($e>>>28|Ut<<4)^(Ut>>>2|$e<<30)^(Ut>>>7|$e<<25)),Le+=Z>>>16,ye+=(ae=Ut&Ot^Ut&_i^Ot&_i)>>>16,xe+=65535&(Z=$e&oi^$e&Hi^oi&Hi),Le+=Z>>>16,h=65535&(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)|(Le+=xe>>>16)<<16,A=65535&Ie|ye<<16,Ie=65535&(ae=b),ye=ae>>>16,xe=65535&(Z=a),Le=Z>>>16,ye+=(ae=z)>>>16,xe+=65535&(Z=U),Le+=Z>>>16,oi=r,Hi=o,Ui=s,fi=a=65535&(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)|(Le+=xe>>>16)<<16,ji=l,pi=c,Ti=d,$e=h,Ot=_,_i=C,Hn=I,yi=b=65535&Ie|ye<<16,ze=E,Ge=R,Fe=T,Ut=A,ee%16==15)for(re=0;re<16;re++)Z=gi[re],Ie=65535&(ae=be[re]),ye=ae>>>16,xe=65535&Z,Le=Z>>>16,Z=gi[(re+9)%16],Ie+=65535&(ae=be[(re+9)%16]),ye+=ae>>>16,xe+=65535&Z,Le+=Z>>>16,U=gi[(re+1)%16],Ie+=65535&(ae=((z=be[(re+1)%16])>>>1|U<<31)^(z>>>8|U<<24)^(z>>>7|U<<25)),ye+=ae>>>16,xe+=65535&(Z=(U>>>1|z<<31)^(U>>>8|z<<24)^U>>>7),Le+=Z>>>16,U=gi[(re+14)%16],ye+=(ae=((z=be[(re+14)%16])>>>19|U<<13)^(U>>>29|z<<3)^(z>>>6|U<<26))>>>16,xe+=65535&(Z=(U>>>19|z<<13)^(z>>>29|U<<3)^U>>>6),Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,gi[re]=65535&xe|Le<<16,be[re]=65535&Ie|ye<<16;Ie=65535&(ae=Ut),ye=ae>>>16,xe=65535&(Z=$e),Le=Z>>>16,Z=i[0],ye+=(ae=n[0])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[0]=$e=65535&xe|Le<<16,n[0]=Ut=65535&Ie|ye<<16,Ie=65535&(ae=Ot),ye=ae>>>16,xe=65535&(Z=oi),Le=Z>>>16,Z=i[1],ye+=(ae=n[1])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[1]=oi=65535&xe|Le<<16,n[1]=Ot=65535&Ie|ye<<16,Ie=65535&(ae=_i),ye=ae>>>16,xe=65535&(Z=Hi),Le=Z>>>16,Z=i[2],ye+=(ae=n[2])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[2]=Hi=65535&xe|Le<<16,n[2]=_i=65535&Ie|ye<<16,Ie=65535&(ae=Hn),ye=ae>>>16,xe=65535&(Z=Ui),Le=Z>>>16,Z=i[3],ye+=(ae=n[3])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[3]=Ui=65535&xe|Le<<16,n[3]=Hn=65535&Ie|ye<<16,Ie=65535&(ae=yi),ye=ae>>>16,xe=65535&(Z=fi),Le=Z>>>16,Z=i[4],ye+=(ae=n[4])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[4]=fi=65535&xe|Le<<16,n[4]=yi=65535&Ie|ye<<16,Ie=65535&(ae=ze),ye=ae>>>16,xe=65535&(Z=ji),Le=Z>>>16,Z=i[5],ye+=(ae=n[5])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[5]=ji=65535&xe|Le<<16,n[5]=ze=65535&Ie|ye<<16,Ie=65535&(ae=Ge),ye=ae>>>16,xe=65535&(Z=pi),Le=Z>>>16,Z=i[6],ye+=(ae=n[6])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[6]=pi=65535&xe|Le<<16,n[6]=Ge=65535&Ie|ye<<16,Ie=65535&(ae=Fe),ye=ae>>>16,xe=65535&(Z=Ti),Le=Z>>>16,Z=i[7],ye+=(ae=n[7])>>>16,xe+=65535&Z,Le+=Z>>>16,Le+=(xe+=(ye+=(Ie+=65535&ae)>>>16)>>>16)>>>16,i[7]=Ti=65535&xe|Le<<16,n[7]=Fe=65535&Ie|ye<<16,ot+=128,t-=128}return t}function R0(i,n,e){var t,r=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=e;for(r[0]=1779033703,r[1]=3144134277,r[2]=1013904242,r[3]=2773480762,r[4]=1359893119,r[5]=2600822924,r[6]=528734635,r[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,bj(r,o,n,e),e%=128,t=0;t<e;t++)s[t]=n[a-e+t];for(s[e]=128,s[(e=256-128*(e<112?1:0))-9]=0,Ij(s,e-8,a/536870912|0,a<<3),bj(r,o,s,e),t=0;t<8;t++)Ij(i,8*t,r[t],o[t]);return 0}function DR(i,n){var e=ii(),t=ii(),r=ii(),o=ii(),s=ii(),a=ii(),l=ii(),c=ii(),d=ii();Tc(e,i[1],i[0]),Tc(d,n[1],n[0]),An(e,e,d),Ac(t,i[0],i[1]),Ac(d,n[0],n[1]),An(t,t,d),An(r,i[3],n[3]),An(r,r,Lve),An(o,i[2],n[2]),Ac(o,o,o),Tc(s,t,e),Tc(a,o,r),Ac(l,o,r),Ac(c,t,e),An(i[0],s,a),An(i[1],c,l),An(i[2],l,a),An(i[3],s,c)}function Sj(i,n,e){var t;for(t=0;t<4;t++)Nm(i[t],n[t],e)}function FR(i,n){var e=ii(),t=ii(),r=ii();y7(r,n[2]),An(e,n[0],r),An(t,n[1],r),V0(i,t),i[31]^=C7(e)<<7}function v7(i,n,e){var t,r;for(Zp(i[0],PR),Zp(i[1],Nb),Zp(i[2],Nb),Zp(i[3],PR),r=255;r>=0;--r)Sj(i,n,t=e[r/8|0]>>(7&r)&1),DR(n,i),DR(i,i),Sj(i,n,t)}function kR(i,n){var e=[ii(),ii(),ii(),ii()];Zp(e[0],_j),Zp(e[1],Cj),Zp(e[2],Nb),An(e[3],_j,Cj),v7(i,e,n)}function Ej(i,n,e){var t,r=new Uint8Array(64),o=[ii(),ii(),ii(),ii()];for(e||RR(n,32),R0(r,n,32),r[0]&=248,r[31]&=127,r[31]|=64,kR(o,r),FR(i,o),t=0;t<32;t++)n[t+32]=i[t];return 0}var pR=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function b7(i,n){var e,t,r,o;for(t=63;t>=32;--t){for(e=0,r=t-32,o=t-12;r<o;++r)n[r]+=e-16*n[t]*pR[r-(t-32)],e=Math.floor((n[r]+128)/256),n[r]-=256*e;n[r]+=e,n[t]=0}for(e=0,r=0;r<32;r++)n[r]+=e-(n[31]>>4)*pR[r],e=n[r]>>8,n[r]&=255;for(r=0;r<32;r++)n[r]-=e*pR[r];for(t=0;t<32;t++)n[t+1]+=n[t]>>8,i[t]=255&n[t]}function uR(i){var n,e=new Float64Array(64);for(n=0;n<64;n++)e[n]=i[n];for(n=0;n<64;n++)i[n]=0;b7(i,e)}function Vve(i,n){var e=ii(),t=ii(),r=ii(),o=ii(),s=ii(),a=ii(),l=ii();return Zp(i[2],Nb),I7(i[1],n),Ul(r,i[1]),An(o,r,Nve),Tc(r,r,i[2]),Ac(o,i[2],o),Ul(s,o),Ul(a,s),An(l,a,s),An(e,l,r),An(e,e,o),function(c,d){var h,_=ii();for(h=0;h<16;h++)_[h]=d[h];for(h=250;h>=0;h--)Ul(_,_),h!==1&&An(_,_,d);for(h=0;h<16;h++)c[h]=_[h]}(e,e),An(e,e,r),An(e,e,o),An(e,e,o),An(i[0],e,o),Ul(t,i[0]),An(t,t,o),yj(t,r)&&An(i[0],i[0],Mve),Ul(t,i[0]),An(t,t,o),yj(t,r)?-1:(C7(i[0])===n[31]>>7&&Tc(i[0],PR,i[0]),An(i[3],i[0],i[1]),0)}var vh=64;function Fm(){for(var i=0;i<arguments.length;i++)if(!(arguments[i]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}Lr.scalarMult=function(i,n){if(Fm(i,n),i.length!==32)throw Error("bad n size");if(n.length!==32)throw Error("bad p size");var e=new Uint8Array(32);return w7(e,i,n),e},Lr.box={},Lr.box.keyPair=function(){var i=new Uint8Array(32),n=new Uint8Array(32);return function(e,t){RR(t,32),wj(e,t)}(i,n),{publicKey:i,secretKey:n}},Lr.box.keyPair.fromSecretKey=function(i){if(Fm(i),i.length!==32)throw Error("bad secret key size");var n=new Uint8Array(32);return wj(n,i),{publicKey:n,secretKey:new Uint8Array(i)}},Lr.sign=function(i,n){if(Fm(i,n),n.length!==64)throw Error("bad secret key size");var e=new Uint8Array(vh+i.length);return function(t,r,o,s){var a,l,c=new Uint8Array(64),d=new Uint8Array(64),h=new Uint8Array(64),_=new Float64Array(64),C=[ii(),ii(),ii(),ii()];R0(c,s,32),c[0]&=248,c[31]&=127,c[31]|=64;var I=o+64;for(a=0;a<o;a++)t[64+a]=r[a];for(a=0;a<32;a++)t[32+a]=c[32+a];for(R0(h,t.subarray(32),o+32),uR(h),kR(C,h),FR(t,C),a=32;a<64;a++)t[a]=s[a];for(R0(d,t,o+64),uR(d),a=0;a<64;a++)_[a]=0;for(a=0;a<32;a++)_[a]=h[a];for(a=0;a<32;a++)for(l=0;l<32;l++)_[a+l]+=d[a]*c[l];b7(t.subarray(32),_)}(e,i,i.length,n),e},Lr.sign.detached=function(i,n){for(var e=Lr.sign(i,n),t=new Uint8Array(vh),r=0;r<t.length;r++)t[r]=e[r];return t},Lr.sign.detached.verify=function(i,n,e){if(Fm(i,n,e),n.length!==vh)throw Error("bad signature size");if(e.length!==32)throw Error("bad public key size");var t,r=new Uint8Array(vh+i.length),o=new Uint8Array(vh+i.length);for(t=0;t<vh;t++)r[t]=n[t];for(t=0;t<i.length;t++)r[t+vh]=i[t];return function(s,a,l,c){var d,h=new Uint8Array(32),_=new Uint8Array(64),C=[ii(),ii(),ii(),ii()],I=[ii(),ii(),ii(),ii()];if(l<64||Vve(I,c))return-1;for(d=0;d<l;d++)s[d]=a[d];for(d=0;d<32;d++)s[d+32]=c[d];if(R0(_,s,l),uR(_),v7(C,I,_),kR(I,a.subarray(32)),DR(C,I),FR(h,C),l-=64,_7(a,0,h,0)){for(d=0;d<l;d++)s[d]=0;return-1}for(d=0;d<l;d++)s[d]=a[d+64];return l}(o,r,r.length,e)>=0},Lr.sign.keyPair=function(){var i=new Uint8Array(32),n=new Uint8Array(64);return Ej(i,n),{publicKey:i,secretKey:n}},Lr.sign.keyPair.fromSecretKey=function(i){if(Fm(i),i.length!==64)throw Error("bad secret key size");for(var n=new Uint8Array(32),e=0;e<n.length;e++)n[e]=i[32+e];return{publicKey:n,secretKey:new Uint8Array(i)}},Lr.sign.keyPair.fromSeed=function(i){if(Fm(i),i.length!==32)throw Error("bad seed size");for(var n=new Uint8Array(32),e=new Uint8Array(64),t=0;t<32;t++)e[t]=i[t];return Ej(n,e,!0),{publicKey:n,secretKey:e}},Lr.setPRNG=function(i){RR=i},function(){cR&&cR.getRandomValues&&Lr.setPRNG(function(i,n){var e,t=new Uint8Array(n);for(e=0;e<n;e+=65536)cR.getRandomValues(t.subarray(e,e+Math.min(n-e,65536)));for(e=0;e<n;e++)i[e]=t[e];(function(r){for(var o=0;o<r.length;o++)r[o]=0})(t)})}();var Bve={"2a8648ce3d030107":x.curve.nistP256,"2b81040022":x.curve.nistP384,"2b81040023":x.curve.nistP521,"2b8104000a":x.curve.secp256k1,"2b06010401da470f01":x.curve.ed25519Legacy,"2b060104019755010501":x.curve.curve25519Legacy,"2b2403030208010107":x.curve.brainpoolP256r1,"2b240303020801010b":x.curve.brainpoolP384r1,"2b240303020801010d":x.curve.brainpoolP512r1},Ld=class i{constructor(n){if(n instanceof i)this.oid=n.oid;else if(H.isArray(n)||H.isUint8Array(n)){if((n=new Uint8Array(n))[0]===6){if(n[1]!==n.length-2)throw Error("Length mismatch in DER encoded oid");n=n.subarray(2)}this.oid=n}else this.oid=""}read(n){if(n.length>=1){let e=n[0];if(n.length>=1+e)return this.oid=n.subarray(1,1+e),1+this.oid.length}throw Error("Invalid oid")}write(){return H.concatUint8Array([new Uint8Array([this.oid.length]),this.oid])}toHex(){return H.uint8ArrayToHex(this.oid)}getName(){let n=Bve[this.toHex()];if(!n)throw Error("Unknown curve object identifier.");return n}};function S7(i){let n,e=0,t=i[0];return t<192?([e]=i,n=1):t<255?(e=(i[0]-192<<8)+i[1]+192,n=2):t===255&&(e=H.readNumber(i.subarray(1,5)),n=5),{len:e,offset:n}}function c1(i){return i<192?new Uint8Array([i]):i>191&&i<8384?new Uint8Array([192+(i-192>>8),i-192&255]):H.concatUint8Array([new Uint8Array([255]),H.writeNumber(i,4)])}function Uve(i){if(i<0||i>30)throw Error("Partial Length power must be between 1 and 30");return new Uint8Array([224+i])}function Lb(i){return new Uint8Array([192|i])}function Aj(i,n){return H.concatUint8Array([Lb(i),c1(n)])}function Sb(i){return[x.packet.literalData,x.packet.compressedData,x.packet.symmetricallyEncryptedData,x.packet.symEncryptedIntegrityProtectedData,x.packet.aeadEncryptedData].includes(i)}function jve(i,n,e){return B(this,null,function*(){let t,r;try{let o=yield i.peekBytes(2);if(!o||o.length<2||!(128&o[0]))throw Error("Error during parsing. This message / key probably does not conform to a valid OpenPGP format.");let s=yield i.readByte(),a,l,c=-1,d=-1;d=0,64&s&&(d=1),d?c=63&s:(c=(63&s)>>2,l=3&s);let h=Sb(c),_,C=null;if(n&&h){if(n==="array"){let I=new ul;t=Ga(I),C=I}else{let I=new TransformStream;t=Ga(I.writable),C=I.readable}r=e({tag:c,packet:C})}else C=[];do{if(d){let I=yield i.readByte();if(_=!1,I<192)a=I;else if(I>=192&&I<224)a=(I-192<<8)+(yield i.readByte())+192;else if(I>223&&I<255){if(a=1<<(31&I),_=!0,!h)throw new TypeError("This packet type does not support partial lengths.")}else a=(yield i.readByte())<<24|(yield i.readByte())<<16|(yield i.readByte())<<8|(yield i.readByte())}else switch(l){case 0:a=yield i.readByte();break;case 1:a=(yield i.readByte())<<8|(yield i.readByte());break;case 2:a=(yield i.readByte())<<24|(yield i.readByte())<<16|(yield i.readByte())<<8|(yield i.readByte());break;default:a=1/0}if(a>0){let I=0;for(;;){t&&(yield t.ready);let{done:b,value:E}=yield i.read();if(b){if(a===1/0)break;throw Error("Unexpected end of packet")}let R=a===1/0?E:E.subarray(0,a-I);if(t?yield t.write(R):C.push(R),I+=E.length,I>=a){i.unshift(E.subarray(a-I+E.length));break}}}}while(_);t?(yield t.ready,yield t.close()):(C=H.concatUint8Array(C),yield e({tag:c,packet:C}))}catch(o){if(t)return yield t.abort(o),!0;throw o}finally{t&&(yield r)}})}var jn=class i extends Error{constructor(...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="UnsupportedError"}},jm=class extends jn{constructor(...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,jn),this.name="UnknownPacketError"}},M0=class extends jn{constructor(...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,jn),this.name="MalformedPacketError"}},B0=class{constructor(n,e){this.tag=n,this.rawContent=e}write(){return this.rawContent}};function aP(i){return B(this,null,function*(){switch(i){case x.publicKey.ed25519:try{let n=H.getWebCrypto(),e=yield n.generateKey("Ed25519",!0,["sign","verify"]).catch(o=>{if(o.name==="OperationError"){let s=Error("Unexpected key generation issue");throw s.name="NotSupportedError",s}throw o}),t=yield n.exportKey("jwk",e.privateKey),r=yield n.exportKey("jwk",e.publicKey);return{A:new Uint8Array(sa(r.x)),seed:sa(t.d)}}catch(n){if(n.name!=="NotSupportedError")throw n;let e=Yo(d1(i)),{publicKey:t}=Lr.sign.keyPair.fromSeed(e);return{A:t,seed:e}}case x.publicKey.ed448:{let n=yield H.getNobleCurve(x.publicKey.ed448),e=n.utils.randomPrivateKey();return{A:n.getPublicKey(e),seed:e}}default:throw Error("Unsupported EdDSA algorithm")}})}function lP(i,n,e,t,r,o){return B(this,null,function*(){if(Do(n)<Do(p1(i)))throw Error("Hash algorithm too weak for EdDSA.");switch(i){case x.publicKey.ed25519:try{let s=H.getWebCrypto(),a=Gve(i,t,r),l=yield s.importKey("jwk",a,"Ed25519",!1,["sign"]);return{RS:new Uint8Array(yield s.sign("Ed25519",l,o))}}catch(s){if(s.name!=="NotSupportedError")throw s;let a=H.concatUint8Array([r,t]);return{RS:Lr.sign.detached(o,a)}}case x.publicKey.ed448:return{RS:(yield H.getNobleCurve(x.publicKey.ed448)).sign(o,r)};default:throw Error("Unsupported EdDSA algorithm")}})}function cP(s,a,l,c,d,h){return B(this,arguments,function*(i,n,{RS:e},t,r,o){if(Do(n)<Do(p1(i)))throw Error("Hash algorithm too weak for EdDSA.");switch(i){case x.publicKey.ed25519:try{let _=H.getWebCrypto(),C=A7(i,r),I=yield _.importKey("jwk",C,"Ed25519",!1,["verify"]);return yield _.verify("Ed25519",I,e,o)}catch(_){if(_.name!=="NotSupportedError")throw _;return Lr.sign.detached.verify(o,e,r)}case x.publicKey.ed448:return(yield H.getNobleCurve(x.publicKey.ed448)).verify(e,o,r);default:throw Error("Unsupported EdDSA algorithm")}})}function E7(i,n,e){return B(this,null,function*(){switch(i){case x.publicKey.ed25519:{let{publicKey:t}=Lr.sign.keyPair.fromSeed(e);return H.equalsUint8Array(n,t)}case x.publicKey.ed448:{let t=(yield H.getNobleCurve(x.publicKey.ed448)).getPublicKey(e);return H.equalsUint8Array(n,t)}default:return!1}})}function d1(i){switch(i){case x.publicKey.ed25519:return 32;case x.publicKey.ed448:return 57;default:throw Error("Unsupported EdDSA algorithm")}}function p1(i){switch(i){case x.publicKey.ed25519:return x.hash.sha256;case x.publicKey.ed448:return x.hash.sha512;default:throw Error("Unknown EdDSA algo")}}var A7=(i,n)=>{if(i===x.publicKey.ed25519)return{kty:"OKP",crv:"Ed25519",x:cs(n),ext:!0};throw Error("Unsupported EdDSA algorithm")},Gve=(i,n,e)=>{if(i===x.publicKey.ed25519){let t=A7(i,n);return t.d=cs(e),t}throw Error("Unsupported EdDSA algorithm")},Hve=Object.freeze({__proto__:null,generate:aP,getPayloadSize:d1,getPreferredHashAlgo:p1,sign:lP,validateParams:E7,verify:cP});function x7(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function Mr(i,...n){if(!x7(i))throw Error("Uint8Array expected");if(n.length>0&&!n.includes(i.length))throw Error("Uint8Array expected of length "+n+", got length="+i.length)}function Mb(i,n=!0){if(i.destroyed)throw Error("Hash instance has been destroyed");if(n&&i.finished)throw Error("Hash#digest() has already been called")}function T7(i,n){Mr(i);let e=n.outputLen;if(i.length<e)throw Error("digestInto() expects output buffer of length at least "+e)}function dP(i){return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}function wr(i){return new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4))}function Rs(...i){for(let n=0;n<i.length;n++)i[n].fill(0)}function u1(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}var Wve=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function U0(i){if(typeof i=="string")i=function(n){if(typeof n!="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}(i);else{if(!x7(i))throw Error("Uint8Array expected, got "+typeof i);i=aa(i)}return i}function O7(i,n){return i.buffer===n.buffer&&i.byteOffset<n.byteOffset+n.byteLength&&n.byteOffset<i.byteOffset+i.byteLength}function NR(i,n){if(O7(i,n)&&i.byteOffset<n.byteOffset)throw Error("complex overlap of input and output is not supported")}function R7(i,n){if(i.length!==n.length)return!1;let e=0;for(let t=0;t<i.length;t++)e|=i[t]^n[t];return e===0}var tC=(i,n)=>{function e(t,...r){if(Mr(t),!Wve)throw Error("Non little-endian hardware is not yet supported");if(i.nonceLength!==void 0){let c=r[0];if(!c)throw Error("nonce / iv required");i.varSizeNonce?Mr(c):Mr(c,i.nonceLength)}let o=i.tagLength;o&&r[1]!==void 0&&Mr(r[1]);let s=n(t,...r),a=(c,d)=>{if(d!==void 0){if(c!==2)throw Error("cipher output not supported");Mr(d)}},l=!1;return{encrypt(c,d){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,Mr(c),a(s.encrypt.length,d),s.encrypt(c,d)},decrypt(c,d){if(Mr(c),o&&c.length<o)throw Error("invalid ciphertext length: smaller than tagLength="+o);return a(s.decrypt.length,d),s.decrypt(c,d)}}}return Object.assign(e,i),e};function j0(i,n,e=!0){if(n===void 0)return new Uint8Array(i);if(n.length!==i)throw Error("invalid output length, expected "+i+", got: "+n.length);if(e&&!hl(n))throw Error("invalid output, must be aligned");return n}function LR(i,n,e,t){if(typeof i.setBigUint64=="function")return i.setBigUint64(n,e,t);let r=BigInt(32),o=BigInt(4294967295),s=Number(e>>r&o),a=Number(e&o);i.setUint32(n+0,s,t),i.setUint32(n+4,a,t)}function hl(i){return i.byteOffset%4==0}function aa(i){return Uint8Array.from(i)}var Nd=16,pP=new Uint8Array(16),xc=wr(pP),dl=i=>(i>>>0&255)<<24|(i>>>8&255)<<16|(i>>>16&255)<<8|i>>>24&255,Vb=class{constructor(n,e){this.blockLen=Nd,this.outputLen=Nd,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,Mr(n=U0(n),16);let t=u1(n),r=t.getUint32(0,!1),o=t.getUint32(4,!1),s=t.getUint32(8,!1),a=t.getUint32(12,!1),l=[];for(let T=0;T<128;T++)l.push({s0:dl(r),s1:dl(o),s2:dl(s),s3:dl(a)}),{s0:r,s1:o,s2:s,s3:a}={s3:(h=s)<<31|(_=a)>>>1,s2:(d=o)<<31|h>>>1,s1:(c=r)<<31|d>>>1,s0:c>>>1^225<<24&-(1&_)};var c,d,h,_;let C=(I=e||1024)>65536?8:I>1024?4:2;var I;if(![1,2,4,8].includes(C))throw Error("ghash: invalid window size, expected 2, 4 or 8");this.W=C;let b=128/C,E=this.windowSize=2**C,R=[];for(let T=0;T<b;T++)for(let A=0;A<E;A++){let U=0,z=0,ee=0,re=0;for(let Z=0;Z<C;Z++){if(!(A>>>C-Z-1&1))continue;let{s0:ae,s1:Ie,s2:ye,s3:xe}=l[C*T+Z];U^=ae,z^=Ie,ee^=ye,re^=xe}R.push({s0:U,s1:z,s2:ee,s3:re})}this.t=R}_updateBlock(n,e,t,r){n^=this.s0,e^=this.s1,t^=this.s2,r^=this.s3;let{W:o,t:s,windowSize:a}=this,l=0,c=0,d=0,h=0,_=(1<<o)-1,C=0;for(let I of[n,e,t,r])for(let b=0;b<4;b++){let E=I>>>8*b&255;for(let R=8/o-1;R>=0;R--){let T=E>>>o*R&_,{s0:A,s1:U,s2:z,s3:ee}=s[C*a+T];l^=A,c^=U,d^=z,h^=ee,C+=1}}this.s0=l,this.s1=c,this.s2=d,this.s3=h}update(n){Mb(this),Mr(n=U0(n));let e=wr(n),t=Math.floor(n.length/Nd),r=n.length%Nd;for(let o=0;o<t;o++)this._updateBlock(e[4*o+0],e[4*o+1],e[4*o+2],e[4*o+3]);return r&&(pP.set(n.subarray(t*Nd)),this._updateBlock(xc[0],xc[1],xc[2],xc[3]),Rs(xc)),this}destroy(){let{t:n}=this;for(let e of n)e.s0=0,e.s1=0,e.s2=0,e.s3=0}digestInto(n){Mb(this),T7(n,this),this.finished=!0;let{s0:e,s1:t,s2:r,s3:o}=this,s=wr(n);return s[0]=e,s[1]=t,s[2]=r,s[3]=o,n}digest(){let n=new Uint8Array(Nd);return this.digestInto(n),this.destroy(),n}},MR=class extends Vb{constructor(n,e){Mr(n=U0(n));let t=function(r){r.reverse();let o=1&r[15],s=0;for(let a=0;a<r.length;a++){let l=r[a];r[a]=l>>>1|s,s=(1&l)<<7}return r[0]^=225&-o,r}(aa(n));super(t,e),Rs(t)}update(n){n=U0(n),Mb(this);let e=wr(n),t=n.length%Nd,r=Math.floor(n.length/Nd);for(let o=0;o<r;o++)this._updateBlock(dl(e[4*o+3]),dl(e[4*o+2]),dl(e[4*o+1]),dl(e[4*o+0]));return t&&(pP.set(n.subarray(r*Nd)),this._updateBlock(dl(xc[3]),dl(xc[2]),dl(xc[1]),dl(xc[0])),Rs(xc)),this}digestInto(n){Mb(this),T7(n,this),this.finished=!0;let{s0:e,s1:t,s2:r,s3:o}=this,s=wr(n);return s[0]=e,s[1]=t,s[2]=r,s[3]=o,n.reverse()}};function P7(i){let n=(t,r)=>i(r,t.length).update(U0(t)).digest(),e=i(new Uint8Array(16),0);return n.outputLen=e.outputLen,n.blockLen=e.blockLen,n.create=(t,r)=>i(t,r),n}var xj=P7((i,n)=>new Vb(i,n));P7((i,n)=>new MR(i,n));var Ua=16,Ib=new Uint8Array(Ua);function uP(i){return i<<1^283&-(i>>7)}function Lm(i,n){let e=0;for(;n>0;n>>=1)e^=i&-(1&n),i=uP(i);return e}var VR=(()=>{let i=new Uint8Array(256);for(let e=0,t=1;e<256;e++,t^=uP(t))i[e]=t;let n=new Uint8Array(256);n[0]=99;for(let e=0;e<255;e++){let t=i[255-e];t|=t<<8,n[i[e]]=255&(t^t>>4^t>>5^t>>6^t>>7^99)}return Rs(i),n})(),zve=VR.map((i,n)=>VR.indexOf(n)),hR=i=>i<<8|i>>>24,Tj=i=>i<<24&4278190080|i<<8&16711680|i>>>8&65280|i>>>24&255;function D7(i,n){if(i.length!==256)throw Error("Wrong sbox length");let e=new Uint32Array(256).map((c,d)=>n(i[d])),t=e.map(hR),r=t.map(hR),o=r.map(hR),s=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let c=0;c<256;c++)for(let d=0;d<256;d++){let h=256*c+d;s[h]=e[c]^t[d],a[h]=r[c]^o[d],l[h]=i[c]<<8|i[d]}return{sbox:i,sbox2:l,T0:e,T1:t,T2:r,T3:o,T01:s,T23:a}}var hP=D7(VR,i=>Lm(i,3)<<24|i<<16|i<<8|Lm(i,2)),F7=D7(zve,i=>Lm(i,11)<<24|Lm(i,13)<<16|Lm(i,9)<<8|Lm(i,14)),Kve=(()=>{let i=new Uint8Array(16);for(let n=0,e=1;n<16;n++,e=uP(e))i[n]=e;return i})();function Ph(i){Mr(i);let n=i.length;if(![16,24,32].includes(n))throw Error("aes: invalid key size, should be 16, 24 or 32, got "+n);let{sbox2:e}=hP,t=[];hl(i)||t.push(i=aa(i));let r=wr(i),o=r.length,s=c=>Oc(e,c,c,c,c),a=new Uint32Array(n+28);a.set(r);for(let c=o;c<a.length;c++){let d=a[c-1];c%o==0?d=s((l=d)<<24|l>>>8)^Kve[c/o-1]:o>6&&c%o==4&&(d=s(d)),a[c]=a[c-o]^d}var l;return Rs(...t),a}function fP(i){let n=Ph(i),e=n.slice(),t=n.length,{sbox2:r}=hP,{T0:o,T1:s,T2:a,T3:l}=F7;for(let c=0;c<t;c+=4)for(let d=0;d<4;d++)e[c+d]=n[t-c-4+d];Rs(n);for(let c=4;c<t-4;c++){let d=e[c],h=Oc(r,d,d,d,d);e[c]=o[255&h]^s[h>>>8&255]^a[h>>>16&255]^l[h>>>24]}return e}function eu(i,n,e,t,r,o){return i[e<<8&65280|t>>>8&255]^n[r>>>8&65280|o>>>24&255]}function Oc(i,n,e,t,r){return i[255&n|65280&e]|i[t>>>16&255|r>>>16&65280]<<16}function jl(i,n,e,t,r){let{sbox2:o,T01:s,T23:a}=hP,l=0;n^=i[l++],e^=i[l++],t^=i[l++],r^=i[l++];let c=i.length/4-2;for(let d=0;d<c;d++){let h=i[l++]^eu(s,a,n,e,t,r),_=i[l++]^eu(s,a,e,t,r,n),C=i[l++]^eu(s,a,t,r,n,e),I=i[l++]^eu(s,a,r,n,e,t);n=h,e=_,t=C,r=I}return{s0:i[l++]^Oc(o,n,e,t,r),s1:i[l++]^Oc(o,e,t,r,n),s2:i[l++]^Oc(o,t,r,n,e),s3:i[l++]^Oc(o,r,n,e,t)}}function h1(i,n,e,t,r){let{sbox2:o,T01:s,T23:a}=F7,l=0;n^=i[l++],e^=i[l++],t^=i[l++],r^=i[l++];let c=i.length/4-2;for(let d=0;d<c;d++){let h=i[l++]^eu(s,a,n,r,t,e),_=i[l++]^eu(s,a,e,n,r,t),C=i[l++]^eu(s,a,t,e,n,r),I=i[l++]^eu(s,a,r,t,e,n);n=h,e=_,t=C,r=I}return{s0:i[l++]^Oc(o,n,r,t,e),s1:i[l++]^Oc(o,e,n,r,t),s2:i[l++]^Oc(o,t,e,n,r),s3:i[l++]^Oc(o,r,t,e,n)}}function k7(i,n,e,t){Mr(n,Ua),Mr(e);let r=e.length;NR(e,t=j0(r,t));let o=n,s=wr(o),{s0:a,s1:l,s2:c,s3:d}=jl(i,s[0],s[1],s[2],s[3]),h=wr(e),_=wr(t);for(let I=0;I+4<=h.length;I+=4){_[I+0]=h[I+0]^a,_[I+1]=h[I+1]^l,_[I+2]=h[I+2]^c,_[I+3]=h[I+3]^d;let b=1;for(let E=o.length-1;E>=0;E--)b=b+(255&o[E])|0,o[E]=255&b,b>>>=8;({s0:a,s1:l,s2:c,s3:d}=jl(i,s[0],s[1],s[2],s[3]))}let C=Ua*Math.floor(h.length/4);if(C<r){let I=new Uint32Array([a,l,c,d]),b=dP(I);for(let E=C,R=0;E<r;E++,R++)t[E]=e[E]^b[R];Rs(I)}return t}function P0(i,n,e,t,r){Mr(e,Ua),Mr(t),r=j0(t.length,r);let o=e,s=wr(o),a=u1(o),l=wr(t),c=wr(r),d=n?0:12,h=t.length,_=a.getUint32(d,n),{s0:C,s1:I,s2:b,s3:E}=jl(i,s[0],s[1],s[2],s[3]);for(let T=0;T+4<=l.length;T+=4)c[T+0]=l[T+0]^C,c[T+1]=l[T+1]^I,c[T+2]=l[T+2]^b,c[T+3]=l[T+3]^E,_=_+1>>>0,a.setUint32(d,_,n),{s0:C,s1:I,s2:b,s3:E}=jl(i,s[0],s[1],s[2],s[3]);let R=Ua*Math.floor(l.length/4);if(R<h){let T=new Uint32Array([C,I,b,E]),A=dP(T);for(let U=R,z=0;U<h;U++,z++)r[U]=t[U]^A[z];Rs(T)}return r}var $ve=tC({blockSize:16,nonceLength:16},function(i,n){function e(t,r){if(Mr(t),r!==void 0&&(Mr(r),!hl(r)))throw Error("unaligned destination");let o=Ph(i),s=aa(n),a=[o,s];hl(t)||a.push(t=aa(t));let l=k7(o,s,t,r);return Rs(...a),l}return{encrypt:(t,r)=>e(t,r),decrypt:(t,r)=>e(t,r)}}),BR=tC({blockSize:16,nonceLength:16},function(i,n,e={}){let t=!e.disablePadding;return{encrypt(r,o){let s=Ph(i),{b:a,o:l,out:c}=function(T,A,U){Mr(T);let z=T.length,ee=z%Ua;if(!A&&ee!==0)throw Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");hl(T)||(T=aa(T));let re=wr(T);if(A){let Z=Ua-ee;Z||(Z=Ua),z+=Z}return NR(T,U=j0(z,U)),{b:re,o:wr(U),out:U}}(r,t,o),d=n,h=[s];hl(d)||h.push(d=aa(d));let _=wr(d),C=_[0],I=_[1],b=_[2],E=_[3],R=0;for(;R+4<=a.length;)C^=a[R+0],I^=a[R+1],b^=a[R+2],E^=a[R+3],{s0:C,s1:I,s2:b,s3:E}=jl(s,C,I,b,E),l[R++]=C,l[R++]=I,l[R++]=b,l[R++]=E;if(t){let T=function(A){let U=new Uint8Array(16),z=wr(U);U.set(A);let ee=Ua-A.length;for(let re=Ua-ee;re<Ua;re++)U[re]=ee;return z}(r.subarray(4*R));C^=T[0],I^=T[1],b^=T[2],E^=T[3],{s0:C,s1:I,s2:b,s3:E}=jl(s,C,I,b,E),l[R++]=C,l[R++]=I,l[R++]=b,l[R++]=E}return Rs(...h),c},decrypt(r,o){(function(E){if(Mr(E),E.length%Ua!=0)throw Error("aes-(cbc/ecb).decrypt ciphertext should consist of blocks with size 16")})(r);let s=fP(i),a=n,l=[s];hl(a)||l.push(a=aa(a));let c=wr(a);o=j0(r.length,o),hl(r)||l.push(r=aa(r)),NR(r,o);let d=wr(r),h=wr(o),_=c[0],C=c[1],I=c[2],b=c[3];for(let E=0;E+4<=d.length;){let R=_,T=C,A=I,U=b;_=d[E+0],C=d[E+1],I=d[E+2],b=d[E+3];let{s0:z,s1:ee,s2:re,s3:Z}=h1(s,_,C,I,b);h[E++]=z^R,h[E++]=ee^T,h[E++]=re^A,h[E++]=Z^U}return Rs(...l),function(E,R){if(!R)return E;let T=E.length;if(!T)throw Error("aes/pcks5: empty ciphertext not allowed");let A=E[T-1];if(A<=0||A>16)throw Error("aes/pcks5: wrong padding");let U=E.subarray(0,-A);for(let z=0;z<A;z++)if(E[T-z-1]!==A)throw Error("aes/pcks5: wrong padding");return U}(o,t)}}}),N7=tC({blockSize:16,nonceLength:16},function(i,n){function e(t,r,o){Mr(t);let s=t.length;if(O7(t,o=j0(s,o)))throw Error("overlapping src and dst not supported.");let a=Ph(i),l=n,c=[a];hl(l)||c.push(l=aa(l)),hl(t)||c.push(t=aa(t));let d=wr(t),h=wr(o),_=r?h:d,C=wr(l),I=C[0],b=C[1],E=C[2],R=C[3];for(let A=0;A+4<=d.length;){let{s0:U,s1:z,s2:ee,s3:re}=jl(a,I,b,E,R);h[A+0]=d[A+0]^U,h[A+1]=d[A+1]^z,h[A+2]=d[A+2]^ee,h[A+3]=d[A+3]^re,I=_[A++],b=_[A++],E=_[A++],R=_[A++]}let T=Ua*Math.floor(d.length/4);if(T<s){({s0:I,s1:b,s2:E,s3:R}=jl(a,I,b,E,R));let A=dP(new Uint32Array([I,b,E,R]));for(let U=T,z=0;U<s;U++,z++)o[U]=t[U]^A[z];Rs(A)}return Rs(...c),o}return{encrypt:(t,r)=>e(t,!0,r),decrypt:(t,r)=>e(t,!1,r)}});function Jve(i,n,e,t,r){let o=r?r.length:0,s=i.create(e,t.length+o);r&&s.update(r);let a=function(c,d,h){let _=new Uint8Array(16),C=u1(_);return LR(C,0,BigInt(d),h),LR(C,8,BigInt(c),h),_}(8*t.length,8*o,n);s.update(t),s.update(a);let l=s.digest();return Rs(a),l}var yb=tC({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},function(i,n,e){if(n.length<8)throw Error("aes/gcm: invalid nonce length");function t(o,s,a){let l=Jve(xj,!1,o,a,e);for(let c=0;c<s.length;c++)l[c]^=s[c];return l}function r(){let o=Ph(i),s=Ib.slice(),a=Ib.slice();if(P0(o,!1,a,a,s),n.length===12)a.set(n);else{let l=Ib.slice();LR(u1(l),8,BigInt(8*n.length),!1);let c=xj.create(s).update(n).update(l);c.digestInto(a),c.destroy()}return{xk:o,authKey:s,counter:a,tagMask:P0(o,!1,a,Ib)}}return{encrypt(o){let{xk:s,authKey:a,counter:l,tagMask:c}=r(),d=new Uint8Array(o.length+16),h=[s,a,l,c];hl(o)||h.push(o=aa(o)),P0(s,!1,l,o,d.subarray(0,o.length));let _=t(a,c,d.subarray(0,d.length-16));return h.push(_),d.set(_,o.length),Rs(...h),d},decrypt(o){let{xk:s,authKey:a,counter:l,tagMask:c}=r(),d=[s,a,c,l];hl(o)||d.push(o=aa(o));let h=o.subarray(0,-16),_=o.subarray(-16),C=t(a,c,h);if(d.push(C),!R7(C,_))throw Error("aes/gcm: invalid ghash tag");let I=P0(s,!1,l,h);return Rs(...d),I}}});function L7(i){return i instanceof Uint32Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint32Array"}function M7(i,n){if(Mr(n,16),!L7(i))throw Error("_encryptBlock accepts result of expandKeyLE");let e=wr(n),{s0:t,s1:r,s2:o,s3:s}=jl(i,e[0],e[1],e[2],e[3]);return e[0]=t,e[1]=r,e[2]=o,e[3]=s,n}function V7(i,n){if(Mr(n,16),!L7(i))throw Error("_decryptBlock accepts result of expandKeyLE");let e=wr(n),{s0:t,s1:r,s2:o,s3:s}=h1(i,e[0],e[1],e[2],e[3]);return e[0]=t,e[1]=r,e[2]=o,e[3]=s,n}var Oj={encrypt(i,n){if(n.length>=2**32)throw Error("plaintext should be less than 4gb");let e=Ph(i);if(n.length===16)M7(e,n);else{let t=wr(n),r=t[0],o=t[1];for(let s=0,a=1;s<6;s++)for(let l=2;l<t.length;l+=2,a++){let{s0:c,s1:d,s2:h,s3:_}=jl(e,r,o,t[l],t[l+1]);r=c,o=d^Tj(a),t[l]=h,t[l+1]=_}t[0]=r,t[1]=o}e.fill(0)},decrypt(i,n){if(n.length-8>=2**32)throw Error("ciphertext should be less than 4gb");let e=fP(i),t=n.length/8-1;if(t===1)V7(e,n);else{let r=wr(n),o=r[0],s=r[1];for(let a=0,l=6*t;a<6;a++)for(let c=2*t;c>=1;c-=2,l--){s^=Tj(l);let{s0:d,s1:h,s2:_,s3:C}=h1(e,o,s,r[c],r[c+1]);o=d,s=h,r[c]=_,r[c+1]=C}r[0]=o,r[1]=s}e.fill(0)}},Rj=new Uint8Array(8).fill(166),B7=tC({blockSize:8},i=>({encrypt(n){if(!n.length||n.length%8!=0)throw Error("invalid plaintext length");if(n.length===8)throw Error("8-byte keys not allowed in AESKW, use AESKWP instead");let e=function(...t){let r=0;for(let s=0;s<t.length;s++){let a=t[s];Mr(a),r+=a.length}let o=new Uint8Array(r);for(let s=0,a=0;s<t.length;s++){let l=t[s];o.set(l,a),a+=l.length}return o}(Rj,n);return Oj.encrypt(i,e),e},decrypt(n){if(n.length%8!=0||n.length<24)throw Error("invalid ciphertext length");let e=aa(n);if(Oj.decrypt(i,e),!R7(e.subarray(0,8),Rj))throw Error("integrity check failed");return e.subarray(0,8).fill(0),e.subarray(8)}})),Pj={expandKeyLE:Ph,expandKeyDecLE:fP,encrypt:jl,decrypt:h1,encryptBlock:M7,decryptBlock:V7,ctrCounter:k7,ctr32:P0};function U7(i){return B(this,null,function*(){switch(i){case x.symmetric.aes128:case x.symmetric.aes192:case x.symmetric.aes256:throw Error("Not a legacy cipher");case x.symmetric.cast5:case x.symmetric.blowfish:case x.symmetric.twofish:case x.symmetric.tripledes:{let{legacyCiphers:n}=yield import("./chunk-7ZGBLVLI.js"),e=x.read(x.symmetric,i),t=n.get(e);if(!t)throw Error("Unsupported cipher algorithm");return t}default:throw Error("Unsupported cipher algorithm")}})}function qve(i){switch(i){case x.symmetric.aes128:case x.symmetric.aes192:case x.symmetric.aes256:case x.symmetric.twofish:return 16;case x.symmetric.blowfish:case x.symmetric.cast5:case x.symmetric.tripledes:return 8;default:throw Error("Unsupported cipher")}}function Yve(i){switch(i){case x.symmetric.aes128:case x.symmetric.blowfish:case x.symmetric.cast5:return 16;case x.symmetric.aes192:case x.symmetric.tripledes:return 24;case x.symmetric.aes256:case x.symmetric.twofish:return 32;default:throw Error("Unsupported cipher")}}function cr(i){return{keySize:Yve(i),blockSize:qve(i)}}var Gm=H.getWebCrypto();function UR(i,n,e){return B(this,null,function*(){let{keySize:t}=cr(i);if(!H.isAES(i)||n.length!==t)throw Error("Unexpected algorithm or key size");try{let r=yield Gm.importKey("raw",n,{name:"AES-KW"},!1,["wrapKey"]),o=yield Gm.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),s=yield Gm.wrapKey("raw",o,r,{name:"AES-KW"});return new Uint8Array(s)}catch(r){if(r.name!=="NotSupportedError"&&(n.length!==24||r.name!=="OperationError"))throw r;H.printDebugError("Browser did not support operation: "+r.message)}return B7(n).encrypt(e)})}function jR(i,n,e){return B(this,null,function*(){let{keySize:t}=cr(i);if(!H.isAES(i)||n.length!==t)throw Error("Unexpected algorithm or key size");let r;try{r=yield Gm.importKey("raw",n,{name:"AES-KW"},!1,["unwrapKey"])}catch(o){if(o.name!=="NotSupportedError"&&(n.length!==24||o.name!=="OperationError"))throw o;return H.printDebugError("Browser did not support operation: "+o.message),B7(n).decrypt(e)}try{let o=yield Gm.unwrapKey("raw",e,r,{name:"AES-KW"},{name:"HMAC",hash:"SHA-256"},!0,["sign"]);return new Uint8Array(yield Gm.exportKey("raw",o))}catch(o){throw o.name==="OperationError"?Error("Key Data Integrity failed"):o}})}var Dj=H.getWebCrypto();function ru(i,n,e,t,r){return B(this,null,function*(){let o=x.read(x.webHash,i);if(!o)throw Error("Hash algo not supported with HKDF");let s=yield Dj.importKey("raw",n,"HKDF",!1,["deriveBits"]),a=yield Dj.deriveBits({name:"HKDF",hash:o,salt:e,info:t},s,8*r);return new Uint8Array(a)})}var Bb={x25519:H.encodeUTF8("OpenPGP X25519"),x448:H.encodeUTF8("OpenPGP X448")};function mP(i){return B(this,null,function*(){switch(i){case x.publicKey.x25519:try{let n=H.getWebCrypto(),e=yield n.generateKey("X25519",!0,["deriveKey","deriveBits"]).catch(o=>{if(o.name==="OperationError"){let s=Error("Unexpected key generation issue");throw s.name="NotSupportedError",s}throw o}),t=yield n.exportKey("jwk",e.privateKey),r=yield n.exportKey("jwk",e.publicKey);if(t.x!==r.x){let o=Error("Unexpected mismatching public point");throw o.name="NotSupportedError",o}return{A:new Uint8Array(sa(r.x)),k:sa(t.d)}}catch(n){if(n.name!=="NotSupportedError")throw n;let e=Yo(32),{publicKey:t}=Lr.box.keyPair.fromSecretKey(e);return{A:t,k:e}}case x.publicKey.x448:{let n=yield H.getNobleCurve(x.publicKey.x448),e=n.utils.randomPrivateKey();return{A:n.getPublicKey(e),k:e}}default:throw Error("Unsupported ECDH algorithm")}})}function j7(i,n,e){return B(this,null,function*(){switch(i){case x.publicKey.x25519:{let{publicKey:t}=Lr.box.keyPair.fromSecretKey(e);return H.equalsUint8Array(n,t)}case x.publicKey.x448:{let t=(yield H.getNobleCurve(x.publicKey.x448)).getPublicKey(e);return H.equalsUint8Array(n,t)}default:return!1}})}function G7(i,n,e){return B(this,null,function*(){let{ephemeralPublicKey:t,sharedSecret:r}=yield gP(i,e),o=H.concatUint8Array([t,e,r]);switch(i){case x.publicKey.x25519:{let s=x.symmetric.aes128,{keySize:a}=cr(s),l=yield ru(x.hash.sha256,o,new Uint8Array,Bb.x25519,a);return{ephemeralPublicKey:t,wrappedKey:yield UR(s,l,n)}}case x.publicKey.x448:{let s=x.symmetric.aes256,{keySize:a}=cr(x.symmetric.aes256),l=yield ru(x.hash.sha512,o,new Uint8Array,Bb.x448,a);return{ephemeralPublicKey:t,wrappedKey:yield UR(s,l,n)}}default:throw Error("Unsupported ECDH algorithm")}})}function H7(i,n,e,t,r){return B(this,null,function*(){let o=yield _P(i,n,t,r),s=H.concatUint8Array([n,t,o]);switch(i){case x.publicKey.x25519:{let a=x.symmetric.aes128,{keySize:l}=cr(a);return jR(a,yield ru(x.hash.sha256,s,new Uint8Array,Bb.x25519,l),e)}case x.publicKey.x448:{let a=x.symmetric.aes256,{keySize:l}=cr(x.symmetric.aes256);return jR(a,yield ru(x.hash.sha512,s,new Uint8Array,Bb.x448,l),e)}default:throw Error("Unsupported ECDH algorithm")}})}function G0(i){switch(i){case x.publicKey.x25519:return 32;case x.publicKey.x448:return 56;default:throw Error("Unsupported ECDH algorithm")}}function gP(i,n){return B(this,null,function*(){switch(i){case x.publicKey.x25519:try{let e=H.getWebCrypto(),t=yield e.generateKey("X25519",!0,["deriveKey","deriveBits"]).catch(l=>{if(l.name==="OperationError"){let c=Error("Unexpected key generation issue");throw c.name="NotSupportedError",c}throw l}),r=yield e.exportKey("jwk",t.publicKey);if((yield e.exportKey("jwk",t.privateKey)).x!==r.x){let l=Error("Unexpected mismatching public point");throw l.name="NotSupportedError",l}let o=GR(i,n),s=yield e.importKey("jwk",o,"X25519",!1,[]),a=yield e.deriveBits({name:"X25519",public:s},t.privateKey,8*G0(i));return{sharedSecret:new Uint8Array(a),ephemeralPublicKey:new Uint8Array(sa(r.x))}}catch(e){if(e.name!=="NotSupportedError")throw e;let t=Yo(G0(i)),r=Lr.scalarMult(t,n);Ub(r);let{publicKey:o}=Lr.box.keyPair.fromSecretKey(t);return{ephemeralPublicKey:o,sharedSecret:r}}case x.publicKey.x448:{let e=yield H.getNobleCurve(x.publicKey.x448),t=e.utils.randomPrivateKey(),r=e.getSharedSecret(t,n);return Ub(r),{ephemeralPublicKey:e.getPublicKey(t),sharedSecret:r}}default:throw Error("Unsupported ECDH algorithm")}})}function _P(i,n,e,t){return B(this,null,function*(){switch(i){case x.publicKey.x25519:try{let r=H.getWebCrypto(),o=function(d,h,_){if(d===x.publicKey.x25519){let C=GR(d,h);return C.d=cs(_),C}throw Error("Unsupported ECDH algorithm")}(i,e,t),s=GR(i,n),a=yield r.importKey("jwk",o,"X25519",!1,["deriveKey","deriveBits"]),l=yield r.importKey("jwk",s,"X25519",!1,[]),c=yield r.deriveBits({name:"X25519",public:l},a,8*G0(i));return new Uint8Array(c)}catch(r){if(r.name!=="NotSupportedError")throw r;let o=Lr.scalarMult(t,n);return Ub(o),o}case x.publicKey.x448:{let r=(yield H.getNobleCurve(x.publicKey.x448)).getSharedSecret(t,n);return Ub(r),r}default:throw Error("Unsupported ECDH algorithm")}})}function Ub(i){let n=0;for(let e=0;e<i.length;e++)n|=i[e];if(n===0)throw Error("Unexpected low order point")}function GR(i,n){if(i===x.publicKey.x25519)return{kty:"OKP",crv:"X25519",x:cs(n),ext:!0};throw Error("Unsupported ECDH algorithm")}var Xve=Object.freeze({__proto__:null,decrypt:H7,encrypt:G7,generate:mP,generateEphemeralEncryptionMaterial:gP,getPayloadSize:G0,recomputeSharedSecret:_P,validateParams:j7}),fR=H.getWebCrypto(),jb=H.getNodeCrypto(),Pc={[x.curve.nistP256]:"P-256",[x.curve.nistP384]:"P-384",[x.curve.nistP521]:"P-521"},Dd=jb?jb.getCurves():[],Ec=jb?{[x.curve.secp256k1]:Dd.includes("secp256k1")?"secp256k1":void 0,[x.curve.nistP256]:Dd.includes("prime256v1")?"prime256v1":void 0,[x.curve.nistP384]:Dd.includes("secp384r1")?"secp384r1":void 0,[x.curve.nistP521]:Dd.includes("secp521r1")?"secp521r1":void 0,[x.curve.ed25519Legacy]:Dd.includes("ED25519")?"ED25519":void 0,[x.curve.curve25519Legacy]:Dd.includes("X25519")?"X25519":void 0,[x.curve.brainpoolP256r1]:Dd.includes("brainpoolP256r1")?"brainpoolP256r1":void 0,[x.curve.brainpoolP384r1]:Dd.includes("brainpoolP384r1")?"brainpoolP384r1":void 0,[x.curve.brainpoolP512r1]:Dd.includes("brainpoolP512r1")?"brainpoolP512r1":void 0}:{},W7={[x.curve.nistP256]:{oid:[6,8,42,134,72,206,61,3,1,7],keyType:x.publicKey.ecdsa,hash:x.hash.sha256,cipher:x.symmetric.aes128,node:Ec[x.curve.nistP256],web:Pc[x.curve.nistP256],payloadSize:32,sharedSize:256,wireFormatLeadingByte:4},[x.curve.nistP384]:{oid:[6,5,43,129,4,0,34],keyType:x.publicKey.ecdsa,hash:x.hash.sha384,cipher:x.symmetric.aes192,node:Ec[x.curve.nistP384],web:Pc[x.curve.nistP384],payloadSize:48,sharedSize:384,wireFormatLeadingByte:4},[x.curve.nistP521]:{oid:[6,5,43,129,4,0,35],keyType:x.publicKey.ecdsa,hash:x.hash.sha512,cipher:x.symmetric.aes256,node:Ec[x.curve.nistP521],web:Pc[x.curve.nistP521],payloadSize:66,sharedSize:528,wireFormatLeadingByte:4},[x.curve.secp256k1]:{oid:[6,5,43,129,4,0,10],keyType:x.publicKey.ecdsa,hash:x.hash.sha256,cipher:x.symmetric.aes128,node:Ec[x.curve.secp256k1],payloadSize:32,wireFormatLeadingByte:4},[x.curve.ed25519Legacy]:{oid:[6,9,43,6,1,4,1,218,71,15,1],keyType:x.publicKey.eddsaLegacy,hash:x.hash.sha512,node:!1,payloadSize:32,wireFormatLeadingByte:64},[x.curve.curve25519Legacy]:{oid:[6,10,43,6,1,4,1,151,85,1,5,1],keyType:x.publicKey.ecdh,hash:x.hash.sha256,cipher:x.symmetric.aes128,node:!1,payloadSize:32,wireFormatLeadingByte:64},[x.curve.brainpoolP256r1]:{oid:[6,9,43,36,3,3,2,8,1,1,7],keyType:x.publicKey.ecdsa,hash:x.hash.sha256,cipher:x.symmetric.aes128,node:Ec[x.curve.brainpoolP256r1],payloadSize:32,wireFormatLeadingByte:4},[x.curve.brainpoolP384r1]:{oid:[6,9,43,36,3,3,2,8,1,1,11],keyType:x.publicKey.ecdsa,hash:x.hash.sha384,cipher:x.symmetric.aes192,node:Ec[x.curve.brainpoolP384r1],payloadSize:48,wireFormatLeadingByte:4},[x.curve.brainpoolP512r1]:{oid:[6,9,43,36,3,3,2,8,1,1,13],keyType:x.publicKey.ecdsa,hash:x.hash.sha512,cipher:x.symmetric.aes256,node:Ec[x.curve.brainpoolP512r1],payloadSize:64,wireFormatLeadingByte:4}},pa=class{constructor(n){try{this.name=n instanceof Ld?n.getName():x.write(x.curve,n)}catch{throw new jn("Unknown curve")}let e=W7[this.name];this.keyType=e.keyType,this.oid=e.oid,this.hash=e.hash,this.cipher=e.cipher,this.node=e.node,this.web=e.web,this.payloadSize=e.payloadSize,this.sharedSize=e.sharedSize,this.wireFormatLeadingByte=e.wireFormatLeadingByte,this.web&&H.getWebCrypto()?this.type="web":this.node&&H.getNodeCrypto()?this.type="node":this.name===x.curve.curve25519Legacy?this.type="curve25519Legacy":this.name===x.curve.ed25519Legacy&&(this.type="ed25519Legacy")}genKeyPair(){return B(this,null,function*(){switch(this.type){case"web":try{return yield function(n,e){return B(this,null,function*(){let t=yield fR.generateKey({name:"ECDSA",namedCurve:Pc[n]},!0,["sign","verify"]),r=yield fR.exportKey("jwk",t.privateKey);return{publicKey:$7(yield fR.exportKey("jwk",t.publicKey),e),privateKey:sa(r.d)}})}(this.name,this.wireFormatLeadingByte)}catch(n){return H.printDebugError("Browser did not support generating ec key "+n.message),Fj(this.name)}case"node":return function(n){return B(this,null,function*(){let e=jb.createECDH(Ec[n]);return yield e.generateKeys(),{publicKey:new Uint8Array(e.getPublicKey()),privateKey:new Uint8Array(e.getPrivateKey())}})}(this.name);case"curve25519Legacy":{let{k:n,A:e}=yield mP(x.publicKey.x25519),t=n.slice().reverse();return t[0]=127&t[0]|64,t[31]&=248,{publicKey:H.concatUint8Array([new Uint8Array([this.wireFormatLeadingByte]),e]),privateKey:t}}case"ed25519Legacy":{let{seed:n,A:e}=yield aP(x.publicKey.ed25519);return{publicKey:H.concatUint8Array([new Uint8Array([this.wireFormatLeadingByte]),e]),privateKey:n}}default:return Fj(this.name)}})}};function Eb(i){return B(this,null,function*(){let n=new pa(i),{oid:e,hash:t,cipher:r}=n,o=yield n.genKeyPair();return{oid:e,Q:o.publicKey,secret:H.leftPad(o.privateKey,n.payloadSize),hash:t,cipher:r}})}function z7(i){return W7[i.getName()].hash}function K7(i,n,e,t){return B(this,null,function*(){let r={[x.curve.nistP256]:!0,[x.curve.nistP384]:!0,[x.curve.nistP521]:!0,[x.curve.secp256k1]:!0,[x.curve.curve25519Legacy]:i===x.publicKey.ecdh,[x.curve.brainpoolP256r1]:!0,[x.curve.brainpoolP384r1]:!0,[x.curve.brainpoolP512r1]:!0},o=n.getName();if(!r[o])return!1;if(o===x.curve.curve25519Legacy){t=t.slice().reverse();let{publicKey:a}=Lr.box.keyPair.fromSecretKey(t);e=new Uint8Array(e);let l=new Uint8Array([64,...a]);return!!H.equalsUint8Array(l,e)}let s=(yield H.getNobleCurve(x.publicKey.ecdsa,o)).getPublicKey(t,!1);return!!H.equalsUint8Array(s,e)})}function Oh(i,n){let{payloadSize:e,wireFormatLeadingByte:t,name:r}=i,o=r===x.curve.curve25519Legacy||r===x.curve.ed25519Legacy?e:2*e;if(n[0]!==t||n.length!==o+1)throw Error("Invalid point encoding")}function Fj(i){return B(this,null,function*(){let n=yield H.getNobleCurve(x.publicKey.ecdsa,i),e=n.utils.randomPrivateKey();return{publicKey:n.getPublicKey(e,!1),privateKey:e}})}function $7(i,n){let e=sa(i.x),t=sa(i.y),r=new Uint8Array(e.length+t.length+1);return r[0]=n,r.set(e,1),r.set(t,e.length+1),r}function f1(i,n,e){let t=i,r=e.slice(1,t+1),o=e.slice(t+1,2*t+1);return{kty:"EC",crv:n,x:cs(r),y:cs(o),ext:!0}}function J7(i,n,e,t){let r=f1(i,n,e);return r.d=cs(t),r}var Gb=H.getWebCrypto(),q7=H.getNodeCrypto();function HR(i,n,e,t,r,o){return B(this,null,function*(){let s=new pa(i);if(Oh(s,t),e&&!H.isStream(e)){let l={publicKey:t,privateKey:r};switch(s.type){case"web":try{return yield function(c,d,h,_){return B(this,null,function*(){let C=c.payloadSize,I=J7(c.payloadSize,Pc[c.name],_.publicKey,_.privateKey),b=yield Gb.importKey("jwk",I,{name:"ECDSA",namedCurve:Pc[c.name],hash:{name:x.read(x.webHash,c.hash)}},!1,["sign"]),E=new Uint8Array(yield Gb.sign({name:"ECDSA",namedCurve:Pc[c.name],hash:{name:x.read(x.webHash,d)}},b,h));return{r:E.slice(0,C),s:E.slice(C,C<<1)}})}(s,n,e,l)}catch(c){if(s.name!=="nistP521"&&(c.name==="DataError"||c.name==="OperationError"))throw c;H.printDebugError("Browser did not support signing: "+c.message)}break;case"node":return function(c,d,h,_){return B(this,null,function*(){let C=H.nodeRequire("eckey-utils"),I=H.getNodeBuffer(),{privateKey:b}=C.generateDer({curveName:Ec[c.name],privateKey:I.from(_)}),E=q7.createSign(x.read(x.hash,d));E.write(h),E.end();let R=new Uint8Array(E.sign({key:b,format:"der",type:"sec1",dsaEncoding:"ieee-p1363"})),T=c.payloadSize;return{r:R.subarray(0,T),s:R.subarray(T,T<<1)}})}(s,n,e,r)}}let a=(yield H.getNobleCurve(x.publicKey.ecdsa,s.name)).sign(o,r,{lowS:!1});return{r:po(a.r,"be",s.payloadSize),s:po(a.s,"be",s.payloadSize)}})}function WR(i,n,e,t,r,o){return B(this,null,function*(){let s=new pa(i);Oh(s,r);let a=()=>B(this,null,function*(){return o[0]===0&&kj(s,e,o.subarray(1),r)});if(t&&!H.isStream(t))switch(s.type){case"web":try{return(yield function(b,E,R,T,A){return B(this,arguments,function*(c,d,{r:h,s:_},C,I){let U=f1(c.payloadSize,Pc[c.name],I),z=yield Gb.importKey("jwk",U,{name:"ECDSA",namedCurve:Pc[c.name],hash:{name:x.read(x.webHash,c.hash)}},!1,["verify"]),ee=H.concatUint8Array([h,_]).buffer;return Gb.verify({name:"ECDSA",namedCurve:Pc[c.name],hash:{name:x.read(x.webHash,d)}},z,ee,C)})}(s,n,e,t,r))||a()}catch(l){if(s.name!=="nistP521"&&(l.name==="DataError"||l.name==="OperationError"))throw l;H.printDebugError("Browser did not support verifying: "+l.message)}break;case"node":return(yield function(b,E,R,T,A){return B(this,arguments,function*(c,d,{r:h,s:_},C,I){let U=H.nodeRequire("eckey-utils"),z=H.getNodeBuffer(),{publicKey:ee}=U.generateDer({curveName:Ec[c.name],publicKey:z.from(I)}),re=q7.createVerify(x.read(x.hash,d));re.write(C),re.end();let Z=H.concatUint8Array([h,_]);try{return re.verify({key:ee,format:"der",type:"spki",dsaEncoding:"ieee-p1363"},Z)}catch{return!1}})}(s,n,e,t,r))||a()}return(yield kj(s,e,o,r))||a()})}function kj(i,n,e,t){return B(this,null,function*(){return(yield H.getNobleCurve(x.publicKey.ecdsa,i.name)).verify(H.concatUint8Array([n.r,n.s]),e,t,{lowS:!1})})}var Qve=Object.freeze({__proto__:null,sign:HR,validateParams:function(i,n,e){return B(this,null,function*(){let t=new pa(i);if(t.keyType!==x.publicKey.ecdsa)return!1;switch(t.type){case"web":case"node":{let r=Yo(8),o=x.hash.sha256,s=yield kc(o,r);try{let a=yield HR(i,o,r,n,e,s);return yield WR(i,o,a,r,n,s)}catch{return!1}}default:return K7(x.publicKey.ecdsa,i,n,e)}})},verify:WR});function Y7(i,n,e,t,r,o){return B(this,null,function*(){if(Oh(new pa(i),t),Do(n)<Do(x.hash.sha256))throw Error("Hash algorithm too weak for EdDSA.");let{RS:s}=yield lP(x.publicKey.ed25519,n,0,t.subarray(1),r,o);return{r:s.subarray(0,32),s:s.subarray(32)}})}function X7(a,l,c,d,h,_){return B(this,arguments,function*(i,n,{r:e,s:t},r,o,s){if(Oh(new pa(i),o),Do(n)<Do(x.hash.sha256))throw Error("Hash algorithm too weak for EdDSA.");let C=H.concatUint8Array([e,t]);return cP(x.publicKey.ed25519,n,{RS:C},0,o.subarray(1),s)})}function Q7(i,n,e){return B(this,null,function*(){if(i.getName()!==x.curve.ed25519Legacy)return!1;let{publicKey:t}=Lr.sign.keyPair.fromSeed(e),r=new Uint8Array([64,...t]);return H.equalsUint8Array(n,r)})}var Zve=Object.freeze({__proto__:null,sign:Y7,validateParams:Q7,verify:X7});function ebe(i){let n=i.length;if(n>0){let e=i[n-1];if(e>=1){let t=i.subarray(n-e),r=new Uint8Array(e).fill(e);if(H.equalsUint8Array(t,r))return i.subarray(0,n-e)}}throw Error("Invalid padding")}var tu=H.getWebCrypto(),Z7=H.getNodeCrypto();function e9(i,n,e,t){return H.concatUint8Array([n.write(),new Uint8Array([i]),e.write(),H.stringToUint8Array("Anonymous Sender    "),t])}function t9(i,n,e,t,r=!1,o=!1){return B(this,null,function*(){let s;if(r){for(s=0;s<n.length&&n[s]===0;s++);n=n.subarray(s)}if(o){for(s=n.length-1;s>=0&&n[s]===0;s--);n=n.subarray(0,s+1)}return(yield kc(i,H.concatUint8Array([new Uint8Array([0,0,0,1]),n,t]))).subarray(0,e)})}function tbe(i,n){return B(this,null,function*(){switch(i.type){case"curve25519Legacy":{let{sharedSecret:e,ephemeralPublicKey:t}=yield gP(x.publicKey.x25519,n.subarray(1));return{publicKey:H.concatUint8Array([new Uint8Array([i.wireFormatLeadingByte]),t]),sharedKey:e}}case"web":if(i.web&&H.getWebCrypto())try{return yield function(e,t){return B(this,null,function*(){let r=f1(e.payloadSize,e.web,t),o=tu.generateKey({name:"ECDH",namedCurve:e.web},!0,["deriveKey","deriveBits"]),s=tu.importKey("jwk",r,{name:"ECDH",namedCurve:e.web},!1,[]);[o,s]=yield Promise.all([o,s]);let a=tu.deriveBits({name:"ECDH",namedCurve:e.web,public:s},o.privateKey,e.sharedSize),l=tu.exportKey("jwk",o.publicKey);[a,l]=yield Promise.all([a,l]);let c=new Uint8Array(a);return{publicKey:new Uint8Array($7(l,e.wireFormatLeadingByte)),sharedKey:c}})}(i,n)}catch(e){return H.printDebugError(e),Lj(i,n)}break;case"node":return function(e,t){return B(this,null,function*(){let r=Z7.createECDH(e.node);r.generateKeys();let o=new Uint8Array(r.computeSecret(t));return{publicKey:new Uint8Array(r.getPublicKey()),sharedKey:o}})}(i,n);default:return Lj(i,n)}})}function i9(i,n,e,t,r){return B(this,null,function*(){let o=function(_){let C=8-_.length%8,I=new Uint8Array(_.length+C).fill(C);return I.set(_),I}(e),s=new pa(i);Oh(s,t);let{publicKey:a,sharedKey:l}=yield tbe(s,t),c=e9(x.publicKey.ecdh,i,n,r),{keySize:d}=cr(n.cipher),h=yield t9(n.hash,l,d,c);return{publicKey:a,wrappedKey:yield UR(n.cipher,h,o)}})}function ibe(i,n,e,t){return B(this,null,function*(){if(t.length!==i.payloadSize){let r=new Uint8Array(i.payloadSize);r.set(t,i.payloadSize-t.length),t=r}switch(i.type){case"curve25519Legacy":{let r=t.slice().reverse();return{secretKey:r,sharedKey:yield _P(x.publicKey.x25519,n.subarray(1),e.subarray(1),r)}}case"web":if(i.web&&H.getWebCrypto())try{return yield function(r,o,s,a){return B(this,null,function*(){let l=J7(r.payloadSize,r.web,s,a),c=tu.importKey("jwk",l,{name:"ECDH",namedCurve:r.web},!0,["deriveKey","deriveBits"]),d=f1(r.payloadSize,r.web,o),h=tu.importKey("jwk",d,{name:"ECDH",namedCurve:r.web},!0,[]);[c,h]=yield Promise.all([c,h]);let _=tu.deriveBits({name:"ECDH",namedCurve:r.web,public:h},c,r.sharedSize),C=tu.exportKey("jwk",c);[_,C]=yield Promise.all([_,C]);let I=new Uint8Array(_);return{secretKey:sa(C.d),sharedKey:I}})}(i,n,e,t)}catch(r){return H.printDebugError(r),Nj(i,n,t)}break;case"node":return function(r,o,s){return B(this,null,function*(){let a=Z7.createECDH(r.node);a.setPrivateKey(s);let l=new Uint8Array(a.computeSecret(o));return{secretKey:new Uint8Array(a.getPrivateKey()),sharedKey:l}})}(i,n,t);default:return Nj(i,n,t)}})}function n9(i,n,e,t,r,o,s){return B(this,null,function*(){let a=new pa(i);Oh(a,r),Oh(a,e);let{sharedKey:l}=yield ibe(a,e,r,o),c=e9(x.publicKey.ecdh,i,n,s),{keySize:d}=cr(n.cipher),h;for(let _=0;_<3;_++)try{let C=yield t9(n.hash,l,d,c,_===1,_===2);return ebe(yield jR(n.cipher,C,t))}catch(C){h=C}throw h})}function Nj(i,n,e){return B(this,null,function*(){return{secretKey:e,sharedKey:(yield H.getNobleCurve(x.publicKey.ecdh,i.name)).getSharedSecret(e,n).subarray(1)}})}function Lj(i,n){return B(this,null,function*(){let e=yield H.getNobleCurve(x.publicKey.ecdh,i.name),{publicKey:t,privateKey:r}=yield i.genKeyPair();return{publicKey:t,sharedKey:e.getSharedSecret(r,n).subarray(1)}})}var nbe=Object.freeze({__proto__:null,CurveWithOID:pa,ecdh:Object.freeze({__proto__:null,decrypt:n9,encrypt:i9,validateParams:function(i,n,e){return B(this,null,function*(){return K7(x.publicKey.ecdh,i,n,e)})}}),ecdhX:Xve,ecdsa:Qve,eddsa:Hve,eddsaLegacy:Zve,generate:Eb,getPreferredHashAlgo:z7}),Ab=BigInt(0),D0=BigInt(1),Hb=class{constructor(n){n&&(this.data=n)}read(n){if(n.length>=1){let e=n[0];if(n.length>=1+e)return this.data=n.subarray(1,1+e),1+this.data.length}throw Error("Invalid symmetric key")}write(){return H.concatUint8Array([new Uint8Array([this.data.length]),this.data])}},Wb=class{constructor(n){if(n){let{hash:e,cipher:t}=n;this.hash=e,this.cipher=t}else this.hash=null,this.cipher=null}read(n){if(n.length<4||n[0]!==3||n[1]!==1)throw new jn("Cannot read KDFParams");return this.hash=n[2],this.cipher=n[3],4}write(){return new Uint8Array([3,1,this.hash,this.cipher])}},zb=class i{static fromObject({wrappedKey:n,algorithm:e}){let t=new i;return t.wrappedKey=n,t.algorithm=e,t}read(n){let e=0,t=n[e++];this.algorithm=t%2?n[e++]:null,t-=t%2,this.wrappedKey=H.readExactSubarray(n,e,e+t),e+=t}write(){return H.concatUint8Array([this.algorithm?new Uint8Array([this.wrappedKey.length+1,this.algorithm]):new Uint8Array([this.wrappedKey.length]),this.wrappedKey])}};function rbe(i,n,e,t,r){return B(this,null,function*(){switch(i){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:{let{n:o,e:s}=e;return{c:yield Dve(t,o,s)}}case x.publicKey.elgamal:{let{p:o,g:s,y:a}=e;return function(l,c,d,h){return B(this,null,function*(){c=di(c),d=di(d),h=di(h);let _=di(h7(l,ca(c))),C=iu(Xp,c-Xp);return{c1:po(qo(d,C,c)),c2:po(yn(qo(h,C,c)*_,c))}})}(t,o,s,a)}case x.publicKey.ecdh:{let{oid:o,Q:s,kdfParams:a}=e,{publicKey:l,wrappedKey:c}=yield i9(o,a,t,s,r);return{V:l,C:new Hb(c)}}case x.publicKey.x25519:case x.publicKey.x448:{if(n&&!H.isAES(n))throw Error("X25519 and X448 keys can only encrypt AES session keys");let{A:o}=e,{ephemeralPublicKey:s,wrappedKey:a}=yield G7(i,t,o);return{ephemeralPublicKey:s,C:zb.fromObject({algorithm:n,wrappedKey:a})}}default:return[]}})}function obe(i,n,e,t,r,o){return B(this,null,function*(){switch(i){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:{let{c:s}=t,{n:a,e:l}=n,{d:c,p:d,q:h,u:_}=e;return Fve(s,a,l,c,d,h,_,o)}case x.publicKey.elgamal:{let{c1:s,c2:a}=t;return function(l,c,d,h,_){return B(this,null,function*(){return l=di(l),c=di(c),d=di(d),f7(po(yn(Hm(qo(l,h=di(h),d),d)*c,d),"be",ca(d)),_)})}(s,a,n.p,e.x,o)}case x.publicKey.ecdh:{let{oid:s,Q:a,kdfParams:l}=n,{d:c}=e,{V:d,C:h}=t;return n9(s,l,d,h.data,a,c,r)}case x.publicKey.x25519:case x.publicKey.x448:{let{A:s}=n,{k:a}=e,{ephemeralPublicKey:l,C:c}=t;if(c.algorithm!==null&&!H.isAES(c.algorithm))throw Error("AES session key expected");return H7(i,l,c.wrappedKey,s,a)}default:throw Error("Unknown public key encryption algorithm.")}})}function Mj(i,n,e){let t=0;switch(i){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:{let r=H.readMPI(n.subarray(t));t+=r.length+2;let o=H.readMPI(n.subarray(t));t+=o.length+2;let s=H.readMPI(n.subarray(t));t+=s.length+2;let a=H.readMPI(n.subarray(t));return t+=a.length+2,{read:t,privateParams:{d:r,p:o,q:s,u:a}}}case x.publicKey.dsa:case x.publicKey.elgamal:{let r=H.readMPI(n.subarray(t));return t+=r.length+2,{read:t,privateParams:{x:r}}}case x.publicKey.ecdsa:case x.publicKey.ecdh:{let r=Mm(i,e.oid),o=H.readMPI(n.subarray(t));return t+=o.length+2,o=H.leftPad(o,r),{read:t,privateParams:{d:o}}}case x.publicKey.eddsaLegacy:{let r=Mm(i,e.oid);if(e.oid.getName()!==x.curve.ed25519Legacy)throw Error("Unexpected OID for eddsaLegacy");let o=H.readMPI(n.subarray(t));return t+=o.length+2,o=H.leftPad(o,r),{read:t,privateParams:{seed:o}}}case x.publicKey.ed25519:case x.publicKey.ed448:{let r=Mm(i),o=H.readExactSubarray(n,t,t+r);return t+=o.length,{read:t,privateParams:{seed:o}}}case x.publicKey.x25519:case x.publicKey.x448:{let r=Mm(i),o=H.readExactSubarray(n,t,t+r);return t+=o.length,{read:t,privateParams:{k:o}}}default:throw new jn("Unknown public key encryption algorithm.")}}function zm(i,n){let e=new Set([x.publicKey.ed25519,x.publicKey.x25519,x.publicKey.ed448,x.publicKey.x448]),t=Object.keys(n).map(r=>{let o=n[r];return H.isUint8Array(o)?e.has(i)?o:H.uint8ArrayToMPI(o):o.write()});return H.concatUint8Array(t)}function sbe(i,n,e){switch(i){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:return function(t,r){return B(this,null,function*(){if(r=BigInt(r),H.getWebCrypto()){let c={name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:po(r),hash:{name:"SHA-1"}},d=yield Wm.generateKey(c,!0,["sign","verify"]);return gj(yield Wm.exportKey("jwk",d.privateKey),r)}if(H.getNodeCrypto()){let c={modulusLength:t,publicExponent:xR(r),publicKeyEncoding:{type:"pkcs1",format:"jwk"},privateKeyEncoding:{type:"pkcs1",format:"jwk"}},d=yield new Promise((h,_)=>{Th.generateKeyPair("rsa",c,(C,I,b)=>{C?_(C):h(b)})});return gj(d,r)}let o,s,a;do s=fj(t-(t>>1),r,40),o=fj(t>>1,r,40),a=o*s;while(Um(a)!==t);let l=(o-nu)*(s-nu);return s<o&&([o,s]=[s,o]),{n:po(a),e:po(r),d:po(Hm(r,l)),p:po(o),q:po(s),u:po(Hm(o,s))}})}(n,65537).then(({n:t,e:r,d:o,p:s,q:a,u:l})=>({privateParams:{d:o,p:s,q:a,u:l},publicParams:{n:t,e:r}}));case x.publicKey.ecdsa:return Eb(e).then(({oid:t,Q:r,secret:o})=>({privateParams:{d:o},publicParams:{oid:new Ld(t),Q:r}}));case x.publicKey.eddsaLegacy:return Eb(e).then(({oid:t,Q:r,secret:o})=>({privateParams:{seed:o},publicParams:{oid:new Ld(t),Q:r}}));case x.publicKey.ecdh:return Eb(e).then(({oid:t,Q:r,secret:o,hash:s,cipher:a})=>({privateParams:{d:o},publicParams:{oid:new Ld(t),Q:r,kdfParams:new Wb({hash:s,cipher:a})}}));case x.publicKey.ed25519:case x.publicKey.ed448:return aP(i).then(({A:t,seed:r})=>({privateParams:{seed:r},publicParams:{A:t}}));case x.publicKey.x25519:case x.publicKey.x448:return mP(i).then(({A:t,k:r})=>({privateParams:{k:r},publicParams:{A:t}}));case x.publicKey.dsa:case x.publicKey.elgamal:throw Error("Unsupported algorithm for key generation.");default:throw Error("Unknown public key algorithm.")}}function abe(i,n,e){return B(this,null,function*(){if(!n||!e)throw Error("Missing key parameters");switch(i){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:{let{n:t,e:r}=n,{d:o,p:s,q:a,u:l}=e;return function(c,d,h,_,C,I){return B(this,null,function*(){if(c=di(c),(_=di(_))*(C=di(C))!==c)return!1;let b=BigInt(2);if(yn(_*(I=di(I)),C)!==BigInt(1))return!1;d=di(d),h=di(h);let E=iu(b,b<<BigInt(Math.floor(Um(c)/3))),R=E*h*d;return!(yn(R,_-nu)!==E||yn(R,C-nu)!==E)})}(t,r,o,s,a,l)}case x.publicKey.dsa:{let{p:t,q:r,g:o,y:s}=n,{x:a}=e;return function(l,c,d,h,_){return B(this,null,function*(){if(l=di(l),c=di(c),d=di(d),h=di(h),d<=D0||d>=l||yn(l-D0,c)!==Ab||qo(d,c,l)!==D0)return!1;let C=BigInt(Um(c));if(C<BigInt(150)||!u7(c,null,32))return!1;_=di(_);let I=BigInt(2);return h===qo(d,c*iu(I<<C-D0,I<<C)+_,l)})}(t,r,o,s,a)}case x.publicKey.elgamal:{let{p:t,g:r,y:o}=n,{x:s}=e;return function(a,l,c,d){return B(this,null,function*(){if(a=di(a),l=di(l),c=di(c),l<=Xp||l>=a)return!1;let h=BigInt(Um(a));if(h<BigInt(1023)||qo(l,a-Xp,a)!==Xp)return!1;let _=l,C=BigInt(1),I=BigInt(2),b=I<<BigInt(17);for(;C<b;){if(_=yn(_*l,a),_===Xp)return!1;C++}d=di(d);let E=iu(I<<h-Xp,I<<h);return c===qo(l,(a-Xp)*E+d,a)})}(t,r,o,s)}case x.publicKey.ecdsa:case x.publicKey.ecdh:{let t=nbe[x.read(x.publicKey,i)],{oid:r,Q:o}=n,{d:s}=e;return t.validateParams(r,o,s)}case x.publicKey.eddsaLegacy:{let{Q:t,oid:r}=n,{seed:o}=e;return Q7(r,t,o)}case x.publicKey.ed25519:case x.publicKey.ed448:{let{A:t}=n,{seed:r}=e;return E7(i,t,r)}case x.publicKey.x25519:case x.publicKey.x448:{let{A:t}=n,{k:r}=e;return j7(i,t,r)}default:throw Error("Unknown public key algorithm.")}})}function zR(i){let{keySize:n}=cr(i);return Yo(n)}function mR(i){try{i.getName()}catch{throw new jn("Unknown curve OID")}}function Mm(i,n){switch(i){case x.publicKey.ecdsa:case x.publicKey.ecdh:case x.publicKey.eddsaLegacy:return new pa(n).payloadSize;case x.publicKey.ed25519:case x.publicKey.ed448:return d1(i);case x.publicKey.x25519:case x.publicKey.x448:return G0(i);default:throw Error("Unknown elliptic algo")}}var xb=H.getWebCrypto(),H0=H.getNodeCrypto(),bh=H0?H0.getCiphers():[],Kb={idea:bh.includes("idea-cfb")?"idea-cfb":void 0,tripledes:bh.includes("des-ede3-cfb")?"des-ede3-cfb":void 0,cast5:bh.includes("cast5-cfb")?"cast5-cfb":void 0,blowfish:bh.includes("bf-cfb")?"bf-cfb":void 0,aes128:bh.includes("aes-128-cfb")?"aes-128-cfb":void 0,aes192:bh.includes("aes-192-cfb")?"aes-192-cfb":void 0,aes256:bh.includes("aes-256-cfb")?"aes-256-cfb":void 0};function r9(i){return B(this,null,function*(){let{blockSize:n}=cr(i),e=yield Yo(n),t=new Uint8Array([e[e.length-2],e[e.length-1]]);return H.concat([e,t])})}function W0(i,n,e,t,r){return B(this,null,function*(){let o=x.read(x.symmetric,i);if(H.getNodeCrypto()&&Kb[o])return function(h,_,C,I){let b=x.read(x.symmetric,h),E=new H0.createCipheriv(Kb[b],_,I);return io(C,R=>new Uint8Array(E.update(R)))}(i,n,e,t);if(H.isAES(i))return function(h,_,C,I){return B(this,null,function*(){if(xb&&(yield $b.isSupported(h))){let b=new $b(h,_,I);return H.isStream(C)?io(C,E=>b.encryptChunk(E),()=>b.finish()):b.encrypt(C)}if(H.isStream(C)){let b=new Jb(!0,h,_,I);return io(C,E=>b.processChunk(E),()=>b.finish())}return N7(_,I).encrypt(C)})}(i,n,e,t);let s=new(yield U7(i))(n),a=s.blockSize,l=t.slice(),c=new Uint8Array,d=h=>{h&&(c=H.concatUint8Array([c,h]));let _=new Uint8Array(c.length),C,I=0;for(;h?c.length>=a:c.length;){let b=s.encrypt(l);for(C=0;C<a;C++)l[C]=c[C]^b[C],_[I++]=l[C];c=c.subarray(a)}return _.subarray(0,I)};return io(e,d,d)})}function m1(i,n,e,t){return B(this,null,function*(){let r=x.read(x.symmetric,i);if(H0&&Kb[r])return function(d,h,_,C){let I=x.read(x.symmetric,d),b=new H0.createDecipheriv(Kb[I],h,C);return io(_,E=>new Uint8Array(b.update(E)))}(i,n,e,t);if(H.isAES(i))return function(d,h,_,C){return B(this,null,function*(){if(H.isStream(_)){let I=new Jb(!1,d,h,C);return io(_,b=>I.processChunk(b),()=>I.finish())}return N7(h,C).decrypt(_)})}(i,n,e,t);let o=new(yield U7(i))(n),s=o.blockSize,a=t,l=new Uint8Array,c=d=>{d&&(l=H.concatUint8Array([l,d]));let h=new Uint8Array(l.length),_,C=0;for(;d?l.length>=s:l.length;){let I=o.encrypt(a);for(a=l.subarray(0,s),_=0;_<s;_++)h[C++]=a[_]^I[_];l=l.subarray(s)}return h.subarray(0,C)};return io(e,c,c)})}var $b=class{constructor(n,e,t){let{blockSize:r}=cr(n);this.key=e,this.prevBlock=t,this.nextBlock=new Uint8Array(r),this.i=0,this.blockSize=r,this.zeroBlock=new Uint8Array(this.blockSize)}static isSupported(n){return B(this,null,function*(){let{keySize:e}=cr(n);return xb.importKey("raw",new Uint8Array(e),"aes-cbc",!1,["encrypt"]).then(()=>!0,()=>!1)})}_runCBC(n,e){return B(this,null,function*(){let t="AES-CBC";this.keyRef=this.keyRef||(yield xb.importKey("raw",this.key,t,!1,["encrypt"]));let r=yield xb.encrypt({name:t,iv:e||this.zeroBlock},this.keyRef,n);return new Uint8Array(r).subarray(0,n.length)})}encryptChunk(n){return B(this,null,function*(){let e=this.nextBlock.length-this.i,t=n.subarray(0,e);if(this.nextBlock.set(t,this.i),this.i+n.length>=2*this.blockSize){let o=(n.length-e)%this.blockSize,s=H.concatUint8Array([this.nextBlock,n.subarray(e,n.length-o)]),a=H.concatUint8Array([this.prevBlock,s.subarray(0,s.length-this.blockSize)]),l=yield this._runCBC(a);return wb(l,s),this.prevBlock=l.slice(-this.blockSize),o>0&&this.nextBlock.set(n.subarray(-o)),this.i=o,l}let r;if(this.i+=t.length,this.i===this.nextBlock.length){let o=this.nextBlock;r=yield this._runCBC(this.prevBlock),wb(r,o),this.prevBlock=r.slice(),this.i=0;let s=n.subarray(t.length);this.nextBlock.set(s,this.i),this.i+=s.length}else r=new Uint8Array;return r})}finish(){return B(this,null,function*(){let n;if(this.i===0)n=new Uint8Array;else{this.nextBlock=this.nextBlock.subarray(0,this.i);let e=this.nextBlock,t=yield this._runCBC(this.prevBlock);wb(t,e),n=t.subarray(0,e.length)}return this.clearSensitiveData(),n})}clearSensitiveData(){this.nextBlock.fill(0),this.prevBlock.fill(0),this.keyRef=null,this.key=null}encrypt(n){return B(this,null,function*(){let e=(yield this._runCBC(H.concatUint8Array([new Uint8Array(this.blockSize),n]),this.iv)).subarray(0,n.length);return wb(e,n),this.clearSensitiveData(),e})}},Jb=class{constructor(n,e,t,r){this.forEncryption=n;let{blockSize:o}=cr(e);this.key=Pj.expandKeyLE(t),r.byteOffset%4!=0&&(r=r.slice()),this.prevBlock=gR(r),this.nextBlock=new Uint8Array(o),this.i=0,this.blockSize=o}_runCFB(n){let e=gR(n),t=new Uint8Array(n.length),r=gR(t);for(let o=0;o+4<=r.length;o+=4){let{s0:s,s1:a,s2:l,s3:c}=Pj.encrypt(this.key,this.prevBlock[0],this.prevBlock[1],this.prevBlock[2],this.prevBlock[3]);r[o+0]=e[o+0]^s,r[o+1]=e[o+1]^a,r[o+2]=e[o+2]^l,r[o+3]=e[o+3]^c,this.prevBlock=(this.forEncryption?r:e).slice(o,o+4)}return t}processChunk(n){return B(this,null,function*(){let e=this.nextBlock.length-this.i,t=n.subarray(0,e);if(this.nextBlock.set(t,this.i),this.i+n.length>=2*this.blockSize){let o=(n.length-e)%this.blockSize,s=H.concatUint8Array([this.nextBlock,n.subarray(e,n.length-o)]),a=this._runCFB(s);return o>0&&this.nextBlock.set(n.subarray(-o)),this.i=o,a}let r;if(this.i+=t.length,this.i===this.nextBlock.length){r=this._runCFB(this.nextBlock),this.i=0;let o=n.subarray(t.length);this.nextBlock.set(o,this.i),this.i+=o.length}else r=new Uint8Array;return r})}finish(){return B(this,null,function*(){let n;return this.i===0?n=new Uint8Array:n=this._runCFB(this.nextBlock).subarray(0,this.i),this.clearSensitiveData(),n})}clearSensitiveData(){this.nextBlock.fill(0),this.prevBlock.fill(0),this.key.fill(0)}};function wb(i,n){let e=Math.min(i.length,n.length);for(let t=0;t<e;t++)i[t]=i[t]^n[t]}var gR=i=>new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)),Vj=H.getWebCrypto(),lbe=H.getNodeCrypto(),Sh=16;function Bj(i,n){let e=i.length-Sh;for(let t=0;t<Sh;t++)i[t+e]^=n[t];return i}var Tb=new Uint8Array(Sh);function cbe(i){return B(this,null,function*(){let n=yield dbe(i),e=H.double(yield n(Tb)),t=H.double(e);return function(r){return B(this,null,function*(){return(yield n(function(o,s,a){if(o.length&&o.length%Sh==0)return Bj(o,s);let l=new Uint8Array(o.length+(Sh-o.length%Sh));return l.set(o),l[o.length]=128,Bj(l,a)}(r,e,t))).subarray(-16)})}})}function dbe(i){return B(this,null,function*(){if(H.getNodeCrypto())return function(n){return B(this,null,function*(){let e=new lbe.createCipheriv("aes-"+8*i.length+"-cbc",i,Tb).update(n);return new Uint8Array(e)})};if(H.getWebCrypto())try{return i=yield Vj.importKey("raw",i,{name:"AES-CBC",length:8*i.length},!1,["encrypt"]),function(n){return B(this,null,function*(){let e=yield Vj.encrypt({name:"AES-CBC",iv:Tb,length:128},i,n);return new Uint8Array(e).subarray(0,e.byteLength-Sh)})}}catch(n){if(n.name!=="NotSupportedError"&&(i.length!==24||n.name!=="OperationError"))throw n;H.printDebugError("Browser did not support operation: "+n.message)}return function(n){return B(this,null,function*(){return BR(i,Tb,{disablePadding:!0}).encrypt(n)})}})}var Uj=H.getWebCrypto(),pbe=H.getNodeCrypto(),ube=H.getNodeBuffer(),g1=16,jj=new Uint8Array(g1),KR=new Uint8Array(g1);KR[15]=1;var $R=new Uint8Array(g1);function hbe(i){return B(this,null,function*(){let n=yield cbe(i);return function(e,t){return n(H.concatUint8Array([e,t]))}})}function fbe(i){return B(this,null,function*(){if(H.getNodeCrypto())return function(n,e){return B(this,null,function*(){let t=new pbe.createCipheriv("aes-"+8*i.length+"-ctr",i,e),r=ube.concat([t.update(n),t.final()]);return new Uint8Array(r)})};if(H.getWebCrypto())try{let n=yield Uj.importKey("raw",i,{name:"AES-CTR",length:8*i.length},!1,["encrypt"]);return function(e,t){return B(this,null,function*(){let r=yield Uj.encrypt({name:"AES-CTR",counter:t,length:128},n,e);return new Uint8Array(r)})}}catch(n){if(n.name!=="NotSupportedError"&&(i.length!==24||n.name!=="OperationError"))throw n;H.printDebugError("Browser did not support operation: "+n.message)}return function(n,e){return B(this,null,function*(){return $ve(i,e).encrypt(n)})}})}function F0(i,n){return B(this,null,function*(){if(i!==x.symmetric.aes128&&i!==x.symmetric.aes192&&i!==x.symmetric.aes256)throw Error("EAX mode supports only AES cipher");let[e,t]=yield Promise.all([hbe(n),fbe(n)]);return{encrypt:function(r,o,s){return B(this,null,function*(){let[a,l]=yield Promise.all([e(jj,o),e(KR,s)]),c=yield t(r,a),d=yield e($R,c);for(let h=0;h<16;h++)d[h]^=l[h]^a[h];return H.concatUint8Array([c,d])})},decrypt:function(r,o,s){return B(this,null,function*(){if(r.length<16)throw Error("Invalid EAX ciphertext");let a=r.subarray(0,-16),l=r.subarray(-16),[c,d,h]=yield Promise.all([e(jj,o),e(KR,s),e($R,a)]),_=h;for(let C=0;C<16;C++)_[C]^=d[C]^c[C];if(!H.equalsUint8Array(l,_))throw Error("Authentication tag mismatch");return yield t(a,c)})}}})}$R[15]=2,F0.getNonce=function(i,n){let e=i.slice();for(let t=0;t<n.length;t++)e[8+t]^=n[t];return e},F0.blockLength=g1,F0.ivLength=16,F0.tagLength=16;var Va=16;function Gj(i){let n=0;for(let e=1;!(i&e);e<<=1)n++;return n}function ra(i,n){for(let e=0;e<i.length;e++)i[e]^=n[e];return i}function vb(i,n){return ra(i.slice(),n)}var S0=new Uint8Array(Va),mbe=new Uint8Array([1]);function k0(i,n){return B(this,null,function*(){let{keySize:e}=cr(i);if(!H.isAES(i)||n.length!==e)throw Error("Unexpected algorithm or key size");let t=0,r=l=>BR(n,S0,{disablePadding:!0}).encrypt(l),o=l=>BR(n,S0,{disablePadding:!0}).decrypt(l),s;function a(l,c,d,h){let _=c.length/Va|0;(function(re,Z){let ae=H.nbits(Math.max(re.length,Z.length)/Va|0)-1;for(let Ie=t+1;Ie<=ae;Ie++)s[Ie]=H.double(s[Ie-1]);t=ae})(c,h);let C=H.concatUint8Array([S0.subarray(0,15-d.length),mbe,d]),I=63&C[15];C[15]&=192;let b=r(C),E=H.concatUint8Array([b,vb(b.subarray(0,8),b.subarray(1,9))]),R=H.shiftRight(E.subarray(0+(I>>3),17+(I>>3)),8-(7&I)).subarray(1),T=new Uint8Array(Va),A=new Uint8Array(c.length+16),U,z=0;for(U=0;U<_;U++)ra(R,s[Gj(U+1)]),A.set(ra(l(vb(R,c)),R),z),ra(T,l===r?c:A.subarray(z)),c=c.subarray(Va),z+=Va;if(c.length){ra(R,s.x);let re=r(R);A.set(vb(c,re),z);let Z=new Uint8Array(Va);Z.set(l===r?c:A.subarray(z,-16),0),Z[c.length]=128,ra(T,Z),z+=c.length}let ee=ra(r(ra(ra(T,R),s.$)),function(re){if(!re.length)return S0;let Z=re.length/Va|0,ae=new Uint8Array(Va),Ie=new Uint8Array(Va);for(let ye=0;ye<Z;ye++)ra(ae,s[Gj(ye+1)]),ra(Ie,r(vb(ae,re))),re=re.subarray(Va);if(re.length){ra(ae,s.x);let ye=new Uint8Array(Va);ye.set(re,0),ye[re.length]=128,ra(ye,ae),ra(Ie,r(ye))}return Ie}(h));return A.set(ee,z),A}return function(){let l=r(S0),c=H.double(l);s=[],s[0]=H.double(c),s.x=l,s.$=c}(),{encrypt:function(l,c,d){return B(this,null,function*(){return a(r,l,c,d)})},decrypt:function(l,c,d){return B(this,null,function*(){if(l.length<16)throw Error("Invalid OCB ciphertext");let h=l.subarray(-16);l=l.subarray(0,-16);let _=a(o,l,c,d);if(H.equalsUint8Array(h,_.subarray(-16)))return _.subarray(0,-16);throw Error("Authentication tag mismatch")})}}})}k0.getNonce=function(i,n){let e=i.slice();for(let t=0;t<n.length;t++)e[7+t]^=n[t];return e},k0.blockLength=Va,k0.ivLength=15,k0.tagLength=16;var _R=H.getWebCrypto(),Hj=H.getNodeCrypto(),Wj=H.getNodeBuffer(),Ob=16,CR="AES-GCM";function Vm(i,n){return B(this,null,function*(){if(i!==x.symmetric.aes128&&i!==x.symmetric.aes192&&i!==x.symmetric.aes256)throw Error("GCM mode supports only AES cipher");if(H.getNodeCrypto())return{encrypt:function(o,s){return B(this,arguments,function*(e,t,r=new Uint8Array){let a=new Hj.createCipheriv("aes-"+8*n.length+"-gcm",n,t);a.setAAD(r);let l=Wj.concat([a.update(e),a.final(),a.getAuthTag()]);return new Uint8Array(l)})},decrypt:function(o,s){return B(this,arguments,function*(e,t,r=new Uint8Array){let a=new Hj.createDecipheriv("aes-"+8*n.length+"-gcm",n,t);a.setAAD(r),a.setAuthTag(e.slice(e.length-Ob,e.length));let l=Wj.concat([a.update(e.slice(0,e.length-Ob)),a.final()]);return new Uint8Array(l)})}};if(H.getWebCrypto())try{let e=yield _R.importKey("raw",n,{name:CR},!1,["encrypt","decrypt"]),t=navigator.userAgent.match(/Version\/13\.\d(\.\d)* Safari/)||navigator.userAgent.match(/Version\/(13|14)\.\d(\.\d)* Mobile\/\S* Safari/);return{encrypt:function(a,l){return B(this,arguments,function*(r,o,s=new Uint8Array){if(t&&!r.length)return yb(n,o,s).encrypt(r);let c=yield _R.encrypt({name:CR,iv:o,additionalData:s,tagLength:128},e,r);return new Uint8Array(c)})},decrypt:function(a,l){return B(this,arguments,function*(r,o,s=new Uint8Array){if(t&&r.length===Ob)return yb(n,o,s).decrypt(r);try{let c=yield _R.decrypt({name:CR,iv:o,additionalData:s,tagLength:128},e,r);return new Uint8Array(c)}catch(c){if(c.name==="OperationError")throw Error("Authentication tag mismatch")}})}}}catch(e){if(e.name!=="NotSupportedError"&&(n.length!==24||e.name!=="OperationError"))throw e;H.printDebugError("Browser did not support operation: "+e.message)}return{encrypt:function(e,t,r){return B(this,null,function*(){return yb(n,t,r).encrypt(e)})},decrypt:function(e,t,r){return B(this,null,function*(){return yb(n,t,r).decrypt(e)})}}})}function Md(i,n=!1){switch(i){case x.aead.eax:return F0;case x.aead.ocb:return k0;case x.aead.gcm:return Vm;case x.aead.experimentalGCM:if(!n)throw Error("Unexpected non-standard `experimentalGCM` AEAD algorithm provided in `config.preferredAEADAlgorithm`: use `gcm` instead");return Vm;default:throw Error("Unsupported AEAD mode")}}function gbe(i,n,e,t,r,o){return B(this,null,function*(){switch(i){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:case x.publicKey.rsaSign:{let{n:s,e:a}=t;return Pve(n,r,H.leftPad(e.s,s.length),s,a,o)}case x.publicKey.dsa:{let{g:s,p:a,q:l,y:c}=t,{r:d,s:h}=e;return function(_,C,I,b,E,R,T,A){return B(this,null,function*(){if(C=di(C),I=di(I),R=di(R),T=di(T),E=di(E),A=di(A),C<=Ab||C>=T||I<=Ab||I>=T)return H.printDebug("invalid DSA Signature"),!1;let U=yn(di(b.subarray(0,ca(T))),T),z=Hm(I,T);if(z===Ab)return H.printDebug("invalid DSA Signature"),!1;E=yn(E,R),A=yn(A,R);let ee=yn(U*z,T),re=yn(C*z,T);return yn(yn(qo(E,ee,R)*qo(A,re,R),R),T)===C})}(0,d,h,o,s,a,l,c)}case x.publicKey.ecdsa:{let{oid:s,Q:a}=t,l=new pa(s).payloadSize;return WR(s,n,{r:H.leftPad(e.r,l),s:H.leftPad(e.s,l)},r,a,o)}case x.publicKey.eddsaLegacy:{let{oid:s,Q:a}=t,l=new pa(s).payloadSize;return X7(s,n,{r:H.leftPad(e.r,l),s:H.leftPad(e.s,l)},0,a,o)}case x.publicKey.ed25519:case x.publicKey.ed448:{let{A:s}=t;return cP(i,n,e,0,s,o)}default:throw Error("Unknown signature algorithm.")}})}function _be(i,n,e,t,r,o){return B(this,null,function*(){if(!e||!t)throw Error("Missing key parameters");switch(i){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:case x.publicKey.rsaSign:{let{n:s,e:a}=e,{d:l,p:c,q:d,u:h}=t;return{s:yield Rve(n,r,s,a,l,c,d,h,o)}}case x.publicKey.dsa:{let{g:s,p:a,q:l}=e,{x:c}=t;return function(d,h,_,C,I,b){return B(this,null,function*(){let E=BigInt(0),R,T,A,U;C=di(C),I=di(I),_=di(_),b=di(b),_=yn(_,C),b=yn(b,I);let z=yn(di(h.subarray(0,ca(I))),I);for(;;){if(R=iu(D0,I),T=yn(qo(_,R,C),I),T===E)continue;let ee=yn(b*T,I);if(U=yn(z+ee,I),A=yn(Hm(R,I)*U,I),A!==E)break}return{r:po(T,"be",ca(C)),s:po(A,"be",ca(C))}})}(0,o,s,a,l,c)}case x.publicKey.elgamal:throw Error("Signing with Elgamal is not defined in the OpenPGP standard.");case x.publicKey.ecdsa:{let{oid:s,Q:a}=e,{d:l}=t;return HR(s,n,r,a,l,o)}case x.publicKey.eddsaLegacy:{let{oid:s,Q:a}=e,{seed:l}=t;return Y7(s,n,0,a,l,o)}case x.publicKey.ed25519:case x.publicKey.ed448:{let{A:s}=e,{seed:a}=t;return lP(i,n,0,s,a,o)}default:throw Error("Unknown signature algorithm.")}})}Vm.getNonce=function(i,n){let e=i.slice();for(let t=0;t<n.length;t++)e[4+t]^=n[t];return e},Vm.blockLength=16,Vm.ivLength=12,Vm.tagLength=Ob;var qb=class i extends Error{constructor(...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="Argon2OutOfMemoryError"}},bb,E0,JR=class{constructor(n=_t){let{passes:e,parallelism:t,memoryExponent:r}=n.s2kArgon2Params;this.type="argon2",this.salt=null,this.t=e,this.p=t,this.encodedM=r}generateSalt(){this.salt=Yo(16)}read(n){let e=0;return this.salt=n.subarray(e,e+16),e+=16,this.t=n[e++],this.p=n[e++],this.encodedM=n[e++],e}write(){let n=[new Uint8Array([x.write(x.s2k,this.type)]),this.salt,new Uint8Array([this.t,this.p,this.encodedM])];return H.concatUint8Array(n)}produceKey(n,e){return B(this,null,function*(){let t=2<<this.encodedM-1;try{bb=bb||(yield import("./chunk-JOOCTXPN.js")).default,E0=E0||bb();let r=yield E0,o=r({version:19,type:2,password:H.encodeUTF8(n),salt:this.salt,tagLength:e,memorySize:t,parallelism:this.p,passes:this.t});return t>1048576&&(E0=bb(),E0.catch(()=>{})),o}catch(r){throw r.message&&(r.message.includes("Unable to grow instance memory")||r.message.includes("failed to grow memory")||r.message.includes("WebAssembly.Memory.grow")||r.message.includes("Out of memory"))?new qb("Could not allocate required memory for Argon2"):r}})}},qR=class{constructor(n,e=_t){this.algorithm=x.hash.sha256,this.type=x.read(x.s2k,n),this.c=e.s2kIterationCountByte,this.salt=null}generateSalt(){switch(this.type){case"salted":case"iterated":this.salt=Yo(8)}}getCount(){return 16+(15&this.c)<<6+(this.c>>4)}read(n){let e=0;switch(this.algorithm=n[e++],this.type){case"simple":break;case"salted":this.salt=n.subarray(e,e+8),e+=8;break;case"iterated":this.salt=n.subarray(e,e+8),e+=8,this.c=n[e++];break;case"gnu":if(H.uint8ArrayToString(n.subarray(e,e+3))!=="GNU")throw new jn("Unknown s2k type.");if(e+=3,1e3+n[e++]!==1001)throw new jn("Unknown s2k gnu protection mode.");this.type="gnu-dummy";break;default:throw new jn("Unknown s2k type.")}return e}write(){if(this.type==="gnu-dummy")return new Uint8Array([101,0,...H.stringToUint8Array("GNU"),1]);let n=[new Uint8Array([x.write(x.s2k,this.type),this.algorithm])];switch(this.type){case"simple":break;case"salted":n.push(this.salt);break;case"iterated":n.push(this.salt),n.push(new Uint8Array([this.c]));break;case"gnu":throw Error("GNU s2k type not supported.");default:throw Error("Unknown s2k type.")}return H.concatUint8Array(n)}produceKey(n,e){return B(this,null,function*(){n=H.encodeUTF8(n);let t=[],r=0,o=0;for(;r<e;){let s;switch(this.type){case"simple":s=H.concatUint8Array([new Uint8Array(o),n]);break;case"salted":s=H.concatUint8Array([new Uint8Array(o),this.salt,n]);break;case"iterated":{let l=H.concatUint8Array([this.salt,n]),c=l.length,d=Math.max(this.getCount(),c);s=new Uint8Array(o+d),s.set(l,o);for(let h=o+c;h<d;h+=c,c*=2)s.copyWithin(h,o,h);break}case"gnu":throw Error("GNU s2k type not supported.");default:throw Error("Unknown s2k type.")}let a=yield kc(this.algorithm,s);t.push(a),r+=a.length,o++}return H.concatUint8Array(t).subarray(0,e)})}},Cbe=new Set([x.s2k.argon2,x.s2k.iterated]);function Yb(i,n=_t){switch(i){case x.s2k.argon2:return new JR(n);case x.s2k.iterated:case x.s2k.gnu:case x.s2k.salted:case x.s2k.simple:return new qR(i,n);default:throw new jn("Unsupported S2K type")}}function o9(i){let{s2kType:n}=i;if(!Cbe.has(n))throw Error("The provided `config.s2kType` value is not allowed");return Yb(n,i)}var co=Uint8Array,ja=Uint16Array,CP=Int32Array,_1=new co([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),C1=new co([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),YR=new co([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s9=function(i,n){for(var e=new ja(31),t=0;t<31;++t)e[t]=n+=1<<i[t-1];var r=new CP(e[30]);for(t=1;t<30;++t)for(var o=e[t];o<e[t+1];++o)r[o]=o-e[t]<<5|t;return{b:e,r}},a9=s9(_1,2),l9=a9.b,XR=a9.r;l9[28]=258,XR[258]=28;for(IR=s9(C1,0),c9=IR.b,QR=IR.r,Xb=new ja(32768),vr=0;vr<32768;++vr)Yp=(43690&vr)>>1|(21845&vr)<<1,Yp=(61680&(Yp=(52428&Yp)>>2|(13107&Yp)<<2))>>4|(3855&Yp)<<4,Xb[vr]=((65280&Yp)>>8|(255&Yp)<<8)>>1;var Yp,IR,c9,QR,Xb,vr,Dc=function(i,n,e){for(var t=i.length,r=0,o=new ja(n);r<t;++r)i[r]&&++o[i[r]-1];var s,a=new ja(n);for(r=1;r<n;++r)a[r]=a[r-1]+o[r-1]<<1;if(e){s=new ja(1<<n);var l=15-n;for(r=0;r<t;++r)if(i[r])for(var c=r<<4|i[r],d=n-i[r],h=a[i[r]-1]++<<d,_=h|(1<<d)-1;h<=_;++h)s[Xb[h]>>l]=c}else for(s=new ja(t),r=0;r<t;++r)i[r]&&(s[r]=Xb[a[i[r]-1]++]>>15-i[r]);return s},ou=new co(288);for(vr=0;vr<144;++vr)ou[vr]=8;for(vr=144;vr<256;++vr)ou[vr]=9;for(vr=256;vr<280;++vr)ou[vr]=7;for(vr=280;vr<288;++vr)ou[vr]=8;var z0=new co(32);for(vr=0;vr<32;++vr)z0[vr]=5;var Ibe=Dc(ou,9,0),ybe=Dc(ou,9,1),wbe=Dc(z0,5,0),vbe=Dc(z0,5,1),yR=function(i){for(var n=i[0],e=1;e<i.length;++e)i[e]>n&&(n=i[e]);return n},Vl=function(i,n,e){var t=n/8|0;return(i[t]|i[t+1]<<8)>>(7&n)&e},wR=function(i,n){var e=n/8|0;return(i[e]|i[e+1]<<8|i[e+2]<<16)>>(7&n)},IP=function(i){return(i+7)/8|0},N0=function(i,n,e){return(n==null||n<0)&&(n=0),(e==null||e>i.length)&&(e=i.length),new co(i.subarray(n,e))},bbe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$o=function(i,n,e){var t=Error(n||bbe[i]);if(t.code=i,Error.captureStackTrace&&Error.captureStackTrace(t,$o),!e)throw t;return t},Fd=function(i,n,e){e<<=7&n;var t=n/8|0;i[t]|=e,i[t+1]|=e>>8},A0=function(i,n,e){e<<=7&n;var t=n/8|0;i[t]|=e,i[t+1]|=e>>8,i[t+2]|=e>>16},vR=function(i,n){for(var e=[],t=0;t<i.length;++t)i[t]&&e.push({s:t,f:i[t]});var r=e.length,o=e.slice();if(!r)return{t:p9,l:0};if(r==1){var s=new co(e[0].s+1);return s[e[0].s]=1,{t:s,l:1}}e.sort(function(z,ee){return z.f-ee.f}),e.push({s:-1,f:25001});var a=e[0],l=e[1],c=0,d=1,h=2;for(e[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=r-1;)a=e[e[c].f<e[h].f?c++:h++],l=e[c!=d&&e[c].f<e[h].f?c++:h++],e[d++]={s:-1,f:a.f+l.f,l:a,r:l};var _=o[0].s;for(t=1;t<r;++t)o[t].s>_&&(_=o[t].s);var C=new ja(_+1),I=ZR(e[d-1],C,0);if(I>n){t=0;var b=0,E=I-n,R=1<<E;for(o.sort(function(z,ee){return C[ee.s]-C[z.s]||z.f-ee.f});t<r;++t){var T=o[t].s;if(!(C[T]>n))break;b+=R-(1<<I-C[T]),C[T]=n}for(b>>=E;b>0;){var A=o[t].s;C[A]<n?b-=1<<n-C[A]++-1:++t}for(;t>=0&&b;--t){var U=o[t].s;C[U]==n&&(--C[U],++b)}I=n}return{t:new co(C),l:I}},ZR=function(i,n,e){return i.s==-1?Math.max(ZR(i.l,n,e+1),ZR(i.r,n,e+1)):n[i.s]=e},zj=function(i){for(var n=i.length;n&&!i[--n];);for(var e=new ja(++n),t=0,r=i[0],o=1,s=function(l){e[t++]=l},a=1;a<=n;++a)if(i[a]==r&&a!=n)++o;else{if(!r&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(r),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(r);o=1,r=i[a]}return{c:e.subarray(0,t),n}},x0=function(i,n){for(var e=0,t=0;t<n.length;++t)e+=i[t]*n[t];return e},d9=function(i,n,e){var t=e.length,r=IP(n+2);i[r]=255&t,i[r+1]=t>>8,i[r+2]=255^i[r],i[r+3]=255^i[r+1];for(var o=0;o<t;++o)i[r+o+4]=e[o];return 8*(r+4+t)},Kj=function(i,n,e,t,r,o,s,a,l,c,d){Fd(n,d++,e),++r[256];for(var h=vR(r,15),_=h.t,C=h.l,I=vR(o,15),b=I.t,E=I.l,R=zj(_),T=R.c,A=R.n,U=zj(b),z=U.c,ee=U.n,re=new ja(19),Z=0;Z<T.length;++Z)++re[31&T[Z]];for(Z=0;Z<z.length;++Z)++re[31&z[Z]];for(var ae=vR(re,7),Ie=ae.t,ye=ae.l,xe=19;xe>4&&!Ie[YR[xe-1]];--xe);var Le,gi,be,$e,oi=c+5<<3,Hi=x0(r,ou)+x0(o,z0)+s,Ui=x0(r,_)+x0(o,b)+s+14+3*xe+x0(re,Ie)+2*re[16]+3*re[17]+7*re[18];if(l>=0&&oi<=Hi&&oi<=Ui)return d9(n,d,i.subarray(l,l+c));if(Fd(n,d,1+(Ui<Hi)),d+=2,Ui<Hi){Le=Dc(_,C,0),gi=_,be=Dc(b,E,0),$e=b;var fi=Dc(Ie,ye,0);for(Fd(n,d,A-257),Fd(n,d+5,ee-1),Fd(n,d+10,xe-4),d+=14,Z=0;Z<xe;++Z)Fd(n,d+3*Z,Ie[YR[Z]]);d+=3*xe;for(var ji=[T,z],pi=0;pi<2;++pi){var Ti=ji[pi];for(Z=0;Z<Ti.length;++Z){var Ut=31&Ti[Z];Fd(n,d,fi[Ut]),d+=Ie[Ut],Ut>15&&(Fd(n,d,Ti[Z]>>5&127),d+=Ti[Z]>>12)}}}else Le=Ibe,gi=ou,be=wbe,$e=z0;for(Z=0;Z<a;++Z){var Ot=t[Z];if(Ot>255){A0(n,d,Le[(Ut=Ot>>18&31)+257]),d+=gi[Ut+257],Ut>7&&(Fd(n,d,Ot>>23&31),d+=_1[Ut]);var _i=31&Ot;A0(n,d,be[_i]),d+=$e[_i],_i>3&&(A0(n,d,Ot>>5&8191),d+=C1[_i])}else A0(n,d,Le[Ot]),d+=gi[Ot]}return A0(n,d,Le[256]),d+gi[256]},Sbe=new CP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),p9=new co(0),$j=function(){var i=1,n=0;return{p:function(e){for(var t=i,r=n,o=0|e.length,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)r+=t+=e[s];t=(65535&t)+15*(t>>16),r=(65535&r)+15*(r>>16)}i=t,n=r},d:function(){return(255&(i%=65521))<<24|(65280&i)<<8|(255&(n%=65521))<<8|n>>8}}},u9=function(i,n,e,t,r){if(!r&&(r={l:1},n.dictionary)){var o=n.dictionary.subarray(-32768),s=new co(o.length+i.length);s.set(o),s.set(i,o.length),i=s,r.w=o.length}return function(a,l,c,d,h,_){var C=_.z||a.length,I=new co(d+C+5*(1+Math.ceil(C/7e3))+h),b=I.subarray(d,I.length-h),E=_.l,R=7&(_.r||0);if(l){R&&(b[0]=_.r>>3);for(var T=Sbe[l-1],A=T>>13,U=8191&T,z=(1<<c)-1,ee=_.p||new ja(32768),re=_.h||new ja(z+1),Z=Math.ceil(c/3),ae=2*Z,Ie=function(zc){return(a[zc]^a[zc+1]<<Z^a[zc+2]<<ae)&z},ye=new CP(25e3),xe=new ja(288),Le=new ja(32),gi=0,be=0,$e=_.i||0,oi=0,Hi=_.w||0,Ui=0;$e+2<C;++$e){var fi=Ie($e),ji=32767&$e,pi=re[fi];if(ee[ji]=pi,re[fi]=ji,Hi<=$e){var Ti=C-$e;if((gi>7e3||oi>24576)&&(Ti>423||!E)){R=Kj(a,b,0,ye,xe,Le,be,oi,Ui,$e-Ui,R),oi=gi=be=0,Ui=$e;for(var Ut=0;Ut<286;++Ut)xe[Ut]=0;for(Ut=0;Ut<30;++Ut)Le[Ut]=0}var Ot=2,_i=0,Hn=U,yi=ji-pi&32767;if(Ti>2&&fi==Ie($e-yi))for(var ze=Math.min(A,Ti)-1,Ge=Math.min(32767,$e),Fe=Math.min(258,Ti);yi<=Ge&&--Hn&&ji!=pi;){if(a[$e+Ot]==a[$e+Ot-yi]){for(var ot=0;ot<Fe&&a[$e+ot]==a[$e+ot-yi];++ot);if(ot>Ot){if(Ot=ot,_i=yi,ot>ze)break;var Vt=Math.min(yi,ot-2),zt=0;for(Ut=0;Ut<Vt;++Ut){var Ft=$e-yi+Ut&32767,wi=Ft-ee[Ft]&32767;wi>zt&&(zt=wi,pi=Ft)}}}yi+=(ji=pi)-(pi=ee[ji])&32767}if(_i){ye[oi++]=268435456|XR[Ot]<<18|QR[_i];var Wi=31&XR[Ot],vi=31&QR[_i];be+=_1[Wi]+C1[vi],++xe[257+Wi],++Le[vi],Hi=$e+Ot,++gi}else ye[oi++]=a[$e],++xe[a[$e]]}}for($e=Math.max($e,Hi);$e<C;++$e)ye[oi++]=a[$e],++xe[a[$e]];R=Kj(a,b,E,ye,xe,Le,be,oi,Ui,$e-Ui,R),E||(_.r=7&R|b[R/8|0]<<3,R-=7,_.h=re,_.p=ee,_.i=$e,_.w=Hi)}else{for($e=_.w||0;$e<C+E;$e+=65535){var wn=$e+65535;wn>=C&&(b[R/8|0]=E,wn=C),R=d9(b,R+1,a.subarray($e,wn))}_.i=C}return N0(I,0,d+IP(R)+h)}(i,n.level==null?6:n.level,n.mem==null?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):20:12+n.mem,e,t,r)},Jj=function(i,n,e){for(;e;++n)i[n]=e,e>>>=8},Rb=function(){function i(n,e){if(typeof n=="function"&&(e=n,n={}),this.ondata=e,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new co(98304),this.o.dictionary){var t=this.o.dictionary.subarray(-32768);this.b.set(t,32768-t.length),this.s.i=32768-t.length}}return i.prototype.p=function(n,e){this.ondata(u9(n,this.o,0,0,this.s),e)},i.prototype.push=function(n,e){this.ondata||$o(5),this.s.l&&$o(4);var t=n.length+this.s.z;if(t>this.b.length){if(t>2*this.b.length-32768){var r=new co(-32768&t);r.set(this.b.subarray(0,this.s.z)),this.b=r}var o=this.b.length-this.s.z;this.b.set(n.subarray(0,o),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(o),32768),this.s.z=n.length-o+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&e,(this.s.z>this.s.w+8191||e)&&(this.p(this.b,e||!1),this.s.w=this.s.i,this.s.i-=2)},i.prototype.flush=function(){this.ondata||$o(5),this.s.l&&$o(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},i}(),Pb=function(){function i(n,e){typeof n=="function"&&(e=n,n={}),this.ondata=e;var t=n&&n.dictionary&&n.dictionary.subarray(-32768);this.s={i:0,b:t?t.length:0},this.o=new co(32768),this.p=new co(0),t&&this.o.set(t)}return i.prototype.e=function(n){if(this.ondata||$o(5),this.d&&$o(4),this.p.length){if(n.length){var e=new co(this.p.length+n.length);e.set(this.p),e.set(n,this.p.length),this.p=e}}else this.p=n},i.prototype.c=function(n){this.s.i=+(this.d=n||!1);var e=this.s.b,t=function(r,o,s,a){var l=r.length;if(!l||o.f&&!o.l)return s||new co(0);var c=!s,d=c||o.i!=2,h=o.i;c&&(s=new co(3*l));var _=function(zt){var Ft=s.length;if(zt>Ft){var wi=new co(Math.max(2*Ft,zt));wi.set(s),s=wi}},C=o.f||0,I=o.p||0,b=o.b||0,E=o.l,R=o.d,T=o.m,A=o.n,U=8*l;do{if(!E){C=Vl(r,I,1);var z=Vl(r,I+1,3);if(I+=3,!z){var ee=r[(oi=IP(I)+4)-4]|r[oi-3]<<8,re=oi+ee;if(re>l){h&&$o(0);break}d&&_(b+ee),s.set(r.subarray(oi,re),b),o.b=b+=ee,o.p=I=8*re,o.f=C;continue}if(z==1)E=ybe,R=vbe,T=9,A=5;else if(z==2){var Z=Vl(r,I,31)+257,ae=Vl(r,I+10,15)+4,Ie=Z+Vl(r,I+5,31)+1;I+=14;for(var ye=new co(Ie),xe=new co(19),Le=0;Le<ae;++Le)xe[YR[Le]]=Vl(r,I+3*Le,7);I+=3*ae;var gi=yR(xe),be=(1<<gi)-1,$e=Dc(xe,gi,1);for(Le=0;Le<Ie;){var oi,Hi=$e[Vl(r,I,be)];if(I+=15&Hi,(oi=Hi>>4)<16)ye[Le++]=oi;else{var Ui=0,fi=0;for(oi==16?(fi=3+Vl(r,I,3),I+=2,Ui=ye[Le-1]):oi==17?(fi=3+Vl(r,I,7),I+=3):oi==18&&(fi=11+Vl(r,I,127),I+=7);fi--;)ye[Le++]=Ui}}var ji=ye.subarray(0,Z),pi=ye.subarray(Z);T=yR(ji),A=yR(pi),E=Dc(ji,T,1),R=Dc(pi,A,1)}else $o(1);if(I>U){h&&$o(0);break}}d&&_(b+131072);for(var Ti=(1<<T)-1,Ut=(1<<A)-1,Ot=I;;Ot=I){var _i=(Ui=E[wR(r,I)&Ti])>>4;if((I+=15&Ui)>U){h&&$o(0);break}if(Ui||$o(2),_i<256)s[b++]=_i;else{if(_i==256){Ot=I,E=null;break}var Hn=_i-254;if(_i>264){var yi=_1[Le=_i-257];Hn=Vl(r,I,(1<<yi)-1)+l9[Le],I+=yi}var ze=R[wR(r,I)&Ut],Ge=ze>>4;if(ze||$o(3),I+=15&ze,pi=c9[Ge],Ge>3&&(yi=C1[Ge],pi+=wR(r,I)&(1<<yi)-1,I+=yi),I>U){h&&$o(0);break}d&&_(b+131072);var Fe=b+Hn;if(b<pi){var ot=0-pi,Vt=Math.min(pi,Fe);for(ot+b<0&&$o(3);b<Vt;++b)s[b]=a[ot+b]}for(;b<Fe;++b)s[b]=s[b-pi]}}o.l=E,o.p=Ot,o.b=b,o.f=C,E&&(C=1,o.m=T,o.d=R,o.n=A)}while(!C);return b!=s.length&&c?N0(s,0,b):s.subarray(0,b)}(this.p,this.s,this.o);this.ondata(N0(t,e,this.s.b),this.d),this.o=N0(t,this.s.b-32768),this.s.b=this.o.length,this.p=N0(this.p,this.s.p/8|0),this.s.p&=7},i.prototype.push=function(n,e){this.e(n),this.c(e)},i}(),Ebe=function(){function i(n,e){this.c=$j(),this.v=1,Rb.call(this,n,e)}return i.prototype.push=function(n,e){this.c.p(n),Rb.prototype.push.call(this,n,e)},i.prototype.p=function(n,e){var t=u9(n,this.o,this.v&&(this.o.dictionary?6:2),e&&4,this.s);this.v&&(function(r,o){var s=o.level,a=s==0?0:s<6?1:s==9?3:2;if(r[0]=120,r[1]=a<<6|(o.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,o.dictionary){var l=$j();l.p(o.dictionary),Jj(r,2,l.d())}}(t,this.o),this.v=0),e&&Jj(t,t.length-4,this.c.d()),this.ondata(t,e)},i.prototype.flush=function(){Rb.prototype.flush.call(this)},i}(),Abe=function(){function i(n,e){Pb.call(this,n,e),this.v=n&&n.dictionary?2:1}return i.prototype.push=function(n,e){if(Pb.prototype.e.call(this,n),this.v){if(this.p.length<6&&!e)return;this.p=this.p.subarray((t=this.p,r=this.v-1,((15&t[0])!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&$o(6,"invalid zlib data"),(t[1]>>5&1)==+!r&&$o(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4))),this.v=0}var t,r;e&&(this.p.length<4&&$o(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Pb.prototype.c.call(this,e)},i}(),xbe=typeof TextDecoder<"u"&&new TextDecoder;try{xbe.decode(p9,{stream:!0})}catch{}var su=class{static get tag(){return x.packet.literalData}constructor(n=new Date){this.format=x.literal.utf8,this.date=H.normalizeDate(n),this.text=null,this.data=null,this.filename=""}setText(n,e=x.literal.utf8){this.format=e,this.text=n,this.data=null}getText(n=!1){return(this.text===null||H.isStream(this.text))&&(this.text=H.decodeUTF8(H.nativeEOL(this.getBytes(n)))),this.text}setBytes(n,e){this.format=e,this.data=n,this.text=null}getBytes(n=!1){return this.data===null&&(this.data=H.canonicalizeEOL(H.encodeUTF8(this.text))),n?L0(this.data):this.data}setFilename(n){this.filename=n}getFilename(){return this.filename}read(n){return B(this,null,function*(){yield l1(n,e=>B(this,null,function*(){let t=yield e.readByte(),r=yield e.readByte();this.filename=H.decodeUTF8(yield e.readBytes(r)),this.date=H.readDate(yield e.readBytes(4));let o=e.remainder();uo(o)&&(o=yield yo(o)),this.setBytes(o,t)}))})}writeHeader(){let n=H.encodeUTF8(this.filename),e=new Uint8Array([n.length]),t=new Uint8Array([this.format]),r=H.writeDate(this.date);return H.concatUint8Array([t,e,n,r])}write(){let n=this.writeHeader(),e=this.getBytes();return H.concat([n,e])}},Vd=class i{constructor(){this.bytes=""}read(n){return this.bytes=H.uint8ArrayToString(n.subarray(0,8)),this.bytes.length}write(){return H.stringToUint8Array(this.bytes)}toHex(){return H.uint8ArrayToHex(H.stringToUint8Array(this.bytes))}equals(n,e=!1){return e&&(n.isWildcard()||this.isWildcard())||this.bytes===n.bytes}isNull(){return this.bytes===""}isWildcard(){return/^0+$/.test(this.toHex())}static mapToHex(n){return n.toHex()}static fromID(n){let e=new i;return e.read(H.hexToUint8Array(n)),e}static wildcard(){let n=new i;return n.read(new Uint8Array(8)),n}},T0=Symbol("verified"),qj="salt@notations.openpgpjs.org",Tbe=new Set([x.signatureSubpacket.issuerKeyID,x.signatureSubpacket.issuerFingerprint,x.signatureSubpacket.embeddedSignature]),ps=class i{static get tag(){return x.packet.signature}constructor(){this.version=null,this.signatureType=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.signatureData=null,this.unhashedSubpackets=[],this.unknownSubpackets=[],this.signedHashValue=null,this.salt=null,this.created=null,this.signatureExpirationTime=null,this.signatureNeverExpires=!0,this.exportable=null,this.trustLevel=null,this.trustAmount=null,this.regularExpression=null,this.revocable=null,this.keyExpirationTime=null,this.keyNeverExpires=null,this.preferredSymmetricAlgorithms=null,this.revocationKeyClass=null,this.revocationKeyAlgorithm=null,this.revocationKeyFingerprint=null,this.issuerKeyID=new Vd,this.rawNotations=[],this.notations={},this.preferredHashAlgorithms=null,this.preferredCompressionAlgorithms=null,this.keyServerPreferences=null,this.preferredKeyServer=null,this.isPrimaryUserID=null,this.policyURI=null,this.keyFlags=null,this.signersUserID=null,this.reasonForRevocationFlag=null,this.reasonForRevocationString=null,this.features=null,this.signatureTargetPublicKeyAlgorithm=null,this.signatureTargetHashAlgorithm=null,this.signatureTargetHash=null,this.embeddedSignature=null,this.issuerKeyVersion=null,this.issuerFingerprint=null,this.preferredAEADAlgorithms=null,this.preferredCipherSuites=null,this.revoked=null,this[T0]=null}read(n,e=_t){let t=0;if(this.version=n[t++],this.version===5&&!e.enableParsingV5Entities)throw new jn("Support for v5 entities is disabled; turn on `config.enableParsingV5Entities` if needed");if(this.version!==4&&this.version!==5&&this.version!==6)throw new jn(`Version ${this.version} of the signature packet is unsupported.`);if(this.signatureType=n[t++],this.publicKeyAlgorithm=n[t++],this.hashAlgorithm=n[t++],t+=this.readSubPackets(n.subarray(t,n.length),!0),!this.created)throw Error("Missing signature creation time subpacket.");if(this.signatureData=n.subarray(0,t),t+=this.readSubPackets(n.subarray(t,n.length),!1),this.signedHashValue=n.subarray(t,t+2),t+=2,this.version===6){let a=n[t++];this.salt=n.subarray(t,t+a),t+=a}let r=n.subarray(t,n.length),{read:o,signatureParams:s}=function(a,l){let c=0;switch(a){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:case x.publicKey.rsaSign:{let d=H.readMPI(l.subarray(c));return c+=d.length+2,{read:c,signatureParams:{s:d}}}case x.publicKey.dsa:case x.publicKey.ecdsa:{let d=H.readMPI(l.subarray(c));c+=d.length+2;let h=H.readMPI(l.subarray(c));return c+=h.length+2,{read:c,signatureParams:{r:d,s:h}}}case x.publicKey.eddsaLegacy:{let d=H.readMPI(l.subarray(c));c+=d.length+2;let h=H.readMPI(l.subarray(c));return c+=h.length+2,{read:c,signatureParams:{r:d,s:h}}}case x.publicKey.ed25519:case x.publicKey.ed448:{let d=2*d1(a),h=H.readExactSubarray(l,c,c+d);return c+=h.length,{read:c,signatureParams:{RS:h}}}default:throw new jn("Unknown signature algorithm.")}}(this.publicKeyAlgorithm,r);if(o<r.length)throw Error("Error reading MPIs");this.params=s}writeParams(){return this.params instanceof Promise?lu(()=>B(this,null,function*(){return zm(this.publicKeyAlgorithm,yield this.params)})):zm(this.publicKeyAlgorithm,this.params)}write(){let n=[];return n.push(this.signatureData),n.push(this.writeUnhashedSubPackets()),n.push(this.signedHashValue),this.version===6&&(n.push(new Uint8Array([this.salt.length])),n.push(this.salt)),n.push(this.writeParams()),H.concat(n)}sign(s,a){return B(this,arguments,function*(n,e,t=new Date,r=!1,o){this.version=n.version,this.created=H.normalizeDate(t),this.issuerKeyVersion=n.version,this.issuerFingerprint=n.getFingerprintBytes(),this.issuerKeyID=n.getKeyID();let l=[new Uint8Array([this.version,this.signatureType,this.publicKeyAlgorithm,this.hashAlgorithm])];if(this.version===6){let _=bR(this.hashAlgorithm);if(this.salt===null)this.salt=Yo(_);else if(_!==this.salt.length)throw Error("Provided salt does not have the required length")}else if(o.nonDeterministicSignaturesViaNotation){if(this.rawNotations.filter(({name:_})=>_===qj).length!==0)throw Error("Unexpected existing salt notation");{let _=Yo(bR(this.hashAlgorithm));this.rawNotations.push({name:qj,value:_,humanReadable:!1,critical:!1})}}l.push(this.writeHashedSubPackets()),this.unhashedSubpackets=[],this.signatureData=H.concat(l);let c=this.toHash(this.signatureType,e,r),d=yield this.hash(this.signatureType,e,c,r);this.signedHashValue=ds(xh(d),0,2);let h=()=>B(this,null,function*(){return _be(this.publicKeyAlgorithm,this.hashAlgorithm,n.publicParams,n.privateParams,c,yield yo(d))});H.isStream(d)?this.params=h():(this.params=yield h(),this[T0]=!0)})}writeHashedSubPackets(){let n=x.signatureSubpacket,e=[],t;if(this.created===null)throw Error("Missing signature creation time");e.push(ar(n.signatureCreationTime,!0,H.writeDate(this.created))),this.signatureExpirationTime!==null&&e.push(ar(n.signatureExpirationTime,!0,H.writeNumber(this.signatureExpirationTime,4))),this.exportable!==null&&e.push(ar(n.exportableCertification,!0,new Uint8Array([this.exportable?1:0]))),this.trustLevel!==null&&(t=new Uint8Array([this.trustLevel,this.trustAmount]),e.push(ar(n.trustSignature,!0,t))),this.regularExpression!==null&&e.push(ar(n.regularExpression,!0,this.regularExpression)),this.revocable!==null&&e.push(ar(n.revocable,!0,new Uint8Array([this.revocable?1:0]))),this.keyExpirationTime!==null&&e.push(ar(n.keyExpirationTime,!0,H.writeNumber(this.keyExpirationTime,4))),this.preferredSymmetricAlgorithms!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.preferredSymmetricAlgorithms)),e.push(ar(n.preferredSymmetricAlgorithms,!1,t))),this.revocationKeyClass!==null&&(t=new Uint8Array([this.revocationKeyClass,this.revocationKeyAlgorithm]),t=H.concat([t,this.revocationKeyFingerprint]),e.push(ar(n.revocationKey,!1,t))),!this.issuerKeyID.isNull()&&this.issuerKeyVersion<5&&e.push(ar(n.issuerKeyID,!1,this.issuerKeyID.write())),this.rawNotations.forEach(({name:s,value:a,humanReadable:l,critical:c})=>{t=[new Uint8Array([l?128:0,0,0,0])];let d=H.encodeUTF8(s);t.push(H.writeNumber(d.length,2)),t.push(H.writeNumber(a.length,2)),t.push(d),t.push(a),t=H.concat(t),e.push(ar(n.notationData,c,t))}),this.preferredHashAlgorithms!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.preferredHashAlgorithms)),e.push(ar(n.preferredHashAlgorithms,!1,t))),this.preferredCompressionAlgorithms!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.preferredCompressionAlgorithms)),e.push(ar(n.preferredCompressionAlgorithms,!1,t))),this.keyServerPreferences!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.keyServerPreferences)),e.push(ar(n.keyServerPreferences,!1,t))),this.preferredKeyServer!==null&&e.push(ar(n.preferredKeyServer,!1,H.encodeUTF8(this.preferredKeyServer))),this.isPrimaryUserID!==null&&e.push(ar(n.primaryUserID,!1,new Uint8Array([this.isPrimaryUserID?1:0]))),this.policyURI!==null&&e.push(ar(n.policyURI,!1,H.encodeUTF8(this.policyURI))),this.keyFlags!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.keyFlags)),e.push(ar(n.keyFlags,!0,t))),this.signersUserID!==null&&e.push(ar(n.signersUserID,!1,H.encodeUTF8(this.signersUserID))),this.reasonForRevocationFlag!==null&&(t=H.stringToUint8Array(String.fromCharCode(this.reasonForRevocationFlag)+this.reasonForRevocationString),e.push(ar(n.reasonForRevocation,!0,t))),this.features!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.features)),e.push(ar(n.features,!1,t))),this.signatureTargetPublicKeyAlgorithm!==null&&(t=[new Uint8Array([this.signatureTargetPublicKeyAlgorithm,this.signatureTargetHashAlgorithm])],t.push(H.stringToUint8Array(this.signatureTargetHash)),t=H.concat(t),e.push(ar(n.signatureTarget,!0,t))),this.embeddedSignature!==null&&e.push(ar(n.embeddedSignature,!0,this.embeddedSignature.write())),this.issuerFingerprint!==null&&(t=[new Uint8Array([this.issuerKeyVersion]),this.issuerFingerprint],t=H.concat(t),e.push(ar(n.issuerFingerprint,this.version>=5,t))),this.preferredAEADAlgorithms!==null&&(t=H.stringToUint8Array(H.uint8ArrayToString(this.preferredAEADAlgorithms)),e.push(ar(n.preferredAEADAlgorithms,!1,t))),this.preferredCipherSuites!==null&&(t=new Uint8Array([].concat(...this.preferredCipherSuites)),e.push(ar(n.preferredCipherSuites,!1,t)));let r=H.concat(e),o=H.writeNumber(r.length,this.version===6?4:2);return H.concat([o,r])}writeUnhashedSubPackets(){let n=this.unhashedSubpackets.map(({type:r,critical:o,body:s})=>ar(r,o,s)),e=H.concat(n),t=H.writeNumber(e.length,this.version===6?4:2);return H.concat([t,e])}readSubPacket(n,e=!0){let t=0,r=!!(128&n[t]),o=127&n[t];if(t++,e||(this.unhashedSubpackets.push({type:o,critical:r,body:n.subarray(t,n.length)}),Tbe.has(o)))switch(o){case x.signatureSubpacket.signatureCreationTime:this.created=H.readDate(n.subarray(t,n.length));break;case x.signatureSubpacket.signatureExpirationTime:{let s=H.readNumber(n.subarray(t,n.length));this.signatureNeverExpires=s===0,this.signatureExpirationTime=s;break}case x.signatureSubpacket.exportableCertification:this.exportable=n[t++]===1;break;case x.signatureSubpacket.trustSignature:this.trustLevel=n[t++],this.trustAmount=n[t++];break;case x.signatureSubpacket.regularExpression:this.regularExpression=n[t];break;case x.signatureSubpacket.revocable:this.revocable=n[t++]===1;break;case x.signatureSubpacket.keyExpirationTime:{let s=H.readNumber(n.subarray(t,n.length));this.keyExpirationTime=s,this.keyNeverExpires=s===0;break}case x.signatureSubpacket.preferredSymmetricAlgorithms:this.preferredSymmetricAlgorithms=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.revocationKey:this.revocationKeyClass=n[t++],this.revocationKeyAlgorithm=n[t++],this.revocationKeyFingerprint=n.subarray(t,t+20);break;case x.signatureSubpacket.issuerKeyID:if(this.version===4)this.issuerKeyID.read(n.subarray(t,n.length));else if(e)throw Error("Unexpected Issuer Key ID subpacket");break;case x.signatureSubpacket.notationData:{let s=!!(128&n[t]);t+=4;let a=H.readNumber(n.subarray(t,t+2));t+=2;let l=H.readNumber(n.subarray(t,t+2));t+=2;let c=H.decodeUTF8(n.subarray(t,t+a)),d=n.subarray(t+a,t+a+l);this.rawNotations.push({name:c,humanReadable:s,value:d,critical:r}),s&&(this.notations[c]=H.decodeUTF8(d));break}case x.signatureSubpacket.preferredHashAlgorithms:this.preferredHashAlgorithms=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.preferredCompressionAlgorithms:this.preferredCompressionAlgorithms=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.keyServerPreferences:this.keyServerPreferences=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.preferredKeyServer:this.preferredKeyServer=H.decodeUTF8(n.subarray(t,n.length));break;case x.signatureSubpacket.primaryUserID:this.isPrimaryUserID=n[t++]!==0;break;case x.signatureSubpacket.policyURI:this.policyURI=H.decodeUTF8(n.subarray(t,n.length));break;case x.signatureSubpacket.keyFlags:this.keyFlags=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.signersUserID:this.signersUserID=H.decodeUTF8(n.subarray(t,n.length));break;case x.signatureSubpacket.reasonForRevocation:this.reasonForRevocationFlag=n[t++],this.reasonForRevocationString=H.decodeUTF8(n.subarray(t,n.length));break;case x.signatureSubpacket.features:this.features=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.signatureTarget:{this.signatureTargetPublicKeyAlgorithm=n[t++],this.signatureTargetHashAlgorithm=n[t++];let s=Do(this.signatureTargetHashAlgorithm);this.signatureTargetHash=H.uint8ArrayToString(n.subarray(t,t+s));break}case x.signatureSubpacket.embeddedSignature:this.embeddedSignature=new i,this.embeddedSignature.read(n.subarray(t,n.length));break;case x.signatureSubpacket.issuerFingerprint:this.issuerKeyVersion=n[t++],this.issuerFingerprint=n.subarray(t,n.length),this.issuerKeyVersion>=5?this.issuerKeyID.read(this.issuerFingerprint):this.issuerKeyID.read(this.issuerFingerprint.subarray(-8));break;case x.signatureSubpacket.preferredAEADAlgorithms:this.preferredAEADAlgorithms=[...n.subarray(t,n.length)];break;case x.signatureSubpacket.preferredCipherSuites:this.preferredCipherSuites=[];for(let s=t;s<n.length;s+=2)this.preferredCipherSuites.push([n[s],n[s+1]]);break;default:this.unknownSubpackets.push({type:o,critical:r,body:n.subarray(t,n.length)})}}readSubPackets(n,e=!0,t){let r=this.version===6?4:2,o=H.readNumber(n.subarray(0,r)),s=r;for(;s<2+o;){let a=S7(n.subarray(s,n.length));s+=a.offset,this.readSubPacket(n.subarray(s,s+a.len),e,t),s+=a.len}return s}toSign(n,e){let t=x.signature;switch(n){case t.binary:return e.text!==null?H.encodeUTF8(e.getText(!0)):e.getBytes(!0);case t.text:{let r=e.getBytes(!0);return H.canonicalizeEOL(r)}case t.standalone:return new Uint8Array(0);case t.certGeneric:case t.certPersona:case t.certCasual:case t.certPositive:case t.certRevocation:{let r,o;if(e.userID)o=180,r=e.userID;else{if(!e.userAttribute)throw Error("Either a userID or userAttribute packet needs to be supplied for certification.");o=209,r=e.userAttribute}let s=r.write();return H.concat([this.toSign(t.key,e),new Uint8Array([o]),H.writeNumber(s.length,4),s])}case t.subkeyBinding:case t.subkeyRevocation:case t.keyBinding:return H.concat([this.toSign(t.key,e),this.toSign(t.key,{key:e.bind})]);case t.key:if(e.key===void 0)throw Error("Key packet is required for this signature.");return e.key.writeForHash(this.version);case t.keyRevocation:return this.toSign(t.key,e);case t.timestamp:return new Uint8Array(0);case t.thirdParty:throw Error("Not implemented");default:throw Error("Unknown signature type.")}}calculateTrailer(n,e){let t=0;return io(xh(this.signatureData),r=>{t+=r.length},()=>{let r=[];return this.version!==5||this.signatureType!==x.signature.binary&&this.signatureType!==x.signature.text||(e?r.push(new Uint8Array(6)):r.push(n.writeHeader())),r.push(new Uint8Array([this.version,255])),this.version===5&&r.push(new Uint8Array(4)),r.push(H.writeNumber(t,4)),H.concat(r)})}toHash(n,e,t=!1){let r=this.toSign(n,e);return H.concat([this.salt||new Uint8Array,r,this.signatureData,this.calculateTrailer(e,t)])}hash(n,e,t,r=!1){return B(this,null,function*(){if(this.version===6&&this.salt.length!==bR(this.hashAlgorithm))throw Error("Signature salt does not have the expected length");return t||(t=this.toHash(n,e,r)),kc(this.hashAlgorithm,t)})}verify(a,l,c){return B(this,arguments,function*(n,e,t,r=new Date,o=!1,s=_t){if(!this.issuerKeyID.equals(n.getKeyID()))throw Error("Signature was not issued by the given public key");if(this.publicKeyAlgorithm!==n.algorithm)throw Error("Public key algorithm used to sign signature does not match issuer key algorithm.");let d=e===x.signature.binary||e===x.signature.text;if(!(this[T0]&&!d)){let _,C;if(this.hashed?C=yield this.hashed:(_=this.toHash(e,t,o),C=yield this.hash(e,t,_)),C=yield yo(C),this.signedHashValue[0]!==C[0]||this.signedHashValue[1]!==C[1])throw Error("Signed digest did not match");if(this.params=yield this.params,this[T0]=yield gbe(this.publicKeyAlgorithm,this.hashAlgorithm,this.params,n.publicParams,_,C),!this[T0])throw Error("Signature verification failed")}let h=H.normalizeDate(r);if(h&&this.created>h)throw Error("Signature creation time is in the future");if(h&&h>=this.getExpirationTime())throw Error("Signature is expired");if(s.rejectHashAlgorithms.has(this.hashAlgorithm))throw Error("Insecure hash algorithm: "+x.read(x.hash,this.hashAlgorithm).toUpperCase());if(s.rejectMessageHashAlgorithms.has(this.hashAlgorithm)&&[x.signature.binary,x.signature.text].includes(this.signatureType))throw Error("Insecure message hash algorithm: "+x.read(x.hash,this.hashAlgorithm).toUpperCase());if(this.unknownSubpackets.forEach(({type:_,critical:C})=>{if(C)throw Error("Unknown critical signature subpacket type "+_)}),this.rawNotations.forEach(({name:_,critical:C})=>{if(C&&s.knownNotations.indexOf(_)<0)throw Error("Unknown critical notation: "+_)}),this.revocationKeyClass!==null)throw Error("This key is intended to be revoked with an authorized key, which OpenPGP.js does not support.")})}isExpired(n=new Date){let e=H.normalizeDate(n);return e!==null&&!(this.created<=e&&e<this.getExpirationTime())}getExpirationTime(){return this.signatureNeverExpires?1/0:new Date(this.created.getTime()+1e3*this.signatureExpirationTime)}};function ar(i,n,e){let t=[];return t.push(c1(e.length+1)),t.push(new Uint8Array([(n?128:0)|i])),t.push(e),H.concat(t)}function bR(i){switch(i){case x.hash.sha256:return 16;case x.hash.sha384:return 24;case x.hash.sha512:return 32;case x.hash.sha224:case x.hash.sha3_256:return 16;case x.hash.sha3_512:return 32;default:throw Error("Unsupported hash function")}}var fl=class i{static get tag(){return x.packet.onePassSignature}static fromSignaturePacket(n,e){let t=new i;return t.version=n.version===6?6:3,t.signatureType=n.signatureType,t.hashAlgorithm=n.hashAlgorithm,t.publicKeyAlgorithm=n.publicKeyAlgorithm,t.issuerKeyID=n.issuerKeyID,t.salt=n.salt,t.issuerFingerprint=n.issuerFingerprint,t.flags=e?1:0,t}constructor(){this.version=null,this.signatureType=null,this.hashAlgorithm=null,this.publicKeyAlgorithm=null,this.salt=null,this.issuerKeyID=null,this.issuerFingerprint=null,this.flags=null}read(n){let e=0;if(this.version=n[e++],this.version!==3&&this.version!==6)throw new jn(`Version ${this.version} of the one-pass signature packet is unsupported.`);if(this.signatureType=n[e++],this.hashAlgorithm=n[e++],this.publicKeyAlgorithm=n[e++],this.version===6){let t=n[e++];this.salt=n.subarray(e,e+t),e+=t,this.issuerFingerprint=n.subarray(e,e+32),e+=32,this.issuerKeyID=new Vd,this.issuerKeyID.read(this.issuerFingerprint)}else this.issuerKeyID=new Vd,this.issuerKeyID.read(n.subarray(e,e+8)),e+=8;return this.flags=n[e++],this}write(){let n=[new Uint8Array([this.version,this.signatureType,this.hashAlgorithm,this.publicKeyAlgorithm])];return this.version===6?n.push(new Uint8Array([this.salt.length]),this.salt,this.issuerFingerprint):n.push(this.issuerKeyID.write()),n.push(new Uint8Array([this.flags])),H.concatUint8Array(n)}calculateTrailer(...n){return lu(()=>B(this,null,function*(){return ps.prototype.calculateTrailer.apply(yield this.correspondingSig,n)}))}verify(){return B(this,arguments,function*(){let n=yield this.correspondingSig;if(!n||n.constructor.tag!==x.packet.signature)throw Error("Corresponding signature packet missing");if(n.signatureType!==this.signatureType||n.hashAlgorithm!==this.hashAlgorithm||n.publicKeyAlgorithm!==this.publicKeyAlgorithm||!n.issuerKeyID.equals(this.issuerKeyID)||this.version===3&&n.version===6||this.version===6&&n.version!==6||this.version===6&&!H.equalsUint8Array(n.issuerFingerprint,this.issuerFingerprint)||this.version===6&&!H.equalsUint8Array(n.salt,this.salt))throw Error("Corresponding signature packet does not match one-pass signature packet");return n.hashed=this.hashed,n.verify.apply(n,arguments)})}};function Obe(i,n){if(!n[i]){let e;try{e=x.read(x.packet,i)}catch{throw new jm("Unknown packet type with tag: "+i)}throw Error("Packet not allowed in this context: "+e)}return new n[i]}fl.prototype.hash=ps.prototype.hash,fl.prototype.toHash=ps.prototype.toHash,fl.prototype.toSign=ps.prototype.toSign;var lr=class i extends Array{static fromBinary(s,a){return B(this,arguments,function*(n,e,t=_t,r=null,o=!1){let l=new i;return yield l.read(n,e,t,r,o),l})}read(s,a){return B(this,arguments,function*(n,e,t=_t,r=null,o=!1){let l;t.additionalAllowedPackets.length&&(l=H.constructAllowedPackets(t.additionalAllowedPackets),e=oe(oe({},e),l)),this.stream=au(n,(d,h)=>B(this,null,function*(){let _=Bd(d),C=Ga(h);try{let I=H.isStream(d);for(;;){let b,E;if(yield C.ready,yield jve(_,I,T=>B(this,null,function*(){try{if(T.tag===x.packet.marker||T.tag===x.packet.trust||T.tag===x.packet.padding)return;let A=Obe(T.tag,e);try{r?.recordPacket(T.tag,l)}catch(U){if(t.enforceGrammar)throw U;H.printDebugError(U)}A.packets=new i,A.fromStream=H.isStream(T.packet),E=A.fromStream;try{yield A.read(T.packet,t)}catch(U){throw U instanceof jn?U:H.wrapError(new M0(`Parsing ${A.constructor.name} failed`),U)}yield C.write(A)}catch(A){let U=A instanceof jm&&T.tag<=39,z=A instanceof jn&&!(A instanceof jm)&&!t.ignoreUnsupportedPackets,ee=A instanceof M0&&!t.ignoreMalformedPackets,re=Sb(T.tag);if(U||z||ee||re||!(A instanceof jm||A instanceof jn||A instanceof M0))o?b=A:yield C.abort(A);else{let Z=new B0(T.tag,T.packet);yield C.write(Z)}H.printDebugError(A)}})),E&&(I=null),b)throw yield _.readToEnd(),b;let R=yield _.peekBytes(2);if(!R||!R.length){try{r?.recordEnd()}catch(T){if(t.enforceGrammar)throw T;H.printDebugError(T)}return yield C.ready,void(yield C.close())}}}catch(I){yield C.abort(I)}}));let c=Bd(this.stream);for(;;){let{done:d,value:h}=yield c.read();if(d?this.stream=null:this.push(h),d||Sb(h.constructor.tag))break}c.releaseLock()})}write(){let n=[];for(let e=0;e<this.length;e++){let t=this[e]instanceof B0?this[e].tag:this[e].constructor.tag,r=this[e].write();if(H.isStream(r)&&Sb(this[e].constructor.tag)){let o=[],s=0,a=512;n.push(Lb(t)),n.push(io(r,l=>{if(o.push(l),s+=l.length,s>=a){let c=Math.min(Math.log(s)/Math.LN2|0,30),d=2**c,h=H.concat([Uve(c)].concat(o));return o=[h.subarray(1+d)],s=o[0].length,h.subarray(0,1+d)}},()=>H.concat([c1(s)].concat(o))))}else{if(H.isStream(r)){let o=0;n.push(io(xh(r),s=>{o+=s.length},()=>Aj(t,o)))}else n.push(Aj(t,r.length));n.push(r)}}return H.concat(n)}filterByTag(...n){let e=new i,t=r=>o=>r===o;for(let r=0;r<this.length;r++)n.some(t(this[r].constructor.tag))&&e.push(this[r]);return e}findPacket(n){return this.find(e=>e.constructor.tag===n)}indexOfTag(...n){let e=[],t=this,r=o=>s=>o===s;for(let o=0;o<this.length;o++)n.some(r(t[o].constructor.tag))&&e.push(o);return e}},vc=class i extends Error{constructor(...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,i),this.name="GrammarError"}},to;(function(i){i[i.EmptyMessage=0]="EmptyMessage",i[i.PlaintextOrEncryptedData=1]="PlaintextOrEncryptedData",i[i.EncryptedSessionKeys=2]="EncryptedSessionKeys",i[i.StandaloneAdditionalAllowedData=3]="StandaloneAdditionalAllowedData"})(to||(to={}));var Km=class{constructor(){this.state=to.EmptyMessage,this.leadingOnePassSignatureCounter=0}recordPacket(n,e){switch(this.state){case to.EmptyMessage:case to.StandaloneAdditionalAllowedData:switch(n){case x.packet.literalData:case x.packet.compressedData:case x.packet.aeadEncryptedData:case x.packet.symEncryptedIntegrityProtectedData:case x.packet.symmetricallyEncryptedData:return void(this.state=to.PlaintextOrEncryptedData);case x.packet.signature:if(this.state===to.StandaloneAdditionalAllowedData&&--this.leadingOnePassSignatureCounter<0)throw new vc("Trailing signature packet without OPS");return;case x.packet.onePassSignature:if(this.state===to.StandaloneAdditionalAllowedData)throw new vc("OPS following StandaloneAdditionalAllowedData");return void this.leadingOnePassSignatureCounter++;case x.packet.publicKeyEncryptedSessionKey:case x.packet.symEncryptedSessionKey:return void(this.state=to.EncryptedSessionKeys);default:if(!e?.[n])throw new vc(`Unexpected packet ${n} in state ${this.state}`);return void(this.state=to.StandaloneAdditionalAllowedData)}case to.PlaintextOrEncryptedData:if(n===x.packet.signature){if(--this.leadingOnePassSignatureCounter<0)throw new vc("Trailing signature packet without OPS");return void(this.state=to.PlaintextOrEncryptedData)}if(!e?.[n])throw new vc(`Unexpected packet ${n} in state ${this.state}`);return void(this.state=to.PlaintextOrEncryptedData);case to.EncryptedSessionKeys:switch(n){case x.packet.publicKeyEncryptedSessionKey:case x.packet.symEncryptedSessionKey:return void(this.state=to.EncryptedSessionKeys);case x.packet.symEncryptedIntegrityProtectedData:case x.packet.aeadEncryptedData:case x.packet.symmetricallyEncryptedData:return void(this.state=to.PlaintextOrEncryptedData);case x.packet.signature:if(--this.leadingOnePassSignatureCounter<0)throw new vc("Trailing signature packet without OPS");return void(this.state=to.PlaintextOrEncryptedData);default:if(!e?.[n])throw new vc(`Unexpected packet ${n} in state ${this.state}`);this.state=to.EncryptedSessionKeys}}}recordEnd(){switch(this.state){case to.EmptyMessage:case to.PlaintextOrEncryptedData:case to.EncryptedSessionKeys:case to.StandaloneAdditionalAllowedData:if(this.leadingOnePassSignatureCounter>0)throw new vc("Missing trailing signature packets")}}},Rbe=H.constructAllowedPackets([su,fl,ps]),Rh=class{static get tag(){return x.packet.compressedData}constructor(n=_t){this.packets=null,this.algorithm=n.preferredCompressionAlgorithm,this.compressed=null}read(t){return B(this,arguments,function*(n,e=_t){yield l1(n,r=>B(this,null,function*(){this.algorithm=yield r.readByte(),this.compressed=r.remainder(),yield this.decompress(e)}))})}write(){return this.compressed===null&&this.compress(),H.concat([new Uint8Array([this.algorithm]),this.compressed])}decompress(){return B(this,arguments,function*(n=_t){let e=x.read(x.compression,this.algorithm),t=Fbe[e];if(!t)throw Error(e+" decompression not supported");this.packets=yield lr.fromBinary(yield t(this.compressed),Rbe,n,new Km)})}compress(){let n=x.read(x.compression,this.algorithm),e=Dbe[n];if(!e)throw Error(n+" compression not supported");this.compressed=e(this.packets.write())}};function Qb(i,n){return e=>{if(!H.isStream(e)||uo(e))return lu(()=>yo(e).then(s=>new Promise((a,l)=>{let c=new n;c.ondata=d=>{a(d)};try{c.push(s,!0)}catch(d){l(d)}})));if(i)try{let s=i();return e.pipeThrough(s)}catch(s){if(s.name!=="TypeError")throw s}let t=e.getReader(),r=new n;return new ReadableStream({start(s){return B(this,null,function*(){for(r.ondata=(a,l)=>B(this,null,function*(){s.enqueue(a),l&&s.close()});;){let{done:a,value:l}=yield t.read();if(a)return void r.push(new Uint8Array,!0);l.length&&r.push(l)}})}})}}function Pbe(){return function(i){return B(this,null,function*(){let{decode:n}=yield import("./chunk-VAXGTK6V.js").then(function(e){return e.i});return lu(()=>B(this,null,function*(){return n(yield yo(i))}))})}}var Zb=i=>({compressor:typeof CompressionStream<"u"&&(()=>new CompressionStream(i)),decompressor:typeof DecompressionStream<"u"&&(()=>new DecompressionStream(i))}),Dbe={zip:Qb(Zb("deflate-raw").compressor,Rb),zlib:Qb(Zb("deflate").compressor,Ebe)},Fbe={uncompressed:i=>i,zip:Qb(Zb("deflate-raw").decompressor,Pb),zlib:Qb(Zb("deflate").decompressor,Abe),bzip2:Pbe()},kbe=H.constructAllowedPackets([su,Rh,fl,ps]),$m=class i{static get tag(){return x.packet.symEncryptedIntegrityProtectedData}static fromObject({version:n,aeadAlgorithm:e}){if(n!==1&&n!==2)throw Error("Unsupported SEIPD version");let t=new i;return t.version=n,n===2&&(t.aeadAlgorithm=e),t}constructor(){this.version=null,this.cipherAlgorithm=null,this.aeadAlgorithm=null,this.chunkSizeByte=null,this.salt=null,this.encrypted=null,this.packets=null}read(n){return B(this,null,function*(){yield l1(n,e=>B(this,null,function*(){if(this.version=yield e.readByte(),this.version!==1&&this.version!==2)throw new jn(`Version ${this.version} of the SEIP packet is unsupported.`);this.version===2&&(this.cipherAlgorithm=yield e.readByte(),this.aeadAlgorithm=yield e.readByte(),this.chunkSizeByte=yield e.readByte(),this.salt=yield e.readBytes(32)),this.encrypted=e.remainder()}))})}write(){return this.version===2?H.concat([new Uint8Array([this.version,this.cipherAlgorithm,this.aeadAlgorithm,this.chunkSizeByte]),this.salt,this.encrypted]):H.concat([new Uint8Array([this.version]),this.encrypted])}encrypt(r,o){return B(this,arguments,function*(n,e,t=_t){let{blockSize:s,keySize:a}=cr(n);if(e.length!==a)throw Error("Unexpected session key size");let l=this.packets.write();if(uo(l)&&(l=yield yo(l)),this.version===2)this.cipherAlgorithm=n,this.salt=Yo(32),this.chunkSizeByte=t.aeadChunkSizeByte,this.encrypted=yield e1(this,"encrypt",e,l);else{let c=yield r9(n),d=new Uint8Array([211,20]),h=H.concat([c,l,d]),_=yield kc(x.hash.sha1,L0(h)),C=H.concat([h,_]);this.encrypted=yield W0(n,e,C,new Uint8Array(s))}return!0})}decrypt(r,o){return B(this,arguments,function*(n,e,t=_t){if(e.length!==cr(n).keySize)throw Error("Unexpected session key size");let s,a=xh(this.encrypted);uo(a)&&(a=yield yo(a));let l=!1;if(this.version===2){if(this.cipherAlgorithm!==n)throw Error("Unexpected session key algorithm");s=yield e1(this,"decrypt",e,a)}else{let{blockSize:c}=cr(n),d=yield m1(n,e,a,new Uint8Array(c)),h=ds(L0(d),-20),_=ds(d,0,-20),C=Promise.all([yo(yield kc(x.hash.sha1,L0(_))),yo(h)]).then(([b,E])=>{if(!H.equalsUint8Array(b,E))throw Error("Modification detected.");return new Uint8Array}),I=ds(_,c+2);s=ds(I,0,-2),s=oa([s,lu(()=>C)]),H.isStream(a)&&t.allowUnauthenticatedStream?l=!0:s=yield yo(s)}return this.packets=yield lr.fromBinary(s,kbe,t,new Km,l),!0})}};function e1(i,n,e,t){return B(this,null,function*(){let r=i instanceof $m&&i.version===2,o=!r&&i.constructor.tag===x.packet.aeadEncryptedData;if(!r&&!o)throw Error("Unexpected packet type");let s=Md(i.aeadAlgorithm,o),a=n==="decrypt"?s.tagLength:0,l=n==="encrypt"?s.tagLength:0,c=2**(i.chunkSizeByte+6)+a,d=o?8:0,h=new ArrayBuffer(13+d),_=new Uint8Array(h,0,5+d),C=new Uint8Array(h),I=new DataView(h),b=new Uint8Array(h,5,8);_.set([192|i.constructor.tag,i.version,i.cipherAlgorithm,i.aeadAlgorithm,i.chunkSizeByte],0);let E,R,T=0,A=Promise.resolve(),U=0,z=0;if(r){let{keySize:re}=cr(i.cipherAlgorithm),{ivLength:Z}=s,ae=new Uint8Array(h,0,5),Ie=yield ru(x.hash.sha256,e,i.salt,ae,re+Z);e=Ie.subarray(0,re),E=Ie.subarray(re),E.fill(0,E.length-8),R=new DataView(E.buffer,E.byteOffset,E.byteLength)}else E=i.iv;let ee=yield s(i.cipherAlgorithm,e);return au(t,(re,Z)=>B(this,null,function*(){if(H.isStream(re)!=="array"){let ye=new TransformStream({},{highWaterMark:H.getHardwareConcurrency()*2**(i.chunkSizeByte+6),size:xe=>xe.length});Ah(ye.readable,Z),Z=ye.writable}let ae=Bd(re),Ie=Ga(Z);try{for(;;){let ye=(yield ae.readBytes(c+a))||new Uint8Array,xe=ye.subarray(ye.length-a),Le,gi,be;if(ye=ye.subarray(0,ye.length-a),r)be=E;else{be=E.slice();for(let $e=0;$e<8;$e++)be[E.length-8+$e]^=b[$e]}if(!T||ye.length?(ae.unshift(xe),Le=ee[n](ye,be,_),Le.catch(()=>{}),z+=ye.length-a+l):(I.setInt32(5+d+4,U),Le=ee[n](xe,be,C),Le.catch(()=>{}),z+=l,gi=!0),U+=ye.length-a,A=A.then(()=>Le).then($e=>B(this,null,function*(){yield Ie.ready,yield Ie.write($e),z-=$e.length})).catch($e=>Ie.abort($e)),(gi||z>Ie.desiredSize)&&(yield A),gi){yield Ie.close();break}r?R.setInt32(E.length-4,++T):I.setInt32(9,++T)}}catch(ye){yield Ie.ready.catch(()=>{}),yield Ie.abort(ye)}}))})}var Nbe=H.constructAllowedPackets([su,Rh,fl,ps]),eP=class{static get tag(){return x.packet.aeadEncryptedData}constructor(){this.version=1,this.cipherAlgorithm=null,this.aeadAlgorithm=x.aead.eax,this.chunkSizeByte=null,this.iv=null,this.encrypted=null,this.packets=null}read(n){return B(this,null,function*(){yield l1(n,e=>B(this,null,function*(){let t=yield e.readByte();if(t!==1)throw new jn(`Version ${t} of the AEAD-encrypted data packet is not supported.`);this.cipherAlgorithm=yield e.readByte(),this.aeadAlgorithm=yield e.readByte(),this.chunkSizeByte=yield e.readByte();let r=Md(this.aeadAlgorithm,!0);this.iv=yield e.readBytes(r.ivLength),this.encrypted=e.remainder()}))})}write(){return H.concat([new Uint8Array([this.version,this.cipherAlgorithm,this.aeadAlgorithm,this.chunkSizeByte]),this.iv,this.encrypted])}decrypt(r,o){return B(this,arguments,function*(n,e,t=_t){this.packets=yield lr.fromBinary(yield e1(this,"decrypt",e,xh(this.encrypted)),Nbe,t,new Km)})}encrypt(r,o){return B(this,arguments,function*(n,e,t=_t){this.cipherAlgorithm=n;let{ivLength:s}=Md(this.aeadAlgorithm,!0);this.iv=Yo(s),this.chunkSizeByte=t.aeadChunkSizeByte;let a=this.packets.write();this.encrypted=yield e1(this,"encrypt",e,a)})}},K0=class i{static get tag(){return x.packet.publicKeyEncryptedSessionKey}constructor(){this.version=null,this.publicKeyID=new Vd,this.publicKeyVersion=null,this.publicKeyFingerprint=null,this.publicKeyAlgorithm=null,this.sessionKey=null,this.sessionKeyAlgorithm=null,this.encrypted={}}static fromObject({version:n,encryptionKeyPacket:e,anonymousRecipient:t,sessionKey:r,sessionKeyAlgorithm:o}){let s=new i;if(n!==3&&n!==6)throw Error("Unsupported PKESK version");return s.version=n,n===6&&(s.publicKeyVersion=t?null:e.version,s.publicKeyFingerprint=t?null:e.getFingerprintBytes()),s.publicKeyID=t?Vd.wildcard():e.getKeyID(),s.publicKeyAlgorithm=e.algorithm,s.sessionKey=r,s.sessionKeyAlgorithm=o,s}read(n){let e=0;if(this.version=n[e++],this.version!==3&&this.version!==6)throw new jn(`Version ${this.version} of the PKESK packet is unsupported.`);if(this.version===6){let t=n[e++];if(t){this.publicKeyVersion=n[e++];let r=t-1;this.publicKeyFingerprint=n.subarray(e,e+r),e+=r,this.publicKeyVersion>=5?this.publicKeyID.read(this.publicKeyFingerprint):this.publicKeyID.read(this.publicKeyFingerprint.subarray(-8))}else this.publicKeyID=Vd.wildcard()}else e+=this.publicKeyID.read(n.subarray(e,e+8));if(this.publicKeyAlgorithm=n[e++],this.encrypted=function(t,r){let o=0;switch(t){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:return{c:H.readMPI(r.subarray(o))};case x.publicKey.elgamal:{let s=H.readMPI(r.subarray(o));return o+=s.length+2,{c1:s,c2:H.readMPI(r.subarray(o))}}case x.publicKey.ecdh:{let s=H.readMPI(r.subarray(o));o+=s.length+2;let a=new Hb;return a.read(r.subarray(o)),{V:s,C:a}}case x.publicKey.x25519:case x.publicKey.x448:{let s=Mm(t),a=H.readExactSubarray(r,o,o+s);o+=a.length;let l=new zb;return l.read(r.subarray(o)),{ephemeralPublicKey:a,C:l}}default:throw new jn("Unknown public key encryption algorithm.")}}(this.publicKeyAlgorithm,n.subarray(e)),this.publicKeyAlgorithm===x.publicKey.x25519||this.publicKeyAlgorithm===x.publicKey.x448){if(this.version===3)this.sessionKeyAlgorithm=x.write(x.symmetric,this.encrypted.C.algorithm);else if(this.encrypted.C.algorithm!==null)throw Error("Unexpected cleartext symmetric algorithm")}}write(){let n=[new Uint8Array([this.version])];return this.version===6?this.publicKeyFingerprint!==null?(n.push(new Uint8Array([this.publicKeyFingerprint.length+1,this.publicKeyVersion])),n.push(this.publicKeyFingerprint)):n.push(new Uint8Array([0])):n.push(this.publicKeyID.write()),n.push(new Uint8Array([this.publicKeyAlgorithm]),zm(this.publicKeyAlgorithm,this.encrypted)),H.concatUint8Array(n)}encrypt(n){return B(this,null,function*(){let e=x.write(x.publicKey,this.publicKeyAlgorithm),t=this.version===3?this.sessionKeyAlgorithm:null,r=n.version===5?n.getFingerprintBytes().subarray(0,20):n.getFingerprintBytes(),o=Yj(this.version,e,t,this.sessionKey);this.encrypted=yield rbe(e,t,n.publicParams,o,r)})}decrypt(n,e){return B(this,null,function*(){if(this.publicKeyAlgorithm!==n.algorithm)throw Error("Decryption error");let t=e?Yj(this.version,this.publicKeyAlgorithm,e.sessionKeyAlgorithm,e.sessionKey):null,r=n.version===5?n.getFingerprintBytes().subarray(0,20):n.getFingerprintBytes(),o=yield obe(this.publicKeyAlgorithm,n.publicParams,n.privateParams,this.encrypted,r,t),{sessionKey:s,sessionKeyAlgorithm:a}=function(l,c,d,h){switch(c){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.elgamal:case x.publicKey.ecdh:{let _=d.subarray(0,d.length-2),C=d.subarray(d.length-2),I=H.writeChecksum(_.subarray(_.length%8)),b=I[0]===C[0]&I[1]===C[1],E=l===6?{sessionKeyAlgorithm:null,sessionKey:_}:{sessionKeyAlgorithm:_[0],sessionKey:_.subarray(1)};if(h){let R=b&E.sessionKeyAlgorithm===h.sessionKeyAlgorithm&E.sessionKey.length===h.sessionKey.length;return{sessionKey:H.selectUint8Array(R,E.sessionKey,h.sessionKey),sessionKeyAlgorithm:l===6?null:H.selectUint8(R,E.sessionKeyAlgorithm,h.sessionKeyAlgorithm)}}if(b&&(l===6||x.read(x.symmetric,E.sessionKeyAlgorithm)))return E;throw Error("Decryption error")}case x.publicKey.x25519:case x.publicKey.x448:return{sessionKeyAlgorithm:null,sessionKey:d};default:throw Error("Unsupported public key algorithm")}}(this.version,this.publicKeyAlgorithm,o,e);if(this.version===3){let l=this.publicKeyAlgorithm!==x.publicKey.x25519&&this.publicKeyAlgorithm!==x.publicKey.x448;if(this.sessionKeyAlgorithm=l?a:this.sessionKeyAlgorithm,s.length!==cr(this.sessionKeyAlgorithm).keySize)throw Error("Unexpected session key size")}this.sessionKey=s})}};function Yj(i,n,e,t){switch(n){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.elgamal:case x.publicKey.ecdh:return H.concatUint8Array([new Uint8Array(i===6?[]:[e]),t,H.writeChecksum(t.subarray(t.length%8))]);case x.publicKey.x25519:case x.publicKey.x448:return t;default:throw Error("Unsupported public key algorithm")}}var $0=class i{static get tag(){return x.packet.symEncryptedSessionKey}constructor(n=_t){this.version=n.aeadProtect?6:4,this.sessionKey=null,this.sessionKeyEncryptionAlgorithm=null,this.sessionKeyAlgorithm=null,this.aeadAlgorithm=x.write(x.aead,n.preferredAEADAlgorithm),this.encrypted=null,this.s2k=null,this.iv=null}read(n){let e=0;if(this.version=n[e++],this.version!==4&&this.version!==5&&this.version!==6)throw new jn(`Version ${this.version} of the SKESK packet is unsupported.`);this.version===6&&e++;let t=n[e++];this.version>=5&&(this.aeadAlgorithm=n[e++],this.version===6&&e++);let r=n[e++];if(this.s2k=Yb(r),e+=this.s2k.read(n.subarray(e,n.length)),this.version>=5){let o=Md(this.aeadAlgorithm,!0);this.iv=n.subarray(e,e+=o.ivLength)}this.version>=5||e<n.length?(this.encrypted=n.subarray(e,n.length),this.sessionKeyEncryptionAlgorithm=t):this.sessionKeyAlgorithm=t}write(){let n=this.encrypted===null?this.sessionKeyAlgorithm:this.sessionKeyEncryptionAlgorithm,e,t=this.s2k.write();if(this.version===6){let r=t.length,o=3+r+this.iv.length;e=H.concatUint8Array([new Uint8Array([this.version,o,n,this.aeadAlgorithm,r]),t,this.iv,this.encrypted])}else this.version===5?e=H.concatUint8Array([new Uint8Array([this.version,n,this.aeadAlgorithm]),t,this.iv,this.encrypted]):(e=H.concatUint8Array([new Uint8Array([this.version,n]),t]),this.encrypted!==null&&(e=H.concatUint8Array([e,this.encrypted])));return e}decrypt(n){return B(this,null,function*(){let e=this.sessionKeyEncryptionAlgorithm!==null?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm,{blockSize:t,keySize:r}=cr(e),o=yield this.s2k.produceKey(n,r);if(this.version>=5){let s=Md(this.aeadAlgorithm,!0),a=new Uint8Array([192|i.tag,this.version,this.sessionKeyEncryptionAlgorithm,this.aeadAlgorithm]),l=this.version===6?yield ru(x.hash.sha256,o,new Uint8Array,a,r):o,c=yield s(e,l);this.sessionKey=yield c.decrypt(this.encrypted,this.iv,a)}else if(this.encrypted!==null){let s=yield m1(e,o,this.encrypted,new Uint8Array(t));if(this.sessionKeyAlgorithm=x.write(x.symmetric,s[0]),this.sessionKey=s.subarray(1,s.length),this.sessionKey.length!==cr(this.sessionKeyAlgorithm).keySize)throw Error("Unexpected session key size")}else this.sessionKey=o})}encrypt(t){return B(this,arguments,function*(n,e=_t){let r=this.sessionKeyEncryptionAlgorithm!==null?this.sessionKeyEncryptionAlgorithm:this.sessionKeyAlgorithm;this.sessionKeyEncryptionAlgorithm=r,this.s2k=o9(e),this.s2k.generateSalt();let{blockSize:o,keySize:s}=cr(r),a=yield this.s2k.produceKey(n,s);if(this.sessionKey===null&&(this.sessionKey=zR(this.sessionKeyAlgorithm)),this.version>=5){let l=Md(this.aeadAlgorithm);this.iv=Yo(l.ivLength);let c=new Uint8Array([192|i.tag,this.version,this.sessionKeyEncryptionAlgorithm,this.aeadAlgorithm]),d=this.version===6?yield ru(x.hash.sha256,a,new Uint8Array,c,s):a,h=yield l(r,d);this.encrypted=yield h.encrypt(this.sessionKey,this.iv,c)}else{let l=H.concatUint8Array([new Uint8Array([this.sessionKeyAlgorithm]),this.sessionKey]);this.encrypted=yield W0(r,a,l,new Uint8Array(o))}})}},Rc=class i{static get tag(){return x.packet.publicKey}constructor(n=new Date,e=_t){this.version=e.v6Keys?6:4,this.created=H.normalizeDate(n),this.algorithm=null,this.publicParams=null,this.expirationTimeV3=0,this.fingerprint=null,this.keyID=null}static fromSecretKeyPacket(n){let e=new i,{version:t,created:r,algorithm:o,publicParams:s,keyID:a,fingerprint:l}=n;return e.version=t,e.created=r,e.algorithm=o,e.publicParams=s,e.keyID=a,e.fingerprint=l,e}read(t){return B(this,arguments,function*(n,e=_t){let r=0;if(this.version=n[r++],this.version===5&&!e.enableParsingV5Entities)throw new jn("Support for parsing v5 entities is disabled; turn on `config.enableParsingV5Entities` if needed");if(this.version===4||this.version===5||this.version===6){this.created=H.readDate(n.subarray(r,r+4)),r+=4,this.algorithm=n[r++],this.version>=5&&(r+=4);let{read:o,publicParams:s}=function(a,l){let c=0;switch(a){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:{let d=H.readMPI(l.subarray(c));c+=d.length+2;let h=H.readMPI(l.subarray(c));return c+=h.length+2,{read:c,publicParams:{n:d,e:h}}}case x.publicKey.dsa:{let d=H.readMPI(l.subarray(c));c+=d.length+2;let h=H.readMPI(l.subarray(c));c+=h.length+2;let _=H.readMPI(l.subarray(c));c+=_.length+2;let C=H.readMPI(l.subarray(c));return c+=C.length+2,{read:c,publicParams:{p:d,q:h,g:_,y:C}}}case x.publicKey.elgamal:{let d=H.readMPI(l.subarray(c));c+=d.length+2;let h=H.readMPI(l.subarray(c));c+=h.length+2;let _=H.readMPI(l.subarray(c));return c+=_.length+2,{read:c,publicParams:{p:d,g:h,y:_}}}case x.publicKey.ecdsa:{let d=new Ld;c+=d.read(l),mR(d);let h=H.readMPI(l.subarray(c));return c+=h.length+2,{read:c,publicParams:{oid:d,Q:h}}}case x.publicKey.eddsaLegacy:{let d=new Ld;if(c+=d.read(l),mR(d),d.getName()!==x.curve.ed25519Legacy)throw Error("Unexpected OID for eddsaLegacy");let h=H.readMPI(l.subarray(c));return c+=h.length+2,h=H.leftPad(h,33),{read:c,publicParams:{oid:d,Q:h}}}case x.publicKey.ecdh:{let d=new Ld;c+=d.read(l),mR(d);let h=H.readMPI(l.subarray(c));c+=h.length+2;let _=new Wb;return c+=_.read(l.subarray(c)),{read:c,publicParams:{oid:d,Q:h,kdfParams:_}}}case x.publicKey.ed25519:case x.publicKey.ed448:case x.publicKey.x25519:case x.publicKey.x448:{let d=H.readExactSubarray(l,c,c+Mm(a));return c+=d.length,{read:c,publicParams:{A:d}}}default:throw new jn("Unknown public key encryption algorithm.")}}(this.algorithm,n.subarray(r));if(this.version===6&&s.oid&&(s.oid.getName()===x.curve.curve25519Legacy||s.oid.getName()===x.curve.ed25519Legacy))throw Error("Legacy curve25519 cannot be used with v6 keys");return this.publicParams=s,r+=o,yield this.computeFingerprintAndKeyID(),r}throw new jn(`Version ${this.version} of the key packet is unsupported.`)})}write(){let n=[];n.push(new Uint8Array([this.version])),n.push(H.writeDate(this.created)),n.push(new Uint8Array([this.algorithm]));let e=zm(this.algorithm,this.publicParams);return this.version>=5&&n.push(H.writeNumber(e.length,4)),n.push(e),H.concatUint8Array(n)}writeForHash(n){let e=this.writePublicKey(),t=149+n,r=n>=5?4:2;return H.concatUint8Array([new Uint8Array([t]),H.writeNumber(e.length,r),e])}isDecrypted(){return null}getCreationTime(){return this.created}getKeyID(){return this.keyID}computeFingerprintAndKeyID(){return B(this,null,function*(){if(yield this.computeFingerprint(),this.keyID=new Vd,this.version>=5)this.keyID.read(this.fingerprint.subarray(0,8));else{if(this.version!==4)throw Error("Unsupported key version");this.keyID.read(this.fingerprint.subarray(12,20))}})}computeFingerprint(){return B(this,null,function*(){let n=this.writeForHash(this.version);if(this.version>=5)this.fingerprint=yield kc(x.hash.sha256,n);else{if(this.version!==4)throw Error("Unsupported key version");this.fingerprint=yield kc(x.hash.sha1,n)}})}getFingerprintBytes(){return this.fingerprint}getFingerprint(){return H.uint8ArrayToHex(this.getFingerprintBytes())}hasSameFingerprintAs(n){return this.version===n.version&&H.equalsUint8Array(this.writePublicKey(),n.writePublicKey())}getAlgorithmInfo(){let n={};n.algorithm=x.read(x.publicKey,this.algorithm);let e=this.publicParams.n||this.publicParams.p;return e?n.bits=H.uint8ArrayBitLength(e):this.publicParams.oid&&(n.curve=this.publicParams.oid.getName()),n}};Rc.prototype.readPublicKey=Rc.prototype.read,Rc.prototype.writePublicKey=Rc.prototype.write;var Lbe=H.constructAllowedPackets([su,Rh,fl,ps]),tP=class{static get tag(){return x.packet.symmetricallyEncryptedData}constructor(){this.encrypted=null,this.packets=null}read(n){this.encrypted=n}write(){return this.encrypted}decrypt(r,o){return B(this,arguments,function*(n,e,t=_t){if(!t.allowUnauthenticatedMessages)throw Error("Message is not authenticated.");let{blockSize:s}=cr(n),a=yield yo(xh(this.encrypted)),l=yield m1(n,e,a.subarray(s+2),a.subarray(2,s+2));this.packets=yield lr.fromBinary(l,Lbe,t)})}encrypt(r,o){return B(this,arguments,function*(n,e,t=_t){let s=this.packets.write(),{blockSize:a}=cr(n),l=yield r9(n),c=yield W0(n,e,l,new Uint8Array(a)),d=yield W0(n,e,s,c.subarray(2));this.encrypted=H.concat([c,d])})}};var t1=class i extends Rc{static get tag(){return x.packet.publicSubkey}constructor(n,e){super(n,e)}static fromSecretSubkeyPacket(n){let e=new i,{version:t,created:r,algorithm:o,publicParams:s,keyID:a,fingerprint:l}=n;return e.version=t,e.created=r,e.algorithm=o,e.publicParams=s,e.keyID=a,e.fingerprint=l,e}},iP=class i{static get tag(){return x.packet.userAttribute}constructor(){this.attributes=[]}read(n){let e=0;for(;e<n.length;){let t=S7(n.subarray(e,n.length));e+=t.offset,this.attributes.push(H.uint8ArrayToString(n.subarray(e,e+t.len))),e+=t.len}}write(){let n=[];for(let e=0;e<this.attributes.length;e++)n.push(c1(this.attributes[e].length)),n.push(H.stringToUint8Array(this.attributes[e]));return H.concatUint8Array(n)}equals(n){return!!(n&&n instanceof i)&&this.attributes.every(function(e,t){return e===n.attributes[t]})}},J0=class extends Rc{static get tag(){return x.packet.secretKey}constructor(n=new Date,e=_t){super(n,e),this.keyMaterial=null,this.isEncrypted=null,this.s2kUsage=0,this.s2k=null,this.symmetric=null,this.aead=null,this.isLegacyAEAD=null,this.privateParams=null,this.usedModernAEAD=null}read(t){return B(this,arguments,function*(n,e=_t){let r=yield this.readPublicKey(n,e),o=r;this.s2kUsage=n[r++],this.version===5&&r++,this.version===6&&this.s2kUsage&&r++;try{if(this.s2kUsage===255||this.s2kUsage===254||this.s2kUsage===253){this.symmetric=n[r++],this.s2kUsage===253&&(this.aead=n[r++]),this.version===6&&r++;let s=n[r++];if(this.s2k=Yb(s),r+=this.s2k.read(n.subarray(r,n.length)),this.s2k.type==="gnu-dummy")return}else this.s2kUsage&&(this.symmetric=this.s2kUsage);this.s2kUsage&&(this.isLegacyAEAD=this.s2kUsage===253&&(this.version===5||this.version===4&&e.parseAEADEncryptedV4KeysAsLegacy),this.s2kUsage!==253||this.isLegacyAEAD?(this.iv=n.subarray(r,r+cr(this.symmetric).blockSize),this.usedModernAEAD=!1):(this.iv=n.subarray(r,r+Md(this.aead).ivLength),this.usedModernAEAD=!0),r+=this.iv.length)}catch(s){if(!this.s2kUsage)throw s;this.unparseableKeyMaterial=n.subarray(o),this.isEncrypted=!0}if(this.version===5&&(r+=4),this.keyMaterial=n.subarray(r),this.isEncrypted=!!this.s2kUsage,!this.isEncrypted){let s;if(this.version===6)s=this.keyMaterial;else if(s=this.keyMaterial.subarray(0,-2),!H.equalsUint8Array(H.writeChecksum(s),this.keyMaterial.subarray(-2)))throw Error("Key checksum mismatch");try{let{read:a,privateParams:l}=Mj(this.algorithm,s,this.publicParams);if(a<s.length)throw Error("Error reading MPIs");this.privateParams=l}catch(a){throw a instanceof jn?a:Error("Error reading MPIs")}}})}write(){let n=this.writePublicKey();if(this.unparseableKeyMaterial)return H.concatUint8Array([n,this.unparseableKeyMaterial]);let e=[n];e.push(new Uint8Array([this.s2kUsage]));let t=[];if(this.s2kUsage===255||this.s2kUsage===254||this.s2kUsage===253){t.push(this.symmetric),this.s2kUsage===253&&t.push(this.aead);let r=this.s2k.write();this.version===6&&t.push(r.length),t.push(...r)}return this.s2kUsage&&this.s2k.type!=="gnu-dummy"&&t.push(...this.iv),(this.version===5||this.version===6&&this.s2kUsage)&&e.push(new Uint8Array([t.length])),e.push(new Uint8Array(t)),this.isDummy()||(this.s2kUsage||(this.keyMaterial=zm(this.algorithm,this.privateParams)),this.version===5&&e.push(H.writeNumber(this.keyMaterial.length,4)),e.push(this.keyMaterial),this.s2kUsage||this.version===6||e.push(H.writeChecksum(this.keyMaterial))),H.concatUint8Array(e)}isDecrypted(){return this.isEncrypted===!1}isMissingSecretKeyMaterial(){return this.unparseableKeyMaterial!==void 0||this.isDummy()}isDummy(){return!(!this.s2k||this.s2k.type!=="gnu-dummy")}makeDummy(n=_t){this.isDummy()||(this.isDecrypted()&&this.clearPrivateParams(),delete this.unparseableKeyMaterial,this.isEncrypted=null,this.keyMaterial=null,this.s2k=Yb(x.s2k.gnu,n),this.s2k.algorithm=0,this.s2k.c=0,this.s2k.type="gnu-dummy",this.s2kUsage=254,this.symmetric=x.symmetric.aes256,this.isLegacyAEAD=null,this.usedModernAEAD=null)}encrypt(t){return B(this,arguments,function*(n,e=_t){if(this.isDummy())return;if(!this.isDecrypted())throw Error("Key packet is already encrypted");if(!n)throw Error("A non-empty passphrase is required for key encryption.");this.s2k=o9(e),this.s2k.generateSalt();let r=zm(this.algorithm,this.privateParams);this.symmetric=x.symmetric.aes256;let{blockSize:o}=cr(this.symmetric);if(e.aeadProtect){this.s2kUsage=253,this.aead=e.preferredAEADAlgorithm;let s=Md(this.aead);this.isLegacyAEAD=this.version===5,this.usedModernAEAD=!this.isLegacyAEAD;let a=Lb(this.constructor.tag),l=yield SR(this.version,this.s2k,n,this.symmetric,this.aead,a,this.isLegacyAEAD),c=yield s(this.symmetric,l);this.iv=this.isLegacyAEAD?Yo(o):Yo(s.ivLength);let d=this.isLegacyAEAD?new Uint8Array:H.concatUint8Array([a,this.writePublicKey()]);this.keyMaterial=yield c.encrypt(r,this.iv.subarray(0,s.ivLength),d)}else{this.s2kUsage=254,this.usedModernAEAD=!1;let s=yield SR(this.version,this.s2k,n,this.symmetric);this.iv=Yo(o),this.keyMaterial=yield W0(this.symmetric,s,H.concatUint8Array([r,yield kc(x.hash.sha1,r)]),this.iv)}})}decrypt(n){return B(this,null,function*(){if(this.isDummy())return!1;if(this.unparseableKeyMaterial)throw Error("Key packet cannot be decrypted: unsupported S2K or cipher algo");if(this.isDecrypted())throw Error("Key packet is already decrypted.");let e,t=Lb(this.constructor.tag);if(this.s2kUsage!==254&&this.s2kUsage!==253)throw this.s2kUsage===255?Error("Encrypted private key is authenticated using an insecure two-byte hash"):Error("Private key is encrypted using an insecure S2K function: unsalted MD5");let r;if(e=yield SR(this.version,this.s2k,n,this.symmetric,this.aead,t,this.isLegacyAEAD),this.s2kUsage===253){let o=Md(this.aead,!0),s=yield o(this.symmetric,e);try{let a=this.isLegacyAEAD?new Uint8Array:H.concatUint8Array([t,this.writePublicKey()]);r=yield s.decrypt(this.keyMaterial,this.iv.subarray(0,o.ivLength),a)}catch(a){throw a.message==="Authentication tag mismatch"?Error("Incorrect key passphrase: "+a.message):a}}else{let o=yield m1(this.symmetric,e,this.keyMaterial,this.iv);r=o.subarray(0,-20);let s=yield kc(x.hash.sha1,r);if(!H.equalsUint8Array(s,o.subarray(-20)))throw Error("Incorrect key passphrase")}try{let{privateParams:o}=Mj(this.algorithm,r,this.publicParams);this.privateParams=o}catch{throw Error("Error reading MPIs")}this.isEncrypted=!1,this.keyMaterial=null,this.s2kUsage=0,this.aead=null,this.symmetric=null,this.isLegacyAEAD=null})}validate(){return B(this,null,function*(){if(this.isDummy())return;if(!this.isDecrypted())throw Error("Key is not decrypted");if(this.usedModernAEAD)return;let n;try{n=yield abe(this.algorithm,this.publicParams,this.privateParams)}catch{n=!1}if(!n)throw Error("Key is invalid")})}generate(n,e){return B(this,null,function*(){if(this.version===6&&(this.algorithm===x.publicKey.ecdh&&e===x.curve.curve25519Legacy||this.algorithm===x.publicKey.eddsaLegacy))throw Error(`Cannot generate v6 keys of type 'ecc' with curve ${e}. Generate a key of type 'curve25519' instead`);let{privateParams:t,publicParams:r}=yield sbe(this.algorithm,n,e);this.privateParams=t,this.publicParams=r,this.isEncrypted=!1})}clearPrivateParams(){this.isMissingSecretKeyMaterial()||(Object.keys(this.privateParams).forEach(n=>{this.privateParams[n].fill(0),delete this.privateParams[n]}),this.privateParams=null,this.isEncrypted=!0)}};function SR(i,n,e,t,r,o,s){return B(this,null,function*(){if(n.type==="argon2"&&!r)throw Error("Using Argon2 S2K without AEAD is not allowed");if(n.type==="simple"&&i===6)throw Error("Using Simple S2K with version 6 keys is not allowed");let{keySize:a}=cr(t),l=yield n.produceKey(e,a);if(!r||i===5||s)return l;let c=H.concatUint8Array([o,new Uint8Array([i,t,r])]);return ru(x.hash.sha256,l,new Uint8Array,c,a)})}var i1=class i{static get tag(){return x.packet.userID}constructor(){this.userID="",this.name="",this.email="",this.comment=""}static fromObject(n){if(H.isString(n)||n.name&&!H.isString(n.name)||n.email&&!H.isEmailAddress(n.email)||n.comment&&!H.isString(n.comment))throw Error("Invalid user ID format");let e=new i;Object.assign(e,n);let t=[];return e.name&&t.push(e.name),e.comment&&t.push(`(${e.comment})`),e.email&&t.push(`<${e.email}>`),e.userID=t.join(" "),e}read(n,e=_t){let t=H.decodeUTF8(n);if(t.length>e.maxUserIDLength)throw Error("User ID string is too long");let r=a=>/^[^\s@]+@[^\s@]+$/.test(a),o=t.indexOf("<"),s=t.lastIndexOf(">");if(o!==-1&&s!==-1&&s>o){let a=t.substring(o+1,s);if(r(a)){this.email=a;let l=t.substring(0,o).trim(),c=l.indexOf("("),d=l.lastIndexOf(")");c!==-1&&d!==-1&&d>c?(this.comment=l.substring(c+1,d).trim(),this.name=l.substring(0,c).trim()):(this.name=l,this.comment="")}}else r(t.trim())&&(this.email=t.trim(),this.name="",this.comment="");this.userID=t}write(){return H.encodeUTF8(this.userID)}equals(n){return n&&n.userID===this.userID}},n1=class extends J0{static get tag(){return x.packet.secretSubkey}constructor(n=new Date,e=_t){super(n,e)}};var r1=class{constructor(n){this.packets=n||new lr}write(){return this.packets.write()}armor(n=_t){let e=this.packets.some(t=>t.constructor.tag===ps.tag&&t.version!==6);return eC(x.armor.signature,this.write(),void 0,void 0,void 0,e,n)}getSigningKeyIDs(){return this.packets.map(n=>n.issuerKeyID)}};function h9(i,n){return B(this,null,function*(){let e=new n1(i.date,n);return e.packets=null,e.algorithm=x.write(x.publicKey,i.algorithm),yield e.generate(i.rsaBits,i.curve),yield e.computeFingerprintAndKeyID(),e})}function Mbe(i,n){return B(this,null,function*(){let e=new J0(i.date,n);return e.packets=null,e.algorithm=x.write(x.publicKey,i.algorithm),yield e.generate(i.rsaBits,i.curve,i.config),yield e.computeFingerprintAndKeyID(),e})}function Bl(s,a,l,c){return B(this,arguments,function*(i,n,e,t,r=new Date,o){let d,h;for(let _=i.length-1;_>=0;_--)try{(!d||i[_].created>=d.created)&&(yield i[_].verify(n,e,t,r,void 0,o),d=i[_])}catch(C){h=C}if(!d)throw H.wrapError(`Could not find valid ${x.read(x.signature,e)} signature in key ${n.getKeyID().toHex()}`.replace("certGeneric ","self-").replace(/([a-z])([A-Z])/g,(_,C,I)=>C+" "+I.toLowerCase()),h);return d})}function nP(i,n,e=new Date){let t=H.normalizeDate(e);if(t!==null){let r=o1(i,n);return!(i.created<=t&&t<r)}return!1}function f9(i,n,e,t){return B(this,null,function*(){let r={};r.key=n,r.bind=i;let o={signatureType:x.signature.subkeyBinding};return e.sign?(o.keyFlags=[x.keyFlags.signData],o.embeddedSignature=yield Fc(r,[],i,{signatureType:x.signature.keyBinding},e.date,void 0,void 0,void 0,t)):o.keyFlags=[x.keyFlags.encryptCommunication|x.keyFlags.encryptStorage],e.keyExpirationTime>0&&(o.keyExpirationTime=e.keyExpirationTime,o.keyNeverExpires=!1),yield Fc(r,[],n,o,e.date,void 0,void 0,void 0,t)})}function Vbe(o,s){return B(this,arguments,function*(i,n,e=new Date,t=[],r){let a=x.hash.sha256,l=r.preferredHashAlgorithm,c=yield Promise.all(i.map((C,I)=>B(this,null,function*(){return(yield C.getPrimarySelfSignature(e,t[I],r)).preferredHashAlgorithms||[]}))),d=new Map;for(let C of c)for(let I of C)try{let b=x.write(x.hash,I);d.set(b,d.has(b)?d.get(b)+1:1)}catch{}let h=C=>i.length===0||d.get(C)===i.length||C===a,_=()=>{if(d.size===0)return a;let C=Array.from(d.keys()).filter(I=>h(I)).sort((I,b)=>Do(I)-Do(b))[0];return Do(C)>=Do(a)?C:a};if(new Set([x.publicKey.ecdsa,x.publicKey.eddsaLegacy,x.publicKey.ed25519,x.publicKey.ed448]).has(n.algorithm)){let C=function(E,R){switch(E){case x.publicKey.ecdsa:case x.publicKey.eddsaLegacy:return z7(R);case x.publicKey.ed25519:case x.publicKey.ed448:return p1(E);default:throw Error("Unknown elliptic signing algo")}}(n.algorithm,n.publicParams.oid),I=h(l),b=Do(l)>=Do(C);if(I&&b)return l;{let E=_();return Do(E)>=Do(C)?E:C}}return h(l)?l:_()})}function Fc(c,d,h,_,C,I){return B(this,arguments,function*(i,n,e,t,r,o,s=[],a=!1,l){if(e.isDummy())throw Error("Cannot sign with a gnu-dummy key.");if(!e.isDecrypted())throw Error("Signing key is not decrypted.");let b=new ps;return Object.assign(b,t),b.publicKeyAlgorithm=e.algorithm,b.hashAlgorithm=yield Vbe(n,e,r,o,l),b.rawNotations=[...s],yield b.sign(e,i,r,a,l),b})}function Eh(o,s,a){return B(this,arguments,function*(i,n,e,t=new Date,r){(i=i[e])&&(n[e].length?yield Promise.all(i.map(function(l){return B(this,null,function*(){l.isExpired(t)||r&&!(yield r(l))||n[e].some(function(c){return H.equalsUint8Array(c.writeParams(),l.writeParams())})||n[e].push(l)})})):n[e]=i)})}function Jm(l,c,d,h,_,C){return B(this,arguments,function*(i,n,e,t,r,o,s=new Date,a){o=o||i;let I=[];return yield Promise.all(t.map(function(b){return B(this,null,function*(){try{if(!r||b.issuerKeyID.equals(r.issuerKeyID)){let E=![x.reasonForRevocation.keyRetired,x.reasonForRevocation.keySuperseded,x.reasonForRevocation.userIDInvalid].includes(b.reasonForRevocationFlag);yield b.verify(o,n,e,E?null:s,!1,a),I.push(b.issuerKeyID)}}catch{}})})),r?(r.revoked=!!I.some(b=>b.equals(r.issuerKeyID))||r.revoked||!1,r.revoked):I.length>0})}function o1(i,n){let e;return n.keyNeverExpires===!1&&(e=i.created.getTime()+1e3*n.keyExpirationTime),e?new Date(e):1/0}function rP(i,n={}){switch(i.type=i.type||n.type,i.curve=i.curve||n.curve,i.rsaBits=i.rsaBits||n.rsaBits,i.keyExpirationTime=i.keyExpirationTime!==void 0?i.keyExpirationTime:n.keyExpirationTime,i.passphrase=H.isString(i.passphrase)?i.passphrase:n.passphrase,i.date=i.date||n.date,i.sign=i.sign||!1,i.type){case"ecc":try{i.curve=x.write(x.curve,i.curve)}catch{throw Error("Unknown curve")}i.curve!==x.curve.ed25519Legacy&&i.curve!==x.curve.curve25519Legacy&&i.curve!=="ed25519"&&i.curve!=="curve25519"||(i.curve=i.sign?x.curve.ed25519Legacy:x.curve.curve25519Legacy),i.sign?i.algorithm=i.curve===x.curve.ed25519Legacy?x.publicKey.eddsaLegacy:x.publicKey.ecdsa:i.algorithm=x.publicKey.ecdh;break;case"curve25519":i.algorithm=i.sign?x.publicKey.ed25519:x.publicKey.x25519;break;case"curve448":i.algorithm=i.sign?x.publicKey.ed448:x.publicKey.x448;break;case"rsa":i.algorithm=x.publicKey.rsaEncryptSign;break;default:throw Error("Unsupported key type "+i.type)}return i}function Xj(i,n,e){switch(i.algorithm){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:case x.publicKey.dsa:case x.publicKey.ecdsa:case x.publicKey.eddsaLegacy:case x.publicKey.ed25519:case x.publicKey.ed448:if(!n.keyFlags&&!e.allowMissingKeyFlags)throw Error("None of the key flags is set: consider passing `config.allowMissingKeyFlags`");return!n.keyFlags||!!(n.keyFlags[0]&x.keyFlags.signData);default:return!1}}function Qj(i,n,e){switch(i.algorithm){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:case x.publicKey.elgamal:case x.publicKey.ecdh:case x.publicKey.x25519:case x.publicKey.x448:if(!n.keyFlags&&!e.allowMissingKeyFlags)throw Error("None of the key flags is set: consider passing `config.allowMissingKeyFlags`");return!n.keyFlags||!!(n.keyFlags[0]&x.keyFlags.encryptCommunication)||!!(n.keyFlags[0]&x.keyFlags.encryptStorage);default:return!1}}function Zj(i,n,e){if(!n.keyFlags&&!e.allowMissingKeyFlags)throw Error("None of the key flags is set: consider passing `config.allowMissingKeyFlags`");switch(i.algorithm){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaEncrypt:case x.publicKey.elgamal:case x.publicKey.ecdh:case x.publicKey.x25519:case x.publicKey.x448:return!(!(!n.keyFlags||n.keyFlags[0]&x.keyFlags.signData)||!e.allowInsecureDecryptionWithSigningKeys)||!n.keyFlags||!!(n.keyFlags[0]&x.keyFlags.encryptCommunication)||!!(n.keyFlags[0]&x.keyFlags.encryptStorage);default:return!1}}function Qp(i,n){let e=x.write(x.publicKey,i.algorithm),t=i.getAlgorithmInfo();if(n.rejectPublicKeyAlgorithms.has(e))throw Error(t.algorithm+" keys are considered too weak.");switch(e){case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:case x.publicKey.rsaEncrypt:if(t.bits<n.minRSABits)throw Error(`RSA keys shorter than ${n.minRSABits} bits are considered too weak.`);break;case x.publicKey.ecdsa:case x.publicKey.eddsaLegacy:case x.publicKey.ecdh:if(n.rejectCurves.has(t.curve))throw Error(`Support for ${t.algorithm} keys using curve ${t.curve} is disabled.`)}}var oP=class i{constructor(n,e){this.userID=n.constructor.tag===x.packet.userID?n:null,this.userAttribute=n.constructor.tag===x.packet.userAttribute?n:null,this.selfCertifications=[],this.otherCertifications=[],this.revocationSignatures=[],this.mainKey=e}toPacketList(){let n=new lr;return n.push(this.userID||this.userAttribute),n.push(...this.revocationSignatures),n.push(...this.selfCertifications),n.push(...this.otherCertifications),n}clone(){let n=new i(this.userID||this.userAttribute,this.mainKey);return n.selfCertifications=[...this.selfCertifications],n.otherCertifications=[...this.otherCertifications],n.revocationSignatures=[...this.revocationSignatures],n}certify(n,e,t){return B(this,null,function*(){let r=this.mainKey.keyPacket,o={userID:this.userID,userAttribute:this.userAttribute,key:r},s=new i(o.userID||o.userAttribute,this.mainKey);return s.otherCertifications=yield Promise.all(n.map(function(a){return B(this,null,function*(){if(!a.isPrivate())throw Error("Need private key for signing");if(a.hasSameFingerprintAs(r))throw Error("The user's own key can only be used for self-certifications");let l=yield a.getSigningKey(void 0,e,void 0,t);return Fc(o,[a],l.keyPacket,{signatureType:x.signature.certGeneric,keyFlags:[x.keyFlags.certifyKeys|x.keyFlags.signData]},e,void 0,void 0,void 0,t)})})),yield s.update(this,e,t),s})}isRevoked(o,s){return B(this,arguments,function*(n,e,t=new Date,r=_t){let a=this.mainKey.keyPacket;return Jm(a,x.signature.certRevocation,{key:a,userID:this.userID,userAttribute:this.userAttribute},this.revocationSignatures,n,e,t,r)})}verifyCertificate(o,s){return B(this,arguments,function*(n,e,t=new Date,r){let a=this,l=this.mainKey.keyPacket,c={userID:this.userID,userAttribute:this.userAttribute,key:l},{issuerKeyID:d}=n,h=e.filter(_=>_.getKeys(d).length>0);return h.length===0?null:(yield Promise.all(h.map(_=>B(this,null,function*(){let C=yield _.getSigningKey(d,n.created,void 0,r);if(n.revoked||(yield a.isRevoked(n,C.keyPacket,t,r)))throw Error("User certificate is revoked");try{yield n.verify(C.keyPacket,x.signature.certGeneric,c,t,void 0,r)}catch(I){throw H.wrapError("User certificate is invalid",I)}}))),!0)})}verifyAllCertifications(r){return B(this,arguments,function*(n,e=new Date,t){let o=this,s=this.selfCertifications.concat(this.otherCertifications);return Promise.all(s.map(a=>B(this,null,function*(){return{keyID:a.issuerKeyID,valid:yield o.verifyCertificate(a,n,e,t).catch(()=>!1)}})))})}verify(){return B(this,arguments,function*(n=new Date,e){if(!this.selfCertifications.length)throw Error("No self-certifications found");let t=this,r=this.mainKey.keyPacket,o={userID:this.userID,userAttribute:this.userAttribute,key:r},s;for(let a=this.selfCertifications.length-1;a>=0;a--)try{let l=this.selfCertifications[a];if(l.revoked||(yield t.isRevoked(l,void 0,n,e)))throw Error("Self-certification is revoked");try{yield l.verify(r,x.signature.certGeneric,o,n,void 0,e)}catch(c){throw H.wrapError("Self-certification is invalid",c)}return!0}catch(l){s=l}throw s})}update(n,e,t){return B(this,null,function*(){let r=this.mainKey.keyPacket,o={userID:this.userID,userAttribute:this.userAttribute,key:r};yield Eh(n,this,"selfCertifications",e,function(s){return B(this,null,function*(){try{return yield s.verify(r,x.signature.certGeneric,o,e,!1,t),!0}catch{return!1}})}),yield Eh(n,this,"otherCertifications",e),yield Eh(n,this,"revocationSignatures",e,function(s){return Jm(r,x.signature.certRevocation,o,[s],void 0,void 0,e,t)})})}revoke(s){return B(this,arguments,function*(n,{flag:e=x.reasonForRevocation.noReason,string:t=""}={},r=new Date,o=_t){let a={userID:this.userID,userAttribute:this.userAttribute,key:n},l=new i(a.userID||a.userAttribute,this.mainKey);return l.revocationSignatures.push(yield Fc(a,[],n,{signatureType:x.signature.certRevocation,reasonForRevocationFlag:x.write(x.reasonForRevocation,e),reasonForRevocationString:t},r,void 0,void 0,!1,o)),yield l.update(this),l})}},q0=class i{constructor(n,e){this.keyPacket=n,this.bindingSignatures=[],this.revocationSignatures=[],this.mainKey=e}toPacketList(){let n=new lr;return n.push(this.keyPacket),n.push(...this.revocationSignatures),n.push(...this.bindingSignatures),n}clone(){let n=new i(this.keyPacket,this.mainKey);return n.bindingSignatures=[...this.bindingSignatures],n.revocationSignatures=[...this.revocationSignatures],n}isRevoked(o,s){return B(this,arguments,function*(n,e,t=new Date,r=_t){let a=this.mainKey.keyPacket;return Jm(a,x.signature.subkeyRevocation,{key:a,bind:this.keyPacket},this.revocationSignatures,n,e,t,r)})}verify(){return B(this,arguments,function*(n=new Date,e=_t){let t=this.mainKey.keyPacket,r={key:t,bind:this.keyPacket},o=yield Bl(this.bindingSignatures,t,x.signature.subkeyBinding,r,n,e);if(o.revoked||(yield this.isRevoked(o,null,n,e)))throw Error("Subkey is revoked");if(nP(this.keyPacket,o,n))throw Error("Subkey is expired");return o})}getExpirationTime(){return B(this,arguments,function*(n=new Date,e=_t){let t=this.mainKey.keyPacket,r={key:t,bind:this.keyPacket},o;try{o=yield Bl(this.bindingSignatures,t,x.signature.subkeyBinding,r,n,e)}catch{return null}let s=o1(this.keyPacket,o),a=o.getExpirationTime();return s<a?s:a})}update(r){return B(this,arguments,function*(n,e=new Date,t=_t){let o=this.mainKey.keyPacket;if(!this.hasSameFingerprintAs(n))throw Error("Subkey update method: fingerprints of subkeys not equal");this.keyPacket.constructor.tag===x.packet.publicSubkey&&n.keyPacket.constructor.tag===x.packet.secretSubkey&&(this.keyPacket=n.keyPacket);let s=this,a={key:o,bind:s.keyPacket};yield Eh(n,this,"bindingSignatures",e,function(l){return B(this,null,function*(){for(let c=0;c<s.bindingSignatures.length;c++)if(s.bindingSignatures[c].issuerKeyID.equals(l.issuerKeyID))return l.created>s.bindingSignatures[c].created&&(s.bindingSignatures[c]=l),!1;try{return yield l.verify(o,x.signature.subkeyBinding,a,e,void 0,t),!0}catch{return!1}})}),yield Eh(n,this,"revocationSignatures",e,function(l){return Jm(o,x.signature.subkeyRevocation,a,[l],void 0,void 0,e,t)})})}revoke(s){return B(this,arguments,function*(n,{flag:e=x.reasonForRevocation.noReason,string:t=""}={},r=new Date,o=_t){let a={key:n,bind:this.keyPacket},l=new i(this.keyPacket,this.mainKey);return l.revocationSignatures.push(yield Fc(a,[],n,{signatureType:x.signature.subkeyRevocation,reasonForRevocationFlag:x.write(x.reasonForRevocation,e),reasonForRevocationString:t},r,void 0,void 0,!1,o)),yield l.update(this),l})}hasSameFingerprintAs(n){return this.keyPacket.hasSameFingerprintAs(n.keyPacket||n)}};["getKeyID","getFingerprint","getAlgorithmInfo","getCreationTime","isDecrypted"].forEach(i=>{q0.prototype[i]=function(){return this.keyPacket[i]()}});var Bbe=H.constructAllowedPackets([ps]),e7=new Set([x.packet.publicKey,x.packet.privateKey]),t7=new Set([x.packet.publicKey,x.packet.privateKey,x.packet.publicSubkey,x.packet.privateSubkey]),s1=class{packetListToStructure(n,e=new Set){let t,r,o,s;for(let a of n){if(a instanceof B0){t7.has(a.tag)&&!s&&(s=e7.has(a.tag)?e7:t7);continue}let l=a.constructor.tag;if(s){if(!s.has(l))continue;s=null}if(e.has(l))throw Error("Unexpected packet type: "+l);switch(l){case x.packet.publicKey:case x.packet.secretKey:if(this.keyPacket)throw Error("Key block contains multiple keys");if(this.keyPacket=a,r=this.getKeyID(),!r)throw Error("Missing Key ID");break;case x.packet.userID:case x.packet.userAttribute:t=new oP(a,this),this.users.push(t);break;case x.packet.publicSubkey:case x.packet.secretSubkey:t=null,o=new q0(a,this),this.subkeys.push(o);break;case x.packet.signature:switch(a.signatureType){case x.signature.certGeneric:case x.signature.certPersona:case x.signature.certCasual:case x.signature.certPositive:if(!t){H.printDebug("Dropping certification signatures without preceding user packet");continue}a.issuerKeyID.equals(r)?t.selfCertifications.push(a):t.otherCertifications.push(a);break;case x.signature.certRevocation:t?t.revocationSignatures.push(a):this.directSignatures.push(a);break;case x.signature.key:this.directSignatures.push(a);break;case x.signature.subkeyBinding:if(!o){H.printDebug("Dropping subkey binding signature without preceding subkey packet");continue}o.bindingSignatures.push(a);break;case x.signature.keyRevocation:this.revocationSignatures.push(a);break;case x.signature.subkeyRevocation:if(!o){H.printDebug("Dropping subkey revocation signature without preceding subkey packet");continue}o.revocationSignatures.push(a)}}}}toPacketList(){let n=new lr;return n.push(this.keyPacket),n.push(...this.revocationSignatures),n.push(...this.directSignatures),this.users.map(e=>n.push(...e.toPacketList())),this.subkeys.map(e=>n.push(...e.toPacketList())),n}clone(n=!1){let e=new this.constructor(this.toPacketList());return n&&e.getKeys().forEach(t=>{if(t.keyPacket=Object.create(Object.getPrototypeOf(t.keyPacket),Object.getOwnPropertyDescriptors(t.keyPacket)),!t.keyPacket.isDecrypted())return;let r={};Object.keys(t.keyPacket.privateParams).forEach(o=>{r[o]=new Uint8Array(t.keyPacket.privateParams[o])}),t.keyPacket.privateParams=r}),e}getSubkeys(n=null){return this.subkeys.filter(e=>!n||e.getKeyID().equals(n,!0))}getKeys(n=null){let e=[];return n&&!this.getKeyID().equals(n,!0)||e.push(this),e.concat(this.getSubkeys(n))}getKeyIDs(){return this.getKeys().map(n=>n.getKeyID())}getUserIDs(){return this.users.map(n=>n.userID?n.userID.userID:null).filter(n=>n!==null)}write(){return this.toPacketList().write()}getSigningKey(){return B(this,arguments,function*(n=null,e=new Date,t={},r=_t){yield this.verifyPrimaryKey(e,t,r);let o=this.keyPacket;try{Qp(o,r)}catch(l){throw H.wrapError("Could not verify primary key",l)}let s=this.subkeys.slice().sort((l,c)=>c.keyPacket.created-l.keyPacket.created||c.keyPacket.algorithm-l.keyPacket.algorithm),a;for(let l of s)if(!n||l.getKeyID().equals(n))try{yield l.verify(e,r);let c={key:o,bind:l.keyPacket},d=yield Bl(l.bindingSignatures,o,x.signature.subkeyBinding,c,e,r);if(!Xj(l.keyPacket,d,r))continue;if(!d.embeddedSignature)throw Error("Missing embedded signature");return yield Bl([d.embeddedSignature],l.keyPacket,x.signature.keyBinding,c,e,r),Qp(l.keyPacket,r),l}catch(c){a=c}try{let l=yield this.getPrimarySelfSignature(e,t,r);if((!n||o.getKeyID().equals(n))&&Xj(o,l,r))return Qp(o,r),this}catch(l){a=l}throw H.wrapError("Could not find valid signing key packet in key "+this.getKeyID().toHex(),a)})}getEncryptionKey(o){return B(this,arguments,function*(n,e=new Date,t={},r=_t){yield this.verifyPrimaryKey(e,t,r);let s=this.keyPacket;try{Qp(s,r)}catch(c){throw H.wrapError("Could not verify primary key",c)}let a=this.subkeys.slice().sort((c,d)=>d.keyPacket.created-c.keyPacket.created||d.keyPacket.algorithm-c.keyPacket.algorithm),l;for(let c of a)if(!n||c.getKeyID().equals(n))try{yield c.verify(e,r);let d={key:s,bind:c.keyPacket},h=yield Bl(c.bindingSignatures,s,x.signature.subkeyBinding,d,e,r);if(Qj(c.keyPacket,h,r))return Qp(c.keyPacket,r),c}catch(d){l=d}try{let c=yield this.getPrimarySelfSignature(e,t,r);if((!n||s.getKeyID().equals(n))&&Qj(s,c,r))return Qp(s,r),this}catch(c){l=c}throw H.wrapError("Could not find valid encryption key packet in key "+this.getKeyID().toHex(),l)})}isRevoked(o,s){return B(this,arguments,function*(n,e,t=new Date,r=_t){return Jm(this.keyPacket,x.signature.keyRevocation,{key:this.keyPacket},this.revocationSignatures,n,e,t,r)})}verifyPrimaryKey(){return B(this,arguments,function*(n=new Date,e={},t=_t){let r=this.keyPacket;if(yield this.isRevoked(null,null,n,t))throw Error("Primary key is revoked");if(nP(r,yield this.getPrimarySelfSignature(n,e,t),n))throw Error("Primary key is expired");if(r.version!==6){let o=yield Bl(this.directSignatures,r,x.signature.key,{key:r},n,t).catch(()=>{});if(o&&nP(r,o,n))throw Error("Primary key is expired")}})}getExpirationTime(t){return B(this,arguments,function*(n,e=_t){let r;try{let o=yield this.getPrimarySelfSignature(null,n,e),s=o1(this.keyPacket,o),a=o.getExpirationTime(),l=this.keyPacket.version!==6&&(yield Bl(this.directSignatures,this.keyPacket,x.signature.key,{key:this.keyPacket},null,e).catch(()=>{}));if(l){let c=o1(this.keyPacket,l);r=Math.min(s,a,c)}else r=s<a?s:a}catch{r=null}return H.normalizeDate(r)})}getPrimarySelfSignature(){return B(this,arguments,function*(n=new Date,e={},t=_t){let r=this.keyPacket;if(r.version===6)return Bl(this.directSignatures,r,x.signature.key,{key:r},n,t);let{selfCertification:o}=yield this.getPrimaryUser(n,e,t);return o})}getPrimaryUser(){return B(this,arguments,function*(n=new Date,e={},t=_t){let r=this.keyPacket,o=[],s;for(let d=0;d<this.users.length;d++)try{let h=this.users[d];if(!h.userID)continue;if(e.name!==void 0&&h.userID.name!==e.name||e.email!==void 0&&h.userID.email!==e.email||e.comment!==void 0&&h.userID.comment!==e.comment)throw Error("Could not find user that matches that user ID");let _={userID:h.userID,key:r},C=yield Bl(h.selfCertifications,r,x.signature.certGeneric,_,n,t);o.push({index:d,user:h,selfCertification:C})}catch(h){s=h}if(!o.length)throw s||Error("Could not find primary user");yield Promise.all(o.map(function(d){return B(this,null,function*(){return d.selfCertification.revoked||d.user.isRevoked(d.selfCertification,null,n,t)})}));let a=o.sort(function(d,h){let _=d.selfCertification,C=h.selfCertification;return C.revoked-_.revoked||_.isPrimaryUserID-C.isPrimaryUserID||_.created-C.created}).pop(),{user:l,selfCertification:c}=a;if(c.revoked||(yield l.isRevoked(c,null,n,t)))throw Error("Primary user is revoked");return a})}update(r){return B(this,arguments,function*(n,e=new Date,t=_t){if(!this.hasSameFingerprintAs(n))throw Error("Primary key fingerprints must be equal to update the key");if(!this.isPrivate()&&n.isPrivate()){if(!(this.subkeys.length===n.subkeys.length&&this.subkeys.every(s=>n.subkeys.some(a=>s.hasSameFingerprintAs(a)))))throw Error("Cannot update public key with private key if subkeys mismatch");return n.update(this,t)}let o=this.clone();return yield Eh(n,o,"revocationSignatures",e,s=>Jm(o.keyPacket,x.signature.keyRevocation,o,[s],null,n.keyPacket,e,t)),yield Eh(n,o,"directSignatures",e),yield Promise.all(n.users.map(s=>B(this,null,function*(){let a=o.users.filter(l=>s.userID&&s.userID.equals(l.userID)||s.userAttribute&&s.userAttribute.equals(l.userAttribute));if(a.length>0)yield Promise.all(a.map(l=>l.update(s,e,t)));else{let l=s.clone();l.mainKey=o,o.users.push(l)}}))),yield Promise.all(n.subkeys.map(s=>B(this,null,function*(){let a=o.subkeys.filter(l=>l.hasSameFingerprintAs(s));if(a.length>0)yield Promise.all(a.map(l=>l.update(s,e,t)));else{let l=s.clone();l.mainKey=o,o.subkeys.push(l)}}))),o})}getRevocationCertificate(){return B(this,arguments,function*(n=new Date,e=_t){let t={key:this.keyPacket},r=yield Bl(this.revocationSignatures,this.keyPacket,x.signature.keyRevocation,t,n,e),o=new lr;o.push(r);let s=this.keyPacket.version!==6;return eC(x.armor.publicKey,o.write(),null,null,"This is a revocation certificate",s,e)})}applyRevocationCertificate(r){return B(this,arguments,function*(n,e=new Date,t=_t){let o=yield Z0(n),s=(yield lr.fromBinary(o.data,Bbe,t)).findPacket(x.packet.signature);if(!s||s.signatureType!==x.signature.keyRevocation)throw Error("Could not find revocation signature packet");if(!s.issuerKeyID.equals(this.getKeyID()))throw Error("Revocation signature does not match key");try{yield s.verify(this.keyPacket,x.signature.keyRevocation,{key:this.keyPacket},e,void 0,t)}catch(l){throw H.wrapError("Could not verify revocation signature",l)}let a=this.clone();return a.revocationSignatures.push(s),a})}signPrimaryUser(o,s,a){return B(this,arguments,function*(n,e,t,r=_t){let{index:l,user:c}=yield this.getPrimaryUser(e,t,r),d=yield c.certify(n,e,r),h=this.clone();return h.users[l]=d,h})}signAllUsers(r){return B(this,arguments,function*(n,e=new Date,t=_t){let o=this.clone();return o.users=yield Promise.all(this.users.map(function(s){return s.certify(n,e,t)})),o})}verifyPrimaryUser(o){return B(this,arguments,function*(n,e=new Date,t,r=_t){let s=this.keyPacket,{user:a}=yield this.getPrimaryUser(e,t,r);return n?yield a.verifyAllCertifications(n,e,r):[{keyID:s.getKeyID(),valid:yield a.verify(e,r).catch(()=>!1)}]})}verifyAllUsers(r){return B(this,arguments,function*(n,e=new Date,t=_t){let o=this.keyPacket,s=[];return yield Promise.all(this.users.map(a=>B(this,null,function*(){let l=n?yield a.verifyAllCertifications(n,e,t):[{keyID:o.getKeyID(),valid:yield a.verify(e,t).catch(()=>!1)}];s.push(...l.map(c=>({userID:a.userID?a.userID.userID:null,userAttribute:a.userAttribute,keyID:c.keyID,valid:c.valid})))}))),s})}};["getKeyID","getFingerprint","getAlgorithmInfo","getCreationTime","hasSameFingerprintAs"].forEach(i=>{s1.prototype[i]=q0.prototype[i]});var Y0=class extends s1{constructor(n){if(super(),this.keyPacket=null,this.revocationSignatures=[],this.directSignatures=[],this.users=[],this.subkeys=[],n&&(this.packetListToStructure(n,new Set([x.packet.secretKey,x.packet.secretSubkey])),!this.keyPacket))throw Error("Invalid key: missing public-key packet")}isPrivate(){return!1}toPublic(){return this}armor(n=_t){let e=this.keyPacket.version!==6;return eC(x.armor.publicKey,this.toPacketList().write(),void 0,void 0,void 0,e,n)}},X0=class i extends Y0{constructor(n){if(super(),this.packetListToStructure(n,new Set([x.packet.publicKey,x.packet.publicSubkey])),!this.keyPacket)throw Error("Invalid key: missing private-key packet")}isPrivate(){return!0}toPublic(){let n=new lr,e=this.toPacketList();for(let t of e)switch(t.constructor.tag){case x.packet.secretKey:{let r=Rc.fromSecretKeyPacket(t);n.push(r);break}case x.packet.secretSubkey:{let r=t1.fromSecretSubkeyPacket(t);n.push(r);break}default:n.push(t)}return new Y0(n)}armor(n=_t){let e=this.keyPacket.version!==6;return eC(x.armor.privateKey,this.toPacketList().write(),void 0,void 0,void 0,e,n)}getDecryptionKeys(o){return B(this,arguments,function*(n,e=new Date,t={},r=_t){let s=this.keyPacket,a=[],l=null;for(let d=0;d<this.subkeys.length;d++)if(!n||this.subkeys[d].getKeyID().equals(n,!0)){if(this.subkeys[d].keyPacket.isDummy()){l=l||Error("Gnu-dummy key packets cannot be used for decryption");continue}try{let h={key:s,bind:this.subkeys[d].keyPacket},_=yield Bl(this.subkeys[d].bindingSignatures,s,x.signature.subkeyBinding,h,e,r);Zj(this.subkeys[d].keyPacket,_,r)&&a.push(this.subkeys[d])}catch(h){l=h}}let c=yield this.getPrimarySelfSignature(e,t,r);if(n&&!s.getKeyID().equals(n,!0)||!Zj(s,c,r)||(s.isDummy()?l=l||Error("Gnu-dummy key packets cannot be used for decryption"):a.push(this)),a.length===0)throw l||Error("No decryption key packets found");return a})}isDecrypted(){return this.getKeys().some(({keyPacket:n})=>n.isDecrypted())}validate(){return B(this,arguments,function*(n=_t){if(!this.isPrivate())throw Error("Cannot validate a public key");let e;if(this.keyPacket.isDummy()){let t=yield this.getSigningKey(null,null,void 0,ke(oe({},n),{rejectPublicKeyAlgorithms:new Set,minRSABits:0}));t&&!t.keyPacket.isDummy()&&(e=t.keyPacket)}else e=this.keyPacket;if(e)return e.validate();{let t=this.getKeys();if(t.map(r=>r.keyPacket.isDummy()).every(Boolean))throw Error("Cannot validate an all-gnu-dummy key");return Promise.all(t.map(r=>B(this,null,function*(){return r.keyPacket.validate()})))}})}clearPrivateParams(){this.getKeys().forEach(({keyPacket:n})=>{n.isDecrypted()&&n.clearPrivateParams()})}revoke(){return B(this,arguments,function*({flag:n=x.reasonForRevocation.noReason,string:e=""}={},t=new Date,r=_t){if(!this.isPrivate())throw Error("Need private key for revoking");let o={key:this.keyPacket},s=this.clone();return s.revocationSignatures.push(yield Fc(o,[],this.keyPacket,{signatureType:x.signature.keyRevocation,reasonForRevocationFlag:x.write(x.reasonForRevocation,n),reasonForRevocationString:e},t,void 0,void 0,void 0,r)),s})}addSubkey(){return B(this,arguments,function*(n={}){let e=oe(oe({},_t),n.config);if(n.passphrase)throw Error("Subkey could not be encrypted here, please encrypt whole key");if(n.rsaBits<e.minRSABits)throw Error(`rsaBits should be at least ${e.minRSABits}, got: ${n.rsaBits}`);let t=this.keyPacket;if(t.isDummy())throw Error("Cannot add subkey to gnu-dummy primary key");if(!t.isDecrypted())throw Error("Key is not decrypted");let r=t.getAlgorithmInfo();r.type=function(l){switch(x.write(x.publicKey,l)){case x.publicKey.rsaEncrypt:case x.publicKey.rsaEncryptSign:case x.publicKey.rsaSign:case x.publicKey.dsa:return"rsa";case x.publicKey.ecdsa:case x.publicKey.eddsaLegacy:return"ecc";case x.publicKey.ed25519:return"curve25519";case x.publicKey.ed448:return"curve448";default:throw Error("Unsupported algorithm")}}(r.algorithm),r.rsaBits=r.bits||4096,r.curve=r.curve||"curve25519Legacy",n=rP(n,r);let o=yield h9(n,ke(oe({},e),{v6Keys:this.keyPacket.version===6}));Qp(o,e);let s=yield f9(o,t,n,e),a=this.toPacketList();return a.push(o,s),new i(a)})}},m9=H.constructAllowedPackets([Rc,t1,J0,n1,i1,iP,ps]);function Ube(i){for(let n of i)switch(n.constructor.tag){case x.packet.secretKey:return new X0(i);case x.packet.publicKey:return new Y0(i)}throw Error("No key packet found")}function jbe(i,n,e,t){return B(this,null,function*(){e.passphrase&&(yield i.encrypt(e.passphrase,t)),yield Promise.all(n.map(function(l,c){return B(this,null,function*(){let d=e.subkeys[c].passphrase;d&&(yield l.encrypt(d,t))})}));let r=new lr;function o(l,c){return[c,...l.filter(d=>d!==c)]}function s(){let l={};l.keyFlags=[x.keyFlags.certifyKeys|x.keyFlags.signData];let c=o([x.symmetric.aes256,x.symmetric.aes128],t.preferredSymmetricAlgorithm);if(l.preferredSymmetricAlgorithms=c,t.aeadProtect){let d=o([x.aead.gcm,x.aead.eax,x.aead.ocb],t.preferredAEADAlgorithm);l.preferredCipherSuites=d.flatMap(h=>c.map(_=>[_,h]))}return l.preferredHashAlgorithms=o([x.hash.sha512,x.hash.sha256,x.hash.sha3_512,x.hash.sha3_256],t.preferredHashAlgorithm),l.preferredCompressionAlgorithms=o([x.compression.uncompressed,x.compression.zlib,x.compression.zip],t.preferredCompressionAlgorithm),l.features=[0],l.features[0]|=x.features.modificationDetection,t.aeadProtect&&(l.features[0]|=x.features.seipdv2),e.keyExpirationTime>0&&(l.keyExpirationTime=e.keyExpirationTime,l.keyNeverExpires=!1),l}if(r.push(i),i.version===6){let l={key:i},c=s();c.signatureType=x.signature.key;let d=yield Fc(l,[],i,c,e.date,void 0,void 0,void 0,t);r.push(d)}yield Promise.all(e.userIDs.map(function(l,c){return B(this,null,function*(){let d=i1.fromObject(l),h={userID:d,key:i},_=i.version!==6?s():{};return _.signatureType=x.signature.certPositive,c===0&&(_.isPrimaryUserID=!0),{userIDPacket:d,signaturePacket:yield Fc(h,[],i,_,e.date,void 0,void 0,void 0,t)}})})).then(l=>{l.forEach(({userIDPacket:c,signaturePacket:d})=>{r.push(c),r.push(d)})}),yield Promise.all(n.map(function(l,c){return B(this,null,function*(){let d=e.subkeys[c];return{secretSubkeyPacket:l,subkeySignaturePacket:yield f9(l,i,d,t)}})})).then(l=>{l.forEach(({secretSubkeyPacket:c,subkeySignaturePacket:d})=>{r.push(c),r.push(d)})});let a={key:i};return r.push(yield Fc(a,[],i,{signatureType:x.signature.keyRevocation,reasonForRevocationFlag:x.reasonForRevocation.noReason,reasonForRevocationString:""},e.date,void 0,void 0,void 0,t)),e.passphrase&&i.clearPrivateParams(),yield Promise.all(n.map(function(l,c){return B(this,null,function*(){e.subkeys[c].passphrase&&l.clearPrivateParams()})})),new X0(r)})}function g9(r){return B(this,null,function*(){var o=r,{armoredKey:i,binaryKey:n,config:e}=o,t=Kc(o,["armoredKey","binaryKey","config"]);if(e=oe(oe({},_t),e),!i&&!n)throw Error("readKey: must pass options object containing `armoredKey` or `binaryKey`");if(i&&!H.isString(i))throw Error("readKey: options.armoredKey must be a string");if(n&&!H.isUint8Array(n))throw Error("readKey: options.binaryKey must be a Uint8Array");let s=Object.keys(t);if(s.length>0)throw Error("Unknown option: "+s.join(", "));let a;if(i){let{type:d,data:h}=yield Z0(i);if(d!==x.armor.publicKey&&d!==x.armor.privateKey)throw Error("Armored text not of type key");a=h}else a=n;let l=yield lr.fromBinary(a,m9,e),c=l.indexOfTag(x.packet.publicKey,x.packet.secretKey);if(c.length===0)throw Error("No key packet found");return Ube(l.slice(c[0],c[1]))})}function _9(r){return B(this,null,function*(){var o=r,{armoredKey:i,binaryKey:n,config:e}=o,t=Kc(o,["armoredKey","binaryKey","config"]);if(e=oe(oe({},_t),e),!i&&!n)throw Error("readPrivateKey: must pass options object containing `armoredKey` or `binaryKey`");if(i&&!H.isString(i))throw Error("readPrivateKey: options.armoredKey must be a string");if(n&&!H.isUint8Array(n))throw Error("readPrivateKey: options.binaryKey must be a Uint8Array");let s=Object.keys(t);if(s.length>0)throw Error("Unknown option: "+s.join(", "));let a;if(i){let{type:d,data:h}=yield Z0(i);if(d!==x.armor.privateKey)throw Error("Armored text not of type private key");a=h}else a=n;let l=yield lr.fromBinary(a,m9,e),c=l.indexOfTag(x.packet.publicKey,x.packet.secretKey);for(let d=0;d<c.length;d++){if(l[c[d]].constructor.tag===x.packet.publicKey)continue;let h=l.slice(c[d],c[d+1]);return new X0(h)}throw Error("No secret key packet found")})}var Gbe=H.constructAllowedPackets([su,Rh,eP,$m,tP,K0,$0,fl,ps]),Hbe=H.constructAllowedPackets([$0]),Wbe=H.constructAllowedPackets([ps]),Q0=class i{constructor(n){this.packets=n||new lr}getEncryptionKeyIDs(){let n=[];return this.packets.filterByTag(x.packet.publicKeyEncryptedSessionKey).forEach(function(e){n.push(e.publicKeyID)}),n}getSigningKeyIDs(){let n=this.unwrapCompressed(),e=n.packets.filterByTag(x.packet.onePassSignature);return e.length>0?e.map(t=>t.issuerKeyID):n.packets.filterByTag(x.packet.signature).map(t=>t.issuerKeyID)}decrypt(s,a,l){return B(this,arguments,function*(n,e,t,r=new Date,o=_t){let c=this.packets.filterByTag(x.packet.symmetricallyEncryptedData,x.packet.symEncryptedIntegrityProtectedData,x.packet.aeadEncryptedData);if(c.length===0)throw Error("No encrypted data found");let d=c[0],h=d.cipherAlgorithm,_=t||(yield this.decryptSessionKeys(n,e,h,r,o)),C=null,I=Promise.all(_.map(T=>B(this,[T],function*({algorithm:E,data:R}){if(!H.isUint8Array(R)||!d.cipherAlgorithm&&!H.isString(E))throw Error("Invalid session key for decryption.");try{let A=d.cipherAlgorithm||x.write(x.symmetric,E);yield d.decrypt(A,R,o)}catch(A){H.printDebugError(A),C=A}})));if(AR(d.encrypted),d.encrypted=null,yield I,!d.packets||!d.packets.length)throw C||Error("Decryption failed.");let b=new i(d.packets);return d.packets=new lr,b})}decryptSessionKeys(s,a,l){return B(this,arguments,function*(n,e,t,r=new Date,o=_t){let c,d=[];if(e){let h=this.packets.filterByTag(x.packet.symEncryptedSessionKey);if(h.length===0)throw Error("No symmetrically encrypted session key packet found.");yield Promise.all(e.map(function(_,C){return B(this,null,function*(){let I;I=C?yield lr.fromBinary(h.write(),Hbe,o):h,yield Promise.all(I.map(function(b){return B(this,null,function*(){try{yield b.decrypt(_),d.push(b)}catch(E){H.printDebugError(E),E instanceof qb&&(c=E)}})}))})}))}else{if(!n)throw Error("No key or password specified.");{let h=this.packets.filterByTag(x.packet.publicKeyEncryptedSessionKey);if(h.length===0)throw Error("No public key encrypted session key packet found.");yield Promise.all(h.map(function(_){return B(this,null,function*(){yield Promise.all(n.map(function(C){return B(this,null,function*(){let I;try{I=(yield C.getDecryptionKeys(_.publicKeyID,null,void 0,o)).map(E=>E.keyPacket)}catch(E){return void(c=E)}let b=[x.symmetric.aes256,x.symmetric.aes128,x.symmetric.tripledes,x.symmetric.cast5];try{let E=yield C.getPrimarySelfSignature(r,void 0,o);E.preferredSymmetricAlgorithms&&(b=b.concat(E.preferredSymmetricAlgorithms))}catch{}yield Promise.all(I.map(function(E){return B(this,null,function*(){if(!E.isDecrypted())throw Error("Decryption key is not decrypted.");if(o.constantTimePKCS1Decryption&&(_.publicKeyAlgorithm===x.publicKey.rsaEncrypt||_.publicKeyAlgorithm===x.publicKey.rsaEncryptSign||_.publicKeyAlgorithm===x.publicKey.rsaSign||_.publicKeyAlgorithm===x.publicKey.elgamal)){let R=_.write();yield Promise.all((t?[t]:Array.from(o.constantTimePKCS1DecryptionSupportedSymmetricAlgorithms)).map(T=>B(this,null,function*(){let A=new K0;A.read(R);let U={sessionKeyAlgorithm:T,sessionKey:zR(T)};try{yield A.decrypt(E,U),d.push(A)}catch(z){H.printDebugError(z),c=z}})))}else try{yield _.decrypt(E);let R=t||_.sessionKeyAlgorithm;if(R&&!b.includes(x.write(x.symmetric,R)))throw Error("A non-preferred symmetric algorithm was used.");d.push(_)}catch(R){H.printDebugError(R),c=R}})}))})})),AR(_.encrypted),_.encrypted=null})}))}}if(d.length>0){if(d.length>1){let h=new Set;d=d.filter(_=>{let C=_.sessionKeyAlgorithm+H.uint8ArrayToString(_.sessionKey);return!h.has(C)&&(h.add(C),!0)})}return d.map(h=>({data:h.sessionKey,algorithm:h.sessionKeyAlgorithm&&x.read(x.symmetric,h.sessionKeyAlgorithm)}))}throw c||Error("Session key decryption failed.")})}getLiteralData(){let n=this.unwrapCompressed().packets.findPacket(x.packet.literalData);return n&&n.getBytes()||null}getFilename(){let n=this.unwrapCompressed().packets.findPacket(x.packet.literalData);return n&&n.getFilename()||null}getText(){let n=this.unwrapCompressed().packets.findPacket(x.packet.literalData);return n?n.getText():null}static generateSessionKey(){return B(this,arguments,function*(n=[],e=new Date,t=[],r=_t){let{symmetricAlgo:o,aeadAlgo:s}=yield function(){return B(this,arguments,function*(c=[],d=new Date,h=[],_=_t){let C=yield Promise.all(c.map((E,R)=>E.getPrimarySelfSignature(d,h[R],_)));if(c.length?C.every(E=>E.features&&E.features[0]&x.features.seipdv2):_.aeadProtect){let E={symmetricAlgo:x.symmetric.aes128,aeadAlgo:x.aead.ocb},R=[{symmetricAlgo:_.preferredSymmetricAlgorithm,aeadAlgo:_.preferredAEADAlgorithm},{symmetricAlgo:_.preferredSymmetricAlgorithm,aeadAlgo:x.aead.ocb},{symmetricAlgo:x.symmetric.aes128,aeadAlgo:_.preferredAEADAlgorithm}];for(let T of R)if(C.every(A=>A.preferredCipherSuites&&A.preferredCipherSuites.some(U=>U[0]===T.symmetricAlgo&&U[1]===T.aeadAlgo)))return T;return E}let I=x.symmetric.aes128,b=_.preferredSymmetricAlgorithm;return{symmetricAlgo:C.every(E=>E.preferredSymmetricAlgorithms&&E.preferredSymmetricAlgorithms.includes(b))?b:I,aeadAlgo:void 0}})}(n,e,t,r),a=x.read(x.symmetric,o),l=s?x.read(x.aead,s):void 0;return yield Promise.all(n.map(c=>c.getEncryptionKey().catch(()=>null).then(d=>{if(d&&(d.keyPacket.algorithm===x.publicKey.x25519||d.keyPacket.algorithm===x.publicKey.x448)&&!l&&!H.isAES(o))throw Error("Could not generate a session key compatible with the given `encryptionKeys`: X22519 and X448 keys can only be used to encrypt AES session keys; change `config.preferredSymmetricAlgorithm` accordingly.")}))),{data:zR(o),algorithm:a,aeadAlgorithm:l}})}encrypt(c,d,h){return B(this,arguments,function*(n,e,t,r=!1,o=[],s=new Date,a=[],l=_t){if(t){if(!H.isUint8Array(t.data)||!H.isString(t.algorithm))throw Error("Invalid session key for encryption.")}else if(n&&n.length)t=yield i.generateSessionKey(n,s,a,l);else{if(!e||!e.length)throw Error("No keys, passwords, or session key provided.");t=yield i.generateSessionKey(void 0,void 0,void 0,l)}let{data:_,algorithm:C,aeadAlgorithm:I}=t,b=yield i.encryptSessionKey(_,C,I,n,e,r,o,s,a,l),E=$m.fromObject({version:I?2:1,aeadAlgorithm:I?x.write(x.aead,I):null});E.packets=this.packets;let R=x.write(x.symmetric,C);return yield E.encrypt(R,_,l),b.packets.push(E),E.packets=new lr,b})}static encryptSessionKey(h,_,C,I,b){return B(this,arguments,function*(n,e,t,r,o,s=!1,a=[],l=new Date,c=[],d=_t){let E=new lr,R=x.write(x.symmetric,e),T=t&&x.write(x.aead,t);if(r){let A=yield Promise.all(r.map(function(U,z){return B(this,null,function*(){let ee=yield U.getEncryptionKey(a[z],l,c,d),re=K0.fromObject({version:T?6:3,encryptionKeyPacket:ee.keyPacket,anonymousRecipient:s,sessionKey:n,sessionKeyAlgorithm:R});return yield re.encrypt(ee.keyPacket),delete re.sessionKey,re})}));E.push(...A)}if(o){let A=function(re,Z){return B(this,null,function*(){try{return yield re.decrypt(Z),1}catch{return 0}})},U=(re,Z)=>re+Z,z=function(re,Z,ae,Ie){return B(this,null,function*(){let ye=new $0(d);return ye.sessionKey=re,ye.sessionKeyAlgorithm=Z,ae&&(ye.aeadAlgorithm=ae),yield ye.encrypt(Ie,d),d.passwordCollisionCheck&&(yield Promise.all(o.map(xe=>A(ye,xe)))).reduce(U)!==1?z(re,Z,Ie):(delete ye.sessionKey,ye)})},ee=yield Promise.all(o.map(re=>z(n,R,T,re)));E.push(...ee)}return new i(E)})}sign(){return B(this,arguments,function*(n=[],e=[],t=null,r=[],o=new Date,s=[],a=[],l=[],c=_t){let d=new lr,h=this.packets.findPacket(x.packet.literalData);if(!h)throw Error("No literal data packet to sign.");let _=yield i7(h,n,e,t,r,o,s,a,l,!1,c),C=_.map((I,b)=>fl.fromSignaturePacket(I,b===0)).reverse();return d.push(...C),d.push(h),d.push(..._),new i(d)})}compress(n,e=_t){if(n===x.compression.uncompressed)return this;let t=new Rh(e);t.algorithm=n,t.packets=this.packets;let r=new lr;return r.push(t),new i(r)}signDetached(){return B(this,arguments,function*(n=[],e=[],t=null,r=[],o=[],s=new Date,a=[],l=[],c=_t){let d=this.packets.findPacket(x.packet.literalData);if(!d)throw Error("No literal data packet to sign.");return new r1(yield i7(d,n,e,t,r,o,s,a,l,!0,c))})}verify(r){return B(this,arguments,function*(n,e=new Date,t=_t){let o=this.unwrapCompressed(),s=o.packets.filterByTag(x.packet.literalData);if(s.length!==1)throw Error("Can only verify message with one literal data packet.");let a=o.packets;uo(a.stream)&&(a=a.concat(yield yo(a.stream,d=>d||[])));let l=a.filterByTag(x.packet.onePassSignature).reverse(),c=a.filterByTag(x.packet.signature);return l.length&&!c.length&&H.isStream(a.stream)&&!uo(a.stream)?(yield Promise.all(l.map(d=>B(this,null,function*(){d.correspondingSig=new Promise((h,_)=>{d.correspondingSigResolve=h,d.correspondingSigReject=_}),d.signatureData=lu(()=>B(this,null,function*(){return(yield d.correspondingSig).signatureData})),d.hashed=yo(yield d.hash(d.signatureType,s[0],void 0,!1)),d.hashed.catch(()=>{})}))),a.stream=au(a.stream,(d,h)=>B(this,null,function*(){let _=Bd(d),C=Ga(h);try{for(let I=0;I<l.length;I++){let{value:b}=yield _.read();l[I].correspondingSigResolve(b)}yield _.readToEnd(),yield C.ready,yield C.close()}catch(I){l.forEach(b=>{b.correspondingSigReject(I)}),yield C.abort(I)}})),ER(l,s,n,e,!1,t)):ER(c,s,n,e,!1,t)})}verifyDetached(n,e,t=new Date,r=_t){let o=this.unwrapCompressed().packets.filterByTag(x.packet.literalData);if(o.length!==1)throw Error("Can only verify message with one literal data packet.");return ER(n.packets.filterByTag(x.packet.signature),o,e,t,!0,r)}unwrapCompressed(){let n=this.packets.filterByTag(x.packet.compressedData);return n.length?new i(n[0].packets):this}appendSignature(t){return B(this,arguments,function*(n,e=_t){yield this.packets.read(H.isUint8Array(n)?n:(yield Z0(n)).data,Wbe,e)})}write(){return this.packets.write()}armor(n=_t){let e=this.packets[this.packets.length-1],t=e.constructor.tag===$m.tag?e.version!==2:this.packets.some(r=>r.constructor.tag===ps.tag&&r.version!==6);return eC(x.armor.message,this.write(),null,null,null,t,n)}};function i7(h,_){return B(this,arguments,function*(i,n,e=[],t=null,r=[],o=new Date,s=[],a=[],l=[],c=!1,d=_t){let C=new lr,I=i.text===null?x.signature.binary:x.signature.text;if(yield Promise.all(n.map((b,E)=>B(this,null,function*(){let R=s[E];if(!b.isPrivate())throw Error("Need private key for signing");let T=yield b.getSigningKey(r[E],o,R,d);return Fc(i,e.length?e:[b],T.keyPacket,{signatureType:I},o,a,l,c,d)}))).then(b=>{C.push(...b)}),t){let b=t.packets.filterByTag(x.packet.signature);C.push(...b)}return C})}function ER(s,a,l){return B(this,arguments,function*(i,n,e,t=new Date,r=!1,o=_t){return Promise.all(i.filter(function(c){return["text","binary"].includes(x.read(x.signature,c.signatureType))}).map(function(c){return B(this,null,function*(){return function(E,R,T){return B(this,arguments,function*(d,h,_,C=new Date,I=!1,b=_t){let A,U;for(let re of _){let Z=re.getKeys(d.issuerKeyID);if(Z.length>0){A=re,U=Z[0];break}}let z=d instanceof fl?d.correspondingSig:d,ee={keyID:d.issuerKeyID,verified:B(this,null,function*(){if(!U)throw Error("Could not find signing key with key ID "+d.issuerKeyID.toHex());yield d.verify(U.keyPacket,d.signatureType,h[0],C,I,b);let re=yield z;if(U.getCreationTime()>re.created)throw Error("Key is newer than the signature");try{yield A.getSigningKey(U.getKeyID(),re.created,void 0,b)}catch(Z){if(!b.allowInsecureVerificationWithReformattedKeys||!Z.message.match(/Signature creation time is in the future/))throw Z;yield A.getSigningKey(U.getKeyID(),C,void 0,b)}return!0}),signature:B(this,null,function*(){let re=yield z,Z=new lr;return re&&Z.push(re),new r1(Z)})};return ee.signature.catch(()=>{}),ee.verified.catch(()=>{}),ee})}(c,n,e,t,r,o)})}))})}function C9(r){return B(this,null,function*(){var o=r,{armoredMessage:i,binaryMessage:n,config:e}=o,t=Kc(o,["armoredMessage","binaryMessage","config"]);e=oe(oe({},_t),e);let s=i||n;if(!s)throw Error("readMessage: must pass options object containing `armoredMessage` or `binaryMessage`");if(i&&!H.isString(i)&&!H.isStream(i))throw Error("readMessage: options.armoredMessage must be a string or stream");if(n&&!H.isUint8Array(n)&&!H.isStream(n))throw Error("readMessage: options.binaryMessage must be a Uint8Array or stream");let a=Object.keys(t);if(a.length>0)throw Error("Unknown option: "+a.join(", "));let l=H.isStream(s);if(i){let{type:h,data:_}=yield Z0(s);if(h!==x.armor.message)throw Error("Armored text not of type message");s=_}let c=yield lr.fromBinary(s,Gbe,e,new Km),d=new Q0(c);return d.fromStream=l,d})}function I9(s){return B(this,null,function*(){var a=s,{text:i,binary:n,filename:e,date:t=new Date,format:r=i!==void 0?"utf8":"binary"}=a,o=Kc(a,["text","binary","filename","date","format"]);let l=i!==void 0?i:n;if(l===void 0)throw Error("createMessage: must pass options object containing `text` or `binary`");if(i&&!H.isString(i)&&!H.isStream(i))throw Error("createMessage: options.text must be a string or stream");if(n&&!H.isUint8Array(n)&&!H.isStream(n))throw Error("createMessage: options.binary must be a Uint8Array or stream");let c=Object.keys(o);if(c.length>0)throw Error("Unknown option: "+c.join(", "));let d=H.isStream(l),h=new su(t);i!==void 0?h.setText(l,x.write(x.literal,r)):h.setBytes(l,x.write(x.literal,r)),e!==void 0&&h.setFilename(e);let _=new lr;_.push(h);let C=new Q0(_);return C.fromStream=d,C})}function y9(h){return B(this,null,function*(){var _=h,{userIDs:i=[],passphrase:n,type:e,curve:t,rsaBits:r=4096,keyExpirationTime:o=0,date:s=new Date,subkeys:a=[{}],format:l="armored",config:c}=_,d=Kc(_,["userIDs","passphrase","type","curve","rsaBits","keyExpirationTime","date","subkeys","format","config"]);yP(c=oe(oe({},_t),c)),e||t?(e=e||"ecc",t=t||"curve25519Legacy"):(e=c.v6Keys?"curve25519":"ecc",t="curve25519Legacy"),i=Ba(i);let C=Object.keys(d);if(C.length>0)throw Error("Unknown option: "+C.join(", "));if(i.length===0&&!c.v6Keys)throw Error("UserIDs are required for V4 keys");if(e==="rsa"&&r<c.minRSABits)throw Error(`rsaBits should be at least ${c.minRSABits}, got: ${r}`);let I={userIDs:i,passphrase:n,type:e,rsaBits:r,curve:t,keyExpirationTime:o,date:s,subkeys:a};try{let{key:b,revocationCertificate:E}=yield function(R,T){return B(this,null,function*(){R.sign=!0,(R=rP(R)).subkeys=R.subkeys.map((re,Z)=>rP(R.subkeys[Z],R));let A=[Mbe(R,T)];A=A.concat(R.subkeys.map(re=>h9(re,T)));let U=yield Promise.all(A),z=yield jbe(U[0],U.slice(1),R,T),ee=yield z.getRevocationCertificate(R.date,T);return z.revocationSignatures=[],{key:z,revocationCertificate:ee}})}(I,c);return b.getKeys().forEach(({keyPacket:R})=>Qp(R,c)),{privateKey:n7(b,l,c),publicKey:n7(b.toPublic(),l,c),revocationCertificate:E}}catch(b){throw H.wrapError("Error generating keypair",b)}})}function w9(E){return B(this,null,function*(){var R=E,{message:i,encryptionKeys:n,signingKeys:e,passwords:t,sessionKey:r,format:o="armored",signature:s=null,wildcard:a=!1,signingKeyIDs:l=[],encryptionKeyIDs:c=[],date:d=new Date,signingUserIDs:h=[],encryptionUserIDs:_=[],signatureNotations:C=[],config:I}=R,b=Kc(R,["message","encryptionKeys","signingKeys","passwords","sessionKey","format","signature","wildcard","signingKeyIDs","encryptionKeyIDs","date","signingUserIDs","encryptionUserIDs","signatureNotations","config"]);if(yP(I=oe(oe({},_t),I)),b9(i),zbe(o),n=Ba(n),e=Ba(e),t=Ba(t),l=Ba(l),c=Ba(c),h=Ba(h),_=Ba(_),C=Ba(C),b.detached)throw Error("The `detached` option has been removed from openpgp.encrypt, separately call openpgp.sign instead. Don't forget to remove the `privateKeys` option as well.");if(b.publicKeys)throw Error("The `publicKeys` option has been removed from openpgp.encrypt, pass `encryptionKeys` instead");if(b.privateKeys)throw Error("The `privateKeys` option has been removed from openpgp.encrypt, pass `signingKeys` instead");if(b.armor!==void 0)throw Error("The `armor` option has been removed from openpgp.encrypt, pass `format` instead.");let T=Object.keys(b);if(T.length>0)throw Error("Unknown option: "+T.join(", "));e||(e=[]);try{if((e.length||s)&&(i=yield i.sign(e,n,s,l,d,h,c,C,I)),i=i.compress(yield function(){return B(this,arguments,function*(U=[],z=new Date,ee=[],re=_t){let Z=x.compression.uncompressed,ae=re.preferredCompressionAlgorithm;return(yield Promise.all(U.map(function(ye,xe){return B(this,null,function*(){let Le=(yield ye.getPrimarySelfSignature(z,ee[xe],re)).preferredCompressionAlgorithms;return!!Le&&Le.indexOf(ae)>=0})}))).every(Boolean)?ae:Z})}(n,d,_,I),I),i=yield i.encrypt(n,t,r,a,c,d,_,I),o==="object")return i;let A=o==="armored"?i.armor(I):i.write();return yield S9(A)}catch(A){throw H.wrapError("Error encrypting message",A)}})}function v9(h){return B(this,null,function*(){var _=h,{message:i,decryptionKeys:n,passwords:e,sessionKeys:t,verificationKeys:r,expectSigned:o=!1,format:s="utf8",signature:a=null,date:l=new Date,config:c}=_,d=Kc(_,["message","decryptionKeys","passwords","sessionKeys","verificationKeys","expectSigned","format","signature","date","config"]);if(yP(c=oe(oe({},_t),c)),b9(i),r=Ba(r),n=Ba(n),e=Ba(e),t=Ba(t),d.privateKeys)throw Error("The `privateKeys` option has been removed from openpgp.decrypt, pass `decryptionKeys` instead");if(d.publicKeys)throw Error("The `publicKeys` option has been removed from openpgp.decrypt, pass `verificationKeys` instead");let C=Object.keys(d);if(C.length>0)throw Error("Unknown option: "+C.join(", "));try{let I=yield i.decrypt(n,e,t,l,c);r||(r=[]);let b={};if(b.signatures=a?yield I.verifyDetached(a,r,l,c):yield I.verify(r,l,c),b.data=s==="binary"?I.getLiteralData():I.getText(),b.filename=I.getFilename(),$be(b,i,...new Set([I,I.unwrapCompressed()])),o){if(r.length===0)throw Error("Verification keys are required to verify message signatures");if(b.signatures.length===0)throw Error("Message is not signed");b.data=oa([b.data,lu(()=>B(this,null,function*(){return yield H.anyPromise(b.signatures.map(E=>E.verified)),s==="binary"?new Uint8Array:""}))])}return b.data=yield S9(b.data),b}catch(I){throw H.wrapError("Error decrypting message",I)}})}function b9(i){if(!(i instanceof Q0))throw Error("Parameter [message] needs to be of type Message")}function zbe(i){if(i!=="armored"&&i!=="binary"&&i!=="object")throw Error("Unsupported format "+i)}var Kbe=Object.keys(_t).length;function yP(i){let n=Object.keys(i);if(n.length!==Kbe){for(let e of n)if(_t[e]===void 0)throw Error("Unknown config property: "+e)}}function Ba(i){return i&&!H.isArray(i)&&(i=[i]),i}function S9(i){return B(this,null,function*(){return H.isStream(i)==="array"?yo(i):i})}function $be(i,n,...e){i.data=au(n.packets.stream,(t,r)=>B(this,null,function*(){yield Ah(i.data,r,{preventClose:!0});let o=Ga(r);try{yield yo(t,s=>s),yield Promise.all(e.map(s=>yo(s.packets.stream,a=>a))),yield o.close()}catch(s){yield o.abort(s)}}))}function n7(i,n,e){switch(n){case"object":return i;case"armored":return i.armor(e);case"binary":return i.write();default:throw Error("Unsupported format "+n)}}var ft=(()=>{class i extends Mi{constructor(e,t,r,o,s,a,l,c,d,h){super(e),this.httpClient=e,this.itemSelectedService=t,this.fwcUserService=r,this.fwcAuthService=o,this.messageService=s,this.fwcEventService=a,this.location=l,this.translate=c,this.refService=d,this.componentFactoryResolver=h,this.IO_MSG_TYPE="FWC_MSG",this.DEFAULT_PING_MS=5*60*1e3,this.subjectGridScroll=new Ue,this.subjectGridScrollToTop=new Ue,this.subjectHeaderScroll=new Ue,this.endpoint=_e.settings.fwcAppURL,Uf.socketDebug?localStorage.setItem("debug","engine.io-client:socket"):localStorage.removeItem("debug")}getTwitterTimeline(){let e=`${this.endpoint}/twitter/gettimeline`;return this.httpClient.get(e).pipe(q(this.handleAPIError))}getTwitterLatest(){let e=`${this.endpoint}/twitter/searchtweets`;return this.httpClient.get(e).pipe(q(this.handleAPIError))}ioConnect(e){let t,r,o;t=new URL(_e.settings.fwcAppURL),r=new URL(window.location.href),t.origin===r.origin?o=t.origin:o=_e.settings.fwcAppURL,this.socket=w0(o),this.socket.on("connect",()=>{_e.log("Socket connection established. ID: ",this.socket.id),this.fwcEventService.emitEvent({type:Ll.EVENT_CONNECTION_ESTABLISHED}),e&&(e(),e=null)}),this.socket.on("disconnect",()=>{_e.log("Socket connection finished."),this.fwcEventService.emitEvent({type:Ll.EVENT_CONNECTION_LOST})}),this.socket.on("ca:dh:created",s=>{let a={_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_CA};this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("VPN.PANEL.NEW.SUCCESS_NEW_CA.SUMMARY"),detail:this.translate.instant("VPN.PANEL.NEW.SUCCESS_NEW_CA.TEXT",{caId:s.caId})}),this.itemSelectedService.setModifiedItem(a)}),this.socket.on("log:info",s=>{let a=s.replace(/(?:\r\n|\r|\n)/g,"<br>"),l={type:Ll.EVENT_LOG,message:a};this.fwcEventService.emitEvent(l)}),this.socket.on("log:END",s=>{let a={type:Ll.EVENT_LOG,message:"END"};this.fwcEventService.emitEvent(a)})}ioSendMsg(e,t=this.IO_MSG_TYPE){this.socket.emit(t,e)}ioGetMsgs(){return new Ai(e=>{this.socket.on(this.IO_MSG_TYPE,t=>{e.next(t)})})}ioGetSocketId(){return this.socket?this.socket.id:null}ioGetSocketConnected(){return this.socket?this.socket.connected:!1}ioDisconnect(){this.socket&&this.socket.close()}doAppLogout(e){this.fwcAuthService.logout(),this.ioDisconnect(),this.clearPingInterval(),e&&localStorage.setItem(rn.LS_RELOAD_APP,new Date().getTime().toString())}ioListenOnLogEvent(e){this.socket.on(e,t=>{this.fwcEventService.emitEvent(t)})}ioReleaseLogEvent(e){this.socket.off(e)}generatePGPKeys(){return B(this,null,function*(){let{privateKey:e,publicKey:t}=yield y9({userIDs:[{name:"FWCloud.net",email:"info@fwcloud.net"}],rsaBits:2048,type:"rsa",format:"armored"});return{publicKeyArmored:t,privateKeyArmored:e}})}openPGPEncrypt(e,t){return B(this,null,function*(){if(!t)return e;let r=yield g9({armoredKey:t});return(yield w9({message:yield I9({text:e}),encryptionKeys:r})).toString()})}openPGPDecrypt(e,t){return B(this,null,function*(){if(!t)return e;let r=yield _9({armoredKey:t}),o=yield C9({armoredMessage:e}),{data:s}=yield v9({message:o,decryptionKeys:r});return s.toString()})}createDynamicComponentRef(e){return this.refService.getAppRef().createComponent(e)}fileUpload(e){let t=`${this.endpoint}/fileupload`,r=new FormData;return r.append("cloudImg",e),_e.log("FILE: ",e,r),this.httpClient.post(t,r).pipe(q(this.handleAPIError))}getAppVersions(){if(_e.settings.checkUpdates===!1)return this.getAPIVersion();let e=_e.settings.installMethod===pc.pkg?`${this.endpoint}/updates/type/${pc.pkg}`:`${this.endpoint}/updates`;return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}getAPIVersion(){let e=`${this.endpoint}/version`;return this.httpClient.get(e).pipe(K(this.handleAPIResponseNew),K(t=>({status:t.status,data:{api:{current:t.data.version,last:t.data.version,needsUpdate:!1},websrv:{current:null,last:null,needsUpdate:!1},ui:{current:Uf.VERSION,last:Uf.VERSION,needsUpdate:!1},updater:{current:null,last:null,needsUpdate:!1}}})),q(this.handleAPIError))}updateVersion(e){let t=`${this.endpoint}/updates/${e}`;return this.httpClient.put(t,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}setGridScroll(e){this.subjectGridScroll.next(e)}getGridScroll(){return this.subjectGridScroll.asObservable().pipe(bE(100))}setGridScrollToTop(){this.subjectGridScrollToTop.next(!0)}getGridScrollToTop(){return this.subjectGridScrollToTop.asObservable()}pingServer(){let e=`${this.endpoint}/ping`;return this.httpClient.put(e,{}).pipe(K(this.handleAPIResponseNew),q(this.handleAPIError))}setPingInterval(){this.clearPingInterval(),this.pingInterval=setInterval(()=>{this.pingServer().subscribe({next:e=>{},error:e=>{}})},this.DEFAULT_PING_MS)}clearPingInterval(){clearInterval(this.pingInterval)}fwcAPICall(e,...t){return new Promise((o,s)=>{e||s({error:{msg:"Incorrect API call"}}),Array.isArray(t)||(t=[]),e(...t).subscribe(a=>{o(a)},a=>B(this,null,function*(){if(a&&a.status==403&&a.error){let l=a.error;if(a.error instanceof Blob&&(l=yield a.error.text(),l=JSON.parse(l)),l.fwc_confirm_token){let c=l.fwc_confirm_token;this.fwcUserService.setConfirmationToken(c),e(...t).subscribe(d=>{o(d),this.fwcUserService.setConfirmationToken(void 0)},d=>{s(d),this.fwcUserService.setConfirmationToken(void 0)})}else s(a)}else s(a)}))})}fwcAPICallObservable(e,...t){return new Ai(r=>{if(!e){r.error({error:{msg:"Incorrect API call"}});return}Array.isArray(t)||(t=[]);let o=new Dr,s=(a=!1)=>{let l=e(...t).subscribe({next:c=>{r.next(c),r.complete()},error:c=>B(this,null,function*(){if(c&&c.status===403&&c.error){let d=c.error;if(c.error instanceof Blob&&(d=yield c.error.text(),d=JSON.parse(d)),d.fwc_confirm_token&&!a){let h=d.fwc_confirm_token;this.fwcUserService.setConfirmationToken(h),s(!0)}else r.error(c)}else r.error(c)})});o.add(l)};return s(),()=>{o.unsubscribe()}})}isCommunicationErrorStr(e){let t=/SSH_ERROR\((client-authentication|client-socket|client-timeout)\)/.exec(e),r=/(ECONNREFUSED|ETIMEDOUT|EHOSTUNREACH|ECONNRESET|EPROTO|ECONNABORTED: Timeout|ApiKeyNotFound|ApiKeyNotValid|NotAllowedIP|DirNotFound)/.exec(e),o=null,s;return t?s=t[1]:r&&(s=r[1],s==="ETIMEDOUT"&&(s="ECONNABORTED: Timeout")),s&&(o=this.translate.instant("API_ERROR."+s)),o}isCommunicationError(e){let t=null,r;if(e){let o;e.msg?o=e.msg:e.message&&(o=e.message),t=this.isCommunicationErrorStr(o)}return t}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(ht),de(at),de(ea),de(Kt),de(dn),de(gp),de(Ye),de(Ts),de(hp))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var I1=(()=>{class i{constructor(){this.forwardSelection=new Ue}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var R9=new WeakMap,x1=i=>(...n)=>{let e=i(...n);return R9.set(e,!0),e},rC=i=>typeof i=="function"&&R9.has(i),E9=window.customElements!==void 0&&window.customElements.polyfillWrapFlushCallback!==void 0,DP=(i,n,e=null)=>{for(;n!==e;){let t=n.nextSibling;i.removeChild(n),n=t}},Gl={},A9={},Gd=`{{lit-${String(Math.random()).slice(2)}}}`,P9=`<!--${Gd}-->`,x9=new RegExp(`${Gd}|${P9}`),iC="$lit$",w1=class{constructor(n,e){this.parts=[],this.element=e;let t=[],r=[],o=document.createTreeWalker(e.content,133,null,!1),s=0,a=-1,l=0,{strings:c,values:{length:d}}=n;for(;l<d;){let h=o.nextNode();if(h!==null){if(a++,h.nodeType===1){if(h.hasAttributes()){let _=h.attributes,{length:C}=_,I=0;for(let b=0;b<C;b++)T9(_[b].name,iC)&&I++;for(;I-- >0;){let b=c[l],E=EP.exec(b)[2],R=E.toLowerCase()+iC,T=h.getAttribute(R);h.removeAttribute(R);let A=T.split(x9);this.parts.push({type:"attribute",index:a,name:E,strings:A}),l+=A.length-1}}h.tagName==="TEMPLATE"&&(r.push(h),o.currentNode=h.content)}else if(h.nodeType===3){let _=h.data;if(_.indexOf(Gd)>=0){let C=h.parentNode,I=_.split(x9),b=I.length-1;for(let E=0;E<b;E++){let R,T=I[E];if(T==="")R=cu();else{let A=EP.exec(T);A!==null&&T9(A[2],iC)&&(T=T.slice(0,A.index)+A[1]+A[2].slice(0,-iC.length)+A[3]),R=document.createTextNode(T)}C.insertBefore(R,h),this.parts.push({type:"node",index:++a})}I[b]===""?(C.insertBefore(cu(),h),t.push(h)):h.data=I[b],l+=b}}else if(h.nodeType===8)if(h.data===Gd){let _=h.parentNode;(h.previousSibling===null||a===s)&&(a++,_.insertBefore(cu(),h)),s=a,this.parts.push({type:"node",index:a}),h.nextSibling===null?h.data="":(t.push(h),a--),l++}else{let _=-1;for(;(_=h.data.indexOf(Gd,_+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}else o.currentNode=r.pop()}for(let h of t)h.parentNode.removeChild(h)}},T9=(i,n)=>{let e=i.length-n.length;return e>=0&&i.slice(e)===n},D9=i=>i.index!==-1,cu=()=>document.createComment(""),EP=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;var oC=class{constructor(n,e,t){this.__parts=[],this.template=n,this.processor=e,this.options=t}update(n){let e=0;for(let t of this.__parts)t!==void 0&&t.setValue(n[e]),e++;for(let t of this.__parts)t!==void 0&&t.commit()}_clone(){let n=E9?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],t=this.template.parts,r=document.createTreeWalker(n,133,null,!1),o,s=0,a=0,l=r.nextNode();for(;s<t.length;)if(o=t[s],D9(o)){for(;a<o.index;)a++,l.nodeName==="TEMPLATE"&&(e.push(l),r.currentNode=l.content),(l=r.nextNode())===null&&(r.currentNode=e.pop(),l=r.nextNode());if(o.type==="node"){let c=this.processor.handleTextExpression(this.options);c.insertAfterNode(l.previousSibling),this.__parts.push(c)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,o.name,o.strings,this.options));s++}else this.__parts.push(void 0),s++;return E9&&(document.adoptNode(n),customElements.upgrade(n)),n}};var Ybe=` ${Gd} `,Hl=class{constructor(n,e,t,r){this.strings=n,this.values=e,this.type=t,this.processor=r}getHTML(){let n=this.strings.length-1,e="",t=!1;for(let r=0;r<n;r++){let o=this.strings[r],s=o.lastIndexOf("<!--");t=(s>-1||t)&&o.indexOf("-->",s+1)===-1;let a=EP.exec(o);a===null?e+=o+(t?Ybe:P9):e+=o.substr(0,a.index)+a[1]+a[2]+iC+a[3]+Gd}return e+=this.strings[n]}getTemplateElement(){let n=document.createElement("template");return n.innerHTML=this.getHTML(),n}};var FP=i=>i===null||!(typeof i=="object"||typeof i=="function"),F9=i=>Array.isArray(i)||!(!i||!i[Symbol.iterator]),v1=class{constructor(n,e,t){this.dirty=!0,this.element=n,this.name=e,this.strings=t,this.parts=[];for(let r=0;r<t.length-1;r++)this.parts[r]=this._createPart()}_createPart(){return new du(this)}_getValue(){let n=this.strings,e=n.length-1,t="";for(let r=0;r<e;r++){t+=n[r];let o=this.parts[r];if(o!==void 0){let s=o.value;if(FP(s)||!F9(s))t+=typeof s=="string"?s:String(s);else for(let a of s)t+=typeof a=="string"?a:String(a)}}return t+=n[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},du=class{constructor(n){this.value=void 0,this.committer=n}setValue(n){n!==Gl&&(!FP(n)||n!==this.value)&&(this.value=n,rC(n)||(this.committer.dirty=!0))}commit(){for(;rC(this.value);){let n=this.value;this.value=Gl,n(this)}this.value!==Gl&&this.committer.commit()}},b1=class i{constructor(n){this.value=void 0,this.__pendingValue=void 0,this.options=n}appendInto(n){this.startNode=n.appendChild(cu()),this.endNode=n.appendChild(cu())}insertAfterNode(n){this.startNode=n,this.endNode=n.nextSibling}appendIntoPart(n){n.__insert(this.startNode=cu()),n.__insert(this.endNode=cu())}insertAfterPart(n){n.__insert(this.startNode=cu()),this.endNode=n.endNode,n.endNode=this.startNode}setValue(n){this.__pendingValue=n}commit(){for(;rC(this.__pendingValue);){let e=this.__pendingValue;this.__pendingValue=Gl,e(this)}let n=this.__pendingValue;n!==Gl&&(FP(n)?n!==this.value&&this.__commitText(n):n instanceof Hl?this.__commitTemplateResult(n):n instanceof Node?this.__commitNode(n):F9(n)?this.__commitIterable(n):n===A9?(this.value=A9,this.clear()):this.__commitText(n))}__insert(n){this.endNode.parentNode.insertBefore(n,this.endNode)}__commitNode(n){this.value!==n&&(this.clear(),this.__insert(n),this.value=n)}__commitText(n){let e=this.startNode.nextSibling,t=typeof(n=n??"")=="string"?n:String(n);e===this.endNode.previousSibling&&e.nodeType===3?e.data=t:this.__commitNode(document.createTextNode(t)),this.value=n}__commitTemplateResult(n){let e=this.options.templateFactory(n);if(this.value instanceof oC&&this.value.template===e)this.value.update(n.values);else{let t=new oC(e,n.processor,this.options),r=t._clone();t.update(n.values),this.__commitNode(r),this.value=t}}__commitIterable(n){Array.isArray(this.value)||(this.value=[],this.clear());let e=this.value,t,r=0;for(let o of n)(t=e[r])===void 0&&(t=new i(this.options),e.push(t),r===0?t.appendIntoPart(this):t.insertAfterPart(e[r-1])),t.setValue(o),t.commit(),r++;r<e.length&&(e.length=r,this.clear(t&&t.endNode))}clear(n=this.startNode){DP(this.startNode.parentNode,n.nextSibling,this.endNode)}},AP=class{constructor(n,e,t){if(this.value=void 0,this.__pendingValue=void 0,t.length!==2||t[0]!==""||t[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=n,this.name=e,this.strings=t}setValue(n){this.__pendingValue=n}commit(){for(;rC(this.__pendingValue);){let e=this.__pendingValue;this.__pendingValue=Gl,e(this)}if(this.__pendingValue===Gl)return;let n=!!this.__pendingValue;this.value!==n&&(n?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=n),this.__pendingValue=Gl}},xP=class extends v1{constructor(n,e,t){super(n,e,t),this.single=t.length===2&&t[0]===""&&t[1]===""}_createPart(){return new Dh(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},Dh=class extends du{},k9=!1;try{let i={get capture(){return k9=!0,!1}};window.addEventListener("test",i,i),window.removeEventListener("test",i,i)}catch{}var TP=class{constructor(n,e,t){this.value=void 0,this.__pendingValue=void 0,this.element=n,this.eventName=e,this.eventContext=t,this.__boundHandleEvent=r=>this.handleEvent(r)}setValue(n){this.__pendingValue=n}commit(){for(;rC(this.__pendingValue);){let o=this.__pendingValue;this.__pendingValue=Gl,o(this)}if(this.__pendingValue===Gl)return;let n=this.__pendingValue,e=this.value,t=n==null||e!=null&&(n.capture!==e.capture||n.once!==e.once||n.passive!==e.passive),r=n!=null&&(e==null||t);t&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=Xbe(n),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=n,this.__pendingValue=Gl}handleEvent(n){typeof this.value=="function"?this.value.call(this.eventContext||this.element,n):this.value.handleEvent(n)}},Xbe=i=>i&&(k9?{capture:i.capture,passive:i.passive,once:i.once}:i.capture);var OP=class{handleAttributeExpressions(n,e,t,r){let o=e[0];return o==="."?new xP(n,e.slice(1),t).parts:o==="@"?[new TP(n,e.slice(1),r.eventContext)]:o==="?"?[new AP(n,e.slice(1),t)]:new v1(n,e,t).parts}handleTextExpression(n){return new b1(n)}},Fh=new OP;function Qbe(i){let n=sC.get(i.type);n===void 0&&(n={stringsArray:new WeakMap,keyString:new Map},sC.set(i.type,n));let e=n.stringsArray.get(i.strings);if(e!==void 0)return e;let t=i.strings.join(Gd);return(e=n.keyString.get(t))===void 0&&(e=new w1(i,i.getTemplateElement()),n.keyString.set(t,e)),n.stringsArray.set(i.strings,e),e}var sC=new Map,qm=new WeakMap,Zbe=(i,n,e)=>{let t=qm.get(n);t===void 0&&(DP(n,n.firstChild),qm.set(n,t=new b1(Object.assign({templateFactory:Qbe},e))),t.appendInto(n)),t.setValue(i),t.commit()};(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");var Ke=(i,...n)=>new Hl(i,n,"html",Fh),kP=133;function N9(i,n){let{element:{content:e},parts:t}=i,r=document.createTreeWalker(e,kP,null,!1),o=nC(t),s=t[o],a=-1,l=0,c=[],d=null;for(;r.nextNode();){a++;let h=r.currentNode;for(h.previousSibling===d&&(d=null),n.has(h)&&(c.push(h),d===null&&(d=h)),d!==null&&l++;s!==void 0&&s.index===a;)s.index=d!==null?-1:s.index-l,s=t[o=nC(t,o)]}c.forEach(h=>h.parentNode.removeChild(h))}var e1e=i=>{let n=i.nodeType===11?0:1,e=document.createTreeWalker(i,kP,null,!1);for(;e.nextNode();)n++;return n},nC=(i,n=-1)=>{for(let e=n+1;e<i.length;e++){let t=i[e];if(D9(t))return e}return-1};function t1e(i,n,e=null){let{element:{content:t},parts:r}=i;if(e==null){t.appendChild(n);return}let o=document.createTreeWalker(t,kP,null,!1),s=nC(r),a=0,l=-1;for(;o.nextNode();)for(l++,o.currentNode===e&&(a=e1e(n),e.parentNode.insertBefore(n,e));s!==-1&&r[s].index===l;){if(a>0){for(;s!==-1;)r[s].index+=a,s=nC(r,s);return}s=nC(r,s)}}var L9=(i,n)=>`${i}--${n}`,S1=!0;typeof window.ShadyCSS>"u"?S1=!1:typeof window.ShadyCSS.prepareTemplateDom>"u"&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),S1=!1);var i1e=i=>n=>{let e=L9(n.type,i),t=sC.get(e);t===void 0&&(t={stringsArray:new WeakMap,keyString:new Map},sC.set(e,t));let r=t.stringsArray.get(n.strings);if(r!==void 0)return r;let o=n.strings.join(Gd);if((r=t.keyString.get(o))===void 0){let s=n.getTemplateElement();S1&&window.ShadyCSS.prepareTemplateDom(s,i),r=new w1(n,s),t.keyString.set(o,r)}return t.stringsArray.set(n.strings,r),r},n1e=["html","svg"],r1e=i=>{n1e.forEach(n=>{let e=sC.get(L9(n,i));e!==void 0&&e.keyString.forEach(t=>{let{element:{content:r}}=t,o=new Set;Array.from(r.querySelectorAll("style")).forEach(s=>{o.add(s)}),N9(t,o)})})},M9=new Set,o1e=(i,n,e)=>{M9.add(i);let t=e?e.element:document.createElement("template"),r=n.querySelectorAll("style"),{length:o}=r;if(o===0){window.ShadyCSS.prepareTemplateStyles(t,i);return}let s=document.createElement("style");for(let c=0;c<o;c++){let d=r[c];d.parentNode.removeChild(d),s.textContent+=d.textContent}r1e(i);let a=t.content;e?t1e(e,s,a.firstChild):a.insertBefore(s,a.firstChild),window.ShadyCSS.prepareTemplateStyles(t,i);let l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&l!==null)n.insertBefore(l.cloneNode(!0),n.firstChild);else if(e){a.insertBefore(s,a.firstChild);let c=new Set;c.add(s),N9(e,c)}},s1e=(i,n,e)=>{if(!e||typeof e!="object"||!e.scopeName)throw new Error("The `scopeName` option is required.");let t=e.scopeName,r=qm.has(n),o=S1&&n.nodeType===11&&!!n.host,s=o&&!M9.has(t),a=s?document.createDocumentFragment():n;if(Zbe(i,a,Object.assign({templateFactory:i1e(t)},e)),s){let l=qm.get(a);qm.delete(a);let c=l.value instanceof oC?l.value.template:void 0;o1e(t,a,c),DP(n,n.firstChild),n.appendChild(a),qm.set(n,l)}!r&&o&&window.ShadyCSS.styleElement(n.host)};var a1e;window.JSCompiler_renameProperty=(i,n)=>i;var RP={toAttribute(i,n){switch(n){case Boolean:return i?"":null;case Object:case Array:return i==null?i:JSON.stringify(i);default:return i}},fromAttribute(i,n){switch(n){case Boolean:return i!==null;case Number:return i===null?null:Number(i);case Object:case Array:return JSON.parse(i);default:return i}}},V9=(i,n)=>n!==i&&(n===n||i===i),y1={attribute:!0,type:String,converter:RP,reflect:!1,hasChanged:V9},l1e=Promise.resolve(!0),wP=1,vP=4,bP=8,SP=16,O9=32,PP="finalized",E1=class extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=l1e,this._hasConnectedResolver=void 0,this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();let n=[];return this._classProperties.forEach((e,t)=>{let r=this._attributeNameForProperty(t,e);r!==void 0&&(this._attributeToPropertyMap.set(r,t),n.push(r))}),n}static _ensureClassProperties(){if(!this.hasOwnProperty(window.JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;let n=Object.getPrototypeOf(this)._classProperties;n!==void 0&&n.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(n,e=y1){if(this._ensureClassProperties(),this._classProperties.set(n,e),e.noAccessor||this.prototype.hasOwnProperty(n))return;let t=typeof n=="symbol"?Symbol():`__${n}`;Object.defineProperty(this.prototype,n,{get(){return this[t]},set(r){let o=this[n];this[t]=r,this._requestUpdate(n,o)},configurable:!0,enumerable:!0})}static finalize(){let n=Object.getPrototypeOf(this);if(n.hasOwnProperty(PP)||n.finalize(),this[PP]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(window.JSCompiler_renameProperty("properties",this))){let e=this.properties,t=[...Object.getOwnPropertyNames(e),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(e):[]];for(let r of t)this.createProperty(r,e[r])}}static _attributeNameForProperty(n,e){let t=e.attribute;return t===!1?void 0:typeof t=="string"?t:typeof n=="string"?n.toLowerCase():void 0}static _valueHasChanged(n,e,t=V9){return t(n,e)}static _propertyValueFromAttribute(n,e){let t=e.type,r=e.converter||RP,o=typeof r=="function"?r:r.fromAttribute;return o?o(n,t):n}static _propertyValueToAttribute(n,e){if(e.reflect===void 0)return;let t=e.type,r=e.converter;return(r&&r.toAttribute||RP.toAttribute)(n,t)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((n,e)=>{if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((n,e)=>this[e]=n),this._instanceProperties=void 0}connectedCallback(){this._updateState=this._updateState|O9,this._hasConnectedResolver&&(this._hasConnectedResolver(),this._hasConnectedResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(n,e,t){e!==t&&this._attributeToProperty(n,t)}_propertyToAttribute(n,e,t=y1){let r=this.constructor,o=r._attributeNameForProperty(n,t);if(o!==void 0){let s=r._propertyValueToAttribute(e,t);if(s===void 0)return;this._updateState=this._updateState|bP,s==null?this.removeAttribute(o):this.setAttribute(o,s),this._updateState=this._updateState&~bP}}_attributeToProperty(n,e){if(this._updateState&bP)return;let t=this.constructor,r=t._attributeToPropertyMap.get(n);if(r!==void 0){let o=t._classProperties.get(r)||y1;this._updateState=this._updateState|SP,this[r]=t._propertyValueFromAttribute(e,o),this._updateState=this._updateState&~SP}}_requestUpdate(n,e){let t=!0;if(n!==void 0){let r=this.constructor,o=r._classProperties.get(n)||y1;r._valueHasChanged(this[n],e,o.hasChanged)?(this._changedProperties.has(n)||this._changedProperties.set(n,e),o.reflect===!0&&!(this._updateState&SP)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(n,o))):t=!1}!this._hasRequestedUpdate&&t&&this._enqueueUpdate()}requestUpdate(n,e){return this._requestUpdate(n,e),this.updateComplete}_enqueueUpdate(){return B(this,null,function*(){this._updateState=this._updateState|vP;let n,e,t=this._updatePromise;this._updatePromise=new Promise((r,o)=>{n=r,e=o});try{yield t}catch{}this._hasConnected||(yield new Promise(r=>this._hasConnectedResolver=r));try{let r=this.performUpdate();r!=null&&(yield r)}catch(r){e(r)}n(!this._hasRequestedUpdate)})}get _hasConnected(){return this._updateState&O9}get _hasRequestedUpdate(){return this._updateState&vP}get hasUpdated(){return this._updateState&wP}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let n=!1,e=this._changedProperties;try{(n=this.shouldUpdate(e))&&this.update(e)}catch(t){throw n=!1,t}finally{this._markUpdated()}n&&(this._updateState&wP||(this._updateState=this._updateState|wP,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~vP}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(n){return!0}update(n){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0)}updated(n){}firstUpdated(n){}};E1[a1e=PP]=!0;var B9="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,U9=Symbol(),A1=class{constructor(n,e){if(e!==U9)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=n}get styleSheet(){return this._styleSheet===void 0&&(B9?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}},c1e=i=>{if(i instanceof A1)return i.cssText;if(typeof i=="number")return i;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${i}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},Be=(i,...n)=>{let e=n.reduce((t,r,o)=>t+c1e(r)+i[o+1],i[0]);return new A1(e,U9)};(window.litElementVersions||(window.litElementVersions=[])).push("2.2.1");function j9(i,n=[]){for(let e=0,t=i.length;e<t;e++){let r=i[e];Array.isArray(r)?j9(r,n):n.push(r)}return n}var d1e=i=>i.flat?i.flat(1/0):j9(i),Ym=(()=>{class i extends E1{static finalize(){super.finalize.call(this),this._styles=this.hasOwnProperty(window.JSCompiler_renameProperty("styles",this))?this._getUniqueStyles():this._styles||[]}static _getUniqueStyles(){let e=this.styles,t=[];return Array.isArray(e)?d1e(e).reduceRight((r,o)=>(r.add(o),r),new Set).forEach(r=>t.unshift(r)):e&&t.push(e),t}initialize(){super.initialize(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){let e=this.constructor._styles;e.length!==0&&(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(t=>t.cssText),this.localName):B9?this.renderRoot.adoptedStyleSheets=e.map(t=>t.styleSheet):this._needsShimAdoptedStyleSheets=!0)}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(e){super.update(e);let t=this.render();t instanceof Hl&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(r=>{let o=document.createElement("style");o.textContent=r.cssText,this.renderRoot.appendChild(o)}))}render(){}}return i.finalized=!0,i.render=s1e,i})();var NP=new WeakMap,Ln=x1(i=>n=>{if(!(n instanceof du)||n instanceof Dh||n.committer.name!=="class"||n.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");let{committer:e}=n,{element:t}=e;NP.has(n)||(t.className=e.strings.join(" "));let{classList:r}=t,o=NP.get(n);for(let s in o)s in i||r.remove(s);for(let s in i){let a=i[s];(!o||a!==o[s])&&r[a?"add":"remove"](s)}NP.set(n,i)});var LP=new WeakMap,sn=x1(i=>n=>{if(!(n instanceof du)||n instanceof Dh||n.committer.name!=="style"||n.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");let{committer:e}=n,{style:t}=e.element;LP.has(n)||(t.cssText=e.strings.join(" "));let r=LP.get(n);for(let o in r)o in i||(o.indexOf("-")===-1?t[o]=null:t.removeProperty(o));for(let o in i)o.indexOf("-")===-1?t[o]=i[o]:t.setProperty(o,i[o]);LP.set(n,i)});var MP=class{constructor(n,e,t){this._currentDelay=this._isNumber(e)?e:0,this._currentDuration=this._isNumber(t)?t:1e3,this._currentTarget=n,this._objStateList=[],this._isDestroyed=!1,this._animationInterval=null,this._animationTick=10,this._numSteps=Math.floor(this._currentDuration/this._animationTick)}destroy(){this._isDestroyed=!0,this._removeAnimationInterval()}get delay(){return this._currentDelay}set delay(n){this._isNumber(n)&&this._currentDelay!==n&&(this._currentDelay=n)}get duration(){return this._currentDuration}set duration(n){this._isNumber(n)&&this._currentDuration!==n&&(this._currentDuration=n,this._numSteps=Math.floor(this._currentDuration/this._animationTick))}animate(n,e,t,r){if(!this._isObject(n)&&!this._isArray(n))return Promise.resolve();{let o=this;return new Promise(s=>{o._removeAnimationInterval(),o._currentDelay=e,setTimeout(function(){t&&(o._currentDuration=t),o._numSteps=Math.floor(o._currentDuration/o._animationTick);let a=o._convertToArray(n);o._updateState(a);let l=0;o._animationInterval=setInterval(function(){let c=[];++l<=o._numSteps&&o._objStateList.forEach(_=>c.push({element:_.element,values:o._updateCurrentValue(_.props,_.values,l)}));let d=!0,h=l===o._numSteps;r&&(h&&o._removeAnimationInterval(),d=r([...c],h)),d===!1?(o._removeAnimationInterval(),s(),o._reverse(c,t/4,r)):(h||o._isDestroyed)&&(o._removeAnimationInterval(),o._updateState(c),s())},o._animationTick)},o._currentDelay)})}}_reverse(n,e,t){let r=this;return new Promise(o=>{r._removeAnimationInterval(),e&&(r._currentDuration=e),r._numSteps=Math.floor(r._currentDuration/r._animationTick);let s=r._convertToArray(n);r._updateState(s,!0);let a=0;r._animationInterval=setInterval(function(){let l=[];++a<=r._numSteps&&r._objStateList.forEach(d=>l.push({element:d.element,values:r._updateCurrentValue(d.props,d.values,a)}));let c=a===r._numSteps;t&&(c&&r._removeAnimationInterval(),t([...l],c,!0)),c&&(r._removeAnimationInterval(),r._updateState(l),o())},r._animationTick)})}_getCurrentValue(n){return this.animationSpeed?this.animationSpeed(n):n}_removeAnimationInterval(){this._animationInterval&&clearInterval(this._animationInterval),this._animationInterval=null}_updateCurrentValue(n,e,t){let r={};return n.forEach(o=>r[o]=t<this._numSteps?e[o].value+this._getCurrentValue(e[o].step*t):e[o].end),r}_getStartingValues(){let n=[];return this._objStateList.forEach(e=>n.push(e.values)),n}_updateState(n,e){let t=this._getStartingValues();this._objStateList.length=0,n.forEach((r,o)=>{let s=this._getObjProperties(r.values),a={};r.current?a=r.current:r.element&&this._isElement(r.element)&&(a=getComputedStyle(r.element));let l={element:r.element,props:s,values:{}};s.forEach(c=>{let d=e?t[o][c].value:r.values[c],h=this._getNumValue(a[c]);l.values[c]={end:this.inverseFunction?this.inverseFunction(d):d,step:(d-h)/this._numSteps,value:h}}),this._objStateList.push(l)})}_convertToArray(n){return this._isObject(n)?[n]:this._isArray(n)?n:[]}_createEmptyArray(n){return new Array(n).fill({})}_getNumValue(n){return this._isString(n)?parseFloat(n):this._isNumber(n)?n:0}_getObjProperties(n){return Object.keys(n)}_isArray(n){return n?Array.isArray(n):!1}_isElement(n){return n?n instanceof Element:!1}_isFieldAvailable(n){return n!==void 0}_isNumber(n){return n!==void 0&&!Number.isNaN(n)?typeof n=="number"||n instanceof Number:!1}_isObject(n){return n?typeof n=="object"&&n!==null&&!Array.isArray(n):!1}_isString(n){return n?typeof n=="string"||n instanceof String:!1}getTarget(){return this._currentTarget}isActive(){return this._animationInterval!==null}isAnimated(n){return this._isArray(this._currentTarget)?this._currentTarget.filter(e=>e===n).length>0:this._currentTarget===n}},Xo=MP;var VP=class{_calcMargin(n){return n?{top:getComputedStyle(n)["margin-top"]?parseInt(getComputedStyle(n)["margin-top"],10):getComputedStyle(n).marginTop?parseInt(getComputedStyle(n).marginTop,10):0,right:getComputedStyle(n)["margin-right"]?parseInt(getComputedStyle(n)["margin-right"],10):getComputedStyle(n).marginRight?parseInt(getComputedStyle(n).marginRight,10):0,bottom:getComputedStyle(n)["margin-bottom"]?parseInt(getComputedStyle(n)["margin-bottom"],10):getComputedStyle(n).marginBottom?parseInt(getComputedStyle(n).marginBottom,10):0,left:getComputedStyle(n)["margin-left"]?parseInt(getComputedStyle(n)["margin-left"],10):getComputedStyle(n).marginLeft?parseInt(getComputedStyle(n).marginLeft,10):0}:{top:0,right:0,bottom:0,left:0}}checkHit(n,e,t){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom}checkNumInRange(n,e,t){return n>e-t&&n<e+t}colorToRgb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}convertRgbaToHex(n){let e="#";return this.convertRgbaToNum(n,!0).forEach(t=>{t=t.toString(16),e+=t.length===1?"0"+t:t}),e}convertRgbaToHsl(n){let e,t,r=this.convertRgbaToNum(n,!0),o=r[0]/255,s=r[1]/255,a=r[2]/255,l=Math.max(o,s,a),c=Math.min(o,s,a),d=(l+c)/2;if(l===c)e=t=0;else{let h=l-c;switch(t=d>.5?h/(2-l-c):h/(l+c),l){case o:e=(s-a)/h+(s<a?6:0);break;case s:e=(a-o)/h+2;break;case a:e=(o-s)/h+4;break;default:this._defaultFunc()}e/=6}return(e=Math.round(360*e))<0&&(e+=360),t=Math.floor(Math.round(100*t)),d=Math.floor(Math.round(100*d)),e+"\xB0, "+t+"%, "+d+"%"}convertRgbaToNum(n,e){let t=(n=(n=n.replace(/[.*+?^${}()|[\]\\]/g,"")).replace("rgba","").replace("rgb","")).split(",").map(r=>parseInt(r));return e&&(t=t.filter((r,o)=>o<3)),t.forEach(r=>this.setNumInRange(r,0,255)),t}convertHexToRgba(n){let e=0,t=0,r=0;return(n=n.replace(/[.*+?^${}()|[\]\\]/g,"")).length===4?(e=+("0x"+n[1]+n[1]),t=+("0x"+n[2]+n[2]),r=+("0x"+n[3]+n[3])):n.length===7&&(e=+("0x"+n[1]+n[2]),t=+("0x"+n[3]+n[4]),r=+("0x"+n[5]+n[6])),"rgba("+parseInt(e,10).toString()+","+parseInt(t,10).toString()+","+parseInt(r,10).toString()+",1)"}convertHslToRgba(n){let e=(n=(n=n.replace(/[.*+?^${}()|[\]\\]/g,"")).replace("\xB0","").replace("%","").replace("%","")).split(",").filter((c,d)=>d<3).map(c=>parseInt(c)),t=e[0],r=e[1]/100,o=e[2]/100,s=0,a=0,l=0;if(r===0)s=a=l=o;else{let c=o<.5?o*(1+r):o+r-o*r,d=2*o-c;s=this.colorToRgb(d,c,t+1/3),a=this.colorToRgb(d,c,t),l=this.colorToRgb(d,c,t-1/3)}return"rgba("+(s=Math.round(255*s))+", "+(a=Math.round(255*a))+", "+(l=Math.round(255*l))+", 1)"}convertValue(n,e){let t=n??null;if(e){let r=e.locales||"en-US",o=e.options||{};this.isNumber(t)?t=Intl.NumberFormat(r,o).format(t):this.isDate(t)?t=Intl.DateTimeFormat(r,o).format(t):t=this.convertValueToString(n)}else t=this.convertValueToString(n);return t}convertValueToString(n){return n!=null?n.toString():""}_defaultFunc(){}_escapeRegExp(n){return n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}getAngle(n,e,t){return t?Math.atan2(e.y-n.y,e.x-n.x):180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI}getBorderWidth(n){return n?{top:getComputedStyle(n)["border-top-width"]?parseInt(getComputedStyle(n)["border-top-width"],10):getComputedStyle(n).borderTopWidth?parseInt(getComputedStyle(n).borderTopWidth,10):0,right:getComputedStyle(n)["border-right-width"]?parseInt(getComputedStyle(n)["border-right-width"],10):getComputedStyle(n).borderRightWidth?parseInt(getComputedStyle(n).borderRightWidth,10):0,bottom:getComputedStyle(n)["border-bottom-width"]?parseInt(getComputedStyle(n)["border-bottom-width"],10):getComputedStyle(n).borderTopWidth?parseInt(getComputedStyle(n).borderTopWidth,10):0,left:getComputedStyle(n)["border-left-width"]?parseInt(getComputedStyle(n)["border-left-width"],10):getComputedStyle(n).borderLeftWidth?parseInt(getComputedStyle(n).borderLeftWidth,10):0}:{top:0,right:0,bottom:0,left:0}}getClientPos(n,e){let t=this.getShiftPos(),r=this.getMousePos(n);r.x-=t.x,r.y-=t.y;let o=this.getPageRect(e);return{x:r.x-o.left,y:r.y-o.top}}getClientRect(n,e){let t=this.getPageRect(n),r=this.getPageRect(e);return{top:r.top-t.top,right:r.left+r.width,bottom:r.top+r.height,left:r.left-t.left,height:r.height,width:r.width,x:r.x-t.x,y:r.y-t.y}}getColorAtPosition(n,e,t){if(n){let r=n.getImageData(e,t,1,1).data;return"rgba("+r[0]+","+r[1]+","+r[2]+",1)"}return""}getDateFromString(n){if(this.isString(n)){let e=Date.parse(n);if(n.slice(-1)==="Z"&&!isNaN(e))return new Date(e)}else if(this.isDate(n))return n;return null}getDateNum(n){if(this.isDate(n)){let e=n.getFullYear(),t=n.getMonth(),r=n.getDate();return new Date(e,t,r,0,0,0,0).valueOf()}return 0}getMargin(n){return n?this._calcMargin(n):{top:0,right:0,bottom:0,left:0}}getMouseOffsetPos(n,e){let t=this.getShiftPos(),r=this.getMousePos(n);r.x-=t.x,r.y-=t.y;let o=this.getPageRect(e);return{x:r.x-o.left,y:r.y-o.top}}getMousePos(n){return{x:n.pageX?n.pageX:n.originalEvent?n.originalEvent.pageX:0,y:n.pageY?n.pageY:n.originalEvent?n.originalEvent.pageY:0}}getObjFromListById(n,e){let t=null;if(n){for(let r=0;r<n.length;r++)if(this.isObject(n[r])&&n[r].id===e){t=n[r];break}}return t}getObjFromListByName(n,e,t){let r=null;if(n&&e){for(let o=0;o<n.length;o++)if(this.isObject(n[o])&&n[o][e]===t){r=n[o];break}}return r}getPadding(n){return n?{top:getComputedStyle(n)["padding-top"]?parseInt(getComputedStyle(n)["padding-top"],10):getComputedStyle(n).paddingTop?parseInt(getComputedStyle(n).paddingTop,10):0,right:getComputedStyle(n)["padding-right"]?parseInt(getComputedStyle(n)["padding-right"],10):getComputedStyle(n).paddingRight?parseInt(getComputedStyle(n).paddingRight,10):0,bottom:getComputedStyle(n)["padding-bottom"]?parseInt(getComputedStyle(n)["padding-bottom"],10):getComputedStyle(n).paddingBottom?parseInt(getComputedStyle(n).paddingBottom,10):0,left:getComputedStyle(n)["padding-left"]?parseInt(getComputedStyle(n)["padding-left"],10):getComputedStyle(n).paddingLeft?parseInt(getComputedStyle(n).paddingLeft,10):0}:{top:0,right:0,bottom:0,left:0}}getPageRect(n){return n?n.getBoundingClientRect():{top:0,right:0,bottom:0,left:0,height:0,width:0,x:0,y:0}}getShiftPos(){return{x:document.body.scrollLeft>0?document.body.scrollLeft:document.documentElement.scrollLeft>0?document.documentElement.scrollLeft:0,y:document.body.scrollTop>0?document.body.scrollTop:document.documentElement.scrollTop>0?document.documentElement.scrollTop:0}}getStyle(n){return this.isObject(n)&&!this.isEmpty(n)?n:{}}getTouchData(n){return n.changedTouches?n.changedTouches:n.originalEvent?n.originalEvent.changedTouches:null}getUniqueId(n){let e=n||"-";function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+e+t()+e+t()+e+t()+e+t()+t()+t()}isDate(n){return n&&Object.prototype.toString.call(n)==="[object Date]"&&!isNaN(n)}isDefined(n){return n!=null}isElement(n){return n?n instanceof Element:!1}isEmpty(n){return this.isString(n)?!n.trim().length:n&&Object.keys(n).length===0&&n.constructor===Object}isEqual(n,e){return n&&e?n.toString()===e.toString():!1}isFieldAvailable(n,e){return n!==void 0?n:e}isFunc(n){return n?typeof n=="function"||n instanceof Function:!1}isIndexInRange(n,e){return e?n>=0&&n<e.length:!1}isNumber(n){return n!==void 0&&!Number.isNaN(n)?typeof n=="number"||n instanceof Number:!1}isObject(n){return n?typeof n=="object"&&n!==null&&!Array.isArray(n):!1}isString(n){return n?typeof n=="string"||n instanceof String:!1}isTrue(n){return n!==!1}moveObject(n,e,t){this.isIndexInRange(n,t)&&this.isIndexInRange(e,t)&&t.splice(e,0,t.splice(n,1)[0])}pointToView(n){let e=this.getShiftPos();return{x:n.x-e.x,y:n.y-e.y}}replaceAll(n,e,t){return n.replace(new RegExp(this._escapeRegExp(e),"g"),t)}setNumInRange(n,e,t){return isNaN(n)?0:Math.min(Math.max(n,e),t)}},Xm=VP;var p1e={None:0,Top:1,Right:2,Bottom:4,Left:8};Object.freeze(p1e);var u1e={None:0,Top:1,Right:2,Bottom:4,Left:8};Object.freeze(u1e);var h1e={None:"None",Fade:"Fade",Slide:"Slide"};Object.freeze(h1e);var Hd={TwoState:"TwoState",ThreeState:"ThreeState"};Object.freeze(Hd);var ho={Unchecked:"Unchecked",Indeterminate:"Indeterminate",Checked:"Checked"};Object.freeze(ho);var f1e={HEX:"HEX",HSL:"HSL",RGB:"RGB"};Object.freeze(f1e);var ui={None:"None",Dark:"Dark",Light:"Light"};Object.freeze(ui);var Mn={Static:"Static",Dynamic:"Dynamic"};Object.freeze(Mn);var Fo={None:"None",Hover:"Hover",Select:"Select",Both:"Both"};Object.freeze(Fo);var m1e={Short:"Short",Long:"Long",Custom:"Custom"};Object.freeze(m1e);var Qm={None:1,Above:2,Right:4,Below:8,Left:16};Object.freeze(Qm);var g1e={None:1,Top:2,Right:4,Fill:8,Bottom:16,Left:32,All:64};Object.freeze(g1e);var _1e={None:"None",Top:"Top",Right:"Right",Fill:"Fill",Bottom:"Bottom",Left:"Left"};Object.freeze(_1e);var Wr={Static:"Static",Dynamic:"Dynamic"};Object.freeze(Wr);var C1e={Down:"Down",Up:"Up"};Object.freeze(C1e);var I1e={None:"None",Batch:"Batch",Custom:"Custom",Dialog:"Dialog",Form:"Form",Inline:"Inline"};Object.freeze(I1e);var y1e={None:"None",Button:"Button",CheckBox:"CheckBox",Color:"Color",Custom:"Custom",Date:"Date",DropDownList:"DropDownList",Image:"Image",Label:"Label",ListScroller:"ListScroller",Numeric:"Numeric",Progress:"Progress",RadioButton:"RadioButton",Rating:"Rating",Slider:"Slider",Text:"Text"};Object.freeze(y1e);var w1e={Boolean:1,Date:2,Numeric:4,String:8};Object.freeze(w1e);var v1e={None:"None",Horizontal:"Horizontal",Vertical:"Vertical",Both:"Both"};Object.freeze(v1e);var b1e={Left:"Left",Center:"Center",Right:"Right"};Object.freeze(b1e);var S1e={Free:"Free",Partial:"Partial",Full:"Full"};Object.freeze(S1e);var wo={Partial:"Partial",Full:"Full"};Object.freeze(wo);var E1e={BottomCenter:"BottomCenter",BottomLeft:"BottomLeft",BottomRight:"BottomRight",Inline:"Inline",Left:"Left",MiddleCenter:"MiddleCenter",MiddleLeft:"MiddleLeft",MiddleRight:"MiddleRight",Right:"Right",TopCenter:"TopCenter",TopLeft:"TopLeft",TopRight:"TopRight"};Object.freeze(E1e);var ni={After:"After",At:"At",Before:"Before",Down:"Down",First:"First",Left:"Left",Last:"Last",Right:"Right",Up:"Up"};Object.freeze(ni);var A1e={InBound:"InBound",LeftRight:"LeftRight",UpDown:"UpDown"};Object.freeze(A1e);var Zi={Normal:0,Hovered:1,Selected:2,Focused:4,Disabled:8};Object.freeze(Zi);var Vr={Horizontal:"Horizontal",Vertical:"Vertical"};Object.freeze(Vr);var x1e={Top:"Top",Right:"Right",Bottom:"Bottom",Left:"Left"};Object.freeze(x1e);var T1e={None:"None",TopLeft:"TopLeft",Top:"Top",TopRight:"TopRight",Right:"Right",BottomRight:"BottomRight",Bottom:"Bottom",BottomLeft:"BottomLeft",Left:"Left"};Object.freeze(T1e);var O1e={Horizontal:"Horizontal",Vertical:"Vertical"};Object.freeze(O1e);var br={None:"None",One:"One",MultiSimple:"MultiSimple",MultiExtended:"MultiExtended"};Object.freeze(br);var R1e={Single:"Single",Multiple:"Multiple"};Object.freeze(R1e);var ml={None:"None",Ascending:"Ascending",Descending:"Descending"};Object.freeze(ml);var us={VerySlow:"VerySlow",Slow:"Slow",Normal:"Normal",Fast:"Fast",VeryFast:"VeryFast"};Object.freeze(us);var P1e={Carousel:"Carousel",Stream:"Stream"};Object.freeze(P1e);var D1e={TopLeft:"TopLeft",Middle:"Middle",BottomRight:"BottomRight"};Object.freeze(D1e);var F1e={AutoSized:"AutoSized",Compressed:"Compressed",Justified:"Justified"};Object.freeze(F1e);var k1e={Normal:"Normal",Multiline:"Multiline"};Object.freeze(k1e);var N1e={None:"None",InBound:"InBound",OutBound:"OutBound"};Object.freeze(N1e);var L1e={Top:"Top",Right:"Right",Middle:"Middle",Bottom:"Bottom",Left:"Left"};Object.freeze(L1e);var Vn={None:"None",Office:"Office"};Object.freeze(Vn);var M1e={BottomCenter:"BottomCenter",BottomFull:"BottomFull",BottomLeft:"BottomLeft",BottomRight:"BottomRight",TopCenter:"TopCenter",TopFull:"TopFull",TopLeft:"TopLeft",TopRight:"TopRight"};Object.freeze(M1e);var V1e={Error:"Error",Info:"Info",Success:"Success",Warning:"Warning"};Object.freeze(V1e);var B1e={Button:"Button",CheckBox:"CheckBox",Date:"Date",DropDownList:"DropDownList",Image:"Image",Label:"Label",ListScroller:"ListScroller",Numeric:"Numeric",Progress:"Progress",Rating:"Rating",Separator:"Separator",Slider:"Slider",TextBox:"TextBox"};Object.freeze(B1e);var U1e={Compare:"Compare",Required:"Required",Numeric:"Numeric",Range:"Range",StringLength:"StringLength",Custom:"Custom"};Object.freeze(U1e);var j1e={Top:"Top",Middle:"Middle",Bottom:"Bottom"};Object.freeze(j1e);var G1e={None:0,Hover:1,Click:2,Always:4};Object.freeze(G1e);var H1e={Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sunday:"Sunday"};Object.freeze(H1e);var W1e={Maximized:"Maximized",Minimized:"Minimized",Normal:"Normal"};Object.freeze(W1e);var BP=class extends Ym{constructor(){super(),this._init(),this._initStyle()}_init(){this._commonService=new Xm,this._activeAnimations=[],this._isAnimationAllowed=!0,this._ctrlData=null,this._ctrlName="",this._ctrlState=Zi.Normal,this._currentTabIndex=0,this._isCtrlMouseActive=!1,this._isEnabled=!0,this._isReadOnly=!1,this._options={currentStyle:null},this._isKeyboardFocusAllowed=!0,this._ctrlRect={top:0,left:0,width:0,height:0},this._clientRect={width:0,height:0},this._ctrlSize={width:0,height:0},this._prevClientRect={width:0,height:0},this._elemRef=null,this._currentResourcePath="../icons",this._currentColorScheme=ui.Light,this._currentColorSchemeSettings=Be``,this._currentCustomStyle={},this._currentInlineStyle={},this._currentTheme=Vn.None,this._currentThemeSettings=Be``,this._defaultStyle={},this._ctrlClass={},this._generalClassName="iui-control",this._isProcessAllowed=!0,this._isUpdateAllowed=!0,this._tCmp=null}_initStyle(){this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"}},this._updateColorSchemeSettings(this._currentColorScheme),this.refresh()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._clearAnimations()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{allowAnimation:{type:Boolean,attribute:"allow-animation",reflect:!0},allowFocus:{type:Boolean,attribute:"allow-focus",reflect:!0},allowUpdate:{type:Boolean,attribute:"allow-update",reflect:!0},colorScheme:{attribute:"color-scheme",converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"light":return ui.Light;case"dark":return ui.Dark;default:return ui.None}},toAttribute:n=>{switch(n){case ui.Light:return"Light";case ui.Dark:return"Dark";default:return"None"}}},reflect:!0},customStyle:{type:Object,attribute:"custom-style"},data:{type:Object},enabled:{type:Boolean,reflect:!0},name:{type:String,reflect:!0},readOnly:{type:Boolean,attribute:"read-only",reflect:!0},resourcePath:{type:String,attribute:"resource-path",reflect:!0},size:{type:Object},state:{type:Number,reflect:!0},theme:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"office":return Vn.Office;default:return Vn.None}},toAttribute:n=>{switch(n){case Vn.Office:return"Office";default:return"None"}}},reflect:!0}}}get allowAnimation(){return this._isAnimationAllowed}set allowAnimation(n){if(this._isAnimationAllowed!==n){let e=this._isAnimationAllowed;this._isAnimationAllowed=n,this.requestUpdate("allowAnimation",e)}}get allowFocus(){return this._isKeyboardFocusAllowed}set allowFocus(n){if(this._isKeyboardFocusAllowed!==n){let e=this._isKeyboardFocusAllowed;this._isKeyboardFocusAllowed=n,this.requestUpdate("allowFocus",e)}}get allowUpdate(){return this._isUpdateAllowed}set allowUpdate(n){if(this._isUpdateAllowed!==n){let e=this._isUpdateAllowed;this._isUpdateAllowed=n,this.requestUpdate("allowUpdate",e)}}get colorScheme(){return this._currentColorScheme}set colorScheme(n){if(this._currentColorScheme!==n){let e=this._currentColorScheme;this._currentColorScheme=n,this._updateColorSchemeSettings(n),this.requestUpdate("colorScheme",e),this.refresh()}}get customStyle(){return this._currentCustomStyle}set customStyle(n){if(this._currentCustomStyle!==n){let e=this._currentCustomStyle;this._currentCustomStyle=n,this.requestUpdate("customStyle",e),this.refresh()}}get data(){return this._ctrlData}set data(n){if(this._ctrlData!==n){let e=this._ctrlData;this._ctrlData=n,this.requestUpdate("data",e)}}get enabled(){return this._isEnabled}set enabled(n){if(n!==void 0&&this._isEnabled!==n){let e=this._isEnabled;this._isEnabled=n,this._invokeEvent("enabledChanged",{enabled:n}),this.requestUpdate("enabled",e),n?this.state&=~Zi.Disabled:this.state|=Zi.Disabled}}get name(){return this._ctrlName}set name(n){if(this._ctrlName!==n){let e=this._ctrlName;this._ctrlName=n,this.requestUpdate("name",e)}}get readOnly(){return this._isReadOnly}set readOnly(n){if(this._isReadOnly!==n){let e=this._isReadOnly;this._isReadOnly=n,this.requestUpdate("readOnly",e)}}get resourcePath(){return this._currentResourcePath}set resourcePath(n){if(this._currentResourcePath!==n){let e=this._currentResourcePath;this._currentResourcePath=n,this._updateControlStyleSettings(n),this._updateColorSchemeSettings(this._currentColorScheme),this.requestUpdate("resourcePath",e)}}get size(){return this._ctrlSize}set size(n){if(n){let e=!1,t=this._ctrlSize;n.width!==void 0&&this._ctrlSize.width!==n.width&&(this._ctrlSize.width=Math.max(n.width,0),e=!0),n.height!==void 0&&this._ctrlSize.height!==n.height&&(this._ctrlSize.height=Math.max(n.height,0),e=!0),e&&(this._invokeEvent("sizeChanged",{size:this._ctrlSize}),this.requestUpdate("size",t),this._internalUpdateLayout())}}get state(){return this._ctrlState}set state(n){if(this._ctrlState!==n){let e=this._ctrlState;this._ctrlState=n,this._updateControlClass(),this._processStateChanged(),this.requestUpdate("state",e),this._invokeEvent("stateChanged",{state:n}),this.refresh()}}get tabIndex(){return this._currentTabIndex}set tabIndex(n){if(n!==void 0&&this._currentTabIndex!==n){let e=this._currentTabIndex;this._currentTabIndex=n,this.requestUpdate("tabIndex",e),this.update()}}get theme(){return this._currentTheme}set theme(n){if(this._currentTheme!==n){let e=this._currentTheme;this._currentTheme=n,this._updateThemeSettings(n),this.requestUpdate("theme",e),this.refresh()}}_invokeEvent(n,e,t,r){let o=new CustomEvent(n,{detail:e,bubbles:t!==void 0?t:!1,composed:r!==void 0?r:!1});return this.dispatchEvent(o),e}_clearAnimations(){this._activeAnimations.forEach(n=>{n.destroy(),n=void 0}),this._activeAnimations.length=0}_clearActiveAnimations(){this._activeAnimations.filter(n=>n.isActive()).forEach(n=>{n.destroy(),n=void 0})}_clearInactiveAnimations(){this._activeAnimations.filter(n=>!n.isActive()).forEach(n=>{n.destroy(),n=void 0}),this._activeAnimations=this._activeAnimations.filter(n=>n.isActive())}_isAnimationActive(){return this._activeAnimations.length>0}_defaultFunc(){}getElemRef(){return this._elemRef}getSize(n){return this._elemRef?n?{width:this._elemRef.clientWidth,height:this._elemRef.clientHeight}:{width:this._elemRef.offsetWidth,height:this._elemRef.offsetHeight}:{width:0,height:0}}_processStateChanged(){}setFocus(n){this._elemRef&&this._elemRef.focus()}getClass(n){return this._elemRef?this._elemRef.className:""}getStyle(n){return this._currentInlineStyle||{}}_updateColorSchemeSettings(n){this._currentColorSchemeSettings=Be``}_updateThemeSettings(n){this._currentThemeSettings=Be``}refresh(n){this._updateStyle(this.controlStyle),this._updateControlClass(),this.update(),this._updateReferences()}removeClass(n){this._elemRef&&n&&this._elemRef.classList.remove(n)}setClass(n,e){this._elemRef&&(n?this._elemRef.classList.add(n):this._elemRef.className=this._generalClassName)}setStyle(n,e){this._commonService.isObject(n)&&!this._commonService.isEmpty(n)&&(this._currentInlineStyle=n,this.refresh())}_updateControlClass(){this._ctrlClass={},this._ctrlClass[this._generalClassName]=!0,this._options.currentStyle&&this._options.currentStyle.general&&(this._ctrlClass[this._options.currentStyle.general.normal]=!0,this.state&Zi.Disabled?this._ctrlClass[this._options.currentStyle.general.disabled]=!0:this.state&Zi.Focused?this._ctrlClass[this._options.currentStyle.general.focused]=!0:this.state&Zi.Selected?this._ctrlClass[this._options.currentStyle.general.selected]=!0:this.state&Zi.Hovered&&(this._ctrlClass[this._options.currentStyle.general.hovered]=!0),this.allowAnimation&&(this.state&Zi.Hovered?this._ctrlClass[this._defaultStyle.general.normal+"-enter"]=!0:this._ctrlClass[this._defaultStyle.general.normal+"-leave"]=!0))}_getControlClass(){return this._ctrlClass}_getControlStyle(){let n=this._currentInlineStyle||{};return this._ctrlSize.width>0&&(n.width=this._ctrlSize.width+"px"),this._ctrlSize.height>0&&(n.height=this._ctrlSize.height+"px"),n}_getDefaultStyle(){return{general:this._getDefaultGeneralStyle()}}_getDefaultGeneralStyle(){return this._defaultStyle&&this._defaultStyle.general?{disabled:this._defaultStyle.general.disabled,focused:this._defaultStyle.general.focused,hovered:this._defaultStyle.general.hovered,normal:this._defaultStyle.general.normal,selected:this._defaultStyle.general.selected}:{}}_getGeneralStyle(n){if(this._commonService){if(this._commonService.isString(n))return n;if(n)return{disabled:this._commonService.isFieldAvailable(n.disabled,this._generalClassName+"-disabled"),focused:this._commonService.isFieldAvailable(n.focused,this._generalClassName+"-focused"),hovered:this._commonService.isFieldAvailable(n.hovered,this._generalClassName+"-hovered"),normal:this._commonService.isFieldAvailable(n.normal,this._generalClassName),selected:this._commonService.isFieldAvailable(n.selected,this._generalClassName+"-selected")}}return this._getDefaultGeneralStyle()}_updateControlStyleSettings(n){}_updateStyle(n){n?this._options.currentStyle={general:this._getGeneralStyle(n.general)}:this._options.currentStyle=this._getDefaultStyle()}_internalUpdateLayout(){this.updateLayout()}resolve(n){this._isProcessAllowed=!0}shouldUpdate(n){return n.forEach((e,t)=>{}),!0}updateLayout(n){return B(this,null,function*(){return this.update(),Promise.resolve()})}wait(){this._isProcessAllowed=!1}_updateReferences(){}},pu=BP;var UP=class{constructor(){this.data=[]}init(n){this.data.length=0;for(let e=0;e<n.length;e++){let t={data:n[e].data,fields:this.getDataFields(n[e].fields),key:n[e].key};this.data.push(t)}}clear(n,e){this.getList(n,e).length=0}insertAt(n,e,t,r){this.insert(n,e,t,null,!1,r)}insert(n,e,t,r,o,s){if(n){let a=this.getData(s);if(a){let l=a.fields;t&&(n[l.pid]=t[l.id]);let c=this.getList(t,s);c&&(e<0||e===null||e===void 0?c.push(n):(e=Math.max(Math.min(e,c.length),0),!r&&e<c.length&&(r=c[e]),c.splice(e,0,n)),n[l.id]||(n[l.id]=this.getUniqueId()))}}}insertByRef(n,e,t,r){if(n&&e){let o=this.getParent(e,r),s=this.getList(o,r).indexOf(e);return s>=0&&(t&&(s+=1),this.insert(n,s,o,e,t,r)),s}}removeAt(n,e,t,r){let o,s=null,a=this.getData(r);if(a){if(n&&(t=this.getParent(n,r),e=(o=this.getList(t,r)).indexOf(n)),e==null)return{obj:s,result:!1};if(o=this.getList(t,r),e>=0&&e<o.length)return(s=o[e])[a.fields.pid]="",o.splice(e,1),{obj:s,result:!0}}return{obj:s,result:!1}}getData(n){let e=null;if(!this.getKey(n)&&this.data.length>0)e=this.data[0];else for(let t=0;t<this.data.length;t++)if(this.data[t].key===n){e=this.data[t];break}return e}getDataFields(n){return n?{content:n.content?n.content:"content",icon:n.icon?n.icon:"icon",id:n.id?n.id:"id",pid:n.pid?n.pid:"pid",objects:n.objects?n.objects:"items",statusIcon:n.statusIcon?n.statusIcon:"statusIcon",subobjects:n.subobjects?n.subobjects:"subitems",text:n.text?n.text:"text"}:{content:"content",icon:"icon",id:"id",pid:"pid",objects:"items",statusIcon:"statusIcon",subobjects:"subitems",text:"text"}}getKey(n){return n||null}getList(n,e){let t=this.getData(e);if(t){let r=t.fields;return n?(n[r.objects]||(n[r.objects]=[]),n[r.objects]):t.data}return[]}removeUndefined(n,e){n[e]===void 0&&delete n[e]}updateDataFields(n,e){let t=this.getData(e);t&&(t.fields=this.getDataFields(n))}update(n){this.init(n)}clone(n,e,t){let r=this.getData(e);if(r){let o=JSON.parse(JSON.stringify(n));return t||this.createCloneIds(o,null,r.fields),o}return{}}createCloneIds(n,e,t){n[t.id]=this.getUniqueId(),n[t.pid]=e;let r=n[t.objects];if(r)for(let o=0;o<r.length;o++)this.createCloneIds(r[o],n[t.id],t)}findObjectById(n,e){let t=this.getData(e);if(t){let r=t.fields,o=t.data;return n?this.searchObj(n,o,r):null}return null}findObjectByText(n,e){let t=this.getData(e);if(t){let r=t.fields,o=t.data;return n!==void 0?this.searchObj(n,o,r,"text"):null}return null}findParent(n,e,t){let r=null;if(n&&e){let o=0;for(;!r&&o<e.length;)e[o][t.id]&&n[t.pid]&&e[o][t.id].toString()===n[t.pid].toString()?r=e[o]:r=this.findParent(n,e[o][t.objects],t),o++}return r}getParent(n,e){if(n){let t=this.getData(e);if(t)return this.findParent(n,t.data,t.fields)}return null}getUniqueId(n){let e=n||"-";function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+e+t()+e+t()+e+t()+e+t()+t()+t()}searchObj(n,e,t,r){let o=null;if(n&&e){let s=0,a=!1;for(;!o&&s<e.length;){switch(r){case"text":e[s][t.text]&&(a=e[s][t.text].toString()===n.toString());break;default:e[s][t.id]&&(a=e[s][t.id].toString()===n.toString())}o=a?e[s]:this.searchObj(n,e[s][t.objects],t,r),s++}}return o}},Zm=UP;var jP=Be`
    .iui-item {
        background: var(--iui-item-background, transparent);
        border: var(--iui-item-border, thin solid transparent);
        color: var(--iui-item-color, black);
        margin: var(--iui-item-margin, 1px);
        overflow: hidden;
        padding: var(--iui-item-padding, 3px);
    }
    .iui-item-hovered {
        background: var(--iui-item-hovered-background, transparent);
        border: var(--iui-item-hovered-border, thin solid transparent);
    }
    .iui-item-selected {
        background: var(--iui-item-selected-background, transparent);
        border: var(--iui-item-selected-border, thin solid transparent);
    }
    .iui-item-label {
        border: var(--iui-item-label-border, thin solid transparent);
        display: inline-block;
        padding: var(--iui-item-label-padding, 2px);
    }
    .iui-item-icon {
        display: inline-block;
    }
    .iui-item-icon-url {
        vertical-align: middle;
    }

    /* Disabled State */
    .iui-item-disabled div {
        opacity: var(--iui-item-disabled-opacity, 0.75);
        pointer-events: none;
    }

    .iui-item-content {
        overflow: hidden;
        position: relative;
    }
`;var G9=Be`
`;var H9=Be`
    .iui-item {
        color: var(--iui-item-color, #cccccc);
    }
    .iui-item-hovered {
        animation-name: none;
        background: var(--iui-item-hovered-background, #2a2d2e);
        border: var(--iui-item-hovered-border, thin solid #2a2d2e);
    }
    .iui-item-selected {
        animation-name: none;
        background: var(--iui-item-selected-background, #0a4369);
        border: var(--iui-item-selected-border, thin solid #0a4369);
        color: var(--iui-item-selected-color, white);
    }
`;var W9=Be`
	.iui-item {
        color: var(--iui-item-color, #646464);
	}
	.iui-item-hovered {
        background: var(--iui-item-hovered-background, transparent);
        border: var(--iui-item-hovered-border, thin solid transparent);
        color: var(--iui-item-hovered-color, black);

		animation-name: iui-item-hovered-animate-enter;
		animation-delay: 0s;
		animation-direction: normal;
		animation-duration: 0.15s;
		animation-fill-mode: forwards;
		animation-iteration-count: 1;
		animation-play-state: running;
		animation-timing-function: linear; 
	}
	@keyframes iui-item-hovered-animate-enter {
		0% { 
			background: var(--iui-item-hovered-animation-background-0, transparent); 
			border-color: var(--iui-item-hovered-animation-border-color-0, transparent); 
		}
		100% { 
			background: var(--iui-item-hovered-animation-background-100, #d9edfd); 
			border-color: var(--iui-item-hovered-animation-border-color-100, #d9edfd); 
		}
	}
	.iui-item-selected {
        background: var(--iui-item-selected-background, #d9edfd);
        border: var(--iui-item-selected-border, thin solid transparent);
        color: var(--iui-item-selected-color, black);

		animation-name: iui-item-selected-animate-enter;
		animation-delay: 0s;
		animation-direction: normal;
		animation-duration: 0.25s;
		animation-fill-mode: forwards;
		animation-iteration-count: 1;
		animation-play-state: running;
		animation-timing-function: linear; 
	}
	@keyframes iui-item-selected-animate-enter {
		0% { 
			background: var(--iui-item-selected-animation-background-0, #d9edfd); 
			border-color: var(--iui-item-selected-animation-border-color-0, #d9edfd); 
		}
		100% { 
			background: var(--iui-item-selected-animation-background-100, #a5d3fa); 
			border-color: var(--iui-item-selected-animation-border-color-100, #a5d3fa); 
		}
	}
`;var T1=class extends pu{connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}_init(){super._init(),this._currentIcon="",this._currentIconUrl="",this._currentIconSize={width:16,height:16},this._currentText="",this._isVisible=!0,this._parentCtrl=null,this._itemPos={top:0,left:0},this._positionType="static",this._contentClass={},this._currentControlStyleSettings=jP,this._generalClassName="iui-item",this._contentClassName=this._generalClassName+"-content"}_initStyle(){this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"},content:{disabled:this._contentClassName+"-disabled",focused:this._contentClassName+"-focused",normal:this._contentClassName,hovered:this._contentClassName+"-hovered",selected:this._contentClassName+"-selected"}},this._updateColorSchemeSettings(this._currentColorScheme),this.refresh()}setParent(n){this._parentCtrl=n}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{icon:{type:String,reflect:!0},iconUrl:{type:String,attribute:"icon-url",reflect:!0},iconSize:{type:Object},text:{type:String,reflect:!0},visible:{type:Boolean,reflect:!0}}}get icon(){return this._currentIcon}set icon(n){if(this._currentIcon!==n){let e=this._currentIcon;this._currentIcon=n,this.requestUpdate("icon",e)}}get iconUrl(){return this._currentIconUrl}set iconUrl(n){if(this._currentIconUrl!==n){let e=this._currentIconUrl;this._currentIconUrl=n,this.requestUpdate("iconUrl",e)}}get iconSize(){return this._currentIconSize}set iconSize(n){if(this._currentIconSize!==n){let e=this._currentIconSize;this._currentIconSize=n,this.requestUpdate("iconSize",e)}}get text(){return this._currentText}set text(n){if(this._currentText!==n){let e=this._currentText;this._currentText=n,this.requestUpdate("text",e),this.update()}}get visible(){return this._isVisible}set visible(n){if(this._isVisible!==n){let e=this._isVisible;this._isVisible=n,this.requestUpdate("visible",e)}}_processStateChanged(){this._updateContentClass()}_onClick(n){this._isEnabled&&this._invokeEvent("click",n)}_onMouseDown(n){this._isEnabled&&(this._invokeEvent("mouseDown",n),this._parentCtrl&&this._parentCtrl.invokeCtrlMethod&&this._parentCtrl.invokeCtrlMethod("ITEM_SELECT",this))}_onMouseUp(n){this._isEnabled&&this._invokeEvent("mouseUp",n)}_onMouseEnter(n){this._isEnabled&&(this.state|=Zi.Hovered,this._invokeEvent("mouseEnter",n))}_onMouseMove(n){this._isEnabled&&this._invokeEvent("mouseMove",n)}_onMouseLeave(n){this._isEnabled&&(this.state&=~Zi.Hovered,this._invokeEvent("mouseLeave",n))}_onTouchStart(n){this._isEnabled&&(this._invokeEvent("touchStart",n),this._parentCtrl&&this._parentCtrl.invokeCtrlMethod&&this._parentCtrl.invokeCtrlMethod("ITEM_SELECT",this))}getContentSize(){let n={width:0,height:0};if(this._contentElem){let e=this._commonService.getMargin(this._contentElem);n={width:this._contentElem.offsetWidth+(e.left+e.right),height:this._contentElem.offsetHeight+(e.top+e.bottom)/2}}return n}getMargin(){return this._elemRef?this._commonService.getMargin(this._elemRef.firstElementChild):{top:0,right:0,bottom:0,left:0}}getPageRect(){let n={top:0,right:0,bottom:0,left:0};return this._elemRef&&(n=this._commonService.getPageRect(this._elemRef.firstElementChild)),n}getClientSize(){let n={width:0,height:0};return this._elemRef&&(n={width:this._elemRef.firstElementChild.clientWidth,height:this._elemRef.firstElementChild.clientHeight}),n}getSize(){let n={width:0,height:0};if(this._updateReferences(),this._elemRef){let e=this._commonService.getMargin(this._elemRef);n={width:this._elemRef.offsetWidth+(e.left+e.right),height:this._elemRef.offsetHeight+(e.top+e.bottom)/2}}return n}resetPos(){this.updateLayoutPos("static",{x:"auto",y:"auto"})}updateLayoutPos(n,e){this._updateReferences(),this._positionType=n,this._itemPos={top:e.y,left:e.x}}updatePos(n){this.updateLayoutPos("absolute",n)}_getControlStyle(){let n=this._currentInlineStyle||{};return n.position=this._positionType,n.top=this._itemPos.top+"px",n.left=this._itemPos.left+"px",this._ctrlSize.width>0&&(n.width=this._ctrlSize.width+"px"),this._ctrlSize.height>0&&(n.height=this._ctrlSize.height+"px"),n}_updateContentClass(){this._contentClass={},this._contentClass[this._contentClassName]=!0,this._options.currentStyle&&(this._contentClass[this._options.currentStyle.content.normal]=!0,this.state&Zi.Disabled?this._contentClass[this._options.currentStyle.content.disabled]=!0:this.state&Zi.Focused?this._contentClass[this._options.currentStyle.content.focused]=!0:this.state&Zi.Selected?this._contentClass[this._options.currentStyle.content.selected]=!0:this.state&Zi.Hovered&&(this._contentClass[this._options.currentStyle.content.hovered]=!0))}_getContentClass(){return this._contentClass}_getContentStyle(n){return this._commonService.isString(n)?n:n?{disabled:this._commonService.isFieldAvailable(n.disabled,this._contentClassName+"-disabled"),focused:this._commonService.isFieldAvailable(n.focused,this._contentClassName+"-focused"),hovered:this._commonService.isFieldAvailable(n.hovered,this._contentClassName+"-hovered"),normal:this._commonService.isFieldAvailable(n.normal,this._contentClassName),selected:this._commonService.isFieldAvailable(n.selected,this._contentClassName+"-selected")}:{disabled:this._defaultStyle.content.disabled,focused:this._defaultStyle.content.focused,hovered:this._defaultStyle.content.hovered,normal:this._defaultStyle.content.normal,selected:this._defaultStyle.content.selected}}_updateStyle(n){n?this._options.currentStyle={general:this._getGeneralStyle(n.general),content:this._getContentStyle(n.content)}:this._options.currentStyle={general:{disabled:this._defaultStyle.general.disabled,focused:this._defaultStyle.general.focused,hovered:this._defaultStyle.general.hovered,normal:this._defaultStyle.general.normal,selected:this._defaultStyle.general.selected},content:{disabled:this._defaultStyle.content.disabled,focused:this._defaultStyle.content.focused,hovered:this._defaultStyle.content.hovered,normal:this._defaultStyle.content.normal,selected:this._defaultStyle.content.selected}}}_updateColorSchemeSettings(n){switch(this._currentColorSchemeSettings=Be``,n){case ui.Dark:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(H9.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(W9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentColorSchemeSettings.cssText=""}}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(G9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText=""}}firstUpdated(n){this._updateReferences()}refresh(){this._updateStyle(this.controlStyle),this._updateControlClass(),this._updateContentClass(),this.update(),this._updateReferences()}render(){return Ke`             <style>                 ${this._currentControlStyleSettings}                 ${this._currentThemeSettings}                 ${this._currentColorSchemeSettings}                 ${this._currentCustomStyle}             </style>             <div data-ctrl="item" id="content" class=${Ln(this._getControlClass())} style=${sn(this._getControlStyle())} @click="${n=>this._onClick(n)}" @mousedown="${n=>this._onMouseDown(n)}" @mouseup="${n=>this._onMouseUp(n)}" @mouseenter="${n=>this._onMouseEnter(n)}" @mousemove="${n=>this._onMouseMove(n)}" @mouseleave="${n=>this._onMouseLeave(n)}">                 ${this.icon?Ke`<span class=${Ln(this.icon)} style="display:inline-block"></span>`:Ke``}                 ${this.iconUrl?Ke`<img class="iui-item-icon-url" src="${this.iconUrl}" />`:Ke``}                 ${this.text?Ke`<span class="iui-item-label">${this.text}</span>`:Ke``}                 <slot></slot>             </div>         `}_updateControlStyleSettings(n){this._currentControlStyleSettings=Be``,this._currentControlStyleSettings.cssText=this._commonService.replaceAll(jP.cssText,"../../icons",n)}_updateReferences(){this._elemRef=this.shadowRoot.querySelector("div[data-ctrl=item]"),this._contentElem=this.shadowRoot.querySelector("#content")}};window.customElements.define("iui-item",T1);var z9=T1;var GP=Be`
    .iui-menu {
        background: var(--iui-menu-background, #f5f5f5);
        border: var(--iui-menu-border, 0);
        border-color:  var(--iui-menu-border-color, transparent);
        border-radius: var(--iui-menu-border-radius, 1px);
        border-width: var(--iui-menu-border-width, thin);
        color: var(--iui-menu-color, black);
        cursor: var(--iui-menu-cursor, default);
        display: var(--iui-menu-display, block);
        float: var(--iui-menu-float, none);
        height: var(--iui-menu-height, auto);
        margin: var(--iui-menu-margin, 0);
        opacity: var(--iui-menu-opacity, 1);
        overflow: hidden;
        padding: var(--iui-menu-padding, 0);
        position: var(--iui-menu-position, relative);
        width: var(--iui-menu-width, auto);
        z-index: var(--iui-menu-z-index, auto);
        
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .iui-menu-block {
        background: var(--iui-menu-block-background, transparent);
        list-style-type: none;
        margin: 0;
        padding: var(--iui-menu-block-padding, 3px);
        position: relative;
    }
    .iui-menuitem-block, .iui-contextmenuitem-block {
        background: var(--iui-menuitem-block-background, #f5f5f5);
        border: var(--iui-menuitem-block-border, thin solid #dedede);
        border-color: var(--iui-menuitem-block-border-color, #dedede);
        padding: var(--iui-menuitem-block-padding, 1px);
        list-style-type: none;
        margin: 0;
        position: absolute;
        z-index: 99999;
    }
    .iui-menuitem-root, .iui-contextmenuitem-root {
        background: var(--iui-menuitem-root-background, none);
        border: var(--iui-menuitem-root-border, thin solid transparent);
        border-color: var(--iui-menuitem-root-border-color, transparent);
        color: var(--iui-menuitem-root-color, black);
        display: inline-block;
        list-style-type: none;
        margin: var(--iui-menuitem-root-margin, 0 3px);
        padding: var(--iui-menuitem-root-padding, 5px 6px 5px 4px);
        position: relative;
        white-space: nowrap;
        width: var(--iui-menuitem-root-width, auto);
    }
    .iui-menuitem-root-vertical, .iui-contextmenuitem-root-vertical {
        border: var(--iui-menuitem-root-vertical-border, thin solid transparent);
        border-color: var(--iui-menuitem-root-vertical-border-color, transparent);
        display: block;
        margin: var(--iui-menuitem-root-vertical-margin, 3px 0);
        padding: var(--iui-menuitem-root-vertical-padding, 5px 6px);
        position: relative;
        list-style-type: none;
        margin: 3px 0;
        padding: 5px 6px;
        white-space: nowrap;
    }
    .iui-menuitem-root-disabled, .iui-menuitem-disabled, .iui-contextmenuitem-root-disabled, .iui-contextmenuitem-disabled {
        background: var(--iui-menuitem-disabled-background, transparent);
        opacity: 0.5;
    }
    .iui-menuitem-root-hovered, .iui-contextmenuitem-root-hovered {
        background: var(--iui-menuitem-root-hovered-background, #e5e5e5);
        border-color: var(--iui-menuitem-root-hovered-border-color, #e5e5e5);
        color: var(--iui-menuitem-root-hovered-color, black);
    }
    .iui-menuitem-root-selected, .iui-contextmenuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #e5e5e5);
        border-color: var(--iui-menuitem-root-selected-border-color, #e5e5e5);
        color: var(--iui-menuitem-root-selected-color, black);
    }
    .iui-menuitem-root-content, .iui-contextmenuitem-root-content {
        display: inline-block;
        padding: var(--iui-menuitem-root-content-background, 0 2px);
        vertical-align: middle;
    }
    .iui-menuitem-root:first-of-type, .iui-contextmenuitem-root:first-of-type {
        margin: auto 0;
    }

    .iui-menuitem-root:last-of-type, .iui-contextmenuitem-root:last-of-type {
        margin-right: 0;
    }
    .iui-menu-marker-expand-space {
        padding-right: 20px;
    }
    .iui-menu-marker-expand-space-rtl {
        padding-left: 20px;
    }
    .iui-menu-marker-expand-down::before {
        content: "";
        border: 4px solid #ababab;
        border-color: #ababab transparent transparent transparent;
        position: absolute;
        top: 45%;
        right: 5px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-down::after {
        content: "";
        border: 4px solid transparent;
        border-color: transparent transparent transparent transparent;
        position: absolute;
        top: 45%;
        right: 5px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-down-rtl::before {
        content: "";
        border: 4px solid #ababab;
        border-color: #ababab transparent transparent transparent;
        position: absolute;
        top: 45%;
        left: 5px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-down-rtl::after {
        content: "";
        border: 4px solid transparent;
        border-color: transparent transparent transparent transparent;
        position: absolute;
        top: 45%;
        left: 5px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-right::before {
        content: "";
        border: 4px solid #ababab;
        border-color: transparent transparent transparent #ababab;
        position: absolute;
        top: 35%;
        left: 92%;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-right::after {
        content: "";
        border: 4px solid transparent;
        border-color: transparent transparent transparent transparent;
        position: absolute;
        top: 35%;
        left: 92%;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-left::before {
        content: "";
        border: 4px solid #ababab;
        border-color: transparent #ababab transparent transparent;
        position: absolute;
        top: 35%;
        left: 2%;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-expand-left::after {
        content: "";
        border: 4px solid transparent;
        border-color: transparent transparent transparent transparent;
        position: absolute;
        top: 35%;
        left: 2%;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-top::before {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent #1e4691 transparent;
        position: absolute;
        top: -9px;
        left: 10px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-top::after {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent #fefefe transparent;
        position: absolute;
        top: -8px;
        left: 10px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-top-rtl::before {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent #1e4691 transparent;
        position: absolute;
        top: -9px;
        right: 10px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-top-rtl::after {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent #fefefe transparent;
        position: absolute;
        top: -8px;
        right: 10px;
        width: 0;
        height: 0;
    }
    .iui-menu-marker-left::before {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent #1e4691 transparent transparent;
        position: absolute;
        top: 12px;
        left: -9px;
    }
    .iui-menu-marker-left::after {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent #fefefe transparent transparent;
        position: absolute;
        top: 12px;
        left: -8px;
    }
    .iui-menu-marker-right::before {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent transparent #1e4691;
        position: absolute;
        top: 12px;
        right: -9px;
    }
    .iui-menu-marker-right::after {
        content: "";
        border: 4px solid #fefefe;
        border-color: transparent transparent transparent #fefefe;
        position: absolute;
        top: 12px;
        right: -8px;
    }


    .iui-menuitem, .iui-contextmenuitem {
        background: var(--iui-menuitem-background, transparent);
        border: var(--iui-menuitem-border, thin solid transparent);
        border-color: var(--iui-menuitem-border-color, transparent);
        color: var(--iui-menuitem-color, black);
        display: block;
        list-style-type: none;
        margin: var(--iui-menuitem-margin, 1px 0);
        padding: var(--iui-menuitem-padding, 3px 4px 3px 2px);
        position: relative;
        white-space: nowrap;
        width: var(--iui-menuitem-width, auto);
    }
    .iui-menuitem-hovered, .iui-contextmenuitem-hovered {
        background: var(--iui-menuitem-hovered-background, #ededed);
        border-color: var(--iui-menuitem-hovered-border-color, #e5e5e5);
    }
    .iui-menuitem-selected, .iui-contextmenuitem-root-selected {
        background: var(--iui-menuitem-selected-background, #ededed);
        border-color: var(--iui-menuitem-selected-border-color, #e5e5e5);
    }
    .iui-menuitem-content, .iui-contextmenuitem-content {
        display: inline-block;
        vertical-align: middle;
    }
    .iui-menuitem:first-of-type, .iui-contextmenuitem:first-of-type {
        margin-top: 0;
    }
    .iui-menuitem:last-of-type, .iui-contextmenuitem:last-of-type {
        margin-bottom: 0;
    }
    .iui-menuitem-expand, .iui-contextmenuitem-expand {
        background-position: -14px 0px;
    }
    .iui-menuitem-root-separator, .iui-menuitem-separator, .iui-contextmenuitem-root-separator, .iui-contextmenuitem-separator {
        background: var(--iui-menuitem-separator-background, transparent);
        border: 0;
        margin: 0;
        padding: var(--iui-menuitem-separator-padding, 3px);
    }
    .iui-menuitem-root-separator > hr, .iui-menuitem-separator > hr, .iui-contextmenuitem-root-separator > hr, .iui-contextmenuitem-separator > hr {
        background: var(--iui-menuitem-separator-line-background, #e5e5e5);
        border: 0;
        margin: var(--iui-menuitem-separator-line-margin, 0);
        padding: var(--iui-menuitem-separator-line-padding, 0);
        height: var(--iui-menuitem-separator-line-height, 1px);
    }
    .iui-menuitem-separator-content {
        background: var(--iui-menuitem-separator-content-background, transparent);
        border: var(--iui-menuitem-separator-content-border, thin solid transparent);
        border-color: var(--iui-menuitem-separator-content-border-color, transparent);
        border-radius: var(--iui-menuitem-separator-content-border-radius, 3);
        display: inline-block;
        font-style: var(--iui-menuitem-separator-content-font-style, normal);
        font-weight: var(--iui-menuitem-separator-content-font-weight, normal);
        margin: var(--iui-menuitem-separator-content-margin, 0);
        padding: var(--iui-menuitem-separator-content-padding, 5px 4px 5px 0);
        position: relative;
        text-align: var(--iui-menuitem-separator-content-text-align, left);
        width: var(--iui-menuitem-separator-content-width, auto);
        z-index: 1;
    }
    .iui-menuitem-inline-separator {
        position: absolute;
        top: 50%;
        width: calc(100% - 6px);
        z-index: 0;
    }
    .iui-menu-load {
        background: transparent;
        display: inline-block;
        width: 16px;
        height: 16px;
        position: absolute;
        top: 0;
        right: 2px;
        vertical-align: middle;
    }
    .iui-menu-load-rtl {
        background: transparent;
        display: inline-block;
        width: 16px;
        height: 16px;
        position: absolute;
        top: 0;
        left: 2px;
        vertical-align: middle;
    }
    .iui-menuitem-content-template {
        display: var(--iui-menuitem-content-template-display, inline-block);
        overflow: hidden;
        vertical-align: var(--iui-menuitem-content-template-vertical-align, middle);
        width: var(--iui-menuitem-content-template-width, 100%);
    }

    /* Header */
    .iui-menuitem-header {
        background: var(--iui-menuitem-header-background, #bfbfbf);
        border-radius: var(--iui-menuitem-header-border-radius, 3px);
        color: var(--iui-menuitem-header-color, white);
        display: block;
        font-weight: var(--iui-menuitem-header-font-weight, bold);
        list-style-type: none;
        margin: var(--iui-menuitem-header-margin, 0 0 2px 0);
        padding: var(--iui-menuitem-header-padding, 5px 7px);
        text-align: var(--iui-menuitem-header-text-align, center);
        white-space: nowrap;
    }
    
    /* Shortcuts */
    .iui-menuitem-label-main {
        display: inline-block;
        width: var(--iui-menuitem-label-width, calc(100% - 104px));
    }
    .iui-menuitem-shortcut {
        display: inline-block;
        font-size: var(--iui-menuitem-shortcut-font-size, 0.875rem);
        text-align: var(--iui-menuitem-shortcut-text-align, right);
        width: var(--iui-menuitem-shortcut-width, 100px);
    }

    /* Disabled State */
    .iui-menu-disabled div {
        opacity: 0.75;
        pointer-events: none;
    }

    /* CheckBox */
    .iui-menuitem-checkbox {
        background-image: var(--iui-menuitem-checkbox-background-image, url(../../icons/checkbox-unchecked.ico));
        background-repeat: no-repeat;
        display: inline-block;
        overflow: hidden;
        padding: var(--iui-menuitem-checkbox-padding, 0);
        margin: var(--iui-menuitem-checkbox-margin, 0 3px);
        width: 16px;
        height: 16px;
        vertical-align: var(--iui-menuitem-checkbox-vertical-align, middle);
    }
    .iui-menuitem-checkbox-checked {
        background-image: var(--iui-menuitem-checkbox-checked-background-image, url(../../icons/checkbox-checked.ico));
    }
`;var K9=Be`
    .iui-menuitem-root, .iui-menuitem, .iui-contextmenuitem-root, .iui-contextmenuitem {
        transition-duration: var(--iui-menuitem-transition-duration, 0.15s);
        transition-property: var(--iui-menuitem-transition-property, background, border-color, color);
        transition-timing-function: var(--iui-menuitem-transition-timing-function, ease-in-out);
    }
`;var $9=Be`
    .iui-menu {
        background: var(--iui-menu-background, #252526);
        color: var(--iui-menu-color, white);
    }
    .iui-menu-block {
        background: var(--iui-menu-block-background, #252526);
        border-color: var(--iui-menu-block-border-color, #151515);
    }
    .iui-menuitem-block {
        background: var(--iui-menuitem-block-background, #252526);
        border-color: var(--iui-menuitem-block-border-color, #151515);
        box-shadow: var(--iui-menuitem-block-box-shadow, 0 2px 5px #151515);
        color: var(--iui-menuitem-block-color, #cccccc);
    }
    .iui-menuitem-root {
        border-color: var(--iui-menuitem-root-border-color, #252526);
        color: var(--iui-menuitem-root-color, #cccccc);
    }
    .iui-contextmenuitem-root {
        border-color: var(--iui-menuitem-root-border-color, transparent);
        color: var(--iui-menuitem-root-color, #cccccc);
    }
    .iui-menuitem-root-vertical {
        background: var(--iui-menu-root-vertical-background, none);
        border-color: var(--iui-menuitem-root-vertical-border-color, #252526);
        color: var(--iui-menuitem-root-vertical-color, #cccccc);
    }
    .iui-menuitem-root-hovered, .iui-contextmenuitem-root-hovered {
        background: var(--iui-menuitem-root-hovered-background, #1177bb);
        border-color: var(--iui-menuitem-root-hovered-border-color, #1177bb);
        color: var(--iui-menuitem-root-hovered-color, white);
    }
    .iui-menuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #153268);
        border-color: var(--iui-menuitem-root-selected-border-color, #0f244a);
        color: var(--iui-menuitem-root-selected-color, white);
    }
    .iui-contextmenuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #1177bb);
        border-color: var(--iui-menuitem-root-selected-border-color, #1177bb);
        color: var(--iui-menuitem-root-selected-color, white);
    }

    .iui-menuitem, .iui-contextmenuitem {
        background: var(--iui-menuitem-background, #252526);
        color: var(--iui-menuitem-color, #cccccc);
    }
    .iui-menuitem-normal {
        background: var(--iui-menuitem-normal-background, transparent);
        border-color: var(--iui-menuitem-normal-border-color, transparent);
        color: var(--iui-menuitem-normal-color, #cccccc);
    }
    .iui-menuitem-hovered, .iui-contextmenuitem-hovered {
        background: var(--iui-menuitem-hovered-background, #1177bb);
        border-color: var(--iui-menuitem-hovered-border-color, #1177bb);
        color: var(--iui-menuitem-hovered-color, white);
    }
    .iui-menuitem-selected, .iui-contextmenuitem-selected {
        background: var(--iui-menuitem-selected-background, #1177bb);
        border-color: var(--iui-menuitem-selected-border-color, #1177bb);
        color: var(--iui-menuitem-selected-color, white);
    }
    .iui-menuitem-selected a {
        color: white;
    }
    .iui-menu li > ul {
        background: var(--iui-menuitem-block-background, #252526);
        border-color: var(--iui-menuitem-block-border-color, #151515);
        box-shadow: var(--iui-menuitem-block-box-shadow, 0 2px 5px #151515);
    }
    .iui-menu-expand-box {
        width: 16px;
        height: 16px;
    }
    .iui-menuitem-root-separator, .iui-menuitem-separator, .iui-contextmenuitem-root-separator, .iui-contextmenuitem-separator {
        background: var(--iui-menuitem-separator-background, #252526);
    }
    .iui-menuitem-root-separator > hr, .iui-menuitem-separator > hr, .iui-contextmenuitem-root-separator > hr, .iui-contextmenuitem-separator > hr {
        background: var(--iui-menuitem-separator-line-background, #cccccc));
    }
    .iui-menu-marker-expand-down::before {
        border: 4px solid #0a4369;
        border-color: #0a4369 transparent transparent transparent;
    }
    .iui-menu-marker-expand-down-rtl::before {
        border: 4px solid #0a4369;
        border-color: #0a4369 transparent transparent transparent;
    }
    .iui-menu-marker-expand-right::before {
        border: 4px solid #0a4369;
        border-color: transparent transparent transparent #0a4369;
    }
    .iui-menu-marker-expand-left::before {
        border: 4px solid #0a4369;
        border-color: transparent #0a4369 transparent transparent;
    }
    .iui-menu-marker-top::before {
        border: 4px solid #484848;
        border-color: transparent transparent #1177bb transparent;
    }
    .iui-menu-marker-top::after {
        border: 4px solid #484848;
        border-color: transparent transparent #242424 transparent;
    }
    .iui-menu-marker-top-rtl::before {
        border: 4px solid #484848;
        border-color: transparent transparent #000000 transparent;
    }
    .iui-menu-marker-top-rtl::after {
        border: 4px solid #484848;
        border-color: transparent transparent #242424 transparent;
    }
    .iui-menu-marker-left::before {
        border: 4px solid #484848;
        border-color: transparent #000000 transparent transparent;
    }
    .iui-menu-marker-left::after {
        border: 4px solid #484848;
        border-color: transparent #242424 transparent transparent;
    }
    .iui-menu-marker-right::before {
        border: 4px solid #484848;
        border-color: transparent transparent transparent #000000;
    }
    .iui-menu-marker-right::after {
        border: 4px solid #484848;
        border-color: transparent transparent transparent #242424;
    }
    .iui-menu-disabled > ul {
        background: var(--iui-menu-block-disabled-background, #808080);
    }

    .iui-menuitem-separator-content {
        background: var(--iui-menuitem-separator-content-background, #252526);
    }
    
    /* Header */
    .iui-menuitem-header {
        background: var(--iui-menuitem-header-background, #074269);
    }
`;var J9=Be`
    .iui-menu {
        background: var(--iui-menu-background, #2455b0);
    }
    .iui-menu > ul {
        background: var(--iui-menu-block-background, #2455b0);
    }
    .iui-menuitem-root, .iui-menuitem-root-vertical {
        border-color: var(--iui-menuitem-root-border-color, #2455b0);
        color: var(--iui-menuitem-root-color, white);
    }
    .iui-menuitem-root-hovered {
        background: var(--iui-menuitem-root-hovered-background, #153268);
        border-color: var(--iui-menuitem-root-hovered-border-color, #0f244a);
        color: var(--iui-menuitem-root-hovered-color, white);
    }
    .iui-contextmenuitem-root-hovered {
        border-color: var(--fwcGrey7);
        background-color: var(--fwcGrey7);
        color: var(--iui-menuitem-root-hovered-color, black);
    }
    .iui-menuitem-root-hovered a {
        color: black;
    }
    .iui-menuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #153268);
        border-color: var(--iui-menuitem-root-selected-border-color, #0f244a);
        color: var(--iui-menuitem-root-selected-color, white);
    }
    .iui-contextmenuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #d9edfd);
        border: var(--iui-menuitem-root-selected-border, thin solid #d9edfd);
        color: var(--iui-menuitem-root-selected-color, black);
    }
    
    .iui-menuitem, .iui-contextmenuitem {
        background: var(--iui-menuitem-background, #fefefe);
        border-color: var(--iui-menuitem-border-color, #fefefe);
    }
    .iui-menuitem-hovered, .iui-contextmenuitem-hovered {
        background: var(--iui-menuitem-hovered-background, #d9edfd);
        border-color: var(--iui-menuitem-hovered-border-color, #d9edfd);
        color: var(--iui-menuitem-hovered-color, black);
    }
    .iui-menuitem-selected, .iui-contextmenuitem-selected {
        background: var(--iui-menuitem-selected-background, #d9edfd);
        border-color: var(--iui-menuitem-selected-border-color, #d9edfd);
        color: var(--iui-menuitem-selected-color, black);
    }
    .iui-menuitem-selected a {
        color: black;
    }
    .iui-menu li > ul {
        background: var(--iui-menuitem-block-background, #fefefe);
        border-color: var(--iui-menuitem-block-border-color, #1e4691);
    }
    .iui-menu-expand-box {
        width: 16px;
        height: 16px;
    }
    .iui-menu-marker-expand-down::before {
        border: 4px solid #6791e1;
        border-color: #6791e1 transparent transparent transparent;
    }
    .iui-menu-marker-expand-down-rtl::before {
        border: 4px solid #6791e1;
        border-color: #6791e1 transparent transparent transparent;
    }
    .iui-menu-marker-expand-right::before {
        border: 4px solid #6791e1;
        border-color: transparent transparent transparent #6791e1;
    }
    .iui-menu-marker-expand-left::before {
        border: 4px solid #6791e1;
        border-color: transparent #6791e1 transparent transparent;
    }
    .iui-menu-marker-top::before {
        border: 4px solid #fefefe;
        border-color: transparent transparent #1e4691 transparent;
    }
    .iui-menu-marker-top::after {
        border: 4px solid #fefefe;
        border-color: transparent transparent #fefefe transparent;
    }
    .iui-menu-marker-top-rtl::before {
        border: 4px solid #fefefe;
        border-color: transparent transparent #1e4691 transparent;
    }
    .iui-menu-marker-top-rtl::after {
        border: 4px solid #fefefe;
        border-color: transparent transparent #fefefe transparent;
    }
    .iui-menu-marker-left::before {
        border: 4px solid #fefefe;
        border-color: transparent #1e4691 transparent transparent;
    }
    .iui-menu-marker-left::after {
        border: 4px solid #fefefe;
        border-color: transparent #fefefe transparent transparent;
    }
    .iui-menu-marker-right::before {
        border: 4px solid #fefefe;
        border-color: transparent transparent transparent #1e4691;
    }
    .iui-menu-marker-right::after {
        border: 4px solid #fefefe;
        border-color: transparent transparent transparent #fefefe;
    }
    .iui-menu-disabled > ul {
        background: var(--iui-menu-block-disabled-background, #808080);
    }
    
    /* Header */
    .iui-menuitem-header {
        background: var(--iui-menuitem-header-background, #1e4691);
    }
`;var HP=class extends z9{_init(){super._init(),this._dataService=new Zm,this._contentAnimation={display:"none",left:0,width:0,height:0},this._currentAnimationSpeedValue=250,this._currentDataFields={},this._dataItems=[],this._childItems=[],this._currentLevel=0,this._currentOrientation=Vr.Vertical,this._currentPause=300,this._currentIconUrl=null,this._expandState="none",this._isExpanded=!1,this._isItemHovered=!1,this._blockPos={top:0,left:0},this._popupOrder=999,this._blockDisplay="none",this._blockElemWidth="0",this._blockElemHeight="0",this._blockOverflow="hidden",this._blockOpacity=0,this._pauseTimer=null,this._skipPause=!1,this._parentOffset={left:0,top:0,width:0,height:0},this._currentTemplateRef=null,this._currentControlStyleSettings=GP,this._updateDataFields(),this._updateData(),this._initStyle()}_initClassNames(){this._parentClassName=this._parentCtrl&&this._parentCtrl._getClassName?this._parentCtrl._getClassName():"iui-menu",this._generalClassName=this.data&&!this.data.pid?this._parentClassName+"item-root":this._parentClassName+"item",this._blockClassName=this._parentClassName+"item-block",this._contentClassName=this._generalClassName+"-content",this._expandBoxClassName="iui-menu-marker-expand",this._expandBoxSpaceClassName=this._expandBoxClassName+"-space",this._headerClassName=this._parentClassName+"-header",this._separatorClassName=this._generalClassName+"-separator",this._isExpanded=this.data&&this.data.expanded!==void 0?this.data.expanded:!1,this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"},expandBox:{general:this._expandBoxClassName,animated:this._expandBoxClassName+"-load",expanded:this._expandBoxClassName+"-open",collapsed:this._expandBoxClassName+"-close"},header:this._headerClassName,content:{disabled:this._contentClassName+"-disabled",focused:this._contentClassName+"-focused",normal:this._contentClassName,hovered:this._contentClassName+"-hovered",selected:this._contentClassName+"-selected"},separator:this._separatorClassName}}_initStyle(){this._initClassNames(),this._updateColorSchemeSettings(this._currentColorScheme),this.refresh()}connectedCallback(){}disconnectedCallback(){this._removePauseTimer()}setParent(n){this._parentCtrl=n,this._initClassNames()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{dataFields:{type:Object,attribute:"data-fields"},expanded:{type:Boolean,reflect:!0},items:{type:Array},level:{type:Number,reflect:!0},orientation:{converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="horizontal"?Vr.Horizontal:Vr.Vertical,toAttribute:(n,e)=>n===Vr.Horizontal?"Horizontal":"Vertical"},reflect:!0},pause:{type:Number,reflect:!0},templateRef:{type:Object,attribute:"template-ref"}}}get data(){return this._ctrlData}set data(n){if(this._ctrlData!==n){let e=this._ctrlData;this._ctrlData=n,this._initStyle(),this.requestUpdate("data",e)}}get dataFields(){return this._currentDataFields}set dataFields(n){let e=this._currentDataFields;this._updateDataFields(n),this.requestUpdate("dataFields",e)}get expanded(){return this._isExpanded}set expanded(n){this._isEnabled&&(n?this._expandState="expand":this._expandState="collapse",this._isExpanded=n,this._toggleContent())}get iconUrl(){return this._currentIconUrl}set iconUrl(n){if(this._currentIconUrl!==n){let e=this._currentIconUrl;this._currentIconUrl=n,this.requestUpdate("iconUrl",e)}}get items(){return this._dataItems}set items(n){let e=this._dataItems;this._dataItems=n,this._updateData(),this.requestUpdate("items",e)}get level(){return this._currentLevel}set level(n){if(this._currentLevel!==n){let e=this._currentLevel;this._currentLevel=n,this.requestUpdate("level",e)}}get orientation(){return this._currentOrientation}set orientation(n){if(this._currentOrientation!==n){let e=this._currentOrientation;this._currentOrientation=n,this.requestUpdate("orientation",e)}}get pause(){return this._currentPause}set pause(n){if(this._currentPause!==n){let e=this._currentPause;this._currentPause=n,this.requestUpdate("pause",e)}}get templateRef(){return this._currentTemplateRef}set templateRef(n){if(this._currentTemplateRef!==n){let e=this._currentTemplateRef;this._currentTemplateRef=n,this.requestUpdate("templateRef",e)}}_updateData(){this._dataService.init([{data:this.items,fields:this._currentDataFields}])}_updateDataFields(n){n?this._currentDataFields={allowCheckBox:n.allowCheckBox?n.allowCheckBox:"allowCheckBox",allowRadioButton:n.allowRadioButton?n.allowRadioButton:"allowRadioButton",checked:n.checked?n.checked:"checked",enabled:n.enabled?n.enabled:"enabled",expanded:n.expanded?n.expanded:"expanded",hasChildren:n.hasChildren?n.hasChildren:"hasChildren",icon:n.icon?n.icon:"icon",iconUrl:n.iconUrl?n.iconUrl:"iconUrl",id:n.id?n.id:"id",items:n.items?n.items:"items",objects:n.items?n.items:"items",pid:n.pid?n.pid:"pid",radioGroup:n.radioGroup?n.radioGroup:"radioGroup",shortcutKey:n.shortcutKey?n.shortcutKey:"shortcutKey",style:n.style?n.style:"style",text:n.text?n.text:"text",tooltip:n.tooltip?n.tooltip:"tooltip",value:n.value?n.value:"value",visible:n.visible?n.visible:"visible"}:this._currentDataFields={allowCheckBox:"allowCheckBox",allowRadioButton:"allowRadioButton",checked:"checked",enabled:"enabled",expanded:"expanded",hasChildren:"hasChildren",icon:"icon",iconUrl:"iconUrl",id:"id",items:"items",objects:"items",pid:"pid",radioGroup:"radioGroup",shortcutKey:"shortcutKey",style:"style",text:"text",tooltip:"tooltip",value:"value",visible:"visible"},this._dataService&&this._dataService.updateDataFields(this._currentDataFields)}collapse(){this.expanded=!1,this._childItems&&this._childItems.forEach(n=>n.collapse()),this.refresh()}expand(){this.expanded=!0}toggle(){this.expanded=!this.expanded}_onExpandBoxMouseDown(n){this._isEnabled&&this.toggle()}_getDataType(){return this.data&&this.data.type?this.data.type:"item"}_getItemLevel(){return this._currentLevel!==void 0?this._currentLevel+1:0}_getOffset(){return this._elemRef?{left:this._elemRef.offsetLeft,top:this._elemRef.offsetTop,width:this._elemRef.offsetWidth,height:this._elemRef.offsetHeight}:{left:0,top:0,width:0,height:0}}_isThereChildren(){return this._dataItems&&this._dataItems.length>0}_isBlockVisible(){return this._isItemHovered&&this._isThereChildren()}_isCheckBoxVisible(){return this.data&&this.data[this._currentDataFields.allowCheckBox]===!0}_isRadioButtonVisible(){return this.data&&this.data[this._currentDataFields.allowRadioButton]===!0}setOffset(n){this._parentOffset=n}updateLayout(n){return B(this,null,function*(){let e=this;e._updateReferences();let t=setTimeout(function(){if(e.data&&e._elemRef){let r=e._commonService.getPadding(e._elemRef);e._clientRect={width:e._elemRef.clientWidth-(r.left+r.right),height:e._elemRef.clientHeight-(r.top+r.bottom)},e.data.pid||e._currentOrientation===Vr.Vertical?e._blockPos={top:e._currentLevel>0?-2:-1,left:e._elemRef.offsetLeft+e._elemRef.offsetWidth-3}:e._blockPos={top:e._parentOffset.height-8,left:-1}}e.refresh(),clearTimeout(t)},1)})}_checkItem(n){if(this._isEnabled&&this.data){let e=this._getItemCheckValue();this.data[this._currentDataFields.checked]=!e,this._parentCtrl&&this._parentCtrl.invokeCtrlMethod("UPDATE_CHECKBOX",{event:n,cmp:this,item:this.data,checked:this._getItemCheckValue()}),this.update()}n.stopPropagation()}_checkMouseUp(n){n.stopPropagation()}_checkedChanged(n){let e=n.detail.checked;this.data[this._currentDataFields.checked]!==e&&(this.data[this._currentDataFields.checked]=e,this._parentCtrl&&this._parentCtrl.invokeCtrlMethod("UPDATE_RADIOBUTTON",{event:n,cmp:this,item:this.data,checked:this._getItemCheckValue()}),this.update()),n.stopPropagation()}_getItemCheckValue(){return!!(this.data&&this.data[this._currentDataFields.checked]===!0)}_onMouseEnter(n){if(this._isEnabled){if(this.state|=Zi.Hovered,this._isItemHovered=!0,this.updateLayout(),this.data&&this.data[this._currentDataFields.pid])this.expand();else if(this._parentCtrl&&this._parentCtrl._isMenuActive()){let e=this._parentCtrl._getActiveMenu();e&&e!==this&&e.collapse(),this.data&&!this.data[this._currentDataFields.pid]&&this._parentCtrl._setActiveMenu(this),e&&e.refresh(),this.expand()}this.refresh(),this._invokeEvent("mouseEnter",n)}n.stopPropagation()}_onMouseDown(n){this._isEnabled&&this._invokeEvent("mouseDown",n),n.stopPropagation()}_onMouseLeave(n){this._isEnabled&&(this.state&=~Zi.Hovered,this._removePauseTimer(),this._isItemHovered=!1,this._parentCtrl&&(this.data&&this.data[this._currentDataFields.pid]?this.collapse():this!==this._parentCtrl._getActiveMenu()&&this.collapse()),this.refresh(),this._invokeEvent("mouseLeave",n)),n.stopPropagation()}_onMouseUp(n){this._isEnabled&&(n.which===1&&this._parentCtrl&&(this._parentCtrl.invokeCtrlMethod("MENU_CLICK",{event:n,cmp:this,item:this.data}),this.data&&!this.data[this._currentDataFields.pid]&&(this._skipPause=!0,this.expand(),this._parentCtrl.invokeCtrlMethod("ACTIVATE_MENU",{event:n,cmp:this,item:this.data}),this.refresh())),this._invokeEvent("mouseUp",n)),n.stopPropagation()}_onContextMenu(n){n.preventDefault(),n.stopPropagation()}_onChildItemMouseDown(n){this.collapse()}_radioMouseDown(n){n.stopPropagation()}_radioMouseUp(n){n.stopPropagation()}_animationCallbackClose(n,e){if(n.length>0){let t=n[0].values;this._blockOpacity=t.opacity,this._blockPos.top=t.top}e&&(this._blockDisplay="none",this._blockElemHeight="0",this._expandState="none"),this.update()}_animationCallbackOpen(n,e){if(n.length>0){let t=n[0].values;this._blockOpacity=t.opacity,this._blockPos.top=t.top}e&&(this._blockElemHeight="auto",this._blockOverflow="visible",this._expandState="none"),this.update()}_removePauseTimer(){this._pauseTimer&&clearTimeout(this._pauseTimer),this._pauseTimer=null}_toggleContent(){let n=this;if(n._dataItems)if(n._clearActiveAnimations(),n._isAnimationAllowed)if(n._isExpanded)if(n._removePauseTimer(),n.data&&!n.data[this._currentDataFields.pid]&&n._parentCtrl&&n._parentCtrl._isMenuActive()&&!n._parentCtrl._isContextMenu())n._blockDisplay="block",n._blockElemHeight="auto",n._blockOverflow="visible",n._blockOpacity=1,n._expandState="none",n.refresh();else{let e=n._skipPause?0:300;n._pauseTimer=setTimeout(function(){if(n._pauseTimer){n._blockDisplay="block",n._blockElemHeight="auto",n._blockOverflow="visible";let t=new Xo,r=n._animationCallbackOpen.bind(n);n._activeAnimations.push(t);let o={opacity:0,top:n._blockPos.top+5},s={opacity:1,top:n._blockPos.top};t.animate({current:o,values:s},0,n._currentAnimationSpeedValue,r)}n._skipPause=!1,n._removePauseTimer()},e)}else if(n.data&&!n.data[this._currentDataFields.pid]&&n._parentCtrl&&n._parentCtrl._isMenuActive()&&!n._parentCtrl._isContextMenu())n._blockOverflow="hidden",n._blockDisplay="none",n._blockElemHeight="0",n._blockOpacity=0,n._expandState="none",n.refresh();else{n._blockOverflow="hidden",n.update();let e=new Xo,t=n._animationCallbackClose.bind(n);n._activeAnimations.push(e);let r={opacity:1,top:n._blockPos.top},o={opacity:0,top:n._blockPos.top+5};e.animate({current:r,values:o},0,n._currentAnimationSpeedValue/2,t)}else n._isExpanded?(n._removePauseTimer(),n._pauseTimer=setTimeout(function(){n._pauseTimer&&(n._blockDisplay="block",n._blockElemHeight="auto",n._blockOverflow="visible",n._blockOpacity=1,n._expandState="none"),n.refresh(),n._removePauseTimer()},300)):(n._blockOverflow="hidden",n._blockDisplay="none",n._blockElemHeight="0",n._blockOpacity=0,n._expandState="none",n.refresh())}_getControlStyle(){let n=this._currentInlineStyle||{};return this.data&&(n=this.data.style||{}),n.display=this._getItemDisplay(),n}_getItemDisplay(){let n="block";return this.data&&this.data.pid!==void 0?n=this._currentOrientation?this._currentOrientation===Vr.Vertical?"block":"inline-block":"block":n=this._currentOrientation&&this._currentOrientation===Vr.Vertical?"block":"inline-block",n}_isContextMenu(){return this._parentCtrl&&this._parentCtrl._isContextMenu()}_isMenuActive(){return this._parentCtrl&&this._parentCtrl._isMenuActive()&&this._parentCtrl._getActiveMenu()===this}_getCheckBoxClass(){let n={"iui-menuitem-checkbox":!0};return this._getItemCheckValue()&&(n["iui-menuitem-checkbox-checked"]=!0),n}_getExpandBoxSpaceClass(){let n="";return this._isThereChildren()&&(n=this._expandBoxSpaceClassName),n}_getExpandBoxClass(){let n="";return this._isThereChildren()&&(n=this._defaultStyle.expandBox.general),n}_updateColorSchemeSettings(n){switch(this._currentColorSchemeSettings=Be``,n){case ui.Dark:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll($9.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(J9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentColorSchemeSettings.cssText=""}}_updateControlClass(){if(this._ctrlClass={},this._ctrlClass[this._generalClassName]=!0,this._getDataType()==="header")this._ctrlClass[this._defaultStyle.header]=!0;else if(this._getDataType()==="separator")this._ctrlClass[this._defaultStyle.separator]=!0;else if(this._defaultStyle&&(this._ctrlClass[this._defaultStyle.general.normal]=!0,this.state&Zi.Disabled?this._ctrlClass[this._defaultStyle.general.disabled]=!0:this.state&Zi.Focused?this._ctrlClass[this._defaultStyle.general.focused]=!0:this._isMenuActive()||this.state&Zi.Selected?this._ctrlClass[this._defaultStyle.general.selected]=!0:this.state&Zi.Hovered&&(this._ctrlClass[this._defaultStyle.general.hovered]=!0),this._isThereChildren())){let n=this._getExpandBoxClass();this.data&&this.data.pid||this._currentOrientation===Vr.Vertical?n+="-right":n+="-down",this._ctrlClass[n]=!0,this._ctrlClass[this._getExpandBoxSpaceClass()]=!0}}_updateStyle(n){n?this._options.currentStyle={general:this._getGeneralStyle(n.general),content:this._getContentStyle(n.content)}:this._options.currentStyle={general:{disabled:this._defaultStyle.general.disabled,focused:this._defaultStyle.general.focused,hovered:this._defaultStyle.general.hovered,normal:this._defaultStyle.general.normal,selected:this._defaultStyle.general.selected},expandBox:{general:this._defaultStyle.expandBox.general,animated:this._defaultStyle.expandBox.animated,expanded:this._defaultStyle.expandBox.expanded,collapsed:this._defaultStyle.expandBox.collapsed},header:this._defaultStyle.header,content:{disabled:this._defaultStyle.content.disabled,focused:this._defaultStyle.content.focused,hovered:this._defaultStyle.content.hovered,normal:this._defaultStyle.content.normal,selected:this._defaultStyle.content.selected},separator:this._defaultStyle.separator}}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(K9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText=""}}_getItemTemplate(n){return this._parentCtrl&&this._parentCtrl._getItemTemplate?this._parentCtrl._getItemTemplate(n):Ke``}firstUpdated(n){this._updateReferences(),this.updateLayout()}_getCheckBoxLayout(){let n=Ke``;return this._isCheckBoxVisible()&&(n=Ke`<span class=${Ln(this._getCheckBoxClass())} @mousedown="${e=>this._checkItem(e)}" @mouseup="${e=>this._checkMouseUp(e)}" @touchstart="${e=>this._checkItem(e)}"></span>`),n}_getChildItemLayout(){return this._isThereChildren()?Ke`<ul id="block" class="iui-menuitem-block" style=${sn({display:this._blockDisplay,top:this._blockPos.top+"px",left:this._blockPos.left+"px",height:this._blockElemHeight,overflow:this._blockOverflow,opacity:this._blockOpacity})}>                     ${this._dataItems.filter(n=>n[this._currentDataFields.visible]!==!1).map(n=>Ke`                             <iui-menuitem .allowAnimation="${this.allowAnimation}" .colorScheme="${this._currentColorScheme}" .customStyle="${this.customStyle}" .data="${n}" .dataFields="${this._currentDataFields}" .enabled="${n[this._currentDataFields.enabled]}" .items="${n[this._currentDataFields.items]}" .icon="${n[this._currentDataFields.icon]}" .iconUrl="${n[this._currentDataFields.iconUrl]}" .level="${this._getItemLevel()}" .resourcePath="${this.resourcePath}" .text="${n[this._currentDataFields.text]}" .templateRef="${this._getItemTemplate(n)}" .theme="${this.theme}"></iui-menuitem>                     `)}                 </ul>`:Ke``}_getHeaderLayout(){let n=Ke``;if(this.data&&this._getDataType()==="header"){let e=this._commonService.getStyle(this.data[this._currentDataFields.style]);n=Ke`                 <div class="iui-menuitem-header" style=${sn(e)}>                     ${this.templateRef}                 </div>             `}return n}_getItemLayout(){let n=Ke``;return this._getDataType()==="item"&&(n=Ke`<div class="iui-menuitem-content-template">                     ${this.templateRef}                     ${this._getChildItemLayout()}                 </div>`),n}_getRadioButtonLayout(){let n=Ke``;if(this._isRadioButtonVisible()){let e=Be`                 .iui-radio-button {                     margin: var(--iui-radio-button-margin, 0 3px);                     padding: var(--iui-radio-button-padding, 3px 0);                 }                 .iui-radio-button-btn {                     margin: var(--iui-radio-button-btn-margin, 0);                 }                 .iui-radio-button-btn span {                     height: var(--iui-radio-button-btn-content-height, 10px);                     width: var(--iui-radio-button-btn-content-width, 10px);                 }             `;n=Ke`                 <iui-radiobutton                      .checked=${this._getItemCheckValue()}                     .colorScheme="${this._currentColorScheme}"                     .customStyle="${[e,this.customStyle]}"                     .enabled="${this.enabled}"                      .theme="${this.theme}"                     @checkedChanged="${t=>this._checkedChanged(t)}"                     @mousedown="${t=>this._radioMouseDown(t)}"                     @mouseup="${t=>this._radioMouseUp(t)}"                 ></iui-radiobutton>`}return n}_getSeparatorLayout(){let n=Ke``;if(this._getDataType()==="separator")if(this.data){let e=this._commonService.getStyle(this.data[this._currentDataFields.style]),t=oe({},e.content)||{},r=oe({},e.line)||{};this.data.text?n=Ke`                         <hr class="iui-menuitem-inline-separator" style=${sn(r)} />                         <div class="iui-menuitem-separator-content" style=${sn(t)}>                             ${this.templateRef}                         </div>                     `:n=Ke`<hr style=${sn(r)} />`}else n=Ke`<hr />`;return n}refresh(){this._updateStyle(this.controlStyle),this._updateControlClass(),this._updateContentClass(),this.update(),this._updateReferences(),this._refreshChildren()}_refreshChildren(){this._childItems&&this._childItems.forEach(n=>n.refresh())}render(){return Ke`             <style>                 ${this._currentControlStyleSettings}                 ${this._currentThemeSettings}                 ${this._currentColorSchemeSettings}                 ${this._currentCustomStyle}             </style>             <li data-ctrl="menuitem" class=${Ln(this._getControlClass())} style=${sn(this._getControlStyle())} @click="${n=>this._onClick(n)}" @contextmenu="${n=>this._onContextMenu(n)}" @mousedown="${n=>this._onMouseDown(n)}" @mouseup="${n=>this._onMouseUp(n)}" @mouseenter="${n=>this._onMouseEnter(n)}" @mousemove="${n=>this._onMouseMove(n)}" @mouseleave="${n=>this._onMouseLeave(n)}">                 ${this._getHeaderLayout()}                 ${this._getCheckBoxLayout()}                 ${this._getRadioButtonLayout()}                 ${this._getItemLayout()}                 ${this._getSeparatorLayout()}             </li>         `}_updateControlStyleSettings(n){this._currentControlStyleSettings=Be``,this._currentControlStyleSettings.cssText=this._commonService.replaceAll(GP.cssText,"../../icons",n)}_updateReferences(){this._elemRef=this.shadowRoot.querySelector("li[data-ctrl=menuitem]"),this._blockElem=this.shadowRoot.querySelector("#block"),this._blockElem&&(this._childItems=this._blockElem.querySelectorAll("iui-menuitem"),this._childItems&&this._childItems.forEach(n=>{n.setParent(this._parentCtrl),n.setOffset(this._getOffset())}))}};window.customElements.define("iui-menuitem",HP);var WP=Be`
    :root {
        --fwcLightGreyGradient1: #{$fwcLightGreyGradient1};
        --fwcLightGreyGradient2: #{$fwcLightGreyGradient2};
    }

    .iui-contextmenu {
        border: 1px solid var(--fwcGrey7) !important;
        border-radius: 3px !important;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3) !important;
        font-family: "Montserrat", "Arial", sans-serif !important;
        font-size: 0.9rem !important;
        color: var(--inputColor);
        background: linear-gradient(
            to bottom,
            var(--fwcLightGreyGradient1) 0%,
            var(--fwcLightGreyGradient2) 100%
        ) !important;
        cursor: default;
        margin: 0;
        overflow: visible;
        position: absolute;
        z-index: 1999 !important;
        width: 17rem !important;

        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        -ms-user-select: none;
        user-select: none;
        line-height: 1.1;
    }

    .iui-contextmenu:focus {
        outline: none !important;
    }
    .iui-contextmenu ul {
        margin: 0;
        padding: 0;
    }
    .iui-menuitem-label {
    margin-left: 4px;
    }
   
    .iui-menuitem-block {
        width: var(--iui-contextmenu-width, 150px);
    }
    .iui-menuitem-root {
        color: var(--inputColor);
        display: block !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
    }
    .iui-menuitem-root:hovered, :selected {
        border-color: var(--fwcGrey7);
        background-color: var(--fwcGrey7);
        }
    `;var q9=Be`
`;var Y9=Be`
    .iui-contextmenu {
        background: var(--iui-contextmenu-background, #252526);
        border-color:  var(--iui-contextmenu-border-color, #151515);
        box-shadow: var(--iui-contextmenu-box-shadow, 0 2px 5px #151515);
        color: var(--iui-contextmenu-color, #cccccc);
    }
    .iui-menuitem-block {
        background: var(--iui-menuitem-block-background, #252526);
        border: var(--iui-menuitem-block-border, thin solid #151515);
        border-color: var(--iui-menuitem-block-border-color, #151515);
    }
    .iui-contextmenuitem-root {
        border-color: var(--iui-menuitem-root-border-color, transparent);
        color: var(--iui-menuitem-root-color, #cccccc);
    }
    .iui-contextmenuitem-root-hovered {
        background: var(--iui-menuitem-root-hovered-background, #1177bb);
        border-color: var(--iui-menuitem-root-hovered-border-color, #1177bb);
        color: var(--iui-menuitem-root-hovered-color, white);
    }
    .iui-contextmenuitem-root-selected {
        background: var(--iui-menuitem-root-selected-background, #1177bb);
        border-color: var(--iui-menuitem-root-selected-border-color, #1177bb);
        color: var(--iui-menuitem-root-selected-color, white);
    }
    .iui-contextmenuitem-root-separator, .iui-contextmenuitem-separator {
        background: var(--iui-menuitem-separator-background, #252526);
    }
    .iui-contextmenuitem-root-separator > hr, .iui-contextmenuitem-separator > hr {
        background: var(--iui-menuitem-separator-line-background, #151515);
    }
`;var X9=Be`
    .iui-contextmenu {
        background: var(--iui-contextmenu-background, #fefefe);
        border: var(--iui-contextmenu-border, thin solid #dedede);
    }
    .iui-menuitem-block {
        background: var(--iui-menuitem-block-background, #f5f5f5);
        border: var(--iui-menuitem-block-border, thin solid #dedede);
        border-color: var(--iui-menuitem-block-border-color, #dedede);
    }
    .iui-contextmenuitem-root {
        border-color: var(--iui-menuitem-root-border-color, transparent);
        color: var(--iui-menuitem-root-color, black);
    }
    .iui-contextmenuitem-root-hovered {
        border-color: var(--fwcGrey7);
        background-color: var(--fwcGrey7);
        color: var(--iui-menuitem-root-hovered-color, black);
    }
    .iui-contextmenuitem-root-selected {
        border-color: var(--fwcGrey7);
        background-color: var(--fwcGrey7);
        color: var(--iui-menuitem-root-selected-color, black);
    }
`;var O1=class extends Ym{constructor(){super(),this._commonService=new Xm,this._dataService=new Zm,this._activeAnimations=[],this._currentAnimationSpeedValue=250,this._isAnimationAllowed=!0,this._currentDataFields={},this._currentOptions={},this._fullList=[],this._menuItems=[],this._updateOptions(),this._blockDisplay="none",this._ctrlOpacity=0,this._currentResourcePath="../icons",this._menuActive=!0,this._currentActiveMenu=null,this._currentControlStyleSettings=WP,this._currentCustomStyle=[],this._currentTheme=Vn.None,this._currentThemeSettings=Be``,this._ctrlClass={},this._generalClassName="iui-contextmenu",this._initTimout=null,this._updateDataFields(),this._initStyle(),this._updateData()}_initStyle(){this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"}},this._updateColorSchemeSettings(this._currentColorScheme),this.refresh(),this._initFocus()}_initFocus(){let n=this;n._initTimout=setTimeout(function(){n._elemRef&&n._elemRef.focus()},1)}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._clearAnimations(),this._initTimout&&clearTimeout(this._initTimout),this._initTimout=null}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{allowAnimation:{type:Boolean,attribute:"allow-animation",reflect:!0},colorScheme:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"light":return ui.Light;case"dark":return ui.Dark;default:return ui.None}},toAttribute:n=>{switch(n){case ui.Light:return"Light";case ui.Dark:return"Dark";default:return"None"}}},reflect:!0},customStyle:{type:Object,attribute:"custom-style"},dataFields:{type:Object,attribute:"data-fields"},options:{type:Object},resourcePath:{type:String,attribute:"resource-path",reflect:!0},theme:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"office":return Vn.Office;case"dark":return Vn.Dark;default:return Vn.None}},toAttribute:n=>{switch(n){case Vn.Office:return"Office";case Vn.Dark:return"Dark";default:return"None"}}},reflect:!0}}}get allowAnimation(){return this._isAnimationAllowed}set allowAnimation(n){if(this._isAnimationAllowed!==n){let e=this._isAnimationAllowed;this._isAnimationAllowed=n,this.requestUpdate("allowAnimation",e)}}get colorScheme(){return this._currentColorScheme}set colorScheme(n){if(this._currentColorScheme!==n){let e=this._currentColorScheme;this._currentColorScheme=n,this._updateColorSchemeSettings(n),this.requestUpdate("colorScheme",e),this.refresh()}}get customStyle(){return this._currentCustomStyle}set customStyle(n){if(this._currentCustomStyle!==n){let e=this._currentCustomStyle;this._currentCustomStyle=n,this.requestUpdate("customStyle",e),this.refresh()}}get dataFields(){return this._currentDataFields}set dataFields(n){let e=this._currentDataFields;this._updateDataFields(n),this.requestUpdate("dataFields",e)}get options(){return this._currentOptions}set options(n){let e=this._currentOptions;this._updateOptions(n),this.refresh(),this.requestUpdate("options",e)}get resourcePath(){return this._currentResourcePath}set resourcePath(n){if(this._currentResourcePath!==n){let e=this._currentResourcePath;this._currentResourcePath=n,this._updateColorSchemeSettings(this._currentColorScheme),this._updateControlStyleSettings(n),this.requestUpdate("resourcePath",e)}}get theme(){return this._currentTheme}set theme(n){if(this._currentTheme!==n){let e=this._currentTheme;this._currentTheme=n,this._updateThemeSettings(n),this.requestUpdate("theme",e)}}_animationCallback(n,e){if(n.length>0){let t=n[0].values;this._ctrlOpacity=t.opacity,this._currentOptions.position.y=t.top,this.update()}}_clearActiveAnimations(){this._activeAnimations.filter(n=>n.isActive()).forEach(n=>n.destroy())}_clearAnimations(){this._activeAnimations.forEach(n=>{n.destroy(),n=void 0}),this._activeAnimations.length=0}_addChildItems(n,e){let t=!0;if(!n[this._currentDataFields.items])return t=this._addItemToCurrentList(n,e);if(this._addItemToCurrentList(n,e)){t=!0;let r=n[this._currentDataFields.items];r&&r.forEach(o=>this._addChildItems(o,n[this._currentDataFields.id]))}return t}_addItemToCurrentList(n,e){n[this._currentDataFields.id]||(n[this._currentDataFields.id]=this._commonService.getUniqueId()),e&&(n[this._currentDataFields.pid]=e);let t=this._isItemAllowed(n);return t&&this._fullList.push(n),t}getFullList(){return this._fullList}_isItemAllowed(n){return n[this._currentDataFields.visible]!==!1}_updateOptions(n){n?(this._currentOptions={adjustment:this._commonService.isFieldAvailable(n.adjustment,{top:0,left:0}),autoClose:this._commonService.isFieldAvailable(n.autoClose,!0),direction:this._commonService.isFieldAvailable(n.direction,Qm.None),inverse:this._commonService.isFieldAvailable(n.inverse,!1),items:this._commonService.isFieldAvailable(n.items,[]),mode:this._commonService.isFieldAvailable(n.mode,"normal"),position:this._commonService.isFieldAvailable(n.position,{x:0,y:-9999999})},this._updateDataFields(n.dataFields)):(this._currentOptions={adjustment:{top:0,left:0},autoClose:!0,direction:Qm.None,inverse:!1,items:[],mode:"normal",position:{x:0,y:-9999999}},this._updateDataFields()),this._updateData()}_updateData(){this._dataService.init([{data:this._currentOptions.items,fields:this._currentDataFields}]),this._updateFullList()}_updateDataFields(n){n?this._currentDataFields={allowCheckBox:n.allowCheckBox?n.allowCheckBox:"allowCheckBox",allowRadioButton:n.allowRadioButton?n.allowRadioButton:"allowRadioButton",checked:n.checked?n.checked:"checked",enabled:n.enabled?n.enabled:"enabled",expanded:n.expanded?n.expanded:"expanded",hasChildren:n.hasChildren?n.hasChildren:"hasChildren",icon:n.icon?n.icon:"icon",iconUrl:n.iconUrl?n.iconUrl:"iconUrl",id:n.id?n.id:"id",items:n.items?n.items:"items",objects:n.items?n.items:"items",pid:n.pid?n.pid:"pid",radioGroup:n.radioGroup?n.radioGroup:"radioGroup",shortcutKey:n.shortcutKey?n.shortcutKey:"shortcutKey",style:n.style?n.style:"style",text:n.text?n.text:"text",tooltip:n.tooltip?n.tooltip:"tooltip",value:n.value?n.value:"value",visible:n.visible?n.visible:"visible"}:this._currentDataFields={allowCheckBox:"allowCheckBox",allowRadioButton:"allowRadioButton",checked:"checked",enabled:"enabled",expanded:"expanded",hasChildren:"hasChildren",icon:"icon",iconUrl:"iconUrl",id:"id",items:"items",objects:"items",pid:"pid",radioGroup:"radioGroup",shortcutKey:"shortcutKey",style:"style",text:"text",tooltip:"tooltip",value:"value",visible:"visible"}}_updateFullList(){this._fullList.length=0;let n=this._dataService.getList();n&&n.forEach(e=>this._addChildItems(e,null))}_invokeEvent(n,e,t,r){let o=new CustomEvent(n,{detail:e,bubbles:t!==void 0?t:!1,composed:r!==void 0?r:!1});return this.dispatchEvent(o),e}_onBlur(n){this.autoClose!==!1&&this._invokeEvent("closed",{event:n})}_onRightClick(n){n.preventDefault()}_defaultFunc(){}invokeCtrlMethod(n,e){switch(n){case"MENU_CLICK":e.item&&e.item.type!=="header"&&e.item.type!=="separator"&&(this._invokeEvent("menuClick",{event:e.event,item:e.item}),this.close());break;case"UPDATE_CHECKBOX":this._updateItemCheckBoxValue(e.event,e.item);break;case"UPDATE_RADIOBUTTON":this._updateItemRadioButtonValue(e.event,e.item);break;default:this._defaultFunc()}}_getActiveMenu(){return null}getItemParent(n){return this._dataService.getParent(n)}_isContextMenu(){return!0}_isMenuActive(){return this._menuActive}_setActiveMenu(n){}_getSize(){return{width:this._elemRef.offsetWidth,height:this._elemRef.offsetHeight}}_updateItemCheckBoxValue(n,e){e&&this._invokeEvent("checkedChanged",{event:n,item:e,checked:e[this._currentDataFields.checked]})}_isItemRadioButtonAllowed(n){return n&&n[this._currentDataFields.allowRadioButton]===!0}_updateItemRadioButtonValue(n,e){let t=this;if(e){let r=t.getItemParent(e),o=r?r[t._currentDataFields.items]:t._currentOptions.items;(o=o.filter(s=>s[t._currentDataFields.radioGroup]===e[t._currentDataFields.radioGroup])).forEach(s=>{t._isItemRadioButtonAllowed(s)&&s!==e&&(s[t._currentDataFields.checked]=!1)}),t._invokeEvent("checkedChanged",{event:n,item:e,checked:e[t._currentDataFields.checked],radioGroup:e[t._currentDataFields.radioGroup]}),t._menuItems&&t._menuItems.forEach(s=>s.refresh())}}_adjustPosition(n,e,t,r,o){let s=this,a=s._commonService.getShiftPos();setTimeout(function(){let l=s._getSize(),c=t;if(e==="manual"&&o&&(c.x=o.left+o.width+a.x+s._currentOptions.adjustment.left,c.y=o.bottom+a.y+4+s._currentOptions.adjustment.top,s._currentOptions.direction&Qm.Above&&(c.y-=l.height),(s._currentOptions.inverse||s._currentOptions.direction&Qm.Left)&&(c.x-=l.width)),r&&c.y+l.height>r.height){let d=c.y+l.height-r.height;c.y-=d}if(s._currentOptions.position=c,s._isAnimationAllowed){s._ctrlOpacity=0;let d=new Xo,h=s._animationCallback.bind(s);s._activeAnimations.push(d);let _={opacity:0,top:s._currentOptions.position.y-10},C={opacity:1,top:s._currentOptions.position.y};d.animate({current:_,values:C},0,s._currentAnimationSpeedValue,h)}else s._ctrlOpacity=1,s.update();s._updateReferences(),s._invokeEvent("menuOpened",{event:n})},10)}close(){this._blockDisplay="none",this.update()}open(n,e,t,r,o){let s=this;s._clearActiveAnimations(),s._currentOptions.items&&(s._blockDisplay="block",s._adjustPosition(n,e,t,r,o))}findItemById(n){return this._dataService.findObjectById(n)}findItemByText(n){return this._dataService.findObjectByText(n)}_getClassName(){return this._generalClassName}_getControlClass(){return this._ctrlClass}_updateControlClass(){this._ctrlClass={},this._ctrlClass["iui-contextmenu"]=!0}_updateColorSchemeSettings(n){switch(this._currentColorSchemeSettings=Be``,n){case ui.Dark:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(Y9.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(X9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentColorSchemeSettings.cssText=""}}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(q9.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText=""}}_getItemTemplate(n){let e=null;if(this.itemTemplate){let t=this.itemTemplate(n);t&&(e=new Hl(t.strings,t.values,"html",Fh))}if(!e){let t={},r=this._commonService.isString(n.icon)?n.icon.split(" "):[];r.map(s=>t[s]=!0);let o=n[this._currentDataFields.iconUrl];e=Ke`                 ${r.length>0?Ke`<span class=${Ln(t)}></span>`:Ke``}                 ${o?Ke`<img style=${sn({verticalAlign:"middle"})} src="${o} />`:Ke``}                 <span class="iui-menuitem-label">${n.text}</span>             `}return e}firstUpdated(n){this._updateReferences()}refresh(){this._updateControlClass(),this.update(),this._menuItems&&this._menuItems.forEach(n=>n.refresh())}render(){return Ke`             <style>                 ${this._currentControlStyleSettings}                 ${this._currentThemeSettings}                 ${this._currentColorSchemeSettings}                 ${this._currentCustomStyle}             </style>             <div data-ctrl="contextmenu-win" class=${Ln(this._getControlClass())} style=${sn({top:this._currentOptions.position.y+"px",left:this._currentOptions.position.x+"px",height:"auto",opacity:this._ctrlOpacity})} @blur="${n=>this._onBlur(n)}" @contextmenu="${n=>this._onRightClick(n)}" tabindex="999">                 <ul id="content">                     ${this._currentOptions.items.filter(n=>n[this._currentDataFields.visible]!==!1).map(n=>Ke`                             <iui-menuitem .allowAnimation="${this.allowAnimation}" .colorScheme="${this._currentColorScheme}" .customStyle="${[this._currentControlStyleSettings,this._currentThemeSettings,this._currentCustomStyle]}" .data="${n}" .dataFields="${this._currentDataFields}" .items="${n[this._currentDataFields.items]}" .enabled="${n[this._currentDataFields.enabled]}" .icon="${n[this._currentDataFields.icon]}" .iconUrl="${n[this._currentDataFields.iconUrl]}" .level="0" .resourcePath="${this.resourcePath}" .text="${n[this._currentDataFields.text]}" .templateRef="${this._getItemTemplate(n)}" .theme="${this.theme}"></iui-menuitem>                     `)}                 </ul>             </div>         `}_updateControlStyleSettings(n){this._currentControlStyleSettings=Be``,this._currentControlStyleSettings.cssText=this._commonService.replaceAll(WP.cssText,"../../icons",n)}_updateReferences(){this._elemRef=this.shadowRoot.querySelector("div[data-ctrl=contextmenu-win]"),this._contentElem=this.shadowRoot.querySelector("#content"),this._contentElem&&(this._menuItems=this._contentElem.querySelectorAll("iui-menuitem"),this._menuItems&&this._menuItems.forEach(n=>n.setParent(this)))}};window.customElements.define("iui-contextmenu-win",O1);var zP=class extends pu{constructor(){super(),this._currentSettings=null,this._winScrollPos={top:0,left:0},this._cmpRef=null,this._cmp=null,this._currentThemeSettings=Be``}connectedCallback(){}disconnectedCallback(){this._removeContextMenuWindow()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{settings:{type:Object}}}get settings(){return this._currentSettings}set settings(n){if(this._currentSettings!==n){let e=this._currentSettings;this._currentSettings=n,this.requestUpdate("settings",e)}}getFullList(){return this._cmpRef?this._cmpRef.getFullList():[]}_closeContextMenu(){this._cmpRef&&this._cmpRef.close()}getItemParent(n){return this._cmpRef?this._cmpRef.getItemParent(n):null}_removeContextMenu(){this._removeContextMenuWindow()}_menuItemClick(n){this._invokeEvent("menuClick",{event:n.detail.event,item:n.detail.item}),this._removeContextMenuWindow()}_menuItemCheckedChanged(n){this._invokeEvent("checkedChanged",{event:n.detail.event,item:n.detail.item,checked:n.detail.checked,radioGroup:n.detail.radioGroup})}_getSize(){return{width:this._elemRef.offsetWidth,height:this._elemRef.offsetHeight}}_isInsideClick(n){if(this._contentSlotElem=this.shadowRoot.querySelector("slot").assignedNodes(),this._contentSlotElem&&(this._contentSlotElem=this._contentSlotElem.filter(e=>e.nodeType===1),this._contentSlotElem&&this._contentSlotElem.length>0)){let e=this._commonService.getPageRect(this._contentSlotElem[0]),t=this._commonService.getMousePos(n),r=this._commonService.getShiftPos();return t.x-=r.x,t.y-=r.y,t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom}return!1}_ctrlContextMenu(n){this._isEnabled&&this._currentSettings.position!=="manual"&&this._processMenuOpen(n)}_ctrlMouseDown(n){this._isEnabled&&this._currentSettings.position==="manual"&&(this._currentSettings.buttonType===void 0||this._currentSettings.buttonType<0||n.which===this._currentSettings.buttonType)&&this._processMenuOpen(n,"manual")}_ctrlTouchStart(n){this._isEnabled&&this._currentSettings.position==="manual"&&this._processMenuOpen(n,"manual")}_processMenuOpen(n,e){if(!this._isInsideClick(n))return;n.preventDefault();let t=this;t._winScrollPos={top:document.documentElement.scrollTop,left:document.documentElement.scrollLeft};let r={cancel:!1,event:n};if(t._invokeEvent("menuOpening",r),r.cancel!==!0&&(t._addContextMenuWindow(),t._cmpRef)){t._cmpRef.resourcePath=t._currentResourcePath,t._cmpRef.allowAnimation=t.allowAnimation,t._cmpRef.colorScheme=t._currentColorScheme,t._cmpRef.customStyle=t.customStyle,t._cmpRef.itemTemplate=t.itemTemplate,t._cmpRef.options=t._currentSettings,t._cmpRef.options.mode=e,t._cmpRef.theme=t._currentTheme;let o=t._currentSettings.appSize?t._currentSettings.appSize:{width:window.innerWidth,height:window.innerHeight};e==="manual"?t._cmpRef.open(n,e,{x:0,y:0},o,t._elemRef.getBoundingClientRect()):t._cmpRef.open(n,e,{x:n.pageX,y:n.pageY},o),setTimeout(function(){window.scrollTo(t._winScrollPos.left,t._winScrollPos.top)},5),this._removeContextMenu=this._removeContextMenu.bind(this),this._cmpRef.addEventListener("closed",this._removeContextMenu),this._menuItemClick=this._menuItemClick.bind(this),this._cmpRef.addEventListener("menuClick",this._menuItemClick),this._menuItemCheckedChanged=this._menuItemCheckedChanged.bind(this),this._cmpRef.addEventListener("checkedChanged",this._menuItemCheckedChanged),e==="manual"&&n.stopPropagation()}}_addContextMenuWindow(){this._removeContextMenuWindow(),this._cmpRef=document.createElement("iui-contextmenu-win",{is:O1}),document.body.appendChild(this._cmpRef)}_removeContextMenuWindow(){this._cmpRef&&(this._cmpRef.removeEventListener("menuClick",this._menuItemClick),this._cmpRef.removeEventListener("closed",this._removeContextMenu),this._cmpRef.parentNode.removeChild(this._cmpRef)),this._cmpRef=null}findItemById(n){return this._cmpRef?this._cmpRef.findItemById(n):null}findItemByText(n){return this._cmpRef?this._cmpRef.findItemByText(n):null}firstUpdated(n){this._updateReferences()}refresh(){this._updateStyle(this.controlStyle),this._updateControlClass(),this.update(),this._updateReferences(),this._cmpRef&&this._cmpRef.refresh()}render(){return Ke`             <style>                 .iui-contextmenu-container {                     height: var(--iui-contextmenu-container-height, 100%);                     width: var(--iui-contextmenu-container-width, 100%); align-content: center;                 }                 ${this._currentCustomStyle}             </style>             <div data-ctrl="contextmenu" class="iui-contextmenu-container" style=${sn(this._getControlStyle())} @contextmenu="${n=>this._ctrlContextMenu(n)}" @mousedown="${n=>this._ctrlMouseDown(n)}" @touchstart="${n=>this._ctrlTouchStart(n)}">                 <slot></slot>             </div>         `}_updateReferences(){this._elemRef=this.shadowRoot.querySelector("div[data-ctrl=contextmenu]")}};window.customElements.define("iui-contextmenu",zP);var hs=Be`
  @import url('node_modules/@fortawesome/fontawesome-free/css/all.css');

  @font-face {
    font-family: 'FontAwesome';
    src: url('../fonts/fontawesome-webfont.eot?v=4.7.0');
    src: url('../fonts/fontawesome-webfont.eot?#iefix&v=4.7.0') format('embedded-opentype'), 
         url('../fonts/fontawesome-webfont.woff2?v=4.7.0') format('woff2'), 
         url('../fonts/fontawesome-webfont.woff?v=4.7.0') format('woff'), 
         url('../fonts/fontawesome-webfont.ttf?v=4.7.0') format('truetype'), 
         url('../fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular') format('svg');
    font-weight: normal;
    font-style: normal;
  }

  .fa {
    display: inline-block;
    font: normal normal normal 14px/1 FontAwesome;
    font-size: inherit;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .fa-spin {
    animation: fa-spin 2s infinite linear;
  }

  .fa-wrench:before {
  content: "\\f0ad";
  }

  .fa-puzzle-piece:before {
    content: "\\f12e";
  }

  .fa-n:before {
  content: "N ";
  }

  .fa-file:before {
    content: "\\f15b";
  }
  .fa-file-code:before {
  content: "\\f1c9";
  }

  .fa-plus:before {
    content: "\\f067";
  }

  .fa-trash:before {
    content: "\\f1f8";
  }

  .fa-terminal:before {
    content: "\\f120";
  }

  .fa-eye:before {
    content: "\\f06e";
  }

  .fa-download:before {
    content: "\\f019";
  }

  .fa-spinner:before {
    content: "\\f110";
  }

  .fa-gear:before {
    content: "\\f013";
  }

  .fa-question-circle:before {
    content: "\\f059"; font-size: 17px !important;
  }

  .fa-earth-africa:before {
    content: "\\f57c"; font-size: 17px !important;
  }
  
  .fa-earth-americas:before {
    content: "\\f57d"; font-size: 17px !important;
  }
  
  .fa-earth-asia:before {
    content: "\\f57e"; font-size: 17px !important;
  }
  
  .fa-globe:before {
    content: "\\f0ac"; font-size: 17px !important;
  }
  
  .fa-earth:before {
    content: "\\f7e4"; font-size: 17px !important;
  }
  
  .fa-earth-europe:before {
    content: "\\f7a2"; font-size: 17px !important;
  }
  
  .fa-earth-oceania:before {
    content: "\\f57d"; font-size: 17px !important;
  }
  
  .fa-snowflake:before {
    content: "\\f2dc"; font-size: 17px !important;
  }

  .fa-list-alt {
    font-family: 'Font Awesome 5 Free';
    font-weight: 900; /* Font Awesome Free Solid */
  }

  .fa-list-alt:before {
    content: "\\f00b"; /* Unicode for fa-table-list */
  }
  .fa-robot:before {
    content: "\\f544";
  }

  @keyframes fa-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`;var fs=Be`
  .fwcBlue {
    color: var(--fwcBlue);
  }
  .fwcOrange {
    color: var(--fwcOrange);
  }
  .fwcDarkBlue {
    color: var(--fwcDarkBlue);
  }
  .fwcGreen {
    color: var(--fwcGreen);
  }
  .fwcRed {
    color: var(--fwcRed);
  }
  
  @font-face {
    font-family: 'fwcIcons';
    src: url('../fonts/fwcIcons.eot');
    src: url('../fonts/fwcIcons.eot?#iefix') format('embedded-opentype'),
         url('../fonts/fwcIcons.woff') format('woff'),
         url('../fonts/fwcIcons.ttf') format('truetype'),
         url('../fonts/fwcIcons.svg#fwcIcons') format('svg');
    font-weight: normal;
    font-style: normal;
  }
  [class*='fwci-']:before {
    display: inline-block;
    font-family: 'fwcIcons';
    font-style: normal;
    font-weight: normal;
    line-height: 1;
    font-size: 14px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .fwci-cloud:before { content: '\\0041'; }
  .fwci-firewalls:before { content: '\\0042'; font-size: 17px !important;}
  .fwci-firewall:before { content: '\\0043'; font-size: 15px !important; }
  .fwci-filterpolicies:before { content: '\\0044'; font-size: 17px !important;}
  .fwci-input:before { content: '\\0045'; font-size: 17px !important; }
  .fwci-output:before { content: '\\0046'; font-size: 17px !important; }
  .fwci-forward:before { content: '\\0047'; font-size: 17px !important; }
  .fwci-nat:before { content: '\\0048'; font-size: 17px !important;}
  .fwci-snat:before { content: '\\0049'; font-size: 17px !important; }
  .fwci-dnat:before { content: '\\004a'; font-size: 17px !important; }
  .fwci-routing:before { content: '\\004b'; font-size: 17px !important; }
  .fwci-interfaces:before { content: '\\004c'; font-size: 17px !important; }
  .fwci-interface:before { content: '\\004d'; font-size: 17px !important; }
  .fwci-ipobjects:before { content: '\\004e'; font-size: 17px !important; }
  .fwci-addresses:before { content: '\\004f'; font-size: 17px !important; }
  .fwci-address:before { content: '\\0050'; font-size: 17px !important;}
  .fwci-addressranges:before { content: '\\0051'; font-size: 17px !important; }
  .fwci-addressrange:before { content: '\\0052'; font-size: 17px !important; }
  .fwci-networks:before { content: '\\0053'; font-size: 17px !important; }
  .fwci-network:before { content: '\\0054'; font-size: 17px !important; }
  .fwci-hosts:before { content: '\\0055'; font-size: 17px !important; }
  .fwci-host:before { content: '\\0056'; font-size: 17px !important; }
  .fwci-objectgroups:before { content: '\\0057'; font-size: 17px !important; }
  .fwci-objectgroup:before { content: '\\0058';  font-size: 17px !important;}
  .fwci-services:before { content: '\\0059';  font-size: 17px !important;}
  .fwci-ipservices:before { content: '\\005a'; font-size: 17px !important;}
  .fwci-ipservice:before { content: '\\0061'; font-size: 17px !important;}
  .fwci-tcpservices:before { content: '\\0062'; font-size: 17px !important; }
  .fwci-tcpservice:before { content: '\\0063'; font-size: 17px !important; }
  .fwci-icmpservices:before { content: '\\0064'; font-size: 17px !important; }
  .fwci-icmpservice:before { content: '\\0065'; font-size: 17px !important; }
  .fwci-udpservices:before { content: '\\0066'; font-size: 17px !important; }
  .fwci-udpservice:before { content: '\\0067'; font-size: 17px !important; }
  .fwci-servicesgroups:before { content: '\\0068'; font-size: 17px !important; }
  .fwci-servicegroup:before { content: '\\0069'; font-size: 17px !important; }
  .fwci-rule:before { content: '\\006a'; }
  .fwci-rulegroup:before { content: '\\006b'; }
  .fwci-expand:before { content: '\\006c'; }
  .fwci-collapse:before { content: '\\006d'; }
  .fwci-reload:before { content: '\\006e'; }
  .fwci-newfirewall:before { content: '\\006f'; }
  .fwci-editfirewall:before { content: '\\0070'; }
  .fwci-compilefirewall:before { content: '\\0071'; }
  .fwci-installfirewall:before { content: '\\0072'; }
  .fwci-loadpolicy:before { content: '\\0073'; }
  .fwci-newinterface:before { content: '\\0074'; }
  .fwci-newadress:before { content: '\\0075'; }
  .fwci-whereused:before { content: '\\0076'; }
  .fwci-edit:before { content: '\\0077'; }
  .fwci-delete:before { content: '\\0078'; }
  .fwci-enableposition:before { content: '\\0079'; }
  .fwci-negateposition:before { content: '\\007a'; }
  .fwci-editobject:before { content: '\\0030'; }
  .fwci-copy:before { content: '\\0031'; }
  .fwci-cut:before { content: '\\0032'; }
  .fwci-compilerule:before { content: '\\0033'; }
  .fwci-rulecolor:before { content: '\\0034'; }
  .fwci-newruleabove:before { content: '\\0035'; }
  .fwci-newrulebelow:before { content: '\\0036'; }
  .fwci-editrule:before { content: '\\0037'; }
  .fwci-enablerule:before { content: '\\0038'; }
  .fwci-disablerule:before { content: '\\0039'; }
  .fwci-deleterule:before { content: '\\0021'; }
  .fwci-movedown:before { content: '\\0022'; }
  .fwci-removegroup:before { content: '\\0023'; }
  .fwci-removefromgroup:before { content: '\\0024'; }
  .fwci-deny:before { content: '\\0025'; }
  .fwci-accept:before { content: '\\0026'; }
  .fwci-reject:before { content: '\\0027'; }
  .fwci-acounting:before { content: '\\0028'; }
  .fwci-groupname:before { content: '\\0029'; }
  .fwci-groupcolor:before { content: '\\002a'; }
  .fwci-new:before { content: '\\002b'; }
  .fwci-compileallfirewalls:before { content: '\\002c'; }
  .fwci-installallfirewalls:before { content: '\\002d'; }
  .fwci-policy:before { content: '\\002e'; font-size: 17px !important; }
  .fwci-vpn:before { content: '\\002f'; }
  .fwci-status:before { content: '\\005b'; }
  .fwci-config:before { content: '\\005c'; }
  .fwci-help:before { content: '\\005d'; }
  .fwci-logout:before { content: '\\005e'; font-size: 17px !important; }
  .fwci-compileallfirewalls2:before { content: '\\005f'; }
  .fwci-installallfirewalls2:before { content: '\\0060'; }
  .fwci-users:before { content: '\\007b'; }
  .fwci-systemconfiguration:before { content: '\\007c'; }
  .fwci-cluster:before { content: '\\007d'; font-size: 17px !important; }
  .fwci-clusters:before { content: '\\007e'; font-size: 17px !important; }                                                                                                           
  .fwci-paste:before { content: '\\003f'; }
`;var ms=Be`
  .fwcBlue {
    color: var(--fwcBlue);
  }
  .fwcOrange {
    color: var(--fwcOrange);
  }
  .fwcDarkBlue {
    color: var(--fwcDarkBlue);
  }
  .fwcGreen {
    color: var(--fwcGreen);
  }
  .fwcRed {
    color: var(--fwcRed);
  }
  
  @font-face {
      font-family: 'fwcIcons2';
      src: url('../fonts/fwcIcons2.eot');
      src: url('../fonts/fwcIcons2.eot?#iefix') format('embedded-opentype'),
          url('../fonts/fwcIcons2.woff') format('woff'),
          url('../fonts/fwcIcons2.ttf') format('truetype'),
          url('../fonts/fwcIcons2.svg#fwcIcons2') format('svg');
      font-weight: normal;
      font-style: normal;
  }
[class*='fwci2-']:before{
	display: inline-block;
   font-family: 'fwcIcons2';
   font-style: normal;
   font-weight: normal;
   line-height: 1;
   font-size:14px;
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale
}
.fwci2-cuadrado:before{content:'\\0041';}
.fwci2-moveup:before{content:'\\0042';}
.fwci2-pastebelow:before{content:'\\0043';}
.fwci2-pasteabove:before{content:'\\0044';}
.fwci2-findintree:before{content:'\\0045';}
.fwci2-firewall_to_cluster:before{content:'\\0046';}
.fwci2-cluster_to_firewall:before{content:'\\0047';}
.fwci2-cluster_clone:before{content:'\\0048';}
.fwci2-firewall_clone:before{content:'\\0049';}
.fwci2-newcluster:before{content:'\\004a';}
.fwci2-folder:before{content:'\\004b'; font-size: 17px; }
.fwci2-newfolder:before{content:'\\004c';}
.fwci2-deletefolder:before{content:'\\004d';}
.fwci2-renamefolder:before{content:'\\004e';}
.fwci2-vpn-config:before{content:'\\004f';}
.fwci2-certificate:before{content:'\\0050';}
.fwci2-new-certificate:before{content:'\\0051';}
.fwci2-delete-certificate:before{content:'\\0052';}
.fwci2-edit-certificate:before{content:'\\0053';}
.fwci2-ca:before{content:'\\0054';}
.fwci2-new-ca:before{content:'\\0055';}
.fwci2-delete-ca:before{content:'\\0056';}
.fwci2-edit-ca:before{content:'\\0057';}
.fwci2-openvpn:before{content:'\\0058'; font-size: 17px !important; }
.fwci2-openvpn-deleteconfig:before{content:'\\0059';}
.fwci2-wireguard:before{content:'\\0078'; font-size: 17px !important;}
.fwci2-ipsec:before{content:'\\0079'; font-size: 17px !important;}
.fwci2-folderstd:before{content:'\\005a'; font-size: 18px !important; }
.fwci2-edit-vpnconfig:before{content:'\\0061';}
.fwci2-file-vpnconfig:before{content:'\\0062';}
.fwci2-install-vpnconfig:before{content:'\\0063';}
.fwci2-label:before{content:'\\0064'; font-size: 17px !important; }
.fwci2-dns-in:before{content:'\\0065'; font-size: 17px !important; }
.fwci2-uninstall-vpnconfig:before{content:'\\0066';}
.fwci2-syncccd-vpnconfig:before{content:'\\0067';}
.fwci2-certificate-prefix:before{content:'\\0068';}
.fwci2-certificate-prefix-new:before{content:'\\0069';}
.fwci2-certificate-prefix-edit:before{content:'\\006a';}
.fwci2-certificate-prefix-delete:before{content:'\\006b';}
`;var z1e=["panelHeader"],K1e=["panelContent"],$1e=["sts-fwc-tree-panel",""],J1e=["*"],q1e=i=>({panelCollapsed:i}),Y1e=i=>({display:i}),Q9=(()=>{class i{constructor(e,t,r,o,s,a,l){this.elRef=e,this.renderer=t,this.fwcContextMenuService=r,this.refService=o,this.fwcTreeMenuService=s,this.store=a,this.fwcUserService=l,this.expanded=!0,this.subjectChange=new Ue,this.contextMenuStyle=[hs,ms,fs],this.applicationRef=null,this.contextMenuReference=null,this.alive=!0,this.el=e.nativeElement}ngOnInit(){this.treeContextMenu=this.fwcContextMenuService.getTreeMenus(),this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.updateContextMenuSettings()}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){let e=this;setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t}.bind(this),1)}togglePanel(){return new Promise((e,t)=>{this.expanded=!this.expanded,this.subjectChange.next(this.expanded),setTimeout(()=>{e()},300)})}setHeight(e){let t=this.divHeader.nativeElement.offsetHeight,r=e-t;this.renderer.setStyle(this.divContent.nativeElement,"height",r+"px")}getMinHeight(){return this.divHeader.nativeElement.offsetHeight}onChange(){return this.subjectChange.asObservable()}onContextMenuLoad(e){let t;this.updateContextMenuSettings(),this.header==="FIREWALLS"?this.panel_type="FDF":this.header==="OBJECTS"||this.header==="OBJETOS"?this.panel_type="FDO":this.panel_type="FDS",t=this.treeContextMenu[this.panel_type],t&&t.items?t.items.forEach(r=>{r.visible=r.id===V.TREE_RELOAD||r.id===V.TREE_REPAIR,r.id===V.TREE_REPAIR&&(r.enabled=this.fwcUserLock)}):e.detail.cancel=!0}onContextMenuHandler(e){let t={e,panel_type:this.panel_type};this.fwcTreeMenuService.forwardSelection.next(t)}updateContextMenuSettings(){this.fwcUserLock=this.fwcUserService.getActualFwcUser().lockInfo.result,this.header==="FIREWALLS"?this.currentSettings=this.treeContextMenu.FDF:this.header==="OBJECTS"||this.header==="OBJETOS"?this.currentSettings=this.treeContextMenu.FDO:this.currentSettings=this.treeContextMenu.FDS}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(Am),S(Ts),S(I1),S(nt),S(at))}}static{this.\u0275cmp=se({type:i,selectors:[["","sts-fwc-tree-panel",""]],viewQuery:function(t,r){if(t&1&&(le(z1e,5),le(K1e,5)),t&2){let o;te(o=ie())&&(r.divHeader=o.first),te(o=ie())&&(r.divContent=o.first)}},inputs:{header:"header",expanded:"expanded"},features:[et([En])],attrs:$1e,ngContentSelectors:J1e,decls:11,vars:12,consts:[["panelHeader",""],["contextMenu",""],["panelContent",""],[1,"fwcTreePanel-header",3,"click","ngClass"],[3,"menuOpening","menuClick","settings","allowAnimation","customStyle","colorScheme"],[1,"pi",3,"ngClass"],[1,"fwcTreePanel-content",3,"ngStyle"]],template:function(t,r){if(t&1){let o=L();$i(),m(0,"div",3,0),k("click",function(){return y(o),w(r.togglePanel())}),m(2,"iui-contextmenu",4,1),k("menuOpening",function(a){return y(o),w(r.onContextMenuLoad(a))})("menuClick",function(a){return y(o),w(r.onContextMenuHandler(a))}),m(4,"div")(5,"span"),F(6),g(),P(7,"i",5),g()()(),m(8,"div",6,2),hi(10),g()}t&2&&(f("ngClass",ne(8,q1e,!r.expanded)),p(2),f("settings",r.currentSettings)("allowAnimation",!1)("customStyle",r.contextMenuStyle)("colorScheme",r.currentColorScheme),p(4),$(r.header),p(),f("ngClass",r.expanded?"pi-chevron-down":"pi-chevron-right"),p(),f("ngStyle",ne(10,Y1e,r.expanded?"block":"none")))},dependencies:[je,De],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.fwcTreePanel-header[_ngcontent-%COMP%]{background:var(--fwcBlue);color:var(--fixedWhiteColor);font-size:.9rem;padding:.5rem;border-bottom:1px solid var(--fwcWhite)}.fwcTreePanel-header.panelCollapsed[_ngcontent-%COMP%]{background:var(--fwcDarkBlue2)}.fwcTreePanel-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Montserrat,arial,sans-serif;display:inline-block;width:calc(100% - 1.3em);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.fwcTreePanel-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right}.fwcTreePanel-content[_ngcontent-%COMP%]{transition:all .3s linear}"]})}}return i})();var Ha=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["MinusIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},dependencies:[it],encapsulation:2})}return i})();var Q1e=["*",[["p-header"]],[["p-footer"]]],Z1e=["*","p-header","p-footer"],eSe=(i,n)=>({"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":n}),tSe=i=>({transitionParams:i,height:"0",opacity:"0"}),iSe=i=>({value:"hidden",params:i}),nSe=i=>({transitionParams:i,height:"*",opacity:"1"}),rSe=i=>({value:"visible",params:i}),oSe=(i,n,e)=>({"p-panel-icons-start":i,"p-panel-icons-end":n,"p-panel-icons-center":e}),sSe=i=>({$implicit:i});function aSe(i,n){if(i&1&&(m(0,"span",10),F(1),g()),i&2){let e=u(2);G("id",e.id+"_header"),p(),$(e.header)}}function lSe(i,n){i&1&&ue(0)}function cSe(i,n){}function dSe(i,n){i&1&&v(0,cSe,0,0,"ng-template")}function pSe(i,n){if(i&1&&P(0,"span",16),i&2){let e=u(5);ce(e.expandIcon),f("ngClass",e.iconClass)}}function uSe(i,n){if(i&1&&P(0,"MinusIcon",17),i&2){let e=u(5);f("styleClass",e.iconClass)}}function hSe(i,n){if(i&1&&(he(0),v(1,pSe,1,3,"span",14)(2,uSe,1,1,"MinusIcon",15),fe()),i&2){let e=u(4);p(),f("ngIf",e.expandIcon),p(),f("ngIf",!e.expandIcon)}}function fSe(i,n){if(i&1&&P(0,"span",16),i&2){let e=u(5);ce(e.collapseIcon),f("ngClass",e.iconClass)}}function mSe(i,n){if(i&1&&P(0,"PlusIcon",17),i&2){let e=u(5);f("styleClass",e.iconClass)}}function gSe(i,n){if(i&1&&(he(0),v(1,fSe,1,3,"span",14)(2,mSe,1,1,"PlusIcon",15),fe()),i&2){let e=u(4);p(),f("ngIf",e.collapseIcon),p(),f("ngIf",!e.collapseIcon)}}function _Se(i,n){if(i&1&&(he(0),v(1,hSe,3,2,"ng-container",12)(2,gSe,3,2,"ng-container",12),fe()),i&2){let e=u(3);p(),f("ngIf",!e.collapsed),p(),f("ngIf",e.collapsed)}}function CSe(i,n){}function ISe(i,n){i&1&&v(0,CSe,0,0,"ng-template")}function ySe(i,n){if(i&1){let e=L();m(0,"button",11),k("click",function(r){y(e);let o=u(2);return w(o.onIconClick(r))})("keydown",function(r){y(e);let o=u(2);return w(o.onKeyDown(r))}),v(1,_Se,3,2,"ng-container",12)(2,ISe,1,0,null,13),g()}if(i&2){let e=u(2);G("id",e.id+"_header")("aria-label",e.buttonAriaLabel)("aria-controls",e.id+"_content")("aria-expanded",!e.collapsed),p(),f("ngIf",!e.headerIconTemplate),p(),f("ngTemplateOutlet",e.headerIconTemplate)("ngTemplateOutletContext",ne(7,sSe,e.collapsed))}}function wSe(i,n){if(i&1){let e=L();m(0,"div",6),k("click",function(r){y(e);let o=u();return w(o.onHeaderClick(r))}),v(1,aSe,2,2,"span",7),hi(2,1),v(3,lSe,1,0,"ng-container",4),m(4,"div",8),v(5,dSe,1,0,null,4)(6,ySe,3,9,"button",9),g()()}if(i&2){let e=u();G("id",e.id+"-titlebar"),p(),f("ngIf",e.header),p(2),f("ngTemplateOutlet",e.headerTemplate),p(),f("ngClass",en(6,oSe,e.iconPos==="start",e.iconPos==="end",e.iconPos==="center")),p(),f("ngTemplateOutlet",e.iconTemplate),p(),f("ngIf",e.toggleable)}}function vSe(i,n){i&1&&ue(0)}function bSe(i,n){i&1&&ue(0)}function SSe(i,n){if(i&1&&(m(0,"div",18),hi(1,2),v(2,bSe,1,0,"ng-container",4),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.footerTemplate)}}var yPt=(()=>{class i{el;cd;toggleable;header;collapsed;style;styleClass;iconPos="end";expandIcon;collapseIcon;showHeader=!0;toggler="icon";transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new X;onBeforeToggle=new X;onAfterToggle=new X;footerFacet;templates;iconTemplate;animating;headerTemplate;contentTemplate;footerTemplate;headerIconTemplate;id=Tt();get buttonAriaLabel(){return this.header}constructor(e,t){this.el=e,this.cd=t}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template;break;case"headericons":this.headerIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}onHeaderClick(e){this.toggler==="header"&&this.toggle(e)}onIconClick(e){this.toggler==="icon"&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand():this.collapse()),this.cd.markForCheck(),e.preventDefault()}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onKeyDown(e){(e.code==="Enter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}static \u0275fac=function(t){return new(t||i)(S(Ze),S(we))};static \u0275cmp=se({type:i,selectors:[["p-panel"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.footerFacet=s.first),te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:[2,"toggleable","toggleable",Y],header:"header",collapsed:[2,"collapsed","collapsed",Y],style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:[2,"showHeader","showHeader",Y],toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},features:[tt],ngContentSelectors:Z1e,decls:7,vars:25,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content",3,"id"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],[1,"p-panel-icons",3,"ngClass"],["pRipple","","type","button","role","button","class","p-panel-header-icon p-panel-toggler p-link",3,"click","keydown",4,"ngIf"],[1,"p-panel-title"],["pRipple","","type","button","role","button",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"class","ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"ngClass"],[3,"styleClass"],[1,"p-panel-footer"]],template:function(t,r){t&1&&($i(Q1e),m(0,"div",0),v(1,wSe,7,10,"div",1),m(2,"div",2),k("@panelContent.done",function(s){return r.onToggleDone(s)}),m(3,"div",3),hi(4),v(5,vSe,1,0,"ng-container",4),g(),v(6,SSe,3,1,"div",5),g()()),t&2&&(ce(r.styleClass),f("ngClass",Qe(14,eSe,r.toggleable,!r.collapsed&&r.toggleable))("ngStyle",r.style),G("id",r.id)("data-pc-name","panel"),p(),f("ngIf",r.showHeader),p(),f("id",r.id+"_content")("@panelContent",r.collapsed?ne(19,iSe,ne(17,tSe,r.animating?r.transitionOptions:"0ms")):ne(23,rSe,ne(21,nSe,r.animating?r.transitionOptions:"0ms"))),G("aria-labelledby",r.id+"_header")("aria-hidden",r.collapsed)("tabindex",r.collapsed?"-1":void 0),p(3),f("ngTemplateOutlet",r.contentTemplate),p(),f("ngIf",r.footerFacet||r.footerTemplate))},dependencies:()=>[je,rt,mt,De,nn,Qs,Ha],styles:[`@layer primeng{.p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}}
`],encapsulation:2,data:{animation:[Tn("panelContent",[Yr("hidden",qt({height:"0"})),Yr("void",qt({height:"{{height}}"}),{params:{height:"0"}}),Yr("visible",qt({height:"*"})),ci("visible <=> hidden",[li("{{transitionParams}}")]),ci("void => hidden",li("{{transitionParams}}")),ci("void => visible",li("{{transitionParams}}"))])]},changeDetection:0})}return i})(),KP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,ln,Qs,Ha,dt]})}return i})();var ESe=["content"],ASe=[[["p-footer"]]],xSe=["p-footer"],TSe=i=>({"p-dialog p-confirm-dialog p-component":!0,"p-dialog-rtl":i}),OSe=(i,n)=>({transform:i,transition:n}),RSe=i=>({value:"visible",params:i}),Z9=i=>({$implicit:i}),PSe=()=>({"p-dialog-header-icon p-dialog-header-close p-link":!0});function DSe(i,n){i&1&&ue(0)}function FSe(i,n){if(i&1&&(he(0),v(1,DSe,1,0,"ng-container",7),fe()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.headlessTemplate)("ngTemplateOutletContext",ne(2,Z9,e.confirmation))}}function kSe(i,n){i&1&&ue(0)}function NSe(i,n){if(i&1&&(m(0,"div",14),v(1,kSe,1,0,"ng-container",15),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.headerTemplate)}}function LSe(i,n){if(i&1&&(m(0,"span",19),F(1),g()),i&2){let e=u(5);f("id",e.ariaLabelledBy),p(),$(e.option("header"))}}function MSe(i,n){if(i&1){let e=L();m(0,"button",20),k("click",function(r){y(e);let o=u(5);return w(o.close(r))})("keydown.enter",function(r){y(e);let o=u(5);return w(o.close(r))}),P(1,"TimesIcon"),g()}if(i&2){let e=u(5);f("ngClass",Ae(2,PSe)),G("aria-label",e.closeAriaLabel)}}function VSe(i,n){if(i&1&&(m(0,"div",14),v(1,LSe,2,2,"span",16),m(2,"div",17),v(3,MSe,2,3,"button",18),g()()),i&2){let e=u(4);p(),f("ngIf",e.option("header")),p(2),f("ngIf",e.closable)}}function BSe(i,n){if(i&1&&P(0,"i",3),i&2){let e=u(4);ce(e.option("icon")),f("ngClass","p-confirm-dialog-icon")}}function USe(i,n){}function jSe(i,n){i&1&&v(0,USe,0,0,"ng-template")}function GSe(i,n){if(i&1&&(he(0),v(1,jSe,1,0,null,15),fe()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.iconTemplate)}}function HSe(i,n){if(i&1&&P(0,"span",21),i&2){let e=u(4);f("innerHTML",e.option("message"),an)}}function WSe(i,n){}function zSe(i,n){i&1&&v(0,WSe,0,0,"ng-template")}function KSe(i,n){if(i&1&&(he(0),v(1,zSe,1,0,null,7),fe()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.messageTemplate)("ngTemplateOutletContext",ne(2,Z9,e.confirmation))}}function $Se(i,n){i&1&&ue(0)}function JSe(i,n){if(i&1&&(m(0,"div",22),hi(1),v(2,$Se,1,0,"ng-container",15),g()),i&2){let e=u(4);p(2),f("ngTemplateOutlet",e.footerTemplate)}}function qSe(i,n){if(i&1&&P(0,"i"),i&2){let e=u(7);ce(e.option("rejectIcon"))}}function YSe(i,n){i&1&&P(0,"TimesIcon",28),i&2&&f("styleClass","p-button-icon-left")}function XSe(i,n){if(i&1&&(he(0),v(1,qSe,1,2,"i",26)(2,YSe,1,1,"TimesIcon",27),fe()),i&2){let e=u(6);p(),f("ngIf",e.option("rejectIcon")),p(),f("ngIf",!e.option("rejectIcon"))}}function QSe(i,n){}function ZSe(i,n){i&1&&v(0,QSe,0,0,"ng-template")}function eEe(i,n){if(i&1&&(m(0,"span",29),v(1,ZSe,1,0,null,15),g()),i&2){let e=u(6);p(),f("ngTemplateOutlet",e.rejectIconTemplate)}}function tEe(i,n){if(i&1){let e=L();m(0,"button",24),k("click",function(){y(e);let r=u(5);return w(r.reject())}),v(1,XSe,3,2,"ng-container",11)(2,eEe,2,1,"span",25),g()}if(i&2){let e=u(5);ce(e.option("rejectButtonStyleClass")),f("label",e.rejectButtonLabel)("ngClass","p-confirm-dialog-reject"),G("aria-label",e.rejectAriaLabel),p(),f("ngIf",!e.rejectIconTemplate),p(),f("ngIf",e.rejectIconTemplate)}}function iEe(i,n){if(i&1&&P(0,"i"),i&2){let e=u(7);ce(e.option("acceptIcon"))}}function nEe(i,n){i&1&&P(0,"CheckIcon",28),i&2&&f("styleClass","p-button-icon-left")}function rEe(i,n){if(i&1&&(he(0),v(1,iEe,1,2,"i",26)(2,nEe,1,1,"CheckIcon",27),fe()),i&2){let e=u(6);p(),f("ngIf",e.option("acceptIcon")),p(),f("ngIf",!e.option("acceptIcon"))}}function oEe(i,n){}function sEe(i,n){i&1&&v(0,oEe,0,0,"ng-template")}function aEe(i,n){if(i&1&&(m(0,"span",29),v(1,sEe,1,0,null,15),g()),i&2){let e=u(6);p(),f("ngTemplateOutlet",e.acceptIconTemplate)}}function lEe(i,n){if(i&1){let e=L();m(0,"button",24),k("click",function(){y(e);let r=u(5);return w(r.accept())}),v(1,rEe,3,2,"ng-container",11)(2,aEe,2,1,"span",25),g()}if(i&2){let e=u(5);ce(e.option("acceptButtonStyleClass")),f("label",e.acceptButtonLabel)("ngClass","p-confirm-dialog-accept"),G("aria-label",e.acceptAriaLabel),p(),f("ngIf",!e.acceptIconTemplate),p(),f("ngIf",e.acceptIconTemplate)}}function cEe(i,n){if(i&1&&(m(0,"div",22),v(1,tEe,3,7,"button",23)(2,lEe,3,7,"button",23),g()),i&2){let e=u(4);p(),f("ngIf",e.option("rejectVisible")),p(),f("ngIf",e.option("acceptVisible"))}}function dEe(i,n){if(i&1&&(v(0,NSe,2,1,"div",8)(1,VSe,4,2,"div",8),m(2,"div",9,1),v(4,BSe,1,3,"i",10)(5,GSe,2,1,"ng-container",11)(6,HSe,1,1,"span",12)(7,KSe,2,4,"ng-container",11),g(),v(8,JSe,3,1,"div",13)(9,cEe,3,2,"div",13)),i&2){let e=u(3);f("ngIf",e.headerTemplate),p(),f("ngIf",!e.headerTemplate),p(3),f("ngIf",!e.iconTemplate&&e.option("icon")),p(),f("ngIf",e.iconTemplate),p(),f("ngIf",!e.messageTemplate),p(),f("ngIf",e.messageTemplate),p(),f("ngIf",e.footer||e.footerTemplate),p(),f("ngIf",!e.footer&&!e.footerTemplate)}}function pEe(i,n){if(i&1){let e=L();m(0,"div",5),k("@animation.start",function(r){y(e);let o=u(2);return w(o.onAnimationStart(r))})("@animation.done",function(r){y(e);let o=u(2);return w(o.onAnimationEnd(r))}),v(1,FSe,2,4,"ng-container",6)(2,dEe,10,8,"ng-template",null,0,Bt),g()}if(i&2){let e=He(3),t=u(2);ce(t.styleClass),f("ngClass",ne(9,TSe,t.rtl))("ngStyle",t.style)("@animation",ne(14,RSe,Qe(11,OSe,t.transformOptions,t.transitionOptions))),G("aria-labelledby",t.ariaLabelledBy)("aria-modal",!0),p(),f("ngIf",t.headlessTemplate)("ngIfElse",e)}}function uEe(i,n){if(i&1&&(m(0,"div",3),v(1,pEe,4,16,"div",4),g()),i&2){let e=u();ce(e.maskStyleClass),f("ngClass",e.getMaskClass()),p(),f("ngIf",e.visible)}}var hEe=tl([qt({transform:"{{transform}}",opacity:0}),li("{{transition}}",qt({transform:"none",opacity:1}))]),fEe=tl([li("{{transition}}",qt({transform:"{{transform}}",opacity:0}))]),GPt=(()=>{class i{el;renderer;confirmationService;zone;cd;config;document;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo;key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"top-left":case"bottom-left":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"top-right":case"bottom-right":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}onHide=new X;footer;contentViewChild;templates;ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"message":this.messageTemplate=e.template;break;case"icon":this.iconTemplate=e.template;break;case"rejecticon":this.rejectIconTemplate=e.template;break;case"accepticon":this.acceptIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break}})}headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;confirmation;_visible;_style;maskVisible;documentEscapeListener;container;wrapper;contentContainer;subscription;maskClickListener;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=Tt();ariaLabelledBy=this.getAriaLabelledBy();confirmationOptions;translationSubscription;constructor(e,t,r,o,s,a,l){this.el=e,this.renderer=t,this.confirmationService=r,this.zone=o,this.cd=s,this.config=a,this.document=l,this.subscription=this.confirmationService.requireConfirmation$.subscribe(c=>{if(!c){this.hide();return}c.key===this.key&&(this.confirmation=c,this.confirmationOptions={message:this.confirmation.message||this.message,icon:this.confirmation.icon||this.icon,header:this.confirmation.header||this.header,rejectVisible:this.confirmation.rejectVisible==null?this.rejectVisible:this.confirmation.rejectVisible,acceptVisible:this.confirmation.acceptVisible==null?this.acceptVisible:this.confirmation.acceptVisible,acceptLabel:this.confirmation.acceptLabel||this.acceptLabel,rejectLabel:this.confirmation.rejectLabel||this.rejectLabel,acceptIcon:this.confirmation.acceptIcon||this.acceptIcon,rejectIcon:this.confirmation.rejectIcon||this.rejectIcon,acceptButtonStyleClass:this.confirmation.acceptButtonStyleClass||this.acceptButtonStyleClass,rejectButtonStyleClass:this.confirmation.rejectButtonStyleClass||this.rejectButtonStyleClass,defaultFocus:this.confirmation.defaultFocus||this.defaultFocus,blockScroll:this.confirmation.blockScroll===!1||this.confirmation.blockScroll===!0?this.confirmation.blockScroll:this.blockScroll,closeOnEscape:this.confirmation.closeOnEscape===!1||this.confirmation.closeOnEscape===!0?this.confirmation.closeOnEscape:this.closeOnEscape,dismissableMask:this.confirmation.dismissableMask===!1||this.confirmation.dismissableMask===!0?this.confirmation.dismissableMask:this.dismissableMask},this.confirmation.accept&&(this.confirmation.acceptEvent=new X,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new X,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}getAriaLabelledBy(){return this.header!==null?Tt()+"_header":null}option(e){let t=this.confirmationOptions||this;if(t.hasOwnProperty(e))return t[e]}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.contentContainer=j.findSingle(this.container,".p-dialog-content"),this.container?.setAttribute(this.id,""),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.enableModality();let t=this.getElementToFocus();t&&t.focus();break}}onAnimationEnd(e){switch(e.toState){case"void":this.onOverlayHide();break}}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return j.findSingle(this.container,".p-confirm-dialog-accept");case"reject":return j.findSingle(this.container,".p-confirm-dialog-reject");case"close":return j.findSingle(this.container,".p-dialog-header-close");case"none":return null;default:return j.findSingle(this.container,".p-confirm-dialog-accept")}}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.document.body.appendChild(this.wrapper):j.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.wrapper&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}enableModality(){this.option("blockScroll")&&j.addClass(this.document.body,"p-overflow-hidden"),this.option("dismissableMask")&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)}))}disableModality(){this.maskVisible=!1,this.option("blockScroll")&&j.removeClass(this.document.body,"p-overflow-hidden"),this.dismissableMask&&this.unbindMaskClickListener(),this.container&&!this.cd.destroyed&&this.cd.detectChanges()}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",j.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.document.head.appendChild(this.styleElement);let e="";for(let t in this.breakpoints)e+=`
                    @media screen and (max-width: ${t}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[t]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e}}close(e){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(nh.CANCEL),this.hide(nh.CANCEL),e.preventDefault()}hide(e){this.onHide.emit(e),this.visible=!1,this.confirmation=null,this.confirmationOptions=null}moveOnTop(){this.autoZIndex&&(bi.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}getMaskClass(){let e={"p-dialog-mask p-component-overlay":!0,"p-dialog-mask-scrollblocker":this.blockScroll};return e[this.getPositionClass().toString()]=!0,e}getPositionClass(){let t=["left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find(r=>r===this.position);return t?`p-dialog-${t}`:""}bindGlobalListeners(){if(this.option("closeOnEscape")&&this.closable||this.focusTrap&&!this.documentEscapeListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",t=>{if(t.which==27&&this.option("closeOnEscape")&&this.closable&&parseInt(this.container.style.zIndex)===bi.get(this.container)&&this.visible&&this.close(t),t.which===9&&this.focusTrap){t.preventDefault();let r=j.getFocusableElements(this.container);if(r&&r.length>0)if(!r[0].ownerDocument.activeElement)r[0].focus();else{let o=r.indexOf(r[0].ownerDocument.activeElement);t.shiftKey?o==-1||o===0?r[r.length-1].focus():r[o-1].focus():o==-1||o===r.length-1?r[0].focus():r[o+1].focus()}}})}}unbindGlobalListeners(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}onOverlayHide(){this.container&&this.autoZIndex&&bi.clear(this.container),this.disableModality(),this.unbindGlobalListeners(),this.container=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.restoreAppend(),this.onOverlayHide(),this.subscription.unsubscribe(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle()}accept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(nh.ACCEPT)}reject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(nh.REJECT),this.hide(nh.REJECT)}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(Di.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(Di.REJECT)}static \u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(Jt),S(Lt),S(we),S(Ht),S(At))};static \u0275cmp=se({type:i,selectors:[["p-confirmDialog"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.footer=s.first),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(ESe,5),t&2){let o;te(o=ie())&&(r.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",Y],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",Y],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",Y],dismissableMask:[2,"dismissableMask","dismissableMask",Y],blockScroll:[2,"blockScroll","blockScroll",Y],rtl:[2,"rtl","rtl",Y],closable:[2,"closable","closable",Y],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",Y],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position"},outputs:{onHide:"onHide"},features:[tt],ngContentSelectors:xSe,decls:1,vars:1,consts:[["notHeadless",""],["content",""],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["role","alertdialog",3,"ngClass","ngStyle","class",4,"ngIf"],["role","alertdialog",3,"ngClass","ngStyle"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-dialog-header",4,"ngIf"],[1,"p-dialog-content"],[3,"ngClass","class",4,"ngIf"],[4,"ngIf"],["class","p-confirm-dialog-message",3,"innerHTML",4,"ngIf"],["class","p-dialog-footer",4,"ngIf"],[1,"p-dialog-header"],[4,"ngTemplateOutlet"],["class","p-dialog-title",3,"id",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","role","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title",3,"id"],["type","button","role","button",3,"click","keydown.enter","ngClass"],[1,"p-confirm-dialog-message",3,"innerHTML"],[1,"p-dialog-footer"],["type","button","pRipple","","pButton","",3,"label","ngClass","class","click",4,"ngIf"],["type","button","pRipple","","pButton","",3,"click","label","ngClass"],["class","p-button-icon-left",4,"ngIf"],[3,"class",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon-left"]],template:function(t,r){t&1&&($i(ASe),v(0,uEe,2,4,"div",2)),t&2&&f("ngIf",r.maskVisible)},dependencies:()=>[je,rt,mt,De,pt,nn,Ji,On],styles:[`@layer primeng{.p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}}
`],encapsulation:2,data:{animation:[Tn("animation",[ci("void => visible",[il(hEe)]),ci("visible => void",[il(fEe)])])]},changeDetection:0})}return i})(),$P=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ro,ln,Ji,On,ro,dt]})}return i})();var tG=i=>({"p-treenode-droppoint-active":i}),mEe=(i,n)=>["p-treenode",i,n],iG=i=>({height:i}),gEe=i=>({"padding-left":i}),_Ee=(i,n,e)=>({"p-treenode-selectable":i,"p-treenode-dragover":n,"p-highlight":e}),R1=i=>({$implicit:i}),CEe=(i,n)=>({"p-checkbox-disabled p-disabled":i,"p-variant-filled":n}),IEe=(i,n)=>({"p-highlight":i,"p-indeterminate":n}),yEe=(i,n)=>({$implicit:i,partialSelected:n}),nG=i=>({display:i}),wEe=i=>({"p-treenode-collapsed":i}),vEe=(i,n)=>({"p-treenode-selectable":i,"p-highlight":n}),eG=i=>({"p-treenode-connector-line":i});function bEe(i,n){if(i&1){let e=L();m(0,"li",4),k("drop",function(r){y(e);let o=u(2);return w(o.onDropPoint(r,-1))})("dragover",function(r){y(e);let o=u(2);return w(o.onDropPointDragOver(r))})("dragenter",function(r){y(e);let o=u(2);return w(o.onDropPointDragEnter(r,-1))})("dragleave",function(r){y(e);let o=u(2);return w(o.onDropPointDragLeave(r))}),g()}if(i&2){let e=u(2);f("ngClass",ne(2,tG,e.draghoverPrev)),G("aria-hidden",!0)}}function SEe(i,n){i&1&&P(0,"ChevronRightIcon",14),i&2&&f("styleClass","p-tree-toggler-icon")}function EEe(i,n){i&1&&P(0,"ChevronDownIcon",14),i&2&&f("styleClass","p-tree-toggler-icon")}function AEe(i,n){if(i&1&&(he(0),v(1,SEe,1,1,"ChevronRightIcon",13)(2,EEe,1,1,"ChevronDownIcon",13),fe()),i&2){let e=u(4);p(),f("ngIf",!e.node.expanded),p(),f("ngIf",e.node.expanded)}}function xEe(i,n){i&1&&(he(0),P(1,"SpinnerIcon",15),fe()),i&2&&(p(),f("spin",!0)("styleClass","p-tree-node-toggler-icon"))}function TEe(i,n){if(i&1&&(he(0),v(1,AEe,3,2,"ng-container",8)(2,xEe,2,2,"ng-container",8),fe()),i&2){let e=u(3);p(),f("ngIf",!e.node.loading),p(),f("ngIf",e.loadingMode==="icon"&&e.node.loading)}}function OEe(i,n){}function REe(i,n){i&1&&v(0,OEe,0,0,"ng-template")}function PEe(i,n){if(i&1&&(m(0,"span",16),v(1,REe,1,0,null,17),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.tree.togglerIconTemplate)("ngTemplateOutletContext",ne(2,R1,e.node.expanded))}}function DEe(i,n){i&1&&P(0,"CheckIcon",14),i&2&&f("styleClass","p-checkbox-icon")}function FEe(i,n){i&1&&P(0,"MinusIcon",14),i&2&&f("styleClass","p-checkbox-icon")}function kEe(i,n){if(i&1&&(he(0),v(1,DEe,1,1,"CheckIcon",13)(2,FEe,1,1,"MinusIcon",13),fe()),i&2){let e=u(4);p(),f("ngIf",!e.node.partialSelected&&e.isSelected()),p(),f("ngIf",e.node.partialSelected)}}function NEe(i,n){}function LEe(i,n){i&1&&v(0,NEe,0,0,"ng-template")}function MEe(i,n){if(i&1&&(m(0,"div",18)(1,"div",19),v(2,kEe,3,2,"ng-container",8)(3,LEe,1,0,null,17),g()()),i&2){let e=u(3);f("ngClass",Qe(5,CEe,e.node.selectable===!1,(e.tree==null?null:e.tree.config.inputStyle())==="filled")),p(),f("ngClass",Qe(8,IEe,e.isSelected(),e.node.partialSelected)),p(),f("ngIf",!e.tree.checkboxIconTemplate),p(),f("ngTemplateOutlet",e.tree.checkboxIconTemplate)("ngTemplateOutletContext",Qe(11,yEe,e.isSelected(),e.node.partialSelected))}}function VEe(i,n){if(i&1&&P(0,"span"),i&2){let e=u(3);ce(e.getIcon())}}function BEe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(3);p(),$(e.node.label)}}function UEe(i,n){i&1&&ue(0)}function jEe(i,n){if(i&1&&(m(0,"span"),v(1,UEe,1,0,"ng-container",17),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",ne(2,R1,e.node))}}function GEe(i,n){if(i&1&&P(0,"p-treeNode",22),i&2){let e=n.$implicit,t=n.first,r=n.last,o=n.index,s=u(4);f("node",e)("parentNode",s.node)("firstChild",t)("lastChild",r)("index",o)("itemSize",s.itemSize)("level",s.level+1)("loadingMode",s.loadingMode)}}function HEe(i,n){if(i&1&&(m(0,"ul",20),v(1,GEe,1,8,"p-treeNode",21),g()),i&2){let e=u(3);f("ngStyle",ne(3,nG,e.node.expanded?"block":"none")),p(),f("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}function WEe(i,n){if(i&1){let e=L();m(0,"li",5),k("keydown",function(r){y(e);let o=u(2);return w(o.onKeyDown(r))}),m(1,"div",6),k("click",function(r){y(e);let o=u(2);return w(o.onNodeClick(r))})("contextmenu",function(r){y(e);let o=u(2);return w(o.onNodeRightClick(r))})("touchend",function(){y(e);let r=u(2);return w(r.onNodeTouchEnd())})("drop",function(r){y(e);let o=u(2);return w(o.onDropNode(r))})("dragover",function(r){y(e);let o=u(2);return w(o.onDropNodeDragOver(r))})("dragenter",function(r){y(e);let o=u(2);return w(o.onDropNodeDragEnter(r))})("dragleave",function(r){y(e);let o=u(2);return w(o.onDropNodeDragLeave(r))})("dragstart",function(r){y(e);let o=u(2);return w(o.onDragStart(r))})("dragend",function(r){y(e);let o=u(2);return w(o.onDragStop(r))}),m(2,"button",7),k("click",function(r){y(e);let o=u(2);return w(o.toggle(r))}),v(3,TEe,3,2,"ng-container",8)(4,PEe,2,4,"span",9),g(),v(5,MEe,4,14,"div",10)(6,VEe,1,2,"span",3),m(7,"span",11),v(8,BEe,2,1,"span",8)(9,jEe,2,4,"span",8),g()(),v(10,HEe,2,5,"ul",12),g()}if(i&2){let e=u(2);st(e.node.style),f("ngClass",Qe(24,mEe,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",ne(27,iG,e.itemSize+"px")),G("aria-label",e.node.label)("aria-checked",e.ariaChecked)("aria-setsize",e.node.children?e.node.children.length:0)("aria-selected",e.ariaSelected)("aria-expanded",e.node.expanded)("aria-posinset",e.index+1)("aria-level",e.level+1)("tabindex",e.index===0?0:-1)("data-id",e.node.key),p(),f("ngStyle",ne(29,gEe,e.level*e.indentation+"rem"))("draggable",e.tree.draggableNodes)("ngClass",en(31,_Ee,e.tree.selectionMode&&e.node.selectable!==!1,e.draghoverNode,e.isSelected())),p(),G("data-pc-section","toggler"),p(),f("ngIf",!e.tree.togglerIconTemplate),p(),f("ngIf",e.tree.togglerIconTemplate),p(),f("ngIf",e.tree.selectionMode=="checkbox"),p(),f("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),p(2),f("ngIf",!e.tree.getTemplateForNode(e.node)),p(),f("ngIf",e.tree.getTemplateForNode(e.node)),p(),f("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function zEe(i,n){if(i&1){let e=L();m(0,"li",4),k("drop",function(r){y(e);let o=u(2);return w(o.onDropPoint(r,1))})("dragover",function(r){y(e);let o=u(2);return w(o.onDropPointDragOver(r))})("dragenter",function(r){y(e);let o=u(2);return w(o.onDropPointDragEnter(r,1))})("dragleave",function(r){y(e);let o=u(2);return w(o.onDropPointDragLeave(r))}),g()}if(i&2){let e=u(2);f("ngClass",ne(2,tG,e.draghoverNext)),G("aria-hidden",!0)}}function KEe(i,n){if(i&1&&(m(0,"td",28)(1,"table",29)(2,"tbody")(3,"tr"),P(4,"td",30),g(),m(5,"tr"),P(6,"td",30),g()()()()),i&2){let e=u(3);p(4),f("ngClass",ne(2,eG,!e.firstChild)),p(2),f("ngClass",ne(4,eG,!e.lastChild))}}function $Ee(i,n){if(i&1&&P(0,"PlusIcon",33),i&2){let e=u(5);f("styleClass","p-tree-toggler-icon")("ariaLabel",e.tree.togglerAriaLabel)}}function JEe(i,n){if(i&1&&P(0,"MinusIcon",33),i&2){let e=u(5);f("styleClass","p-tree-toggler-icon")("ariaLabel",e.tree.togglerAriaLabel)}}function qEe(i,n){if(i&1&&(he(0),v(1,$Ee,1,2,"PlusIcon",32)(2,JEe,1,2,"MinusIcon",32),fe()),i&2){let e=u(4);p(),f("ngIf",!e.node.expanded),p(),f("ngIf",e.node.expanded)}}function YEe(i,n){}function XEe(i,n){i&1&&v(0,YEe,0,0,"ng-template")}function QEe(i,n){if(i&1&&(m(0,"span",16),v(1,XEe,1,0,null,17),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.tree.togglerIconTemplate)("ngTemplateOutletContext",ne(2,R1,e.node.expanded))}}function ZEe(i,n){if(i&1){let e=L();m(0,"span",31),k("click",function(r){y(e);let o=u(3);return w(o.toggle(r))}),v(1,qEe,3,2,"ng-container",8)(2,QEe,2,4,"span",9),g()}if(i&2){let e=u(3);f("ngClass","p-tree-toggler"),p(),f("ngIf",!e.tree.togglerIconTemplate),p(),f("ngIf",e.tree.togglerIconTemplate)}}function eAe(i,n){if(i&1&&P(0,"span"),i&2){let e=u(3);ce(e.getIcon())}}function tAe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(3);p(),$(e.node.label)}}function iAe(i,n){i&1&&ue(0)}function nAe(i,n){if(i&1&&(m(0,"span"),v(1,iAe,1,0,"ng-container",17),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",ne(2,R1,e.node))}}function rAe(i,n){if(i&1&&P(0,"p-treeNode",37),i&2){let e=n.$implicit,t=n.first,r=n.last;f("node",e)("firstChild",t)("lastChild",r)}}function oAe(i,n){if(i&1&&(m(0,"td",34)(1,"div",35),v(2,rAe,1,3,"p-treeNode",36),g()()),i&2){let e=u(3);f("ngStyle",ne(3,nG,e.node.expanded?"table-cell":"none")),p(2),f("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}function sAe(i,n){if(i&1){let e=L();m(0,"table")(1,"tbody")(2,"tr"),v(3,KEe,7,6,"td",23),m(4,"td",24)(5,"div",25),k("click",function(r){y(e);let o=u(2);return w(o.onNodeClick(r))})("contextmenu",function(r){y(e);let o=u(2);return w(o.onNodeRightClick(r))})("touchend",function(){y(e);let r=u(2);return w(r.onNodeTouchEnd())})("keydown",function(r){y(e);let o=u(2);return w(o.onNodeKeydown(r))}),v(6,ZEe,3,3,"span",26)(7,eAe,1,2,"span",3),m(8,"span",11),v(9,tAe,2,1,"span",8)(10,nAe,2,4,"span",8),g()()(),v(11,oAe,3,5,"td",27),g()()()}if(i&2){let e=u(2);ce(e.node.styleClass),p(3),f("ngIf",!e.root),p(),f("ngClass",ne(10,wEe,!e.node.expanded)),p(),f("ngClass",Qe(12,vEe,e.tree.selectionMode,e.isSelected())),p(),f("ngIf",!e.isLeaf()),p(),f("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),p(2),f("ngIf",!e.tree.getTemplateForNode(e.node)),p(),f("ngIf",e.tree.getTemplateForNode(e.node)),p(),f("ngIf",e.node.children&&e.node.expanded)}}function aAe(i,n){if(i&1&&v(0,bEe,1,4,"li",1)(1,WEe,11,35,"li",2)(2,zEe,1,4,"li",1)(3,sAe,12,15,"table",3),i&2){let e=u();f("ngIf",e.tree.droppableNodes),p(),f("ngIf",!e.tree.horizontal),p(),f("ngIf",e.tree.droppableNodes&&e.lastChild),p(),f("ngIf",e.tree.horizontal)}}var lAe=["filter"],cAe=["scroller"],dAe=["wrapper"],pAe=(i,n,e,t)=>({"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":n,"p-tree-loading":e,"p-tree-flex-scrollable":t}),uAe=i=>({options:i}),hAe=i=>({"max-height":i}),fAe=i=>({"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i});function mAe(i,n){if(i&1&&P(0,"i"),i&2){let e=u(3);ce("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function gAe(i,n){i&1&&P(0,"SpinnerIcon",17),i&2&&f("spin",!0)("styleClass","p-tree-loading-icon")}function _Ae(i,n){}function CAe(i,n){i&1&&v(0,_Ae,0,0,"ng-template")}function IAe(i,n){if(i&1&&(m(0,"span",18),v(1,CAe,1,0,null,9),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function yAe(i,n){if(i&1&&(he(0),v(1,gAe,1,2,"SpinnerIcon",15)(2,IAe,2,1,"span",16),fe()),i&2){let e=u(3);p(),f("ngIf",!e.loadingIconTemplate),p(),f("ngIf",e.loadingIconTemplate)}}function wAe(i,n){if(i&1&&(m(0,"div",13),v(1,mAe,1,2,"i",14)(2,yAe,3,2,"ng-container",11),g()),i&2){let e=u(2);p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function vAe(i,n){i&1&&ue(0)}function bAe(i,n){i&1&&P(0,"SearchIcon",23),i&2&&f("styleClass","p-tree-filter-icon")}function SAe(i,n){}function EAe(i,n){i&1&&v(0,SAe,0,0,"ng-template")}function AAe(i,n){if(i&1&&(m(0,"span",24),v(1,EAe,1,0,null,9),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.filterIconTemplate)}}function xAe(i,n){if(i&1){let e=L();m(0,"div",19)(1,"input",20,0),k("keydown.enter",function(r){return y(e),w(r.preventDefault())})("input",function(r){y(e);let o=u(2);return w(o._filter(r.target.value))}),g(),v(3,bAe,1,1,"SearchIcon",21)(4,AAe,2,1,"span",22),g()}if(i&2){let e=u(2);p(),G("placeholder",e.filterPlaceholder),p(2),f("ngIf",!e.filterIconTemplate),p(),f("ngIf",e.filterIconTemplate)}}function TAe(i,n){if(i&1&&P(0,"p-treeNode",31,2),i&2){let e=n.$implicit,t=n.first,r=u(2).options,o=u(4);f("level",e.level)("rowNode",e)("node",e.node)("parentNode",e.parent)("firstChild",t)("lastChild",e.lastChild)("index",e.index)("itemSize",r.itemSize)("indentation",o.indentation)("loadingMode",o.loadingMode)}}function OAe(i,n){if(i&1&&(m(0,"ul",29),v(1,TAe,2,10,"p-treeNode",30),g()),i&2){let e=u(),t=e.$implicit,r=e.options,o=u(4);st(r.contentStyle),f("ngClass",r.contentStyleClass),G("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledBy),p(),f("ngForOf",t)("ngForTrackBy",o.trackBy)}}function RAe(i,n){if(i&1&&v(0,OAe,2,7,"ul",28),i&2){let e=n.$implicit;f("ngIf",e)}}function PAe(i,n){i&1&&ue(0)}function DAe(i,n){if(i&1&&v(0,PAe,1,0,"ng-container",33),i&2){let e=n.options,t=u(5);f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(2,uAe,e))}}function FAe(i,n){i&1&&(he(0),v(1,DAe,1,4,"ng-template",32),fe())}function kAe(i,n){if(i&1){let e=L();m(0,"p-scroller",26,1),k("onScroll",function(r){y(e);let o=u(3);return w(o.onScroll.emit(r))})("onScrollIndexChange",function(r){y(e);let o=u(3);return w(o.onScrollIndexChange.emit(r))})("onLazyLoad",function(r){y(e);let o=u(3);return w(o.onLazyLoad.emit(r))}),v(2,RAe,1,1,"ng-template",27)(3,FAe,2,0,"ng-container",11),g()}if(i&2){let e=u(3);st(ne(9,iG,e.scrollHeight!=="flex"?e.scrollHeight:void 0)),f("items",e.serializedValue)("tabindex",-1)("scrollHeight",e.scrollHeight!=="flex"?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),p(3),f("ngIf",e.loaderTemplate)}}function NAe(i,n){if(i&1&&P(0,"p-treeNode",38),i&2){let e=n.$implicit,t=n.first,r=n.last,o=n.index,s=u(5);f("node",e)("firstChild",t)("lastChild",r)("index",o)("level",0)("loadingMode",s.loadingMode)}}function LAe(i,n){if(i&1&&(m(0,"ul",36),v(1,NAe,1,6,"p-treeNode",37),g()),i&2){let e=u(4);G("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),p(),f("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function MAe(i,n){if(i&1&&(he(0),m(1,"div",34,3),v(3,LAe,2,4,"ul",35),g(),fe()),i&2){let e=u(3);p(),f("ngStyle",ne(2,hAe,e.scrollHeight)),p(2),f("ngIf",e.getRootNode())}}function VAe(i,n){if(i&1&&(he(0),v(1,kAe,4,11,"p-scroller",25)(2,MAe,4,4,"ng-container",11),fe()),i&2){let e=u(2);p(),f("ngIf",e.virtualScroll),p(),f("ngIf",!e.virtualScroll)}}function BAe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),J(" ",e.emptyMessageLabel," ")}}function UAe(i,n){i&1&&ue(0,null,4)}function jAe(i,n){if(i&1&&(m(0,"div",39),v(1,BAe,2,1,"ng-container",40)(2,UAe,2,0,"ng-container",9),g()),i&2){let e=u(2);p(),f("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),p(),f("ngTemplateOutlet",e.emptyMessageTemplate)}}function GAe(i,n){i&1&&ue(0)}function HAe(i,n){if(i&1){let e=L();m(0,"div",7),k("drop",function(r){y(e);let o=u();return w(o.onDrop(r))})("dragover",function(r){y(e);let o=u();return w(o.onDragOver(r))})("dragenter",function(){y(e);let r=u();return w(r.onDragEnter())})("dragleave",function(r){y(e);let o=u();return w(o.onDragLeave(r))}),v(1,wAe,3,2,"div",8)(2,vAe,1,0,"ng-container",9)(3,xAe,5,3,"div",10)(4,VAe,3,2,"ng-container",11)(5,jAe,3,3,"div",12)(6,GAe,1,0,"ng-container",9),g()}if(i&2){let e,t=u();ce(t.styleClass),f("ngClass",xn(10,pAe,t.selectionMode,t.dragHover,t.loading,t.scrollHeight==="flex"))("ngStyle",t.style),p(),f("ngIf",t.loading&&t.loadingMode==="mask"),p(),f("ngTemplateOutlet",t.headerTemplate),p(),f("ngIf",t.filter),p(),f("ngIf",(e=t.getRootNode())==null?null:e.length),p(),f("ngIf",!t.loading&&(t.getRootNode()==null||t.getRootNode().length===0)),p(),f("ngTemplateOutlet",t.footerTemplate)}}function WAe(i,n){i&1&&ue(0)}function zAe(i,n){if(i&1&&P(0,"i"),i&2){let e=u(3);ce("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function KAe(i,n){i&1&&P(0,"SpinnerIcon",17),i&2&&f("spin",!0)("styleClass","p-tree-loading-icon")}function $Ae(i,n){}function JAe(i,n){i&1&&v(0,$Ae,0,0,"ng-template")}function qAe(i,n){if(i&1&&(m(0,"span",18),v(1,JAe,1,0,null,9),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function YAe(i,n){if(i&1&&(he(0),v(1,KAe,1,2,"SpinnerIcon",15)(2,qAe,2,1,"span",16),fe()),i&2){let e=u(3);p(),f("ngIf",!e.loadingIconTemplate),p(),f("ngIf",e.loadingIconTemplate)}}function XAe(i,n){if(i&1&&(m(0,"div",43),v(1,zAe,1,2,"i",14)(2,YAe,3,2,"ng-container",11),g()),i&2){let e=u(2);p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function QAe(i,n){if(i&1&&(m(0,"table"),P(1,"p-treeNode",44),g()),i&2){let e=u(2);p(),f("node",e.value[0])("root",!0)}}function ZAe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),J(" ",e.emptyMessageLabel," ")}}function exe(i,n){i&1&&ue(0,null,4)}function txe(i,n){if(i&1&&(m(0,"div",39),v(1,ZAe,2,1,"ng-container",40)(2,exe,2,0,"ng-container",9),g()),i&2){let e=u(2);p(),f("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),p(),f("ngTemplateOutlet",e.emptyMessageTemplate)}}function ixe(i,n){i&1&&ue(0)}function nxe(i,n){if(i&1&&(m(0,"div",41),v(1,WAe,1,0,"ng-container",9)(2,XAe,3,2,"div",42)(3,QAe,2,2,"table",11)(4,txe,3,3,"div",12)(5,ixe,1,0,"ng-container",9),g()),i&2){let e=u();ce(e.styleClass),f("ngClass",ne(9,fAe,e.selectionMode))("ngStyle",e.style),p(),f("ngTemplateOutlet",e.headerTemplate),p(),f("ngIf",e.loading),p(),f("ngIf",e.value&&e.value[0]),p(),f("ngIf",!e.loading&&(e.getRootNode()==null||e.getRootNode().length===0)),p(),f("ngTemplateOutlet",e.footerTemplate)}}var rxe=(()=>{class i{static ICON_CLASS="p-treenode-icon ";rowNode;node;parentNode;root;index;firstChild;lastChild;level;indentation;itemSize;loadingMode;tree;timeout;draghoverPrev;draghoverNext;draghoverNode;get ariaSelected(){return this.tree.selectionMode==="single"||this.tree.selectionMode==="multiple"?this.isSelected():void 0}get ariaChecked(){return this.tree.selectionMode==="checkbox"?this.isSelected():void 0}constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode;let t=this.tree.el.nativeElement.closest("p-dialog");this.parentNode&&!t&&(this.setAllNodesTabIndexes(),this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value)))}getIcon(){let e;return this.node.icon?e=this.node.icon:e=this.node.expanded&&this.node.children&&this.node.children?.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e),e.stopPropagation()}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&(this.tree.updateSerializedValue(),this.focusVirtualNode()),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){e.key==="Enter"&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}isSameNode(e){return e.currentTarget&&(e.currentTarget.isSameNode(e.target)||e.currentTarget.isSameNode(e.target.closest('[role="treeitem"]')))}onDropPoint(e,t){e.preventDefault();let r=this.tree.dragNode,o=this.tree.dragNodeIndex,s=this.tree.dragNodeScope,a=this.tree.dragNodeTree===this.tree?t===1||o!==this.index-1:!0;if(this.tree.allowDrop(r,this.node,s,"between")&&a){let l=oe({},this.createDropPointEventMetadata(t));this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,dropPoint:"between",index:this.index,accept:()=>{this.processPointDrop(l)}}):(this.processPointDrop(l),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,dropPoint:"between",index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let t=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===t?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,t.splice(r,0,e.dragNode)):(r=t.length,t.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,t){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope,"between")&&(t<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&this.node.draggable!==!1?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node?.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&this.node?.droppable!==!1){let t=this.tree.dragNode;if(this.tree.allowDrop(t,this.node,this.tree.dragNodeScope)){let r=oe({},this.createDropNodeEventMetadata());this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,dropPoint:"node",index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,dropPoint:"node",index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let t=e.dragNodeIndex;e.dragNodeSubNodes.splice(t,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:t})}onDropNodeDragEnter(e){this.tree.droppableNodes&&this.node?.droppable!==!1&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>=Math.floor(t.top+t.height)||e.y<t.top)&&(this.draghoverNode=!1)}}onKeyDown(e){if(!(!this.isSameNode(e)||this.tree.contextMenu&&this.tree.contextMenu.containerViewChild?.nativeElement.style.display==="block"))switch(e.code){case"ArrowDown":this.onArrowDown(e);break;case"ArrowUp":this.onArrowUp(e);break;case"ArrowRight":this.onArrowRight(e);break;case"ArrowLeft":this.onArrowLeft(e);break;case"Enter":case"NumpadEnter":this.onEnter(e);break;case"Space":let t=e.target instanceof HTMLElement&&e.target.nodeName;["INPUT"].includes(t)||this.onEnter(e);break;case"Tab":this.setAllNodesTabIndexes();break;default:break}}onArrowUp(e){let t=e.target.getAttribute("data-pc-section")==="toggler"?e.target.closest('[role="treeitem"]'):e.target.parentElement;if(t.previousElementSibling)this.focusRowChange(t,t.previousElementSibling,this.findLastVisibleDescendant(t.previousElementSibling));else{let r=this.getParentNodeElement(t);r&&this.focusRowChange(t,r)}e.preventDefault()}onArrowDown(e){let t=e.target.getAttribute("data-pc-section")==="toggler"?e.target.closest('[role="treeitem"]'):e.target,r=t.children[1];if(r&&r.children.length>0)this.focusRowChange(t,r.children[0]);else if(t.parentElement.nextElementSibling)this.focusRowChange(t,t.parentElement.nextElementSibling);else{let o=this.findNextSiblingOfAncestor(t.parentElement);o&&this.focusRowChange(t,o)}e.preventDefault()}onArrowRight(e){!this.node?.expanded&&!this.tree.isNodeLeaf(this.node)&&(this.expand(e),e.currentTarget.tabIndex=-1,setTimeout(()=>{this.onArrowDown(e)},1)),e.preventDefault()}onArrowLeft(e){let t=e.target.getAttribute("data-pc-section")==="toggler"?e.target.closest('[role="treeitem"]'):e.target;if(this.level===0&&!this.node?.expanded)return!1;if(this.node?.expanded){this.collapse(e);return}let r=this.getParentNodeElement(t.parentElement);r&&this.focusRowChange(e.currentTarget,r),e.preventDefault()}isActionableElement(e){let t=e.target;return t instanceof HTMLElement&&(t.nodeName=="A"||t.nodeName=="BUTTON")}onEnter(e){this.tree.onNodeClick(e,this.node),this.setTabIndexForSelectionMode(e,this.tree.nodeTouched),this.isActionableElement(e)||e.preventDefault()}setAllNodesTabIndexes(){let e=j.find(this.tree.el.nativeElement,".p-treenode"),t=[...e].some(r=>r.getAttribute("aria-selected")==="true"||r.getAttribute("aria-checked")==="true");if([...e].forEach(r=>{r.tabIndex=-1}),t){let r=[...e].filter(o=>o.getAttribute("aria-selected")==="true"||o.getAttribute("aria-checked")==="true");r[0].tabIndex=0;return}[...e][0].tabIndex=0}setTabIndexForSelectionMode(e,t){if(this.tree.selectionMode!==null){let r=[...j.find(this.tree.el.nativeElement,".p-treenode")];e.currentTarget.tabIndex=t===!1?-1:0,r.every(o=>o.tabIndex===-1)&&(r[0].tabIndex=0)}}findNextSiblingOfAncestor(e){let t=this.getParentNodeElement(e);return t?t.nextElementSibling?t.nextElementSibling:this.findNextSiblingOfAncestor(t):null}findLastVisibleDescendant(e){let r=Array.from(e.children).find(o=>j.hasClass(o,"p-treenode")).children[1];if(r&&r.children.length>0){let o=r.children[r.children.length-1];return this.findLastVisibleDescendant(o)}else return e}getParentNodeElement(e){let t=e.parentElement?.parentElement?.parentElement;return t?.tagName==="P-TREENODE"?t:null}focusNode(e){this.tree.droppableNodes?e.children[1].focus():e.children[0].focus()}focusRowChange(e,t,r){e.tabIndex="-1",t.children[0].tabIndex="0",this.focusNode(r||t)}focusVirtualNode(){this.timeout=setTimeout(()=>{let e=j.findSingle(document.body,`[data-id="${this.node?.key??this.node?.data}"]`);j.focus(e)},1)}static \u0275fac=function(t){return new(t||i)(S(Zt(()=>gl)))};static \u0275cmp=se({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:[2,"root","root",Y],index:[2,"index","index",We],firstChild:[2,"firstChild","firstChild",Y],lastChild:[2,"lastChild","lastChild",Y],level:[2,"level","level",We],indentation:[2,"indentation","indentation",We],itemSize:[2,"itemSize","itemSize",We],loadingMode:"loadingMode"},features:[tt],decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],["role","treeitem",3,"ngClass","ngStyle","style","keydown",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"drop","dragover","dragenter","dragleave","ngClass"],["role","treeitem",3,"keydown","ngClass","ngStyle"],[1,"p-treenode-content",3,"click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","ngStyle","draggable","ngClass"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[4,"ngIf"],["class","p-tree-toggler-icon",4,"ngIf"],["class","p-checkbox p-component","aria-hidden","true",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],["class","p-treenode-children","role","group",3,"ngStyle",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[3,"spin","styleClass"],[1,"p-tree-toggler-icon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"p-checkbox","p-component",3,"ngClass"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["role","group",1,"p-treenode-children",3,"ngStyle"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level","loadingMode"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"click","contextmenu","touchend","keydown","ngClass"],[3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"ngStyle",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[3,"click","ngClass"],[3,"styleClass","ariaLabel",4,"ngIf"],[3,"styleClass","ariaLabel"],[1,"p-treenode-children-container",3,"ngStyle"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(t,r){t&1&&v(0,aAe,4,4,"ng-template",0),t&2&&f("ngIf",r.node)},dependencies:()=>[je,hn,rt,mt,De,nn,On,Ho,rl,Ha,Us,Qs,i],encapsulation:2})}return i})(),gl=(()=>{class i{el;dragDropService;config;cd;value;selectionMode;loadingMode="mask";selection;style;styleClass;contextMenu;layout="vertical";draggableScope;droppableScope;draggableNodes;droppableNodes;metaKeySelection=!1;propagateSelectionUp=!0;propagateSelectionDown=!0;loading;loadingIcon;emptyMessage="";ariaLabel;togglerAriaLabel;ariaLabelledBy;validateDrop;filter;filterBy="label";filterMode="lenient";filterPlaceholder;filteredNodes;filterLocale;scrollHeight;lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;indentation=1.5;_templateMap;trackBy=(e,t)=>t;_virtualNodeHeight;get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}selectionChange=new X;onNodeSelect=new X;onNodeUnselect=new X;onNodeExpand=new X;onNodeCollapse=new X;onNodeContextMenuSelect=new X;onNodeDrop=new X;onLazyLoad=new X;onScroll=new X;onScrollIndexChange=new X;onFilter=new X;templates;filterViewChild;scroller;wrapperViewChild;serializedValue;headerTemplate;footerTemplate;loaderTemplate;emptyMessageTemplate;togglerIconTemplate;checkboxIconTemplate;loadingIconTemplate;filterIconTemplate;nodeTouched;dragNodeTree;dragNode;dragNodeSubNodes;dragNodeIndex;dragNodeScope;dragHover;dragStartSubscription;dragStopSubscription;constructor(e,t,r,o){this.el=e,this.dragDropService=t,this.config=r,this.cd=o}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&(this.updateSerializedValue(),this.hasFilterActive()&&this._filter(this.filterViewChild.nativeElement.value))}get horizontal(){return this.layout=="horizontal"}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Di.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this._templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"togglericon":this.togglerIconTemplate=e.template;break;case"checkboxicon":this.checkboxIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;default:this._templateMap[e.name]=e.template;break}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,t,r,o){t&&t.length&&t.forEach((s,a)=>{s.parent=e;let l={node:s,parent:e,level:r,visible:o&&(e?e.expanded:!0),lastChild:a===t.length-1,index:a};this.serializedValue.push(l),l.visible&&s.expanded&&this.serializeNodes(s,s.children,r+1,l.visible)})}onNodeClick(e,t){let r=e.target;if(!(j.hasClass(r,"p-tree-toggler")||j.hasClass(r,"p-tree-toggler-icon"))){if(this.selectionMode){if(t.selectable===!1){t.style="--p-focus-ring-color: none;";return}else t.style="--p-focus-ring-color: var(--primary-color)";if(this.hasFilteredNodes()&&(t=this.getNodeWithKey(t.key,this.filteredNodes),!t))return;let o=this.findIndexInSelection(t),s=o>=0;if(this.isCheckboxSelectionMode())s?(this.propagateSelectionDown?this.propagateDown(t,!1):this.selection=this.selection.filter((a,l)=>l!=o),this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.propagateSelectionDown?this.propagateDown(t,!0):this.selection=[...this.selection||[],t],this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:t}));else if(this.nodeTouched?!1:this.metaKeySelection){let l=e.metaKey||e.ctrlKey;s&&l?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((c,d)=>d!=o),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.isMultipleSelectionMode()&&(this.selection=l?this.selection||[]:[],this.selection=[...this.selection,t],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:t}))}else this.isSingleSelectionMode()?s?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=t,setTimeout(()=>{this.onNodeSelect.emit({originalEvent:e,node:t})})):s?(this.selection=this.selection.filter((l,c)=>c!=o),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=[...this.selection||[],t],setTimeout(()=>{this.onNodeSelect.emit({originalEvent:e,node:t})})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,t){if(this.contextMenu){let o=e.target.getAttribute("class");if(o&&o.includes("p-tree-toggler"))return;this.findIndexInSelection(t)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.selectionChange.emit([t])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:t})}}findIndexInSelection(e){return this.selectionMode&&this.selection?(this.isSingleSelectionMode()?[this.selection]:this.selection).findIndex(r=>r===e||r.key===e.key&&r.key!==void 0):-1}syncNodeOption(e,t,r,o){let s=this.hasFilteredNodes()?this.getNodeWithKey(e.key,t):null;s&&(s[r]=o||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}hasFilterActive(){return this.filter&&this.filterViewChild?.nativeElement?.value.length>0}getNodeWithKey(e,t){for(let r of t){if(r.key===e)return r;if(r.children){let o=this.getNodeWithKey(e,r.children);if(o)return o}}}propagateUp(e,t){if(e.children&&e.children.length){let o=0,s=!1;for(let a of e.children)this.isSelected(a)?o++:a.partialSelected&&(s=!0);if(t&&o==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!t){let a=this.findIndexInSelection(e);a>=0&&(this.selection=this.selection.filter((l,c)=>c!=a))}s||o>0&&o!=e.children.length?e.partialSelected=!0:e.partialSelected=!1}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,t)}propagateDown(e,t){let r=this.findIndexInSelection(e);if(t&&r==-1&&e.selectable!==!1?this.selection=[...this.selection||[],this.filterUnselectableChildren(e)]:!t&&r>-1&&(this.selection=this.selection.filter((o,s)=>s!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let o of e.children)this.propagateDown(o,t)}filterUnselectableChildren(e){let t=Object.assign({},e);if(t.children&&t.children.length)for(let r of t.children)r.selectable===!1&&(t.children=t.children.filter(o=>o!=r)),r=this.filterUnselectableChildren(r);return t}isSelected(e){return this.findIndexInSelection(e)!=-1}isSingleSelectionMode(){return this.selectionMode&&this.selectionMode=="single"}isMultipleSelectionMode(){return this.selectionMode&&this.selectionMode=="multiple"}isCheckboxSelectionMode(){return this.selectionMode&&this.selectionMode=="checkbox"}isNodeLeaf(e){return e.leaf==!1?!1:!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this._templateMap?e.type?this._templateMap[e.type]:this._templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||this.value.length===0)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||this.value.length===0)){e.preventDefault();let t=this.dragNode;if(this.allowDrop(t,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:null,index:r,accept:()=>{this.processTreeDrop(t,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:null,index:r}),this.processTreeDrop(t,r))}}}processTreeDrop(e,t){this.dragNodeSubNodes.splice(t,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>t.top+t.height||e.y<t.top)&&(this.dragHover=!1)}}allowDrop(e,t,r,o="node"){if(e)if(this.isValidDragScope(r)){let s=!0;if(t)if(e===t)s=!1;else{let a=t.parent;for(;a!=null;){if(a===e){s=!1;break}a=a.parent}}return s}else return!1;else return!1}isValidDragScope(e){let t=this.droppableScope;if(t){if(typeof t=="string"){if(typeof e=="string")return t===e;if(Array.isArray(e))return e.indexOf(t)!=-1}else if(Array.isArray(t)){if(typeof e=="string")return t.indexOf(e)!=-1;if(Array.isArray(e)){for(let r of t)for(let o of e)if(r===o)return!0}}return!1}else return!0}_filter(e){let t=e;if(t==="")this.filteredNodes=null;else{this.filteredNodes=[];let r=this.filterBy.split(","),o=ge.removeAccents(t).toLocaleLowerCase(this.filterLocale),s=this.filterMode==="strict";for(let a of this.value){let l=oe({},a),c={searchFields:r,filterText:o,isStrictMode:s};(s&&(this.findFilteredNodes(l,c)||this.isFilterMatched(l,c))||!s&&(this.isFilterMatched(l,c)||this.findFilteredNodes(l,c)))&&this.filteredNodes.push(l)}}this.updateSerializedValue(),this.onFilter.emit({filter:t,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller?.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller?.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,t){if(e){let r=!1;if(e.children){let o=[...e.children];e.children=[];for(let s of o){let a=oe({},s);this.isFilterMatched(a,t)&&(r=!0,e.children.push(a))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,t){let{searchFields:r,filterText:o,isStrictMode:s}=t,a=!1;for(let l of r)ge.removeAccents(String(ge.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(o)>-1&&(a=!0);return(!a||s&&!this.isNodeLeaf(e))&&(a=this.findFilteredNodes(e,{searchFields:r,filterText:o,isStrictMode:s})||a),a}getIndex(e,t){let r=e.getItemOptions;return r?r(t).index:t}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(Ze),S(VV,8),S(Ht),S(we))};static \u0275cmp=se({type:i,selectors:[["p-tree"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(lAe,5),le(cAe,5),le(dAe,5)),t&2){let o;te(o=ie())&&(r.filterViewChild=o.first),te(o=ie())&&(r.scroller=o.first),te(o=ie())&&(r.wrapperViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",loadingMode:"loadingMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:[2,"draggableNodes","draggableNodes",Y],droppableNodes:[2,"droppableNodes","droppableNodes",Y],metaKeySelection:[2,"metaKeySelection","metaKeySelection",Y],propagateSelectionUp:[2,"propagateSelectionUp","propagateSelectionUp",Y],propagateSelectionDown:[2,"propagateSelectionDown","propagateSelectionDown",Y],loading:[2,"loading","loading",Y],loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:[2,"validateDrop","validateDrop",Y],filter:[2,"filter","filter",Y],filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",Y],virtualScroll:[2,"virtualScroll","virtualScroll",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],virtualScrollOptions:"virtualScrollOptions",indentation:[2,"indentation","indentation",We],_templateMap:"_templateMap",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[tt,Yi],decls:2,vars:2,consts:[["filter",""],["scroller",""],["treeNode",""],["wrapper",""],["emptyFilter",""],[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"drop","dragover","dragenter","dragleave","ngClass","ngStyle"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-tree-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-tree-loading-icon"],[1,"p-tree-filter-container"],["type","search","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],[3,"styleClass",4,"ngIf"],["class","p-tree-filter-icon",4,"ngIf"],[3,"styleClass"],[1,"p-tree-filter-icon"],["styleClass","p-tree-wrapper",3,"items","tabindex","style","scrollHeight","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],["styleClass","p-tree-wrapper",3,"onScroll","onScrollIndexChange","onLazyLoad","items","tabindex","scrollHeight","itemSize","lazy","options"],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","parentNode","firstChild","lastChild","index","itemSize","indentation","loadingMode"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper",3,"ngStyle"],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level","loadingMode",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level","loadingMode"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(t,r){t&1&&v(0,HAe,7,15,"div",5)(1,nxe,6,11,"div",6),t&2&&(f("ngIf",!r.horizontal),p(),f("ngIf",r.horizontal))},dependencies:()=>[je,hn,rt,mt,De,Ee,Xs,ol,Us,rxe],styles:[`@layer primeng{.p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}}
`],encapsulation:2})}return i})(),JP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,ln,so,On,Ho,rl,Ha,ol,Us,Qs,dt,so]})}return i})();var qP=(()=>{class i extends Nt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["EyeIcon"]],standalone:!0,features:[Se,Ct],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M0.0535499 7.25213C0.208567 7.59162 2.40413 12.4 7 12.4C11.5959 12.4 13.7914 7.59162 13.9465 7.25213C13.9487 7.2471 13.9506 7.24304 13.952 7.24001C13.9837 7.16396 14 7.08239 14 7.00001C14 6.91762 13.9837 6.83605 13.952 6.76001C13.9506 6.75697 13.9487 6.75292 13.9465 6.74788C13.7914 6.4084 11.5959 1.60001 7 1.60001C2.40413 1.60001 0.208567 6.40839 0.0535499 6.74788C0.0512519 6.75292 0.0494023 6.75697 0.048 6.76001C0.0163137 6.83605 0 6.91762 0 7.00001C0 7.08239 0.0163137 7.16396 0.048 7.24001C0.0494023 7.24304 0.0512519 7.2471 0.0535499 7.25213ZM7 11.2C3.664 11.2 1.736 7.92001 1.264 7.00001C1.736 6.08001 3.664 2.80001 7 2.80001C10.336 2.80001 12.264 6.08001 12.736 7.00001C12.264 7.92001 10.336 11.2 7 11.2ZM5.55551 9.16182C5.98308 9.44751 6.48576 9.6 7 9.6C7.68891 9.59789 8.349 9.32328 8.83614 8.83614C9.32328 8.349 9.59789 7.68891 9.59999 7C9.59999 6.48576 9.44751 5.98308 9.16182 5.55551C8.87612 5.12794 8.47006 4.7947 7.99497 4.59791C7.51988 4.40112 6.99711 4.34963 6.49276 4.44995C5.98841 4.55027 5.52513 4.7979 5.16152 5.16152C4.7979 5.52513 4.55027 5.98841 4.44995 6.49276C4.34963 6.99711 4.40112 7.51988 4.59791 7.99497C4.7947 8.47006 5.12794 8.87612 5.55551 9.16182ZM6.2222 5.83594C6.45243 5.6821 6.7231 5.6 7 5.6C7.37065 5.6021 7.72553 5.75027 7.98762 6.01237C8.24972 6.27446 8.39789 6.62934 8.4 7C8.4 7.27689 8.31789 7.54756 8.16405 7.77779C8.01022 8.00802 7.79157 8.18746 7.53575 8.29343C7.27994 8.39939 6.99844 8.42711 6.72687 8.37309C6.4553 8.31908 6.20584 8.18574 6.01005 7.98994C5.81425 7.79415 5.68091 7.54469 5.6269 7.27312C5.57288 7.00155 5.6006 6.72006 5.70656 6.46424C5.81253 6.20842 5.99197 5.98977 6.2222 5.83594Z","fill","currentColor"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0),P(1,"path",1),g()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return i})();var YP=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["EyeSlashIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M13.9414 6.74792C13.9437 6.75295 13.9455 6.757 13.9469 6.76003C13.982 6.8394 14.0001 6.9252 14.0001 7.01195C14.0001 7.0987 13.982 7.1845 13.9469 7.26386C13.6004 8.00059 13.1711 8.69549 12.6674 9.33515C12.6115 9.4071 12.54 9.46538 12.4582 9.50556C12.3765 9.54574 12.2866 9.56678 12.1955 9.56707C12.0834 9.56671 11.9737 9.53496 11.8788 9.47541C11.7838 9.41586 11.7074 9.3309 11.6583 9.23015C11.6092 9.12941 11.5893 9.01691 11.6008 8.90543C11.6124 8.79394 11.6549 8.68793 11.7237 8.5994C12.1065 8.09726 12.4437 7.56199 12.7313 6.99995C12.2595 6.08027 10.3402 2.8014 6.99732 2.8014C6.63723 2.80218 6.27816 2.83969 5.92569 2.91336C5.77666 2.93304 5.62568 2.89606 5.50263 2.80972C5.37958 2.72337 5.29344 2.59398 5.26125 2.44714C5.22907 2.30031 5.2532 2.14674 5.32885 2.01685C5.40451 1.88696 5.52618 1.79021 5.66978 1.74576C6.10574 1.64961 6.55089 1.60134 6.99732 1.60181C11.5916 1.60181 13.7864 6.40856 13.9414 6.74792ZM2.20333 1.61685C2.35871 1.61411 2.5091 1.67179 2.6228 1.77774L12.2195 11.3744C12.3318 11.4869 12.3949 11.6393 12.3949 11.7983C12.3949 11.9572 12.3318 12.1097 12.2195 12.2221C12.107 12.3345 11.9546 12.3976 11.7956 12.3976C11.6367 12.3976 11.4842 12.3345 11.3718 12.2221L10.5081 11.3584C9.46549 12.0426 8.24432 12.4042 6.99729 12.3981C2.403 12.3981 0.208197 7.59135 0.0532336 7.25198C0.0509364 7.24694 0.0490875 7.2429 0.0476856 7.23986C0.0162332 7.16518 3.05176e-05 7.08497 3.05176e-05 7.00394C3.05176e-05 6.92291 0.0162332 6.8427 0.0476856 6.76802C0.631261 5.47831 1.46902 4.31959 2.51084 3.36119L1.77509 2.62545C1.66914 2.51175 1.61146 2.36136 1.61421 2.20597C1.61695 2.05059 1.6799 1.90233 1.78979 1.79244C1.89968 1.68254 2.04794 1.6196 2.20333 1.61685ZM7.45314 8.35147L5.68574 6.57609V6.5361C5.5872 6.78938 5.56498 7.06597 5.62183 7.33173C5.67868 7.59749 5.8121 7.84078 6.00563 8.03158C6.19567 8.21043 6.43052 8.33458 6.68533 8.39089C6.94014 8.44721 7.20543 8.43359 7.45314 8.35147ZM1.26327 6.99994C1.7351 7.91163 3.64645 11.1985 6.99729 11.1985C7.9267 11.2048 8.8408 10.9618 9.64438 10.4947L8.35682 9.20718C7.86027 9.51441 7.27449 9.64491 6.69448 9.57752C6.11446 9.51014 5.57421 9.24881 5.16131 8.83592C4.74842 8.42303 4.4871 7.88277 4.41971 7.30276C4.35232 6.72274 4.48282 6.13697 4.79005 5.64041L3.35855 4.2089C2.4954 5.00336 1.78523 5.94935 1.26327 6.99994Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var oxe=["input"],sxe=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),axe=i=>({value:"visible",params:i}),lxe=i=>({width:i});function cxe(i,n){if(i&1){let e=L();m(0,"TimesIcon",10),k("click",function(){y(e);let r=u(2);return w(r.clear())}),g()}i&2&&(f("styleClass","p-password-clear-icon"),G("data-pc-section","clearIcon"))}function dxe(i,n){}function pxe(i,n){i&1&&v(0,dxe,0,0,"ng-template")}function uxe(i,n){if(i&1){let e=L();he(0),v(1,cxe,1,2,"TimesIcon",7),m(2,"span",8),k("click",function(){y(e);let r=u();return w(r.clear())}),v(3,pxe,1,0,null,9),g(),fe()}if(i&2){let e=u();p(),f("ngIf",!e.clearIconTemplate),p(),G("data-pc-section","clearIcon"),p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function hxe(i,n){if(i&1){let e=L();m(0,"EyeSlashIcon",13),k("keypress",function(r){y(e);let o=u(3);return w(o.onEyeIconPress(r))})("click",function(){y(e);let r=u(3);return w(r.onMaskToggle())}),g()}i&2&&G("data-pc-section","hideIcon")}function fxe(i,n){}function mxe(i,n){i&1&&v(0,fxe,0,0,"ng-template")}function gxe(i,n){if(i&1){let e=L();m(0,"span",14),k("click",function(){y(e);let r=u(3);return w(r.onMaskToggle())}),v(1,mxe,1,0,null,9),g()}if(i&2){let e=u(3);p(),f("ngTemplateOutlet",e.hideIconTemplate)}}function _xe(i,n){if(i&1&&(he(0),v(1,hxe,1,1,"EyeSlashIcon",11)(2,gxe,2,1,"span",12),fe()),i&2){let e=u(2);p(),f("ngIf",!e.hideIconTemplate),p(),f("ngIf",e.hideIconTemplate)}}function Cxe(i,n){if(i&1){let e=L();m(0,"EyeIcon",13),k("keypress",function(r){y(e);let o=u(3);return w(o.onEyeIconPress(r))})("click",function(){y(e);let r=u(3);return w(r.onMaskToggle())}),g()}i&2&&G("data-pc-section","showIcon")}function Ixe(i,n){}function yxe(i,n){i&1&&v(0,Ixe,0,0,"ng-template")}function wxe(i,n){if(i&1){let e=L();m(0,"span",14),k("click",function(){y(e);let r=u(3);return w(r.onMaskToggle())}),v(1,yxe,1,0,null,9),g()}if(i&2){let e=u(3);p(),f("ngTemplateOutlet",e.showIconTemplate)}}function vxe(i,n){if(i&1&&(he(0),v(1,Cxe,1,1,"EyeIcon",11)(2,wxe,2,1,"span",12),fe()),i&2){let e=u(2);p(),f("ngIf",!e.showIconTemplate),p(),f("ngIf",e.showIconTemplate)}}function bxe(i,n){if(i&1&&(he(0),v(1,_xe,3,2,"ng-container",5)(2,vxe,3,2,"ng-container",5),fe()),i&2){let e=u();p(),f("ngIf",e.unmasked),p(),f("ngIf",!e.unmasked)}}function Sxe(i,n){i&1&&ue(0)}function Exe(i,n){i&1&&ue(0)}function Axe(i,n){if(i&1&&(he(0),v(1,Exe,1,0,"ng-container",9),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.contentTemplate)}}function xxe(i,n){if(i&1&&(m(0,"div",17),P(1,"div",3),D(2,"mapper"),g(),m(3,"div",18),F(4),g()),i&2){let e=u(2);G("data-pc-section","meter"),p(),f("ngClass",ei(2,6,e.meter,e.strengthClass))("ngStyle",ne(9,lxe,e.meter?e.meter.width:"")),G("data-pc-section","meterLabel"),p(2),G("data-pc-section","info"),p(),$(e.infoText)}}function Txe(i,n){i&1&&ue(0)}function Oxe(i,n){if(i&1){let e=L();m(0,"div",15,1),k("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))})("@overlayAnimation.start",function(r){y(e);let o=u();return w(o.onAnimationStart(r))})("@overlayAnimation.done",function(r){y(e);let o=u();return w(o.onAnimationEnd(r))}),v(2,Sxe,1,0,"ng-container",9)(3,Axe,2,1,"ng-container",16)(4,xxe,5,11,"ng-template",null,2,Bt)(6,Txe,1,0,"ng-container",9),g()}if(i&2){let e=He(5),t=u();f("ngClass","p-password-panel p-component")("@overlayAnimation",ne(10,axe,Qe(7,sxe,t.showTransitionOptions,t.hideTransitionOptions))),G("data-pc-section","panel"),p(2),f("ngTemplateOutlet",t.headerTemplate),p(),f("ngIf",t.contentTemplate)("ngIfElse",e),p(3),f("ngTemplateOutlet",t.footerTemplate)}}var P1=(()=>{class i{document;platformId;renderer;el;zone;config;promptLabel="Enter a password";weakLabel="Weak";mediumLabel="Medium";strongLabel="Strong";feedback=!0;set showPassword(e){this.el.nativeElement.type=e?"text":"password"}variant="outlined";panel;meter;info;filled;scrollHandler;documentResizeListener;constructor(e,t,r,o,s,a){this.document=e,this.platformId=t,this.renderer=r,this.el=o,this.zone=s,this.config=a}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}createPanel(){bt(this.platformId)&&(this.panel=this.renderer.createElement("div"),this.renderer.addClass(this.panel,"p-password-panel"),this.renderer.addClass(this.panel,"p-component"),this.renderer.addClass(this.panel,"p-password-panel-overlay"),this.renderer.addClass(this.panel,"p-connected-overlay"),this.meter=this.renderer.createElement("div"),this.renderer.addClass(this.meter,"p-password-meter"),this.renderer.appendChild(this.panel,this.meter),this.info=this.renderer.createElement("div"),this.renderer.addClass(this.info,"p-password-info"),this.renderer.setProperty(this.info,"textContent",this.promptLabel),this.renderer.appendChild(this.panel,this.info),this.renderer.setStyle(this.panel,"minWidth",`${this.el.nativeElement.offsetWidth}px`),this.renderer.appendChild(document.body,this.panel))}showOverlay(){this.feedback&&(this.panel||this.createPanel(),this.renderer.setStyle(this.panel,"zIndex",String(++j.zindex)),this.renderer.setStyle(this.panel,"display","block"),this.zone.runOutsideAngular(()=>{setTimeout(()=>{j.addClass(this.panel,"p-connected-overlay-visible"),this.bindScrollListener(),this.bindDocumentResizeListener()},1)}),j.absolutePosition(this.panel,this.el.nativeElement))}hideOverlay(){this.feedback&&this.panel&&(j.addClass(this.panel,"p-connected-overlay-hidden"),j.removeClass(this.panel,"p-connected-overlay-visible"),this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.ngOnDestroy()},150)}))}onFocus(){this.showOverlay()}onBlur(){this.hideOverlay()}onKeyup(e){if(this.feedback){let r=e.target.value,o=null,s=null;if(r.length===0)o=this.promptLabel,s="0px 0px";else{var t=this.testStrength(r);t<30?(o=this.weakLabel,s="0px -10px"):t>=30&&t<80?(o=this.mediumLabel,s="0px -20px"):t>=80&&(o=this.strongLabel,s="0px -30px")}(!this.panel||!j.hasClass(this.panel,"p-connected-overlay-visible"))&&this.showOverlay(),this.renderer.setStyle(this.meter,"backgroundPosition",s),this.info.textContent=o}}testStrength(e){let t=0,r;return r=e.match("[0-9]"),t+=this.normalize(r?r.length:1/4,1)*25,r=e.match("[a-zA-Z]"),t+=this.normalize(r?r.length:1/2,3)*10,r=e.match("[!@#$%^&*?_~.,;=]"),t+=this.normalize(r?r.length:1/6,1)*35,r=e.match("[A-Z]"),t+=this.normalize(r?r.length:1/6,1)*30,t*=e.length/8,t>100?100:t}normalize(e,t){return e-t<=0?e/t:1+.5*(e/(e+t/4))}get disabled(){return this.el.nativeElement.disabled}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.el.nativeElement,()=>{j.hasClass(this.panel,"p-connected-overlay-visible")&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentResizeListener(){if(bt(this.platformId)&&!this.documentResizeListener){let e=this.document.defaultView;this.documentResizeListener=this.renderer.listen(e,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){j.isTouchDevice()||this.hideOverlay()}ngOnDestroy(){this.panel&&(this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindDocumentResizeListener(),this.renderer.removeChild(this.document.body,this.panel),this.panel=null,this.meter=null,this.info=null)}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(Ze),S(Lt),S(Ht))};static \u0275dir=Et({type:i,selectors:[["","pPassword",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(t,r){t&1&&k("input",function(s){return r.onInput(s)})("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("keyup",function(s){return r.onKeyup(s)}),t&2&&Dn("p-filled",r.filled)("p-variant-filled",r.variant==="filled"||r.config.inputStyle()==="filled")},inputs:{promptLabel:"promptLabel",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",feedback:[2,"feedback","feedback",Y],showPassword:"showPassword",variant:"variant"},features:[tt]})}return i})(),Rxe=(()=>{class i{transform(e,t,...r){return t(e,...r)}static \u0275fac=function(t){return new(t||i)};static \u0275pipe=ur({name:"mapper",type:i,pure:!0})}return i})(),Pxe={provide:fn,useExisting:Zt(()=>XP),multi:!0},XP=(()=>{class i{document;platformId;renderer;cd;config;el;overlayService;ariaLabel;ariaLabelledBy;label;disabled;promptLabel;mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})";strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})";weakLabel;mediumLabel;maxLength;strongLabel;inputId;feedback=!0;appendTo;toggleMask;inputStyleClass;styleClass;style;inputStyle;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autocomplete;placeholder;showClear=!1;autofocus;variant="outlined";onFocus=new X;onBlur=new X;onClear=new X;input;contentTemplate;footerTemplate;headerTemplate;clearIconTemplate;hideIconTemplate;showIconTemplate;templates;overlayVisible=!1;meter;infoText;focused=!1;unmasked=!1;mediumCheckRegExp;strongCheckRegExp;resizeListener;scrollHandler;overlay;value=null;onModelChange=()=>{};onModelTouched=()=>{};translationSubscription;constructor(e,t,r,o,s,a,l){this.document=e,this.platformId=t,this.renderer=r,this.cd=o,this.config=s,this.el=a,this.overlayService=l}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"hideicon":this.hideIconTemplate=e.template;break;case"showicon":this.showIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,bi.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null;break}}onAnimationEnd(e){switch(e.toState){case"void":bi.clear(e.element);break}}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.overlay):this.document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=j.getOuterWidth(this.input.nativeElement)+"px",j.absolutePosition(this.overlay,this.input.nativeElement)):j.relativePosition(this.overlay,this.input.nativeElement)}onInput(e){this.value=e.target.value,this.onModelChange(this.value)}onInputFocus(e){this.focused=!0,this.feedback&&(this.overlayVisible=!0),this.onFocus.emit(e)}onEyeIconPress(e){switch(e.code){case"Enter":this.onMaskToggle(),e.preventDefault();break;default:break}}onInputBlur(e){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.onModelTouched(),this.onBlur.emit(e)}onKeyUp(e){if(this.feedback){let t=e.target.value;if(this.updateUI(t),e.code==="Escape"){this.overlayVisible&&(this.overlayVisible=!1);return}this.overlayVisible||(this.overlayVisible=!0)}}updateUI(e){let t=null,r=null;switch(this.testStrength(e)){case 1:t=this.weakText(),r={strength:"weak",width:"33.33%"};break;case 2:t=this.mediumText(),r={strength:"medium",width:"66.66%"};break;case 3:t=this.strongText(),r={strength:"strong",width:"100%"};break;default:t=this.promptText(),r=null;break}this.meter=r,this.infoText=t}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}testStrength(e){let t=0;return this.strongCheckRegExp.test(e)?t=3:this.mediumCheckRegExp.test(e)?t=2:e.length&&(t=1),t}writeValue(e){e===void 0?this.value=null:this.value=e,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindScrollListener(){bt(this.platformId)&&(this.scrollHandler||(this.scrollHandler=new go(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener())}bindResizeListener(){if(bt(this.platformId)&&!this.resizeListener){let e=this.document.defaultView;this.resizeListener=this.renderer.listen(e,"resize",()=>{this.overlayVisible&&!j.isTouchDevice()&&(this.overlayVisible=!1)})}}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(this.resizeListener(),this.resizeListener=null)}containerClass(e){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":e}}inputFieldClass(e){return{"p-password-input":!0,"p-disabled":e}}strengthClass(e){return`p-password-strength ${e?e.strength:""}`}filled(){return this.value!=null&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(Di.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(Di.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(Di.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(Di.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&(this.appendTo==="body"?this.renderer.removeChild(this.document.body,this.overlay):this.document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(e){return e?"text":"password"}getTranslation(e){return this.config.getTranslation(e)}clear(){this.value=null,this.onModelChange(this.value),this.writeValue(this.value),this.onClear.emit()}ngOnDestroy(){this.overlay&&(bi.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(jt),S(we),S(Ht),S(Ze),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-password"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(oxe,5),t&2){let o;te(o=ie())&&(r.input=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:8,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-filled",r.filled())("p-inputwrapper-focus",r.focused)("p-password-clearable",r.showClear)("p-password-mask",r.toggleMask)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",label:"label",disabled:[2,"disabled","disabled",Y],promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",maxLength:[2,"maxLength","maxLength",We],strongLabel:"strongLabel",inputId:"inputId",feedback:[2,"feedback","feedback",Y],appendTo:"appendTo",toggleMask:[2,"toggleMask","toggleMask",Y],inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autocomplete:"autocomplete",placeholder:"placeholder",showClear:[2,"showClear","showClear",Y],autofocus:[2,"autofocus","autofocus",Y],variant:"variant"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClear:"onClear"},features:[et([Pxe]),tt],decls:9,vars:35,consts:[["input",""],["overlay",""],["content",""],[3,"ngClass","ngStyle"],["pInputText","","pAutoFocus","",3,"input","focus","blur","keyup","ngClass","disabled","ngStyle","value","variant","autofocus"],[4,"ngIf"],[3,"ngClass","click",4,"ngIf"],[3,"styleClass","click",4,"ngIf"],[1,"p-password-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[3,"click","styleClass"],["tabIndex","0",3,"keypress","click",4,"ngIf"],[3,"click",4,"ngIf"],["tabIndex","0",3,"keypress","click"],[3,"click"],[3,"click","ngClass"],[4,"ngIf","ngIfElse"],[1,"p-password-meter"],[1,"p-password-info"]],template:function(t,r){if(t&1){let o=L();m(0,"div",3),D(1,"mapper"),m(2,"input",4,0),D(4,"mapper"),D(5,"mapper"),k("input",function(a){return y(o),w(r.onInput(a))})("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))})("keyup",function(a){return y(o),w(r.onKeyUp(a))}),g(),v(6,uxe,4,3,"ng-container",5)(7,bxe,3,2,"ng-container",5)(8,Oxe,7,12,"div",6),g()}t&2&&(ce(r.styleClass),f("ngClass",ei(1,26,r.toggleMask,r.containerClass))("ngStyle",r.style),G("data-pc-name","password")("data-pc-section","root"),p(2),ce(r.inputStyleClass),f("ngClass",ei(4,29,r.disabled,r.inputFieldClass))("disabled",r.disabled)("ngStyle",r.inputStyle)("value",r.value)("variant",r.variant)("autofocus",r.autofocus),G("label",r.label)("aria-label",r.ariaLabel)("aria-labelledBy",r.ariaLabelledBy)("id",r.inputId)("type",ei(5,32,r.unmasked,r.inputType))("placeholder",r.placeholder)("autocomplete",r.autocomplete)("maxlength",r.maxLength)("data-pc-section","input"),p(4),f("ngIf",r.showClear&&r.value!=null),p(),f("ngIf",r.toggleMask),p(),f("ngIf",r.overlayVisible))},dependencies:()=>[je,rt,mt,De,Xi,Zn,Ji,YP,qP,Rxe],styles:[`@layer primeng{.p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0%;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}.p-password-input::-ms-reveal,.p-password-input::-ms-clear{display:none}.p-password-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-password .p-icon{cursor:pointer}.p-password-clearable.p-password-mask .p-password-clear-icon{margin-top:unset}.p-password-clearable{position:relative}}
`],encapsulation:2,data:{animation:[Tn("overlayAnimation",[ci(":enter",[qt({opacity:0,transform:"scaleY(0.8)"}),li("{{showTransitionParams}}")]),ci(":leave",[li("{{hideTransitionParams}}",qt({opacity:0}))])])]},changeDetection:0})}return i})(),QP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Za,fr,Ji,YP,qP,dt]})}return i})();var Dxe=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),Fxe=i=>({value:"visible",params:i});function kxe(i,n){if(i&1&&P(0,"span"),i&2){let e=u().$implicit;ce("p-message-icon pi "+e.icon),G("data-pc-section","icon")}}function Nxe(i,n){i&1&&P(0,"CheckIcon"),i&2&&G("data-pc-section","icon")}function Lxe(i,n){i&1&&P(0,"InfoCircleIcon"),i&2&&G("data-pc-section","icon")}function Mxe(i,n){i&1&&P(0,"TimesCircleIcon"),i&2&&G("data-pc-section","icon")}function Vxe(i,n){i&1&&P(0,"ExclamationTriangleIcon"),i&2&&G("data-pc-section","icon")}function Bxe(i,n){if(i&1&&(m(0,"span",10),he(1),v(2,Nxe,1,1,"CheckIcon",11)(3,Lxe,1,1,"InfoCircleIcon",11)(4,Mxe,1,1,"TimesCircleIcon",11)(5,Vxe,1,1,"ExclamationTriangleIcon",11),fe(),g()),i&2){let e=u().$implicit;p(2),f("ngIf",e.severity==="success"),p(),f("ngIf",e.severity==="info"),p(),f("ngIf",e.severity==="error"),p(),f("ngIf",e.severity==="warn")}}function Uxe(i,n){if(i&1&&P(0,"span",14),i&2){let e=u(2).$implicit;f("innerHTML",e.summary,an),G("data-pc-section","summary")}}function jxe(i,n){if(i&1&&P(0,"span",15),i&2){let e=u(2).$implicit;f("innerHTML",e.detail,an),G("data-pc-section","detail")}}function Gxe(i,n){if(i&1&&(he(0),v(1,Uxe,1,2,"span",12)(2,jxe,1,2,"span",13),fe()),i&2){let e=u().$implicit;p(),f("ngIf",e.summary),p(),f("ngIf",e.detail)}}function Hxe(i,n){if(i&1&&(m(0,"span",18),F(1),g()),i&2){let e=u(2).$implicit;G("data-pc-section","summary"),p(),$(e.summary)}}function Wxe(i,n){if(i&1&&(m(0,"span",19),F(1),g()),i&2){let e=u(2).$implicit;G("data-pc-section","detail"),p(),$(e.detail)}}function zxe(i,n){if(i&1&&v(0,Hxe,2,2,"span",16)(1,Wxe,2,2,"span",17),i&2){let e=u().$implicit;f("ngIf",e.summary),p(),f("ngIf",e.detail)}}function Kxe(i,n){if(i&1){let e=L();m(0,"button",20),k("click",function(){y(e);let r=u().index,o=u(2);return w(o.removeMessage(r))}),P(1,"TimesIcon",21),g()}if(i&2){let e=u(3);G("aria-label",e.closeAriaLabel)("data-pc-section","closebutton"),p(),f("styleClass","p-message-close-icon"),G("data-pc-section","closeicon")}}function $xe(i,n){if(i&1&&(m(0,"div",5)(1,"div",6),v(2,kxe,1,3,"span",7)(3,Bxe,6,4,"span",8)(4,Gxe,3,2,"ng-container",3)(5,zxe,2,2,"ng-template",null,1,Bt)(7,Kxe,2,4,"button",9),g()()),i&2){let e,t=n.$implicit,r=He(6),o=u(2);ce("p-message p-message-"+t.severity),f("@messageAnimation",ne(13,Fxe,Qe(10,Dxe,o.showTransitionOptions,o.hideTransitionOptions))),p(),G("data-pc-section","wrapper")("id",t.id||null),p(),f("ngIf",t.icon),p(),f("ngIf",!t.icon),p(),f("ngIf",!o.escape)("ngIfElse",r),p(3),f("ngIf",o.closable&&((e=t.closable)!==null&&e!==void 0?e:!0))}}function Jxe(i,n){if(i&1&&(he(0),v(1,$xe,8,15,"div",4),fe()),i&2){let e=u();p(),f("ngForOf",e.messages)}}function qxe(i,n){i&1&&ue(0)}function Yxe(i,n){if(i&1&&(m(0,"div",22)(1,"div",6),v(2,qxe,1,0,"ng-container",23),g()()),i&2){let e=u();f("ngClass","p-message p-message-"+e.severity),p(2),f("ngTemplateOutlet",e.contentTemplate)}}var D1=(()=>{class i{messageService;el;cd;config;set value(e){this.messages=e,this.startMessageLifes(this.messages)}closable=!0;style;styleClass;enableService=!0;key;escape=!0;severity;showTransitionOptions="300ms ease-out";hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)";valueChange=new X;onClose=new X;templates;messages;messageSubscription;clearSubscription;timerSubscriptions=[];contentTemplate;constructor(e,t,r,o){this.messageService=e,this.el=t,this.cd=r,this.config=o}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;default:this.contentTemplate=e.template;break}}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){Array.isArray(e)||(e=[e]);let t=e.filter(r=>this.key===r.key);this.messages=this.messages?[...this.messages,...t]:[...t],this.startMessageLifes(t),this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return e&&e.offsetParent?this.contentTemplate!=null||this.messages&&this.messages.length>0:!1}clear(){this.messages=[],this.valueChange.emit(this.messages)}removeMessage(e){let t=this.messages[e];this.messages=this.messages?.filter((r,o)=>o!==e),t&&this.onClose.emit(t),this.valueChange.emit(this.messages)}get icon(){let e=this.severity||(this.hasMessages()?this.messages[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle";default:return"pi-info-circle"}return null}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.timerSubscriptions?.forEach(e=>e.unsubscribe())}startMessageLifes(e){e?.forEach(t=>t.life&&this.startMessageLife(t))}startMessageLife(e){let t=El(e.life).subscribe(()=>{this.messages=this.messages?.filter(r=>r!==e),this.timerSubscriptions=this.timerSubscriptions?.filter(r=>r!==t),this.valueChange.emit(this.messages),this.cd.markForCheck()});this.timerSubscriptions.push(t)}static \u0275fac=function(t){return new(t||i)(S(Kt,8),S(Ze),S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-messages"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:[2,"closable","closable",Y],style:"style",styleClass:"styleClass",enableService:[2,"enableService","enableService",Y],key:"key",escape:[2,"escape","escape",Y],severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange",onClose:"onClose"},features:[tt],decls:4,vars:8,consts:[["staticMessage",""],["escapeOut",""],["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"class",4,"ngIf"],["class","p-message-icon",4,"ngIf"],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-message-icon"],[4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[3,"styleClass"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(t,r){if(t&1&&(m(0,"div",2),v(1,Jxe,2,1,"ng-container",3)(2,Yxe,3,2,"ng-template",null,0,Bt),g()),t&2){let o=He(3);ce(r.styleClass),f("ngStyle",r.style),G("aria-atomic",!0)("aria-live","assertive")("data-pc-name","message"),p(),f("ngIf",!r.contentTemplate)("ngIfElse",o)}},dependencies:()=>[je,hn,rt,mt,De,nn,On,Wf,nl,Hf,Ji],styles:[`@layer primeng{.p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center;flex:none}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}}
`],encapsulation:2,data:{animation:[Tn("messageAnimation",[ci(":enter",[qt({opacity:0,transform:"translateY(-25%)"}),li("{{showTransitionParams}}")]),ci(":leave",[li("{{hideTransitionParams}}",qt({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0})}return i})(),eg=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ln,On,Wf,nl,Hf,Ji,dt,dt]})}return i})();var Xxe=["*",[["p-header"]]],Qxe=["*","p-header"],Zxe=(i,n)=>({"p-fieldset p-component":!0,"p-fieldset-toggleable":i,"p-fieldset-expanded":n}),eTe=i=>({transitionParams:i,height:"0"}),tTe=i=>({value:"hidden",params:i}),iTe=i=>({transitionParams:i,height:"*"}),nTe=i=>({value:"visible",params:i});function rTe(i,n){i&1&&P(0,"PlusIcon",11),i&2&&(f("styleClass","p-fieldset-toggler"),G("data-pc-section","togglericon"))}function oTe(i,n){i&1&&ue(0)}function sTe(i,n){if(i&1&&(m(0,"span",12),v(1,oTe,1,0,"ng-container",6),g()),i&2){let e=u(3);G("data-pc-section","togglericon"),p(),f("ngTemplateOutlet",e.expandIconTemplate)}}function aTe(i,n){if(i&1&&(he(0),v(1,rTe,1,2,"PlusIcon",9)(2,sTe,2,2,"span",10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.expandIconTemplate),p(),f("ngIf",e.expandIconTemplate)}}function lTe(i,n){i&1&&P(0,"MinusIcon",11),i&2&&(f("styleClass","p-fieldset-toggler"),G("aria-hidden",!0)("data-pc-section","togglericon"))}function cTe(i,n){i&1&&ue(0)}function dTe(i,n){if(i&1&&(m(0,"span",12),v(1,cTe,1,0,"ng-container",6),g()),i&2){let e=u(3);G("data-pc-section","togglericon"),p(),f("ngTemplateOutlet",e.collapseIconTemplate)}}function pTe(i,n){if(i&1&&(he(0),v(1,lTe,1,3,"MinusIcon",9)(2,dTe,2,2,"span",10),fe()),i&2){let e=u(2);p(),f("ngIf",!e.collapseIconTemplate),p(),f("ngIf",e.collapseIconTemplate)}}function uTe(i,n){i&1&&ue(0)}function hTe(i,n){if(i&1){let e=L();he(0),m(1,"a",7),k("click",function(r){y(e);let o=u();return w(o.toggle(r))})("keydown",function(r){y(e);let o=u();return w(o.onKeyDown(r))}),v(2,aTe,3,2,"ng-container",8)(3,pTe,3,2,"ng-container",8)(4,uTe,1,0,"ng-container",6),g(),fe()}if(i&2){let e=u(),t=He(4);p(),G("id",e.id+"_header")("aria-controls",e.id+"_content")("aria-expanded",!e.collapsed)("aria-label",e.buttonAriaLabel),p(),f("ngIf",e.collapsed),p(),f("ngIf",!e.collapsed),p(),f("ngTemplateOutlet",t)}}function fTe(i,n){i&1&&ue(0)}function mTe(i,n){if(i&1&&(m(0,"span",13),F(1),g(),hi(2,1),v(3,fTe,1,0,"ng-container",6)),i&2){let e=u();G("data-pc-section","legendtitle"),p(),$(e.legend),p(2),f("ngTemplateOutlet",e.headerTemplate)}}function gTe(i,n){i&1&&ue(0)}var uu=(()=>{class i{el;legend;toggleable;collapsed=!1;style;styleClass;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";collapsedChange=new X;onBeforeToggle=new X;onAfterToggle=new X;templates;get id(){return Tt()}get buttonAriaLabel(){return this.legend}animating;headerTemplate;contentTemplate;collapseIconTemplate;expandIconTemplate;constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"expandicon":this.expandIconTemplate=e.template;break;case"collapseicon":this.collapseIconTemplate=e.template;break;case"content":this.contentTemplate=e.template;break}})}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.collapsed?this.expand():this.collapse(),this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed}),e.preventDefault()}onKeyDown(e){(e.code==="Enter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}expand(){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(){this.animating=!1}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275cmp=se({type:i,selectors:[["p-fieldset"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{legend:"legend",toggleable:[2,"toggleable","toggleable",Y],collapsed:[2,"collapsed","collapsed",Y],style:"style",styleClass:"styleClass",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},features:[tt],ngContentSelectors:Qxe,decls:9,vars:28,consts:[["legendContent",""],[3,"ngClass","ngStyle"],[1,"p-fieldset-legend"],[4,"ngIf","ngIfElse"],["role","region",1,"p-toggleable-content"],[1,"p-fieldset-content"],[4,"ngTemplateOutlet"],["pRipple","","tabindex","0","role","button",3,"click","keydown"],[4,"ngIf"],[3,"styleClass",4,"ngIf"],["class","p-fieldset-toggler",4,"ngIf"],[3,"styleClass"],[1,"p-fieldset-toggler"],[1,"p-fieldset-legend-text"]],template:function(t,r){if(t&1){let o=L();$i(Xxe),m(0,"fieldset",1)(1,"legend",2),v(2,hTe,5,7,"ng-container",3)(3,mTe,4,3,"ng-template",null,0,Bt),g(),m(5,"div",4),k("@fieldsetContent.done",function(){return y(o),w(r.onToggleDone())}),m(6,"div",5),hi(7),v(8,gTe,1,0,"ng-container",6),g()()()}if(t&2){let o=He(4);ce(r.styleClass),f("ngClass",Qe(17,Zxe,r.toggleable,!r.collapsed&&r.toggleable))("ngStyle",r.style),G("id",r.id)("data-pc-name","fieldset")("data-pc-section","root"),p(),G("data-pc-section","legend"),p(),f("ngIf",r.toggleable)("ngIfElse",o),p(3),f("@fieldsetContent",r.collapsed?ne(22,tTe,ne(20,eTe,r.transitionOptions)):ne(26,nTe,ne(24,iTe,r.animating?r.transitionOptions:"0ms"))),G("id",r.id+"_content")("aria-labelledby",r.id+"_header")("aria-hidden",r.collapsed)("data-pc-section","toggleablecontent"),p(),G("data-pc-section","content"),p(2),f("ngTemplateOutlet",r.contentTemplate)}},dependencies:()=>[je,rt,mt,De,nn,Ha,Qs],styles:[`@layer primeng{.p-fieldset{min-width:initial}.p-fieldset-legend>a,.p-fieldset-legend>span{display:flex;align-items:center;justify-content:center}.p-fieldset-toggleable .p-fieldset-legend a{cursor:pointer;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-fieldset-legend-text{line-height:1}.p-fieldset-toggleable.p-fieldset-expanded>.p-toggleable-content:not(.ng-animating){overflow:visible}.p-fieldset-toggleable .p-toggleable-content{overflow:hidden}}
`],encapsulation:2,data:{animation:[Tn("fieldsetContent",[Yr("hidden",qt({height:"0"})),Yr("visible",qt({height:"*"})),ci("visible <=> hidden",[li("{{transitionParams}}")]),ci("void => *",li(0))])]},changeDetection:0})}return i})(),ZP=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ln,Ha,Qs,dt]})}return i})();var _Te=["headerchkbox"],CTe=["filter"],ITe=["lastHiddenFocusableElement"],yTe=["firstHiddenFocusableElement"],wTe=["scroller"],vTe=["list"],bTe=["wrapper"],STe=[[["p-header"]],[["p-footer"]]],ETe=["p-header","p-footer"],k1=(i,n)=>({$implicit:i,options:n}),sG=i=>({"p-checkbox-disabled":i}),ATe=(i,n,e)=>({"p-highlight":i,"p-focus":n,"p-disabled":e}),aG=i=>({options:i}),eD=i=>({height:i}),xTe=()=>({}),TTe=i=>({$implicit:i}),OTe=(i,n,e)=>({"p-listbox-item":!0,"p-highlight":i,"p-focus":n,"p-disabled":e}),RTe=(i,n)=>({$implicit:i,index:n}),PTe=i=>({"p-highlight":i});function DTe(i,n){i&1&&ue(0)}function FTe(i,n){if(i&1&&(m(0,"div",19),hi(1),v(2,DTe,1,0,"ng-container",20),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",Qe(2,k1,e.modelValue(),e.visibleOptions()))}}function kTe(i,n){i&1&&P(0,"CheckIcon",29),i&2&&(f("styleClass","p-checkbox-icon"),G("aria-hidden",!0))}function NTe(i,n){}function LTe(i,n){i&1&&v(0,NTe,0,0,"ng-template")}function MTe(i,n){if(i&1&&(m(0,"span",30),v(1,LTe,1,0,null,31),g()),i&2){let e=u(4);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.checkIconTemplate)}}function VTe(i,n){if(i&1&&(he(0),v(1,kTe,1,2,"CheckIcon",27)(2,MTe,2,2,"span",28),fe()),i&2){let e=u(3);p(),f("ngIf",!e.checkIconTemplate),p(),f("ngIf",e.checkIconTemplate)}}function BTe(i,n){if(i&1){let e=L();m(0,"div",23),k("click",function(r){y(e);let o=u(2);return w(o.onToggleAll(r))})("keydown",function(r){y(e);let o=u(2);return w(o.onHeaderCheckboxKeyDown(r))}),m(1,"div",24)(2,"input",25,5),k("focus",function(r){y(e);let o=u(2);return w(o.onHeaderCheckboxFocus(r))})("blur",function(r){y(e);let o=u(2);return w(o.onHeaderCheckboxBlur(r))}),g()(),m(4,"div",26),v(5,VTe,3,2,"ng-container",16),g()()}if(i&2){let e=u(2);f("ngClass",ne(8,sG,e.disabled||e.toggleAllDisabled)),p(),G("data-p-hidden-accessible",!0),p(),f("disabled",e.disabled||e.toggleAllDisabled),G("checked",e.allSelected())("aria-label",e.toggleAllAriaLabel),p(2),f("ngClass",en(10,ATe,e.allSelected(),e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),G("aria-checked",e.allSelected()),p(),f("ngIf",e.allSelected())}}function UTe(i,n){i&1&&ue(0)}function jTe(i,n){if(i&1&&(he(0),v(1,UTe,1,0,"ng-container",20),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",ne(2,aG,e.filterOptions))}}function GTe(i,n){i&1&&P(0,"SearchIcon",29),i&2&&(f("styleClass","p-listbox-filter-icon"),G("aria-hidden",!0))}function HTe(i,n){}function WTe(i,n){i&1&&v(0,HTe,0,0,"ng-template")}function zTe(i,n){if(i&1&&(m(0,"span",37),v(1,WTe,1,0,null,31),g()),i&2){let e=u(4);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.filterIconTemplate)}}function KTe(i,n){if(i&1){let e=L();m(0,"div",34)(1,"input",35,6),k("input",function(r){y(e);let o=u(3);return w(o.onFilterChange(r))})("keydown",function(r){y(e);let o=u(3);return w(o.onFilterKeyDown(r))})("focus",function(r){y(e);let o=u(3);return w(o.onFilterFocus(r))})("blur",function(r){y(e);let o=u(3);return w(o.onFilterBlur(r))}),g(),v(3,GTe,1,2,"SearchIcon",27)(4,zTe,2,2,"span",36),g()}if(i&2){let e=u(3);p(),f("value",e._filterValue()||"")("disabled",e.disabled)("tabindex",!e.disabled&&!e.focused?e.tabindex:-1),G("aria-owns",e.id+"_list")("aria-activedescendant",e.focusedOptionId)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel),p(2),f("ngIf",!e.filterIconTemplate),p(),f("ngIf",e.filterIconTemplate)}}function $Te(i,n){if(i&1&&(v(0,KTe,5,9,"div",32),m(1,"span",33),F(2),g()),i&2){let e=u(2);f("ngIf",e.filter),p(),G("data-p-hidden-accessible",!0),p(),J(" ",e.filterResultMessageText," ")}}function JTe(i,n){if(i&1&&(m(0,"div",19),v(1,BTe,6,14,"div",21)(2,jTe,2,4,"ng-container",22)(3,$Te,3,3,"ng-template",null,4,Bt),g()),i&2){let e=He(4),t=u();p(),f("ngIf",t.checkbox&&t.multiple&&t.showToggleAll),p(),f("ngIf",t.filterTemplate)("ngIfElse",e)}}function qTe(i,n){i&1&&ue(0)}function YTe(i,n){if(i&1&&v(0,qTe,1,0,"ng-container",20),i&2){let e=n.$implicit,t=n.options;u(2);let r=He(10);f("ngTemplateOutlet",r)("ngTemplateOutletContext",Qe(2,k1,e,t))}}function XTe(i,n){i&1&&ue(0)}function QTe(i,n){if(i&1&&v(0,XTe,1,0,"ng-container",20),i&2){let e=n.options,t=u(3);f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(2,aG,e))}}function ZTe(i,n){i&1&&(he(0),v(1,QTe,1,4,"ng-template",40),fe())}function eOe(i,n){if(i&1){let e=L();m(0,"p-scroller",38,7),k("onLazyLoad",function(r){y(e);let o=u();return w(o.onLazyLoad.emit(r))}),v(2,YTe,1,5,"ng-template",39)(3,ZTe,2,0,"ng-container",16),g()}if(i&2){let e=u();st(ne(9,eD,e.scrollHeight)),f("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions)("tabindex",e.scrollerTabIndex),p(3),f("ngIf",e.loaderTemplate)}}function tOe(i,n){i&1&&ue(0)}function iOe(i,n){if(i&1&&(he(0),v(1,tOe,1,0,"ng-container",20),fe()),i&2){let e=u(),t=He(10);p(),f("ngTemplateOutlet",t)("ngTemplateOutletContext",Qe(3,k1,e.visibleOptions(),Ae(2,xTe)))}}function nOe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2).$implicit,t=u(2);p(),$(t.getOptionGroupLabel(e.optionGroup))}}function rOe(i,n){i&1&&ue(0)}function oOe(i,n){if(i&1&&(he(0),m(1,"li",44),v(2,nOe,2,1,"span",16)(3,rOe,1,0,"ng-container",20),g(),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u();p(),f("ngStyle",ne(5,eD,o.itemSize+"px")),G("id",s.id+"_"+s.getOptionIndex(r,o)),p(),f("ngIf",!s.groupTemplate),p(),f("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",ne(7,TTe,t.optionGroup))}}function sOe(i,n){i&1&&P(0,"CheckIcon",29),i&2&&(f("styleClass","p-checkbox-icon"),G("aria-hidden",!0))}function aOe(i,n){}function lOe(i,n){i&1&&v(0,aOe,0,0,"ng-template")}function cOe(i,n){if(i&1&&(m(0,"span",30),v(1,lOe,1,0,null,31),g()),i&2){let e=u(6);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.checkIconTemplate)}}function dOe(i,n){if(i&1&&(he(0),v(1,sOe,1,2,"CheckIcon",27)(2,cOe,2,2,"span",28),fe()),i&2){let e=u(5);p(),f("ngIf",!e.checkIconTemplate),p(),f("ngIf",e.checkIconTemplate)}}function pOe(i,n){if(i&1&&(m(0,"div",47)(1,"div",48),v(2,dOe,3,2,"ng-container",16),g()()),i&2){let e=u(2).$implicit,t=u(2);f("ngClass",ne(3,sG,t.disabled||t.isOptionDisabled(e))),p(),f("ngClass",ne(5,PTe,t.isSelected(e))),p(),f("ngIf",t.isSelected(e))}}function uOe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2).$implicit,t=u(2);p(),$(t.getOptionLabel(e))}}function hOe(i,n){i&1&&ue(0)}function fOe(i,n){if(i&1){let e=L();he(0),m(1,"li",45),k("click",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u().options,c=u();return w(c.onOptionSelect(r,s,c.getOptionIndex(a,l)))})("dblclick",function(r){y(e);let o=u().$implicit,s=u(2);return w(s.onOptionDoubleClick(r,o))})("mousedown",function(r){y(e);let o=u().index,s=u().options,a=u();return w(a.onOptionMouseDown(r,a.getOptionIndex(o,s)))})("mouseenter",function(r){y(e);let o=u().index,s=u().options,a=u();return w(a.onOptionMouseEnter(r,a.getOptionIndex(o,s)))})("touchend",function(){y(e);let r=u(3);return w(r.onOptionTouchEnd())}),v(2,pOe,3,7,"div",46)(3,uOe,2,1,"span",16)(4,hOe,1,0,"ng-container",20),g(),fe()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u();p(),f("ngStyle",ne(12,eD,o.itemSize+"px"))("ngClass",en(14,OTe,s.isSelected(t),s.focusedOptionIndex()===s.getOptionIndex(r,o),s.isOptionDisabled(t))),G("id",s.id+"_"+s.getOptionIndex(r,o))("aria-label",s.getOptionLabel(t))("aria-selected",s.isSelected(t))("aria-disabled",s.isOptionDisabled(t))("aria-setsize",s.ariaSetSize)("ariaPosInset",s.getAriaPosInset(s.getOptionIndex(r,o))),p(),f("ngIf",s.checkbox&&s.multiple),p(),f("ngIf",!s.itemTemplate),p(),f("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Qe(18,RTe,t,s.getOptionIndex(r,o)))}}function mOe(i,n){if(i&1&&v(0,oOe,4,9,"ng-container",16)(1,fOe,5,21,"ng-container",16),i&2){let e=n.$implicit,t=u(2);f("ngIf",t.isOptionGroup(e)),p(),f("ngIf",!t.isOptionGroup(e))}}function gOe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),J(" ",e.emptyFilterMessageText," ")}}function _Oe(i,n){i&1&&ue(0,null,9)}function COe(i,n){if(i&1&&(m(0,"li",49),v(1,gOe,2,1,"ng-container",22)(2,_Oe,2,0,"ng-container",31),g()),i&2){let e=u(2);p(),f("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),p(),f("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function IOe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),J(" ",e.emptyMessage," ")}}function yOe(i,n){i&1&&ue(0,null,10)}function wOe(i,n){if(i&1&&(m(0,"li",49),v(1,IOe,2,1,"ng-container",22)(2,yOe,2,0,"ng-container",31),g()),i&2){let e=u(2);p(),f("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),p(),f("ngTemplateOutlet",e.emptyTemplate)}}function vOe(i,n){if(i&1){let e=L();m(0,"ul",41,8),k("focus",function(r){y(e);let o=u();return w(o.onListFocus(r))})("blur",function(r){y(e);let o=u();return w(o.onListBlur(r))})("keydown",function(r){y(e);let o=u();return w(o.onListKeyDown(r))}),v(2,mOe,2,2,"ng-template",42)(3,COe,3,3,"li",43)(4,wOe,3,3,"li",43),g()}if(i&2){let e=n.$implicit,t=n.options,r=u();f("tabindex",-1)("ngClass",t.contentStyleClass)("ngStyle",t.contentStyle),G("aria-multiselectable",!0)("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("aria-label",r.ariaLabel)("aria-multiselectable",r.multiple)("aria-disabled",r.disabled),p(2),f("ngForOf",e),p(),f("ngIf",r.hasFilter()&&r.isEmpty()),p(),f("ngIf",!r.hasFilter()&&r.isEmpty())}}function bOe(i,n){i&1&&ue(0)}function SOe(i,n){if(i&1&&(m(0,"div",50),hi(1,1),v(2,bOe,1,0,"ng-container",20),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",Qe(2,k1,e.modelValue(),e.visibleOptions()))}}function EOe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(2);p(),J(" ",e.emptyMessage," ")}}function AOe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(2);p(),J(" ",e.selectedMessageText," ")}}function xOe(i,n){if(i&1&&(m(0,"span",51),v(1,EOe,2,1,"ng-container",16)(2,AOe,2,1,"ng-container",16),g()),i&2){let e=u();p(),f("ngIf",e.hasEmptyMessage()),p(),f("ngIf",!e.hasEmptyMessage())}}var TOe={provide:fn,useExisting:Zt(()=>tD),multi:!0},tD=(()=>{class i{el;cd;filterService;config;renderer;id;searchMessage;emptySelectionMessage;selectionMessage;autoOptionFocus=!0;ariaLabel;selectOnFocus;searchLocale;focusOnHover;filterMessage;filterFields;lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;scrollHeight="200px";tabindex=0;multiple;style;styleClass;listStyle;listStyleClass;readonly;disabled;checkbox=!1;filter=!1;filterBy;filterMatchMode="contains";filterLocale;metaKeySelection=!1;dataKey;showToggleAll=!0;optionLabel;optionValue;optionGroupChildren="items";optionGroupLabel="label";optionDisabled;ariaFilterLabel;filterPlaceHolder;emptyFilterMessage;emptyMessage;group;get options(){return this._options()}set options(e){this._options.set(e)}get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get selectAll(){return this._selectAll}set selectAll(e){this._selectAll=e}onChange=new X;onClick=new X;onDblClick=new X;onFilter=new X;onFocus=new X;onBlur=new X;onSelectAllChange=new X;headerCheckboxViewChild;filterViewChild;lastHiddenFocusableElement;firstHiddenFocusableElement;scroller;listViewChild;wrapperViewChild;headerFacet;footerFacet;templates;itemTemplate;groupTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;filterIconTemplate;checkIconTemplate;_filterValue=Gi(null);_filteredOptions;filterOptions;filtered;value;onModelChange=()=>{};onModelTouched=()=>{};optionTouched;focus;headerCheckboxFocus;translationSubscription;focused;scrollerTabIndex="0";get containerClass(){return{"p-listbox p-component":!0,"p-disabled":this.disabled}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}get filterResultMessageText(){return ge.isNotEmpty(this.visibleOptions())?this.filterMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptyFilterMessageText}get filterMessageText(){return this.filterMessage||this.config.translation.searchMessage||""}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptyFilterMessageText(){return this.emptyFilterMessage||this.config.translation.emptySearchMessage||this.config.translation.emptyFilterMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption()?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue().length:"1"):this.emptySelectionMessageText}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}get virtualScrollerDisabled(){return!this.virtualScroll}get searchFields(){return this.filterFields||[this.optionLabel]}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}searchValue;searchTimeout;_selectAll=null;_options=Gi(null);startRangeIndex=Gi(-1);focusedOptionIndex=Gi(-1);modelValue=Gi(null);visibleOptions=Gr(()=>{let e=this.group?this.flatOptions(this._options()):this._options()||[],t=this._filterValue();return this.searchFields[0]===void 0?t?e.filter(r=>r.toString().toLocaleLowerCase(this.filterLocale).indexOf(t.toLocaleLowerCase(this.filterLocale).trim())!==-1):e:t?this.filterService.filter(e,this.searchFields,t,this.filterMatchMode,this.filterLocale):e});constructor(e,t,r,o,s){this.el=e,this.cd=t,this.filterService=r,this.config=o,this.renderer=s}ngOnInit(){this.id=this.id||Tt(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;case"checkicon":this.checkIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}writeValue(e){this.value=e,this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}flatOptions(e){return(e||[]).reduce((t,r,o)=>{t.push({optionGroup:r,group:!0,index:o});let s=this.getOptionGroupChildren(r);return s&&s.forEach(a=>t.push(a)),t},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&!this.multiple){let e=this.findFirstFocusedOptionIndex();this.focusedOptionIndex.set(e),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()])}}updateModel(e,t){this.value=e,this.modelValue.set(e),this.onModelChange(e),this.onChange.emit({originalEvent:t,value:this.value})}removeOption(e){return this.modelValue().filter(t=>!ge.equals(t,this.getOptionValue(e),this.equalityKey()))}onOptionSelect(e,t,r=-1){this.disabled||this.isOptionDisabled(t)||this.readonly||(e&&this.onClick.emit({originalEvent:e,option:t,value:this.value}),this.multiple?this.onOptionSelectMultiple(e,t):this.onOptionSelectSingle(e,t),this.optionTouched=!1,r!==-1&&this.focusedOptionIndex.set(r))}onOptionSelectMultiple(e,t){let r=this.isSelected(t),o=null;if(this.optionTouched?!1:this.metaKeySelection){let a=e.metaKey||e.ctrlKey;r?o=a?this.removeOption(t):[this.getOptionValue(t)]:(o=a?this.modelValue()||[]:[],o=[...o,this.getOptionValue(t)])}else o=r?this.removeOption(t):[...this.modelValue()||[],this.getOptionValue(t)];this.updateModel(o,e)}onOptionSelectSingle(e,t){let r=this.isSelected(t),o=!1,s=null;if(this.optionTouched?!1:this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(s=null,o=!0):(s=this.getOptionValue(t),o=!0)}else s=r?null:this.getOptionValue(t),o=!0;o&&this.updateModel(s,e)}onOptionSelectRange(e,t=-1,r=-1){if(t===-1&&(t=this.findNearestSelectedOptionIndex(r,!0)),r===-1&&(r=this.findNearestSelectedOptionIndex(t)),t!==-1&&r!==-1){let o=Math.min(t,r),s=Math.max(t,r),a=this.visibleOptions().slice(o,s+1).filter(l=>this.isValidOption(l)).map(l=>this.getOptionValue(l));this.updateModel(a,e)}}onToggleAll(e){if(!(this.disabled||this.readonly)){if(j.focus(this.headerCheckboxViewChild.nativeElement),this.selectAll!==null)this.onSelectAllChange.emit({originalEvent:e,checked:!this.allSelected()});else{let t=this.allSelected()?[]:this.visibleOptions().filter(r=>this.isValidOption(r)).map(r=>this.getOptionValue(r));this.updateModel(t,e)}e.preventDefault()}}allSelected(){return this.selectAll!==null?this.selectAll:ge.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(e=>this.isOptionGroup(e)||this.isOptionDisabled(e)||this.isSelected(e))}onOptionTouchEnd(){this.disabled||(this.optionTouched=!0)}onOptionMouseDown(e,t){this.changeFocusedOptionIndex(e,t)}onOptionMouseEnter(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)}onOptionDoubleClick(e,t){this.disabled||this.isOptionDisabled(t)||this.readonly||this.onDblClick.emit({originalEvent:e,option:t,value:this.value})}onFirstHiddenFocus(e){j.focus(this.listViewChild.nativeElement);let t=j.getFirstFocusableElement(this.el.nativeElement,':not([data-p-hidden-focusable="true"])');this.lastHiddenFocusableElement.nativeElement.tabIndex=ge.isEmpty(t)?"-1":void 0,this.firstHiddenFocusableElement.nativeElement.tabIndex=-1}onLastHiddenFocus(e){if(e.relatedTarget===this.listViewChild.nativeElement){let r=j.getFirstFocusableElement(this.el.nativeElement,":not(.p-hidden-focusable)");j.focus(r),this.firstHiddenFocusableElement.nativeElement.tabIndex=void 0}else j.focus(this.firstHiddenFocusableElement.nativeElement);this.lastHiddenFocusableElement.nativeElement.tabIndex=-1}onFocusout(e){!this.el.nativeElement.contains(e.relatedTarget)&&this.lastHiddenFocusableElement&&this.firstHiddenFocusableElement&&(this.firstHiddenFocusableElement.nativeElement.tabIndex=this.lastHiddenFocusableElement.nativeElement.tabIndex=void 0,this.wrapperViewChild.nativeElement.tabIndex="0",this.scrollerTabIndex="0")}onListFocus(e){this.focused=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.onFocus.emit(e),this.wrapperViewChild.nativeElement.tabIndex="-1",this.scrollerTabIndex="-1"}onListBlur(e){this.focused=!1,this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1),this.searchValue=""}onHeaderCheckboxFocus(e){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onHeaderCheckboxKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"Space":this.onToggleAll(e);break;case"Enter":this.onToggleAll(e);break;case"Tab":this.onHeaderCheckboxTabKeyDown(e);break;default:break}}onHeaderCheckboxTabKeyDown(e){j.focus(this.listViewChild.nativeElement),e.preventDefault()}onFilterChange(e){let t=e.target.value?.trim();this._filterValue.set(t),this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0)}onFilterFocus(e){this.wrapperViewChild.nativeElement.tabIndex="-1"}onFilterBlur(e){this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1)}onListKeyDown(e){let t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":case"NumpadEnter":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if(this.multiple&&e.code==="KeyA"&&t){let r=this.visibleOptions().filter(o=>this.isValidOption(o)).map(o=>this.getOptionValue(o));this.updateModel(r,e),e.preventDefault();break}!t&&ge.isPrintableCharacter(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:break}}onArrowDownKey(e){let t=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex(),t),this.changeFocusedOptionIndex(e,t),e.preventDefault()}onArrowUpKey(e){let t=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,t,this.startRangeIndex()),this.changeFocusedOptionIndex(e,t),e.preventDefault()}onArrowLeftKey(e,t=!1){t&&this.focusedOptionIndex.set(-1)}onHomeKey(e,t=!1){if(t)e.currentTarget.setSelectionRange(0,0),this.focusedOptionIndex.set(-1);else{let r=e.metaKey||e.ctrlKey,o=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&r&&this.onOptionSelectRange(e,o,this.startRangeIndex()),this.changeFocusedOptionIndex(e,o)}e.preventDefault()}onEndKey(e,t=!1){if(t){let r=e.currentTarget,o=r.value.length;r.setSelectionRange(o,o),this.focusedOptionIndex.set(-1)}else{let r=e.metaKey||e.ctrlKey,o=this.findLastOptionIndex();this.multiple&&e.shiftKey&&r&&this.onOptionSelectRange(e,this.startRangeIndex(),o),this.changeFocusedOptionIndex(e,o)}e.preventDefault()}onPageDownKey(e){this.scrollInView(0),e.preventDefault()}onPageUpKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onEnterKey(e){this.focusedOptionIndex()!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex()):this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()])),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}onShiftKey(){let e=this.focusedOptionIndex();this.startRangeIndex.set(e)}getOptionGroupChildren(e){return this.optionGroupChildren?ge.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?ge.resolveFieldData(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionLabel(e){return this.optionLabel?ge.resolveFieldData(e,this.optionLabel):e.label!=null?e.label:e}getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t.getItemOptions(e).index}getOptionValue(e){return this.optionValue?ge.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1}hasSelectedOption(){return ge.isNotEmpty(this.modelValue())}isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group}changeFocusedOptionIndex(e,t){this.focusedOptionIndex()!==t&&(this.focusedOptionIndex.set(t),this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions()[t]))}searchOptions(e,t){this.searchValue=(this.searchValue||"")+t;let r=-1,o=!1;return this.focusedOptionIndex()!==-1?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)),r=r===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(s=>this.isOptionMatched(s)),r!==-1&&(o=!0),r===-1&&this.focusedOptionIndex()===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedOptionId,r=j.findSingle(this.listViewChild.nativeElement,`li[id="${t}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||this.virtualScroll&&this.scroller.scrollToIndex(e!==-1?e:this.focusedOptionIndex())}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findLastOptionIndex(){return ge.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findFirstFocusedOptionIndex(){let e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findLastFocusedOptionIndex(){let e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findLastSelectedOptionIndex(){return this.hasSelectedOption()?ge.findLastIndex(this.visibleOptions(),e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let t=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return t>-1?t+e+1:e}findNextSelectedOptionIndex(e){let t=this.hasSelectedOption()&&e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidSelectedOption(r)):-1;return t>-1?t+e+1:-1}findPrevSelectedOptionIndex(e){let t=this.hasSelectedOption()&&e>0?ge.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidSelectedOption(r)):-1;return t>-1?t:-1}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findPrevOptionIndex(e){let t=e>0?ge.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return t>-1?t:e}findNearestSelectedOptionIndex(e,t=!1){let r=-1;return this.hasSelectedOption()&&(t?(r=this.findPrevSelectedOptionIndex(e),r=r===-1?this.findNextSelectedOptionIndex(e):r):(r=this.findNextSelectedOptionIndex(e),r=r===-1?this.findPrevSelectedOptionIndex(e):r)),r>-1?r:e}equalityKey(){return this.optionValue?null:this.dataKey}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isOptionDisabled(e){return this.optionDisabled?ge.resolveFieldData(e,this.optionDisabled):!1}isSelected(e){let t=this.getOptionValue(e);return this.multiple?(this.modelValue()||[]).some(r=>ge.equals(r,t,this.equalityKey())):ge.equals(this.modelValue(),t,this.equalityKey())}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isEmpty(){return!this._options()?.length||!this.visibleOptions()?.length}hasEmptyMessage(){return!!this.emptyMessage}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue.set(null)}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(Ze),S(we),S(hc),S(Ht),S(jt))};static \u0275cmp=se({type:i,selectors:[["p-listbox"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,fc,5),ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.headerFacet=s.first),te(s=ie())&&(r.footerFacet=s.first),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(_Te,5),le(CTe,5),le(ITe,5),le(yTe,5),le(wTe,5),le(vTe,5),le(bTe,5)),t&2){let o;te(o=ie())&&(r.headerCheckboxViewChild=o.first),te(o=ie())&&(r.filterViewChild=o.first),te(o=ie())&&(r.lastHiddenFocusableElement=o.first),te(o=ie())&&(r.firstHiddenFocusableElement=o.first),te(o=ie())&&(r.scroller=o.first),te(o=ie())&&(r.listViewChild=o.first),te(o=ie())&&(r.wrapperViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{id:"id",searchMessage:"searchMessage",emptySelectionMessage:"emptySelectionMessage",selectionMessage:"selectionMessage",autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",Y],ariaLabel:"ariaLabel",selectOnFocus:[2,"selectOnFocus","selectOnFocus",Y],searchLocale:[2,"searchLocale","searchLocale",Y],focusOnHover:[2,"focusOnHover","focusOnHover",Y],filterMessage:"filterMessage",filterFields:"filterFields",lazy:[2,"lazy","lazy",Y],virtualScroll:[2,"virtualScroll","virtualScroll",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],virtualScrollOptions:"virtualScrollOptions",scrollHeight:"scrollHeight",tabindex:[2,"tabindex","tabindex",We],multiple:[2,"multiple","multiple",Y],style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:[2,"readonly","readonly",Y],disabled:[2,"disabled","disabled",Y],checkbox:[2,"checkbox","checkbox",Y],filter:[2,"filter","filter",Y],filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:[2,"metaKeySelection","metaKeySelection",Y],dataKey:"dataKey",showToggleAll:[2,"showToggleAll","showToggleAll",Y],optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:[2,"group","group",Y],options:"options",filterValue:"filterValue",selectAll:"selectAll"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onSelectAllChange:"onSelectAllChange"},features:[et([TOe]),tt],ngContentSelectors:ETe,decls:15,vars:22,consts:[["firstHiddenFocusableElement",""],["wrapper",""],["buildInItems",""],["lastHiddenFocusableElement",""],["builtInFilterElement",""],["headerchkbox",""],["filterInput",""],["scroller",""],["list",""],["emptyFilter",""],["empty",""],[3,"focusout","ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus","tabindex"],["class","p-listbox-header",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"items","style","itemSize","autoSize","lazy","options","tabindex","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],["role","status","aria-live","polite","class","p-hidden-accessible",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"focus","blur","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],["class","p-listbox-filter-container",4,"ngIf"],["role","status","attr.aria-live","polite",1,"p-hidden-accessible"],[1,"p-listbox-filter-container"],["type","text","role","searchbox",1,"p-listbox-filter","p-inputtext","p-component",3,"input","keydown","focus","blur","value","disabled","tabindex"],["class","p-listbox-filter-icon",4,"ngIf"],[1,"p-listbox-filter-icon"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options","tabindex"],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-listbox-list",3,"focus","blur","keydown","tabindex","ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-listbox-empty-message","role","option",4,"ngIf"],["role","option",1,"p-listbox-item-group",3,"ngStyle"],["pRipple","","role","option",1,"p-listbox-item",3,"click","dblclick","mousedown","mouseenter","touchend","ngStyle","ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],["role","option",1,"p-listbox-empty-message"],[1,"p-listbox-footer"],["role","status","aria-live","polite",1,"p-hidden-accessible"]],template:function(t,r){if(t&1){let o=L();$i(STe),m(0,"div",11),k("focusout",function(a){return y(o),w(r.onFocusout(a))}),m(1,"span",12,0),k("focus",function(a){return y(o),w(r.onFirstHiddenFocus(a))}),g(),v(3,FTe,3,5,"div",13)(4,JTe,5,3,"div",13),m(5,"div",14,1),v(7,eOe,4,11,"p-scroller",15)(8,iOe,2,6,"ng-container",16)(9,vOe,5,11,"ng-template",null,2,Bt),g(),v(11,SOe,3,5,"div",17)(12,xOe,3,2,"span",18),m(13,"span",12,3),k("focus",function(a){return y(o),w(r.onLastHiddenFocus(a))}),g()()}t&2&&(ce(r.styleClass),f("ngClass",r.containerClass)("ngStyle",r.style),G("id",r.id),p(),f("tabindex",r.disabled?-1:r.tabindex),G("data-p-hidden-focusable",!0),p(2),f("ngIf",r.headerFacet||r.headerTemplate),p(),f("ngIf",r.checkbox&&r.multiple&&r.showToggleAll||r.filter),p(),ce(r.listStyleClass),Wn("max-height",r.virtualScroll?"auto":r.scrollHeight||"auto"),f("ngClass","p-listbox-list-wrapper")("ngStyle",r.listStyle),G("tabindex",!r.disabled&&"0"),p(2),f("ngIf",r.virtualScroll),p(),f("ngIf",!r.virtualScroll),p(3),f("ngIf",r.footerFacet||r.footerTemplate),p(),f("ngIf",r.isEmpty()),p(),f("tabindex",r.disabled?-1:r.tabindex),G("data-p-hidden-focusable",!0))},dependencies:()=>[je,hn,rt,mt,De,Ee,nn,Xs,ol,On],styles:[`@layer primeng{.p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}}
`],encapsulation:2,changeDetection:0})}return i})(),iD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,ln,so,ol,On,dt,so]})}return i})();var ROe=["inputtext"],POe=["container"],DOe=(i,n,e,t)=>({"p-chips p-component p-input-wrapper":!0,"p-disabled":i,"p-focus":n,"p-inputwrapper-filled":e,"p-inputwrapper-focus":t}),FOe=i=>({"p-inputtext p-chips-multiple-container":!0,"p-variant-filled":i}),kOe=i=>({"p-chips-clearable":i}),NOe=i=>({"p-chips-token":!0,"p-focus":i}),LOe=i=>({$implicit:i});function MOe(i,n){i&1&&ue(0)}function VOe(i,n){if(i&1&&(m(0,"span",12),F(1),g()),i&2){let e=u().$implicit,t=u();G("data-pc-section","label"),p(),$(t.field?t.resolveFieldData(e,t.field):e)}}function BOe(i,n){if(i&1){let e=L();m(0,"TimesCircleIcon",15),k("click",function(r){y(e);let o=u(2).index,s=u();return w(s.removeItem(r,o))}),g()}i&2&&(f("styleClass","p-chips-token-icon"),G("data-pc-section","removeTokenIcon")("aria-hidden",!0))}function UOe(i,n){}function jOe(i,n){i&1&&v(0,UOe,0,0,"ng-template")}function GOe(i,n){if(i&1){let e=L();m(0,"span",16),k("click",function(r){y(e);let o=u(2).index,s=u();return w(s.removeItem(r,o))}),v(1,jOe,1,0,null,17),g()}if(i&2){let e=u(3);G("data-pc-section","removeTokenIcon")("aria-hidden",!0),p(),f("ngTemplateOutlet",e.removeTokenIconTemplate)}}function HOe(i,n){if(i&1&&(he(0),v(1,BOe,1,3,"TimesCircleIcon",13)(2,GOe,2,3,"span",14),fe()),i&2){let e=u(2);p(),f("ngIf",!e.removeTokenIconTemplate),p(),f("ngIf",e.removeTokenIconTemplate)}}function WOe(i,n){if(i&1){let e=L();m(0,"li",9,2),k("click",function(r){let o=y(e).$implicit,s=u();return w(s.onItemClick(r,o))})("contextmenu",function(r){let o=y(e).$implicit,s=u();return w(s.onItemContextMenu(r,o))}),v(2,MOe,1,0,"ng-container",10)(3,VOe,2,2,"span",11)(4,HOe,3,2,"ng-container",8),g()}if(i&2){let e=n.$implicit,t=n.index,r=u();f("ngClass",ne(12,NOe,r.focusedIndex===t)),G("id",r.id+"_chips_item_"+t)("ariaLabel",e)("aria-selected",!0)("aria-setsize",r.value.length)("aria-posinset",t+1)("data-p-focused",r.focusedIndex===t)("data-pc-section","token"),p(2),f("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ne(14,LOe,e)),p(),f("ngIf",!r.itemTemplate),p(),f("ngIf",!r.disabled)}}function zOe(i,n){if(i&1){let e=L();m(0,"TimesIcon",15),k("click",function(){y(e);let r=u(2);return w(r.clear())}),g()}i&2&&f("styleClass","p-chips-clear-icon")}function KOe(i,n){}function $Oe(i,n){i&1&&v(0,KOe,0,0,"ng-template")}function JOe(i,n){if(i&1){let e=L();m(0,"span",19),k("click",function(){y(e);let r=u(2);return w(r.clear())}),v(1,$Oe,1,0,null,17),g()}if(i&2){let e=u(2);p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function qOe(i,n){if(i&1&&(m(0,"li"),v(1,zOe,1,1,"TimesIcon",13)(2,JOe,2,1,"span",18),g()),i&2){let e=u();p(),f("ngIf",!e.clearIconTemplate),p(),f("ngIf",e.clearIconTemplate)}}var YOe={provide:fn,useExisting:Zt(()=>XOe),multi:!0},XOe=(()=>{class i{document;el;cd;config;style;styleClass;disabled;field;placeholder;max;maxLength;ariaLabel;ariaLabelledBy;tabindex;inputId;allowDuplicate=!0;caseSensitiveDuplication=!0;inputStyle;inputStyleClass;addOnTab;addOnBlur;separator;showClear=!1;autofocus;variant="outlined";onAdd=new X;onRemove=new X;onFocus=new X;onBlur=new X;onChipClick=new X;onChipContextMenu=new X;onClear=new X;inputViewChild;containerViewChild;templates;itemTemplate;removeTokenIconTemplate;clearIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};valueChanged;id=Tt();focused;focusedIndex;filled;get focusedOptionId(){return this.focusedIndex!==null?`${this.id}_chips_item_${this.focusedIndex}`:null}get isMaxedOut(){return this.max&&this.value&&this.max===this.value.length}constructor(e,t,r,o){this.document=e,this.el=t,this.cd=r,this.config=o}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"removetokenicon":this.removeTokenIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}}),this.updateFilledState()}onWrapperClick(){this.inputViewChild?.nativeElement.focus()}onContainerFocus(){this.focused=!0}onContainerBlur(){this.focusedIndex=-1,this.focused=!1}onContainerKeyDown(e){switch(e.code){case"ArrowLeft":this.onArrowLeftKeyOn();break;case"ArrowRight":this.onArrowRightKeyOn();break;case"Backspace":this.onBackspaceKeyOn(e);break;case"Space":this.focusedIndex!==null&&this.value&&this.value.length>0&&this.onItemClick(e,this.value[this.focusedIndex]);break;default:break}}onArrowLeftKeyOn(){this.inputViewChild.nativeElement.value.length===0&&this.value&&this.value.length>0&&(this.focusedIndex=this.focusedIndex===null?this.value.length-1:this.focusedIndex-1,this.focusedIndex<0&&(this.focusedIndex=0))}onArrowRightKeyOn(){this.inputViewChild.nativeElement.value.length===0&&this.value&&this.value.length>0&&(this.focusedIndex===this.value.length-1?(this.focusedIndex=null,this.inputViewChild?.nativeElement.focus()):this.focusedIndex++)}onBackspaceKeyOn(e){this.focusedIndex!==null&&this.removeItem(e,this.focusedIndex)}onInput(){this.updateFilledState(),this.focusedIndex=null}onPaste(e){this.disabled||(this.separator&&((e.clipboardData||this.document.defaultView.clipboardData).getData("Text").split(this.separator).forEach(r=>{this.addItem(e,r,!0)}),this.inputViewChild.nativeElement.value=""),this.updateFilledState())}updateFilledState(){!this.value||this.value.length===0?this.filled=this.inputViewChild&&this.inputViewChild.nativeElement&&this.inputViewChild.nativeElement.value!="":this.filled=!0}onItemClick(e,t){this.onChipClick.emit({originalEvent:e,value:t})}onItemContextMenu(e,t){this.onChipContextMenu.emit({originalEvent:e,value:t})}writeValue(e){this.value=e,this.updateMaxedOut(),this.updateFilledState(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}resolveFieldData(e,t){if(e&&t){if(t.indexOf(".")==-1)return e[t];{let s=t.split("."),a=e;for(var r=0,o=s.length;r<o;++r)a=a[s[r]];return a}}else return null}onInputFocus(e){this.focused=!0,this.focusedIndex=null,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.focusedIndex=null,this.addOnBlur&&this.inputViewChild.nativeElement.value&&this.addItem(e,this.inputViewChild.nativeElement.value,!1),this.onModelTouched(),this.onBlur.emit(e)}removeItem(e,t){if(this.disabled)return;let r=this.value[t];this.value=this.value.filter((o,s)=>s!=t),this.focusedIndex=null,this.inputViewChild.nativeElement.focus(),this.onModelChange(this.value),this.onRemove.emit({originalEvent:e,value:r}),this.updateFilledState(),this.updateMaxedOut()}addItem(e,t,r){if(this.value=this.value||[],t&&t.trim().length){let o=this.caseSensitiveDuplication?this.value.includes(t):this.value.some(s=>s.toLowerCase()===t.toLowerCase());(this.allowDuplicate||!o)&&!this.isMaxedOut&&(this.value=[...this.value,t],this.onModelChange(this.value),this.onAdd.emit({originalEvent:e,value:t}))}this.updateFilledState(),this.updateMaxedOut(),this.inputViewChild.nativeElement.value="",r&&e.preventDefault()}clear(){this.value=null,this.updateFilledState(),this.onModelChange(this.value),this.updateMaxedOut(),this.onClear.emit()}onKeyDown(e){let t=e.target.value;switch(e.code){case"Backspace":t.length===0&&this.value&&this.value.length>0&&(this.focusedIndex!==null?this.removeItem(e,this.focusedIndex):this.removeItem(e,this.value.length-1));break;case"Enter":case"NumpadEnter":t&&t.trim().length&&!this.isMaxedOut&&this.addItem(e,t,!0);break;case"Tab":this.addOnTab&&t&&t.trim().length&&!this.isMaxedOut&&(this.addItem(e,t,!0),e.preventDefault());break;case"ArrowLeft":t.length===0&&this.value&&this.value.length>0&&this.containerViewChild?.nativeElement.focus();break;case"ArrowRight":e.stopPropagation();break;default:this.separator&&(this.separator===e.key||e.key.match(this.separator))&&this.addItem(e,t,!0);break}}updateMaxedOut(){this.inputViewChild&&this.inputViewChild.nativeElement&&(this.isMaxedOut?(this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=!0):(this.disabled&&this.inputViewChild.nativeElement.blur(),this.inputViewChild.nativeElement.disabled=this.disabled||!1))}static \u0275fac=function(t){return new(t||i)(S(At),S(Ze),S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-chips"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(ROe,5),le(POe,5)),t&2){let o;te(o=ie())&&(r.inputViewChild=o.first),te(o=ie())&&(r.containerViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-chips-clearable",r.showClear)},inputs:{style:"style",styleClass:"styleClass",disabled:[2,"disabled","disabled",Y],field:"field",placeholder:"placeholder",max:[2,"max","max",We],maxLength:"maxLength",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",tabindex:[2,"tabindex","tabindex",We],inputId:"inputId",allowDuplicate:[2,"allowDuplicate","allowDuplicate",Y],caseSensitiveDuplication:[2,"caseSensitiveDuplication","caseSensitiveDuplication",Y],inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",addOnTab:[2,"addOnTab","addOnTab",Y],addOnBlur:[2,"addOnBlur","addOnBlur",Y],separator:"separator",showClear:[2,"showClear","showClear",Y],autofocus:[2,"autofocus","autofocus",Y],variant:"variant"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onFocus:"onFocus",onBlur:"onBlur",onChipClick:"onChipClick",onChipContextMenu:"onChipContextMenu",onClear:"onClear"},features:[et([YOe]),tt],decls:8,vars:34,consts:[["container",""],["inputtext",""],["token",""],[3,"ngClass","ngStyle"],["tabindex","-1","role","listbox",3,"click","focus","blur","keydown","ngClass"],["role","option",3,"ngClass","click","contextmenu",4,"ngFor","ngForOf"],["role","option",1,"p-chips-input-token",3,"ngClass"],["type","text","pAutoFocus","",3,"keydown","input","paste","focus","blur","disabled","ngStyle","autofocus"],[4,"ngIf"],["role","option",3,"click","contextmenu","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-chips-token-label",4,"ngIf"],[1,"p-chips-token-label"],[3,"styleClass","click",4,"ngIf"],["class","p-chips-token-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-chips-token-icon",3,"click"],[4,"ngTemplateOutlet"],["class","p-chips-clear-icon",3,"click",4,"ngIf"],[1,"p-chips-clear-icon",3,"click"]],template:function(t,r){if(t&1){let o=L();m(0,"div",3)(1,"ul",4,0),k("click",function(){return y(o),w(r.onWrapperClick())})("focus",function(){return y(o),w(r.onContainerFocus())})("blur",function(){return y(o),w(r.onContainerBlur())})("keydown",function(a){return y(o),w(r.onContainerKeyDown(a))}),v(3,WOe,5,16,"li",5),m(4,"li",6)(5,"input",7,1),k("keydown",function(a){return y(o),w(r.onKeyDown(a))})("input",function(){return y(o),w(r.onInput())})("paste",function(a){return y(o),w(r.onPaste(a))})("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))}),g()(),v(7,qOe,3,2,"li",8),g()()}t&2&&(ce(r.styleClass),f("ngClass",xn(25,DOe,r.disabled,r.focused,r.value&&r.value.length||(r.inputViewChild==null?null:r.inputViewChild.nativeElement.value)&&(r.inputViewChild==null?null:r.inputViewChild.nativeElement.value.length),r.focused))("ngStyle",r.style),G("data-pc-name","chips")("data-pc-section","root"),p(),f("ngClass",ne(30,FOe,r.variant==="filled"||r.config.inputStyle()==="filled")),G("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("aria-orientation","horizontal")("data-pc-section","container"),p(2),f("ngForOf",r.value),p(),f("ngClass",ne(32,kOe,r.showClear&&!r.disabled)),G("data-pc-section","inputToken"),p(),ce(r.inputStyleClass),f("disabled",r.disabled||r.isMaxedOut)("ngStyle",r.inputStyle)("autofocus",r.autofocus),G("id",r.inputId)("maxlength",r.maxLength)("placeholder",r.value&&r.value.length?null:r.placeholder)("tabindex",r.tabindex),p(2),f("ngIf",r.value!=null&&r.filled&&!r.disabled&&r.showClear))},dependencies:()=>[je,hn,rt,mt,De,Zn,nl,Ji],styles:[`@layer primeng{.p-chips{display:inline-flex}.p-chips-multiple-container{margin:0;padding:0;list-style-type:none;cursor:text;overflow:hidden;display:flex;align-items:center;flex-wrap:wrap}.p-chips-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto;max-width:100%}.p-chips-token-label{min-width:0%;overflow:auto}.p-chips-token-label::-webkit-scrollbar{display:none}.p-chips-input-token{flex:1 1 auto;display:inline-flex}.p-chips-token-icon{cursor:pointer}.p-chips-input-token input{border:0 none;outline:0 none;background-color:transparent;margin:0;padding:0;box-shadow:none;border-radius:0;width:100%}.p-fluid .p-chips{display:flex}.p-chips-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-chips-clearable .p-inputtext{position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),nD=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Za,dt,fr,nl,Ji,Za,dt]})}return i})();function dC(i){return i+.5|0}var hu=(i,n,e)=>Math.max(Math.min(i,e),n);function lC(i){return hu(dC(i*2.55),0,255)}function fu(i){return hu(dC(i*255),0,255)}function Wd(i){return hu(dC(i/2.55)/100,0,1)}function lG(i){return hu(dC(i*100),0,100)}var _l={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},oD=[..."0123456789ABCDEF"],QOe=i=>oD[i&15],ZOe=i=>oD[(i&240)>>4]+oD[i&15],N1=i=>(i&240)>>4===(i&15),e2e=i=>N1(i.r)&&N1(i.g)&&N1(i.b)&&N1(i.a);function t2e(i){var n=i.length,e;return i[0]==="#"&&(n===4||n===5?e={r:255&_l[i[1]]*17,g:255&_l[i[2]]*17,b:255&_l[i[3]]*17,a:n===5?_l[i[4]]*17:255}:(n===7||n===9)&&(e={r:_l[i[1]]<<4|_l[i[2]],g:_l[i[3]]<<4|_l[i[4]],b:_l[i[5]]<<4|_l[i[6]],a:n===9?_l[i[7]]<<4|_l[i[8]]:255})),e}var i2e=(i,n)=>i<255?n(i):"";function n2e(i){var n=e2e(i)?QOe:ZOe;return i?"#"+n(i.r)+n(i.g)+n(i.b)+i2e(i.a,n):void 0}var r2e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uG(i,n,e){let t=n*Math.min(e,1-e),r=(o,s=(o+i/30)%12)=>e-t*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function o2e(i,n,e){let t=(r,o=(r+i/60)%6)=>e-e*n*Math.max(Math.min(o,4-o,1),0);return[t(5),t(3),t(1)]}function s2e(i,n,e){let t=uG(i,1,.5),r;for(n+e>1&&(r=1/(n+e),n*=r,e*=r),r=0;r<3;r++)t[r]*=1-n-e,t[r]+=n;return t}function a2e(i,n,e,t,r){return i===r?(n-e)/t+(n<e?6:0):n===r?(e-i)/t+2:(i-n)/t+4}function sD(i){let e=i.r/255,t=i.g/255,r=i.b/255,o=Math.max(e,t,r),s=Math.min(e,t,r),a=(o+s)/2,l,c,d;return o!==s&&(d=o-s,c=a>.5?d/(2-o-s):d/(o+s),l=a2e(e,t,r,d,o),l=l*60+.5),[l|0,c||0,a]}function aD(i,n,e,t){return(Array.isArray(n)?i(n[0],n[1],n[2]):i(n,e,t)).map(fu)}function lD(i,n,e){return aD(uG,i,n,e)}function l2e(i,n,e){return aD(s2e,i,n,e)}function c2e(i,n,e){return aD(o2e,i,n,e)}function hG(i){return(i%360+360)%360}function d2e(i){let n=r2e.exec(i),e=255,t;if(!n)return;n[5]!==t&&(e=n[6]?lC(+n[5]):fu(+n[5]));let r=hG(+n[2]),o=+n[3]/100,s=+n[4]/100;return n[1]==="hwb"?t=l2e(r,o,s):n[1]==="hsv"?t=c2e(r,o,s):t=lD(r,o,s),{r:t[0],g:t[1],b:t[2],a:e}}function p2e(i,n){var e=sD(i);e[0]=hG(e[0]+n),e=lD(e),i.r=e[0],i.g=e[1],i.b=e[2]}function u2e(i){if(!i)return;let n=sD(i),e=n[0],t=lG(n[1]),r=lG(n[2]);return i.a<255?`hsla(${e}, ${t}%, ${r}%, ${Wd(i.a)})`:`hsl(${e}, ${t}%, ${r}%)`}var cG={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dG={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function h2e(){let i={},n=Object.keys(dG),e=Object.keys(cG),t,r,o,s,a;for(t=0;t<n.length;t++){for(s=a=n[t],r=0;r<e.length;r++)o=e[r],a=a.replace(o,cG[o]);o=parseInt(dG[s],16),i[a]=[o>>16&255,o>>8&255,o&255]}return i}var L1;function f2e(i){L1||(L1=h2e(),L1.transparent=[0,0,0,0]);let n=L1[i.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:n.length===4?n[3]:255}}var m2e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function g2e(i){let n=m2e.exec(i),e=255,t,r,o;if(n){if(n[7]!==t){let s=+n[7];e=n[8]?lC(s):hu(s*255,0,255)}return t=+n[1],r=+n[3],o=+n[5],t=255&(n[2]?lC(t):hu(t,0,255)),r=255&(n[4]?lC(r):hu(r,0,255)),o=255&(n[6]?lC(o):hu(o,0,255)),{r:t,g:r,b:o,a:e}}}function _2e(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Wd(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var rD=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,tg=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function C2e(i,n,e){let t=tg(Wd(i.r)),r=tg(Wd(i.g)),o=tg(Wd(i.b));return{r:fu(rD(t+e*(tg(Wd(n.r))-t))),g:fu(rD(r+e*(tg(Wd(n.g))-r))),b:fu(rD(o+e*(tg(Wd(n.b))-o))),a:i.a+e*(n.a-i.a)}}function M1(i,n,e){if(i){let t=sD(i);t[n]=Math.max(0,Math.min(t[n]+t[n]*e,n===0?360:1)),t=lD(t),i.r=t[0],i.g=t[1],i.b=t[2]}}function fG(i,n){return i&&Object.assign(n||{},i)}function pG(i){var n={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(n={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(n.a=fu(i[3]))):(n=fG(i,{r:0,g:0,b:0,a:1}),n.a=fu(n.a)),n}function I2e(i){return i.charAt(0)==="r"?g2e(i):d2e(i)}var cC=class i{constructor(n){if(n instanceof i)return n;let e=typeof n,t;e==="object"?t=pG(n):e==="string"&&(t=t2e(n)||f2e(n)||I2e(n)),this._rgb=t,this._valid=!!t}get valid(){return this._valid}get rgb(){var n=fG(this._rgb);return n&&(n.a=Wd(n.a)),n}set rgb(n){this._rgb=pG(n)}rgbString(){return this._valid?_2e(this._rgb):void 0}hexString(){return this._valid?n2e(this._rgb):void 0}hslString(){return this._valid?u2e(this._rgb):void 0}mix(n,e){if(n){let t=this.rgb,r=n.rgb,o,s=e===o?.5:e,a=2*s-1,l=t.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,t.r=255&c*t.r+o*r.r+.5,t.g=255&c*t.g+o*r.g+.5,t.b=255&c*t.b+o*r.b+.5,t.a=s*t.a+(1-s)*r.a,this.rgb=t}return this}interpolate(n,e){return n&&(this._rgb=C2e(this._rgb,n._rgb,e)),this}clone(){return new i(this.rgb)}alpha(n){return this._rgb.a=fu(n),this}clearer(n){let e=this._rgb;return e.a*=1-n,this}greyscale(){let n=this._rgb,e=dC(n.r*.3+n.g*.59+n.b*.11);return n.r=n.g=n.b=e,this}opaquer(n){let e=this._rgb;return e.a*=1+n,this}negate(){let n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return M1(this._rgb,2,n),this}darken(n){return M1(this._rgb,2,-n),this}saturate(n){return M1(this._rgb,1,n),this}desaturate(n){return M1(this._rgb,1,-n),this}rotate(n){return p2e(this._rgb,n),this}};function Mc(){}var EG=(()=>{let i=0;return()=>i++})();function pn(i){return i==null}function Sr(i){if(Array.isArray&&Array.isArray(i))return!0;let n=Object.prototype.toString.call(i);return n.slice(0,7)==="[object"&&n.slice(-6)==="Array]"}function gn(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function zr(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function ua(i,n){return zr(i)?i:n}function Ni(i,n){return typeof i>"u"?n:i}var AG=(i,n)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/n,uD=(i,n)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*n:+i;function dr(i,n,e){if(i&&typeof i.call=="function")return i.apply(e,n)}function Gn(i,n,e,t){let r,o,s;if(Sr(i))if(o=i.length,t)for(r=o-1;r>=0;r--)n.call(e,i[r],r);else for(r=0;r<o;r++)n.call(e,i[r],r);else if(gn(i))for(s=Object.keys(i),o=s.length,r=0;r<o;r++)n.call(e,i[s[r]],s[r])}function hC(i,n){let e,t,r,o;if(!i||!n||i.length!==n.length)return!1;for(e=0,t=i.length;e<t;++e)if(r=i[e],o=n[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function G1(i){if(Sr(i))return i.map(G1);if(gn(i)){let n=Object.create(null),e=Object.keys(i),t=e.length,r=0;for(;r<t;++r)n[e[r]]=G1(i[e[r]]);return n}return i}function xG(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function y2e(i,n,e,t){if(!xG(i))return;let r=n[i],o=e[i];gn(r)&&gn(o)?ng(r,o,t):n[i]=G1(o)}function ng(i,n,e){let t=Sr(n)?n:[n],r=t.length;if(!gn(i))return i;e=e||{};let o=e.merger||y2e,s;for(let a=0;a<r;++a){if(s=t[a],!gn(s))continue;let l=Object.keys(s);for(let c=0,d=l.length;c<d;++c)o(l[c],i,s,e)}return i}function og(i,n){return ng(i,n,{merger:w2e})}function w2e(i,n,e){if(!xG(i))return;let t=n[i],r=e[i];gn(t)&&gn(r)?og(t,r):Object.prototype.hasOwnProperty.call(n,i)||(n[i]=G1(r))}var mG={"":i=>i,x:i=>i.x,y:i=>i.y};function v2e(i){let n=i.split("."),e=[],t="";for(let r of n)t+=r,t.endsWith("\\")?t=t.slice(0,-1)+".":(e.push(t),t="");return e}function b2e(i){let n=v2e(i);return e=>{for(let t of n){if(t==="")break;e=e&&e[t]}return e}}function $d(i,n){return(mG[n]||(mG[n]=b2e(n)))(i)}function K1(i){return i.charAt(0).toUpperCase()+i.slice(1)}var sg=i=>typeof i<"u",zd=i=>typeof i=="function",hD=(i,n)=>{if(i.size!==n.size)return!1;for(let e of i)if(!n.has(e))return!1;return!0};function TG(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var Rn=Math.PI,Er=2*Rn,S2e=Er+Rn,H1=Number.POSITIVE_INFINITY,E2e=Rn/180,no=Rn/2,kh=Rn/4,gG=Rn*2/3,Kd=Math.log10,Wl=Math.sign;function ag(i,n,e){return Math.abs(i-n)<e}function fD(i){let n=Math.round(i);i=ag(i,n,i/1e3)?n:i;let e=Math.pow(10,Math.floor(Kd(i))),t=i/e;return(t<=1?1:t<=2?2:t<=5?5:10)*e}function OG(i){let n=[],e=Math.sqrt(i),t;for(t=1;t<e;t++)i%t===0&&(n.push(t),n.push(i/t));return e===(e|0)&&n.push(e),n.sort((r,o)=>r-o).pop(),n}function A2e(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function Mh(i){return!A2e(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function RG(i,n){let e=Math.round(i);return e-n<=i&&e+n>=i}function mD(i,n,e){let t,r,o;for(t=0,r=i.length;t<r;t++)o=i[t][e],isNaN(o)||(n.min=Math.min(n.min,o),n.max=Math.max(n.max,o))}function Cl(i){return i*(Rn/180)}function $1(i){return i*(180/Rn)}function gD(i){if(!zr(i))return;let n=1,e=0;for(;Math.round(i*n)/n!==i;)n*=10,e++;return e}function _D(i,n){let e=n.x-i.x,t=n.y-i.y,r=Math.sqrt(e*e+t*t),o=Math.atan2(t,e);return o<-.5*Rn&&(o+=Er),{angle:o,distance:r}}function W1(i,n){return Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(n.y-i.y,2))}function x2e(i,n){return(i-n+S2e)%Er-Rn}function gs(i){return(i%Er+Er)%Er}function lg(i,n,e,t){let r=gs(i),o=gs(n),s=gs(e),a=gs(o-r),l=gs(s-r),c=gs(r-o),d=gs(r-s);return r===o||r===s||t&&o===s||a>l&&c<d}function ko(i,n,e){return Math.max(n,Math.min(e,i))}function PG(i){return ko(i,-32768,32767)}function Vc(i,n,e,t=1e-6){return i>=Math.min(n,e)-t&&i<=Math.max(n,e)+t}function J1(i,n,e){e=e||(s=>i[s]<n);let t=i.length-1,r=0,o;for(;t-r>1;)o=r+t>>1,e(o)?r=o:t=o;return{lo:r,hi:t}}var Nc=(i,n,e,t)=>J1(i,e,t?r=>{let o=i[r][n];return o<e||o===e&&i[r+1][n]===e}:r=>i[r][n]<e),DG=(i,n,e)=>J1(i,e,t=>i[t][n]>=e);function FG(i,n,e){let t=0,r=i.length;for(;t<r&&i[t]<n;)t++;for(;r>t&&i[r-1]>e;)r--;return t>0||r<i.length?i.slice(t,r):i}var kG=["push","pop","shift","splice","unshift"];function NG(i,n){if(i._chartjs){i._chartjs.listeners.push(n);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),kG.forEach(e=>{let t="_onData"+K1(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){let s=r.apply(this,o);return i._chartjs.listeners.forEach(a=>{typeof a[t]=="function"&&a[t](...o)}),s}})})}function CD(i,n){let e=i._chartjs;if(!e)return;let t=e.listeners,r=t.indexOf(n);r!==-1&&t.splice(r,1),!(t.length>0)&&(kG.forEach(o=>{delete i[o]}),delete i._chartjs)}function ID(i){let n=new Set(i);return n.size===i.length?i:Array.from(n)}var yD=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function wD(i,n){let e=[],t=!1;return function(...r){e=r,t||(t=!0,yD.call(window,()=>{t=!1,i.apply(n,e)}))}}function LG(i,n){let e;return function(...t){return n?(clearTimeout(e),e=setTimeout(i,n,t)):i.apply(this,t),n}}var q1=i=>i==="start"?"left":i==="end"?"right":"center",_s=(i,n,e)=>i==="start"?n:i==="end"?e:(n+e)/2,MG=(i,n,e,t)=>i===(t?"left":"right")?e:i==="center"?(n+e)/2:n;function vD(i,n,e){let t=n.length,r=0,o=t;if(i._sorted){let{iScale:s,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=s.axis,{min:h,max:_,minDefined:C,maxDefined:I}=s.getUserBounds();if(C){if(r=Math.min(Nc(l,d,h).lo,e?t:Nc(n,d,s.getPixelForValue(h)).lo),c){let b=l.slice(0,r+1).reverse().findIndex(E=>!pn(E[a.axis]));r-=Math.max(0,b)}r=ko(r,0,t-1)}if(I){let b=Math.max(Nc(l,s.axis,_,!0).hi+1,e?0:Nc(n,d,s.getPixelForValue(_),!0).hi+1);if(c){let E=l.slice(b-1).findIndex(R=>!pn(R[a.axis]));b+=Math.max(0,E)}o=ko(b,r,t)-r}else o=t-r}return{start:r,count:o}}function bD(i){let{xScale:n,yScale:e,_scaleRanges:t}=i,r={xmin:n.min,xmax:n.max,ymin:e.min,ymax:e.max};if(!t)return i._scaleRanges=r,!0;let o=t.xmin!==n.min||t.xmax!==n.max||t.ymin!==e.min||t.ymax!==e.max;return Object.assign(t,r),o}var V1=i=>i===0||i===1,_G=(i,n,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-n)*Er/e)),CG=(i,n,e)=>Math.pow(2,-10*i)*Math.sin((i-n)*Er/e)+1,ig={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*no)+1,easeOutSine:i=>Math.sin(i*no),easeInOutSine:i=>-.5*(Math.cos(Rn*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>V1(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>V1(i)?i:_G(i,.075,.3),easeOutElastic:i=>V1(i)?i:CG(i,.075,.3),easeInOutElastic(i){return V1(i)?i:i<.5?.5*_G(i*2,.1125,.45):.5+.5*CG(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let n=1.70158;return(i/=.5)<1?.5*(i*i*(((n*=1.525)+1)*i-n)):.5*((i-=2)*i*(((n*=1.525)+1)*i+n)+2)},easeInBounce:i=>1-ig.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?ig.easeInBounce(i*2)*.5:ig.easeOutBounce(i*2-1)*.5+.5};function SD(i){if(i&&typeof i=="object"){let n=i.toString();return n==="[object CanvasPattern]"||n==="[object CanvasGradient]"}return!1}function ED(i){return SD(i)?i:new cC(i)}function cD(i){return SD(i)?i:new cC(i).saturate(.5).darken(.1).hexString()}var T2e=["x","y","borderWidth","radius","tension"],O2e=["color","borderColor","backgroundColor"];function R2e(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"}),i.set("animations",{colors:{type:"color",properties:O2e},numbers:{type:"number",properties:T2e}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}})}function P2e(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var IG=new Map;function D2e(i,n){n=n||{};let e=i+JSON.stringify(n),t=IG.get(e);return t||(t=new Intl.NumberFormat(i,n),IG.set(e,t)),t}function cg(i,n,e){return D2e(n,e).format(i)}var VG={values(i){return Sr(i)?i:""+i},numeric(i,n,e){if(i===0)return"0";let t=this.chart.options.locale,r,o=i;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),o=F2e(i,e)}let s=Kd(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cg(i,t,l)},logarithmic(i,n,e){if(i===0)return"0";let t=e[n].significand||i/Math.pow(10,Math.floor(Kd(i)));return[1,2,3,5,10,15].includes(t)||n>.8*e.length?VG.numeric.call(this,i,n,e):""}};function F2e(i,n){let e=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var fC={formatters:VG};function k2e(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,e)=>e.lineWidth,tickColor:(n,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"&&n!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"})}var gu=Object.create(null),Y1=Object.create(null);function pC(i,n){if(!n)return i;let e=n.split(".");for(let t=0,r=e.length;t<r;++t){let o=e[t];i=i[o]||(i[o]=Object.create(null))}return i}function dD(i,n,e){return typeof n=="string"?ng(pC(i,n),e):ng(pC(i,""),n)}var pD=class{constructor(n,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,r)=>cD(r.backgroundColor),this.hoverBorderColor=(t,r)=>cD(r.borderColor),this.hoverColor=(t,r)=>cD(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n),this.apply(e)}set(n,e){return dD(this,n,e)}get(n){return pC(this,n)}describe(n,e){return dD(Y1,n,e)}override(n,e){return dD(gu,n,e)}route(n,e,t,r){let o=pC(this,n),s=pC(this,t),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=s[r];return gn(l)?Object.assign({},c,l):Ni(l,c)},set(l){this[a]=l}}})}apply(n){n.forEach(e=>e(this))}},Pr=new pD({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[R2e,P2e,k2e]);function N2e(i){return!i||pn(i.size)||pn(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function uC(i,n,e,t,r){let o=n[r];return o||(o=n[r]=i.measureText(r).width,e.push(r)),o>t&&(t=o),t}function BG(i,n,e,t){t=t||{};let r=t.data=t.data||{},o=t.garbageCollect=t.garbageCollect||[];t.font!==n&&(r=t.data={},o=t.garbageCollect=[],t.font=n),i.save(),i.font=n;let s=0,a=e.length,l,c,d,h,_;for(l=0;l<a;l++)if(h=e[l],h!=null&&!Sr(h))s=uC(i,r,o,s,h);else if(Sr(h))for(c=0,d=h.length;c<d;c++)_=h[c],_!=null&&!Sr(_)&&(s=uC(i,r,o,s,_));i.restore();let C=o.length/2;if(C>e.length){for(l=0;l<C;l++)delete r[o[l]];o.splice(0,C)}return s}function _u(i,n,e){let t=i.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((n-r)*t)/t+r}function AD(i,n){!n&&!i||(n=n||i.getContext("2d"),n.save(),n.resetTransform(),n.clearRect(0,0,i.width,i.height),n.restore())}function X1(i,n,e,t){xD(i,n,e,t,null)}function xD(i,n,e,t,r){let o,s,a,l,c,d,h,_,C=n.pointStyle,I=n.rotation,b=n.radius,E=(I||0)*E2e;if(C&&typeof C=="object"&&(o=C.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,t),i.rotate(E),i.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),i.restore();return}if(!(isNaN(b)||b<=0)){switch(i.beginPath(),C){default:r?i.ellipse(e,t,r/2,b,0,0,Er):i.arc(e,t,b,0,Er),i.closePath();break;case"triangle":d=r?r/2:b,i.moveTo(e+Math.sin(E)*d,t-Math.cos(E)*b),E+=gG,i.lineTo(e+Math.sin(E)*d,t-Math.cos(E)*b),E+=gG,i.lineTo(e+Math.sin(E)*d,t-Math.cos(E)*b),i.closePath();break;case"rectRounded":c=b*.516,l=b-c,s=Math.cos(E+kh)*l,h=Math.cos(E+kh)*(r?r/2-c:l),a=Math.sin(E+kh)*l,_=Math.sin(E+kh)*(r?r/2-c:l),i.arc(e-h,t-a,c,E-Rn,E-no),i.arc(e+_,t-s,c,E-no,E),i.arc(e+h,t+a,c,E,E+no),i.arc(e-_,t+s,c,E+no,E+Rn),i.closePath();break;case"rect":if(!I){l=Math.SQRT1_2*b,d=r?r/2:l,i.rect(e-d,t-l,2*d,2*l);break}E+=kh;case"rectRot":h=Math.cos(E)*(r?r/2:b),s=Math.cos(E)*b,a=Math.sin(E)*b,_=Math.sin(E)*(r?r/2:b),i.moveTo(e-h,t-a),i.lineTo(e+_,t-s),i.lineTo(e+h,t+a),i.lineTo(e-_,t+s),i.closePath();break;case"crossRot":E+=kh;case"cross":h=Math.cos(E)*(r?r/2:b),s=Math.cos(E)*b,a=Math.sin(E)*b,_=Math.sin(E)*(r?r/2:b),i.moveTo(e-h,t-a),i.lineTo(e+h,t+a),i.moveTo(e+_,t-s),i.lineTo(e-_,t+s);break;case"star":h=Math.cos(E)*(r?r/2:b),s=Math.cos(E)*b,a=Math.sin(E)*b,_=Math.sin(E)*(r?r/2:b),i.moveTo(e-h,t-a),i.lineTo(e+h,t+a),i.moveTo(e+_,t-s),i.lineTo(e-_,t+s),E+=kh,h=Math.cos(E)*(r?r/2:b),s=Math.cos(E)*b,a=Math.sin(E)*b,_=Math.sin(E)*(r?r/2:b),i.moveTo(e-h,t-a),i.lineTo(e+h,t+a),i.moveTo(e+_,t-s),i.lineTo(e-_,t+s);break;case"line":s=r?r/2:Math.cos(E)*b,a=Math.sin(E)*b,i.moveTo(e-s,t-a),i.lineTo(e+s,t+a);break;case"dash":i.moveTo(e,t),i.lineTo(e+Math.cos(E)*(r?r/2:b),t+Math.sin(E)*b);break;case!1:i.closePath();break}i.fill(),n.borderWidth>0&&i.stroke()}}function Lc(i,n,e){return e=e||.5,!n||i&&i.x>n.left-e&&i.x<n.right+e&&i.y>n.top-e&&i.y<n.bottom+e}function mC(i,n){i.save(),i.beginPath(),i.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),i.clip()}function gC(i){i.restore()}function UG(i,n,e,t,r){if(!n)return i.lineTo(e.x,e.y);if(r==="middle"){let o=(n.x+e.x)/2;i.lineTo(o,n.y),i.lineTo(o,e.y)}else r==="after"!=!!t?i.lineTo(n.x,e.y):i.lineTo(e.x,n.y);i.lineTo(e.x,e.y)}function jG(i,n,e,t){if(!n)return i.lineTo(e.x,e.y);i.bezierCurveTo(t?n.cp1x:n.cp2x,t?n.cp1y:n.cp2y,t?e.cp2x:e.cp1x,t?e.cp2y:e.cp1y,e.x,e.y)}function L2e(i,n){n.translation&&i.translate(n.translation[0],n.translation[1]),pn(n.rotation)||i.rotate(n.rotation),n.color&&(i.fillStyle=n.color),n.textAlign&&(i.textAlign=n.textAlign),n.textBaseline&&(i.textBaseline=n.textBaseline)}function M2e(i,n,e,t,r){if(r.strikethrough||r.underline){let o=i.measureText(t),s=n-o.actualBoundingBoxLeft,a=n+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(s,d),i.lineTo(a,d),i.stroke()}}function V2e(i,n){let e=i.fillStyle;i.fillStyle=n.color,i.fillRect(n.left,n.top,n.width,n.height),i.fillStyle=e}function Cu(i,n,e,t,r,o={}){let s=Sr(n)?n:[n],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(i.save(),i.font=r.string,L2e(i,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&V2e(i,o.backdrop),a&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),pn(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(c,e,t,o.maxWidth)),i.fillText(c,e,t,o.maxWidth),M2e(i,e,t,c,o),t+=Number(r.lineHeight);i.restore()}function dg(i,n){let{x:e,y:t,w:r,h:o,radius:s}=n;i.arc(e+s.topLeft,t+s.topLeft,s.topLeft,1.5*Rn,Rn,!0),i.lineTo(e,t+o-s.bottomLeft),i.arc(e+s.bottomLeft,t+o-s.bottomLeft,s.bottomLeft,Rn,no,!0),i.lineTo(e+r-s.bottomRight,t+o),i.arc(e+r-s.bottomRight,t+o-s.bottomRight,s.bottomRight,no,0,!0),i.lineTo(e+r,t+s.topRight),i.arc(e+r-s.topRight,t+s.topRight,s.topRight,0,-no,!0),i.lineTo(e+s.topLeft,t)}var B2e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,U2e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function j2e(i,n){let e=(""+i).match(B2e);if(!e||e[1]==="normal")return n*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return n*i}var G2e=i=>+i||0;function Q1(i,n){let e={},t=gn(n),r=t?Object.keys(n):n,o=gn(i)?t?s=>Ni(i[s],i[n[s]]):s=>i[s]:()=>i;for(let s of r)e[s]=G2e(o(s));return e}function TD(i){return Q1(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Iu(i){return Q1(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Cs(i){let n=TD(i);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function vo(i,n){i=i||{},n=n||Pr.font;let e=Ni(i.size,n.size);typeof e=="string"&&(e=parseInt(e,10));let t=Ni(i.style,n.style);t&&!(""+t).match(U2e)&&(console.warn('Invalid font style specified: "'+t+'"'),t=void 0);let r={family:Ni(i.family,n.family),lineHeight:j2e(Ni(i.lineHeight,n.lineHeight),e),size:e,style:t,weight:Ni(i.weight,n.weight),string:""};return r.string=N2e(r),r}function pg(i,n,e,t){let r=!0,o,s,a;for(o=0,s=i.length;o<s;++o)if(a=i[o],a!==void 0&&(n!==void 0&&typeof a=="function"&&(a=a(n),r=!1),e!==void 0&&Sr(a)&&(a=a[e%a.length],r=!1),a!==void 0))return t&&!r&&(t.cacheable=!1),a}function GG(i,n,e){let{min:t,max:r}=i,o=uD(n,(r-t)/2),s=(a,l)=>e&&a===0?0:a+l;return{min:s(t,-Math.abs(o)),max:s(r,o)}}function Jd(i,n){return Object.assign(Object.create(i),n)}function Z1(i,n=[""],e,t,r=()=>i[0]){let o=e||i;typeof t>"u"&&(t=zG("_fallback",i));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:t,_getTarget:r,override:a=>Z1([a,...i],n,o,t)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return HG(a,l,()=>Y2e(l,n,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return wG(a).includes(l)},ownKeys(a){return wG(a)},set(a,l,c){let d=a._storage||(a._storage=r());return a[l]=d[l]=c,delete a._keys,!0}})}function Lh(i,n,e,t){let r={_cacheable:!1,_proxy:i,_context:n,_subProxy:e,_stack:new Set,_descriptors:OD(i,t),setContext:o=>Lh(i,o,e,t),override:o=>Lh(i.override(o),n,e,t)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete i[s],!0},get(o,s,a){return HG(o,s,()=>W2e(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(i,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,s)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,s){return Reflect.has(i,s)},ownKeys(){return Reflect.ownKeys(i)},set(o,s,a){return i[s]=a,delete o[s],!0}})}function OD(i,n={scriptable:!0,indexable:!0}){let{_scriptable:e=n.scriptable,_indexable:t=n.indexable,_allKeys:r=n.allKeys}=i;return{allKeys:r,scriptable:e,indexable:t,isScriptable:zd(e)?e:()=>e,isIndexable:zd(t)?t:()=>t}}var H2e=(i,n)=>i?i+K1(n):n,RD=(i,n)=>gn(n)&&i!=="adapters"&&(Object.getPrototypeOf(n)===null||n.constructor===Object);function HG(i,n,e){if(Object.prototype.hasOwnProperty.call(i,n)||n==="constructor")return i[n];let t=e();return i[n]=t,t}function W2e(i,n,e){let{_proxy:t,_context:r,_subProxy:o,_descriptors:s}=i,a=t[n];return zd(a)&&s.isScriptable(n)&&(a=z2e(n,a,i,e)),Sr(a)&&a.length&&(a=K2e(n,a,i,s.isIndexable)),RD(n,a)&&(a=Lh(a,r,o&&o[n],s)),a}function z2e(i,n,e,t){let{_proxy:r,_context:o,_subProxy:s,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=n(o,s||t);return a.delete(i),RD(i,l)&&(l=PD(r._scopes,r,i,l)),l}function K2e(i,n,e,t){let{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=e;if(typeof o.index<"u"&&t(i))return n[o.index%n.length];if(gn(n[0])){let l=n,c=r._scopes.filter(d=>d!==l);n=[];for(let d of l){let h=PD(c,r,i,d);n.push(Lh(h,o,s&&s[i],a))}}return n}function WG(i,n,e){return zd(i)?i(n,e):i}var $2e=(i,n)=>i===!0?n:typeof i=="string"?$d(n,i):void 0;function J2e(i,n,e,t,r){for(let o of n){let s=$2e(e,o);if(s){i.add(s);let a=WG(s._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==t)return a}else if(s===!1&&typeof t<"u"&&e!==t)return null}return!1}function PD(i,n,e,t){let r=n._rootScopes,o=WG(n._fallback,e,t),s=[...i,...r],a=new Set;a.add(t);let l=yG(a,s,e,o||e,t);return l===null||typeof o<"u"&&o!==e&&(l=yG(a,s,o,l,t),l===null)?!1:Z1(Array.from(a),[""],r,o,()=>q2e(n,e,t))}function yG(i,n,e,t,r){for(;e;)e=J2e(i,n,e,t,r);return e}function q2e(i,n,e){let t=i._getTarget();n in t||(t[n]={});let r=t[n];return Sr(r)&&gn(e)?e:r||{}}function Y2e(i,n,e,t){let r;for(let o of n)if(r=zG(H2e(o,i),e),typeof r<"u")return RD(i,r)?PD(e,t,i,r):r}function zG(i,n){for(let e of n){if(!e)continue;let t=e[i];if(typeof t<"u")return t}}function wG(i){let n=i._keys;return n||(n=i._keys=X2e(i._scopes)),n}function X2e(i){let n=new Set;for(let e of i)for(let t of Object.keys(e).filter(r=>!r.startsWith("_")))n.add(t);return Array.from(n)}function DD(i,n,e,t){let{iScale:r}=i,{key:o="r"}=this._parsing,s=new Array(t),a,l,c,d;for(a=0,l=t;a<l;++a)c=a+e,d=n[c],s[a]={r:r.parse($d(d,o),c)};return s}var Q2e=Number.EPSILON||1e-14,rg=(i,n)=>n<i.length&&!i[n].skip&&i[n],KG=i=>i==="x"?"y":"x";function Z2e(i,n,e,t){let r=i.skip?n:i,o=n,s=e.skip?n:e,a=W1(o,r),l=W1(s,o),c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let h=t*c,_=t*d;return{previous:{x:o.x-h*(s.x-r.x),y:o.y-h*(s.y-r.y)},next:{x:o.x+_*(s.x-r.x),y:o.y+_*(s.y-r.y)}}}function eRe(i,n,e){let t=i.length,r,o,s,a,l,c=rg(i,0);for(let d=0;d<t-1;++d)if(l=c,c=rg(i,d+1),!(!l||!c)){if(ag(n[d],0,Q2e)){e[d]=e[d+1]=0;continue}r=e[d]/n[d],o=e[d+1]/n[d],a=Math.pow(r,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),e[d]=r*s*n[d],e[d+1]=o*s*n[d])}}function tRe(i,n,e="x"){let t=KG(e),r=i.length,o,s,a,l=rg(i,0);for(let c=0;c<r;++c){if(s=a,a=l,l=rg(i,c+1),!a)continue;let d=a[e],h=a[t];s&&(o=(d-s[e])/3,a[`cp1${e}`]=d-o,a[`cp1${t}`]=h-o*n[c]),l&&(o=(l[e]-d)/3,a[`cp2${e}`]=d+o,a[`cp2${t}`]=h+o*n[c])}}function iRe(i,n="x"){let e=KG(n),t=i.length,r=Array(t).fill(0),o=Array(t),s,a,l,c=rg(i,0);for(s=0;s<t;++s)if(a=l,l=c,c=rg(i,s+1),!!l){if(c){let d=c[n]-l[n];r[s]=d!==0?(c[e]-l[e])/d:0}o[s]=a?c?Wl(r[s-1])!==Wl(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}eRe(i,r,o),tRe(i,o,n)}function B1(i,n,e){return Math.max(Math.min(i,e),n)}function nRe(i,n){let e,t,r,o,s,a=Lc(i[0],n);for(e=0,t=i.length;e<t;++e)s=o,o=a,a=e<t-1&&Lc(i[e+1],n),o&&(r=i[e],s&&(r.cp1x=B1(r.cp1x,n.left,n.right),r.cp1y=B1(r.cp1y,n.top,n.bottom)),a&&(r.cp2x=B1(r.cp2x,n.left,n.right),r.cp2y=B1(r.cp2y,n.top,n.bottom)))}function $G(i,n,e,t,r){let o,s,a,l;if(n.spanGaps&&(i=i.filter(c=>!c.skip)),n.cubicInterpolationMode==="monotone")iRe(i,r);else{let c=t?i[i.length-1]:i[0];for(o=0,s=i.length;o<s;++o)a=i[o],l=Z2e(c,a,i[Math.min(o+1,s-(t?0:1))%s],n.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}n.capBezierPoints&&nRe(i,e)}function eS(){return typeof window<"u"&&typeof document<"u"}function tS(i){let n=i.parentNode;return n&&n.toString()==="[object ShadowRoot]"&&(n=n.host),n}function z1(i,n,e){let t;return typeof i=="string"?(t=parseInt(i,10),i.indexOf("%")!==-1&&(t=t/100*n.parentNode[e])):t=i,t}var iS=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function rRe(i,n){return iS(i).getPropertyValue(n)}var oRe=["top","right","bottom","left"];function Nh(i,n,e){let t={};e=e?"-"+e:"";for(let r=0;r<4;r++){let o=oRe[r];t[o]=parseFloat(i[n+"-"+o+e])||0}return t.width=t.left+t.right,t.height=t.top+t.bottom,t}var sRe=(i,n,e)=>(i>0||n>0)&&(!e||!e.shadowRoot);function aRe(i,n){let e=i.touches,t=e&&e.length?e[0]:i,{offsetX:r,offsetY:o}=t,s=!1,a,l;if(sRe(r,o,i.target))a=r,l=o;else{let c=n.getBoundingClientRect();a=t.clientX-c.left,l=t.clientY-c.top,s=!0}return{x:a,y:l,box:s}}function yu(i,n){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:t}=n,r=iS(e),o=r.boxSizing==="border-box",s=Nh(r,"padding"),a=Nh(r,"border","width"),{x:l,y:c,box:d}=aRe(i,e),h=s.left+(d&&a.left),_=s.top+(d&&a.top),{width:C,height:I}=n;return o&&(C-=s.width+a.width,I-=s.height+a.height),{x:Math.round((l-h)/C*e.width/t),y:Math.round((c-_)/I*e.height/t)}}function lRe(i,n,e){let t,r;if(n===void 0||e===void 0){let o=i&&tS(i);if(!o)n=i.clientWidth,e=i.clientHeight;else{let s=o.getBoundingClientRect(),a=iS(o),l=Nh(a,"border","width"),c=Nh(a,"padding");n=s.width-c.width-l.width,e=s.height-c.height-l.height,t=z1(a.maxWidth,o,"clientWidth"),r=z1(a.maxHeight,o,"clientHeight")}}return{width:n,height:e,maxWidth:t||H1,maxHeight:r||H1}}var U1=i=>Math.round(i*10)/10;function JG(i,n,e,t){let r=iS(i),o=Nh(r,"margin"),s=z1(r.maxWidth,i,"clientWidth")||H1,a=z1(r.maxHeight,i,"clientHeight")||H1,l=lRe(i,n,e),{width:c,height:d}=l;if(r.boxSizing==="content-box"){let _=Nh(r,"border","width"),C=Nh(r,"padding");c-=C.width+_.width,d-=C.height+_.height}return c=Math.max(0,c-o.width),d=Math.max(0,t?c/t:d-o.height),c=U1(Math.min(c,s,l.maxWidth)),d=U1(Math.min(d,a,l.maxHeight)),c&&!d&&(d=U1(c/2)),(n!==void 0||e!==void 0)&&t&&l.height&&d>l.height&&(d=l.height,c=U1(Math.floor(d*t))),{width:c,height:d}}function FD(i,n,e){let t=n||1,r=Math.floor(i.height*t),o=Math.floor(i.width*t);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let s=i.canvas;return s.style&&(e||!s.style.height&&!s.style.width)&&(s.style.height=`${i.height}px`,s.style.width=`${i.width}px`),i.currentDevicePixelRatio!==t||s.height!==r||s.width!==o?(i.currentDevicePixelRatio=t,s.height=r,s.width=o,i.ctx.setTransform(t,0,0,t,0,0),!0):!1}var qG=function(){let i=!1;try{let n={get passive(){return i=!0,!1}};eS()&&(window.addEventListener("test",null,n),window.removeEventListener("test",null,n))}catch{}return i}();function kD(i,n){let e=rRe(i,n),t=e&&e.match(/^(\d+)(\.\d+)?px$/);return t?+t[1]:void 0}function mu(i,n,e,t){return{x:i.x+e*(n.x-i.x),y:i.y+e*(n.y-i.y)}}function YG(i,n,e,t){return{x:i.x+e*(n.x-i.x),y:t==="middle"?e<.5?i.y:n.y:t==="after"?e<1?i.y:n.y:e>0?n.y:i.y}}function XG(i,n,e,t){let r={x:i.cp2x,y:i.cp2y},o={x:n.cp1x,y:n.cp1y},s=mu(i,r,e),a=mu(r,o,e),l=mu(o,n,e),c=mu(s,a,e),d=mu(a,l,e);return mu(c,d,e)}var cRe=function(i,n){return{x(e){return i+i+n-e},setWidth(e){n=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,t){return e-t},leftForLtr(e,t){return e-t}}},dRe=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,n){return i+n},leftForLtr(i,n){return i}}};function Vh(i,n,e){return i?cRe(n,e):dRe()}function ND(i,n){let e,t;(n==="ltr"||n==="rtl")&&(e=i.canvas.style,t=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",n,"important"),i.prevTextDirection=t)}function LD(i,n){n!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",n[0],n[1]))}function QG(i){return i==="angle"?{between:lg,compare:x2e,normalize:gs}:{between:Vc,compare:(n,e)=>n-e,normalize:n=>n}}function vG({start:i,end:n,count:e,loop:t,style:r}){return{start:i%e,end:n%e,loop:t&&(n-i+1)%e===0,style:r}}function pRe(i,n,e){let{property:t,start:r,end:o}=e,{between:s,normalize:a}=QG(t),l=n.length,{start:c,end:d,loop:h}=i,_,C;if(h){for(c+=l,d+=l,_=0,C=l;_<C&&s(a(n[c%l][t]),r,o);++_)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:i.style}}function MD(i,n,e){if(!e)return[i];let{property:t,start:r,end:o}=e,s=n.length,{compare:a,between:l,normalize:c}=QG(t),{start:d,end:h,loop:_,style:C}=pRe(i,n,e),I=[],b=!1,E=null,R,T,A,U=()=>l(r,A,R)&&a(r,A)!==0,z=()=>a(o,R)===0||l(o,A,R),ee=()=>b||U(),re=()=>!b||z();for(let Z=d,ae=d;Z<=h;++Z)T=n[Z%s],!T.skip&&(R=c(T[t]),R!==A&&(b=l(R,r,o),E===null&&ee()&&(E=a(R,r)===0?Z:ae),E!==null&&re()&&(I.push(vG({start:E,end:Z,loop:_,count:s,style:C})),E=null),ae=Z,A=R));return E!==null&&I.push(vG({start:E,end:h,loop:_,count:s,style:C})),I}function VD(i,n){let e=[],t=i.segments;for(let r=0;r<t.length;r++){let o=MD(t[r],i.points,n);o.length&&e.push(...o)}return e}function uRe(i,n,e,t){let r=0,o=n-1;if(e&&!t)for(;r<n&&!i[r].skip;)r++;for(;r<n&&i[r].skip;)r++;for(r%=n,e&&(o+=r);o>r&&i[o%n].skip;)o--;return o%=n,{start:r,end:o}}function hRe(i,n,e,t){let r=i.length,o=[],s=n,a=i[n],l;for(l=n+1;l<=e;++l){let c=i[l%r];c.skip||c.stop?a.skip||(t=!1,o.push({start:n%r,end:(l-1)%r,loop:t}),n=s=c.stop?l:null):(s=l,a.skip&&(n=l)),a=c}return s!==null&&o.push({start:n%r,end:s%r,loop:t}),o}function ZG(i,n){let e=i.points,t=i.options.spanGaps,r=e.length;if(!r)return[];let o=!!i._loop,{start:s,end:a}=uRe(e,r,o,t);if(t===!0)return bG(i,[{start:s,end:a,loop:o}],e,n);let l=a<s?a+r:a,c=!!i._fullLoop&&s===0&&a===r-1;return bG(i,hRe(e,s,l,c),e,n)}function bG(i,n,e,t){return!t||!t.setContext||!e?n:fRe(i,n,e,t)}function fRe(i,n,e,t){let r=i._chart.getContext(),o=SG(i.options),{_datasetIndex:s,options:{spanGaps:a}}=i,l=e.length,c=[],d=o,h=n[0].start,_=h;function C(I,b,E,R){let T=a?-1:1;if(I!==b){for(I+=l;e[I%l].skip;)I-=T;for(;e[b%l].skip;)b+=T;I%l!==b%l&&(c.push({start:I%l,end:b%l,loop:E,style:R}),d=R,h=b%l)}}for(let I of n){h=a?h:I.start;let b=e[h%l],E;for(_=h+1;_<=I.end;_++){let R=e[_%l];E=SG(t.setContext(Jd(r,{type:"segment",p0:b,p1:R,p0DataIndex:(_-1)%l,p1DataIndex:_%l,datasetIndex:s}))),mRe(E,d)&&C(h,_-1,I.loop,d),b=R,d=E}h<_-1&&C(h,_-1,I.loop,d)}return c}function SG(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function mRe(i,n){if(!n)return!1;let e=[],t=function(r,o){return SD(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,t)!==JSON.stringify(n,t)}function j1(i,n,e){return i.options.clip?i[e]:n[e]}function gRe(i,n){let{xScale:e,yScale:t}=i;return e&&t?{left:j1(e,n,"left"),right:j1(e,n,"right"),top:j1(t,n,"top"),bottom:j1(t,n,"bottom")}:n}function BD(i,n){let e=n._clip;if(e.disabled)return!1;let t=gRe(n,i.chartArea);return{left:e.left===!1?0:t.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:t.right+(e.right===!0?0:e.right),top:e.top===!1?0:t.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:t.bottom+(e.bottom===!0?0:e.bottom)}}var XD=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,e,t,r){let o=e.listeners[r],s=e.duration;o.forEach(a=>a({chart:n,initial:e.initial,numSteps:s,currentStep:Math.min(t-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=yD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let e=0;this._charts.forEach((t,r)=>{if(!t.running||!t.items.length)return;let o=t.items,s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>t.duration&&(t.duration=l._total),l.tick(n),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,t,n,"progress")),o.length||(t.running=!1,this._notify(r,t,n,"complete"),t.initial=!1),e+=o.length}),this._lastDate=n,e===0&&(this._running=!1)}_getAnims(n){let e=this._charts,t=e.get(n);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(n,t)),t}listen(n,e,t){this._getAnims(n).listeners[e].push(t)}add(n,e){!e||!e.length||this._getAnims(n).items.push(...e)}has(n){return this._getAnims(n).items.length>0}start(n){let e=this._charts.get(n);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,r)=>Math.max(t,r._duration),0),this._refresh())}running(n){if(!this._running)return!1;let e=this._charts.get(n);return!(!e||!e.running||!e.items.length)}stop(n){let e=this._charts.get(n);if(!e||!e.items.length)return;let t=e.items,r=t.length-1;for(;r>=0;--r)t[r].cancel();e.items=[],this._notify(n,e,Date.now(),"complete")}remove(n){return this._charts.delete(n)}},qd=new XD,eH="transparent",_Re={boolean(i,n,e){return e>.5?n:i},color(i,n,e){let t=ED(i||eH),r=t.valid&&ED(n||eH);return r&&r.valid?r.mix(t,e).hexString():n},number(i,n,e){return i+(n-i)*e}},QD=class{constructor(n,e,t,r){let o=e[t];r=pg([n.to,r,o,n.from]);let s=pg([n.from,o,r]);this._active=!0,this._fn=n.fn||_Re[n.type||typeof s],this._easing=ig[n.easing]||ig.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=e,this._prop=t,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(n,e,t){if(this._active){this._notify(!1);let r=this._target[this._prop],o=t-this._start,s=this._duration-o;this._start=t,this._duration=Math.floor(Math.max(s,n.duration)),this._total+=o,this._loop=!!n.loop,this._to=pg([n.to,e,r,n.from]),this._from=pg([n.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){let e=n-this._start,t=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to,l;if(this._active=o!==a&&(s||e<t),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=o;return}l=e/t%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(o,a,l)}wait(){let n=this._promises||(this._promises=[]);return new Promise((e,t)=>{n.push({res:e,rej:t})})}_notify(n){let e=n?"res":"rej",t=this._promises||[];for(let r=0;r<t.length;r++)t[r][e]()}},pS=class{constructor(n,e){this._chart=n,this._properties=new Map,this.configure(e)}configure(n){if(!gn(n))return;let e=Object.keys(Pr.animation),t=this._properties;Object.getOwnPropertyNames(n).forEach(r=>{let o=n[r];if(!gn(o))return;let s={};for(let a of e)s[a]=o[a];(Sr(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!t.has(a))&&t.set(a,s)})})}_animateOptions(n,e){let t=e.options,r=IRe(n,t);if(!r)return[];let o=this._createAnimations(r,t);return t.$shared&&CRe(n.options.$animations,t).then(()=>{n.options=t},()=>{}),o}_createAnimations(n,e){let t=this._properties,r=[],o=n.$animations||(n.$animations={}),s=Object.keys(e),a=Date.now(),l;for(l=s.length-1;l>=0;--l){let c=s[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(n,e));continue}let d=e[c],h=o[c],_=t.get(c);if(h)if(_&&h.active()){h.update(_,d,a);continue}else h.cancel();if(!_||!_.duration){n[c]=d;continue}o[c]=h=new QD(_,n,c,d),r.push(h)}return r}update(n,e){if(this._properties.size===0){Object.assign(n,e);return}let t=this._createAnimations(n,e);if(t.length)return qd.add(this._chart,t),!0}};function CRe(i,n){let e=[],t=Object.keys(n);for(let r=0;r<t.length;r++){let o=i[t[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function IRe(i,n){if(!n)return;let e=i.options;if(!e){i.options=n;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function tH(i,n){let e=i&&i.options||{},t=e.reverse,r=e.min===void 0?n:0,o=e.max===void 0?n:0;return{start:t?o:r,end:t?r:o}}function yRe(i,n,e){if(e===!1)return!1;let t=tH(i,e),r=tH(n,e);return{top:r.end,right:t.end,bottom:r.start,left:t.start}}function wRe(i){let n,e,t,r;return gn(i)?(n=i.top,e=i.right,t=i.bottom,r=i.left):n=e=t=r=i,{top:n,right:e,bottom:t,left:r,disabled:i===!1}}function eW(i,n){let e=[],t=i._getSortedDatasetMetas(n),r,o;for(r=0,o=t.length;r<o;++r)e.push(t[r].index);return e}function iH(i,n,e,t={}){let r=i.keys,o=t.mode==="single",s,a,l,c;if(n===null)return;let d=!1;for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===e){if(d=!0,t.all)continue;break}c=i.values[l],zr(c)&&(o||n===0||Wl(n)===Wl(c))&&(n+=c)}return!d&&!t.all?0:n}function vRe(i,n){let{iScale:e,vScale:t}=n,r=e.axis==="x"?"x":"y",o=t.axis==="x"?"x":"y",s=Object.keys(i),a=new Array(s.length),l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],a[l]={[r]:d,[o]:i[d]};return a}function UD(i,n){let e=i&&i.options.stacked;return e||e===void 0&&n.stack!==void 0}function bRe(i,n,e){return`${i.id}.${n.id}.${e.stack||e.type}`}function SRe(i){let{min:n,max:e,minDefined:t,maxDefined:r}=i.getUserBounds();return{min:t?n:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function ERe(i,n,e){let t=i[n]||(i[n]={});return t[e]||(t[e]={})}function nH(i,n,e,t){for(let r of n.getMatchingVisibleMetas(t).reverse()){let o=i[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function rH(i,n){let{chart:e,_cachedMeta:t}=i,r=e._stacks||(e._stacks={}),{iScale:o,vScale:s,index:a}=t,l=o.axis,c=s.axis,d=bRe(o,s,t),h=n.length,_;for(let C=0;C<h;++C){let I=n[C],{[l]:b,[c]:E}=I,R=I._stacks||(I._stacks={});_=R[c]=ERe(r,d,b),_[a]=E,_._top=nH(_,s,!0,t.type),_._bottom=nH(_,s,!1,t.type);let T=_._visualValues||(_._visualValues={});T[a]=E}}function jD(i,n){let e=i.scales;return Object.keys(e).filter(t=>e[t].axis===n).shift()}function ARe(i,n){return Jd(i,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}function xRe(i,n,e){return Jd(i,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:e,index:n,mode:"default",type:"data"})}function _C(i,n){let e=i.controller.index,t=i.vScale&&i.vScale.axis;if(t){n=n||i._parsed;for(let r of n){let o=r._stacks;if(!o||o[t]===void 0||o[t][e]===void 0)return;delete o[t][e],o[t]._visualValues!==void 0&&o[t]._visualValues[e]!==void 0&&delete o[t]._visualValues[e]}}}var GD=i=>i==="reset"||i==="none",oH=(i,n)=>n?i:Object.assign({},i),TRe=(i,n,e)=>i&&!n.hidden&&n._stacked&&{keys:eW(e,!0),values:null},vu=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=UD(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_C(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,r=this.getDataset(),o=(_,C,I,b)=>_==="x"?C:_==="r"?b:I,s=t.xAxisID=Ni(r.xAxisID,jD(e,"x")),a=t.yAxisID=Ni(r.yAxisID,jD(e,"y")),l=t.rAxisID=Ni(r.rAxisID,jD(e,"r")),c=t.indexAxis,d=t.iAxisID=o(c,s,a,l),h=t.vAxisID=o(c,a,s,l);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&CD(this._data,this),e._stacked&&_C(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(gn(t)){let o=this._cachedMeta;this._data=vRe(t,o)}else if(r!==t){if(r){CD(r,this);let o=this._cachedMeta;_C(o),o._parsed=[]}t&&Object.isExtensible(t)&&NG(t,this),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,r=this.getDataset(),o=!1;this._dataCheck();let s=t._stacked;t._stacked=UD(t.vScale,t),t.stack!==r.stack&&(o=!0,_C(t),t.stack=r.stack),this._resyncElements(e),(o||s!==t._stacked)&&(rH(this,t._parsed),t._stacked=UD(t.vScale,t))}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let{_cachedMeta:r,_data:o}=this,{iScale:s,_stacked:a}=r,l=s.axis,c=e===0&&t===o.length?!0:r._sorted,d=e>0&&r._parsed[e-1],h,_,C;if(this._parsing===!1)r._parsed=o,r._sorted=!0,C=o;else{Sr(o[e])?C=this.parseArrayData(r,o,e,t):gn(o[e])?C=this.parseObjectData(r,o,e,t):C=this.parsePrimitiveData(r,o,e,t);let I=()=>_[l]===null||d&&_[l]<d[l];for(h=0;h<t;++h)r._parsed[h+e]=_=C[h],c&&(I()&&(c=!1),d=_);r._sorted=c}a&&rH(this,C)}parsePrimitiveData(e,t,r,o){let{iScale:s,vScale:a}=e,l=s.axis,c=a.axis,d=s.getLabels(),h=s===a,_=new Array(o),C,I,b;for(C=0,I=o;C<I;++C)b=C+r,_[C]={[l]:h||s.parse(d[b],b),[c]:a.parse(t[b],b)};return _}parseArrayData(e,t,r,o){let{xScale:s,yScale:a}=e,l=new Array(o),c,d,h,_;for(c=0,d=o;c<d;++c)h=c+r,_=t[h],l[c]={x:s.parse(_[0],h),y:a.parse(_[1],h)};return l}parseObjectData(e,t,r,o){let{xScale:s,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(o),h,_,C,I;for(h=0,_=o;h<_;++h)C=h+r,I=t[C],d[h]={x:s.parse($d(I,l),C),y:a.parse($d(I,c),C)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){let o=this.chart,s=this._cachedMeta,a=t[e.axis],l={keys:eW(o,!0),values:t._stacks[e.axis]._visualValues};return iH(l,a,s.index,{mode:r})}updateRangeFromParsed(e,t,r,o){let s=r[t.axis],a=s===null?NaN:s,l=o&&r._stacks[t.axis];o&&l&&(o.values=l,a=iH(o,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){let r=this._cachedMeta,o=r._parsed,s=r._sorted&&e===r.iScale,a=o.length,l=this._getOtherScale(e),c=TRe(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:_}=SRe(l),C,I;function b(){I=o[C];let E=I[l.axis];return!zr(I[e.axis])||h>E||_<E}for(C=0;C<a&&!(!b()&&(this.updateRangeFromParsed(d,e,I,c),s));++C);if(s){for(C=a-1;C>=0;--C)if(!b()){this.updateRangeFromParsed(d,e,I,c);break}}return d}getAllParsedValues(e){let t=this._cachedMeta._parsed,r=[],o,s,a;for(o=0,s=t.length;o<s;++o)a=t[o][e.axis],zr(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,r=t.iScale,o=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(e){let t=this._cachedMeta;this.update(e||"default"),t._clip=wRe(Ni(this.options.clip,yRe(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,t=this.chart,r=this._cachedMeta,o=r.data||[],s=t.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||o.length-l,d=this.options.drawActiveElementsOnTop,h;for(r.dataset&&r.dataset.draw(e,s,l,c),h=l;h<l+c;++h){let _=o[h];_.hidden||(_.active&&d?a.push(_):_.draw(e,s))}for(h=0;h<a.length;++h)a[h].draw(e,s)}getStyle(e,t){let r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){let o=this.getDataset(),s;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];s=a.$context||(a.$context=xRe(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=o.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=ARe(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){let o=t==="active",s=this._cachedDataOpts,a=e+"-"+t,l=s[a],c=this.enableOptionSharing&&sg(r);if(l)return oH(l,c);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),_=o?[`${e}Hover`,"hover",e,""]:[e,""],C=d.getOptionScopes(this.getDataset(),h),I=Object.keys(Pr.elements[e]),b=()=>this.getContext(r,o,t),E=d.resolveNamedOptions(C,I,b,_);return E.$shared&&(E.$shared=c,s[a]=Object.freeze(oH(E,c))),E}_resolveAnimations(e,t,r){let o=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,l=s[a];if(l)return l;let c;if(o.options.animation!==!1){let h=this.chart.config,_=h.datasetAnimationScopeKeys(this._type,t),C=h.getOptionScopes(this.getDataset(),_);c=h.createResolver(C,this.getContext(e,r,t))}let d=new pS(o,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||GD(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let r=this.resolveDataElementOptions(e,t),o=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(t,s)||s!==o;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:a}}updateElement(e,t,r,o){GD(o)?Object.assign(e,r):this._resolveAnimations(t,o).update(e,r)}updateSharedOptions(e,t,r){e&&!GD(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,o){e.active=o;let s=this.getStyle(t,o);this._resolveAnimations(t,r,o).update(e,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,r=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let o=r.length,s=t.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,e):s<o&&this._removeElements(s,o-s)}_insertElements(e,t,r=!0){let o=this._cachedMeta,s=o.data,a=e+t,l,c=d=>{for(d.length+=t,l=d.length-1;l>=a;l--)d[l]=d[l-t]};for(c(s),l=e;l<a;++l)s[l]=new this.dataElementType;this._parsing&&c(o._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,o){}_removeElements(e,t){let r=this._cachedMeta;if(this._parsing){let o=r._parsed.splice(e,t);r._stacked&&_C(r,o)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,r,o]=e;this[t](r,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function ORe(i,n){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(n),t=[];for(let r=0,o=e.length;r<o;r++)t=t.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=ID(t.sort((r,o)=>r-o))}return i._cache.$bar}function RRe(i){let n=i.iScale,e=ORe(n,i.type),t=n._length,r,o,s,a,l=()=>{s===32767||s===-32768||(sg(a)&&(t=Math.min(t,Math.abs(s-a)||t)),a=s)};for(r=0,o=e.length;r<o;++r)s=n.getPixelForValue(e[r]),l();for(a=void 0,r=0,o=n.ticks.length;r<o;++r)s=n.getPixelForTick(r),l();return t}function PRe(i,n,e,t){let r=e.barThickness,o,s;return pn(r)?(o=n.min*e.categoryPercentage,s=e.barPercentage):(o=r*t,s=1),{chunk:o/t,ratio:s,start:n.pixels[i]-o/2}}function DRe(i,n,e,t){let r=n.pixels,o=r[i],s=i>0?r[i-1]:null,a=i<r.length-1?r[i+1]:null,l=e.categoryPercentage;s===null&&(s=o-(a===null?n.end-n.start:a-o)),a===null&&(a=o+o-s);let c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/t,ratio:e.barPercentage,start:c}}function FRe(i,n,e,t){let r=e.parse(i[0],t),o=e.parse(i[1],t),s=Math.min(r,o),a=Math.max(r,o),l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),n[e.axis]=c,n._custom={barStart:l,barEnd:c,start:r,end:o,min:s,max:a}}function tW(i,n,e,t){return Sr(i)?FRe(i,n,e,t):n[e.axis]=e.parse(i,t),n}function sH(i,n,e,t){let r=i.iScale,o=i.vScale,s=r.getLabels(),a=r===o,l=[],c,d,h,_;for(c=e,d=e+t;c<d;++c)_=n[c],h={},h[r.axis]=a||r.parse(s[c],c),l.push(tW(_,h,o,c));return l}function HD(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function kRe(i,n,e){return i!==0?Wl(i):(n.isHorizontal()?1:-1)*(n.min>=e?1:-1)}function NRe(i){let n,e,t,r,o;return i.horizontal?(n=i.base>i.x,e="left",t="right"):(n=i.base<i.y,e="bottom",t="top"),n?(r="end",o="start"):(r="start",o="end"),{start:e,end:t,reverse:n,top:r,bottom:o}}function LRe(i,n,e,t){let r=n.borderSkipped,o={};if(!r){i.borderSkipped=o;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:l,top:c,bottom:d}=NRe(i);r==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===t?r=c:(e._bottom||0)===t?r=d:(o[aH(d,s,a,l)]=!0,r=c)),o[aH(r,s,a,l)]=!0,i.borderSkipped=o}function aH(i,n,e,t){return t?(i=MRe(i,n,e),i=lH(i,e,n)):i=lH(i,n,e),i}function MRe(i,n,e){return i===n?e:i===e?n:i}function lH(i,n,e){return i==="start"?n:i==="end"?e:i}function VRe(i,{inflateAmount:n},e){i.inflateAmount=n==="auto"?e===1?.33:0:n}var BRe=(()=>{class i extends vu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,o){return sH(e,t,r,o)}parseArrayData(e,t,r,o){return sH(e,t,r,o)}parseObjectData(e,t,r,o){let{iScale:s,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=s.axis==="x"?l:c,h=a.axis==="x"?l:c,_=[],C,I,b,E;for(C=r,I=r+o;C<I;++C)E=t[C],b={},b[s.axis]=s.parse($d(E,d),C),_.push(tW($d(E,h),b,a,C));return _}updateRangeFromParsed(e,t,r,o){super.updateRangeFromParsed(e,t,r,o);let s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let t=this._cachedMeta,{iScale:r,vScale:o}=t,s=this.getParsed(e),a=s._custom,l=HD(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),h=this._getRuler(),{sharedOptions:_,includeOptions:C}=this._getSharedOptions(t,o);for(let I=t;I<t+r;I++){let b=this.getParsed(I),E=s||pn(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(I),R=this._calculateBarIndexPixels(I,h),T=(b._stacks||{})[l.axis],A={horizontal:d,base:E.base,enableBorderRadius:!T||HD(b._custom)||a===T._top||a===T._bottom,x:d?E.head:R.center,y:d?R.center:E.head,height:d?R.size:Math.abs(E.size),width:d?Math.abs(E.size):R.size};C&&(A.options=_||this.resolveDataElementOptions(I,e[I].active?"active":o));let U=A.options||e[I].options;LRe(A,U,T,a),VRe(A,U,h.ratio),this.updateElement(e[I],I,A,o)}}_getStacks(e,t){let{iScale:r}=this._cachedMeta,o=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[r.axis],d=h=>{let _=h._parsed.find(I=>I[r.axis]===c),C=_&&_[h.vScale.axis];if(pn(C)||isNaN(C))return!0};for(let h of o)if(!(t!==void 0&&d(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){let e={},t=this.getFirstScaleIdForIndexAxis();for(let r of this.chart.data.datasets)e[Ni(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){let o=this._getStacks(e,r),s=t!==void 0?o.indexOf(t):-1;return s===-1?o.length-1:s}_getRuler(){let e=this.options,t=this._cachedMeta,r=t.iScale,o=[],s,a;for(s=0,a=t.data.length;s<a;++s)o.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let l=e.barThickness;return{min:l||RRe(t),pixels:o,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:t,_stacked:r,index:o},options:{base:s,minBarLength:a}}=this,l=s||0,c=this.getParsed(e),d=c._custom,h=HD(d),_=c[t.axis],C=0,I=r?this.applyStack(t,c,r):_,b,E;I!==_&&(C=I-_,I=_),h&&(_=d.barStart,I=d.barEnd-d.barStart,_!==0&&Wl(_)!==Wl(d.barEnd)&&(C=0),C+=_);let R=!pn(s)&&!h?s:C,T=t.getPixelForValue(R);if(this.chart.getDataVisibility(e)?b=t.getPixelForValue(C+I):b=T,E=b-T,Math.abs(E)<a){E=kRe(E,t,l)*a,_===l&&(T-=E/2);let A=t.getPixelForDecimal(0),U=t.getPixelForDecimal(1),z=Math.min(A,U),ee=Math.max(A,U);T=Math.max(Math.min(T,ee),z),b=T+E,r&&!h&&(c._stacks[t.axis]._visualValues[o]=t.getValueForPixel(b)-t.getValueForPixel(T))}if(T===t.getPixelForValue(l)){let A=Wl(E)*t.getLineWidthForValue(l)/2;T+=A,E-=A}return{size:E,base:T,head:b,center:b+E/2}}_calculateBarIndexPixels(e,t){let r=t.scale,o=this.options,s=o.skipNull,a=Ni(o.maxBarThickness,1/0),l,c,d=this._getAxisCount();if(t.grouped){let h=s?this._getStackCount(e):t.stackCount,_=o.barThickness==="flex"?DRe(e,t,o,h*d):PRe(e,t,o,h*d),C=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(Ni(C,this.getFirstScaleIdForIndexAxis())),b=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+I;l=_.start+_.chunk*b+_.chunk/2,c=Math.min(a,_.chunk*_.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,t=e.vScale,r=e.data,o=r.length,s=0;for(;s<o;++s)this.getParsed(s)[t.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}return i})(),URe=(()=>{class i extends vu{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,o){let s=super.parsePrimitiveData(e,t,r,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(e,t,r,o){let s=super.parseArrayData(e,t,r,o);for(let a=0;a<s.length;a++){let l=t[r+a];s[a]._custom=Ni(l[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(e,t,r,o){let s=super.parseObjectData(e,t,r,o);for(let a=0;a<s.length;a++){let l=t[r+a];s[a]._custom=Ni(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){let e=this._cachedMeta.data,t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){let t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=t,a=this.getParsed(e),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y),d=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){let t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,o){let s=o==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,o),h=a.axis,_=l.axis;for(let C=t;C<t+r;C++){let I=e[C],b=!s&&this.getParsed(C),E={},R=E[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(b[h]),T=E[_]=s?l.getBasePixel():l.getPixelForValue(b[_]);E.skip=isNaN(R)||isNaN(T),d&&(E.options=c||this.resolveDataElementOptions(C,I.active?"active":o),s&&(E.options.radius=0)),this.updateElement(I,C,E,o)}}resolveDataElementOptions(e,t){let r=this.getParsed(e),o=super.resolveDataElementOptions(e,t);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return t!=="active"&&(o.radius=0),o.radius+=Ni(r&&r._custom,s),o}}return i})();function jRe(i,n,e){let t=1,r=1,o=0,s=0;if(n<Er){let a=i,l=a+n,c=Math.cos(a),d=Math.sin(a),h=Math.cos(l),_=Math.sin(l),C=(A,U,z)=>lg(A,a,l,!0)?1:Math.max(U,U*e,z,z*e),I=(A,U,z)=>lg(A,a,l,!0)?-1:Math.min(U,U*e,z,z*e),b=C(0,c,h),E=C(no,d,_),R=I(Rn,c,h),T=I(Rn+no,d,_);t=(b-R)/2,r=(E-T)/2,o=-(b+R)/2,s=-(E+T)/2}return{ratioX:t,ratioY:r,offsetX:o,offsetY:s}}var CF=(()=>{class i extends vu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:r,color:o}}=e.legend.options;return t.labels.map((s,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){let r=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=r;else{let s=c=>+r[c];if(gn(r[e])){let{key:c="value"}=this._parsing;s=d=>+$d(r[d],c)}let a,l;for(a=e,l=e+t;a<l;++a)o._parsed[a]=s(a)}}_getRotation(){return Cl(this.options.rotation-90)}_getCircumference(){return Cl(this.options.circumference)}_getRotationExtents(){let e=Er,t=-Er;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let o=this.chart.getDatasetMeta(r).controller,s=o._getRotation(),a=o._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){let t=this.chart,{chartArea:r}=t,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(AG(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:h,rotation:_}=this._getRotationExtents(),{ratioX:C,ratioY:I,offsetX:b,offsetY:E}=jRe(_,h,c),R=(r.width-a)/C,T=(r.height-a)/I,A=Math.max(Math.min(R,T)/2,0),U=uD(this.options.radius,A),z=Math.max(U*c,0),ee=(U-z)/this._getVisibleDatasetWeightTotal();this.offsetX=b*U,this.offsetY=E*U,o.total=this.calculateTotal(),this.outerRadius=U-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){let r=this.options,o=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*s/Er)}updateElements(e,t,r,o){let s=o==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,h=(l.left+l.right)/2,_=(l.top+l.bottom)/2,C=s&&d.animateScale,I=C?0:this.innerRadius,b=C?0:this.outerRadius,{sharedOptions:E,includeOptions:R}=this._getSharedOptions(t,o),T=this._getRotation(),A;for(A=0;A<t;++A)T+=this._circumference(A,s);for(A=t;A<t+r;++A){let U=this._circumference(A,s),z=e[A],ee={x:h+this.offsetX,y:_+this.offsetY,startAngle:T,endAngle:T+U,circumference:U,outerRadius:b,innerRadius:I};R&&(ee.options=E||this.resolveDataElementOptions(A,z.active?"active":o)),T+=U,this.updateElement(z,A,ee,o)}}calculateTotal(){let e=this._cachedMeta,t=e.data,r=0,o;for(o=0;o<t.length;o++){let s=e._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!t[o].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){let t=this._cachedMeta.total;return t>0&&!isNaN(e)?Er*(Math.abs(e)/t):0}getLabelAndValue(e){let t=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=cg(t._parsed[e],r.options.locale);return{label:o[e]||"",value:s}}getMaxBorderWidth(e){let t=0,r=this.chart,o,s,a,l,c;if(!e){for(o=0,s=r.data.datasets.length;o<s;++o)if(r.isDatasetVisible(o)){a=r.getDatasetMeta(o),e=a.data,l=a.controller;break}}if(!e)return 0;for(o=0,s=e.length;o<s;++o)c=l.resolveDataElementOptions(o),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,o=e.length;r<o;++r){let s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Ni(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),GRe=(()=>{class i extends vu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:r,data:o=[],_dataset:s}=t,a=this.chart._animationsDisabled,{start:l,count:c}=vD(t,o,a);this._drawStart=l,this._drawCount=c,bD(t)&&(l=0,c=o.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=o;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},e),this.updateElements(o,l,c,e)}updateElements(e,t,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:_}=this._getSharedOptions(t,o),C=a.axis,I=l.axis,{spanGaps:b,segment:E}=this.options,R=Mh(b)?b:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||o==="none",A=t+r,U=e.length,z=t>0&&this.getParsed(t-1);for(let ee=0;ee<U;++ee){let re=e[ee],Z=T?re:{};if(ee<t||ee>=A){Z.skip=!0;continue}let ae=this.getParsed(ee),Ie=pn(ae[I]),ye=Z[C]=a.getPixelForValue(ae[C],ee),xe=Z[I]=s||Ie?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,ae,c):ae[I],ee);Z.skip=isNaN(ye)||isNaN(xe)||Ie,Z.stop=ee>0&&Math.abs(ae[C]-z[C])>R,E&&(Z.parsed=ae,Z.raw=d.data[ee]),_&&(Z.options=h||this.resolveDataElementOptions(ee,re.active?"active":o)),T||this.updateElement(re,ee,Z,o),z=ae}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,o=e.data||[];if(!o.length)return r;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(r,s,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})(),iW=(()=>{class i extends vu{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let t=e.data;if(t.labels.length&&t.datasets.length){let{labels:{pointStyle:r,color:o}}=e.legend.options;return t.labels.map((s,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let t=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=cg(t._parsed[e].r,r.options.locale);return{label:o[e]||"",value:s}}parseObjectData(e,t,r,o){return DD.bind(this)(e,t,r,o)}update(e){let t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){let e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){let e=this.chart,t=e.chartArea,r=e.options,o=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(o/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),l=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,t,r,o){let s=o==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,_=d.yCenter,C=d.getIndexAngle(0)-.5*Rn,I=C,b,E=360/this.countVisibleElements();for(b=0;b<t;++b)I+=this._computeAngle(b,o,E);for(b=t;b<t+r;b++){let R=e[b],T=I,A=I+this._computeAngle(b,o,E),U=a.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;I=A,s&&(c.animateScale&&(U=0),c.animateRotate&&(T=A=C));let z={x:h,y:_,innerRadius:0,outerRadius:U,startAngle:T,endAngle:A,options:this.resolveDataElementOptions(b,R.active?"active":o)};this.updateElement(R,b,z,o)}}countVisibleElements(){let e=this._cachedMeta,t=0;return e.data.forEach((r,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Cl(this.resolveDataElementOptions(e,t).angle||r):0}}return i})(),HRe=(()=>{class i extends CF{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),WRe=(()=>{class i extends vu{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,o){return DD.bind(this)(e,t,r,o)}update(e){let t=this._cachedMeta,r=t.dataset,o=t.data||[],s=t.iScale.getLabels();if(r.points=o,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(r,void 0,l,e)}this.updateElements(o,0,o.length,e)}updateElements(e,t,r,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let l=t;l<t+r;l++){let c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":o),h=s.getPointPositionForValue(l,this.getParsed(l).r),_=a?s.xCenter:h.x,C=a?s.yCenter:h.y,I={x:_,y:C,angle:h.angle,skip:isNaN(_)||isNaN(C),options:d};this.updateElement(c,l,I,o)}}}return i})(),zRe=(()=>{class i extends vu{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=t,a=this.getParsed(e),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){let t=this._cachedMeta,{data:r=[]}=t,o=this.chart._animationsDisabled,{start:s,count:a}=vD(t,r,o);if(this._drawStart=s,this._drawCount=a,bD(t)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=t;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!o,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(t,o),_=this.getSharedOptions(h),C=this.includeOptions(o,_),I=a.axis,b=l.axis,{spanGaps:E,segment:R}=this.options,T=Mh(E)?E:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||o==="none",U=t>0&&this.getParsed(t-1);for(let z=t;z<t+r;++z){let ee=e[z],re=this.getParsed(z),Z=A?ee:{},ae=pn(re[b]),Ie=Z[I]=a.getPixelForValue(re[I],z),ye=Z[b]=s||ae?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,re,c):re[b],z);Z.skip=isNaN(Ie)||isNaN(ye)||ae,Z.stop=z>0&&Math.abs(re[I]-U[I])>T,R&&(Z.parsed=re,Z.raw=d.data[z]),C&&(Z.options=_||this.resolveDataElementOptions(z,ee.active?"active":o)),A||this.updateElement(ee,z,Z,o),U=re}this.updateSharedOptions(_,o,h)}getMaxOverflow(){let e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let l=0;for(let c=t.length-1;c>=0;--c)l=Math.max(l,t[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=e.dataset,o=r.options&&r.options.borderWidth||0;if(!t.length)return o;let s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(o,s,a)/2}}return i})(),KRe=Object.freeze({__proto__:null,BarController:BRe,BubbleController:URe,DoughnutController:CF,LineController:GRe,PieController:HRe,PolarAreaController:iW,RadarController:WRe,ScatterController:zRe});function Bh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var ZD=class i{static override(n){Object.assign(i.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return Bh()}parse(){return Bh()}format(){return Bh()}add(){return Bh()}diff(){return Bh()}startOf(){return Bh()}endOf(){return Bh()}},$Re={_date:ZD};function JRe(i,n,e,t){let{controller:r,data:o,_sorted:s}=i,a=r._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&n===a.axis&&n!=="r"&&s&&o.length){let c=a._reversePixels?DG:Nc;if(t){if(r._sharedOptions){let d=o[0],h=typeof d.getRange=="function"&&d.getRange(n);if(h){let _=c(o,n,e-h),C=c(o,n,e+h);return{lo:_.lo,hi:C.hi}}}}else{let d=c(o,n,e);if(l){let{vScale:h}=r._cachedMeta,{_parsed:_}=i,C=_.slice(0,d.lo+1).reverse().findIndex(b=>!pn(b[h.axis]));d.lo-=Math.max(0,C);let I=_.slice(d.hi).findIndex(b=>!pn(b[h.axis]));d.hi+=Math.max(0,I)}return d}}return{lo:0,hi:o.length-1}}function xC(i,n,e,t,r){let o=i.getSortedVisibleDatasetMetas(),s=e[n];for(let a=0,l=o.length;a<l;++a){let{index:c,data:d}=o[a],{lo:h,hi:_}=JRe(o[a],n,s,r);for(let C=h;C<=_;++C){let I=d[C];I.skip||t(I,c,C)}}}function qRe(i){let n=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(t,r){let o=n?Math.abs(t.x-r.x):0,s=e?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function WD(i,n,e,t,r){let o=[];return!r&&!i.isPointInArea(n)||xC(i,e,n,function(a,l,c){!r&&!Lc(a,i.chartArea,0)||a.inRange(n.x,n.y,t)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function YRe(i,n,e,t){let r=[];function o(s,a,l){let{startAngle:c,endAngle:d}=s.getProps(["startAngle","endAngle"],t),{angle:h}=_D(s,{x:n.x,y:n.y});lg(h,c,d)&&r.push({element:s,datasetIndex:a,index:l})}return xC(i,e,n,o),r}function XRe(i,n,e,t,r,o){let s=[],a=qRe(e),l=Number.POSITIVE_INFINITY;function c(d,h,_){let C=d.inRange(n.x,n.y,r);if(t&&!C)return;let I=d.getCenterPoint(r);if(!(!!o||i.isPointInArea(I))&&!C)return;let E=a(n,I);E<l?(s=[{element:d,datasetIndex:h,index:_}],l=E):E===l&&s.push({element:d,datasetIndex:h,index:_})}return xC(i,e,n,c),s}function zD(i,n,e,t,r,o){return!o&&!i.isPointInArea(n)?[]:e==="r"&&!t?YRe(i,n,e,r):XRe(i,n,e,t,r,o)}function cH(i,n,e,t,r){let o=[],s=e==="x"?"inXRange":"inYRange",a=!1;return xC(i,e,n,(l,c,d)=>{l[s]&&l[s](n[e],r)&&(o.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(n.x,n.y,r))}),t&&!a?[]:o}var QRe={evaluateInteractionItems:xC,modes:{index(i,n,e,t){let r=yu(n,i),o=e.axis||"x",s=e.includeInvisible||!1,a=e.intersect?WD(i,r,o,t,s):zD(i,r,o,!1,t,s),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{let d=a[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(i,n,e,t){let r=yu(n,i),o=e.axis||"xy",s=e.includeInvisible||!1,a=e.intersect?WD(i,r,o,t,s):zD(i,r,o,!1,t,s);if(a.length>0){let l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(i,n,e,t){let r=yu(n,i),o=e.axis||"xy",s=e.includeInvisible||!1;return WD(i,r,o,t,s)},nearest(i,n,e,t){let r=yu(n,i),o=e.axis||"xy",s=e.includeInvisible||!1;return zD(i,r,o,e.intersect,t,s)},x(i,n,e,t){let r=yu(n,i);return cH(i,r,"x",e.intersect,t)},y(i,n,e,t){let r=yu(n,i);return cH(i,r,"y",e.intersect,t)}}},nW=["left","top","right","bottom"];function CC(i,n){return i.filter(e=>e.pos===n)}function dH(i,n){return i.filter(e=>nW.indexOf(e.pos)===-1&&e.box.axis===n)}function IC(i,n){return i.sort((e,t)=>{let r=n?t:e,o=n?e:t;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function ZRe(i){let n=[],e,t,r,o,s,a;for(e=0,t=(i||[]).length;e<t;++e)r=i[e],{position:o,options:{stack:s,stackWeight:a=1}}=r,n.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return n}function ePe(i){let n={};for(let e of i){let{stack:t,pos:r,stackWeight:o}=e;if(!t||!nW.includes(r))continue;let s=n[t]||(n[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return n}function tPe(i,n){let e=ePe(i),{vBoxMaxWidth:t,hBoxMaxHeight:r}=n,o,s,a;for(o=0,s=i.length;o<s;++o){a=i[o];let{fullSize:l}=a.box,c=e[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*t:l&&n.availableWidth,a.height=r):(a.width=t,a.height=d?d*r:l&&n.availableHeight)}return e}function iPe(i){let n=ZRe(i),e=IC(n.filter(c=>c.box.fullSize),!0),t=IC(CC(n,"left"),!0),r=IC(CC(n,"right")),o=IC(CC(n,"top"),!0),s=IC(CC(n,"bottom")),a=dH(n,"x"),l=dH(n,"y");return{fullSize:e,leftAndTop:t.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:CC(n,"chartArea"),vertical:t.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}function pH(i,n,e,t){return Math.max(i[e],n[e])+Math.max(i[t],n[t])}function rW(i,n){i.top=Math.max(i.top,n.top),i.left=Math.max(i.left,n.left),i.bottom=Math.max(i.bottom,n.bottom),i.right=Math.max(i.right,n.right)}function nPe(i,n,e,t){let{pos:r,box:o}=e,s=i.maxPadding;if(!gn(r)){e.size&&(i[r]-=e.size);let h=t[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?o.height:o.width),e.size=h.size/h.count,i[r]+=e.size}o.getPadding&&rW(s,o.getPadding());let a=Math.max(0,n.outerWidth-pH(s,i,"left","right")),l=Math.max(0,n.outerHeight-pH(s,i,"top","bottom")),c=a!==i.w,d=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function rPe(i){let n=i.maxPadding;function e(t){let r=Math.max(n[t]-i[t],0);return i[t]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function oPe(i,n){let e=n.maxPadding;function t(r){let o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(n[s],e[s])}),o}return t(i?["left","right"]:["top","bottom"])}function vC(i,n,e,t){let r=[],o,s,a,l,c,d;for(o=0,s=i.length,c=0;o<s;++o){a=i[o],l=a.box,l.update(a.width||n.w,a.height||n.h,oPe(a.horizontal,n));let{same:h,other:_}=nPe(n,e,a,t);c|=h&&r.length,d=d||_,l.fullSize||r.push(a)}return c&&vC(r,n,e,t)||d}function nS(i,n,e,t,r){i.top=e,i.left=n,i.right=n+t,i.bottom=e+r,i.width=t,i.height=r}function uH(i,n,e,t){let r=e.padding,{x:o,y:s}=n;for(let a of i){let l=a.box,c=t[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){let h=n.w*d,_=c.size||l.height;sg(c.start)&&(s=c.start),l.fullSize?nS(l,r.left,s,e.outerWidth-r.right-r.left,_):nS(l,n.left+c.placed,s,h,_),c.start=s,c.placed+=h,s=l.bottom}else{let h=n.h*d,_=c.size||l.width;sg(c.start)&&(o=c.start),l.fullSize?nS(l,o,r.top,_,e.outerHeight-r.bottom-r.top):nS(l,o,n.top+c.placed,_,h),c.start=o,c.placed+=h,o=l.right}}n.x=o,n.y=s}var Ps={addBox(i,n){i.boxes||(i.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(e){n.draw(e)}}]},i.boxes.push(n)},removeBox(i,n){let e=i.boxes?i.boxes.indexOf(n):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,n,e){n.fullSize=e.fullSize,n.position=e.position,n.weight=e.weight},update(i,n,e,t){if(!i)return;let r=Cs(i.options.layout.padding),o=Math.max(n-r.width,0),s=Math.max(e-r.height,0),a=iPe(i.boxes),l=a.vertical,c=a.horizontal;Gn(i.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=l.reduce((b,E)=>E.box.options&&E.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:n,outerHeight:e,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),_=Object.assign({},r);rW(_,Cs(t));let C=Object.assign({maxPadding:_,w:o,h:s,x:r.left,y:r.top},r),I=tPe(l.concat(c),h);vC(a.fullSize,C,h,I),vC(l,C,h,I),vC(c,C,h,I)&&vC(l,C,h,I),rPe(C),uH(a.leftAndTop,C,h,I),C.x+=C.w,C.y+=C.h,uH(a.rightAndBottom,C,h,I),i.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Gn(a.chartArea,b=>{let E=b.box;Object.assign(E,i.chartArea),E.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}},uS=class{acquireContext(n,e){}releaseContext(n){return!1}addEventListener(n,e,t){}removeEventListener(n,e,t){}getDevicePixelRatio(){return 1}getMaximumSize(n,e,t,r){return e=Math.max(0,e||n.width),t=t||n.height,{width:e,height:Math.max(0,r?Math.floor(e/r):t)}}isAttached(n){return!0}updateConfig(n){}},eF=class extends uS{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}},cS="$chartjs",sPe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hH=i=>i===null||i==="";function aPe(i,n){let e=i.style,t=i.getAttribute("height"),r=i.getAttribute("width");if(i[cS]={initial:{height:t,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",hH(r)){let o=kD(i,"width");o!==void 0&&(i.width=o)}if(hH(t))if(i.style.height==="")i.height=i.width/(n||2);else{let o=kD(i,"height");o!==void 0&&(i.height=o)}return i}var oW=qG?{passive:!0}:!1;function lPe(i,n,e){i&&i.addEventListener(n,e,oW)}function cPe(i,n,e){i&&i.canvas&&i.canvas.removeEventListener(n,e,oW)}function dPe(i,n){let e=sPe[i.type]||i.type,{x:t,y:r}=yu(i,n);return{type:e,chart:n,native:i,x:t!==void 0?t:null,y:r!==void 0?r:null}}function hS(i,n){for(let e of i)if(e===n||e.contains(n))return!0}function pPe(i,n,e){let t=i.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||hS(a.addedNodes,t),s=s&&!hS(a.removedNodes,t);s&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function uPe(i,n,e){let t=i.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||hS(a.removedNodes,t),s=s&&!hS(a.addedNodes,t);s&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var SC=new Map,fH=0;function sW(){let i=window.devicePixelRatio;i!==fH&&(fH=i,SC.forEach((n,e)=>{e.currentDevicePixelRatio!==i&&n()}))}function hPe(i,n){SC.size||window.addEventListener("resize",sW),SC.set(i,n)}function fPe(i){SC.delete(i),SC.size||window.removeEventListener("resize",sW)}function mPe(i,n,e){let t=i.canvas,r=t&&tS(t);if(!r)return;let o=wD((a,l)=>{let c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),s=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return s.observe(r),hPe(i,o),s}function KD(i,n,e){e&&e.disconnect(),n==="resize"&&fPe(i)}function gPe(i,n,e){let t=i.canvas,r=wD(o=>{i.ctx!==null&&e(dPe(o,i))},i);return lPe(t,n,r),r}var tF=class extends uS{acquireContext(n,e){let t=n&&n.getContext&&n.getContext("2d");return t&&t.canvas===n?(aPe(n,e),t):null}releaseContext(n){let e=n.canvas;if(!e[cS])return!1;let t=e[cS].initial;["height","width"].forEach(o=>{let s=t[o];pn(s)?e.removeAttribute(o):e.setAttribute(o,s)});let r=t.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[cS],!0}addEventListener(n,e,t){this.removeEventListener(n,e);let r=n.$proxies||(n.$proxies={}),s={attach:pPe,detach:uPe,resize:mPe}[e]||gPe;r[e]=s(n,e,t)}removeEventListener(n,e){let t=n.$proxies||(n.$proxies={}),r=t[e];if(!r)return;({attach:KD,detach:KD,resize:KD}[e]||cPe)(n,e,r),t[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,e,t,r){return JG(n,e,t,r)}isAttached(n){let e=n&&tS(n);return!!(e&&e.isConnected)}};function _Pe(i){return!eS()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?eF:tF}var zl=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(n){let{x:e,y:t}=this.getProps(["x","y"],n);return{x:e,y:t}}hasValue(){return Mh(this.x)&&Mh(this.y)}getProps(n,e){let t=this.$animations;if(!e||!t)return this;let r={};return n.forEach(o=>{r[o]=t[o]&&t[o].active()?t[o]._to:this[o]}),r}};function CPe(i,n){let e=i.options.ticks,t=IPe(i),r=Math.min(e.maxTicksLimit||t,t),o=e.major.enabled?wPe(n):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>r)return vPe(n,c,o,s/r),c;let d=yPe(o,n,r);if(s>0){let h,_,C=s>1?Math.round((l-a)/(s-1)):null;for(rS(n,c,d,pn(C)?0:a-C,a),h=0,_=s-1;h<_;h++)rS(n,c,d,o[h],o[h+1]);return rS(n,c,d,l,pn(C)?n.length:l+C),c}return rS(n,c,d),c}function IPe(i){let n=i.options.offset,e=i._tickSize(),t=i._length/e+(n?0:1),r=i._maxLength/e;return Math.floor(Math.min(t,r))}function yPe(i,n,e){let t=bPe(i),r=n.length/e;if(!t)return Math.max(r,1);let o=OG(t);for(let s=0,a=o.length-1;s<a;s++){let l=o[s];if(l>r)return l}return Math.max(r,1)}function wPe(i){let n=[],e,t;for(e=0,t=i.length;e<t;e++)i[e].major&&n.push(e);return n}function vPe(i,n,e,t){let r=0,o=e[0],s;for(t=Math.ceil(t),s=0;s<i.length;s++)s===o&&(n.push(i[s]),r++,o=e[r*t])}function rS(i,n,e,t,r){let o=Ni(t,0),s=Math.min(Ni(r,i.length),i.length),a=0,l,c,d;for(e=Math.ceil(e),r&&(l=r-t,e=l/Math.floor(l/e)),d=o;d<0;)a++,d=Math.round(o+a*e);for(c=Math.max(o,0);c<s;c++)c===d&&(n.push(i[c]),a++,d=Math.round(o+a*e))}function bPe(i){let n=i.length,e,t;if(n<2)return!1;for(t=i[0],e=1;e<n;++e)if(i[e]-i[e-1]!==t)return!1;return t}var SPe=i=>i==="left"?"right":i==="right"?"left":i,mH=(i,n,e)=>n==="top"||n==="left"?i[n]+e:i[n]-e,gH=(i,n)=>Math.min(n||i,i);function _H(i,n){let e=[],t=i.length/n,r=i.length,o=0;for(;o<r;o+=t)e.push(i[Math.floor(o)]);return e}function EPe(i,n,e){let t=i.ticks.length,r=Math.min(n,t-1),o=i._startPixel,s=i._endPixel,a=1e-6,l=i.getPixelForTick(r),c;if(!(e&&(t===1?c=Math.max(l-o,s-l):n===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(r-1))/2,l+=r<n?c:-c,l<o-a||l>s+a)))return l}function APe(i,n){Gn(i,e=>{let t=e.gc,r=t.length/2,o;if(r>n){for(o=0;o<r;++o)delete e.data[t[o]];t.splice(0,r)}})}function yC(i){return i.drawTicks?i.tickLength:0}function CH(i,n){if(!i.display)return 0;let e=vo(i.font,n),t=Cs(i.padding);return(Sr(i.text)?i.text.length:1)*e.lineHeight+t.height}function xPe(i,n){return Jd(i,{scale:n,type:"scale"})}function TPe(i,n,e){return Jd(i,{tick:e,index:n,type:"tick"})}function OPe(i,n,e){let t=q1(i);return(e&&n!=="right"||!e&&n==="right")&&(t=SPe(t)),t}function RPe(i,n,e,t){let{top:r,left:o,bottom:s,right:a,chart:l}=i,{chartArea:c,scales:d}=l,h=0,_,C,I,b=s-r,E=a-o;if(i.isHorizontal()){if(C=_s(t,o,a),gn(e)){let R=Object.keys(e)[0],T=e[R];I=d[R].getPixelForValue(T)+b-n}else e==="center"?I=(c.bottom+c.top)/2+b-n:I=mH(i,e,n);_=a-o}else{if(gn(e)){let R=Object.keys(e)[0],T=e[R];C=d[R].getPixelForValue(T)-E+n}else e==="center"?C=(c.left+c.right)/2-E+n:C=mH(i,e,n);I=_s(t,s,r),h=e==="left"?-no:no}return{titleX:C,titleY:I,maxWidth:_,rotation:h}}var jh=class i extends zl{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,e){return n}getUserBounds(){let{_userMin:n,_userMax:e,_suggestedMin:t,_suggestedMax:r}=this;return n=ua(n,Number.POSITIVE_INFINITY),e=ua(e,Number.NEGATIVE_INFINITY),t=ua(t,Number.POSITIVE_INFINITY),r=ua(r,Number.NEGATIVE_INFINITY),{min:ua(n,t),max:ua(e,r),minDefined:zr(n),maxDefined:zr(e)}}getMinMax(n){let{min:e,max:t,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:e,max:t};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)s=a[l].controller.getMinMax(this,n),r||(e=Math.min(e,s.min)),o||(t=Math.max(t,s.max));return e=o&&e>t?t:e,t=r&&e>t?e:t,{min:ua(e,ua(t,e)),max:ua(t,ua(e,t))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){dr(this.options.beforeUpdate,[this])}update(n,e,t){let{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=e,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=GG(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?_H(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=CPe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n=this.options.reverse,e,t;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){dr(this.options.afterUpdate,[this])}beforeSetDimensions(){dr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){dr(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),dr(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){dr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){let e=this.options.ticks,t,r,o;for(t=0,r=n.length;t<r;t++)o=n[t],o.label=dr(e.callback,[o.value,t,n],this)}afterTickToLabelConversion(){dr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){dr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let n=this.options,e=n.ticks,t=gH(this.ticks.length,n.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation,s=r,a,l,c;if(!this._isVisible()||!e.display||r>=o||t<=1||!this.isHorizontal()){this.labelRotation=r;return}let d=this._getLabelSizes(),h=d.widest.width,_=d.highest.height,C=ko(this.chart.width-h,0,this.maxWidth);a=n.offset?this.maxWidth/t:C/(t-1),h+6>a&&(a=C/(t-(n.offset?.5:1)),l=this.maxHeight-yC(n.grid)-e.padding-CH(n.title,this.chart.options.font),c=Math.sqrt(h*h+_*_),s=$1(Math.min(Math.asin(ko((d.highest.height+6)/a,-1,1)),Math.asin(ko(l/c,-1,1))-Math.asin(ko(_/c,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){dr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){dr(this.options.beforeFit,[this])}fit(){let n={width:0,height:0},{chart:e,options:{ticks:t,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let l=CH(r,e.options.font);if(a?(n.width=this.maxWidth,n.height=yC(o)+l):(n.height=this.maxHeight,n.width=yC(o)+l),t.display&&this.ticks.length){let{first:c,last:d,widest:h,highest:_}=this._getLabelSizes(),C=t.padding*2,I=Cl(this.labelRotation),b=Math.cos(I),E=Math.sin(I);if(a){let R=t.mirror?0:E*h.width+b*_.height;n.height=Math.min(this.maxHeight,n.height+R+C)}else{let R=t.mirror?0:b*h.width+E*_.height;n.width=Math.min(this.maxWidth,n.width+R+C)}this._calculatePadding(c,d,E,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,e,t,r){let{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),_=0,C=0;l?c?(_=r*n.width,C=t*e.height):(_=t*n.height,C=r*e.width):o==="start"?C=e.width:o==="end"?_=n.width:o!=="inner"&&(_=n.width/2,C=e.width/2),this.paddingLeft=Math.max((_-d+s)*this.width/(this.width-d),0),this.paddingRight=Math.max((C-h+s)*this.width/(this.width-h),0)}else{let d=e.height/2,h=n.height/2;o==="start"?(d=0,h=n.height):o==="end"&&(d=e.height,h=0),this.paddingTop=d+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){dr(this.options.afterFit,[this])}isHorizontal(){let{axis:n,position:e}=this.options;return e==="top"||e==="bottom"||n==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){this.beforeTickToLabelConversion(),this.generateTickLabels(n);let e,t;for(e=0,t=n.length;e<t;e++)pn(n[e].label)&&(n.splice(e,1),t--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){let e=this.options.ticks.sampleSize,t=this.ticks;e<t.length&&(t=_H(t,e)),this._labelSizes=n=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,e,t){let{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(e/gH(e,t)),c=0,d=0,h,_,C,I,b,E,R,T,A,U,z;for(h=0;h<e;h+=l){if(I=n[h].label,b=this._resolveTickFontOptions(h),r.font=E=b.string,R=o[E]=o[E]||{data:{},gc:[]},T=b.lineHeight,A=U=0,!pn(I)&&!Sr(I))A=uC(r,R.data,R.gc,A,I),U=T;else if(Sr(I))for(_=0,C=I.length;_<C;++_)z=I[_],!pn(z)&&!Sr(z)&&(A=uC(r,R.data,R.gc,A,z),U+=T);s.push(A),a.push(U),c=Math.max(A,c),d=Math.max(U,d)}APe(o,e);let ee=s.indexOf(c),re=a.indexOf(d),Z=ae=>({width:s[ae]||0,height:a[ae]||0});return{first:Z(0),last:Z(e-1),widest:Z(ee),highest:Z(re),widths:s,heights:a}}getLabelForValue(n){return n}getPixelForValue(n,e){return NaN}getValueForPixel(n){}getPixelForTick(n){let e=this.ticks;return n<0||n>e.length-1?null:this.getPixelForValue(e[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);let e=this._startPixel+n*this._length;return PG(this._alignToPixels?_u(this.chart,e,0):e)}getDecimalForPixel(n){let e=(n-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:n,max:e}=this;return n<0&&e<0?e:n>0&&e>0?n:0}getContext(n){let e=this.ticks||[];if(n>=0&&n<e.length){let t=e[n];return t.$context||(t.$context=TPe(this.getContext(),n,t))}return this.$context||(this.$context=xPe(this.chart.getContext(),this))}_tickSize(){let n=this.options.ticks,e=Cl(this.labelRotation),t=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=n.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*t>a*r?a/t:l/r:l*r<a*t?l/t:a/r}_isVisible(){let n=this.options.display;return n!=="auto"?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){let e=this.axis,t=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),_=yC(o),C=[],I=a.setContext(this.getContext()),b=I.display?I.width:0,E=b/2,R=function($e){return _u(t,$e,b)},T,A,U,z,ee,re,Z,ae,Ie,ye,xe,Le;if(s==="top")T=R(this.bottom),re=this.bottom-_,ae=T-E,ye=R(n.top)+E,Le=n.bottom;else if(s==="bottom")T=R(this.top),ye=n.top,Le=R(n.bottom)-E,re=T+E,ae=this.top+_;else if(s==="left")T=R(this.right),ee=this.right-_,Z=T-E,Ie=R(n.left)+E,xe=n.right;else if(s==="right")T=R(this.left),Ie=n.left,xe=R(n.right)-E,ee=T+E,Z=this.left+_;else if(e==="x"){if(s==="center")T=R((n.top+n.bottom)/2+.5);else if(gn(s)){let $e=Object.keys(s)[0],oi=s[$e];T=R(this.chart.scales[$e].getPixelForValue(oi))}ye=n.top,Le=n.bottom,re=T+E,ae=re+_}else if(e==="y"){if(s==="center")T=R((n.left+n.right)/2);else if(gn(s)){let $e=Object.keys(s)[0],oi=s[$e];T=R(this.chart.scales[$e].getPixelForValue(oi))}ee=T-E,Z=ee-_,Ie=n.left,xe=n.right}let gi=Ni(r.ticks.maxTicksLimit,h),be=Math.max(1,Math.ceil(h/gi));for(A=0;A<h;A+=be){let $e=this.getContext(A),oi=o.setContext($e),Hi=a.setContext($e),Ui=oi.lineWidth,fi=oi.color,ji=Hi.dash||[],pi=Hi.dashOffset,Ti=oi.tickWidth,Ut=oi.tickColor,Ot=oi.tickBorderDash||[],_i=oi.tickBorderDashOffset;U=EPe(this,A,l),U!==void 0&&(z=_u(t,U,Ui),c?ee=Z=Ie=xe=z:re=ae=ye=Le=z,C.push({tx1:ee,ty1:re,tx2:Z,ty2:ae,x1:Ie,y1:ye,x2:xe,y2:Le,width:Ui,color:fi,borderDash:ji,borderDashOffset:pi,tickWidth:Ti,tickColor:Ut,tickBorderDash:Ot,tickBorderDashOffset:_i}))}return this._ticksLength=h,this._borderValue=T,C}_computeLabelItems(n){let e=this.axis,t=this.options,{position:r,ticks:o}=t,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,_=yC(t.grid),C=_+d,I=h?-d:C,b=-Cl(this.labelRotation),E=[],R,T,A,U,z,ee,re,Z,ae,Ie,ye,xe,Le="middle";if(r==="top")ee=this.bottom-I,re=this._getXAxisLabelAlignment();else if(r==="bottom")ee=this.top+I,re=this._getXAxisLabelAlignment();else if(r==="left"){let be=this._getYAxisLabelAlignment(_);re=be.textAlign,z=be.x}else if(r==="right"){let be=this._getYAxisLabelAlignment(_);re=be.textAlign,z=be.x}else if(e==="x"){if(r==="center")ee=(n.top+n.bottom)/2+C;else if(gn(r)){let be=Object.keys(r)[0],$e=r[be];ee=this.chart.scales[be].getPixelForValue($e)+C}re=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")z=(n.left+n.right)/2-C;else if(gn(r)){let be=Object.keys(r)[0],$e=r[be];z=this.chart.scales[be].getPixelForValue($e)}re=this._getYAxisLabelAlignment(_).textAlign}e==="y"&&(l==="start"?Le="top":l==="end"&&(Le="bottom"));let gi=this._getLabelSizes();for(R=0,T=a.length;R<T;++R){A=a[R],U=A.label;let be=o.setContext(this.getContext(R));Z=this.getPixelForTick(R)+o.labelOffset,ae=this._resolveTickFontOptions(R),Ie=ae.lineHeight,ye=Sr(U)?U.length:1;let $e=ye/2,oi=be.color,Hi=be.textStrokeColor,Ui=be.textStrokeWidth,fi=re;s?(z=Z,re==="inner"&&(R===T-1?fi=this.options.reverse?"left":"right":R===0?fi=this.options.reverse?"right":"left":fi="center"),r==="top"?c==="near"||b!==0?xe=-ye*Ie+Ie/2:c==="center"?xe=-gi.highest.height/2-$e*Ie+Ie:xe=-gi.highest.height+Ie/2:c==="near"||b!==0?xe=Ie/2:c==="center"?xe=gi.highest.height/2-$e*Ie:xe=gi.highest.height-ye*Ie,h&&(xe*=-1),b!==0&&!be.showLabelBackdrop&&(z+=Ie/2*Math.sin(b))):(ee=Z,xe=(1-ye)*Ie/2);let ji;if(be.showLabelBackdrop){let pi=Cs(be.backdropPadding),Ti=gi.heights[R],Ut=gi.widths[R],Ot=xe-pi.top,_i=0-pi.left;switch(Le){case"middle":Ot-=Ti/2;break;case"bottom":Ot-=Ti;break}switch(re){case"center":_i-=Ut/2;break;case"right":_i-=Ut;break;case"inner":R===T-1?_i-=Ut:R>0&&(_i-=Ut/2);break}ji={left:_i,top:Ot,width:Ut+pi.width,height:Ti+pi.height,color:be.backdropColor}}E.push({label:U,font:ae,textOffset:xe,options:{rotation:b,color:oi,strokeColor:Hi,strokeWidth:Ui,textAlign:fi,textBaseline:Le,translation:[z,ee],backdrop:ji}})}return E}_getXAxisLabelAlignment(){let{position:n,ticks:e}=this.options;if(-Cl(this.labelRotation))return n==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(n){let{position:e,ticks:{crossAlign:t,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=n+o,l=s.widest.width,c,d;return e==="left"?r?(d=this.right+o,t==="near"?c="left":t==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,t==="near"?c="right":t==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?r?(d=this.left+o,t==="near"?c="right":t==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,t==="near"?c="left":t==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let n=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:n.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:n.width}}drawBackground(){let{ctx:n,options:{backgroundColor:e},left:t,top:r,width:o,height:s}=this;e&&(n.save(),n.fillStyle=e,n.fillRect(t,r,o,s),n.restore())}getLineWidthForValue(n){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(o=>o.value===n);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(n){let e=this.options.grid,t=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n)),o,s,a=(l,c,d)=>{!d.width||!d.color||(t.save(),t.lineWidth=d.width,t.strokeStyle=d.color,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset,t.beginPath(),t.moveTo(l.x,l.y),t.lineTo(c.x,c.y),t.stroke(),t.restore())};if(e.display)for(o=0,s=r.length;o<s;++o){let l=r[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:n,ctx:e,options:{border:t,grid:r}}=this,o=t.setContext(this.getContext()),s=t.display?o.width:0;if(!s)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,h,_;this.isHorizontal()?(c=_u(n,this.left,s)-s/2,d=_u(n,this.right,a)+a/2,h=_=l):(h=_u(n,this.top,s)-s/2,_=_u(n,this.bottom,a)+a/2,c=d=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,h),e.lineTo(d,_),e.stroke(),e.restore()}drawLabels(n){if(!this.options.ticks.display)return;let t=this.ctx,r=this._computeLabelArea();r&&mC(t,r);let o=this.getLabelItems(n);for(let s of o){let a=s.options,l=s.font,c=s.label,d=s.textOffset;Cu(t,c,0,d,l,a)}r&&gC(t)}drawTitle(){let{ctx:n,options:{position:e,title:t,reverse:r}}=this;if(!t.display)return;let o=vo(t.font),s=Cs(t.padding),a=t.align,l=o.lineHeight/2;e==="bottom"||e==="center"||gn(e)?(l+=s.bottom,Sr(t.text)&&(l+=o.lineHeight*(t.text.length-1))):l+=s.top;let{titleX:c,titleY:d,maxWidth:h,rotation:_}=RPe(this,l,e,a);Cu(n,t.text,0,0,o,{color:t.color,maxWidth:h,rotation:_,textAlign:OPe(a,e,r),textBaseline:"middle",translation:[c,d]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){let n=this.options,e=n.ticks&&n.ticks.z||0,t=Ni(n.grid&&n.grid.z,-1),r=Ni(n.border&&n.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:t,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(n){let e=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",r=[],o,s;for(o=0,s=e.length;o<s;++o){let a=e[o];a[t]===this.id&&(!n||a.type===n)&&r.push(a)}return r}_resolveTickFontOptions(n){let e=this.options.ticks.setContext(this.getContext(n));return vo(e.font)}_maxDigits(){let n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}},hg=class{constructor(n,e,t){this.type=n,this.scope=e,this.override=t,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){let e=Object.getPrototypeOf(n),t;FPe(e)&&(t=this.register(e));let r=this.items,o=n.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+n);return o in r||(r[o]=n,PPe(n,s,t),this.override&&Pr.override(n.id,n.overrides)),s}get(n){return this.items[n]}unregister(n){let e=this.items,t=n.id,r=this.scope;t in e&&delete e[t],r&&t in Pr[r]&&(delete Pr[r][t],this.override&&delete gu[t])}};function PPe(i,n,e){let t=ng(Object.create(null),[e?Pr.get(e):{},Pr.get(n),i.defaults]);Pr.set(n,t),i.defaultRoutes&&DPe(n,i.defaultRoutes),i.descriptors&&Pr.describe(n,i.descriptors)}function DPe(i,n){Object.keys(n).forEach(e=>{let t=e.split("."),r=t.pop(),o=[i].concat(t).join("."),s=n[e].split("."),a=s.pop(),l=s.join(".");Pr.route(o,r,l,a)})}function FPe(i){return"id"in i&&"defaults"in i}var iF=class{constructor(){this.controllers=new hg(vu,"datasets",!0),this.elements=new hg(zl,"elements"),this.plugins=new hg(Object,"plugins"),this.scales=new hg(jh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,e,t){[...e].forEach(r=>{let o=t||this._getRegistryForType(r);t||o.isForType(r)||o===this.plugins&&r.id?this._exec(n,o,r):Gn(r,s=>{let a=t||this._getRegistryForType(s);this._exec(n,a,s)})})}_exec(n,e,t){let r=K1(n);dr(t["before"+r],[],t),e[n](t),dr(t["after"+r],[],t)}_getRegistryForType(n){for(let e=0;e<this._typedRegistries.length;e++){let t=this._typedRegistries[e];if(t.isForType(n))return t}return this.plugins}_get(n,e,t){let r=e.get(n);if(r===void 0)throw new Error('"'+n+'" is not a registered '+t+".");return r}},Uc=new iF,nF=class{constructor(){this._init=[]}notify(n,e,t,r){e==="beforeInit"&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install"));let o=r?this._descriptors(n).filter(r):this._descriptors(n),s=this._notify(o,n,e,t);return e==="afterDestroy"&&(this._notify(o,n,"stop"),this._notify(this._init,n,"uninstall")),s}_notify(n,e,t,r){r=r||{};for(let o of n){let s=o.plugin,a=s[t],l=[e,r,o.options];if(dr(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){pn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),e}_createDescriptors(n,e){let t=n&&n.config,r=Ni(t.options&&t.options.plugins,{}),o=kPe(t);return r===!1&&!e?[]:LPe(n,o,r,e)}_notifyStateChanges(n){let e=this._oldCache||[],t=this._cache,r=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,t),n,"stop"),this._notify(r(t,e),n,"start")}};function kPe(i){let n={},e=[],t=Object.keys(Uc.plugins.items);for(let o=0;o<t.length;o++)e.push(Uc.getPlugin(t[o]));let r=i.plugins||[];for(let o=0;o<r.length;o++){let s=r[o];e.indexOf(s)===-1&&(e.push(s),n[s.id]=!0)}return{plugins:e,localIds:n}}function NPe(i,n){return!n&&i===!1?null:i===!0?{}:i}function LPe(i,{plugins:n,localIds:e},t,r){let o=[],s=i.getContext();for(let a of n){let l=a.id,c=NPe(t[l],r);c!==null&&o.push({plugin:a,options:MPe(i.config,{plugin:a,local:e[l]},c,s)})}return o}function MPe(i,{plugin:n,local:e},t,r){let o=i.pluginScopeKeys(n),s=i.getOptionScopes(t,o);return e&&n.defaults&&s.push(n.defaults),i.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rF(i,n){let e=Pr.datasets[i]||{};return((n.datasets||{})[i]||{}).indexAxis||n.indexAxis||e.indexAxis||"x"}function VPe(i,n){let e=i;return i==="_index_"?e=n:i==="_value_"&&(e=n==="x"?"y":"x"),e}function BPe(i,n){return i===n?"_index_":"_value_"}function IH(i){if(i==="x"||i==="y"||i==="r")return i}function UPe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function oF(i,...n){if(IH(i))return i;for(let e of n){let t=e.axis||UPe(e.position)||i.length>1&&IH(i[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function yH(i,n,e){if(e[n+"AxisID"]===i)return{axis:n}}function jPe(i,n){if(n.data&&n.data.datasets){let e=n.data.datasets.filter(t=>t.xAxisID===i||t.yAxisID===i);if(e.length)return yH(i,"x",e[0])||yH(i,"y",e[0])}return{}}function GPe(i,n){let e=gu[i.type]||{scales:{}},t=n.scales||{},r=rF(i.type,n),o=Object.create(null);return Object.keys(t).forEach(s=>{let a=t[s];if(!gn(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let l=oF(s,a,jPe(s,i),Pr.scales[a.type]),c=BPe(l,r),d=e.scales||{};o[s]=og(Object.create(null),[{axis:l},a,d[l],d[c]])}),i.data.datasets.forEach(s=>{let a=s.type||i.type,l=s.indexAxis||rF(a,n),d=(gu[a]||{}).scales||{};Object.keys(d).forEach(h=>{let _=VPe(h,l),C=s[_+"AxisID"]||_;o[C]=o[C]||Object.create(null),og(o[C],[{axis:_},t[C],d[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];og(a,[Pr.scales[a.type],Pr.scale])}),o}function aW(i){let n=i.options||(i.options={});n.plugins=Ni(n.plugins,{}),n.scales=GPe(i,n)}function lW(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function HPe(i){return i=i||{},i.data=lW(i.data),aW(i),i}var wH=new Map,cW=new Set;function oS(i,n){let e=wH.get(i);return e||(e=n(),wH.set(i,e),cW.add(e)),e}var wC=(i,n,e)=>{let t=$d(n,e);t!==void 0&&i.add(t)},sF=class{constructor(n){this._config=HPe(n),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=lW(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){let n=this._config;this.clearCache(),aW(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return oS(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,e){return oS(`${n}.transition.${e}`,()=>[[`datasets.${n}.transitions.${e}`,`transitions.${e}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,e){return oS(`${n}-${e}`,()=>[[`datasets.${n}.elements.${e}`,`datasets.${n}`,`elements.${e}`,""]])}pluginScopeKeys(n){let e=n.id,t=this.type;return oS(`${t}-plugin-${e}`,()=>[[`plugins.${e}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,e){let t=this._scopeCache,r=t.get(n);return(!r||e)&&(r=new Map,t.set(n,r)),r}getOptionScopes(n,e,t){let{options:r,type:o}=this,s=this._cachedScopes(n,t),a=s.get(e);if(a)return a;let l=new Set;e.forEach(d=>{n&&(l.add(n),d.forEach(h=>wC(l,n,h))),d.forEach(h=>wC(l,r,h)),d.forEach(h=>wC(l,gu[o]||{},h)),d.forEach(h=>wC(l,Pr,h)),d.forEach(h=>wC(l,Y1,h))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),cW.has(e)&&s.set(e,c),c}chartOptionScopes(){let{options:n,type:e}=this;return[n,gu[e]||{},Pr.datasets[e]||{},{type:e},Pr,Y1]}resolveNamedOptions(n,e,t,r=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=vH(this._resolverCache,n,r),l=s;if(zPe(s,e)){o.$shared=!1,t=zd(t)?t():t;let c=this.createResolver(n,t,a);l=Lh(s,t,c)}for(let c of e)o[c]=l[c];return o}createResolver(n,e,t=[""],r){let{resolver:o}=vH(this._resolverCache,n,t);return gn(e)?Lh(o,e,void 0,r):o}};function vH(i,n,e){let t=i.get(n);t||(t=new Map,i.set(n,t));let r=e.join(),o=t.get(r);return o||(o={resolver:Z1(n,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},t.set(r,o)),o}var WPe=i=>gn(i)&&Object.getOwnPropertyNames(i).some(n=>zd(i[n]));function zPe(i,n){let{isScriptable:e,isIndexable:t}=OD(i);for(let r of n){let o=e(r),s=t(r),a=(s||o)&&i[r];if(o&&(zd(a)||WPe(a))||s&&Sr(a))return!0}return!1}var KPe="4.5.0",$Pe=["top","bottom","left","right","chartArea"];function bH(i,n){return i==="top"||i==="bottom"||$Pe.indexOf(i)===-1&&n==="x"}function SH(i,n){return function(e,t){return e[i]===t[i]?e[n]-t[n]:e[i]-t[i]}}function EH(i){let n=i.chart,e=n.options.animation;n.notifyPlugins("afterRender"),dr(e&&e.onComplete,[i],n)}function JPe(i){let n=i.chart,e=n.options.animation;dr(e&&e.onProgress,[i],n)}function dW(i){return eS()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var dS={},AH=i=>{let n=dW(i);return Object.values(dS).filter(e=>e.canvas===n).pop()};function qPe(i,n,e){let t=Object.keys(i);for(let r of t){let o=+r;if(o>=n){let s=i[r];delete i[r],(e>0||o>n)&&(i[o+e]=s)}}}function YPe(i,n,e,t){return!e||i.type==="mouseout"?null:t?n:i}var _S=(()=>{class i{static defaults=Pr;static instances=dS;static overrides=gu;static registry=Uc;static version=KPe;static getChart=AH;static register(...e){Uc.add(...e),xH()}static unregister(...e){Uc.remove(...e),xH()}constructor(e,t){let r=this.config=new sF(t),o=dW(e),s=AH(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||_Pe(o)),this.platform.updateConfig(r);let l=this.platform.acquireContext(o,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,h=c&&c.width;if(this.id=EG(),this.ctx=l,this.canvas=c,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=LG(_=>this.update(_),a.resizeDelay||0),this._dataChanges=[],dS[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}qd.listen(this,"complete",EH),qd.listen(this,"progress",JPe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:o,_aspectRatio:s}=this;return pn(e)?t&&s?s:o?r/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Uc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():FD(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return AD(this.canvas,this.ctx),this}stop(){return qd.stop(this),this}resize(e,t){qd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let r=this.options,o=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,e,t,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,FD(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),dr(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};Gn(t,(r,o)=>{r.id=o})}buildOrUpdateScales(){let e=this.options,t=e.scales,r=this.scales,o=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),s=[];t&&(s=s.concat(Object.keys(t).map(a=>{let l=t[a],c=oF(a,l),d=c==="r",h=c==="x";return{options:l,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),Gn(s,a=>{let l=a.options,c=l.id,d=oF(c,l),h=Ni(l.type,a.dtype);(l.position===void 0||bH(l.position,d)!==bH(a.dposition))&&(l.position=a.dposition),o[c]=!0;let _=null;if(c in r&&r[c].type===h)_=r[c];else{let C=Uc.getScale(h);_=new C({id:c,type:h,ctx:this.ctx,chart:this}),r[_.id]=_}_.init(l,e)}),Gn(o,(a,l)=>{a||delete r[l]}),Gn(r,a=>{Ps.configure(this,a,a.options),Ps.addBox(this,a)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((o,s)=>o.index-s.index),r>t){for(let o=t;o<r;++o)this._destroyDatasetMeta(o);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(SH("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,o)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,r,o;for(this._removeUnreferencedMetasets(),r=0,o=t.length;r<o;r++){let s=t[r],a=this.getDatasetMeta(r),l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||rF(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=Uc.getController(l),{datasetElementType:d,dataElementType:h}=Pr.datasets[l];Object.assign(c,{dataElementType:Uc.getElement(h),datasetElementType:d&&Uc.getElement(d)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Gn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:_}=this.getDatasetMeta(d),C=!o&&s.indexOf(_)===-1;_.buildOrUpdateElements(C),a=Math.max(+_.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),o||Gn(s,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(SH("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Gn(this.scales,e=>{Ps.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!hD(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:r,start:o,count:s}of t){let a=r==="_removeElements"?-s:s;qPe(e,o,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,r=s=>new Set(e.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),o=r(0);for(let s=1;s<t;s++)if(!hD(o,r(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ps.update(this,this.width,this.height,e);let t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Gn(this.boxes,o=>{r&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,zd(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let r=this.getDatasetMeta(e),o={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(r.controller._update(t),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qd.has(this)?this.attached&&!qd.running(this)&&qd.start(this):(this.draw(),EH({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,r=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,r={meta:e,index:e.index,cancelable:!0},o=BD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(o&&mC(t,o),e.controller.draw(),o&&gC(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Lc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,o){let s=QRe.modes[t];return typeof s=="function"?s(this,e,r,o):[]}getDatasetMeta(e){let t=this.data.datasets[e],r=this._metasets,o=r.filter(s=>s&&s._dataset===t).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(o)),o}getContext(){return this.$context||(this.$context=Jd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){let r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){let o=r?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,o);sg(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===e?o:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),qd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),AD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete dS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,r=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},o=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};Gn(this.options.events,s=>r(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,r=(c,d)=>{t.addEventListener(this,c,d),e[c]=d},o=(c,d)=>{e[c]&&(t.removeEventListener(this,c,d),delete e[c])},s=(c,d)=>{this.canvas&&this.resize(c,d)},a,l=()=>{o("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),r("attach",l)},t.isAttached(this.canvas)?l():a()}unbindEvents(){Gn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Gn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){let o=r?"set":"remove",s,a,l,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],r=e.map(({datasetIndex:s,index:a})=>{let l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!hC(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){let o=this.options.hover,s=(c,d)=>c.filter(h=>!d.some(_=>h.datasetIndex===_.datasetIndex&&h.index===_.index)),a=s(t,e),l=r?e:s(e,t);a.length&&this.updateHoverStyle(a,o.mode,!1),l.length&&o.mode&&this.updateHoverStyle(l,o.mode,!0)}_eventHandler(e,t){let r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},o=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,o)===!1)return;let s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,o),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){let{_active:o=[],options:s}=this,a=t,l=this._getActiveElements(e,o,r,a),c=TG(e),d=YPe(e,this._lastEvent,r,c);r&&(this._lastEvent=null,dr(s.onHover,[e,l,this],this),c&&dr(s.onClick,[e,l,this],this));let h=!hC(l,o);return(h||t)&&(this._active=l,this._updateHoverStyles(l,o,t)),this._lastEvent=d,h}_getActiveElements(e,t,r,o){if(e.type==="mouseout")return[];if(!r)return t;let s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,o)}}return i})();function xH(){return Gn(_S.instances,i=>i._plugins.invalidate())}function XPe(i,n,e){let{startAngle:t,x:r,y:o,outerRadius:s,innerRadius:a,options:l}=n,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/s,gs(t-e));if(i.beginPath(),i.arc(r,o,s-c/2,t+h/2,e-h/2),a>0){let _=Math.min(c/a,gs(t-e));i.arc(r,o,a+c/2,e-_/2,t+_/2,!0)}else{let _=Math.min(c/2,s*gs(t-e));if(d==="round")i.arc(r,o,_,e-Rn/2,t+Rn/2,!0);else if(d==="bevel"){let C=2*_*_,I=-C*Math.cos(e+Rn/2)+r,b=-C*Math.sin(e+Rn/2)+o,E=C*Math.cos(t+Rn/2)+r,R=C*Math.sin(t+Rn/2)+o;i.lineTo(I,b),i.lineTo(E,R)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function QPe(i,n,e){let{startAngle:t,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=n,c=r/a;i.beginPath(),i.arc(o,s,a,t-c,e+c),l>r?(c=r/l,i.arc(o,s,l,e+c,t-c,!0)):i.arc(o,s,r,e+no,t-no),i.closePath(),i.clip()}function ZPe(i){return Q1(i,["outerStart","outerEnd","innerStart","innerEnd"])}function eDe(i,n,e,t){let r=ZPe(i.options.borderRadius),o=(e-n)/2,s=Math.min(o,t*n/2),a=l=>{let c=(e-Math.min(o,l))*t/2;return ko(l,0,Math.min(o,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ko(r.innerStart,0,s),innerEnd:ko(r.innerEnd,0,s)}}function ug(i,n,e,t){return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function fS(i,n,e,t,r,o){let{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=n,h=Math.max(n.outerRadius+t+e-c,0),_=d>0?d+t+e+c:0,C=0,I=r-l;if(t){let be=d>0?d-t:0,$e=h>0?h-t:0,oi=(be+$e)/2,Hi=oi!==0?I*oi/(oi+t):I;C=(I-Hi)/2}let b=Math.max(.001,I*h-e/Rn)/h,E=(I-b)/2,R=l+E+C,T=r-E-C,{outerStart:A,outerEnd:U,innerStart:z,innerEnd:ee}=eDe(n,_,h,T-R),re=h-A,Z=h-U,ae=R+A/re,Ie=T-U/Z,ye=_+z,xe=_+ee,Le=R+z/ye,gi=T-ee/xe;if(i.beginPath(),o){let be=(ae+Ie)/2;if(i.arc(s,a,h,ae,be),i.arc(s,a,h,be,Ie),U>0){let Ui=ug(Z,Ie,s,a);i.arc(Ui.x,Ui.y,U,Ie,T+no)}let $e=ug(xe,T,s,a);if(i.lineTo($e.x,$e.y),ee>0){let Ui=ug(xe,gi,s,a);i.arc(Ui.x,Ui.y,ee,T+no,gi+Math.PI)}let oi=(T-ee/_+(R+z/_))/2;if(i.arc(s,a,_,T-ee/_,oi,!0),i.arc(s,a,_,oi,R+z/_,!0),z>0){let Ui=ug(ye,Le,s,a);i.arc(Ui.x,Ui.y,z,Le+Math.PI,R-no)}let Hi=ug(re,R,s,a);if(i.lineTo(Hi.x,Hi.y),A>0){let Ui=ug(re,ae,s,a);i.arc(Ui.x,Ui.y,A,R-no,ae)}}else{i.moveTo(s,a);let be=Math.cos(ae)*h+s,$e=Math.sin(ae)*h+a;i.lineTo(be,$e);let oi=Math.cos(Ie)*h+s,Hi=Math.sin(Ie)*h+a;i.lineTo(oi,Hi)}i.closePath()}function tDe(i,n,e,t,r){let{fullCircles:o,startAngle:s,circumference:a}=n,l=n.endAngle;if(o){fS(i,n,e,t,l,r);for(let c=0;c<o;++c)i.fill();isNaN(a)||(l=s+(a%Er||Er))}return fS(i,n,e,t,l,r),i.fill(),l}function iDe(i,n,e,t,r){let{fullCircles:o,startAngle:s,circumference:a,options:l}=n,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:_,borderRadius:C}=l,I=l.borderAlign==="inner";if(!c)return;i.setLineDash(h||[]),i.lineDashOffset=_,I?(i.lineWidth=c*2,i.lineJoin=d||"round"):(i.lineWidth=c,i.lineJoin=d||"bevel");let b=n.endAngle;if(o){fS(i,n,e,t,b,r);for(let E=0;E<o;++E)i.stroke();isNaN(a)||(b=s+(a%Er||Er))}I&&QPe(i,n,b),l.selfJoin&&b-s>=Rn&&C===0&&d!=="miter"&&XPe(i,n,b),o||(fS(i,n,e,t,b,r),i.stroke())}var aF=class extends zl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,e,t){let r=this.getProps(["x","y"],t),{angle:o,distance:s}=_D(r,{x:n,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),_=(this.options.spacing+this.options.borderWidth)/2,C=Ni(h,l-a),I=lg(o,a,l)&&a!==l,b=C>=Er||I,E=Vc(s,c+_,d+_);return b&&E}getCenterPoint(n){let{x:e,y:t,startAngle:r,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:l,spacing:c}=this.options,d=(r+o)/2,h=(s+a+c+l)/2;return{x:e+Math.cos(d)*h,y:t+Math.sin(d)*h}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){let{options:e,circumference:t}=this,r=(e.offset||0)/4,o=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=t>Er?Math.floor(t/Er):0,t===0||this.innerRadius<0||this.outerRadius<0)return;n.save();let a=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Rn,t||0)),c=r*l;n.fillStyle=e.backgroundColor,n.strokeStyle=e.borderColor,tDe(n,this,c,o,s),iDe(n,this,c,o,s),n.restore()}};function pW(i,n,e=n){i.lineCap=Ni(e.borderCapStyle,n.borderCapStyle),i.setLineDash(Ni(e.borderDash,n.borderDash)),i.lineDashOffset=Ni(e.borderDashOffset,n.borderDashOffset),i.lineJoin=Ni(e.borderJoinStyle,n.borderJoinStyle),i.lineWidth=Ni(e.borderWidth,n.borderWidth),i.strokeStyle=Ni(e.borderColor,n.borderColor)}function nDe(i,n,e){i.lineTo(e.x,e.y)}function rDe(i){return i.stepped?UG:i.tension||i.cubicInterpolationMode==="monotone"?jG:nDe}function uW(i,n,e={}){let t=i.length,{start:r=0,end:o=t-1}=e,{start:s,end:a}=n,l=Math.max(r,s),c=Math.min(o,a),d=r<s&&o<s||r>a&&o>a;return{count:t,start:l,loop:n.loop,ilen:c<l&&!d?t+c-l:c-l}}function oDe(i,n,e,t){let{points:r,options:o}=n,{count:s,start:a,loop:l,ilen:c}=uW(r,e,t),d=rDe(o),{move:h=!0,reverse:_}=t||{},C,I,b;for(C=0;C<=c;++C)I=r[(a+(_?c-C:C))%s],!I.skip&&(h?(i.moveTo(I.x,I.y),h=!1):d(i,b,I,_,o.stepped),b=I);return l&&(I=r[(a+(_?c:0))%s],d(i,b,I,_,o.stepped)),!!l}function sDe(i,n,e,t){let r=n.points,{count:o,start:s,ilen:a}=uW(r,e,t),{move:l=!0,reverse:c}=t||{},d=0,h=0,_,C,I,b,E,R,T=U=>(s+(c?a-U:U))%o,A=()=>{b!==E&&(i.lineTo(d,E),i.lineTo(d,b),i.lineTo(d,R))};for(l&&(C=r[T(0)],i.moveTo(C.x,C.y)),_=0;_<=a;++_){if(C=r[T(_)],C.skip)continue;let U=C.x,z=C.y,ee=U|0;ee===I?(z<b?b=z:z>E&&(E=z),d=(h*d+U)/++h):(A(),i.lineTo(U,z),I=ee,h=0,b=E=z),R=z}A()}function lF(i){let n=i.options,e=n.borderDash&&n.borderDash.length;return!i._decimated&&!i._loop&&!n.tension&&n.cubicInterpolationMode!=="monotone"&&!n.stepped&&!e?sDe:oDe}function aDe(i){return i.stepped?YG:i.tension||i.cubicInterpolationMode==="monotone"?XG:mu}function lDe(i,n,e,t){let r=n._path;r||(r=n._path=new Path2D,n.path(r,e,t)&&r.closePath()),pW(i,n.options),i.stroke(r)}function cDe(i,n,e,t){let{segments:r,options:o}=n,s=lF(n);for(let a of r)pW(i,o,a.style),i.beginPath(),s(i,n,a,{start:e,end:e+t-1})&&i.closePath(),i.stroke()}var dDe=typeof Path2D=="function";function pDe(i,n,e,t){dDe&&!n.options.segment?lDe(i,n,e,t):cDe(i,n,e,t)}var CS=(()=>{class i extends zl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let o=r.spanGaps?this._loop:this._fullLoop;$G(this._points,r,e,o,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZG(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){let r=this.options,o=e[t],s=this.points,a=VD(this,{property:t,start:o,end:o});if(!a.length)return;let l=[],c=aDe(r),d,h;for(d=0,h=a.length;d<h;++d){let{start:_,end:C}=a[d],I=s[_],b=s[C];if(I===b){l.push(I);continue}let E=Math.abs((o-I[t])/(b[t]-I[t])),R=c(I,b,E,r.stepped);R[t]=e[t],l.push(R)}return l.length===1?l[0]:l}pathSegment(e,t,r){return lF(this)(e,this,t,r)}path(e,t,r){let o=this.segments,s=lF(this),a=this._loop;t=t||0,r=r||this.points.length-t;for(let l of o)a&=s(e,this,l,{start:t,end:t+r-1});return!!a}draw(e,t,r,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),pDe(e,this,r,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function TH(i,n,e,t){let r=i.options,{[e]:o}=i.getProps([e],t);return Math.abs(n-o)<r.radius+r.hitRadius}var uDe=(()=>{class i extends zl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,t){return TH(this,e,"x",t)}inYRange(e,t){return TH(this,e,"y",t)}getCenterPoint(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);let r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){let r=this.options;this.skip||r.radius<.1||!Lc(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,X1(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function hW(i,n){let{x:e,y:t,base:r,width:o,height:s}=i.getProps(["x","y","base","width","height"],n),a,l,c,d,h;return i.horizontal?(h=s/2,a=Math.min(e,r),l=Math.max(e,r),c=t-h,d=t+h):(h=o/2,a=e-h,l=e+h,c=Math.min(t,r),d=Math.max(t,r)),{left:a,top:c,right:l,bottom:d}}function wu(i,n,e,t){return i?0:ko(n,e,t)}function hDe(i,n,e){let t=i.options.borderWidth,r=i.borderSkipped,o=TD(t);return{t:wu(r.top,o.top,0,e),r:wu(r.right,o.right,0,n),b:wu(r.bottom,o.bottom,0,e),l:wu(r.left,o.left,0,n)}}function fDe(i,n,e){let{enableBorderRadius:t}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,o=Iu(r),s=Math.min(n,e),a=i.borderSkipped,l=t||gn(r);return{topLeft:wu(!l||a.top||a.left,o.topLeft,0,s),topRight:wu(!l||a.top||a.right,o.topRight,0,s),bottomLeft:wu(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:wu(!l||a.bottom||a.right,o.bottomRight,0,s)}}function mDe(i){let n=hW(i),e=n.right-n.left,t=n.bottom-n.top,r=hDe(i,e/2,t/2),o=fDe(i,e/2,t/2);return{outer:{x:n.left,y:n.top,w:e,h:t,radius:o},inner:{x:n.left+r.l,y:n.top+r.t,w:e-r.l-r.r,h:t-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function $D(i,n,e,t){let r=n===null,o=e===null,a=i&&!(r&&o)&&hW(i,t);return a&&(r||Vc(n,a.left,a.right))&&(o||Vc(e,a.top,a.bottom))}function gDe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function _De(i,n){i.rect(n.x,n.y,n.w,n.h)}function JD(i,n,e={}){let t=i.x!==e.x?-n:0,r=i.y!==e.y?-n:0,o=(i.x+i.w!==e.x+e.w?n:0)-t,s=(i.y+i.h!==e.y+e.h?n:0)-r;return{x:i.x+t,y:i.y+r,w:i.w+o,h:i.h+s,radius:i.radius}}var cF=class extends zl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){let{inflateAmount:e,options:{borderColor:t,backgroundColor:r}}=this,{inner:o,outer:s}=mDe(this),a=gDe(s.radius)?dg:_De;n.save(),(s.w!==o.w||s.h!==o.h)&&(n.beginPath(),a(n,JD(s,e,o)),n.clip(),a(n,JD(o,-e,s)),n.fillStyle=t,n.fill("evenodd")),n.beginPath(),a(n,JD(o,e)),n.fillStyle=r,n.fill(),n.restore()}inRange(n,e,t){return $D(this,n,e,t)}inXRange(n,e){return $D(this,n,null,e)}inYRange(n,e){return $D(this,null,n,e)}getCenterPoint(n){let{x:e,y:t,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],n);return{x:o?(e+r)/2:e,y:o?t:(t+r)/2}}getRange(n){return n==="x"?this.width/2:this.height/2}},CDe=Object.freeze({__proto__:null,ArcElement:aF,BarElement:cF,LineElement:CS,PointElement:uDe}),dF=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],OH=dF.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function fW(i){return dF[i%dF.length]}function mW(i){return OH[i%OH.length]}function IDe(i,n){return i.borderColor=fW(n),i.backgroundColor=mW(n),++n}function yDe(i,n){return i.backgroundColor=i.data.map(()=>fW(n++)),n}function wDe(i,n){return i.backgroundColor=i.data.map(()=>mW(n++)),n}function vDe(i){let n=0;return(e,t)=>{let r=i.getDatasetMeta(t).controller;r instanceof CF?n=yDe(e,n):r instanceof iW?n=wDe(e,n):r&&(n=IDe(e,n))}}function RH(i){let n;for(n in i)if(i[n].borderColor||i[n].backgroundColor)return!0;return!1}function bDe(i){return i&&(i.borderColor||i.backgroundColor)}function SDe(){return Pr.borderColor!=="rgba(0,0,0,0.1)"||Pr.backgroundColor!=="rgba(0,0,0,0.1)"}var EDe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,n,e){if(!e.enabled)return;let{data:{datasets:t},options:r}=i.config,{elements:o}=r,s=RH(t)||bDe(r)||o&&RH(o)||SDe();if(!e.forceOverride&&s)return;let a=vDe(i);t.forEach(a)}};function ADe(i,n,e,t,r){let o=r.samples||t;if(o>=e)return i.slice(n,n+e);let s=[],a=(e-2)/(o-2),l=0,c=n+e-1,d=n,h,_,C,I,b;for(s[l++]=i[d],h=0;h<o-2;h++){let E=0,R=0,T,A=Math.floor((h+1)*a)+1+n,U=Math.min(Math.floor((h+2)*a)+1,e)+n,z=U-A;for(T=A;T<U;T++)E+=i[T].x,R+=i[T].y;E/=z,R/=z;let ee=Math.floor(h*a)+1+n,re=Math.min(Math.floor((h+1)*a)+1,e)+n,{x:Z,y:ae}=i[d];for(C=I=-1,T=ee;T<re;T++)I=.5*Math.abs((Z-E)*(i[T].y-ae)-(Z-i[T].x)*(R-ae)),I>C&&(C=I,_=i[T],b=T);s[l++]=_,d=b}return s[l++]=i[c],s}function xDe(i,n,e,t){let r=0,o=0,s,a,l,c,d,h,_,C,I,b,E=[],R=n+e-1,T=i[n].x,U=i[R].x-T;for(s=n;s<n+e;++s){a=i[s],l=(a.x-T)/U*t,c=a.y;let z=l|0;if(z===d)c<I?(I=c,h=s):c>b&&(b=c,_=s),r=(o*r+a.x)/++o;else{let ee=s-1;if(!pn(h)&&!pn(_)){let re=Math.min(h,_),Z=Math.max(h,_);re!==C&&re!==ee&&E.push(ke(oe({},i[re]),{x:r})),Z!==C&&Z!==ee&&E.push(ke(oe({},i[Z]),{x:r}))}s>0&&ee!==C&&E.push(i[ee]),E.push(a),d=z,o=0,I=b=c,h=_=C=s}}return E}function gW(i){if(i._decimated){let n=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:n})}}function PH(i){i.data.datasets.forEach(n=>{gW(n)})}function TDe(i,n){let e=n.length,t=0,r,{iScale:o}=i,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(t=ko(Nc(n,o.axis,s).lo,0,e-1)),c?r=ko(Nc(n,o.axis,a).hi+1,t,e)-t:r=e-t,{start:t,count:r}}var ODe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,n,e)=>{if(!e.enabled){PH(i);return}let t=i.width;i.data.datasets.forEach((r,o)=>{let{_data:s,indexAxis:a}=r,l=i.getDatasetMeta(o),c=s||r.data;if(pg([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=i.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||i.options.parsing)return;let{start:h,count:_}=TDe(l,c),C=e.threshold||4*t;if(_<=C){gW(r);return}pn(s)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let I;switch(e.algorithm){case"lttb":I=ADe(c,h,_,t,e);break;case"min-max":I=xDe(c,h,_,t);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=I})},destroy(i){PH(i)}};function RDe(i,n,e){let t=i.segments,r=i.points,o=n.points,s=[];for(let a of t){let{start:l,end:c}=a;c=IS(l,c,r);let d=pF(e,r[l],r[c],a.loop);if(!n.segments){s.push({source:a,target:d,start:r[l],end:r[c]});continue}let h=VD(n,d);for(let _ of h){let C=pF(e,o[_.start],o[_.end],_.loop),I=MD(a,r,C);for(let b of I)s.push({source:b,target:_,start:{[e]:DH(d,C,"start",Math.max)},end:{[e]:DH(d,C,"end",Math.min)}})}}return s}function pF(i,n,e,t){if(t)return;let r=n[i],o=e[i];return i==="angle"&&(r=gs(r),o=gs(o)),{property:i,start:r,end:o}}function PDe(i,n){let{x:e=null,y:t=null}=i||{},r=n.points,o=[];return n.segments.forEach(({start:s,end:a})=>{a=IS(s,a,r);let l=r[s],c=r[a];t!==null?(o.push({x:l.x,y:t}),o.push({x:c.x,y:t})):e!==null&&(o.push({x:e,y:l.y}),o.push({x:e,y:c.y}))}),o}function IS(i,n,e){for(;n>i;n--){let t=e[n];if(!isNaN(t.x)&&!isNaN(t.y))break}return n}function DH(i,n,e,t){return i&&n?t(i[e],n[e]):i?i[e]:n?n[e]:0}function _W(i,n){let e=[],t=!1;return Sr(i)?(t=!0,e=i):e=PDe(i,n),e.length?new CS({points:e,options:{tension:0},_loop:t,_fullLoop:t}):null}function FH(i){return i&&i.fill!==!1}function DDe(i,n,e){let r=i[n].fill,o=[n],s;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!zr(r))return r;if(s=i[r],!s)return!1;if(s.visible)return r;o.push(r),r=s.fill}return!1}function FDe(i,n,e){let t=MDe(i);if(gn(t))return isNaN(t.value)?!1:t;let r=parseFloat(t);return zr(r)&&Math.floor(r)===r?kDe(t[0],n,r,e):["origin","start","end","stack","shape"].indexOf(t)>=0&&t}function kDe(i,n,e,t){return(i==="-"||i==="+")&&(e=n+e),e===n||e<0||e>=t?!1:e}function NDe(i,n){let e=null;return i==="start"?e=n.bottom:i==="end"?e=n.top:gn(i)?e=n.getPixelForValue(i.value):n.getBasePixel&&(e=n.getBasePixel()),e}function LDe(i,n,e){let t;return i==="start"?t=e:i==="end"?t=n.options.reverse?n.min:n.max:gn(i)?t=i.value:t=n.getBaseValue(),t}function MDe(i){let n=i.options,e=n.fill,t=Ni(e&&e.target,e);return t===void 0&&(t=!!n.backgroundColor),t===!1||t===null?!1:t===!0?"origin":t}function VDe(i){let{scale:n,index:e,line:t}=i,r=[],o=t.segments,s=t.points,a=BDe(n,e);a.push(_W({x:null,y:n.bottom},t));for(let l=0;l<o.length;l++){let c=o[l];for(let d=c.start;d<=c.end;d++)UDe(r,s[d],a)}return new CS({points:r,options:{}})}function BDe(i,n){let e=[],t=i.getMatchingVisibleMetas("line");for(let r=0;r<t.length;r++){let o=t[r];if(o.index===n)break;o.hidden||e.unshift(o.dataset)}return e}function UDe(i,n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],{first:s,last:a,point:l}=jDe(o,n,"x");if(!(!l||s&&a)){if(s)t.unshift(l);else if(i.push(l),!a)break}}i.push(...t)}function jDe(i,n,e){let t=i.interpolate(n,e);if(!t)return{};let r=t[e],o=i.segments,s=i.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let d=o[c],h=s[d.start][e],_=s[d.end][e];if(Vc(r,h,_)){a=r===h,l=r===_;break}}return{first:a,last:l,point:t}}var mS=class{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,e,t){let{x:r,y:o,radius:s}=this;return e=e||{start:0,end:Er},n.arc(r,o,s,e.end,e.start,!0),!t.bounds}interpolate(n){let{x:e,y:t,radius:r}=this,o=n.angle;return{x:e+Math.cos(o)*r,y:t+Math.sin(o)*r,angle:o}}};function GDe(i){let{chart:n,fill:e,line:t}=i;if(zr(e))return HDe(n,e);if(e==="stack")return VDe(i);if(e==="shape")return!0;let r=WDe(i);return r instanceof mS?r:_W(r,t)}function HDe(i,n){let e=i.getDatasetMeta(n);return e&&i.isDatasetVisible(n)?e.dataset:null}function WDe(i){return(i.scale||{}).getPointPositionForValue?KDe(i):zDe(i)}function zDe(i){let{scale:n={},fill:e}=i,t=NDe(e,n);if(zr(t)){let r=n.isHorizontal();return{x:r?t:null,y:r?null:t}}return null}function KDe(i){let{scale:n,fill:e}=i,t=n.options,r=n.getLabels().length,o=t.reverse?n.max:n.min,s=LDe(e,n,o),a=[];if(t.grid.circular){let l=n.getPointPositionForValue(0,o);return new mS({x:l.x,y:l.y,radius:n.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)a.push(n.getPointPositionForValue(l,s));return a}function qD(i,n,e){let t=GDe(n),{chart:r,index:o,line:s,scale:a,axis:l}=n,c=s.options,d=c.fill,h=c.backgroundColor,{above:_=h,below:C=h}=d||{},I=r.getDatasetMeta(o),b=BD(r,I);t&&s.points.length&&(mC(i,e),$De(i,{line:s,target:t,above:_,below:C,area:e,scale:a,axis:l,clip:b}),gC(i))}function $De(i,n){let{line:e,target:t,above:r,below:o,area:s,scale:a,clip:l}=n,c=e._loop?"angle":n.axis;i.save();let d=o;o!==r&&(c==="x"?(kH(i,t,s.top),YD(i,{line:e,target:t,color:r,scale:a,property:c,clip:l}),i.restore(),i.save(),kH(i,t,s.bottom)):c==="y"&&(NH(i,t,s.left),YD(i,{line:e,target:t,color:o,scale:a,property:c,clip:l}),i.restore(),i.save(),NH(i,t,s.right),d=r)),YD(i,{line:e,target:t,color:d,scale:a,property:c,clip:l}),i.restore()}function kH(i,n,e){let{segments:t,points:r}=n,o=!0,s=!1;i.beginPath();for(let a of t){let{start:l,end:c}=a,d=r[l],h=r[IS(l,c,r)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(d.x,e),i.lineTo(d.x,d.y)),s=!!n.pathSegment(i,a,{move:s}),s?i.closePath():i.lineTo(h.x,e)}i.lineTo(n.first().x,e),i.closePath(),i.clip()}function NH(i,n,e){let{segments:t,points:r}=n,o=!0,s=!1;i.beginPath();for(let a of t){let{start:l,end:c}=a,d=r[l],h=r[IS(l,c,r)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(e,d.y),i.lineTo(d.x,d.y)),s=!!n.pathSegment(i,a,{move:s}),s?i.closePath():i.lineTo(e,h.y)}i.lineTo(e,n.first().y),i.closePath(),i.clip()}function YD(i,n){let{line:e,target:t,property:r,color:o,scale:s,clip:a}=n,l=RDe(e,t,r);for(let{source:c,target:d,start:h,end:_}of l){let{style:{backgroundColor:C=o}={}}=c,I=t!==!0;i.save(),i.fillStyle=C,JDe(i,s,a,I&&pF(r,h,_)),i.beginPath();let b=!!e.pathSegment(i,c),E;if(I){b?i.closePath():LH(i,t,_,r);let R=!!t.pathSegment(i,d,{move:b,reverse:!0});E=b&&R,E||LH(i,t,h,r)}i.closePath(),i.fill(E?"evenodd":"nonzero"),i.restore()}}function JDe(i,n,e,t){let r=n.chart.chartArea,{property:o,start:s,end:a}=t||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=s,c=r.top,d=a,h=r.bottom):(l=r.left,c=s,d=r.right,h=a),i.beginPath(),e&&(l=Math.max(l,e.left),d=Math.min(d,e.right),c=Math.max(c,e.top),h=Math.min(h,e.bottom)),i.rect(l,c,d-l,h-c),i.clip()}}function LH(i,n,e,t){let r=n.interpolate(e,t);r&&i.lineTo(r.x,r.y)}var qDe={id:"filler",afterDatasetsUpdate(i,n,e){let t=(i.data.datasets||[]).length,r=[],o,s,a,l;for(s=0;s<t;++s)o=i.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof CS&&(l={visible:i.isDatasetVisible(s),index:s,fill:FDe(a,s,t),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l);for(s=0;s<t;++s)l=r[s],!(!l||l.fill===!1)&&(l.fill=DDe(r,s,e.propagate))},beforeDraw(i,n,e){let t=e.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let s=r.length-1;s>=0;--s){let a=r[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),t&&a.fill&&qD(i.ctx,a,o))}},beforeDatasetsDraw(i,n,e){if(e.drawTime!=="beforeDatasetsDraw")return;let t=i.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r){let o=t[r].$filler;FH(o)&&qD(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,n,e){let t=n.meta.$filler;!FH(t)||e.drawTime!=="beforeDatasetDraw"||qD(i.ctx,t,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},MH=(i,n)=>{let{boxHeight:e=n,boxWidth:t=n}=i;return i.usePointStyle&&(e=Math.min(e,n),t=i.pointStyleWidth||Math.min(t,n)),{boxWidth:t,boxHeight:e,itemHeight:Math.max(n,e)}},YDe=(i,n)=>i!==null&&n!==null&&i.datasetIndex===n.datasetIndex&&i.index===n.index,gS=class extends zl{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,e,t){this.maxWidth=n,this.maxHeight=e,this._margins=t,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let n=this.options.labels||{},e=dr(n.generateLabels,[this.chart],this)||[];n.filter&&(e=e.filter(t=>n.filter(t,this.chart.data))),n.sort&&(e=e.sort((t,r)=>n.sort(t,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:n,ctx:e}=this;if(!n.display){this.width=this.height=0;return}let t=n.labels,r=vo(t.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=MH(t,o),c,d;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(s,o,a,l)+10):(d=this.maxHeight,c=this._fitCols(s,r,a,l)+10),this.width=Math.min(c,n.maxWidth||this.maxWidth),this.height=Math.min(d,n.maxHeight||this.maxHeight)}_fitRows(n,e,t,r){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=r+a,h=n;o.textAlign="left",o.textBaseline="middle";let _=-1,C=-d;return this.legendItems.forEach((I,b)=>{let E=t+e/2+o.measureText(I.text).width;(b===0||c[c.length-1]+E+2*a>s)&&(h+=d,c[c.length-(b>0?0:1)]=0,C+=d,_++),l[b]={left:0,top:C,row:_,width:E,height:r},c[c.length-1]+=E+a}),h}_fitCols(n,e,t,r){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=s-n,h=a,_=0,C=0,I=0,b=0;return this.legendItems.forEach((E,R)=>{let{itemWidth:T,itemHeight:A}=XDe(t,e,o,E,r);R>0&&C+A+2*a>d&&(h+=_+a,c.push({width:_,height:C}),I+=_+a,b++,_=C=0),l[R]={left:I,top:C,col:b,width:T,height:A},_=Math.max(_,T),C+=A+a}),h+=_,c.push({width:_,height:C}),h}adjustHitBoxes(){if(!this.options.display)return;let n=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:t,labels:{padding:r},rtl:o}}=this,s=Vh(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=_s(t,this.left+r,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=_s(t,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+n+r,c.left=s.leftForLtr(s.x(l),c.width),l+=c.width+r}else{let a=0,l=_s(t,this.top+n+r,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=_s(t,this.top+n+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=s.leftForLtr(s.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let n=this.ctx;mC(n,this),this._draw(),gC(n)}}_draw(){let{options:n,columnSizes:e,lineWidths:t,ctx:r}=this,{align:o,labels:s}=n,a=Pr.color,l=Vh(n.rtl,this.left,this.width),c=vo(s.font),{padding:d}=s,h=c.size,_=h/2,C;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:I,boxHeight:b,itemHeight:E}=MH(s,h),R=function(ee,re,Z){if(isNaN(I)||I<=0||isNaN(b)||b<0)return;r.save();let ae=Ni(Z.lineWidth,1);if(r.fillStyle=Ni(Z.fillStyle,a),r.lineCap=Ni(Z.lineCap,"butt"),r.lineDashOffset=Ni(Z.lineDashOffset,0),r.lineJoin=Ni(Z.lineJoin,"miter"),r.lineWidth=ae,r.strokeStyle=Ni(Z.strokeStyle,a),r.setLineDash(Ni(Z.lineDash,[])),s.usePointStyle){let Ie={radius:b*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:ae},ye=l.xPlus(ee,I/2),xe=re+_;xD(r,Ie,ye,xe,s.pointStyleWidth&&I)}else{let Ie=re+Math.max((h-b)/2,0),ye=l.leftForLtr(ee,I),xe=Iu(Z.borderRadius);r.beginPath(),Object.values(xe).some(Le=>Le!==0)?dg(r,{x:ye,y:Ie,w:I,h:b,radius:xe}):r.rect(ye,Ie,I,b),r.fill(),ae!==0&&r.stroke()}r.restore()},T=function(ee,re,Z){Cu(r,Z.text,ee,re+E/2,c,{strikethrough:Z.hidden,textAlign:l.textAlign(Z.textAlign)})},A=this.isHorizontal(),U=this._computeTitleHeight();A?C={x:_s(o,this.left+d,this.right-t[0]),y:this.top+d+U,line:0}:C={x:this.left+d,y:_s(o,this.top+U+d,this.bottom-e[0].height),line:0},ND(this.ctx,n.textDirection);let z=E+d;this.legendItems.forEach((ee,re)=>{r.strokeStyle=ee.fontColor,r.fillStyle=ee.fontColor;let Z=r.measureText(ee.text).width,ae=l.textAlign(ee.textAlign||(ee.textAlign=s.textAlign)),Ie=I+_+Z,ye=C.x,xe=C.y;l.setWidth(this.width),A?re>0&&ye+Ie+d>this.right&&(xe=C.y+=z,C.line++,ye=C.x=_s(o,this.left+d,this.right-t[C.line])):re>0&&xe+z>this.bottom&&(ye=C.x=ye+e[C.line].width+d,C.line++,xe=C.y=_s(o,this.top+U+d,this.bottom-e[C.line].height));let Le=l.x(ye);if(R(Le,xe,ee),ye=MG(ae,ye+I+_,A?ye+Ie:this.right,n.rtl),T(l.x(ye),xe,ee),A)C.x+=Ie+d;else if(typeof ee.text!="string"){let gi=c.lineHeight;C.y+=CW(ee,gi)+d}else C.y+=z}),LD(this.ctx,n.textDirection)}drawTitle(){let n=this.options,e=n.title,t=vo(e.font),r=Cs(e.padding);if(!e.display)return;let o=Vh(n.rtl,this.left,this.width),s=this.ctx,a=e.position,l=t.size/2,c=r.top+l,d,h=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),d=this.top+c,h=_s(n.align,h,this.right-_);else{let I=this.columnSizes.reduce((b,E)=>Math.max(b,E.height),0);d=c+_s(n.align,this.top,this.bottom-I-n.labels.padding-this._computeTitleHeight())}let C=_s(a,h,h+_);s.textAlign=o.textAlign(q1(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=t.string,Cu(s,e.text,C,d,t)}_computeTitleHeight(){let n=this.options.title,e=vo(n.font),t=Cs(n.padding);return n.display?e.lineHeight+t.height:0}_getLegendItemAt(n,e){let t,r,o;if(Vc(n,this.left,this.right)&&Vc(e,this.top,this.bottom)){for(o=this.legendHitBoxes,t=0;t<o.length;++t)if(r=o[t],Vc(n,r.left,r.left+r.width)&&Vc(e,r.top,r.top+r.height))return this.legendItems[t]}return null}handleEvent(n){let e=this.options;if(!eFe(n.type,e))return;let t=this._getLegendItemAt(n.x,n.y);if(n.type==="mousemove"||n.type==="mouseout"){let r=this._hoveredItem,o=YDe(r,t);r&&!o&&dr(e.onLeave,[n,r,this],this),this._hoveredItem=t,t&&!o&&dr(e.onHover,[n,t,this],this)}else t&&dr(e.onClick,[n,t,this],this)}};function XDe(i,n,e,t,r){let o=QDe(t,i,n,e),s=ZDe(r,t,n.lineHeight);return{itemWidth:o,itemHeight:s}}function QDe(i,n,e,t){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),n+e.size/2+t.measureText(r).width}function ZDe(i,n,e){let t=i;return typeof n.text!="string"&&(t=CW(n,e)),t}function CW(i,n){let e=i.text?i.text.length:0;return n*e}function eFe(i,n){return!!((i==="mousemove"||i==="mouseout")&&(n.onHover||n.onLeave)||n.onClick&&(i==="click"||i==="mouseup"))}var tFe={id:"legend",_element:gS,start(i,n,e){let t=i.legend=new gS({ctx:i.ctx,options:e,chart:i});Ps.configure(i,t,e),Ps.addBox(i,t)},stop(i){Ps.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,n,e){let t=i.legend;Ps.configure(i,t,e),t.options=e},afterUpdate(i){let n=i.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(i,n){n.replay||i.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,n,e){let t=n.datasetIndex,r=e.chart;r.isDatasetVisible(t)?(r.hide(t),n.hidden=!0):(r.show(t),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let n=i.data.datasets,{labels:{usePointStyle:e,pointStyle:t,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),d=Cs(c.borderWidth);return{text:n[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:t||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:s&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},EC=class extends zl{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,e){let t=this.options;if(this.left=0,this.top=0,!t.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=n,this.height=this.bottom=e;let r=Sr(t.text)?t.text.length:1;this._padding=Cs(t.padding);let o=r*vo(t.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let n=this.options.position;return n==="top"||n==="bottom"}_drawArgs(n){let{top:e,left:t,bottom:r,right:o,options:s}=this,a=s.align,l=0,c,d,h;return this.isHorizontal()?(d=_s(a,t,o),h=e+n,c=o-t):(s.position==="left"?(d=t+n,h=_s(a,r,e),l=Rn*-.5):(d=o-n,h=_s(a,e,r),l=Rn*.5),c=r-e),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){let n=this.ctx,e=this.options;if(!e.display)return;let t=vo(e.font),o=t.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Cu(n,e.text,0,0,t,{color:e.color,maxWidth:l,rotation:c,textAlign:q1(e.align),textBaseline:"middle",translation:[s,a]})}};function iFe(i,n){let e=new EC({ctx:i.ctx,options:n,chart:i});Ps.configure(i,e,n),Ps.addBox(i,e),i.titleBlock=e}var nFe={id:"title",_element:EC,start(i,n,e){iFe(i,e)},stop(i){let n=i.titleBlock;Ps.removeBox(i,n),delete i.titleBlock},beforeUpdate(i,n,e){let t=i.titleBlock;Ps.configure(i,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},sS=new WeakMap,rFe={id:"subtitle",start(i,n,e){let t=new EC({ctx:i.ctx,options:e,chart:i});Ps.configure(i,t,e),Ps.addBox(i,t),sS.set(i,t)},stop(i){Ps.removeBox(i,sS.get(i)),sS.delete(i)},beforeUpdate(i,n,e){let t=sS.get(i);Ps.configure(i,t,e),t.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},bC={average(i){if(!i.length)return!1;let n,e,t=new Set,r=0,o=0;for(n=0,e=i.length;n<e;++n){let a=i[n].element;if(a&&a.hasValue()){let l=a.tooltipPosition();t.add(l.x),r+=l.y,++o}}return o===0||t.size===0?!1:{x:[...t].reduce((a,l)=>a+l)/t.size,y:r/o}},nearest(i,n){if(!i.length)return!1;let e=n.x,t=n.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=i.length;o<s;++o){let l=i[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=W1(n,c);d<r&&(r=d,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,t=l.y}return{x:e,y:t}}};function Bc(i,n){return n&&(Sr(n)?Array.prototype.push.apply(i,n):i.push(n)),i}function Yd(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function oFe(i,n){let{element:e,datasetIndex:t,index:r}=n,o=i.getDatasetMeta(t).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:i,label:s,parsed:o.getParsed(r),raw:i.data.datasets[t].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:t,element:e}}function VH(i,n){let e=i.chart.ctx,{body:t,footer:r,title:o}=i,{boxWidth:s,boxHeight:a}=n,l=vo(n.bodyFont),c=vo(n.titleFont),d=vo(n.footerFont),h=o.length,_=r.length,C=t.length,I=Cs(n.padding),b=I.height,E=0,R=t.reduce((U,z)=>U+z.before.length+z.lines.length+z.after.length,0);if(R+=i.beforeBody.length+i.afterBody.length,h&&(b+=h*c.lineHeight+(h-1)*n.titleSpacing+n.titleMarginBottom),R){let U=n.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=C*U+(R-C)*l.lineHeight+(R-1)*n.bodySpacing}_&&(b+=n.footerMarginTop+_*d.lineHeight+(_-1)*n.footerSpacing);let T=0,A=function(U){E=Math.max(E,e.measureText(U).width+T)};return e.save(),e.font=c.string,Gn(i.title,A),e.font=l.string,Gn(i.beforeBody.concat(i.afterBody),A),T=n.displayColors?s+2+n.boxPadding:0,Gn(t,U=>{Gn(U.before,A),Gn(U.lines,A),Gn(U.after,A)}),T=0,e.font=d.string,Gn(i.footer,A),e.restore(),E+=I.width,{width:E,height:b}}function sFe(i,n){let{y:e,height:t}=n;return e<t/2?"top":e>i.height-t/2?"bottom":"center"}function aFe(i,n,e,t){let{x:r,width:o}=t,s=e.caretSize+e.caretPadding;if(i==="left"&&r+o+s>n.width||i==="right"&&r-o-s<0)return!0}function lFe(i,n,e,t){let{x:r,width:o}=e,{width:s,chartArea:{left:a,right:l}}=i,c="center";return t==="center"?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),aFe(c,i,n,e)&&(c="center"),c}function BH(i,n,e){let t=e.yAlign||n.yAlign||sFe(i,e);return{xAlign:e.xAlign||n.xAlign||lFe(i,n,e,t),yAlign:t}}function cFe(i,n){let{x:e,width:t}=i;return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function dFe(i,n,e){let{y:t,height:r}=i;return n==="top"?t+=e:n==="bottom"?t-=r+e:t-=r/2,t}function UH(i,n,e,t){let{caretSize:r,caretPadding:o,cornerRadius:s}=i,{xAlign:a,yAlign:l}=e,c=r+o,{topLeft:d,topRight:h,bottomLeft:_,bottomRight:C}=Iu(s),I=cFe(n,a),b=dFe(n,l,c);return l==="center"?a==="left"?I+=c:a==="right"&&(I-=c):a==="left"?I-=Math.max(d,_)+r:a==="right"&&(I+=Math.max(h,C)+r),{x:ko(I,0,t.width-n.width),y:ko(b,0,t.height-n.height)}}function aS(i,n,e){let t=Cs(e.padding);return n==="center"?i.x+i.width/2:n==="right"?i.x+i.width-t.right:i.x+t.left}function jH(i){return Bc([],Yd(i))}function pFe(i,n,e){return Jd(i,{tooltip:n,tooltipItems:e,type:"tooltip"})}function GH(i,n){let e=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return e?i.override(e):i}var IW={beforeTitle:Mc,title(i){if(i.length>0){let n=i[0],e=n.chart.data.labels,t=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return n.dataset.label||"";if(n.label)return n.label;if(t>0&&n.dataIndex<t)return e[n.dataIndex]}return""},afterTitle:Mc,beforeBody:Mc,beforeLabel:Mc,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let n=i.dataset.label||"";n&&(n+=": ");let e=i.formattedValue;return pn(e)||(n+=e),n},labelColor(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Mc,afterBody:Mc,beforeFooter:Mc,footer:Mc,afterFooter:Mc};function ha(i,n,e,t){let r=i[n].call(e,t);return typeof r>"u"?IW[n].call(e,t):r}var HH=(()=>{class i extends zl{static positioners=bC;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,r=this.options.setContext(this.getContext()),o=r.enabled&&t.options.animation&&r.animations,s=new pS(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=pFe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){let{callbacks:r}=t,o=ha(r,"beforeTitle",this,e),s=ha(r,"title",this,e),a=ha(r,"afterTitle",this,e),l=[];return l=Bc(l,Yd(o)),l=Bc(l,Yd(s)),l=Bc(l,Yd(a)),l}getBeforeBody(e,t){return jH(ha(t.callbacks,"beforeBody",this,e))}getBody(e,t){let{callbacks:r}=t,o=[];return Gn(e,s=>{let a={before:[],lines:[],after:[]},l=GH(r,s);Bc(a.before,Yd(ha(l,"beforeLabel",this,s))),Bc(a.lines,ha(l,"label",this,s)),Bc(a.after,Yd(ha(l,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(e,t){return jH(ha(t.callbacks,"afterBody",this,e))}getFooter(e,t){let{callbacks:r}=t,o=ha(r,"beforeFooter",this,e),s=ha(r,"footer",this,e),a=ha(r,"afterFooter",this,e),l=[];return l=Bc(l,Yd(o)),l=Bc(l,Yd(s)),l=Bc(l,Yd(a)),l}_createItems(e){let t=this._active,r=this.chart.data,o=[],s=[],a=[],l=[],c,d;for(c=0,d=t.length;c<d;++c)l.push(oFe(this.chart,t[c]));return e.filter&&(l=l.filter((h,_,C)=>e.filter(h,_,C,r))),e.itemSort&&(l=l.sort((h,_)=>e.itemSort(h,_,r))),Gn(l,h=>{let _=GH(e.callbacks,h);o.push(ha(_,"labelColor",this,h)),s.push(ha(_,"labelPointStyle",this,h)),a.push(ha(_,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){let r=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let l=bC[r.position].call(this,o,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=VH(this,r),d=Object.assign({},l,c),h=BH(this.chart,r,d),_=UH(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:_.x,y:_.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,o){let s=this.getCaretPosition(e,r,o);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:h,bottomRight:_}=Iu(l),{x:C,y:I}=e,{width:b,height:E}=t,R,T,A,U,z,ee;return s==="center"?(z=I+E/2,o==="left"?(R=C,T=R-a,U=z+a,ee=z-a):(R=C+b,T=R+a,U=z-a,ee=z+a),A=R):(o==="left"?T=C+Math.max(c,h)+a:o==="right"?T=C+b-Math.max(d,_)-a:T=this.caretX,s==="top"?(U=I,z=U-a,R=T-a,A=T+a):(U=I+E,z=U+a,R=T+a,A=T-a),ee=U),{x1:R,x2:T,x3:A,y1:U,y2:z,y3:ee}}drawTitle(e,t,r){let o=this.title,s=o.length,a,l,c;if(s){let d=Vh(r.rtl,this.x,this.width);for(e.x=aS(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",a=vo(r.titleFont),l=r.titleSpacing,t.fillStyle=r.titleColor,t.font=a.string,c=0;c<s;++c)t.fillText(o[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===s&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,t,r,o,s){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=s,h=vo(s.bodyFont),_=aS(this,"left",s),C=o.x(_),I=c<h.lineHeight?(h.lineHeight-c)/2:0,b=t.y+I;if(s.usePointStyle){let E={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},R=o.leftForLtr(C,d)+d/2,T=b+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,X1(e,E,R,T),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,X1(e,E,R,T)}else{e.lineWidth=gn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let E=o.leftForLtr(C,d),R=o.leftForLtr(o.xPlus(C,1),d-2),T=Iu(a.borderRadius);Object.values(T).some(A=>A!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,dg(e,{x:E,y:b,w:d,h:c,radius:T}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),dg(e,{x:R,y:b+1,w:d-2,h:c-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,b,d,c),e.strokeRect(E,b,d,c),e.fillStyle=a.backgroundColor,e.fillRect(R,b+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:h}=r,_=vo(r.bodyFont),C=_.lineHeight,I=0,b=Vh(r.rtl,this.x,this.width),E=function(ae){t.fillText(ae,b.x(e.x+I),e.y+C/2),e.y+=C+s},R=b.textAlign(a),T,A,U,z,ee,re,Z;for(t.textAlign=a,t.textBaseline="middle",t.font=_.string,e.x=aS(this,R,r),t.fillStyle=r.bodyColor,Gn(this.beforeBody,E),I=l&&R!=="right"?a==="center"?d/2+h:d+2+h:0,z=0,re=o.length;z<re;++z){for(T=o[z],A=this.labelTextColors[z],t.fillStyle=A,Gn(T.before,E),U=T.lines,l&&U.length&&(this._drawColorBox(t,e,z,b,r),C=Math.max(_.lineHeight,c)),ee=0,Z=U.length;ee<Z;++ee)E(U[ee]),C=_.lineHeight;Gn(T.after,E)}I=0,C=_.lineHeight,Gn(this.afterBody,E),e.y-=s}drawFooter(e,t,r){let o=this.footer,s=o.length,a,l;if(s){let c=Vh(r.rtl,this.x,this.width);for(e.x=aS(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",a=vo(r.footerFont),t.fillStyle=r.footerColor,t.font=a.string,l=0;l<s;++l)t.fillText(o[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,t,r,o){let{xAlign:s,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:h}=r,{topLeft:_,topRight:C,bottomLeft:I,bottomRight:b}=Iu(o.cornerRadius);t.fillStyle=o.backgroundColor,t.strokeStyle=o.borderColor,t.lineWidth=o.borderWidth,t.beginPath(),t.moveTo(l+_,c),a==="top"&&this.drawCaret(e,t,r,o),t.lineTo(l+d-C,c),t.quadraticCurveTo(l+d,c,l+d,c+C),a==="center"&&s==="right"&&this.drawCaret(e,t,r,o),t.lineTo(l+d,c+h-b),t.quadraticCurveTo(l+d,c+h,l+d-b,c+h),a==="bottom"&&this.drawCaret(e,t,r,o),t.lineTo(l+I,c+h),t.quadraticCurveTo(l,c+h,l,c+h-I),a==="center"&&s==="left"&&this.drawCaret(e,t,r,o),t.lineTo(l,c+_),t.quadraticCurveTo(l,c,l+_,c),t.closePath(),t.fill(),o.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,r=this.$animations,o=r&&r.x,s=r&&r.y;if(o||s){let a=bC[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=VH(this,e),c=Object.assign({},a,this._size),d=BH(t,e,c),h=UH(e,c,d,t);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(t);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Cs(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,o,t),ND(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),LD(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let r=this._active,o=e.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),s=!hC(r,o),a=this._positionChanged(o,t);(s||a)&&(this._active=o,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,r),l=this._positionChanged(a,e),c=t||!hC(a,s)||l;return c&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,o){let s=this.options;if(e.type==="mouseout")return[];if(!o)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(e,t){let{caretX:r,caretY:o,options:s}=this,a=bC[s.position].call(this,e,t);return a!==!1&&(r!==a.x||o!==a.y)}}return i})(),uFe={id:"tooltip",_element:HH,positioners:bC,afterInit(i,n,e){e&&(i.tooltip=new HH({chart:i,options:e}))},beforeUpdate(i,n,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,n,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let n=i.tooltip;if(n&&n._willRender()){let e={tooltip:n};if(i.notifyPlugins("beforeTooltipDraw",ke(oe({},e),{cancelable:!0}))===!1)return;n.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,n){if(i.tooltip){let e=n.replay;i.tooltip.handleEvent(n.event,e,n.inChartArea)&&(n.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,n)=>n.bodyFont.size,boxWidth:(i,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:IW},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hFe=Object.freeze({__proto__:null,Colors:EDe,Decimation:ODe,Filler:qDe,Legend:tFe,SubTitle:rFe,Title:nFe,Tooltip:uFe}),fFe=(i,n,e,t)=>(typeof n=="string"?(e=i.push(n)-1,t.unshift({index:e,label:n})):isNaN(n)&&(e=null),e);function mFe(i,n,e,t){let r=i.indexOf(n);if(r===-1)return fFe(i,n,e,t);let o=i.lastIndexOf(n);return r!==o?e:r}var gFe=(i,n)=>i===null?null:ko(Math.round(i),0,n);function WH(i){let n=this.getLabels();return i>=0&&i<n.length?n[i]:i}var _Fe=(()=>{class i extends jh{static id="category";static defaults={ticks:{callback:WH}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let r=this.getLabels();for(let{index:o,label:s}of t)r[o]===s&&r.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(pn(e))return null;let r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:mFe(r,e,Ni(t,e),this._addedLabels),gFe(t,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:r,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(o=this.getLabels().length-1)),this.min=r,this.max=o}buildTicks(){let e=this.min,t=this.max,r=this.options.offset,o=[],s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=t;a++)o.push({value:a});return o}getLabelForValue(e){return WH.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function CFe(i,n){let e=[],{bounds:r,step:o,min:s,max:a,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:_}=i,C=o||1,I=d-1,{min:b,max:E}=n,R=!pn(s),T=!pn(a),A=!pn(c),U=(E-b)/(h+1),z=fD((E-b)/I/C)*C,ee,re,Z,ae;if(z<1e-14&&!R&&!T)return[{value:b},{value:E}];ae=Math.ceil(E/z)-Math.floor(b/z),ae>I&&(z=fD(ae*z/I/C)*C),pn(l)||(ee=Math.pow(10,l),z=Math.ceil(z*ee)/ee),r==="ticks"?(re=Math.floor(b/z)*z,Z=Math.ceil(E/z)*z):(re=b,Z=E),R&&T&&o&&RG((a-s)/o,z/1e3)?(ae=Math.round(Math.min((a-s)/z,d)),z=(a-s)/ae,re=s,Z=a):A?(re=R?s:re,Z=T?a:Z,ae=c-1,z=(Z-re)/ae):(ae=(Z-re)/z,ag(ae,Math.round(ae),z/1e3)?ae=Math.round(ae):ae=Math.ceil(ae));let Ie=Math.max(gD(z),gD(re));ee=Math.pow(10,pn(l)?Ie:l),re=Math.round(re*ee)/ee,Z=Math.round(Z*ee)/ee;let ye=0;for(R&&(_&&re!==s?(e.push({value:s}),re<s&&ye++,ag(Math.round((re+ye*z)*ee)/ee,s,zH(s,U,i))&&ye++):re<s&&ye++);ye<ae;++ye){let xe=Math.round((re+ye*z)*ee)/ee;if(T&&xe>a)break;e.push({value:xe})}return T&&_&&Z!==a?e.length&&ag(e[e.length-1].value,a,zH(a,U,i))?e[e.length-1].value=a:e.push({value:a}):(!T||Z===a)&&e.push({value:Z}),e}function zH(i,n,{horizontal:e,minRotation:t}){let r=Cl(t),o=(e?Math.sin(r):Math.cos(r))||.001,s=.75*n*(""+i).length;return Math.min(n/o,s)}var fg=class extends jh{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,e){return pn(n)||(typeof n=="number"||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){let{beginAtZero:n}=this.options,{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:r,max:o}=this,s=l=>r=e?r:l,a=l=>o=t?o:l;if(n){let l=Wl(r),c=Wl(o);l<0&&c<0?a(0):l>0&&c>0&&s(0)}if(r===o){let l=o===0?1:Math.abs(o*.05);a(o+l),n||s(r-l)}this.min=r,this.max=o}getTickLimit(){let n=this.options.ticks,{maxTicksLimit:e,stepSize:t}=n,r;return t?(r=Math.ceil(this.max/t)-Math.floor(this.min/t)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${t} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let n=this.options,e=n.ticks,t=this.getTickLimit();t=Math.max(2,t);let r={maxTicks:t,bounds:n.bounds,min:n.min,max:n.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,s=CFe(r,o);return n.bounds==="ticks"&&mD(s,this,"value"),n.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let n=this.ticks,e=this.min,t=this.max;if(super.configure(),this.options.offset&&n.length){let r=(t-e)/Math.max(n.length-1,1)/2;e-=r,t+=r}this._startValue=e,this._endValue=t,this._valueRange=t-e}getLabelForValue(n){return cg(n,this.chart.options.locale,this.options.ticks.format)}},uF=class extends fg{static id="linear";static defaults={ticks:{callback:fC.formatters.numeric}};determineDataLimits(){let{min:n,max:e}=this.getMinMax(!0);this.min=zr(n)?n:0,this.max=zr(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let n=this.isHorizontal(),e=n?this.width:this.height,t=Cl(this.options.ticks.minRotation),r=(n?Math.sin(t):Math.cos(t))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(n){return n===null?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}},AC=i=>Math.floor(Kd(i)),Uh=(i,n)=>Math.pow(10,AC(i)+n);function KH(i){return i/Math.pow(10,AC(i))===1}function $H(i,n,e){let t=Math.pow(10,e),r=Math.floor(i/t);return Math.ceil(n/t)-r}function IFe(i,n){let e=n-i,t=AC(e);for(;$H(i,n,t)>10;)t++;for(;$H(i,n,t)<10;)t--;return Math.min(t,AC(i))}function yFe(i,{min:n,max:e}){n=ua(i.min,n);let t=[],r=AC(n),o=IFe(n,e),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=r>o?Math.pow(10,r):0,c=Math.round((n-l)*s)/s,d=Math.floor((n-l)/a/10)*a*10,h=Math.floor((c-d)/Math.pow(10,o)),_=ua(i.min,Math.round((l+d+h*Math.pow(10,o))*s)/s);for(;_<e;)t.push({value:_,major:KH(_),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),_=Math.round((l+d+h*Math.pow(10,o))*s)/s;let C=ua(i.max,_);return t.push({value:C,major:KH(C),significand:h}),t}var hF=class extends jh{static id="logarithmic";static defaults={ticks:{callback:fC.formatters.logarithmic,major:{enabled:!0}}};constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,e){let t=fg.prototype.parse.apply(this,[n,e]);if(t===0){this._zero=!0;return}return zr(t)&&t>0?t:null}determineDataLimits(){let{min:n,max:e}=this.getMinMax(!0);this.min=zr(n)?Math.max(0,n):null,this.max=zr(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zr(this._userMin)&&(this.min=n===Uh(this.min,0)?Uh(this.min,-1):Uh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:n,maxDefined:e}=this.getUserBounds(),t=this.min,r=this.max,o=a=>t=n?t:a,s=a=>r=e?r:a;t===r&&(t<=0?(o(1),s(10)):(o(Uh(t,-1)),s(Uh(r,1)))),t<=0&&o(Uh(r,-1)),r<=0&&s(Uh(t,1)),this.min=t,this.max=r}buildTicks(){let n=this.options,e={min:this._userMin,max:this._userMax},t=yFe(e,this);return n.bounds==="ticks"&&mD(t,this,"value"),n.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(n){return n===void 0?"0":cg(n,this.chart.options.locale,this.options.ticks.format)}configure(){let n=this.min;super.configure(),this._startValue=Kd(n),this._valueRange=Kd(this.max)-Kd(n)}getPixelForValue(n){return(n===void 0||n===0)&&(n=this.min),n===null||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(Kd(n)-this._startValue)/this._valueRange)}getValueForPixel(n){let e=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+e*this._valueRange)}};function fF(i){let n=i.ticks;if(n.display&&i.display){let e=Cs(n.backdropPadding);return Ni(n.font&&n.font.size,Pr.font.size)+e.height}return 0}function wFe(i,n,e){return e=Sr(e)?e:[e],{w:BG(i,n.string,e),h:e.length*n.lineHeight}}function JH(i,n,e,t,r){return i===t||i===r?{start:n-e/2,end:n+e/2}:i<t||i>r?{start:n-e,end:n}:{start:n,end:n+e}}function vFe(i){let n={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},n),t=[],r=[],o=i._pointLabels.length,s=i.options.pointLabels,a=s.centerPointLabels?Rn/o:0;for(let l=0;l<o;l++){let c=s.setContext(i.getPointLabelContext(l));r[l]=c.padding;let d=i.getPointPosition(l,i.drawingArea+r[l],a),h=vo(c.font),_=wFe(i.ctx,h,i._pointLabels[l]);t[l]=_;let C=gs(i.getIndexAngle(l)+a),I=Math.round($1(C)),b=JH(I,d.x,_.w,0,180),E=JH(I,d.y,_.h,90,270);bFe(e,n,C,b,E)}i.setCenterPoint(n.l-e.l,e.r-n.r,n.t-e.t,e.b-n.b),i._pointLabelItems=AFe(i,t,r)}function bFe(i,n,e,t,r){let o=Math.abs(Math.sin(e)),s=Math.abs(Math.cos(e)),a=0,l=0;t.start<n.l?(a=(n.l-t.start)/o,i.l=Math.min(i.l,n.l-a)):t.end>n.r&&(a=(t.end-n.r)/o,i.r=Math.max(i.r,n.r+a)),r.start<n.t?(l=(n.t-r.start)/s,i.t=Math.min(i.t,n.t-l)):r.end>n.b&&(l=(r.end-n.b)/s,i.b=Math.max(i.b,n.b+l))}function SFe(i,n,e){let t=i.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=e,l=i.getPointPosition(n,t+r+s,o),c=Math.round($1(gs(l.angle+no))),d=OFe(l.y,a.h,c),h=xFe(c),_=TFe(l.x,a.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:_,top:d,right:_+a.w,bottom:d+a.h}}function EFe(i,n){if(!n)return!0;let{left:e,top:t,right:r,bottom:o}=i;return!(Lc({x:e,y:t},n)||Lc({x:e,y:o},n)||Lc({x:r,y:t},n)||Lc({x:r,y:o},n))}function AFe(i,n,e){let t=[],r=i._pointLabels.length,o=i.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:fF(o)/2,additionalAngle:s?Rn/r:0},c;for(let d=0;d<r;d++){l.padding=e[d],l.size=n[d];let h=SFe(i,d,l);t.push(h),a==="auto"&&(h.visible=EFe(h,c),h.visible&&(c=h))}return t}function xFe(i){return i===0||i===180?"center":i<180?"left":"right"}function TFe(i,n,e){return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function OFe(i,n,e){return e===90||e===270?i-=n/2:(e>270||e<90)&&(i-=n),i}function RFe(i,n,e){let{left:t,top:r,right:o,bottom:s}=e,{backdropColor:a}=n;if(!pn(a)){let l=Iu(n.borderRadius),c=Cs(n.backdropPadding);i.fillStyle=a;let d=t-c.left,h=r-c.top,_=o-t+c.width,C=s-r+c.height;Object.values(l).some(I=>I!==0)?(i.beginPath(),dg(i,{x:d,y:h,w:_,h:C,radius:l}),i.fill()):i.fillRect(d,h,_,C)}}function PFe(i,n){let{ctx:e,options:{pointLabels:t}}=i;for(let r=n-1;r>=0;r--){let o=i._pointLabelItems[r];if(!o.visible)continue;let s=t.setContext(i.getPointLabelContext(r));RFe(e,s,o);let a=vo(s.font),{x:l,y:c,textAlign:d}=o;Cu(e,i._pointLabels[r],l,c+a.lineHeight/2,a,{color:s.color,textAlign:d,textBaseline:"middle"})}}function yW(i,n,e,t){let{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,n,0,Er);else{let o=i.getPointPosition(0,n);r.moveTo(o.x,o.y);for(let s=1;s<t;s++)o=i.getPointPosition(s,n),r.lineTo(o.x,o.y)}}function DFe(i,n,e,t,r){let o=i.ctx,s=n.circular,{color:a,lineWidth:l}=n;!s&&!t||!a||!l||e<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),yW(i,e,s,t),o.closePath(),o.stroke(),o.restore())}function FFe(i,n,e){return Jd(i,{label:e,index:n,type:"pointLabel"})}var mF=class extends fg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fC.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let n=this._padding=Cs(fF(this.options)/2),e=this.width=this.maxWidth-n.width,t=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+e/2+n.left),this.yCenter=Math.floor(this.top+t/2+n.top),this.drawingArea=Math.floor(Math.min(e,t)/2)}determineDataLimits(){let{min:n,max:e}=this.getMinMax(!1);this.min=zr(n)&&!isNaN(n)?n:0,this.max=zr(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fF(this.options))}generateTickLabels(n){fg.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((e,t)=>{let r=dr(this.options.pointLabels.callback,[e,t],this);return r||r===0?r:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){let n=this.options;n.display&&n.pointLabels.display?vFe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,e,t,r){this.xCenter+=Math.floor((n-e)/2),this.yCenter+=Math.floor((t-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,e,t,r))}getIndexAngle(n){let e=Er/(this._pointLabels.length||1),t=this.options.startAngle||0;return gs(n*e+Cl(t))}getDistanceFromCenterForValue(n){if(pn(n))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*e:(n-this.min)*e}getValueForDistanceFromCenter(n){if(pn(n))return NaN;let e=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(n){let e=this._pointLabels||[];if(n>=0&&n<e.length){let t=e[n];return FFe(this.getContext(),n,t)}}getPointPosition(n,e,t=0){let r=this.getIndexAngle(n)-no+t;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(n,e){return this.getPointPosition(n,this.getDistanceFromCenterForValue(e))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){let{left:e,top:t,right:r,bottom:o}=this._pointLabelItems[n];return{left:e,top:t,right:r,bottom:o}}drawBackground(){let{backgroundColor:n,grid:{circular:e}}=this.options;if(n){let t=this.ctx;t.save(),t.beginPath(),yW(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),t.closePath(),t.fillStyle=n,t.fill(),t.restore()}}drawGrid(){let n=this.ctx,e=this.options,{angleLines:t,grid:r,border:o}=e,s=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&PFe(this,s),r.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let _=this.getContext(h),C=r.setContext(_),I=o.setContext(_);DFe(this,C,l,s,I)}}),t.display){for(n.save(),a=s-1;a>=0;a--){let d=t.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:_}=d;!_||!h||(n.lineWidth=_,n.strokeStyle=h,n.setLineDash(d.borderDash),n.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(c.x,c.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){let n=this.ctx,e=this.options,t=e.ticks;if(!t.display)return;let r=this.getIndexAngle(0),o,s;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(r),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=t.setContext(this.getContext(l)),d=vo(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){n.font=d.string,s=n.measureText(a.label).width,n.fillStyle=c.backdropColor;let h=Cs(c.backdropPadding);n.fillRect(-s/2-h.left,-o-d.size/2-h.top,s+h.width,d.size+h.height)}Cu(n,a.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),n.restore()}drawTitle(){}},yS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fa=Object.keys(yS);function qH(i,n){return i-n}function YH(i,n){if(pn(n))return null;let e=i._adapter,{parser:t,round:r,isoWeekday:o}=i._parseOpts,s=n;return typeof t=="function"&&(s=t(s)),zr(s)||(s=typeof t=="string"?e.parse(s,t):e.parse(s)),s===null?null:(r&&(s=r==="week"&&(Mh(o)||o===!0)?e.startOf(s,"isoWeek",o):e.startOf(s,r)),+s)}function XH(i,n,e,t){let r=fa.length;for(let o=fa.indexOf(i);o<r-1;++o){let s=yS[fa[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((e-n)/(a*s.size))<=t)return fa[o]}return fa[r-1]}function kFe(i,n,e,t,r){for(let o=fa.length-1;o>=fa.indexOf(e);o--){let s=fa[o];if(yS[s].common&&i._adapter.diff(r,t,s)>=n-1)return s}return fa[e?fa.indexOf(e):0]}function NFe(i){for(let n=fa.indexOf(i)+1,e=fa.length;n<e;++n)if(yS[fa[n]].common)return fa[n]}function QH(i,n,e){if(!e)i[n]=!0;else if(e.length){let{lo:t,hi:r}=J1(e,n),o=e[t]>=n?e[t]:e[r];i[o]=!0}}function LFe(i,n,e,t){let r=i._adapter,o=+r.startOf(n[0].value,t),s=n[n.length-1].value,a,l;for(a=o;a<=s;a=+r.add(a,1,t))l=e[a],l>=0&&(n[l].major=!0);return n}function ZH(i,n,e){let t=[],r={},o=n.length,s,a;for(s=0;s<o;++s)a=n[s],r[a]=s,t.push({value:a,major:!1});return o===0||!e?t:LFe(i,t,r,e)}var gF=(()=>{class i extends jh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let r=e.time||(e.time={}),o=this._adapter=new $Re._date(e.adapters.date);o.init(t),og(r.displayFormats,o.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:YH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,r=e.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(o=Math.min(o,d.min)),!l&&!isNaN(d.max)&&(s=Math.max(s,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),o=zr(o)&&!isNaN(o)?o:+t.startOf(Date.now(),r),s=zr(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){let e=this.options,t=e.time,r=e.ticks,o=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,l=FG(o,s,a);return this._unit=t.unit||(r.autoSkip?XH(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):kFe(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:NFe(this._unit),this.initOffsets(o),e.reverse&&l.reverse(),ZH(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,o,s;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?t=1-o:t=(this.getDecimalForValue(e[1])-o)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;t=ko(t,0,a),r=ko(r,0,a),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){let e=this._adapter,t=this.min,r=this.max,o=this.options,s=o.time,a=s.unit||XH(s.minUnit,t,r,this._getLabelCapacity(t)),l=Ni(o.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,d=Mh(c)||c===!0,h={},_=t,C,I;if(d&&(_=+e.startOf(_,"isoWeek",c)),_=+e.startOf(_,d?"day":a),e.diff(r,t,a)>1e5*l)throw new Error(t+" and "+r+" are too far apart with stepSize of "+l+" "+a);let b=o.ticks.source==="data"&&this.getDataTimestamps();for(C=_,I=0;C<r;C=+e.add(C,l,a),I++)QH(h,C,b);return(C===r||o.bounds==="ticks"||I===1)&&QH(h,C,b),Object.keys(h).sort(qH).map(E=>+E)}getLabelForValue(e){let t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){let o=this.options.time.displayFormats,s=this._unit,a=t||o[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,o){let s=this.options,a=s.ticks.callback;if(a)return dr(a,[e,t,r],this);let l=s.time.displayFormats,c=this._unit,d=this._majorUnit,h=c&&l[c],_=d&&l[d],C=r[t],I=d&&_&&C&&C.major;return this._adapter.format(e,o||(I?_:h))}generateTickLabels(e){let t,r,o;for(t=0,r=e.length;t<r;++t)o=e[t],o.label=this._tickFormatFunction(o.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,r=this.ctx.measureText(e).width,o=Cl(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(o),a=Math.sin(o),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(e){let t=this.options.time,r=t.displayFormats,o=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,ZH(this,[e],this._majorUnit),o),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(t=0,r=o.length;t<r;++t)e=e.concat(o[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],t,r;if(e.length)return e;let o=this.getLabels();for(t=0,r=o.length;t<r;++t)e.push(YH(this,o[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ID(e.sort(qH))}}return i})();function lS(i,n,e){let t=0,r=i.length-1,o,s,a,l;e?(n>=i[t].pos&&n<=i[r].pos&&({lo:t,hi:r}=Nc(i,"pos",n)),{pos:o,time:a}=i[t],{pos:s,time:l}=i[r]):(n>=i[t].time&&n<=i[r].time&&({lo:t,hi:r}=Nc(i,"time",n)),{time:o,pos:a}=i[t],{time:s,pos:l}=i[r]);let c=s-o;return c?a+(l-a)*(n-o)/c:a}var _F=class extends gF{static id="timeseries";static defaults=gF.defaults;constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let n=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(n);this._minPos=lS(e,this.min),this._tableRange=lS(e,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){let{min:e,max:t}=this,r=[],o=[],s,a,l,c,d;for(s=0,a=n.length;s<a;++s)c=n[s],c>=e&&c<=t&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:t,pos:1}];for(s=0,a=r.length;s<a;++s)d=r[s+1],l=r[s-1],c=r[s],Math.round((d+l)/2)!==c&&o.push({time:c,pos:s/(a-1)});return o}_generate(){let n=this.min,e=this.max,t=super.getDataTimestamps();return(!t.includes(n)||!t.length)&&t.splice(0,0,n),(!t.includes(e)||t.length===1)&&t.push(e),t.sort((r,o)=>r-o)}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;let e=this.getDataTimestamps(),t=this.getLabelTimestamps();return e.length&&t.length?n=this.normalize(e.concat(t)):n=e.length?e:t,n=this._cache.all=n,n}getDecimalForValue(n){return(lS(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){let e=this._offsets,t=this.getDecimalForPixel(n)/e.factor-e.end;return lS(this._table,t*this._tableRange+this._minPos,!0)}},MFe=Object.freeze({__proto__:null,CategoryScale:_Fe,LinearScale:uF,LogarithmicScale:hF,RadialLinearScale:mF,TimeScale:gF,TimeSeriesScale:_F}),wW=[KRe,CDe,hFe,MFe];_S.register(...wW);var vW=_S;var VFe=(i,n)=>({position:"relative",width:i,height:n}),BFe=(i,n)=>({width:i,height:n}),wS=(()=>{class i{platformId;el;zone;type;plugins=[];width;height;responsive=!0;ariaLabel;ariaLabelledBy;get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}onDataSelect=new X;isBrowser=!1;initialized;_data;_options={};chart;constructor(e,t,r){this.platformId=e,this.el=t,this.zone=r}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){let t=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);t&&t[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:t[0],dataset:r})}}initChart(){if(bt(this.platformId)){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.zone.runOutsideAngular(()=>{this.chart=new vW(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})})}}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}static \u0275fac=function(t){return new(t||i)(S(ai),S(Ze),S(Lt))};static \u0275cmp=se({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:[2,"responsive","responsive",Y],ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},features:[tt],decls:2,vars:10,consts:[[3,"ngStyle"],["role","img",3,"click","ngStyle"]],template:function(t,r){t&1&&(m(0,"div",0)(1,"canvas",1),k("click",function(s){return r.onCanvasClick(s)}),g()()),t&2&&(f("ngStyle",Qe(4,VFe,r.responsive&&!r.width?null:r.width,r.responsive&&!r.height?null:r.height)),p(),f("ngStyle",Qe(7,BFe,r.responsive&&!r.width?null:r.width,r.responsive&&!r.height?null:r.height)),G("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy))},dependencies:[De],encapsulation:2,changeDetection:0})}return i})(),IF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it]})}return i})();var UFe=["*"];function jFe(i,n){i&1&&ue(0)}function GFe(i,n){if(i&1&&(m(0,"div",4),v(1,jFe,1,0,"ng-container",5),g()),i&2){let e=u();G("data-pc-section","start"),p(),f("ngTemplateOutlet",e.startTemplate)}}function HFe(i,n){i&1&&ue(0)}function WFe(i,n){if(i&1&&(m(0,"div",6),v(1,HFe,1,0,"ng-container",5),g()),i&2){let e=u();G("data-pc-section","center"),p(),f("ngTemplateOutlet",e.centerTemplate)}}function zFe(i,n){i&1&&ue(0)}function KFe(i,n){if(i&1&&(m(0,"div",7),v(1,zFe,1,0,"ng-container",5),g()),i&2){let e=u();G("data-pc-section","end"),p(),f("ngTemplateOutlet",e.endTemplate)}}var TC=(()=>{class i{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":case"left":this.startTemplate=e.template;break;case"end":case"right":this.endTemplate=e.template;break;case"center":this.centerTemplate=e.template;break}})}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275cmp=se({type:i,selectors:[["p-toolbar"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:UFe,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(t,r){t&1&&($i(),m(0,"div",0),hi(1),v(2,GFe,2,2,"div",1)(3,WFe,2,2,"div",2)(4,KFe,2,2,"div",3),g()),t&2&&(ce(r.styleClass),f("ngClass","p-toolbar p-component")("ngStyle",r.style),G("aria-labelledby",r.ariaLabelledBy)("data-pc-name","toolbar"),p(2),f("ngIf",r.startTemplate),p(),f("ngIf",r.centerTemplate),p(),f("ngIf",r.endTemplate))},dependencies:[je,rt,mt,De],styles:[`@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}
`],encapsulation:2,changeDetection:0})}return i})(),yF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,dt]})}return i})();var $Fe=["sublist"],JFe=(i,n)=>({"p-submenu-list":i,"p-tieredmenu-root-list":n}),EW=i=>({"p-menuitem-link":!0,"p-disabled":i}),qFe=()=>({exact:!1}),YFe=(i,n)=>({$implicit:i,hasSubmenu:n});function XFe(i,n){if(i&1&&P(0,"li",7),i&2){let e=u().$implicit,t=u();f("ngStyle",t.getItemProp(e,"style"))("ngClass",t.getSeparatorItemClass(e)),G("id",t.getItemId(e))("data-pc-section","separator")}}function QFe(i,n){if(i&1&&P(0,"span",18),i&2){let e=u(4).$implicit,t=u();f("ngClass",t.getItemProp(e,"icon"))("ngStyle",t.getItemProp(e,"iconStyle")),G("data-pc-section","icon")("tabindex",-1)}}function ZFe(i,n){if(i&1&&(m(0,"span",19),F(1),g()),i&2){let e=u(4).$implicit,t=u();G("data-pc-section","label"),p(),J(" ",t.getItemLabel(e)," ")}}function eke(i,n){if(i&1&&P(0,"span",20),i&2){let e=u(4).$implicit,t=u();f("innerHTML",t.getItemLabel(e),an),G("data-pc-section","label")}}function tke(i,n){if(i&1&&(m(0,"span",21),F(1),g()),i&2){let e=u(4).$implicit,t=u();f("ngClass",t.getItemProp(e,"badgeStyleClass")),p(),$(t.getItemProp(e,"badge"))}}function ike(i,n){i&1&&P(0,"AngleRightIcon",24),i&2&&(f("styleClass","p-submenu-icon"),G("data-pc-section","submenuicon")("aria-hidden",!0))}function nke(i,n){}function rke(i,n){i&1&&v(0,nke,0,0,"ng-template",25),i&2&&f("data-pc-section","submenuicon")("aria-hidden",!0)}function oke(i,n){if(i&1&&(he(0),v(1,ike,1,3,"AngleRightIcon",22)(2,rke,1,2,null,23),fe()),i&2){let e=u(5);p(),f("ngIf",!e.tieredMenu.submenuIconTemplate),p(),f("ngTemplateOutlet",e.tieredMenu.submenuIconTemplate)}}function ske(i,n){if(i&1&&(m(0,"a",14),v(1,QFe,1,4,"span",15)(2,ZFe,2,2,"span",16)(3,eke,1,2,"ng-template",null,2,Bt)(5,tke,2,2,"span",17)(6,oke,3,2,"ng-container",10),g()),i&2){let e=He(4),t=u(3).$implicit,r=u();f("target",r.getItemProp(t,"target"))("ngClass",ne(11,EW,r.getItemProp(t,"disabled"))),G("href",r.getItemProp(t,"url"),rs)("data-automationid",r.getItemProp(t,"automationId"))("data-pc-section","action")("tabindex",-1),p(),f("ngIf",r.getItemProp(t,"icon")),p(),f("ngIf",r.getItemProp(t,"escape"))("ngIfElse",e),p(3),f("ngIf",r.getItemProp(t,"badge")),p(),f("ngIf",r.isItemGroup(t))}}function ake(i,n){if(i&1&&P(0,"span",18),i&2){let e=u(4).$implicit,t=u();f("ngClass",t.getItemProp(e,"icon"))("ngStyle",t.getItemProp(e,"iconStyle")),G("data-pc-section","icon")("aria-hidden",!0)("tabindex",-1)}}function lke(i,n){if(i&1&&(m(0,"span",19),F(1),g()),i&2){let e=u(4).$implicit,t=u();G("data-pc-section","label"),p(),J(" ",t.getItemLabel(e)," ")}}function cke(i,n){if(i&1&&P(0,"span",20),i&2){let e=u(4).$implicit,t=u();f("innerHTML",t.getItemLabel(e),an),G("data-pc-section","label")}}function dke(i,n){if(i&1&&(m(0,"span",21),F(1),g()),i&2){let e=u(4).$implicit,t=u();f("ngClass",t.getItemProp(e,"badgeStyleClass")),p(),$(t.getItemProp(e,"badge"))}}function pke(i,n){i&1&&P(0,"AngleRightIcon",24),i&2&&(f("styleClass","p-submenu-icon"),G("data-pc-section","submenuicon")("aria-hidden",!0))}function uke(i,n){}function hke(i,n){i&1&&v(0,uke,0,0,"ng-template",25),i&2&&f("data-pc-section","submenuicon")("aria-hidden",!0)}function fke(i,n){if(i&1&&(he(0),v(1,pke,1,3,"AngleRightIcon",22)(2,hke,1,2,null,23),fe()),i&2){let e=u(5);p(),f("ngIf",!e.tieredMenu.submenuIconTemplate),p(),f("ngTemplateOutlet",e.tieredMenu.submenuIconTemplate)}}function mke(i,n){if(i&1&&(m(0,"a",26),v(1,ake,1,5,"span",15)(2,lke,2,2,"span",16)(3,cke,1,2,"ng-template",null,2,Bt)(5,dke,2,2,"span",17)(6,fke,3,2,"ng-container",10),g()),i&2){let e=He(4),t=u(3).$implicit,r=u();f("routerLink",r.getItemProp(t,"routerLink"))("queryParams",r.getItemProp(t,"queryParams"))("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",r.getItemProp(t,"routerLinkActiveOptions")||Ae(20,qFe))("target",r.getItemProp(t,"target"))("ngClass",ne(21,EW,r.getItemProp(t,"disabled")))("fragment",r.getItemProp(t,"fragment"))("queryParamsHandling",r.getItemProp(t,"queryParamsHandling"))("preserveFragment",r.getItemProp(t,"preserveFragment"))("skipLocationChange",r.getItemProp(t,"skipLocationChange"))("replaceUrl",r.getItemProp(t,"replaceUrl"))("state",r.getItemProp(t,"state")),G("data-automationid",r.getItemProp(t,"automationId"))("tabindex",-1)("data-pc-section","action"),p(),f("ngIf",r.getItemProp(t,"icon")),p(),f("ngIf",r.getItemProp(t,"escape"))("ngIfElse",e),p(3),f("ngIf",r.getItemProp(t,"badge")),p(),f("ngIf",r.isItemGroup(t))}}function gke(i,n){if(i&1&&(he(0),v(1,ske,7,13,"a",12)(2,mke,7,23,"a",13),fe()),i&2){let e=u(2).$implicit,t=u();p(),f("ngIf",!t.getItemProp(e,"routerLink")),p(),f("ngIf",t.getItemProp(e,"routerLink"))}}function _ke(i,n){}function Cke(i,n){i&1&&v(0,_ke,0,0,"ng-template")}function Ike(i,n){if(i&1&&(he(0),v(1,Cke,1,0,null,27),fe()),i&2){let e=u(2).$implicit,t=u();p(),f("ngTemplateOutlet",t.itemTemplate)("ngTemplateOutletContext",Qe(2,YFe,e.item,t.getItemProp(e,"items")))}}function yke(i,n){if(i&1){let e=L();m(0,"p-tieredMenuSub",28),k("itemClick",function(r){y(e);let o=u(3);return w(o.itemClick.emit(r))})("itemMouseEnter",function(r){y(e);let o=u(3);return w(o.onItemMouseEnter(r))}),g()}if(i&2){let e=u(2).$implicit,t=u();f("items",e.items)("itemTemplate",t.itemTemplate)("autoDisplay",t.autoDisplay)("menuId",t.menuId)("activeItemPath",t.activeItemPath())("focusedItemId",t.focusedItemId)("ariaLabelledBy",t.getItemId(e))("level",t.level+1)}}function wke(i,n){if(i&1){let e=L();m(0,"li",8,1)(2,"div",9),k("click",function(r){y(e);let o=u().$implicit,s=u();return w(s.onItemClick(r,o))})("mouseenter",function(r){y(e);let o=u().$implicit,s=u();return w(s.onItemMouseEnter({$event:r,processedItem:o}))}),v(3,gke,3,2,"ng-container",10)(4,Ike,2,5,"ng-container",10),g(),v(5,yke,1,8,"p-tieredMenuSub",11),g()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u();ce(o.getItemProp(t,"styleClass")),f("ngStyle",o.getItemProp(t,"style"))("ngClass",o.getItemClass(t))("pTooltip",o.getItemProp(t,"tooltip"))("tooltipOptions",o.getItemProp(t,"tooltipOptions")),G("id",o.getItemId(t))("data-pc-section","menuitem")("data-p-highlight",o.isItemActive(t))("data-p-focused",o.isItemFocused(t))("data-p-disabled",o.isItemDisabled(t))("aria-label",o.getItemLabel(t))("aria-disabled",o.isItemDisabled(t)||void 0)("aria-haspopup",o.isItemGroup(t)&&!o.getItemProp(t,"to")?"menu":void 0)("aria-expanded",o.isItemGroup(t)?o.isItemActive(t):void 0)("aria-setsize",o.getAriaSetSize())("aria-posinset",o.getAriaPosInset(r)),p(2),G("data-pc-section","content"),p(),f("ngIf",!o.itemTemplate),p(),f("ngIf",o.itemTemplate),p(),f("ngIf",o.isItemVisible(t)&&o.isItemGroup(t))}}function vke(i,n){if(i&1&&v(0,XFe,1,4,"li",5)(1,wke,6,21,"li",6),i&2){let e=n.$implicit,t=u();f("ngIf",t.isItemVisible(e)&&t.getItemProp(e,"separator")),p(),f("ngIf",t.isItemVisible(e)&&!t.getItemProp(e,"separator"))}}var bke=["rootmenu"],Ske=["container"],Eke=i=>({"p-tieredmenu p-component":!0,"p-tieredmenu-overlay":i}),Ake=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),xke=i=>({value:"visible",params:i});function Tke(i,n){if(i&1){let e=L();m(0,"div",3,0),k("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))})("@overlayAnimation.start",function(r){y(e);let o=u();return w(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){y(e);let o=u();return w(o.onOverlayAnimationEnd(r))}),m(2,"p-tieredMenuSub",4,1),k("itemClick",function(r){y(e);let o=u();return w(o.onItemClick(r))})("menuFocus",function(r){y(e);let o=u();return w(o.onMenuFocus(r))})("menuBlur",function(r){y(e);let o=u();return w(o.onMenuBlur(r))})("menuKeydown",function(r){y(e);let o=u();return w(o.onKeyDown(r))})("itemMouseEnter",function(r){y(e);let o=u();return w(o.onItemMouseEnter(r))}),g()()}if(i&2){let e=u();ce(e.styleClass),f("id",e.id)("ngClass",ne(22,Eke,e.popup))("ngStyle",e.style)("@overlayAnimation",ne(27,xke,Qe(24,Ake,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.popup!==!0),G("data-pc-section","root")("data-pc-name","tieredmenu"),p(2),f("root",!0)("items",e.processedItems)("itemTemplate",e.itemTemplate)("menuId",e.id)("tabindex",e.disabled?-1:e.tabindex)("ariaLabel",e.ariaLabel)("ariaLabelledBy",e.ariaLabelledBy)("baseZIndex",e.baseZIndex)("autoZIndex",e.autoZIndex)("autoDisplay",e.autoDisplay)("popup",e.popup)("focusedItemId",e.focused?e.focusedItemId:void 0)("activeItemPath",e.activeItemPath())}}var Oke=(()=>{class i{el;renderer;tieredMenu;items;itemTemplate;root=!1;autoDisplay;autoZIndex=!0;baseZIndex=0;popup;menuId;ariaLabel;ariaLabelledBy;level=0;focusedItemId;activeItemPath=vM([]);tabindex=0;itemClick=new X;itemMouseEnter=new X;menuFocus=new X;menuBlur=new X;menuKeydown=new X;sublistViewChild;constructor(e,t,r){this.el=e,this.renderer=t,this.tieredMenu=r,od(()=>{let o=this.activeItemPath();ge.isNotEmpty(o)&&this.positionSubmenu()})}positionSubmenu(){if(bt(this.tieredMenu.platformId)){let e=this.sublistViewChild&&this.sublistViewChild.nativeElement;if(e){let t=e.parentElement.parentElement,r=j.getOffset(t),o=j.getViewport(),s=e.offsetParent?e.offsetWidth:j.getOuterWidth(e),a=j.getOuterWidth(t.children[0]),l="p-submenu-list-flipped";parseInt(r.left,10)+a+s>o.width-j.calculateScrollbarWidth()?j.addClass(e,l):j.hasClass(e,l)&&j.removeClass(e,l)}}}getItemProp(e,t,r=null){return e&&e.item?ge.getItemValue(e.item[t],r):void 0}getItemId(e){return e.item?.id??`${this.menuId}_${e.key}`}getItemKey(e){return this.getItemId(e)}getItemClass(e){return ke(oe({},this.getItemProp(e,"class")),{"p-menuitem":!0,"p-highlight":this.isItemActive(e),"p-menuitem-active":this.isItemActive(e),"p-focus":this.isItemFocused(e),"p-disabled":this.isItemDisabled(e)})}getItemLabel(e){return this.getItemProp(e,"label")}getSeparatorItemClass(e){return ke(oe({},this.getItemProp(e,"class")),{"p-menuitem-separator":!0})}getAriaSetSize(){return this.items.filter(e=>this.isItemVisible(e)&&!this.getItemProp(e,"separator")).length}getAriaPosInset(e){return e-this.items.slice(0,e).filter(t=>{let r=this.isItemVisible(t),o=r&&this.getItemProp(t,"separator");return!r||o}).length+1}isItemVisible(e){return this.getItemProp(e,"visible")!==!1}isItemActive(e){if(this.activeItemPath())return this.activeItemPath().some(t=>t.key===e.key)}isItemDisabled(e){return this.getItemProp(e,"disabled")}isItemFocused(e){return this.focusedItemId===this.getItemId(e)}isItemGroup(e){return ge.isNotEmpty(e.items)}onItemMouseEnter(e){if(this.autoDisplay){let{event:t,processedItem:r}=e;this.itemMouseEnter.emit({originalEvent:t,processedItem:r})}}onItemClick(e,t){this.getItemProp(t,"command",{originalEvent:e,item:t.item}),this.itemClick.emit({originalEvent:e,processedItem:t,isFocus:!0})}static \u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(Zt(()=>wF)))};static \u0275cmp=se({type:i,selectors:[["p-tieredMenuSub"]],viewQuery:function(t,r){if(t&1&&le($Fe,7),t&2){let o;te(o=ie())&&(r.sublistViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{items:"items",itemTemplate:"itemTemplate",root:[2,"root","root",Y],autoDisplay:[2,"autoDisplay","autoDisplay",Y],autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],popup:[2,"popup","popup",Y],menuId:"menuId",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",level:[2,"level","level",We],focusedItemId:"focusedItemId",activeItemPath:[1,"activeItemPath"],tabindex:[2,"tabindex","tabindex",We]},outputs:{itemClick:"itemClick",itemMouseEnter:"itemMouseEnter",menuFocus:"menuFocus",menuBlur:"menuBlur",menuKeydown:"menuKeydown"},features:[tt],decls:3,vars:12,consts:[["sublist",""],["listItem",""],["htmlLabel",""],["role","menu",3,"keydown","focus","blur","ngClass","id","tabindex"],["ngFor","",3,"ngForOf"],["role","separator",3,"ngStyle","ngClass",4,"ngIf"],["role","menuitem",3,"ngStyle","ngClass","class","pTooltip","tooltipOptions",4,"ngIf"],["role","separator",3,"ngStyle","ngClass"],["role","menuitem",3,"ngStyle","ngClass","pTooltip","tooltipOptions"],[1,"p-menuitem-content",3,"click","mouseenter"],[4,"ngIf"],[3,"items","itemTemplate","autoDisplay","menuId","activeItemPath","focusedItemId","ariaLabelledBy","level","itemClick","itemMouseEnter",4,"ngIf"],["pRipple","",3,"target","ngClass",4,"ngIf"],["pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state",4,"ngIf"],["pRipple","",3,"target","ngClass"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngTemplateOutlet"],[3,"styleClass"],[3,"data-pc-section","aria-hidden"],["pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"itemClick","itemMouseEnter","items","itemTemplate","autoDisplay","menuId","activeItemPath","focusedItemId","ariaLabelledBy","level"]],template:function(t,r){if(t&1){let o=L();m(0,"ul",3,0),k("keydown",function(a){return y(o),w(r.menuKeydown.emit(a))})("focus",function(a){return y(o),w(r.menuFocus.emit(a))})("blur",function(a){return y(o),w(r.menuBlur.emit(a))}),v(2,vke,2,2,"ng-template",4),g()}t&2&&(f("ngClass",Qe(9,JFe,!r.root,r.root))("id",r.menuId+"_list")("tabindex",r.tabindex),G("aria-label",r.ariaLabel)("aria-labelledBy",r.ariaLabelledBy)("aria-activedescendant",r.focusedItemId)("aria-orientation","vertical")("data-pc-section","menu"),p(2),f("ngForOf",r.items))},dependencies:()=>[je,hn,rt,mt,De,Rp,dm,nn,cn,xp,i],encapsulation:2})}return i})(),wF=(()=>{class i{document;platformId;el;renderer;cd;config;overlayService;set model(e){this._model=e,this._processedItems=this.createProcessedItems(this._model||[])}get model(){return this._model}popup;style;styleClass;appendTo;autoZIndex=!0;baseZIndex=0;autoDisplay=!0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";id;ariaLabel;ariaLabelledBy;disabled=!1;tabindex=0;onShow=new X;onHide=new X;templates;rootmenu;containerViewChild;submenuIconTemplate;itemTemplate;container;outsideClickListener;resizeListener;scrollHandler;target;relatedTarget;visible;relativeAlign;dirty=!1;focused=!1;activeItemPath=Gi([]);number=Gi(0);focusedItemInfo=Gi({index:-1,level:0,parentKey:"",item:null});searchValue="";searchTimeout;_processedItems;_model;get visibleItems(){let e=this.activeItemPath().find(t=>t.key===this.focusedItemInfo().parentKey);return e?e.items:this.processedItems}get processedItems(){return(!this._processedItems||!this._processedItems.length)&&(this._processedItems=this.createProcessedItems(this.model||[])),this._processedItems}get focusedItemId(){let e=this.focusedItemInfo();return e.item?.id?e.item.id:e.index!==-1?`${this.id}${ge.isNotEmpty(e.parentKey)?"_"+e.parentKey:""}_${e.index}`:null}constructor(e,t,r,o,s,a,l){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.cd=s,this.config=a,this.overlayService=l,od(()=>{let c=this.activeItemPath();ge.isNotEmpty(c)?(this.bindOutsideClickListener(),this.bindResizeListener()):(this.unbindOutsideClickListener(),this.unbindResizeListener())})}ngOnInit(){this.id=this.id||Tt()}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"submenuicon":this.submenuIconTemplate=e.template;break;case"item":this.itemTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}createProcessedItems(e,t=0,r={},o=""){let s=[];return e&&e.forEach((a,l)=>{let c=(o!==""?o+"_":"")+l,d={item:a,index:l,level:t,key:c,parent:r,parentKey:o};d.items=this.createProcessedItems(a.items,t+1,d,c),s.push(d)}),s}getItemProp(e,t){return e?ge.getItemValue(e[t]):void 0}getProccessedItemLabel(e){return e?this.getItemLabel(e.item):void 0}getItemLabel(e){return this.getItemProp(e,"label")}isProcessedItemGroup(e){return e&&ge.isNotEmpty(e.items)}isSelected(e){return this.activeItemPath().some(t=>t.key===e.key)}isValidSelectedItem(e){return this.isValidItem(e)&&this.isSelected(e)}isValidItem(e){return!!e&&!this.isItemDisabled(e.item)&&!this.isItemSeparator(e.item)&&this.isItemVisible(e.item)}isItemDisabled(e){return this.getItemProp(e,"disabled")}isItemVisible(e){return this.getItemProp(e,"visible")!==!1}isItemSeparator(e){return this.getItemProp(e,"separator")}isItemMatched(e){return this.isValidItem(e)&&this.getProccessedItemLabel(e).toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase())}isProccessedItemGroup(e){return e&&ge.isNotEmpty(e.items)}onOverlayClick(e){this.popup&&this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onItemClick(e){let{originalEvent:t,processedItem:r}=e,o=this.isProcessedItemGroup(r),s=ge.isEmpty(r.parent);if(this.isSelected(r)){let{index:l,key:c,level:d,parentKey:h,item:_}=r;this.activeItemPath.set(this.activeItemPath().filter(C=>c!==C.key&&c.startsWith(C.key))),this.focusedItemInfo.set({index:l,level:d,parentKey:h,item:_}),this.dirty=!0,j.focus(this.rootmenu.sublistViewChild.nativeElement)}else if(o)this.onItemChange(e);else{let l=s?r:this.activeItemPath().find(c=>c.parentKey==="");this.hide(t),this.changeFocusedItemIndex(t,l?l.index:-1),j.focus(this.rootmenu.sublistViewChild.nativeElement)}}onItemMouseEnter(e){j.isTouchDevice()?this.onItemChange({event:e,processedItem:e.processedItem,focus:this.autoDisplay}):(this.autoDisplay&&(this.dirty=!0),this.dirty&&this.onItemChange(e))}onKeyDown(e){let t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!t&&ge.isPrintableCharacter(e.key)&&this.searchItems(e,e.key);break}}onArrowDownKey(e){let t=this.focusedItemInfo().index!==-1?this.findNextItemIndex(this.focusedItemInfo().index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(e,t),e.preventDefault()}onArrowRightKey(e){let t=this.visibleItems[this.focusedItemInfo().index],r=this.isProccessedItemGroup(t),o=t?.item;r&&(this.onItemChange({originalEvent:e,processedItem:t}),this.focusedItemInfo.set({index:-1,parentKey:t.key,item:o}),this.searchValue="",this.onArrowDownKey(e)),e.preventDefault()}onArrowUpKey(e){if(e.altKey){if(this.focusedItemInfo().index!==-1){let t=this.visibleItems[this.focusedItemInfo().index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.popup&&this.hide(e,!0),e.preventDefault()}else{let t=this.focusedItemInfo().index!==-1?this.findPrevItemIndex(this.focusedItemInfo().index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(e,t),e.preventDefault()}}onArrowLeftKey(e){let t=this.visibleItems[this.focusedItemInfo().index],r=this.activeItemPath().find(a=>a.key===t.parentKey);ge.isEmpty(t.parent)||(this.focusedItemInfo.set({index:-1,parentKey:r?r.parentKey:"",item:t.item}),this.searchValue="",this.onArrowDownKey(e));let s=this.activeItemPath().filter(a=>a.parentKey!==this.focusedItemInfo().parentKey);this.activeItemPath.set(s),e.preventDefault()}onHomeKey(e){this.changeFocusedItemIndex(e,this.findFirstItemIndex()),e.preventDefault()}onEndKey(e){this.changeFocusedItemIndex(e,this.findLastItemIndex()),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}onEscapeKey(e){this.hide(e,!0),this.focusedItemInfo().index=this.findFirstFocusedItemIndex(),e.preventDefault()}onTabKey(e){if(this.focusedItemInfo().index!==-1){let t=this.visibleItems[this.focusedItemInfo().index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.hide()}onEnterKey(e){if(this.focusedItemInfo().index!==-1){let t=j.findSingle(this.rootmenu.el.nativeElement,`li[id="${`${this.focusedItemId}`}"]`),r=t&&j.findSingle(t,'a[data-pc-section="action"]');if(r?r.click():t&&t.click(),!this.popup){let o=this.visibleItems[this.focusedItemInfo().index];!this.isProccessedItemGroup(o)&&(this.focusedItemInfo().index=this.findFirstFocusedItemIndex())}}e.preventDefault()}onItemChange(e){let{processedItem:t,isFocus:r}=e;if(ge.isEmpty(t))return;let{index:o,key:s,level:a,parentKey:l,items:c,item:d}=t,h=ge.isNotEmpty(c),_=this.activeItemPath().filter(C=>C.parentKey!==l&&C.parentKey!==s);h&&_.push(t),this.focusedItemInfo.set({index:o,level:a,parentKey:l,item:d}),this.activeItemPath.set(_),h&&(this.dirty=!0),r&&j.focus(this.rootmenu.sublistViewChild.nativeElement)}onMenuFocus(e){this.focused=!0,this.focusedItemInfo().index===-1&&this.popup}onMenuBlur(e){this.focused=!1,this.focusedItemInfo.set({index:-1,level:0,parentKey:"",item:null}),this.searchValue="",this.dirty=!1}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.popup&&(this.container=e.element,this.moveOnTop(),this.onShow.emit({}),this.appendOverlay(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),j.focus(this.rootmenu.sublistViewChild.nativeElement),this.scrollInView());break;case"void":this.onOverlayHide(),this.onHide.emit({});break}}alignOverlay(){this.relativeAlign?j.relativePosition(this.container,this.target):j.absolutePosition(this.container,this.target)}onOverlayAnimationEnd(e){switch(e.toState){case"void":bi.clear(e.element);break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.container):j.appendChild(this.container,this.appendTo))}restoreOverlayAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.container)}moveOnTop(){this.autoZIndex&&bi.set("menu",this.container,this.baseZIndex+this.config.zIndex.menu)}hide(e,t){this.popup&&(this.onHide.emit({}),this.visible=!1),this.activeItemPath.set([]),this.focusedItemInfo.set({index:-1,level:0,parentKey:""}),t&&j.focus(this.relatedTarget||this.target||this.rootmenu.sublistViewChild.nativeElement),this.dirty=!1}toggle(e){this.visible?this.hide(e,!0):this.show(e)}show(e,t){this.popup&&(this.visible=!0,this.target=this.target||e.currentTarget,this.relatedTarget=e.relatedTarget||null,this.relativeAlign=e?.relativeAlign||null),this.focusedItemInfo.set({index:-1,level:0,parentKey:""}),t&&j.focus(this.rootmenu.sublistViewChild.nativeElement),this.cd.markForCheck()}searchItems(e,t){this.searchValue=(this.searchValue||"")+t;let r=-1,o=!1;return this.focusedItemInfo().index!==-1?(r=this.visibleItems.slice(this.focusedItemInfo().index).findIndex(s=>this.isItemMatched(s)),r=r===-1?this.visibleItems.slice(0,this.focusedItemInfo().index).findIndex(s=>this.isItemMatched(s)):r+this.focusedItemInfo().index):r=this.visibleItems.findIndex(s=>this.isItemMatched(s)),r!==-1&&(o=!0),r===-1&&this.focusedItemInfo().index===-1&&(r=this.findFirstFocusedItemIndex()),r!==-1&&this.changeFocusedItemIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}findLastFocusedItemIndex(){let e=this.findSelectedItemIndex();return e<0?this.findLastItemIndex():e}findLastItemIndex(){return ge.findLastIndex(this.visibleItems,e=>this.isValidItem(e))}findPrevItemIndex(e){let t=e>0?ge.findLastIndex(this.visibleItems.slice(0,e),r=>this.isValidItem(r)):-1;return t>-1?t:e}findNextItemIndex(e){let t=e<this.visibleItems.length-1?this.visibleItems.slice(e+1).findIndex(r=>this.isValidItem(r)):-1;return t>-1?t+e+1:e}findFirstFocusedItemIndex(){let e=this.findSelectedItemIndex();return e<0?this.findFirstItemIndex():e}findFirstItemIndex(){return this.visibleItems.findIndex(e=>this.isValidItem(e))}findSelectedItemIndex(){return this.visibleItems.findIndex(e=>this.isValidSelectedItem(e))}changeFocusedItemIndex(e,t){if(this.focusedItemInfo().index!==t){let r=this.focusedItemInfo();this.focusedItemInfo.set(ke(oe({},r),{item:this.visibleItems[t].item,index:t})),this.scrollInView()}}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedItemId,r=j.findSingle(this.rootmenu.el.nativeElement,`li[id="${t}"]`);r&&r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"})}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.target,e=>{this.visible&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&(this.scrollHandler.unbindScrollListener(),this.scrollHandler=null)}bindResizeListener(){bt(this.platformId)&&(this.resizeListener||(this.resizeListener=this.renderer.listen(this.document.defaultView,"resize",e=>{j.isTouchDevice()||this.hide(e,!0)})))}bindOutsideClickListener(){bt(this.platformId)&&(this.outsideClickListener||(this.outsideClickListener=this.renderer.listen(this.document,"click",e=>{let t=this.containerViewChild&&!this.containerViewChild.nativeElement.contains(e.target),r=this.popup?!(this.target&&(this.target===e.target||this.target.contains(e.target))):!0;t&&r&&this.hide()})))}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}unbindResizeListener(){this.resizeListener&&(this.resizeListener(),this.resizeListener=null)}onOverlayHide(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.cd.destroyed||(this.target=null)}ngOnDestroy(){this.popup&&(this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&this.autoZIndex&&bi.clear(this.container),this.restoreOverlayAppend(),this.onOverlayHide())}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(we),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-tieredMenu"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(bke,5),le(Ske,5)),t&2){let o;te(o=ie())&&(r.rootmenu=o.first),te(o=ie())&&(r.containerViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",popup:[2,"popup","popup",Y],style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],autoDisplay:[2,"autoDisplay","autoDisplay",Y],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",id:"id",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",disabled:[2,"disabled","disabled",Y],tabindex:[2,"tabindex","tabindex",We]},outputs:{onShow:"onShow",onHide:"onHide"},features:[tt],decls:1,vars:1,consts:[["container",""],["rootmenu",""],[3,"id","ngClass","class","ngStyle","click",4,"ngIf"],[3,"click","id","ngClass","ngStyle"],[3,"itemClick","menuFocus","menuBlur","menuKeydown","itemMouseEnter","root","items","itemTemplate","menuId","tabindex","ariaLabel","ariaLabelledBy","baseZIndex","autoZIndex","autoDisplay","popup","focusedItemId","activeItemPath"]],template:function(t,r){t&1&&v(0,Tke,4,29,"div",2),t&2&&f("ngIf",!r.popup||r.visible)},dependencies:[je,rt,De,Oke],styles:[`@layer primeng{.p-tieredmenu-overlay{position:absolute;top:0;left:0}.p-tieredmenu ul{margin:0;padding:0;list-style:none}.p-tieredmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-tieredmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-tieredmenu .p-menuitem-text{line-height:1}.p-tieredmenu .p-menuitem{position:relative}.p-tieredmenu .p-menuitem-link .p-submenu-icon:not(svg){margin-left:auto}.p-tieredmenu .p-menuitem-link .p-icon-wrapper{margin-left:auto}.p-tieredmenu .p-menuitem-active>p-tieredmenusub>.p-submenu-list{display:block;left:100%;top:0}.p-tieredmenu .p-menuitem-active>p-tieredmenusub>.p-submenu-list.p-submenu-list-flipped{left:-100%}}
`],encapsulation:2,data:{animation:[Tn("overlayAnimation",[ci(":enter",[qt({opacity:0,transform:"scaleY(0.8)"}),li("{{showTransitionParams}}")]),ci(":leave",[li("{{hideTransitionParams}}",qt({opacity:0}))])])]},changeDetection:0})}return i})(),vF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,al,ln,oo,xp,dt,al,oo,dt]})}return i})();var Pke=["container"],Dke=["defaultbtn"],Fke=["menu"];function kke(i,n){i&1&&ue(0)}function Nke(i,n){if(i&1){let e=L();he(0),m(1,"button",10),k("click",function(r){y(e);let o=u();return w(o.onDefaultButtonClick(r))}),v(2,kke,1,0,"ng-container",8),g(),fe()}if(i&2){let e=u();p(),f("severity",e.severity)("text",e.text)("outlined",e.outlined)("size",e.size)("icon",e.icon)("iconPos",e.iconPos)("disabled",e.disabled)("ariaLabel",(e.buttonProps==null?null:e.buttonProps.ariaLabel)||e.label)("autofocus",e.autofocus)("pTooltip",e.tooltip)("tooltipOptions",e.tooltipOptions),G("tabindex",e.tabindex),p(),f("ngTemplateOutlet",e.contentTemplate)}}function Lke(i,n){if(i&1){let e=L();m(0,"button",11,3),k("click",function(r){y(e);let o=u();return w(o.onDefaultButtonClick(r))}),g()}if(i&2){let e=u();f("severity",e.severity)("text",e.text)("outlined",e.outlined)("size",e.size)("icon",e.icon)("iconPos",e.iconPos)("label",e.label)("disabled",e.buttonDisabled)("ariaLabel",e.buttonProps==null?null:e.buttonProps.ariaLabel)("autofocus",e.autofocus)("pTooltip",e.tooltip)("tooltipOptions",e.tooltipOptions),G("tabindex",e.tabindex)}}function Mke(i,n){i&1&&P(0,"ChevronDownIcon")}function Vke(i,n){}function Bke(i,n){i&1&&v(0,Vke,0,0,"ng-template")}var AW=(()=>{class i{model;severity;raised=!1;rounded=!1;text=!1;outlined=!1;size=null;plain=!1;icon;iconPos="left";label;tooltip;tooltipOptions;style;styleClass;menuStyle;menuStyleClass;appendTo;dir;expandAriaLabel;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";buttonProps;menuButtonProps;autofocus;set disabled(e){this._disabled=e,this._buttonDisabled=e,this.menuButtonDisabled=e}get disabled(){return this._disabled}tabindex;set menuButtonDisabled(e){this.disabled?this._menuButtonDisabled=this.disabled:this._menuButtonDisabled=e}get menuButtonDisabled(){return this._menuButtonDisabled}set buttonDisabled(e){this.disabled?this.buttonDisabled=this.disabled:this._buttonDisabled=e}get buttonDisabled(){return this._buttonDisabled}onClick=new X;onMenuHide=new X;onMenuShow=new X;onDropdownClick=new X;containerViewChild;buttonViewChild;menu;templates;contentTemplate;dropdownIconTemplate;ariaId;isExpanded=Gi(!1);_disabled;_buttonDisabled;_menuButtonDisabled;ngOnInit(){this.ariaId=Tt()}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}get containerClass(){let e={"p-splitbutton p-component":!0,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-outlined":this.outlined,"p-button-text":this.text,"p-button-plain":this.plain,[`p-button-${this.size==="small"?"sm":"lg"}`]:this.size};return oe({},e)}onDefaultButtonClick(e){this.onClick.emit(e),this.menu.hide()}onDropdownButtonClick(e){this.onDropdownClick.emit(e),this.menu?.toggle({currentTarget:this.containerViewChild?.nativeElement,relativeAlign:this.appendTo==null})}onDropdownButtonKeydown(e){(e.code==="ArrowDown"||e.code==="ArrowUp")&&(this.onDropdownButtonClick(),e.preventDefault())}onHide(){this.isExpanded.set(!1),this.onMenuHide.emit()}onShow(){this.isExpanded.set(!0),this.onMenuShow.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=se({type:i,selectors:[["p-splitButton"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(Pke,5),le(Dke,5),le(Fke,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.buttonViewChild=o.first),te(o=ie())&&(r.menu=o.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",severity:"severity",raised:[2,"raised","raised",Y],rounded:[2,"rounded","rounded",Y],text:[2,"text","text",Y],outlined:[2,"outlined","outlined",Y],size:"size",plain:[2,"plain","plain",Y],icon:"icon",iconPos:"iconPos",label:"label",tooltip:"tooltip",tooltipOptions:"tooltipOptions",style:"style",styleClass:"styleClass",menuStyle:"menuStyle",menuStyleClass:"menuStyleClass",appendTo:"appendTo",dir:"dir",expandAriaLabel:"expandAriaLabel",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",buttonProps:"buttonProps",menuButtonProps:"menuButtonProps",autofocus:[2,"autofocus","autofocus",Y],disabled:[2,"disabled","disabled",Y],tabindex:[2,"tabindex","tabindex",We],menuButtonDisabled:"menuButtonDisabled",buttonDisabled:"buttonDisabled"},outputs:{onClick:"onClick",onMenuHide:"onMenuHide",onMenuShow:"onMenuShow",onDropdownClick:"onDropdownClick"},features:[tt],decls:10,vars:26,consts:[["container",""],["defaultButton",""],["menu",""],["defaultbtn",""],[3,"ngClass","ngStyle"],[4,"ngIf","ngIfElse"],["type","button","pButton","",1,"p-splitbutton-menubutton","p-button-icon-only",3,"click","keydown","size","severity","text","outlined","disabled","ariaLabel"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"onHide","onShow","id","popup","model","styleClass","appendTo","showTransitionOptions","hideTransitionOptions"],["type","button","pButton","","pAutoFocus","",1,"p-splitbutton-defaultbutton",3,"click","severity","text","outlined","size","icon","iconPos","disabled","ariaLabel","autofocus","pTooltip","tooltipOptions"],["type","button","pButton","","pAutoFocus","",1,"p-splitbutton-defaultbutton",3,"click","severity","text","outlined","size","icon","iconPos","label","disabled","ariaLabel","autofocus","pTooltip","tooltipOptions"]],template:function(t,r){if(t&1){let o=L();m(0,"div",4,0),v(2,Nke,3,13,"ng-container",5)(3,Lke,2,13,"ng-template",null,1,Bt),m(5,"button",6),k("click",function(a){return y(o),w(r.onDropdownButtonClick(a))})("keydown",function(a){return y(o),w(r.onDropdownButtonKeydown(a))}),v(6,Mke,1,0,"ChevronDownIcon",7)(7,Bke,1,0,null,8),g(),m(8,"p-tieredMenu",9,2),k("onHide",function(){return y(o),w(r.onHide())})("onShow",function(){return y(o),w(r.onShow())}),g()()}if(t&2){let o=He(4);ce(r.styleClass),f("ngClass",r.containerClass)("ngStyle",r.style),p(2),f("ngIf",r.contentTemplate)("ngIfElse",o),p(3),f("size",r.size)("severity",r.severity)("text",r.text)("outlined",r.outlined)("disabled",r.menuButtonDisabled)("ariaLabel",(r.menuButtonProps==null?null:r.menuButtonProps.ariaLabel)||r.expandAriaLabel),G("aria-haspopup",(r.menuButtonProps==null?null:r.menuButtonProps.ariaHasPopup)||!0)("aria-expanded",(r.menuButtonProps==null?null:r.menuButtonProps.ariaExpanded)||r.isExpanded())("aria-controls",(r.menuButtonProps==null?null:r.menuButtonProps.ariaControls)||r.ariaId),p(),f("ngIf",!r.dropdownIconTemplate),p(),f("ngTemplateOutlet",r.dropdownIconTemplate),p(),st(r.menuStyle),f("id",r.ariaId)("popup",!0)("model",r.model)("styleClass",r.menuStyleClass)("appendTo",r.appendTo)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}},dependencies:()=>[je,rt,mt,De,pt,wF,cn,Zn,Ho],styles:[`@layer primeng{.p-splitbutton{display:inline-flex;position:relative}.p-splitbutton .p-splitbutton-defaultbutton,.p-splitbutton.p-button-rounded>.p-splitbutton-defaultbutton.p-button,.p-splitbutton.p-button-outlined>.p-splitbutton-defaultbutton.p-button{flex:1 1 auto;border-top-right-radius:0;border-bottom-right-radius:0;border-right:0 none}.p-splitbutton-menubutton,.p-splitbutton.p-button-rounded>.p-splitbutton-menubutton.p-button,.p-splitbutton.p-button-outlined>.p-splitbutton-menubutton.p-button{display:flex;align-items:center;justify-content:center;border-top-left-radius:0;border-bottom-left-radius:0}.p-splitbutton .p-menu{min-width:100%}.p-fluid .p-splitbutton{display:flex}}
`],encapsulation:2,changeDetection:0})}return i})(),bF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,ro,vF,fr,Ho,ro,vF]})}return i})();var OC=i=>({height:i}),jke=(i,n)=>({"p-multiselect-item":!0,"p-disabled":i,"p-focus":n}),Gke=i=>({"p-variant-filled":i}),Hke=i=>({"p-highlight":i}),vS=i=>({$implicit:i});function Wke(i,n){i&1&&P(0,"CheckIcon",7),i&2&&(f("styleClass","p-checkbox-icon"),G("aria-hidden",!0))}function zke(i,n){}function Kke(i,n){i&1&&v(0,zke,0,0,"ng-template")}function $ke(i,n){if(i&1&&(m(0,"span",8),v(1,Kke,1,0,null,9),g()),i&2){let e=u(2);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.checkIconTemplate)}}function Jke(i,n){}function qke(i,n){i&1&&v(0,Jke,0,0,"ng-template")}function Yke(i,n){if(i&1&&(m(0,"span",8),v(1,qke,1,0,null,4),g()),i&2){let e=u(2);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.itemCheckboxIconTemplate)("ngTemplateOutletContext",ne(3,vS,e.selected))}}function Xke(i,n){if(i&1&&(he(0),v(1,Wke,1,2,"CheckIcon",5)(2,$ke,2,2,"span",6)(3,Yke,2,5,"span",6),fe()),i&2){let e=u();p(),f("ngIf",!e.checkIconTemplate&&!e.itemCheckboxIconTemplate),p(),f("ngIf",e.checkIconTemplate),p(),f("ngIf",e.itemCheckboxIconTemplate)}}function Qke(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e,t=u();p(),$((e=t.label)!==null&&e!==void 0?e:"empty")}}function Zke(i,n){i&1&&ue(0)}var eNe=["container"],tNe=["overlay"],iNe=["filterInput"],nNe=["focusInput"],rNe=["items"],oNe=["scroller"],sNe=["lastHiddenFocusableEl"],aNe=["firstHiddenFocusableEl"],lNe=["headerCheckbox"],cNe=[[["p-header"]],[["p-footer"]]],dNe=["p-header","p-footer"],pNe=(i,n)=>({$implicit:i,removeChip:n}),uNe=i=>({"p-disabled":i}),hNe=i=>({"max-height":i}),xW=i=>({options:i}),fNe=(i,n)=>({"p-variant-filled":i,"p-checkbox-disabled":n}),mNe=(i,n,e)=>({"p-highlight":i,"p-focus":n,"p-disabled":e}),gNe=(i,n)=>({$implicit:i,partialSelected:n}),TW=(i,n)=>({$implicit:i,options:n}),_Ne=()=>({});function CNe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(2);p(),$(e.label()||"empty")}}function INe(i,n){if(i&1){let e=L();m(0,"TimesCircleIcon",31),k("click",function(){y(e);let r=u(2).$implicit,o=u(3);return w(o.removeOption(r,o.event))})("keydown",function(r){y(e);let o=u(2).$implicit,s=u(3);return w(s.onremoveTokenIconKeyDown(r,o))}),g()}if(i&2){let e=u(2).$implicit,t=u(3);f("ngClass",ne(5,uNe,t.isOptionDisabled(e)))("styleClass","p-multiselect-token-icon"),G("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0)}}function yNe(i,n){i&1&&ue(0)}function wNe(i,n){if(i&1){let e=L();m(0,"span",32),k("click",function(){y(e);let r=u(2).$implicit,o=u(3);return w(o.removeOption(r,o.event))})("keydown",function(r){y(e);let o=u(2).$implicit,s=u(3);return w(s.onremoveTokenIconKeyDown(r,o))}),v(1,yNe,1,0,"ng-container",33),g()}if(i&2){let e=u(5);G("tabindex",0)("data-pc-section","clearicon")("aria-hidden",!0),p(),f("ngTemplateOutlet",e.removeTokenIconTemplate)}}function vNe(i,n){if(i&1&&(he(0),v(1,INe,1,7,"TimesCircleIcon",29)(2,wNe,2,4,"span",30),fe()),i&2){let e=u(4);p(),f("ngIf",!e.removeTokenIconTemplate),p(),f("ngIf",e.removeTokenIconTemplate)}}function bNe(i,n){if(i&1&&(m(0,"div",27,4)(2,"span",28),F(3),g(),v(4,vNe,3,2,"ng-container",20),g()),i&2){let e=n.$implicit,t=u(3);p(3),$(t.getLabelByValue(e)),p(),f("ngIf",!t.disabled)}}function SNe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),$(e.placeholder()||e.defaultLabel||"empty")}}function ENe(i,n){if(i&1&&(he(0),v(1,bNe,5,2,"div",26)(2,SNe,2,1,"ng-container",20),fe()),i&2){let e=u(2);p(),f("ngForOf",e.chipSelectedItems()),p(),f("ngIf",!e.modelValue()||e.modelValue().length===0)}}function ANe(i,n){if(i&1&&(he(0),v(1,CNe,2,1,"ng-container",20)(2,ENe,3,2,"ng-container",20),fe()),i&2){let e=u();p(),f("ngIf",e.display==="comma"),p(),f("ngIf",e.display==="chip")}}function xNe(i,n){i&1&&ue(0)}function TNe(i,n){if(i&1){let e=L();m(0,"TimesIcon",36),k("click",function(r){y(e);let o=u(2);return w(o.clear(r))}),g()}i&2&&(f("styleClass","p-multiselect-clear-icon"),G("data-pc-section","clearicon")("aria-hidden",!0))}function ONe(i,n){}function RNe(i,n){i&1&&v(0,ONe,0,0,"ng-template")}function PNe(i,n){if(i&1){let e=L();m(0,"span",37),k("click",function(r){y(e);let o=u(2);return w(o.clear(r))}),v(1,RNe,1,0,null,33),g()}if(i&2){let e=u(2);G("data-pc-section","clearicon")("aria-hidden",!0),p(),f("ngTemplateOutlet",e.clearIconTemplate)}}function DNe(i,n){if(i&1&&(he(0),v(1,TNe,1,3,"TimesIcon",34)(2,PNe,2,3,"span",35),fe()),i&2){let e=u();p(),f("ngIf",!e.clearIconTemplate),p(),f("ngIf",e.clearIconTemplate)}}function FNe(i,n){i&1&&ue(0)}function kNe(i,n){if(i&1&&(he(0),v(1,FNe,1,0,"ng-container",33),fe()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function NNe(i,n){if(i&1&&P(0,"span",40),i&2){let e=u(3);f("ngClass","p-multiselect-trigger-icon pi-spin "+e.loadingIcon)}}function LNe(i,n){i&1&&P(0,"span",41),i&2&&ce("p-multiselect-trigger-icon pi pi-spinner pi-spin")}function MNe(i,n){if(i&1&&(he(0),v(1,NNe,1,1,"span",38)(2,LNe,1,2,"span",39),fe()),i&2){let e=u(2);p(),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function VNe(i,n){if(i&1&&(he(0),v(1,kNe,2,1,"ng-container",20)(2,MNe,3,2,"ng-container",20),fe()),i&2){let e=u();p(),f("ngIf",e.loadingIconTemplate),p(),f("ngIf",!e.loadingIconTemplate)}}function BNe(i,n){if(i&1&&P(0,"span",45),i&2){let e=u(3);f("ngClass",e.dropdownIcon),G("data-pc-section","triggericon")("aria-hidden",!0)}}function UNe(i,n){i&1&&P(0,"ChevronDownIcon",46),i&2&&(f("styleClass","p-multiselect-trigger-icon"),G("data-pc-section","triggericon")("aria-hidden",!0))}function jNe(i,n){if(i&1&&(he(0),v(1,BNe,1,3,"span",43)(2,UNe,1,3,"ChevronDownIcon",44),fe()),i&2){let e=u(2);p(),f("ngIf",e.dropdownIcon),p(),f("ngIf",!e.dropdownIcon)}}function GNe(i,n){}function HNe(i,n){i&1&&v(0,GNe,0,0,"ng-template")}function WNe(i,n){if(i&1&&(m(0,"span",47),v(1,HNe,1,0,null,33),g()),i&2){let e=u(2);G("data-pc-section","triggericon")("aria-hidden",!0),p(),f("ngTemplateOutlet",e.dropdownIconTemplate)}}function zNe(i,n){if(i&1&&v(0,jNe,3,2,"ng-container",20)(1,WNe,2,3,"span",42),i&2){let e=u();f("ngIf",!e.dropdownIconTemplate),p(),f("ngIf",e.dropdownIconTemplate)}}function KNe(i,n){i&1&&ue(0)}function $Ne(i,n){i&1&&ue(0)}function JNe(i,n){if(i&1&&(he(0),v(1,$Ne,1,0,"ng-container",21),fe()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",ne(2,xW,e.filterOptions))}}function qNe(i,n){i&1&&P(0,"CheckIcon",46),i&2&&(f("styleClass","p-checkbox-icon"),G("aria-hidden",!0))}function YNe(i,n){if(i&1&&(he(0),v(1,qNe,1,2,"CheckIcon",44),fe()),i&2){let e=u(6);p(),f("ngIf",e.allSelected())}}function XNe(i,n){}function QNe(i,n){i&1&&v(0,XNe,0,0,"ng-template")}function ZNe(i,n){if(i&1&&(m(0,"span",63),v(1,QNe,1,0,null,21),g()),i&2){let e=u(6);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.checkIconTemplate)("ngTemplateOutletContext",ne(3,vS,e.allSelected()))}}function eLe(i,n){}function tLe(i,n){i&1&&v(0,eLe,0,0,"ng-template")}function iLe(i,n){if(i&1&&(m(0,"span",63),v(1,tLe,1,0,null,21),g()),i&2){let e=u(6);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.headerCheckboxIconTemplate)("ngTemplateOutletContext",Qe(3,gNe,e.allSelected(),e.partialSelected()))}}function nLe(i,n){if(i&1&&(he(0),v(1,YNe,2,1,"ng-container",20)(2,ZNe,2,5,"span",62)(3,iLe,2,6,"span",62),fe()),i&2){let e=u(5);p(),f("ngIf",!e.checkIconTemplate&&!e.headerCheckboxIconTemplate),p(),f("ngIf",e.checkIconTemplate),p(),f("ngIf",e.headerCheckboxIconTemplate)}}function rLe(i,n){if(i&1){let e=L();m(0,"div",59),k("click",function(r){y(e);let o=u(4);return w(o.onToggleAll(r))})("keydown",function(r){y(e);let o=u(4);return w(o.onHeaderCheckboxKeyDown(r))}),m(1,"div",16)(2,"input",60,9),k("focus",function(){y(e);let r=u(4);return w(r.onHeaderCheckboxFocus())})("blur",function(){y(e);let r=u(4);return w(r.onHeaderCheckboxBlur())}),g()(),m(4,"div",61),v(5,nLe,4,3,"ng-container",20),g()()}if(i&2){let e=u(4);f("ngClass",Qe(10,fNe,e.variant==="filled"||e.config.inputStyle()==="filled",e.disabled||e.toggleAllDisabled)),p(),G("data-p-hidden-accessible",!0),p(),f("readonly",e.readonly)("disabled",e.disabled||e.toggleAllDisabled),G("checked",e.allSelected())("aria-label",e.toggleAllAriaLabel),p(2),f("ngClass",en(13,mNe,e.allSelected(),e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),G("aria-label",e.toggleAllAriaLabel)("aria-checked",e.allSelected()),p(),f("ngIf",e.allSelected()||e.partialSelected())}}function oLe(i,n){i&1&&P(0,"SearchIcon",46),i&2&&f("styleClass","p-multiselect-filter-icon")}function sLe(i,n){}function aLe(i,n){i&1&&v(0,sLe,0,0,"ng-template")}function lLe(i,n){if(i&1&&(m(0,"span",67),v(1,aLe,1,0,null,33),g()),i&2){let e=u(5);p(),f("ngTemplateOutlet",e.filterIconTemplate)}}function cLe(i,n){if(i&1){let e=L();m(0,"div",64)(1,"input",65,10),k("input",function(r){y(e);let o=u(4);return w(o.onFilterInputChange(r))})("keydown",function(r){y(e);let o=u(4);return w(o.onFilterKeyDown(r))})("click",function(r){y(e);let o=u(4);return w(o.onInputClick(r))})("blur",function(r){y(e);let o=u(4);return w(o.onFilterBlur(r))}),g(),v(3,oLe,1,1,"SearchIcon",44)(4,lLe,2,1,"span",66),g()}if(i&2){let e=u(4);p(),f("value",e._filterValue()||"")("disabled",e.disabled),G("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-owns",e.id+"_list")("aria-activedescendant",e.focusedOptionId)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel),p(2),f("ngIf",!e.filterIconTemplate),p(),f("ngIf",e.filterIconTemplate)}}function dLe(i,n){i&1&&P(0,"TimesIcon",46),i&2&&f("styleClass","p-multiselect-close-icon")}function pLe(i,n){}function uLe(i,n){i&1&&v(0,pLe,0,0,"ng-template")}function hLe(i,n){if(i&1&&(m(0,"span",68),v(1,uLe,1,0,null,33),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.closeIconTemplate)}}function fLe(i,n){if(i&1){let e=L();v(0,rLe,6,17,"div",55)(1,cLe,5,10,"div",56),m(2,"button",57),k("click",function(r){y(e);let o=u(3);return w(o.close(r))}),v(3,dLe,1,1,"TimesIcon",44)(4,hLe,2,1,"span",58),g()}if(i&2){let e=u(3);f("ngIf",e.isSelectionAllDisabled()),p(),f("ngIf",e.filter),p(),G("aria-label",e.closeAriaLabel),p(),f("ngIf",!e.closeIconTemplate),p(),f("ngIf",e.closeIconTemplate)}}function mLe(i,n){if(i&1&&(m(0,"div",54),hi(1),v(2,KNe,1,0,"ng-container",33)(3,JNe,2,4,"ng-container",23)(4,fLe,5,5,"ng-template",null,8,Bt),g()),i&2){let e=He(5),t=u(2);p(2),f("ngTemplateOutlet",t.headerTemplate),p(),f("ngIf",t.filterTemplate)("ngIfElse",e)}}function gLe(i,n){i&1&&ue(0)}function _Le(i,n){if(i&1&&v(0,gLe,1,0,"ng-container",21),i&2){let e=n.$implicit,t=n.options;u(2);let r=He(8);f("ngTemplateOutlet",r)("ngTemplateOutletContext",Qe(2,TW,e,t))}}function CLe(i,n){i&1&&ue(0)}function ILe(i,n){if(i&1&&v(0,CLe,1,0,"ng-container",21),i&2){let e=n.options,t=u(4);f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(2,xW,e))}}function yLe(i,n){i&1&&(he(0),v(1,ILe,1,4,"ng-template",70),fe())}function wLe(i,n){if(i&1){let e=L();m(0,"p-scroller",69,11),k("onLazyLoad",function(r){y(e);let o=u(2);return w(o.onLazyLoad.emit(r))}),v(2,_Le,1,5,"ng-template",25)(3,yLe,2,0,"ng-container",20),g()}if(i&2){let e=u(2);st(ne(9,OC,e.scrollHeight)),f("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),p(3),f("ngIf",e.loaderTemplate)}}function vLe(i,n){i&1&&ue(0)}function bLe(i,n){if(i&1&&(he(0),v(1,vLe,1,0,"ng-container",21),fe()),i&2){u();let e=He(8),t=u();p(),f("ngTemplateOutlet",e)("ngTemplateOutletContext",Qe(3,TW,t.visibleOptions(),Ae(2,_Ne)))}}function SLe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2).$implicit,t=u(3);p(),$(t.getOptionGroupLabel(e.optionGroup))}}function ELe(i,n){i&1&&ue(0)}function ALe(i,n){if(i&1&&(he(0),m(1,"li",74),v(2,SLe,2,1,"span",20)(3,ELe,1,0,"ng-container",21),g(),fe()),i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u(2);p(),f("ngStyle",ne(5,OC,o.itemSize+"px")),G("id",s.id+"_"+s.getOptionIndex(r,o)),p(),f("ngIf",!s.groupTemplate),p(),f("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",ne(7,vS,t.optionGroup))}}function xLe(i,n){if(i&1){let e=L();he(0),m(1,"p-multiSelectItem",75),k("onClick",function(r){y(e);let o=u().index,s=u().options,a=u(2);return w(a.onOptionSelect(r,!1,a.getOptionIndex(o,s)))})("onMouseEnter",function(r){y(e);let o=u().index,s=u().options,a=u(2);return w(a.onOptionMouseEnter(r,a.getOptionIndex(o,s)))}),g(),fe()}if(i&2){let e=u(),t=e.$implicit,r=e.index,o=u().options,s=u(2);p(),f("id",s.id+"_"+s.getOptionIndex(r,o))("option",t)("selected",s.isSelected(t))("label",s.getOptionLabel(t))("disabled",s.isOptionDisabled(t))("template",s.itemTemplate)("checkIconTemplate",s.checkIconTemplate)("itemCheckboxIconTemplate",s.itemCheckboxIconTemplate)("itemSize",o.itemSize)("focused",s.focusedOptionIndex()===s.getOptionIndex(r,o))("ariaPosInset",s.getAriaPosInset(s.getOptionIndex(r,o)))("ariaSetSize",s.ariaSetSize)}}function TLe(i,n){if(i&1&&v(0,ALe,4,9,"ng-container",20)(1,xLe,2,12,"ng-container",20),i&2){let e=n.$implicit,t=u(3);f("ngIf",t.isOptionGroup(e)),p(),f("ngIf",!t.isOptionGroup(e))}}function OLe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(4);p(),J(" ",e.emptyFilterMessageLabel," ")}}function RLe(i,n){i&1&&ue(0,null,13)}function PLe(i,n){if(i&1&&(m(0,"li",76),v(1,OLe,2,1,"ng-container",23)(2,RLe,2,0,"ng-container",33),g()),i&2){let e=u().options,t=u(2);f("ngStyle",ne(4,OC,e.itemSize+"px")),p(),f("ngIf",!t.emptyFilterTemplate&&!t.emptyTemplate)("ngIfElse",t.emptyFilter),p(),f("ngTemplateOutlet",t.emptyFilterTemplate||t.emptyTemplate)}}function DLe(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(4);p(),J(" ",e.emptyMessageLabel," ")}}function FLe(i,n){i&1&&ue(0,null,14)}function kLe(i,n){if(i&1&&(m(0,"li",76),v(1,DLe,2,1,"ng-container",23)(2,FLe,2,0,"ng-container",33),g()),i&2){let e=u().options,t=u(2);f("ngStyle",ne(4,OC,e.itemSize+"px")),p(),f("ngIf",!t.emptyTemplate)("ngIfElse",t.empty),p(),f("ngTemplateOutlet",t.emptyTemplate)}}function NLe(i,n){if(i&1&&(m(0,"ul",71,12),v(2,TLe,2,2,"ng-template",72)(3,PLe,3,6,"li",73)(4,kLe,3,6,"li",73),g()),i&2){let e=n.$implicit,t=n.options,r=u(2);f("ngClass",t.contentStyleClass)("ngStyle",t.contentStyle),G("aria-label",r.listLabel),p(2),f("ngForOf",e),p(),f("ngIf",r.hasFilter()&&r.isEmpty()),p(),f("ngIf",!r.hasFilter()&&r.isEmpty())}}function LLe(i,n){i&1&&ue(0)}function MLe(i,n){if(i&1&&(m(0,"div",77),hi(1,1),v(2,LLe,1,0,"ng-container",33),g()),i&2){let e=u(2);p(2),f("ngTemplateOutlet",e.footerTemplate)}}function VLe(i,n){if(i&1){let e=L();m(0,"div",48)(1,"span",49,5),k("focus",function(r){y(e);let o=u();return w(o.onFirstHiddenFocus(r))}),g(),v(3,mLe,6,3,"div",50),m(4,"div",51),v(5,wLe,4,11,"p-scroller",52)(6,bLe,2,6,"ng-container",20)(7,NLe,5,6,"ng-template",null,6,Bt),g(),v(9,MLe,3,1,"div",53),m(10,"span",49,7),k("focus",function(r){y(e);let o=u();return w(o.onLastHiddenFocus(r))}),g()()}if(i&2){let e=u();ce(e.panelStyleClass),f("ngClass","p-multiselect-panel p-component")("ngStyle",e.panelStyle),G("id",e.id+"_list"),p(),G("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),p(2),f("ngIf",e.showHeader),p(),f("ngStyle",ne(16,hNe,e.virtualScroll?"auto":e.scrollHeight||"auto")),p(),f("ngIf",e.virtualScroll),p(),f("ngIf",!e.virtualScroll),p(3),f("ngIf",e.footerFacet||e.footerTemplate),p(),G("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var BLe={provide:fn,useExisting:Zt(()=>SF),multi:!0},ULe=(()=>{class i{config;id;option;selected;label;disabled;itemSize;focused;ariaPosInset;ariaSetSize;template;checkIconTemplate;itemCheckboxIconTemplate;onClick=new X;onMouseEnter=new X;constructor(e){this.config=e}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option,selected:this.selected}),e.stopPropagation()}onOptionMouseEnter(e){this.onMouseEnter.emit({originalEvent:e,option:this.option,selected:this.selected})}static \u0275fac=function(t){return new(t||i)(S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{id:"id",option:"option",selected:[2,"selected","selected",Y],label:"label",disabled:[2,"disabled","disabled",Y],itemSize:[2,"itemSize","itemSize",We],focused:[2,"focused","focused",Y],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkIconTemplate:"checkIconTemplate",itemCheckboxIconTemplate:"itemCheckboxIconTemplate"},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[tt],decls:6,vars:28,consts:[["pRipple","","role","option",1,"p-multiselect-item",3,"click","mouseenter","ngStyle","ngClass","id"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"]],template:function(t,r){t&1&&(m(0,"li",0),k("click",function(s){return r.onOptionClick(s)})("mouseenter",function(s){return r.onOptionMouseEnter(s)}),m(1,"div",1)(2,"div",2),v(3,Xke,4,3,"ng-container",3),g()(),v(4,Qke,2,1,"span",3)(5,Zke,1,0,"ng-container",4),g()),t&2&&(f("ngStyle",ne(17,OC,r.itemSize+"px"))("ngClass",Qe(19,jke,r.disabled,r.focused))("id",r.id),G("aria-label",r.label)("aria-setsize",r.ariaSetSize)("aria-posinset",r.ariaPosInset)("aria-selected",r.selected)("data-p-focused",r.focused)("data-p-highlight",r.selected)("data-p-disabled",r.disabled)("aria-checked",r.selected),p(),f("ngClass",ne(22,Gke,r.config.inputStyle()==="filled")),p(),f("ngClass",ne(24,Hke,r.selected)),p(),f("ngIf",r.selected),p(),f("ngIf",!r.template),p(),f("ngTemplateOutlet",r.template)("ngTemplateOutletContext",ne(26,vS,r.option)))},dependencies:()=>[je,rt,mt,De,nn,On],encapsulation:2})}return i})(),SF=(()=>{class i{el;renderer;cd;zone;filterService;config;overlayService;id;ariaLabel;style;styleClass;panelStyle;panelStyleClass;inputId;disabled;readonly;group;filter=!0;filterPlaceHolder;filterLocale;overlayVisible;tabindex=0;variant="outlined";appendTo;dataKey;name;ariaLabelledBy;set displaySelectedLabel(e){this._displaySelectedLabel=e}get displaySelectedLabel(){return this._displaySelectedLabel}set maxSelectedLabels(e){this._maxSelectedLabels=e}get maxSelectedLabels(){return this._maxSelectedLabels}selectionLimit;selectedItemsLabel;showToggleAll=!0;emptyFilterMessage="";emptyMessage="";resetFilterOnHide=!1;dropdownIcon;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";showHeader=!0;filterBy;scrollHeight="200px";lazy=!1;virtualScroll;loading=!1;virtualScrollItemSize;loadingIcon;virtualScrollOptions;overlayOptions;ariaFilterLabel;filterMatchMode="contains";tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;autofocusFilter=!0;display="comma";autocomplete="off";showClear=!1;autofocus;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}set defaultLabel(e){this._defaultLabel=e,console.warn("defaultLabel property is deprecated since 16.6.0, use placeholder instead")}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}get options(){return this._options()}set options(e){ge.deepEquals(this._options(),e)||this._options.set(e)}get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get selectAll(){return this._selectAll}set selectAll(e){this._selectAll=e}focusOnHover=!1;filterFields;selectOnFocus=!1;autoOptionFocus=!0;onChange=new X;onFilter=new X;onFocus=new X;onBlur=new X;onClick=new X;onClear=new X;onPanelShow=new X;onPanelHide=new X;onLazyLoad=new X;onRemove=new X;onSelectAllChange=new X;containerViewChild;overlayViewChild;filterInputChild;focusInputViewChild;itemsViewChild;scroller;lastHiddenFocusableElementOnOverlay;firstHiddenFocusableElementOnOverlay;headerCheckboxViewChild;footerFacet;headerFacet;templates;searchValue;searchTimeout;_selectAll=null;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_defaultLabel;_placeholder=Gi(void 0);_itemSize;_selectionLimit;_disableTooltip=!1;value;_filteredOptions;onModelChange=()=>{};onModelTouched=()=>{};valuesAsString;focus;filtered;itemTemplate;groupTemplate;loaderTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;selectedItemsTemplate;checkIconTemplate;loadingIconTemplate;filterIconTemplate;removeTokenIconTemplate;closeIconTemplate;clearIconTemplate;dropdownIconTemplate;itemCheckboxIconTemplate;headerCheckboxIconTemplate;headerCheckboxFocus;filterOptions;preventModelTouched;preventDocumentDefault;focused=!1;itemsWrapper;_displaySelectedLabel=!0;_maxSelectedLabels=3;modelValue=Gi(null);_filterValue=Gi(null);_options=Gi(null);startRangeIndex=Gi(-1);focusedOptionIndex=Gi(-1);selectedOptions;clickInProgress=!1;get containerClass(){return{"p-multiselect p-component p-inputwrapper":!0,"p-disabled":this.disabled,"p-multiselect-clearable":this.showClear&&!this.disabled,"p-multiselect-chip":this.display==="chip","p-focus":this.focused,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"}}get inputClass(){return{"p-multiselect-label p-inputtext":!0,"p-placeholder":(this.placeholder()||this.defaultLabel)&&(this.label()===this.placeholder()||this.label()===this.defaultLabel),"p-multiselect-label-empty":!this.selectedItemsTemplate&&(this.label()==="p-emptylabel"||this.label().length===0)}}get panelClass(){return{"p-multiselect-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled","p-ripple-disabled":this.config.ripple===!1}}get labelClass(){return{"p-multiselect-label":!0,"p-placeholder":this.label()===this.placeholder()||this.label()===this.defaultLabel,"p-multiselect-label-empty":!this.placeholder()&&!this.defaultLabel&&(!this.modelValue()||this.modelValue().length===0)}}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Di.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Di.EMPTY_FILTER_MESSAGE)}get filled(){return typeof this.modelValue()=="string"?!!this.modelValue():ge.isNotEmpty(this.modelValue())}get isVisibleClearIcon(){return this.modelValue()!=null&&this.modelValue()!==""&&ge.isNotEmpty(this.modelValue())&&this.showClear&&!this.disabled&&this.filled}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}get closeAriaLabel(){return this.config.translation.aria?this.config.translation.aria.close:void 0}get listLabel(){return this.config.getTranslation(Di.ARIA).listLabel}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}visibleOptions=Gr(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),t=ge.isArray(e)&&ge.isObject(e[0]);if(this._filterValue()){let r;if(t?r=this.filterService.filter(e,this.searchFields(),this._filterValue(),this.filterMatchMode,this.filterLocale):r=e.filter(o=>o.toString().toLocaleLowerCase().includes(this._filterValue().toLocaleLowerCase())),this.group){let o=this.options||[],s=[];return o.forEach(a=>{let c=this.getOptionGroupChildren(a).filter(d=>r.includes(d));c.length>0&&s.push(ke(oe({},a),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...c]}))}),this.flatOptions(s)}return r}return e});label=Gr(()=>{let e,t=this.modelValue();if(t&&t.length&&this.displaySelectedLabel){if(ge.isNotEmpty(this.maxSelectedLabels)&&t.length>this.maxSelectedLabels)return this.getSelectedItemsLabel();e="";for(let r=0;r<t.length;r++)r!==0&&(e+=", "),e+=this.getLabelByValue(t[r])}else e=this.placeholder()||this.defaultLabel||"";return e});chipSelectedItems=Gr(()=>ge.isNotEmpty(this.maxSelectedLabels)&&this.modelValue()&&this.modelValue().length>this.maxSelectedLabels?this.modelValue().slice(0,this.maxSelectedLabels):this.modelValue());constructor(e,t,r,o,s,a,l){this.el=e,this.renderer=t,this.cd=r,this.zone=o,this.filterService=s,this.config=a,this.overlayService=l,od(()=>{let c=this.modelValue(),d=this.visibleOptions();d&&ge.isNotEmpty(d)&&(this.optionValue&&this.optionLabel&&c?this.selectedOptions=d.filter(h=>c.includes(h[this.optionLabel])||c.includes(h[this.optionValue])):this.selectedOptions=c,this.cd.markForCheck())})}ngOnInit(){this.id=this.id||Tt(),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}maxSelectionLimitReached(){return ge.isNotEmpty(this.selectionLimit)&&this.modelValue()&&this.modelValue().length===this.selectionLimit}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"checkicon":this.checkIconTemplate=e.template,console.warn("checkicon is deprecated and will removed in v18. Use itemcheckboxicon or headercheckboxicon templates instead.");break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;case"removetokenicon":this.removeTokenIconTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"clearicon":this.clearIconTemplate=e.template;break;case"dropdownicon":this.dropdownIconTemplate=e.template;break;case"itemcheckboxicon":this.itemCheckboxIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild?.alignOverlay()},1)}),this.filtered=!1)}flatOptions(e){return(e||[]).reduce((t,r,o)=>{t.push({optionGroup:r,group:!0,index:o});let s=this.getOptionGroupChildren(r);return s&&s.forEach(a=>t.push(a)),t},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()){this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex());let e=this.getOptionValue(this.visibleOptions()[this.focusedOptionIndex()]);this.onOptionSelect({originalEvent:null,option:[e]})}}updateModel(e,t){this.value=e,this.onModelChange(e),this.modelValue.set(e)}onInputClick(e){e.stopPropagation(),e.preventDefault(),this.focusedOptionIndex.set(-1)}onOptionSelect(e,t=!1,r=-1){let{originalEvent:o,option:s}=e;if(this.disabled||this.isOptionDisabled(s))return;let a=this.isSelected(s),l=null;a?(l=this.modelValue().filter(c=>!ge.equals(c,this.getOptionValue(s),this.equalityKey())),this.onRemove.emit({newValue:this.value,removed:this.getOptionValue(s)})):l=[...this.modelValue()||[],this.getOptionValue(s)],this.updateModel(l,o),r!==-1&&this.focusedOptionIndex.set(r),t&&j.focus(this.focusInputViewChild?.nativeElement),this.onChange.emit({originalEvent:ke(oe({},e),{selected:!e.selected}),value:l,itemValue:s})}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}onOptionSelectRange(e,t=-1,r=-1){if(t===-1&&(t=this.findNearestSelectedOptionIndex(r,!0)),r===-1&&(r=this.findNearestSelectedOptionIndex(t)),t!==-1&&r!==-1){let o=Math.min(t,r),s=Math.max(t,r),a=this.visibleOptions().slice(o,s+1).filter(l=>this.isValidOption(l)).map(l=>this.getOptionValue(l));this.updateModel(a,e)}}searchFields(){return(this.filterBy||this.optionLabel||"label").split(",")}findNearestSelectedOptionIndex(e,t=!1){let r=-1;return this.hasSelectedOption()&&(t?(r=this.findPrevSelectedOptionIndex(e),r=r===-1?this.findNextSelectedOptionIndex(e):r):(r=this.findNextSelectedOptionIndex(e),r=r===-1?this.findPrevSelectedOptionIndex(e):r)),r>-1?r:e}findPrevSelectedOptionIndex(e){let t=this.hasSelectedOption()&&e>0?ge.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidSelectedOption(r)):-1;return t>-1?t:-1}findFirstFocusedOptionIndex(){let e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextSelectedOptionIndex(e){let t=this.hasSelectedOption()&&e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidSelectedOption(r)):-1;return t>-1?t+e+1:-1}equalityKey(){return this.optionValue?null:this.dataKey}hasSelectedOption(){return ge.isNotEmpty(this.modelValue())}isSelectionAllDisabled(){return this.showToggleAll&&ge.isEmpty(this.selectionLimit)}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isOptionGroup(e){return(this.group||this.optionGroupLabel)&&e.optionGroup&&e.group}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionDisabled(e){return this.maxSelectionLimitReached()&&!this.isSelected(e)?!0:this.optionDisabled?ge.resolveFieldData(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}isSelected(e){let t=this.getOptionValue(e);return(this.modelValue()||[]).some(r=>ge.equals(r,t,this.equalityKey()))}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}getOptionIndex(e,t){return this.virtualScrollerDisabled?e:t&&t.getItemOptions(e).index}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(t=>this.isOptionGroup(t)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}getLabelByValue(e){let r=(this.group?this.flatOptions(this._options()):this._options()||[]).find(o=>!this.isOptionGroup(o)&&ge.equals(this.getOptionValue(o),e,this.equalityKey()));return r?this.getOptionLabel(r):null}getSelectedItemsLabel(){let e=/{(.*?)}/,t=this.selectedItemsLabel?this.selectedItemsLabel:this.config.getTranslation(Di.SELECTION_MESSAGE);return e.test(t)?t.replace(t.match(e)[0],this.modelValue().length+""):t}getOptionLabel(e){return this.optionLabel?ge.resolveFieldData(e,this.optionLabel):e&&e.label!=null?e.label:e}getOptionValue(e){return this.optionValue?ge.resolveFieldData(e,this.optionValue):!this.optionValue&&e&&e.value!==void 0?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?ge.resolveFieldData(e,this.optionGroupLabel):e&&e.label!=null?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ge.resolveFieldData(e,this.optionGroupChildren):e.items}onKeyDown(e){if(this.disabled){e.preventDefault();return}let t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if(e.code==="KeyA"&&t){let r=this.visibleOptions().filter(o=>this.isValidOption(o)).map(o=>this.getOptionValue(o));this.updateModel(r,e),e.preventDefault();break}!t&&ge.isPrintableCharacter(e.key)&&(!this.overlayVisible&&this.show(),this.searchOptions(e,e.key),e.preventDefault());break}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onArrowLeftKey(e,t=!1){t&&this.focusedOptionIndex.set(-1)}onArrowDownKey(e){let t=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex(),t),this.changeFocusedOptionIndex(e,t),!this.overlayVisible&&this.show(),e.preventDefault(),e.stopPropagation()}onArrowUpKey(e,t=!1){if(e.altKey&&!t)this.focusedOptionIndex()!==-1&&this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()]),this.overlayVisible&&this.hide(),e.preventDefault();else{let r=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();e.shiftKey&&this.onOptionSelectRange(e,r,this.startRangeIndex()),this.changeFocusedOptionIndex(e,r),!this.overlayVisible&&this.show(),e.preventDefault()}e.stopPropagation()}onHomeKey(e,t=!1){let{currentTarget:r}=e;if(t){let o=r.value.length;r.setSelectionRange(0,e.shiftKey?o:0),this.focusedOptionIndex.set(-1)}else{let o=e.metaKey||e.ctrlKey,s=this.findFirstOptionIndex();e.shiftKey&&o&&this.onOptionSelectRange(e,s,this.startRangeIndex()),this.changeFocusedOptionIndex(e,s),!this.overlayVisible&&this.show()}e.preventDefault()}onEndKey(e,t=!1){let{currentTarget:r}=e;if(t){let o=r.value.length;r.setSelectionRange(e.shiftKey?0:o,o),this.focusedOptionIndex.set(-1)}else{let o=e.metaKey||e.ctrlKey,s=this.findLastFocusedOptionIndex();e.shiftKey&&o&&this.onOptionSelectRange(e,this.startRangeIndex(),s),this.changeFocusedOptionIndex(e,s),!this.overlayVisible&&this.show()}e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onEnterKey(e){this.overlayVisible?this.focusedOptionIndex()!==-1&&(e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex()):this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]})):this.onArrowDownKey(e),e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault()}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onTabKey(e,t=!1){t||(this.overlayVisible&&this.hasFocusableElements()?(j.focus(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault()):(this.focusedOptionIndex()!==-1&&this.onOptionSelect({originalEvent:e,option:this.visibleOptions()[this.focusedOptionIndex()]}),this.overlayVisible&&this.hide(this.filter)))}onShiftKey(){this.startRangeIndex.set(this.focusedOptionIndex())}onContainerClick(e){if(!(this.disabled||this.loading||this.readonly||e.target.isSameNode(this.focusInputViewChild?.nativeElement))){if(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]')){e.preventDefault();return}else if(!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target)){if(this.clickInProgress)return;this.clickInProgress=!0,setTimeout(()=>{this.clickInProgress=!1},150),this.overlayVisible?this.hide(!0):this.show(!0)}this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),this.onClick.emit(e),this.cd.detectChanges()}}onFirstHiddenFocus(e){let t=e.relatedTarget===this.focusInputViewChild?.nativeElement?j.getFirstFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;j.focus(t)}onInputFocus(e){this.focused=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focused=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onFilterInputChange(e){let t=e.target.value;this._filterValue.set(t),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()})}onLastHiddenFocus(e){let t=e.relatedTarget===this.focusInputViewChild?.nativeElement?j.getLastFocusableElement(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;j.focus(t)}onOptionMouseEnter(e,t){this.focusOnHover&&this.changeFocusedOptionIndex(e,t)}onHeaderCheckboxKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"Space":this.onToggleAll(e);break;case"Enter":this.onToggleAll(e);break;default:break}}onremoveTokenIconKeyDown(e,t){if(this.disabled){e.preventDefault();return}switch(e.code){case"Space":case"Enter":case"NumpadEnter":this.removeOption(t,e);break;default:break}e.preventDefault(),e.stopPropagation()}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onToggleAll(e){if(!(this.disabled||this.readonly)){if(this.selectAll!=null)this.onSelectAllChange.emit({originalEvent:e,checked:!this.allSelected()});else{let t=this.getAllVisibleAndNonVisibleOptions().filter(a=>this.isSelected(a)&&(this.optionDisabled?ge.resolveFieldData(a,this.optionDisabled):a&&a.disabled!==void 0?a.disabled:!1)),r=this.allSelected()?this.visibleOptions().filter(a=>!this.isValidOption(a)&&this.isSelected(a)):this.visibleOptions().filter(a=>this.isSelected(a)||this.isValidOption(a)),o=[...t,...r].map(a=>this.getOptionValue(a)),s=[...new Set(o)];this.updateModel(s,e),(!s.length||s.length===this.getAllVisibleAndNonVisibleOptions().length)&&this.onSelectAllChange.emit({originalEvent:e,checked:!!s.length})}this.partialSelected()&&(this.selectedOptions=null,this.cd.markForCheck()),this.onChange.emit({originalEvent:e,value:this.value}),j.focus(this.headerCheckboxViewChild?.nativeElement),this.headerCheckboxFocus=!0,e.preventDefault(),e.stopPropagation()}}changeFocusedOptionIndex(e,t){this.focusedOptionIndex()!==t&&(this.focusedOptionIndex.set(t),this.scrollInView())}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let r=j.findSingle(this.itemsViewChild.nativeElement,`li[id="${t}"]`);r?r.scrollIntoView&&r.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}writeValue(e){this.value=e,!ge.isEmpty(this.selectionLimit)&&ge.isEmpty(this.value)?this.modelValue.set([]):this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}allSelected(){return this.selectAll!==null?this.selectAll:ge.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(e=>this.isOptionGroup(e)||this.isOptionDisabled(e)||this.isSelected(e))}partialSelected(){return this.selectedOptions&&this.selectedOptions.length>0&&this.selectedOptions.length<this.options.length}show(e){this.overlayVisible=!0;let t=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(t),e&&j.focus(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.overlayOptions?.mode==="modal"&&j.unblockBodyScroll(),e&&j.focus(this.focusInputViewChild?.nativeElement),this.onPanelHide.emit(),this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.itemsWrapper=j.findSingle(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-multiselect-items-wrapper"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this._options()&&this._options().length)if(this.virtualScroll){let t=ge.isNotEmpty(this.modelValue())?this.focusedOptionIndex():-1;t!==-1&&this.scroller?.scrollToIndex(t)}else{let t=j.findSingle(this.itemsWrapper,'[data-p-highlight="true"]');t&&t.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.itemsWrapper=null,this.onModelTouched();break}}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue.set(null),this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateModel(null,e),this.selectedOptions=null,this.onClear.emit(),this._disableTooltip=!0,e.stopPropagation()}labelContainerMouseLeave(){this._disableTooltip&&(this._disableTooltip=!1)}removeOption(e,t){let r=this.modelValue().filter(o=>!ge.equals(o,e,this.equalityKey()));this.updateModel(r,t),this.onChange.emit({originalEvent:t,value:r,itemValue:e}),this.onClear.emit(),t&&t.stopPropagation()}findNextItem(e){let t=e.nextElementSibling;return t?j.hasClass(t.children[0],"p-disabled")||j.isHidden(t.children[0])||j.hasClass(t,"p-multiselect-item-group")?this.findNextItem(t):t.children[0]:null}findPrevItem(e){let t=e.previousElementSibling;return t?j.hasClass(t.children[0],"p-disabled")||j.isHidden(t.children[0])||j.hasClass(t,"p-multiselect-item-group")?this.findPrevItem(t):t.children[0]:null}findNextOptionIndex(e){let t=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(r=>this.isValidOption(r)):-1;return t>-1?t+e+1:e}findPrevOptionIndex(e){let t=e>0?ge.findLastIndex(this.visibleOptions().slice(0,e),r=>this.isValidOption(r)):-1;return t>-1?t:e}findLastSelectedOptionIndex(){return this.hasSelectedOption()?ge.findLastIndex(this.visibleOptions(),e=>this.isValidSelectedOption(e)):-1}findLastFocusedOptionIndex(){let e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findLastOptionIndex(){return ge.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}searchOptions(e,t){this.searchValue=(this.searchValue||"")+t;let r=-1,o=!1;return this.focusedOptionIndex()!==-1?(r=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)),r=r===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)):r+this.focusedOptionIndex()):r=this.visibleOptions().findIndex(s=>this.isOptionMatched(s)),r!==-1&&(o=!0),r===-1&&this.focusedOptionIndex()===-1&&(r=this.findFirstFocusedOptionIndex()),r!==-1&&this.changeFocusedOptionIndex(e,r),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=[];for(let t of this.options){let r=this.filterService.filter(this.getOptionGroupChildren(t),this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);r&&r.length&&e.push(ke(oe({},t),{[this.optionGroupChildren]:r}))}this._filteredOptions=e}else this._filteredOptions=this.filterService.filter(this.options,this.searchFields(),this.filterValue,this.filterMatchMode,this.filterLocale);else this._filteredOptions=null}hasFocusableElements(){return j.getFocusableElements(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}static \u0275fac=function(t){return new(t||i)(S(Ze),S(jt),S(we),S(Lt),S(hc),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-multiSelect"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,As,5),ut(o,fc,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.footerFacet=s.first),te(s=ie())&&(r.headerFacet=s.first),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(eNe,5),le(tNe,5),le(iNe,5),le(nNe,5),le(rNe,5),le(oNe,5),le(sNe,5),le(aNe,5),le(lNe,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.overlayViewChild=o.first),te(o=ie())&&(r.filterInputChild=o.first),te(o=ie())&&(r.focusInputViewChild=o.first),te(o=ie())&&(r.itemsViewChild=o.first),te(o=ie())&&(r.scroller=o.first),te(o=ie())&&(r.lastHiddenFocusableElementOnOverlay=o.first),te(o=ie())&&(r.firstHiddenFocusableElementOnOverlay=o.first),te(o=ie())&&(r.headerCheckboxViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(t,r){t&2&&Dn("p-inputwrapper-focus",r.focused||r.overlayVisible)("p-inputwrapper-filled",r.filled)},inputs:{id:"id",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:[2,"disabled","disabled",Y],readonly:[2,"readonly","readonly",Y],group:[2,"group","group",Y],filter:[2,"filter","filter",Y],filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:[2,"overlayVisible","overlayVisible",Y],tabindex:[2,"tabindex","tabindex",We],variant:"variant",appendTo:"appendTo",dataKey:"dataKey",name:"name",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:[2,"selectionLimit","selectionLimit",e=>We(e,null)],selectedItemsLabel:"selectedItemsLabel",showToggleAll:[2,"showToggleAll","showToggleAll",Y],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",Y],dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:[2,"showHeader","showHeader",Y],filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",Y],virtualScroll:[2,"virtualScroll","virtualScroll",Y],loading:[2,"loading","loading",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],loadingIcon:"loadingIcon",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:[2,"autofocusFilter","autofocusFilter",Y],display:"display",autocomplete:"autocomplete",showClear:[2,"showClear","showClear",Y],autofocus:[2,"autofocus","autofocus",Y],autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize",selectAll:"selectAll",focusOnHover:[2,"focusOnHover","focusOnHover",Y],filterFields:"filterFields",selectOnFocus:[2,"selectOnFocus","selectOnFocus",Y],autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",Y]},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad",onRemove:"onRemove",onSelectAllChange:"onSelectAllChange"},features:[et([BLe]),tt],ngContentSelectors:dNe,decls:17,vars:44,consts:[["container",""],["focusInput",""],["elseBlock",""],["overlay",""],["token",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["headerCheckbox",""],["filterInput",""],["scroller",""],["items",""],["emptyFilter",""],["empty",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["role","combobox","pAutoFocus","",3,"focus","blur","keydown","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","autofocus"],[1,"p-multiselect-label-container",3,"mouseleave","pTooltip","tooltipDisabled","tooltipPosition","positionStyle","tooltipStyleClass"],[3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-multiselect-trigger"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["pTemplate","content"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],[1,"p-multiselect-token-label"],[3,"ngClass","styleClass","click","keydown",4,"ngIf"],["class","p-multiselect-token-icon",3,"click","keydown",4,"ngIf"],[3,"click","keydown","ngClass","styleClass"],[1,"p-multiselect-token-icon",3,"click","keydown"],[4,"ngTemplateOutlet"],[3,"styleClass","click",4,"ngIf"],["class","p-multiselect-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-multiselect-clear-icon",3,"click"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-multiselect-trigger-icon",4,"ngIf"],["class","p-multiselect-trigger-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"styleClass"],[1,"p-multiselect-trigger-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper",3,"ngStyle"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link","p-button-icon-only",3,"click"],["class","p-multiselect-close-icon",4,"ngIf"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],["type","checkbox",3,"focus","blur","readonly","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],["class","p-checkbox-icon",4,"ngIf"],[1,"p-checkbox-icon"],[1,"p-multiselect-filter-container"],["type","text","role","searchbox","role","searchbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"input","keydown","click","blur","value","disabled"],["class","p-multiselect-filter-icon",4,"ngIf"],[1,"p-multiselect-filter-icon"],[1,"p-multiselect-close-icon"],[3,"onLazyLoad","items","itemSize","autoSize","tabindex","lazy","options"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-multiselect-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-multiselect-item-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","selected","label","disabled","template","checkIconTemplate","itemCheckboxIconTemplate","itemSize","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-multiselect-empty-message",3,"ngStyle"],[1,"p-multiselect-footer"]],template:function(t,r){if(t&1){let o=L();$i(cNe),m(0,"div",15,0),k("click",function(a){return y(o),w(r.onContainerClick(a))}),m(2,"div",16)(3,"input",17,1),k("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))})("keydown",function(a){return y(o),w(r.onKeyDown(a))}),g()(),m(5,"div",18),k("mouseleave",function(){return y(o),w(r.labelContainerMouseLeave())}),m(6,"div",19),v(7,ANe,3,2,"ng-container",20)(8,xNe,1,0,"ng-container",21),g(),v(9,DNe,3,2,"ng-container",20),g(),m(10,"div",22),v(11,VNe,3,2,"ng-container",23)(12,zNe,2,2,"ng-template",null,2,Bt),g(),m(14,"p-overlay",24,3),Oe("visibleChange",function(a){return y(o),Re(r.overlayVisible,a)||(r.overlayVisible=a),w(a)}),k("onAnimationStart",function(a){return y(o),w(r.onOverlayAnimationStart(a))})("onHide",function(){return y(o),w(r.hide())}),v(16,VLe,12,18,"ng-template",25),g()()}if(t&2){let o,s=He(13);ce(r.styleClass),f("ngClass",r.containerClass)("ngStyle",r.style),G("id",r.id),p(2),G("data-p-hidden-accessible",!0),p(),f("pTooltip",r.tooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass)("autofocus",r.autofocus),G("aria-disabled",r.disabled)("id",r.inputId)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(o=r.overlayVisible)!==null&&o!==void 0?o:!1)("aria-controls",r.overlayVisible?r.id+"_list":null)("tabindex",r.disabled?-1:r.tabindex)("aria-activedescendant",r.focused?r.focusedOptionId:void 0)("value",r.label()||"empty"),p(2),f("pTooltip",r.tooltip)("tooltipDisabled",r._disableTooltip)("tooltipPosition",r.tooltipPosition)("positionStyle",r.tooltipPositionStyle)("tooltipStyleClass",r.tooltipStyleClass),p(),f("ngClass",r.labelClass),p(),f("ngIf",!r.selectedItemsTemplate),p(),f("ngTemplateOutlet",r.selectedItemsTemplate)("ngTemplateOutletContext",Qe(41,pNe,r.selectedOptions,r.removeOption.bind(r))),p(),f("ngIf",r.isVisibleClearIcon),p(2),f("ngIf",r.loading)("ngIfElse",s),p(3),Te("visible",r.overlayVisible),f("options",r.overlayOptions)("target","@parent")("appendTo",r.appendTo)("autoZIndex",r.autoZIndex)("baseZIndex",r.baseZIndex)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}},dependencies:()=>[je,hn,rt,mt,De,O_,Ee,cn,nn,Xs,Zn,On,ol,nl,Ji,Ho,ULe],styles:[`@layer primeng{.p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer;display:flex}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect-token-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),EF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Kf,dt,oo,ln,so,fr,On,ol,nl,Ji,Ho,On,Ha,Kf,dt,so]})}return i})();var GLe=["input"],HLe=(i,n,e,t)=>({"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":n,"p-radiobutton-focused":e,"p-variant-filled":t}),WLe=(i,n,e)=>({"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":n,"p-focus":e}),zLe=(i,n,e)=>({"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":n,"p-radiobutton-label-focus":e});function KLe(i,n){if(i&1){let e=L();m(0,"label",7),k("click",function(r){y(e);let o=u();return w(o.select(r))}),F(1),g()}if(i&2){let e=u(),t=He(3);ce(e.labelStyleClass),f("ngClass",en(6,zLe,t.checked,e.disabled,e.focused)),G("for",e.inputId)("data-pc-section","label"),p(),$(e.label)}}var $Le={provide:fn,useExisting:Zt(()=>RC),multi:!0},JLe=(()=>{class i{accessors=[];add(e,t){this.accessors.push([e,t])}remove(e){this.accessors=this.accessors.filter(t=>t[1]!==e)}select(e){this.accessors.forEach(t=>{this.isSameGroup(t,e)&&t[1]!==e&&t[1].writeValue(e.value)})}isSameGroup(e,t){return e[0].control?e[0].control.root===t.control.control.root&&e[1].name===t.name:!1}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),RC=(()=>{class i{cd;injector;registry;config;value;formControlName;name;disabled;label;variant="outlined";tabindex;inputId;ariaLabelledBy;ariaLabel;style;styleClass;labelStyleClass;autofocus;onClick=new X;onFocus=new X;onBlur=new X;inputViewChild;onModelChange=()=>{};onModelTouched=()=>{};checked;focused;control;constructor(e,t,r,o){this.cd=e,this.injector=t,this.registry=r,this.config=o}ngOnInit(){this.control=this.injector.get(ss),this.checkName(),this.registry.add(this.control,this)}handleClick(e,t,r){this.disabled||(this.select(e),r&&t.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit({originalEvent:e,value:this.value}))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error(`
          If you define both a name and a formControlName attribute on your radio button, their values
          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>
        `)}static \u0275fac=function(t){return new(t||i)(S(we),S(Ur),S(JLe),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-radioButton"]],viewQuery:function(t,r){if(t&1&&le(GLe,5),t&2){let o;te(o=ie())&&(r.inputViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:[2,"disabled","disabled",Y],label:"label",variant:"variant",tabindex:[2,"tabindex","tabindex",We],inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[et([$Le]),tt],decls:7,vars:30,consts:[["input",""],[3,"click","ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio","pAutoFocus","",3,"focus","blur","checked","disabled","value","autofocus"],[3,"ngClass"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"],[3,"click","ngClass"]],template:function(t,r){if(t&1){let o=L();m(0,"div",1),k("click",function(a){y(o);let l=He(3);return w(r.handleClick(a,l,!0))}),m(1,"div",2)(2,"input",3,0),k("focus",function(a){return y(o),w(r.onInputFocus(a))})("blur",function(a){return y(o),w(r.onInputBlur(a))}),g()(),m(4,"div",4),P(5,"span",5),g()(),v(6,KLe,2,10,"label",6)}t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",xn(21,HLe,r.checked,r.disabled,r.focused,r.variant==="filled"||r.config.inputStyle()==="filled")),G("data-pc-name","radiobutton")("data-pc-section","root"),p(),G("data-pc-section","hiddenInputWrapper"),p(),f("checked",r.checked)("disabled",r.disabled)("value",r.value)("autofocus",r.autofocus),G("id",r.inputId)("name",r.name)("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("tabindex",r.tabindex)("data-pc-section","hiddenInput"),p(2),f("ngClass",en(26,WLe,r.checked,r.disabled,r.focused)),G("data-pc-section","input"),p(),G("data-pc-section","icon"),p(),f("ngIf",r.label))},dependencies:[je,rt,De,Zn],encapsulation:2,changeDetection:0})}return i})(),AF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,fr]})}return i})();var xF=(()=>{class i extends Nt{pathId;ngOnInit(){this.pathId="url(#"+Tt()+")"}static \u0275fac=(()=>{let e;return function(r){return(e||(e=lt(i)))(r||i)}})();static \u0275cmp=se({type:i,selectors:[["UploadIcon"]],standalone:!0,features:[Se,Ct],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(t,r){t&1&&(Rt(),m(0,"svg",0)(1,"g"),P(2,"path",1),g(),m(3,"defs")(4,"clipPath",2),P(5,"rect",3),g()()()),t&2&&(ce(r.getClassNames()),G("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),p(),G("clip-path",r.pathId),p(3),f("id",r.pathId))},encapsulation:2})}return i})();var qLe=["advancedfileinput"],YLe=["basicfileinput"],XLe=["content"],QLe=(i,n,e,t,r)=>({$implicit:i,uploadedFiles:n,chooseCallback:e,clearCallback:t,uploadCallback:r}),ZLe=(i,n,e,t,r,o,s,a)=>({$implicit:i,uploadedFiles:n,chooseCallback:e,clearCallback:t,removeUploadedFileCallback:r,removeFileCallback:o,progress:s,messages:a}),eMe=(i,n)=>({"p-focus":i,"p-disabled":n}),tMe=(i,n,e,t)=>({"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":n,"p-focus":e,"p-disabled":t});function iMe(i,n){if(i&1&&P(0,"span",21),i&2){let e=u(3);ce(e.chooseIcon),f("ngClass","p-button-icon p-button-icon-left"),G("aria-label",!0)("data-pc-section","chooseicon")}}function nMe(i,n){i&1&&P(0,"PlusIcon",24),i&2&&(f("styleClass","p-button-icon p-button-icon-left"),G("aria-label",!0)("data-pc-section","chooseicon"))}function rMe(i,n){}function oMe(i,n){i&1&&v(0,rMe,0,0,"ng-template")}function sMe(i,n){if(i&1&&(m(0,"span",25),v(1,oMe,1,0,null,11),g()),i&2){let e=u(4);G("aria-label",!0)("data-pc-section","chooseicon"),p(),f("ngTemplateOutlet",e.chooseIconTemplate)}}function aMe(i,n){if(i&1&&(he(0),v(1,nMe,1,3,"PlusIcon",22)(2,sMe,2,3,"span",23),fe()),i&2){let e=u(3);p(),f("ngIf",!e.chooseIconTemplate),p(),f("ngIf",e.chooseIconTemplate)}}function lMe(i,n){if(i&1&&P(0,"span",28),i&2){let e=u(4);f("ngClass",e.uploadIcon),G("aria-hidden",!0)}}function cMe(i,n){i&1&&P(0,"UploadIcon",24),i&2&&f("styleClass","p-button-icon p-button-icon-left")}function dMe(i,n){}function pMe(i,n){i&1&&v(0,dMe,0,0,"ng-template")}function uMe(i,n){if(i&1&&(m(0,"span",25),v(1,pMe,1,0,null,11),g()),i&2){let e=u(5);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.uploadIconTemplate)}}function hMe(i,n){if(i&1&&(he(0),v(1,cMe,1,1,"UploadIcon",22)(2,uMe,2,2,"span",23),fe()),i&2){let e=u(4);p(),f("ngIf",!e.uploadIconTemplate),p(),f("ngIf",e.uploadIconTemplate)}}function fMe(i,n){if(i&1){let e=L();m(0,"p-button",26),k("onClick",function(){y(e);let r=u(3);return w(r.upload())}),v(1,lMe,1,2,"span",27)(2,hMe,3,2,"ng-container",9),g()}if(i&2){let e=u(3);f("label",e.uploadButtonLabel)("disabled",!e.hasFiles()||e.isFileLimitExceeded())("styleClass",e.uploadStyleClass),p(),f("ngIf",e.uploadIcon),p(),f("ngIf",!e.uploadIcon)}}function mMe(i,n){if(i&1&&P(0,"span",28),i&2){let e=u(4);f("ngClass",e.cancelIcon)}}function gMe(i,n){i&1&&P(0,"TimesIcon",24),i&2&&(f("styleClass","p-button-icon p-button-icon-left"),G("aria-hidden",!0))}function _Me(i,n){}function CMe(i,n){i&1&&v(0,_Me,0,0,"ng-template")}function IMe(i,n){if(i&1&&(m(0,"span",25),v(1,CMe,1,0,null,11),g()),i&2){let e=u(5);G("aria-hidden",!0),p(),f("ngTemplateOutlet",e.cancelIconTemplate)}}function yMe(i,n){if(i&1&&(he(0),v(1,gMe,1,2,"TimesIcon",22)(2,IMe,2,2,"span",23),fe()),i&2){let e=u(4);p(),f("ngIf",!e.cancelIconTemplate),p(),f("ngIf",e.cancelIconTemplate)}}function wMe(i,n){if(i&1){let e=L();m(0,"p-button",26),k("onClick",function(){y(e);let r=u(3);return w(r.clear())}),v(1,mMe,1,1,"span",27)(2,yMe,3,2,"ng-container",9),g()}if(i&2){let e=u(3);f("label",e.cancelButtonLabel)("disabled",!e.hasFiles()||e.uploading)("styleClass",e.cancelStyleClass),p(),f("ngIf",e.cancelIcon),p(),f("ngIf",!e.cancelIcon)}}function vMe(i,n){if(i&1){let e=L();he(0),m(1,"span",17),k("focus",function(){y(e);let r=u(2);return w(r.onFocus())})("blur",function(){y(e);let r=u(2);return w(r.onBlur())})("click",function(){y(e);let r=u(2);return w(r.choose())})("keydown.enter",function(){y(e);let r=u(2);return w(r.choose())}),m(2,"input",7,0),k("change",function(r){y(e);let o=u(2);return w(o.onFileSelect(r))}),g(),v(4,iMe,1,5,"span",18)(5,aMe,3,2,"ng-container",9),m(6,"span",19),F(7),g()(),v(8,fMe,3,5,"p-button",20)(9,wMe,3,5,"p-button",20),fe()}if(i&2){let e=u(2);p(),ce(e.chooseStyleClass),f("ngClass",Qe(16,eMe,e.focus,e.disabled||e.isChooseDisabled())),G("data-pc-section","choosebutton"),p(),f("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),G("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),p(2),f("ngIf",e.chooseIcon),p(),f("ngIf",!e.chooseIcon),p(),G("data-pc-section","choosebuttonlabel"),p(),$(e.chooseButtonLabel),p(),f("ngIf",!e.auto&&e.showUploadButton),p(),f("ngIf",!e.auto&&e.showCancelButton)}}function bMe(i,n){i&1&&ue(0)}function SMe(i,n){i&1&&ue(0)}function EMe(i,n){if(i&1&&P(0,"p-progressBar",29),i&2){let e=u(2);f("value",e.progress)("showValue",!1)}}function AMe(i,n){if(i&1){let e=L();m(0,"div")(1,"img",35),k("error",function(r){y(e);let o=u(5);return w(o.imageError(r))}),g()()}if(i&2){let e=u().$implicit,t=u(4);p(),f("src",e.objectURL,rs)("width",t.previewWidth)}}function xMe(i,n){i&1&&P(0,"TimesIcon")}function TMe(i,n){}function OMe(i,n){i&1&&v(0,TMe,0,0,"ng-template")}function RMe(i,n){if(i&1){let e=L();m(0,"div",32),v(1,AMe,2,2,"div",9),m(2,"div",33),F(3),g(),m(4,"div"),F(5),g(),m(6,"div")(7,"button",34),k("click",function(r){let o=y(e).index,s=u(4);return w(s.remove(r,o))}),v(8,xMe,1,0,"TimesIcon",9)(9,OMe,1,0,null,11),g()()()}if(i&2){let e=n.$implicit,t=u(4);p(),f("ngIf",t.isImage(e)),p(2),$(e.name),p(2),$(t.formatSize(e.size)),p(2),ce(t.removeStyleClass),f("disabled",t.uploading),p(),f("ngIf",!t.cancelIconTemplate),p(),f("ngTemplateOutlet",t.cancelIconTemplate)}}function PMe(i,n){if(i&1&&(m(0,"div"),v(1,RMe,10,8,"div",31),g()),i&2){let e=u(3);p(),f("ngForOf",e.files)}}function DMe(i,n){}function FMe(i,n){if(i&1&&(m(0,"div"),v(1,DMe,0,0,"ng-template",36),g()),i&2){let e=u(3);p(),f("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function kMe(i,n){if(i&1&&(m(0,"div",30),v(1,PMe,2,1,"div",9)(2,FMe,2,2,"div",9),g()),i&2){let e=u(2);p(),f("ngIf",!e.fileTemplate),p(),f("ngIf",e.fileTemplate)}}function NMe(i,n){i&1&&ue(0)}function LMe(i,n){i&1&&ue(0)}function MMe(i,n){if(i&1&&(m(0,"div",37),v(1,LMe,1,0,"ng-container",11),g()),i&2){let e=u(2);p(),f("ngTemplateOutlet",e.emptyTemplate)}}function VMe(i,n){if(i&1){let e=L();m(0,"div",6)(1,"input",7,0),k("change",function(r){y(e);let o=u();return w(o.onFileSelect(r))}),g(),m(3,"div",8),v(4,vMe,10,19,"ng-container",9)(5,bMe,1,0,"ng-container",10)(6,SMe,1,0,"ng-container",11),g(),m(7,"div",12,1),k("dragenter",function(r){y(e);let o=u();return w(o.onDragEnter(r))})("dragleave",function(r){y(e);let o=u();return w(o.onDragLeave(r))})("drop",function(r){y(e);let o=u();return w(o.onDrop(r))}),v(9,EMe,1,2,"p-progressBar",13),P(10,"p-messages",14),v(11,kMe,3,2,"div",15)(12,NMe,1,0,"ng-container",10)(13,MMe,2,1,"div",16),g()()}if(i&2){let e=u();ce(e.styleClass),f("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),G("data-pc-name","fileupload")("data-pc-section","root"),p(),Wn("display","none"),f("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),G("aria-label",e.browseFilesLabel)("title","")("data-pc-section","input"),p(2),G("data-pc-section","buttonbar"),p(),f("ngIf",!e.headerTemplate),p(),f("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",ac(27,QLe,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.upload.bind(e))),p(),f("ngTemplateOutlet",e.toolbarTemplate),p(),G("data-pc-section","content"),p(2),f("ngIf",e.hasFiles()),p(),f("value",e.msgs)("enableService",!1),p(),f("ngIf",e.hasFiles()),p(),f("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",J3(33,ZLe,e.files,e.uploadedFiles,e.choose.bind(e),e.clear.bind(e),e.removeUploadedFile.bind(e),e.remove.bind(e),e.progress,e.msgs)),p(),f("ngIf",e.emptyTemplate&&!e.hasFiles()&&!e.hasUploadedFiles())}}function BMe(i,n){if(i&1&&P(0,"span",28),i&2){let e=u(3);f("ngClass",e.uploadIcon)}}function UMe(i,n){i&1&&P(0,"UploadIcon",24),i&2&&f("styleClass","p-button-icon p-button-icon-left")}function jMe(i,n){}function GMe(i,n){i&1&&v(0,jMe,0,0,"ng-template")}function HMe(i,n){if(i&1&&(m(0,"span",25),v(1,GMe,1,0,null,11),g()),i&2){let e=u(4);p(),f("ngTemplateOutlet",e.uploadIconTemplate)}}function WMe(i,n){if(i&1&&(he(0),v(1,UMe,1,1,"UploadIcon",22)(2,HMe,2,1,"span",23),fe()),i&2){let e=u(3);p(),f("ngIf",!e.uploadIconTemplate),p(),f("ngIf",e.uploadIconTemplate)}}function zMe(i,n){if(i&1&&(he(0),v(1,BMe,1,1,"span",27)(2,WMe,3,2,"ng-container",9),fe()),i&2){let e=u(2);p(),f("ngIf",e.uploadIcon),p(),f("ngIf",!e.uploadIcon)}}function KMe(i,n){if(i&1&&P(0,"span",44),i&2){let e=u(3);f("ngClass",e.chooseIcon)}}function $Me(i,n){i&1&&P(0,"PlusIcon",24),i&2&&(f("styleClass","p-button-icon p-button-icon-left pi"),G("aria-hidden",!0)("data-pc-section","uploadicon"))}function JMe(i,n){}function qMe(i,n){i&1&&v(0,JMe,0,0,"ng-template")}function YMe(i,n){if(i&1&&(m(0,"span",46),v(1,qMe,1,0,null,11),g()),i&2){let e=u(4);G("aria-hidden",!0)("data-pc-section","uploadicon"),p(),f("ngTemplateOutlet",e.chooseIconTemplate)}}function XMe(i,n){if(i&1&&(he(0),v(1,$Me,1,3,"PlusIcon",22)(2,YMe,2,3,"span",45),fe()),i&2){let e=u(3);p(),f("ngIf",!e.chooseIconTemplate),p(),f("ngIf",e.chooseIconTemplate)}}function QMe(i,n){if(i&1&&v(0,KMe,1,1,"span",43)(1,XMe,3,2,"ng-container",9),i&2){let e=u(2);f("ngIf",e.chooseIcon),p(),f("ngIf",!e.chooseIcon)}}function ZMe(i,n){if(i&1&&(m(0,"span",19),F(1),g()),i&2){let e=u(2);G("data-pc-section","label"),p(),$(e.basicButtonLabel)}}function e3e(i,n){if(i&1){let e=L();m(0,"input",47,3),k("change",function(r){y(e);let o=u(2);return w(o.onFileSelect(r))})("focus",function(){y(e);let r=u(2);return w(r.onFocus())})("blur",function(){y(e);let r=u(2);return w(r.onBlur())}),g()}if(i&2){let e=u(2);f("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled),G("aria-label",e.browseFilesLabel)("data-pc-section","input")}}function t3e(i,n){if(i&1){let e=L();m(0,"div",38),P(1,"p-messages",14),m(2,"span",39),k("click",function(){y(e);let r=u();return w(r.onBasicUploaderClick())})("keydown",function(r){y(e);let o=u();return w(o.onBasicKeydown(r))}),v(3,zMe,3,2,"ng-container",40)(4,QMe,2,2,"ng-template",null,2,Bt)(6,ZMe,2,2,"span",41)(7,e3e,2,5,"input",42),g()()}if(i&2){let e=He(5),t=u();G("data-pc-name","fileupload"),p(),f("value",t.msgs)("enableService",!1),p(),ce(t.styleClass),f("ngClass",xn(12,tMe,!t.basicButtonLabel,t.hasFiles(),t.focus,t.disabled))("ngStyle",t.style),G("data-pc-section","choosebutton"),p(),f("ngIf",t.hasFiles()&&!t.auto)("ngIfElse",e),p(3),f("ngIf",t.basicButtonLabel),p(),f("ngIf",!t.hasFiles())}}var bS=(()=>{class i{document;platformId;locale;renderer;el;sanitizer;zone;http;cd;config;name;url;method="post";multiple;accept;disabled;auto;withCredentials;maxFileSize;invalidFileSizeMessageSummary="{0}: Invalid file size, ";invalidFileSizeMessageDetail="maximum upload size is {0}.";invalidFileTypeMessageSummary="{0}: Invalid file type, ";invalidFileTypeMessageDetail="allowed file types: {0}.";invalidFileLimitMessageDetail="limit is {0} at most.";invalidFileLimitMessageSummary="Maximum number of files exceeded, ";style;styleClass;previewWidth=50;chooseLabel;uploadLabel;cancelLabel;chooseIcon;uploadIcon;cancelIcon;showUploadButton=!0;showCancelButton=!0;mode="advanced";headers;customUpload;fileLimit;uploadStyleClass;cancelStyleClass;removeStyleClass;chooseStyleClass;onBeforeUpload=new X;onSend=new X;onUpload=new X;onError=new X;onClear=new X;onRemove=new X;onSelect=new X;onProgress=new X;uploadHandler=new X;onImageError=new X;onRemoveUploadedFile=new X;templates;advancedFileInput;basicFileInput;content;set files(e){this._files=[];for(let t=0;t<e.length;t++){let r=e[t];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[t]))),this._files.push(e[t]))}}get files(){return this._files}get basicButtonLabel(){return this.auto||!this.hasFiles()?this.chooseLabel:this.uploadLabel??this.files[0].name}_files=[];progress=0;dragHighlight;msgs;fileTemplate;headerTemplate;contentTemplate;toolbarTemplate;chooseIconTemplate;uploadIconTemplate;cancelIconTemplate;emptyTemplate;uploadedFileCount=0;focus;uploading;duplicateIEEvent;translationSubscription;dragOverListener;uploadedFiles=[];fileUploadSubcription;formatter;constructor(e,t,r,o,s,a,l,c,d,h){this.document=e,this.platformId=t,this.locale=r,this.renderer=o,this.el=s,this.sanitizer=a,this.zone=l,this.http=c,this.cd=d,this.config=h,this.formatter=new Intl.NumberFormat(this.locale,{maximumFractionDigits:3})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"file":this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template;break;case"chooseicon":this.chooseIconTemplate=e.template;break;case"uploadicon":this.uploadIconTemplate=e.template;break;case"cancelicon":this.cancelIconTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;default:this.fileTemplate=e.template;break}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){bt(this.platformId)&&this.mode==="advanced"&&this.zone.runOutsideAngular(()=>{this.content&&(this.dragOverListener=this.renderer.listen(this.content.nativeElement,"dragover",this.onDragOver.bind(this)))})}getTranslation(e){return this.config.getTranslation(e)}choose(){this.advancedFileInput?.nativeElement.click()}onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.msgs=[],this.multiple||(this.files=[]);let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<t.length;r++){let o=t[r];this.isFileSelected(o)||this.validate(o)&&(this.isImage(o)&&(o.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(t[r]))),this.files.push(t[r]))}this.onSelect.emit({originalEvent:e,files:t,currentFiles:this.files}),this.checkFileLimit(t),this.hasFiles()&&this.auto&&(this.mode!=="advanced"||!this.isFileLimitExceeded())&&this.upload(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1}isIE11(){if(bt(this.platformId))return!!this.document.defaultView.MSInputMethodContext&&!!this.document.documentMode}validate(e){return this.msgs=this.msgs||[],this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):this.maxFileSize&&e.size>this.maxFileSize?(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),!1):!0}isFileTypeValid(e){let t=this.accept?.split(",").map(r=>r.trim());for(let r of t)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return e.indexOf("*")!==-1}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let t=0;t<this.files.length;t++)e.append(this.name,this.files[t],this.files[t].name);this.cancelUploadRequest(),this.fileUploadSubcription=this.http.request(this.method,this.url,{body:e,headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(t=>{switch(t.type){case Xa.Sent:this.onSend.emit({originalEvent:t,formData:e});break;case Xa.Response:this.uploading=!1,this.progress=0,t.status>=200&&t.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:t,files:this.files})):this.onError.emit({files:this.files}),this.uploadedFiles.push(...this.files),this.clear();break;case Xa.UploadProgress:{t.loaded&&(this.progress=Math.round(t.loaded*100/t.total)),this.onProgress.emit({originalEvent:t,progress:this.progress});break}}this.cd.markForCheck()},t=>{this.uploading=!1,this.onError.emit({files:this.files,error:t})})}}clear(){this.files=[],this.uploadedFileCount=0,this.cancelUploadRequest(),this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,t){this.cancelUploadRequest(),this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[t]}),this.files.splice(t,1),this.checkFileLimit(this.files)}removeUploadedFile(e){let t=this.uploadedFiles.splice(e,1)[0];this.uploadedFiles=[...this.uploadedFiles],this.onRemoveUploadedFile.emit({file:t,files:this.uploadedFiles})}cancelUploadRequest(){this.fileUploadSubcription&&(this.fileUploadSubcription.unsubscribe(),this.fileUploadSubcription=void 0)}isFileLimitExceeded(){let t=this.auto?this.files.length:this.files.length+this.uploadedFileCount;return this.fileLimit&&this.fileLimit<=t&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<t}isChooseDisabled(){return this.auto?this.fileLimit&&this.fileLimit<=this.files.length:this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(e){this.msgs??=[];let t=this.msgs.length>0&&this.fileLimit<e.length;(this.isFileLimitExceeded()||t)&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}hasUploadedFiles(){return this.uploadedFiles&&this.uploadedFiles.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(j.addClass(this.content?.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||j.removeClass(this.content?.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){j.removeClass(this.content?.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let t=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||t&&t.length===1)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){let r=this.getTranslation(Di.FILE_SIZE_TYPES);if(e===0)return`0 ${r[0]}`;let o=Math.floor(Math.log(e)/Math.log(1024));return`${this.formatter.format(e/Math.pow(1024,o))} ${r[o]}`}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput?.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault();break}}imageError(e){this.onImageError.emit(e)}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(Di.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(Di.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(Di.CANCEL)}get browseFilesLabel(){return this.config.getTranslation(Di.ARIA)[Di.BROWSE_FILES]}ngOnDestroy(){this.content&&this.content.nativeElement&&this.dragOverListener&&(this.dragOverListener(),this.dragOverListener=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(th),S(jt),S(Ze),S(Dl),S(Lt),S(ti),S(we),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-fileUpload"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(qLe,5),le(YLe,5),le(XLe,5)),t&2){let o;te(o=ie())&&(r.advancedFileInput=o.first),te(o=ie())&&(r.basicFileInput=o.first),te(o=ie())&&(r.content=o.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:[2,"multiple","multiple",Y],accept:"accept",disabled:[2,"disabled","disabled",Y],auto:[2,"auto","auto",Y],withCredentials:[2,"withCredentials","withCredentials",Y],maxFileSize:[2,"maxFileSize","maxFileSize",We],invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:[2,"previewWidth","previewWidth",We],chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:[2,"showUploadButton","showUploadButton",Y],showCancelButton:[2,"showCancelButton","showCancelButton",Y],mode:"mode",headers:"headers",customUpload:[2,"customUpload","customUpload",Y],fileLimit:[2,"fileLimit","fileLimit",e=>We(e,null)],uploadStyleClass:"uploadStyleClass",cancelStyleClass:"cancelStyleClass",removeStyleClass:"removeStyleClass",chooseStyleClass:"chooseStyleClass",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler",onImageError:"onImageError",onRemoveUploadedFile:"onRemoveUploadedFile"},features:[tt],decls:2,vars:2,consts:[["advancedfileinput",""],["content",""],["chooseSection",""],["basicfileinput",""],[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],["type","file",3,"change","multiple","accept","disabled"],[1,"p-fileupload-buttonbar"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],["class","p-fileupload-empty",4,"ngIf"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"focus","blur","click","keydown.enter","ngClass"],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],["type","button",3,"label","disabled","styleClass","onClick",4,"ngIf"],[3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-button-icon p-button-icon-left",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon","p-button-icon-left"],["type","button",3,"onClick","label","disabled","styleClass"],["class","p-button-icon p-button-icon-left",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left",3,"ngClass"],[3,"value","showValue"],[1,"p-fileupload-files"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[1,"p-fileupload-filename"],["type","button","pButton","",1,"p-button-icon-only",3,"click","disabled"],[3,"error","src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload-empty"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"click","keydown","ngClass","ngStyle"],[4,"ngIf","ngIfElse"],["class","p-button-label",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["class","p-button-icon p-button-icon-left pi",3,"ngClass",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["class","p-button-icon p-button-icon-left pi",4,"ngIf"],[1,"p-button-icon","p-button-icon-left","pi"],["type","file",3,"change","focus","blur","accept","multiple","disabled"]],template:function(t,r){t&1&&v(0,VMe,14,42,"div",4)(1,t3e,8,17,"div",5),t&2&&(f("ngIf",r.mode==="advanced"),p(),f("ngIf",r.mode==="basic"))},dependencies:()=>[je,hn,rt,mt,De,pt,sO,Iv,D1,nn,Qs,xF,Ji],styles:[`@layer primeng{.p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}}
`],encapsulation:2,changeDetection:0})}return i})(),TF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,ro,b2,eg,ln,Qs,xF,Ji,dt,ro,b2,eg]})}return i})();var i3e=["*",[["p-header"]],[["p-footer"]]],n3e=["*","p-header","p-footer"];function r3e(i,n){i&1&&ue(0)}function o3e(i,n){if(i&1&&(m(0,"div",8),hi(1,1),v(2,r3e,1,0,"ng-container",6),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.headerTemplate)}}function s3e(i,n){i&1&&ue(0)}function a3e(i,n){if(i&1&&(m(0,"div",9),F(1),v(2,s3e,1,0,"ng-container",6),g()),i&2){let e=u();p(),J(" ",e.header," "),p(),f("ngTemplateOutlet",e.titleTemplate)}}function l3e(i,n){i&1&&ue(0)}function c3e(i,n){if(i&1&&(m(0,"div",10),F(1),v(2,l3e,1,0,"ng-container",6),g()),i&2){let e=u();p(),J(" ",e.subheader," "),p(),f("ngTemplateOutlet",e.subtitleTemplate)}}function d3e(i,n){i&1&&ue(0)}function p3e(i,n){i&1&&ue(0)}function u3e(i,n){if(i&1&&(m(0,"div",11),hi(1,2),v(2,p3e,1,0,"ng-container",6),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.footerTemplate)}}var PW=(()=>{class i{el;header;subheader;set style(e){ge.equals(this._style(),e)||this._style.set(e)}styleClass;headerFacet;footerFacet;templates;headerTemplate;titleTemplate;subtitleTemplate;contentTemplate;footerTemplate;_style=Gi(null);constructor(e){this.el=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"title":this.titleTemplate=e.template;break;case"subtitle":this.subtitleTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}getBlockableElement(){return this.el.nativeElement.children[0]}static \u0275fac=function(t){return new(t||i)(S(Ze))};static \u0275cmp=se({type:i,selectors:[["p-card"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,fc,5),ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.headerFacet=s.first),te(s=ie())&&(r.footerFacet=s.first),te(s=ie())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:n3e,decls:9,vars:10,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(t,r){t&1&&($i(i3e),m(0,"div",0),v(1,o3e,3,1,"div",1),m(2,"div",2),v(3,a3e,3,2,"div",3)(4,c3e,3,2,"div",4),m(5,"div",5),hi(6),v(7,d3e,1,0,"ng-container",6),g(),v(8,u3e,3,1,"div",7),g()()),t&2&&(ce(r.styleClass),f("ngClass","p-card p-component")("ngStyle",r._style()),G("data-pc-name","card"),p(),f("ngIf",r.headerFacet||r.headerTemplate),p(2),f("ngIf",r.header||r.titleTemplate),p(),f("ngIf",r.subheader||r.subtitleTemplate),p(3),f("ngTemplateOutlet",r.contentTemplate),p(),f("ngIf",r.footerFacet||r.footerTemplate))},dependencies:[je,rt,mt,De],styles:[`@layer primeng{.p-card-header img{width:100%}}
`],encapsulation:2,changeDetection:0})}return i})(),OF=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt]})}return i})();var f3e=["input"],m3e=(i,n,e)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":n,"p-focus":e}),g3e={provide:fn,useExisting:Zt(()=>_3e),multi:!0},_3e=(()=>{class i{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new X;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(e){this.cd=e}onClick(e){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(t){return new(t||i)(S(we))};static \u0275cmp=se({type:i,selectors:[["p-inputSwitch"]],viewQuery:function(t,r){if(t&1&&le(f3e,5),t&2){let o;te(o=ie())&&(r.input=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",We],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",Y],readonly:[2,"readonly","readonly",Y],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onChange:"onChange"},features:[et([g3e]),tt],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(t,r){if(t&1){let o=L();m(0,"div",1),k("click",function(a){return y(o),w(r.onClick(a))}),m(1,"div",2)(2,"input",3,0),k("focus",function(){return y(o),w(r.onFocus())})("blur",function(){return y(o),w(r.onBlur())}),g()(),P(4,"span",4),g()}t&2&&(ce(r.styleClass),f("ngClass",en(19,m3e,r.checked(),r.disabled,r.focused))("ngStyle",r.style),G("data-pc-name","inputswitch")("data-pc-section","root"),p(),G("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),p(),f("checked",r.checked())("disabled",r.disabled)("autofocus",r.autofocus),G("id",r.inputId)("aria-checked",r.checked())("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("name",r.name)("tabindex",r.tabindex)("data-pc-section","hiddenInput"),p(2),G("data-pc-section","slider"))},dependencies:[je,De,Zn],styles:[`@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}
`],encapsulation:2,changeDetection:0})}return i})(),DW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,fr]})}return i})();var C3e=["container"],I3e=["resizeHelper"],y3e=["reorderIndicatorUp"],w3e=["reorderIndicatorDown"],v3e=["table"],b3e=["scrollableView"],S3e=["scrollableFrozenView"],E3e=(i,n,e,t,r)=>({"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":n,"p-treetable-resizable":e,"p-treetable-resizable-fit":t,"p-treetable-flex-scrollable":r}),Xd=i=>({$implicit:i}),A3e=(i,n)=>({left:i,width:n}),x3e=i=>({width:i}),PF=()=>({display:"none"});function T3e(i,n){if(i&1&&P(0,"i"),i&2){let e=u(2);ce("p-treetable-loading-icon pi-spin "+e.loadingIcon)}}function O3e(i,n){i&1&&P(0,"SpinnerIcon",24),i&2&&f("spin",!0)("styleClass","p-treetable-loading-icon")}function R3e(i,n){}function P3e(i,n){i&1&&v(0,R3e,0,0,"ng-template")}function D3e(i,n){if(i&1&&(m(0,"span",25),v(1,P3e,1,0,null,26),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.loadingIconTemplate)}}function F3e(i,n){if(i&1&&(he(0),v(1,O3e,1,2,"SpinnerIcon",22)(2,D3e,2,1,"span",23),fe()),i&2){let e=u(2);p(),f("ngIf",!e.loadingIconTemplate),p(),f("ngIf",e.loadingIconTemplate)}}function k3e(i,n){if(i&1&&(m(0,"div",18)(1,"div",19),v(2,T3e,1,2,"i",20)(3,F3e,3,2,"ng-container",21),g()()),i&2){let e=u();p(2),f("ngIf",e.loadingIcon),p(),f("ngIf",!e.loadingIcon)}}function N3e(i,n){i&1&&ue(0)}function L3e(i,n){if(i&1&&(m(0,"div",27),v(1,N3e,1,0,"ng-container",26),g()),i&2){let e=u();p(),f("ngTemplateOutlet",e.captionTemplate)}}function M3e(i,n){i&1&&ue(0)}function V3e(i,n){if(i&1&&v(0,M3e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function B3e(i,n){i&1&&v(0,V3e,1,1,"ng-template",29)}function U3e(i,n){i&1&&ue(0)}function j3e(i,n){if(i&1&&v(0,U3e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function G3e(i,n){i&1&&v(0,j3e,1,1,"ng-template",30)}function H3e(i,n){i&1&&ue(0)}function W3e(i,n){if(i&1&&v(0,H3e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function z3e(i,n){i&1&&v(0,W3e,1,1,"ng-template",31)}function K3e(i,n){i&1&&ue(0)}function $3e(i,n){if(i&1&&v(0,K3e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function J3e(i,n){i&1&&v(0,$3e,1,1,"ng-template",32)}function q3e(i,n){if(i&1){let e=L();m(0,"p-paginator",28),k("onPageChange",function(r){y(e);let o=u();return w(o.onPageChange(r))}),v(1,B3e,1,0,null,21)(2,G3e,1,0,null,21)(3,z3e,1,0,null,21)(4,J3e,1,0,null,21),g()}if(i&2){let e=u();f("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)("styleClass",e.paginatorStyleClass)("locale",e.paginatorLocale),p(),f("ngIf",e.paginatorFirstPageLinkIconTemplate),p(),f("ngIf",e.paginatorPreviousPageLinkIconTemplate),p(),f("ngIf",e.paginatorLastPageLinkIconTemplate),p(),f("ngIf",e.paginatorNextPageLinkIconTemplate)}}function Y3e(i,n){i&1&&ue(0)}function X3e(i,n){i&1&&ue(0)}function Q3e(i,n){i&1&&ue(0)}function Z3e(i,n){if(i&1&&(m(0,"div",33)(1,"table",34,1),v(3,Y3e,1,0,"ng-container",35),m(4,"thead",36),v(5,X3e,1,0,"ng-container",35),g(),P(6,"tbody",37),m(7,"tfoot",38),v(8,Q3e,1,0,"ng-container",35),g()()()),i&2){let e=u();p(),f("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),p(2),f("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",ne(10,Xd,e.columns)),p(2),f("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",ne(12,Xd,e.columns)),p(),f("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate),p(2),f("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",ne(14,Xd,e.columns))}}function e4e(i,n){if(i&1&&P(0,"div",42,3),i&2){let e=u(2);f("ttScrollableView",e.frozenColumns)("frozen",!0)("ngStyle",ne(4,x3e,e.frozenWidth))("scrollHeight",e.scrollHeight)}}function t4e(i,n){if(i&1&&(m(0,"div",39),v(1,e4e,2,6,"div",40),P(2,"div",41,2),g()),i&2){let e=u();p(),f("ngIf",e.frozenColumns||e.frozenBodyTemplate),p(),f("ttScrollableView",e.columns)("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",Qe(5,A3e,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function i4e(i,n){i&1&&ue(0)}function n4e(i,n){if(i&1&&v(0,i4e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorFirstPageLinkIconTemplate)}}function r4e(i,n){i&1&&v(0,n4e,1,1,"ng-template",29)}function o4e(i,n){i&1&&ue(0)}function s4e(i,n){if(i&1&&v(0,o4e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorPreviousPageLinkIconTemplate)}}function a4e(i,n){i&1&&v(0,s4e,1,1,"ng-template",30)}function l4e(i,n){i&1&&ue(0)}function c4e(i,n){if(i&1&&v(0,l4e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorLastPageLinkIconTemplate)}}function d4e(i,n){i&1&&v(0,c4e,1,1,"ng-template",31)}function p4e(i,n){i&1&&ue(0)}function u4e(i,n){if(i&1&&v(0,p4e,1,0,"ng-container",26),i&2){let e=u(3);f("ngTemplateOutlet",e.paginatorNextPageLinkIconTemplate)}}function h4e(i,n){i&1&&v(0,u4e,1,1,"ng-template",32)}function f4e(i,n){if(i&1){let e=L();m(0,"p-paginator",43),k("onPageChange",function(r){y(e);let o=u();return w(o.onPageChange(r))}),v(1,r4e,1,0,null,21)(2,a4e,1,0,null,21)(3,d4e,1,0,null,21)(4,h4e,1,0,null,21),g()}if(i&2){let e=u();f("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)("styleClass",e.paginatorStyleClass)("locale",e.paginatorLocale),p(),f("ngIf",e.paginatorFirstPageLinkIconTemplate),p(),f("ngIf",e.paginatorPreviousPageLinkIconTemplate),p(),f("ngIf",e.paginatorLastPageLinkIconTemplate),p(),f("ngIf",e.paginatorNextPageLinkIconTemplate)}}function m4e(i,n){i&1&&ue(0)}function g4e(i,n){if(i&1&&(m(0,"div",44),v(1,m4e,1,0,"ng-container",26),g()),i&2){let e=u();p(),f("ngTemplateOutlet",e.summaryTemplate)}}function _4e(i,n){i&1&&P(0,"div",45,4),i&2&&f("ngStyle",Ae(1,PF))}function C4e(i,n){i&1&&P(0,"ArrowDownIcon")}function I4e(i,n){}function y4e(i,n){i&1&&v(0,I4e,0,0,"ng-template")}function w4e(i,n){if(i&1&&(m(0,"span",46,5),v(2,C4e,1,0,"ArrowDownIcon",21)(3,y4e,1,0,null,26),g()),i&2){let e=u();f("ngStyle",Ae(3,PF)),p(2),f("ngIf",!e.reorderIndicatorUpIconTemplate),p(),f("ngTemplateOutlet",e.reorderIndicatorUpIconTemplate)}}function v4e(i,n){i&1&&P(0,"ArrowUpIcon")}function b4e(i,n){}function S4e(i,n){i&1&&v(0,b4e,0,0,"ng-template")}function E4e(i,n){if(i&1&&(m(0,"span",47,6),v(2,v4e,1,0,"ArrowUpIcon",21)(3,S4e,1,0,null,26),g()),i&2){let e=u();f("ngStyle",Ae(3,PF)),p(2),f("ngIf",!e.reorderIndicatorDownIconTemplate),p(),f("ngTemplateOutlet",e.reorderIndicatorDownIconTemplate)}}var A4e=["pTreeTableBody",""],x4e=(i,n,e,t)=>({$implicit:i,node:n,rowData:e,columns:t}),T4e=(i,n)=>({$implicit:i,frozen:n});function O4e(i,n){i&1&&ue(0)}function R4e(i,n){if(i&1&&(he(0),v(1,O4e,1,0,"ng-container",2),fe()),i&2){let e=u().$implicit,t=u();p(),f("ngTemplateOutlet",t.template)("ngTemplateOutletContext",xn(2,x4e,e,e.node,e.node.data,t.columns))}}function P4e(i,n){if(i&1&&v(0,R4e,2,7,"ng-container",1),i&2){let e=n.$implicit;f("ngIf",e.visible)}}function D4e(i,n){i&1&&ue(0)}function F4e(i,n){if(i&1&&(he(0),v(1,D4e,1,0,"ng-container",2),fe()),i&2){let e=u();p(),f("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",Qe(2,T4e,e.columns,e.frozen))}}var k4e=["scrollHeader"],N4e=["scrollHeaderBox"],L4e=["scrollBody"],M4e=["scrollTable"],V4e=["loadingTable"],B4e=["scrollFooter"],U4e=["scrollFooterBox"],j4e=["scrollableAligner"],G4e=["scroller"],H4e=["ttScrollableView",""],W4e=i=>({height:i}),FW=(i,n)=>({$implicit:i,options:n}),z4e=i=>({options:i}),K4e=(i,n)=>({"max-height":i,"overflow-y":n}),$4e=()=>({}),J4e=()=>({"background-color":"transparent"});function q4e(i,n){i&1&&ue(0)}function Y4e(i,n){i&1&&ue(0)}function X4e(i,n){i&1&&ue(0)}function Q4e(i,n){if(i&1&&v(0,X4e,1,0,"ng-container",12),i&2){let e=n.$implicit,t=n.options;u(2);let r=He(11);f("ngTemplateOutlet",r)("ngTemplateOutletContext",Qe(2,FW,e,t))}}function Z4e(i,n){i&1&&ue(0)}function eVe(i,n){if(i&1&&v(0,Z4e,1,0,"ng-container",12),i&2){let e=n.options,t=u(3);f("ngTemplateOutlet",t.loaderTemplate)("ngTemplateOutletContext",ne(2,z4e,e))}}function tVe(i,n){i&1&&(he(0),v(1,eVe,1,4,"ng-template",19),fe())}function iVe(i,n){if(i&1){let e=L();m(0,"p-scroller",17,3),k("onLazyLoad",function(r){y(e);let o=u();return w(o.tt.onLazyItemLoad(r))}),v(2,Q4e,1,5,"ng-template",18)(3,tVe,2,0,"ng-container",15),g()}if(i&2){let e=u();st(ne(8,W4e,e.tt.scrollHeight!=="flex"?e.tt.scrollHeight:void 0)),f("items",e.tt.serializedValue)("scrollHeight",e.scrollHeight!=="flex"?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions),p(3),f("ngIf",e.loaderTemplate)}}function nVe(i,n){i&1&&ue(0)}function rVe(i,n){if(i&1&&(he(0),m(1,"div",20,4),v(3,nVe,1,0,"ng-container",12),g(),fe()),i&2){let e=u(),t=He(11);p(),f("ngStyle",Qe(3,K4e,e.tt.scrollHeight!=="flex"?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),p(2),f("ngTemplateOutlet",t)("ngTemplateOutletContext",Qe(7,FW,e.serializedValue,Ae(6,$4e)))}}function oVe(i,n){i&1&&ue(0)}function sVe(i,n){i&1&&P(0,"div",24,6),i&2&&f("ngStyle",Ae(1,J4e))}function aVe(i,n){if(i&1&&(m(0,"table",21,5),v(2,oVe,1,0,"ng-container",12),P(3,"tbody",22),g(),v(4,sVe,2,2,"div",23)),i&2){let e=n.$implicit,t=n.options,r=u();ce(r.tt.tableStyleClass),f("ngClass",t.contentStyleClass)("ngStyle",r.getMergedTableStyles(t.contentStyle)),p(2),f("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",ne(11,Xd,r.columns)),p(),f("pTreeTableBody",r.columns)("pTreeTableBodyTemplate",r.frozen&&r.tt.frozenBodyTemplate||r.tt.bodyTemplate)("serializedNodes",e)("frozen",r.frozen),p(),f("ngIf",r.frozen)}}function lVe(i,n){i&1&&ue(0)}function cVe(i,n){i&1&&ue(0)}function dVe(i,n){if(i&1&&(m(0,"div",25,7)(2,"div",26,8)(4,"table",27),v(5,lVe,1,0,"ng-container",12),m(6,"tfoot",28),v(7,cVe,1,0,"ng-container",12),g()()()()),i&2){let e=u();p(4),f("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle),p(),f("ngTemplateOutlet",e.frozen&&e.tt.frozenColGroupTemplate||e.tt.colGroupTemplate)("ngTemplateOutletContext",ne(6,Xd,e.columns)),p(2),f("ngTemplateOutlet",e.frozen&&e.tt.frozenFooterTemplate||e.tt.footerTemplate)("ngTemplateOutletContext",ne(8,Xd,e.columns))}}var pVe=(i,n)=>({visibility:i,"margin-left":n});function uVe(i,n){i&1&&P(0,"ChevronDownIcon"),i&2&&G("aria-hidden",!0)}function hVe(i,n){i&1&&P(0,"ChevronRightIcon"),i&2&&G("aria-hidden",!0)}function fVe(i,n){if(i&1&&(he(0),v(1,uVe,1,1,"ChevronDownIcon",1)(2,hVe,1,1,"ChevronRightIcon",1),fe()),i&2){let e=u();p(),f("ngIf",e.rowNode.node.expanded),p(),f("ngIf",!e.rowNode.node.expanded)}}function mVe(i,n){}function gVe(i,n){i&1&&v(0,mVe,0,0,"ng-template")}var RF=(()=>{class i{sortSource=new Ue;selectionSource=new Ue;contextMenuSource=new Ue;uiUpdateSource=new Ue;totalRecordsSource=new Ue;sortSource$=this.sortSource.asObservable();selectionSource$=this.selectionSource.asObservable();contextMenuSource$=this.contextMenuSource.asObservable();uiUpdateSource$=this.uiUpdateSource.asObservable();totalRecordsSource$=this.totalRecordsSource.asObservable();onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})(),PC=(()=>{class i{document;renderer;el;cd;zone;tableService;filterService;config;columns;style;styleClass;tableStyle;tableStyleClass;autoLayout;lazy=!1;lazyLoadOnInit=!0;paginator;rows;first=0;pageLinks=5;rowsPerPageOptions;alwaysShowPaginator=!0;paginatorPosition="bottom";paginatorStyleClass;paginatorDropdownAppendTo;currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showJumpToPageDropdown;showFirstLastIcon=!0;showPageLinks=!0;defaultSortOrder=1;sortMode="single";resetPageOnSort=!0;customSort;selectionMode;contextMenuSelection;contextMenuSelectionMode="separate";dataKey;metaKeySelection=!1;compareSelectionBy="deepEquals";rowHover;loading;loadingIcon;showLoader=!0;scrollable;scrollHeight;virtualScroll;virtualScrollItemSize;virtualScrollOptions;virtualScrollDelay=150;frozenWidth;frozenColumns;resizableColumns;columnResizeMode="fit";reorderableColumns;contextMenu;rowTrackBy=(e,t)=>t;filters={};globalFilterFields;filterDelay=300;filterMode="lenient";filterLocale;paginatorLocale;get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get value(){return this._value}set value(e){this._value=e}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}get selectionKeys(){return this._selectionKeys}set selectionKeys(e){this._selectionKeys=e,this.selectionKeysChange.emit(this._selectionKeys)}selectionChange=new X;contextMenuSelectionChange=new X;onFilter=new X;onNodeExpand=new X;onNodeCollapse=new X;onPage=new X;onSort=new X;onLazyLoad=new X;sortFunction=new X;onColResize=new X;onColReorder=new X;onNodeSelect=new X;onNodeUnselect=new X;onContextMenuSelect=new X;onHeaderCheckboxToggle=new X;onEditInit=new X;onEditComplete=new X;onEditCancel=new X;selectionKeysChange=new X;containerViewChild;resizeHelperViewChild;reorderIndicatorUpViewChild;reorderIndicatorDownViewChild;tableViewChild;scrollableViewChild;scrollableFrozenViewChild;templates;_value=[];_virtualRowHeight=28;_selectionKeys;serializedValue;_totalRecords=0;_multiSortMeta;_sortField;_sortOrder=1;filteredNodes;filterTimeout;colGroupTemplate;captionTemplate;headerTemplate;bodyTemplate;footerTemplate;summaryTemplate;emptyMessageTemplate;paginatorLeftTemplate;paginatorRightTemplate;paginatorDropdownItemTemplate;frozenHeaderTemplate;frozenBodyTemplate;frozenFooterTemplate;frozenColGroupTemplate;loadingIconTemplate;reorderIndicatorUpIconTemplate;reorderIndicatorDownIconTemplate;sortIconTemplate;checkboxIconTemplate;headerCheckboxIconTemplate;togglerIconTemplate;paginatorFirstPageLinkIconTemplate;paginatorLastPageLinkIconTemplate;paginatorPreviousPageLinkIconTemplate;paginatorNextPageLinkIconTemplate;lastResizerHelperX;reorderIconWidth;reorderIconHeight;draggedColumn;dropPosition;preventSelectionSetterPropagation;_selection;selectedKeys={};rowTouched;editingCell;editingCellData;editingCellField;editingCellClick;documentEditListener;initialized;toggleRowIndex;ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"loadingicon":this.loadingIconTemplate=e.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=e.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=e.template;break;case"sorticon":this.sortIconTemplate=e.template;break;case"checkboxicon":this.checkboxIconTemplate=e.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=e.template;break;case"togglericon":this.togglerIconTemplate=e.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=e.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=e.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=e.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=e.template;break}})}constructor(e,t,r,o,s,a,l,c){this.document=e,this.renderer=t,this.el=r,this.cd=o,this.zone=s,this.tableService=a,this.filterService=l,this.config=c}ngOnChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,this.sortMode=="single"&&this.sortField?this.sortSingle():this.sortMode=="multiple"&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&this.sortMode==="single"&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,this.sortMode==="multiple"&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateselectedKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,t,r,o){if(t&&t.length)for(let s of t){s.parent=e;let a={node:s,parent:e,level:r,visible:o&&(e?e.expanded:!0)};this.serializedValue.push(a),a.visible&&s.expanded&&this.serializeNodes(s,s.children,r+1,a.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){let t=this.lazy?0:this.first;for(let r=t;r<t+this.rows;r++){let o=e[r];o&&(this.serializedValue.push({node:o,parent:null,level:0,visible:!0}),this.serializeNodes(o,o.children,1,!0))}}}updateselectedKeys(){if(this.dataKey&&this._selection)if(this.selectedKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectedKeys[String(ge.resolveFieldData(e.data,this.dataKey))]=1;else this.selectedKeys[String(ge.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let t=e.originalEvent;if(this.sortMode==="single"&&(this._sortOrder=this.sortField===e.field?this.sortOrder*-1:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.sortMode==="multiple"){let r=t.metaKey||t.ctrlKey,o=this.getSortMeta(e.field);o?r?o.order=o.order*-1:(this._multiSortMeta=[{field:e.field,order:o.order*-1}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(!(!e||e.length===0)){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((t,r)=>{let o=ge.resolveFieldData(t.data,this.sortField),s=ge.resolveFieldData(r.data,this.sortField),a=null;return o==null&&s!=null?a=-1:o!=null&&s==null?a=1:o==null&&s==null?a=0:typeof o=="string"&&typeof s=="string"?a=o.localeCompare(s,void 0,{numeric:!0}):a=o<s?-1:o>s?1:0,this.sortOrder*a});for(let t of e)this.sortNodes(t.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(!(!e||e.length===0)){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((t,r)=>this.multisortField(t,r,this.multiSortMeta,0));for(let t of e)this.sortMultipleNodes(t.children)}}multisortField(e,t,r,o){if(ge.isEmpty(this.multiSortMeta)||ge.isEmpty(r[o]))return 0;let s=ge.resolveFieldData(e.data,r[o].field),a=ge.resolveFieldData(t.data,r[o].field),l=null;if(s==null&&a!=null?l=-1:s!=null&&a==null?l=1:s==null&&a==null&&(l=0),typeof s=="string"||s instanceof String){if(s.localeCompare&&s!=a)return r[o].order*s.localeCompare(a,void 0,{numeric:!0})}else l=s<a?-1:1;return s==a?r.length-1>o?this.multisortField(e,t,r,o+1):0:r[o].order*l}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length){for(let t=0;t<this.multiSortMeta.length;t++)if(this.multiSortMeta[t].field===e)return this.multiSortMeta[t]}return null}isSorted(e){if(this.sortMode==="single")return this.sortField&&this.sortField===e;if(this.sortMode==="multiple"){let t=!1;if(this.multiSortMeta){for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){t=!0;break}}return t}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit(ke(oe(oe({},this.createLazyLoadMetadata()),e),{rows:e.last-e.first}))}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return e==null||e.length==0}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let t=j.getOffset(this.containerViewChild?.nativeElement).left;this.lastResizerHelperX=e.pageX-t+this.containerViewChild?.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let t=j.getOffset(this.containerViewChild?.nativeElement).left;j.addClass(this.containerViewChild?.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild?.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-t+this.containerViewChild?.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,t){let r=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,o=t.offsetWidth,s=o+r,a=t.style.minWidth||15;if(o+r>parseInt(a)){if(this.columnResizeMode==="fit"){let l=t.nextElementSibling;for(;!l.offsetParent;)l=l.nextElementSibling;if(l){let c=l.offsetWidth-r,d=l.style.minWidth||15;if(s>15&&c>parseInt(d))if(this.scrollable){let h=this.findParentScrollableView(t),_=j.findSingle(h,".p-treetable-scrollable-body table")||j.findSingle(h,".p-scroller-viewport table"),C=j.findSingle(h,"table.p-treetable-scrollable-header-table"),I=j.findSingle(h,"table.p-treetable-scrollable-footer-table"),b=j.index(t);this.resizeColGroup(C,b,s,c),this.resizeColGroup(_,b,s,c),this.resizeColGroup(I,b,s,c)}else t.style.width=s+"px",l&&(l.style.width=c+"px")}}else if(this.columnResizeMode==="expand")if(this.scrollable){let l=this.findParentScrollableView(t),c=j.findSingle(l,".p-treetable-scrollable-body")||j.findSingle(l,".p-scroller-viewport"),d=j.findSingle(l,".p-treetable-scrollable-header"),h=j.findSingle(l,".p-treetable-scrollable-footer"),_=j.findSingle(l,".p-treetable-scrollable-body table")||j.findSingle(l,".p-scroller-viewport table"),C=j.findSingle(l,"table.p-treetable-scrollable-header-table"),I=j.findSingle(l,"table.p-treetable-scrollable-footer-table"),b=j.index(t),E=t?_.offsetWidth+r:s,R=t?C.offsetWidth+r:s,T=this.containerViewChild?.nativeElement.offsetWidth>=E,A=(U,z,ee,re)=>{U&&z&&(U.style.width=re?ee+j.calculateScrollbarWidth(c)+"px":"auto",z.style.width=ee+"px")};A(c,_,E,T),A(d,C,R,T),A(h,I,R,T),this.resizeColGroup(C,b,s,null),this.resizeColGroup(_,b,s,null),this.resizeColGroup(I,b,s,null)}else{this.tableViewChild.nativeElement.style.width=this.tableViewChild?.nativeElement.offsetWidth+r+"px",t.style.width=s+"px";let l=this.tableViewChild?.nativeElement.style.width;this.containerViewChild.nativeElement.style.width=l+"px"}this.onColResize.emit({element:t,delta:r})}this.resizeHelperViewChild.nativeElement.style.display="none",j.removeClass(this.containerViewChild?.nativeElement,"p-unselectable-text")}findParentScrollableView(e){if(e){let t=e.parentElement;for(;t&&!j.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}else return null}resizeColGroup(e,t,r,o){if(e){let s=e.children[0].nodeName==="COLGROUP"?e.children[0]:null;if(s){let a=s.children[t],l=a.nextElementSibling;a.style.width=r+"px",l&&o&&(l.style.width=o+"px")}else throw"Scrollable tables require a colgroup to support resizable columns"}}onColumnDragStart(e,t){this.reorderIconWidth=j.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild?.nativeElement),this.reorderIconHeight=j.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild?.nativeElement),this.draggedColumn=t,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,t){if(this.reorderableColumns&&this.draggedColumn&&t){e.preventDefault();let r=j.getOffset(this.containerViewChild?.nativeElement),o=j.getOffset(t);if(this.draggedColumn!=t){let s=o.left-r.left,a=r.top-o.top,l=o.left+t.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=o.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=o.top-r.top+t.offsetHeight+"px",e.pageX>l?(this.reorderIndicatorUpViewChild.nativeElement.style.left=s+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=s+t.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=s-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=s-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,t){if(e.preventDefault(),this.draggedColumn){let r=j.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),o=j.indexWithinGroup(t,"ttreorderablecolumn"),s=r!=o;s&&(o-r==1&&this.dropPosition===-1||r-o==1&&this.dropPosition===1)&&(s=!1),s&&o<r&&this.dropPosition===1&&(o=o+1),s&&o>r&&this.dropPosition===-1&&(o=o-1),s&&(ge.reorderArray(this.columns,r,o),this.onColReorder.emit({dragIndex:r,dropIndex:o,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let t=e.originalEvent.target.nodeName;if(!(t=="INPUT"||t=="BUTTON"||t=="A"||j.hasClass(e.originalEvent.target,"p-clickable"))){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let r=e.rowNode,o=this.isSelected(r.node),s=this.rowTouched?!1:this.metaKeySelection,a=this.dataKey?String(ge.resolveFieldData(r.node.data,this.dataKey)):null;if(s){let l=e.originalEvent,c=l.metaKey||l.ctrlKey;if(o&&c){if(this.isSingleSelectionMode())this._selection=null,this.selectedKeys={},this.selectionChange.emit(null);else{let d=this.findIndexInSelection(r.node);this._selection=this.selection.filter((h,_)=>_!=d),this.selectionChange.emit(this.selection),a&&delete this.selectedKeys[a]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=r.node,this.selectionChange.emit(r.node),a&&(this.selectedKeys={},this.selectedKeys[a]=1)):this.isMultipleSelectionMode()&&(c?this._selection=this.selection||[]:(this._selection=[],this.selectedKeys={}),this._selection=[...this.selection,r.node],this.selectionChange.emit(this.selection),a&&(this.selectedKeys[a]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex})}else if(this.selectionMode==="single")o?(this._selection=null,this.selectedKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})):(this._selection=r.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),a&&(this.selectedKeys={},this.selectedKeys[a]=1));else if(this.selectionMode==="multiple")if(o){let l=this.findIndexInSelection(r.node);this._selection=this.selection.filter((c,d)=>d!=l),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"}),a&&delete this.selectedKeys[a]}else this._selection=this.selection?[...this.selection,r.node]:[r.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),a&&(this.selectedKeys[a]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){let t=e.rowNode.node;if(this.contextMenuSelectionMode==="separate")this.contextMenuSelection=t,this.contextMenuSelectionChange.emit(t),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:t}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(t);else if(this.contextMenuSelectionMode==="joint"){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(t),o=this.dataKey?String(ge.resolveFieldData(t.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=t,this.selectionChange.emit(t)):this.isMultipleSelectionMode()&&(this.selection=[t],this.selectionChange.emit(this.selection)),o&&(this.selectedKeys[o]=1)),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:t})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let t=e.rowNode.node;this.isSelected(t)?(this.propagateSelectionDown(t,!1),e.rowNode.parent&&this.propagateSelectionUp(t.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.propagateSelectionDown(t,!0),e.rowNode.parent&&this.propagateSelectionUp(t.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:t})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,t){let r=this.filteredNodes||this.value;this._selection=t&&r?r.slice():[],this.toggleAll(t),t||(this._selection=[],this.selectedKeys={}),this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:t})}toggleAll(e){let t=this.filteredNodes||this.value;if(this.selectionKeys){if(t&&t.length){for(let r of t)this.propagateDown(r,e);this.selectionKeysChange.emit(this.selectionKeys)}}else if(t&&t.length)for(let r of t)this.propagateSelectionDown(r,e)}propagateSelectionUp(e,t){if(e.children&&e.children.length){let o=0,s=!1,a=this.dataKey?String(ge.resolveFieldData(e.data,this.dataKey)):null;for(let l of e.children)this.isSelected(l)?o++:l.partialSelected&&(s=!0);if(t&&o==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,a&&(this.selectedKeys[a]=1);else{if(!t){let l=this.findIndexInSelection(e);l>=0&&(this._selection=this.selection.filter((c,d)=>d!=l),a&&delete this.selectedKeys[a])}s||o>0&&o!=e.children.length?e.partialSelected=!0:e.partialSelected=!1}}let r=e.parent;e.checked=t,r&&this.propagateSelectionUp(r,t)}propagateSelectionDown(e,t){let r=this.findIndexInSelection(e),o=this.dataKey?String(ge.resolveFieldData(e.data,this.dataKey)):null;if(t&&r==-1?(this._selection=[...this.selection||[],e],o&&(this.selectedKeys[o]=1)):!t&&r>-1&&(this._selection=this.selection.filter((s,a)=>a!=r),o&&delete this.selectedKeys[o]),e.partialSelected=!1,e.checked=t,e.children&&e.children.length)for(let s of e.children)this.propagateSelectionDown(s,t)}isSelected(e){return e&&this.selection?this.dataKey?e.hasOwnProperty("checked")?e.checked:this.selectedKeys[ge.resolveFieldData(e.data,this.dataKey)]!==void 0:Array.isArray(this.selection)?this.findIndexInSelection(e)>-1:this.equals(e,this.selection):!1}isNodeSelected(e){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.nodeKey(e)]?.checked===!0:!1}isNodePartialSelected(e){return this.selectionMode&&this.selectionKeys?this.selectionKeys[this.nodeKey(e)]?.partialChecked===!0:!1}nodeKey(e){return ge.resolveFieldData(e,this.dataKey)||ge.resolveFieldData(e?.data,this.dataKey)}toggleCheckbox(e){let{rowNode:t,check:r,originalEvent:o}=e,s=t.node;this.selectionKeys?(this.propagateDown(s,r),s.parent&&this.propagateUp(s.parent,r),this.selectionKeysChange.emit(this.selectionKeys)):this.toggleNodeWithCheckbox({originalEvent:o,rowNode:t}),this.tableService.onSelectionChange()}propagateDown(e,t){if(t?this.selectionKeys[this.nodeKey(e)]={checked:!0,partialChecked:!1}:delete this.selectionKeys[this.nodeKey(e)],e.children&&e.children.length)for(let r of e.children)this.propagateDown(r,t)}propagateUp(e,t){let r=0,o=!1;for(let a of e.children)this.selectionKeys[this.nodeKey(a)]&&this.selectionKeys[this.nodeKey(a)].checked?r++:this.selectionKeys[this.nodeKey(a)]&&this.selectionKeys[this.nodeKey(a)].partialChecked&&(o=!0);t&&r===e.children.length?this.selectionKeys[this.nodeKey(e)]={checked:!0,partialChecked:!1}:(t||delete this.selectionKeys[this.nodeKey(e)],o||r>0&&r!==e.children.length?this.selectionKeys[this.nodeKey(e)]={checked:!1,partialChecked:!0}:this.selectionKeys[this.nodeKey(e)]={checked:!1,partialChecked:!1});let s=e.parent;s&&this.propagateUp(s,t)}findIndexInSelection(e){let t=-1;if(this.selection&&this.selection.length){for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){t=r;break}}return t}isSingleSelectionMode(){return this.selectionMode==="single"}isMultipleSelectionMode(){return this.selectionMode==="multiple"}equals(e,t){return this.compareSelectionBy==="equals"?ge.equals(e,t):ge.equals(e.data,t.data,this.dataKey)}filter(e,t,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[t]&&delete this.filters[t]:this.filters[t]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,t){this.filter(e,"global",t)}isFilterBlank(e){return e!=null?!!(typeof e=="string"&&e.trim().length==0||Array.isArray(e)&&e.length==0):!0}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(!this.hasFilter())this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0);else{let t;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");t=this.globalFilterFields||this.columns}this.filteredNodes=[];let r=this.filterMode==="strict",o=!1;for(let s of this.value){let a=oe({},s),l=!0,c=!1,d;for(let _ in this.filters)if(this.filters.hasOwnProperty(_)&&_!=="global"){let C=this.filters[_],I=_,b=C.value,E=C.matchMode||"startsWith",R=this.filterService.filters[E];if(d={filterField:I,filterValue:b,filterConstraint:R,isStrictMode:r},(r&&!(this.findFilteredNodes(a,d)||this.isFilterMatched(a,d))||!r&&!(this.isFilterMatched(a,d)||this.findFilteredNodes(a,d)))&&(l=!1),!l)break}if(this.filters.global&&!c&&t){let _=oe({},a),C,I=this.filters.global.value,b=this.filterService.filters[this.filters.global.matchMode];d={filterField:C,filterValue:I,filterConstraint:b,isStrictMode:r,globalFilterFieldsArray:t},(r&&(this.findFilteredNodes(_,d)||this.isFilterMatched(_,d))||!r&&(this.isFilterMatched(_,d)||this.findFilteredNodes(_,d)))&&(c=!0,a=_)}let h=l;this.filters.global&&(h=l&&c),h&&this.filteredNodes.push(a),o=o||!l||c||l&&this.filteredNodes.length>0||!c&&this.filteredNodes.length===0}o||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}this.cd.markForCheck()}this.first=0;let e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,t){if(e){let r=!1;if(e.children){let o=[...e.children];e.children=[];for(let s of o){let a=oe({},s);this.isFilterMatched(a,t)&&(r=!0,e.children.push(a))}}if(r)return!0}}isFilterMatched(e,t){let{filterField:r,filterValue:o,filterConstraint:s,isStrictMode:a,globalFilterFieldsArray:l}=t,c=!1,d=h=>s(ge.resolveFieldData(e.data,h),o,this.filterLocale);return c=l?.length?l.some(h=>d(h.field||h)):d(r),(!c||a&&!this.isNodeLeaf(e))&&(c=this.findFilteredNodes(e,{filterField:r,filterValue:o,filterConstraint:s,isStrictMode:a,globalFilterFieldsArray:l})||c),c}isNodeLeaf(e){return e.leaf===!1?!1:!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let t in this.filters)if(this.filters.hasOwnProperty(t)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,t,r){this.editingCell=e,this.editingCellData=t,this.editingCellField=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&j.find(this.editingCell,".ng-invalid.ng-dirty").length===0}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(j.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}static \u0275fac=function(t){return new(t||i)(S(At),S(jt),S(Ze),S(we),S(Lt),S(RF),S(hc),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-treeTable"]],contentQueries:function(t,r,o){if(t&1&&ut(o,Ee,4),t&2){let s;te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&(le(C3e,5),le(I3e,5),le(y3e,5),le(w3e,5),le(v3e,5),le(b3e,5),le(S3e,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.resizeHelperViewChild=o.first),te(o=ie())&&(r.reorderIndicatorUpViewChild=o.first),te(o=ie())&&(r.reorderIndicatorDownViewChild=o.first),te(o=ie())&&(r.tableViewChild=o.first),te(o=ie())&&(r.scrollableViewChild=o.first),te(o=ie())&&(r.scrollableFrozenViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:[2,"autoLayout","autoLayout",Y],lazy:[2,"lazy","lazy",Y],lazyLoadOnInit:[2,"lazyLoadOnInit","lazyLoadOnInit",Y],paginator:[2,"paginator","paginator",Y],rows:[2,"rows","rows",We],first:[2,"first","first",We],pageLinks:[2,"pageLinks","pageLinks",We],rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:[2,"alwaysShowPaginator","alwaysShowPaginator",Y],paginatorPosition:"paginatorPosition",paginatorStyleClass:"paginatorStyleClass",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[2,"showCurrentPageReport","showCurrentPageReport",Y],showJumpToPageDropdown:[2,"showJumpToPageDropdown","showJumpToPageDropdown",Y],showFirstLastIcon:[2,"showFirstLastIcon","showFirstLastIcon",Y],showPageLinks:[2,"showPageLinks","showPageLinks",Y],defaultSortOrder:[2,"defaultSortOrder","defaultSortOrder",We],sortMode:"sortMode",resetPageOnSort:[2,"resetPageOnSort","resetPageOnSort",Y],customSort:[2,"customSort","customSort",Y],selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:[2,"metaKeySelection","metaKeySelection",Y],compareSelectionBy:"compareSelectionBy",rowHover:[2,"rowHover","rowHover",Y],loading:[2,"loading","loading",Y],loadingIcon:"loadingIcon",showLoader:[2,"showLoader","showLoader",Y],scrollable:[2,"scrollable","scrollable",Y],scrollHeight:"scrollHeight",virtualScroll:[2,"virtualScroll","virtualScroll",Y],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",We],virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:[2,"virtualScrollDelay","virtualScrollDelay",We],frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:[2,"resizableColumns","resizableColumns",Y],columnResizeMode:"columnResizeMode",reorderableColumns:[2,"reorderableColumns","reorderableColumns",Y],contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:[2,"filterDelay","filterDelay",We],filterMode:"filterMode",filterLocale:"filterLocale",paginatorLocale:"paginatorLocale",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",value:"value",virtualRowHeight:"virtualRowHeight",selectionKeys:"selectionKeys"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",selectionKeysChange:"selectionKeysChange"},features:[et([RF]),tt,Yi],decls:12,vars:20,consts:[["container",""],["table",""],["scrollableView",""],["scrollableFrozenView",""],["resizeHelper",""],["reorderIndicatorUp",""],["reorderIndicatorDown",""],["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper",3,"ngStyle",4,"ngIf"],["class","p-treetable-reorder-indicator-up",3,"ngStyle",4,"ngIf"],["class","p-treetable-reorder-indicator-down",3,"ngStyle",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-treetable-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-treetable-loading-icon"],[4,"ngTemplateOutlet"],[1,"p-treetable-header"],["styleClass","p-paginator-top",3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],[1,"p-treetable-wrapper"],["role","table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",1,"p-treetable-thead"],["role","rowgroup",1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],["role","rowgroup",1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["styleClass","p-paginator-bottom",3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",3,"ngStyle"],[1,"p-treetable-reorder-indicator-up",3,"ngStyle"],[1,"p-treetable-reorder-indicator-down",3,"ngStyle"]],template:function(t,r){t&1&&(m(0,"div",7,0),v(2,k3e,4,2,"div",8)(3,L3e,2,1,"div",9)(4,q3e,5,21,"p-paginator",10)(5,Z3e,9,16,"div",11)(6,t4e,4,8,"div",12)(7,f4e,5,21,"p-paginator",13)(8,g4e,2,1,"div",14)(9,_4e,2,2,"div",15)(10,w4e,4,4,"span",16)(11,E4e,4,4,"span",17),g()),t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",ac(14,E3e,r.rowHover||r.selectionMode==="single"||r.selectionMode==="multiple",r.autoLayout,r.resizableColumns,r.resizableColumns&&r.columnResizeMode==="fit",r.scrollable&&r.scrollHeight==="flex")),p(2),f("ngIf",r.loading&&r.showLoader),p(),f("ngIf",r.captionTemplate),p(),f("ngIf",r.paginator&&(r.paginatorPosition==="top"||r.paginatorPosition=="both")),p(),f("ngIf",!r.scrollable),p(),f("ngIf",r.scrollable),p(),f("ngIf",r.paginator&&(r.paginatorPosition==="bottom"||r.paginatorPosition=="both")),p(),f("ngIf",r.summaryTemplate),p(),f("ngIf",r.resizableColumns),p(),f("ngIf",r.reorderableColumns),p(),f("ngIf",r.reorderableColumns))},dependencies:()=>[je,rt,mt,De,Mw,Ee,Us,$f,Jf,_Ve,kW],styles:[`@layer primeng{.p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden;flex-shrink:0}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}}
`],encapsulation:2})}return i})(),kW=(()=>{class i{tt;treeTableService;cd;columns;template;frozen;serializedNodes;scrollerOptions;subscription;constructor(e,t,r){this.tt=e,this.treeTableService=t,this.cd=r,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,t){return this.tt.virtualScroll?(t=t||this.scrollerOptions,t?t[e]:null):null}getRowIndex(e){let t=this.getScrollerOption("getItemOptions");return t?t(e).index:e}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(PC),S(RF),S(we))};static \u0275cmp=se({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:[0,"pTreeTableBody","columns"],template:[0,"pTreeTableBodyTemplate","template"],frozen:[2,"frozen","frozen",Y],serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},features:[tt],attrs:A4e,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){t&1&&v(0,P4e,1,1,"ng-template",0)(1,F4e,2,5,"ng-container",1),t&2&&(f("ngForOf",r.serializedNodes||r.tt.serializedValue)("ngForTrackBy",r.tt.rowTrackBy),p(),f("ngIf",r.tt.isEmpty()))},dependencies:[hn,rt,mt],encapsulation:2})}return i})(),_Ve=(()=>{class i{platformId;renderer;tt;el;zone;columns;frozen;scrollHeaderViewChild;scrollHeaderBoxViewChild;scrollBodyViewChild;scrollTableViewChild;scrollLoadingTableViewChild;scrollFooterViewChild;scrollFooterBoxViewChild;scrollableAlignerViewChild;scroller;headerScrollListener;bodyScrollListener;footerScrollListener;frozenSiblingBody;totalRecordsSubscription;_scrollHeight;preventBodyScrollPropagation;getMergedTableStyles(e){return oe(oe({},this.tt.tableStyle),e)}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,e!=null&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}constructor(e,t,r,o,s){this.platformId=e,this.renderer=t,this.tt=r,this.el=o,this.zone=s}ngAfterViewInit(){if(bt(this.platformId)){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=j.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&j.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;e&&(this.tt.virtualScroll?this.frozenSiblingBody=j.findSingle(e,".p-scroller-viewport"):this.frozenSiblingBody=j.findSingle(e,".p-treetable-scrollable-body"));let t=j.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=t+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=t+"px")}this.bindEvents()}}bindEvents(){bt(this.platformId)&&this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.renderer.listen(this.scrollHeaderBoxViewChild?.nativeElement,"scroll",this.onHeaderScroll.bind(this))),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.renderer.listen(this.scrollFooterViewChild.nativeElement,"scroll",this.onFooterScroll.bind(this))),this.frozen||(this.tt.virtualScroll?this.bodyScrollListener=this.renderer.listen((this.scroller?.getElementRef()).nativeElement,"scroll",this.onBodyScroll.bind(this)):this.bodyScrollListener=this.renderer.listen(this.scrollBodyViewChild?.nativeElement,"scroll",this.onBodyScroll.bind(this)))})}unbindEvents(){bt(this.platformId)&&(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.headerScrollListener&&(this.headerScrollListener(),this.headerScrollListener=null),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.footerScrollListener&&(this.footerScrollListener(),this.footerScrollListener=null),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null),this.scroller&&this.scroller.getElementRef()&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null))}onHeaderScroll(){let e=this.scrollHeaderViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){let e=this.scrollFooterViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){if(this.preventBodyScrollPropagation){this.preventBodyScrollPropagation=!1;return}this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop)}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild?.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}static \u0275fac=function(t){return new(t||i)(S(ai),S(jt),S(PC),S(Ze),S(Lt))};static \u0275cmp=se({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(t,r){if(t&1&&(le(k4e,5),le(N4e,5),le(L4e,5),le(M4e,5),le(V4e,5),le(B4e,5),le(U4e,5),le(j4e,5),le(G4e,5)),t&2){let o;te(o=ie())&&(r.scrollHeaderViewChild=o.first),te(o=ie())&&(r.scrollHeaderBoxViewChild=o.first),te(o=ie())&&(r.scrollBodyViewChild=o.first),te(o=ie())&&(r.scrollTableViewChild=o.first),te(o=ie())&&(r.scrollLoadingTableViewChild=o.first),te(o=ie())&&(r.scrollFooterViewChild=o.first),te(o=ie())&&(r.scrollFooterBoxViewChild=o.first),te(o=ie())&&(r.scrollableAlignerViewChild=o.first),te(o=ie())&&(r.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{columns:[0,"ttScrollableView","columns"],frozen:[2,"frozen","frozen",Y],scrollHeight:"scrollHeight"},features:[tt],attrs:H4e,decls:13,vars:13,consts:[["scrollHeader",""],["scrollHeaderBox",""],["buildInItems",""],["scroller",""],["scrollBody",""],["scrollTable",""],["scrollableAligner",""],["scrollFooter",""],["scrollFooterBox",""],[1,"p-treetable-scrollable-header"],[1,"p-treetable-scrollable-header-box"],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"onLazyLoad","items","scrollHeight","itemSize","lazy","options"],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["role","table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[1,"p-treetable-scrollable-footer"],[1,"p-treetable-scrollable-footer-box"],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-treetable-tfoot"]],template:function(t,r){t&1&&(m(0,"div",9,0)(2,"div",10,1)(4,"table",11),v(5,q4e,1,0,"ng-container",12),m(6,"thead",13),v(7,Y4e,1,0,"ng-container",12),g()()()(),v(8,iVe,4,10,"p-scroller",14)(9,rVe,4,10,"ng-container",15)(10,aVe,5,13,"ng-template",null,2,Bt)(12,dVe,8,10,"div",16)),t&2&&(p(4),f("ngClass",r.tt.tableStyleClass)("ngStyle",r.tt.tableStyle),p(),f("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",ne(9,Xd,r.columns)),p(2),f("ngTemplateOutlet",r.frozen&&r.tt.frozenHeaderTemplate||r.tt.headerTemplate)("ngTemplateOutletContext",ne(11,Xd,r.columns)),p(),f("ngIf",r.tt.virtualScroll),p(),f("ngIf",!r.tt.virtualScroll),p(3),f("ngIf",r.tt.footerTemplate))},dependencies:[je,rt,mt,De,Ee,Xs,kW],encapsulation:2})}return i})();var NW=(()=>{class i{tt;config;rowNode;constructor(e,t){this.tt=e,this.config=t}get toggleButtonAriaLabel(){return this.config.translation?this.rowNode.expanded?this.config.translation.aria.collapseRow:this.config.translation.aria.expandRow:void 0}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}static \u0275fac=function(t){return new(t||i)(S(PC),S(Ht))};static \u0275cmp=se({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:3,vars:12,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click","ngStyle"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){t&1&&(m(0,"button",0),k("click",function(s){return r.onClick(s)}),v(1,fVe,3,2,"ng-container",1)(2,gVe,1,0,null,2),g()),t&2&&(f("ngStyle",Qe(7,pVe,r.rowNode.node.leaf===!1||r.rowNode.node.children&&r.rowNode.node.children.length?"visible":"hidden",r.rowNode.level*16+"px")),G("data-pc-section","rowtoggler")("data-pc-group-section","rowactionbutton")("aria-label",r.toggleButtonAriaLabel),p(),f("ngIf",!r.tt.togglerIconTemplate),p(),f("ngTemplateOutlet",r.tt.togglerIconTemplate)("ngTemplateOutletContext",ne(10,Xd,r.rowNode.node.expanded)))},dependencies:()=>[rt,mt,De,nn,Ho,rl],encapsulation:2})}return i})(),LW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,Vw,ln,so,Us,$f,Jf,k_,L_,N_,On,Ha,Ho,rl,dt,so]})}return i})();var IVe=["list"],yVe=i=>({"p-steps p-component":!0,"p-readonly":i}),wVe=(i,n)=>({"p-highlight p-steps-current":i,"p-disabled":n}),vVe=()=>({exact:!1});function bVe(i,n){if(i&1&&(m(0,"span",12),F(1),g()),i&2){let e=u(2).$implicit;p(),J(" ",e.label,"")}}function SVe(i,n){if(i&1&&P(0,"span",13),i&2){let e=u(2).$implicit;f("innerHTML",e.label,an)}}function EVe(i,n){if(i&1){let e=L();m(0,"a",9),k("click",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u();return w(l.onItemClick(r,s,a))})("keydown",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u();return w(l.onItemKeydown(r,s,a))}),m(1,"span",10),F(2),g(),v(3,bVe,2,1,"span",11)(4,SVe,1,1,"ng-template",null,3,Bt),g()}if(i&2){let e=He(5),t=u(),r=t.$implicit,o=t.index,s=u();f("routerLink",r.routerLink)("queryParams",r.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",r.routerLinkActiveOptions||Ae(17,vVe))("target",r.target)("fragment",r.fragment)("queryParamsHandling",r.queryParamsHandling)("preserveFragment",r.preserveFragment)("skipLocationChange",r.skipLocationChange)("replaceUrl",r.replaceUrl)("state",r.state),G("tabindex",s.getItemTabIndex(r,o))("aria-disabled",r.disabled||s.readonly&&o!==s.activeIndex)("aria-current",o===s.activeIndex?"step":null),p(2),$(o+1),p(),f("ngIf",r.escape!==!1)("ngIfElse",e)}}function AVe(i,n){if(i&1&&(m(0,"span",12),F(1),g()),i&2){let e=u(2).$implicit;p(),$(e.label)}}function xVe(i,n){if(i&1&&P(0,"span",13),i&2){let e=u(2).$implicit;f("innerHTML",e.label,an)}}function TVe(i,n){if(i&1){let e=L();m(0,"a",14),k("click",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u();return w(l.onItemClick(r,s,a))})("keydown",function(r){y(e);let o=u(),s=o.$implicit,a=o.index,l=u();return w(l.onItemKeydown(r,s,a))}),m(1,"span",10),F(2),g(),v(3,AVe,2,1,"span",11)(4,xVe,1,1,"ng-template",null,4,Bt),g()}if(i&2){let e=He(5),t=u(),r=t.$implicit,o=t.index,s=u();f("target",r.target),G("href",r.url,rs)("tabindex",s.getItemTabIndex(r,o))("aria-disabled",r.disabled||s.readonly&&o!==s.activeIndex)("aria-current",o===s.activeIndex?"step":null),p(2),J("",o+1," "),p(),f("ngIf",r.escape!==!1)("ngIfElse",e)}}function OVe(i,n){if(i&1&&(m(0,"li",7,1),v(2,EVe,6,18,"a",8)(3,TVe,6,8,"ng-template",null,2,Bt),g()),i&2){let e=n.$implicit,t=n.index,r=He(4),o=u();ce(e.styleClass),f("ngStyle",e.style)("tooltipOptions",e.tooltipOptions)("ngClass",Qe(10,wVe,o.isActive(e,t),e.disabled||o.readonly&&!o.isActive(e,t))),G("aria-current",o.isActive(e,t)?"step":void 0)("id",e.id)("data-pc-section","menuitem"),p(2),f("ngIf",o.isClickableRouterLink(e))("ngIfElse",r)}}var FMt=(()=>{class i{router;route;cd;activeIndex=0;model;readonly=!0;style;styleClass;exact=!0;activeIndexChange=new X;listViewChild;constructor(e,t,r){this.router=e,this.route=t,this.cd=r}subscription;ngOnInit(){this.subscription=this.router.events.subscribe(()=>this.cd.markForCheck())}onItemClick(e,t,r){if(this.readonly||t.disabled){e.preventDefault();return}this.activeIndexChange.emit(r),!t.url&&!t.routerLink&&e.preventDefault(),t.command&&t.command({originalEvent:e,item:t,index:r})}onItemKeydown(e,t,r){switch(e.code){case"ArrowRight":{this.navigateToNextItem(e.target),e.preventDefault();break}case"ArrowLeft":{this.navigateToPrevItem(e.target),e.preventDefault();break}case"Home":{this.navigateToFirstItem(e.target),e.preventDefault();break}case"End":{this.navigateToLastItem(e.target),e.preventDefault();break}case"Tab":if(r!==this.activeIndex){let o=j.find(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');o[r].children[0].tabIndex="-1",o[this.activeIndex].children[0].tabIndex="0"}break;case"Enter":case"Space":{this.onItemClick(e,t,r),e.preventDefault();break}default:break}}navigateToNextItem(e){let t=this.findNextItem(e);t&&this.setFocusToMenuitem(e,t)}navigateToPrevItem(e){let t=this.findPrevItem(e);t&&this.setFocusToMenuitem(e,t)}navigateToFirstItem(e){let t=this.findFirstItem();t&&this.setFocusToMenuitem(e,t)}navigateToLastItem(e){let t=this.findLastItem();t&&this.setFocusToMenuitem(e,t)}findNextItem(e){let t=e.parentElement.nextElementSibling;return t?t.children[0]:null}findPrevItem(e){let t=e.parentElement.previousElementSibling;return t?t.children[0]:null}findFirstItem(){let e=j.findSingle(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');return e?e.children[0]:null}findLastItem(){let e=j.find(this.listViewChild.nativeElement,'[data-pc-section="menuitem"]');return e?e[e.length-1].children[0]:null}setFocusToMenuitem(e,t){e.tabIndex="-1",t.tabIndex="0",t.focus()}isClickableRouterLink(e){return e.routerLink&&!this.readonly&&!e.disabled}isActive(e,t){if(e.routerLink){let r=Array.isArray(e.routerLink)?e.routerLink:[e.routerLink];return this.router.isActive(this.router.createUrlTree(r,{relativeTo:this.route}).toString(),!1)}return t===this.activeIndex}getItemTabIndex(e,t){return e.disabled?"-1":!e.disabled&&this.activeIndex===t?e.tabindex||"0":e.tabindex??"-1"}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||i)(S(ct),S(Cd),S(we))};static \u0275cmp=se({type:i,selectors:[["p-steps"]],viewQuery:function(t,r){if(t&1&&le(IVe,5),t&2){let o;te(o=ie())&&(r.listViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{activeIndex:[2,"activeIndex","activeIndex",We],model:"model",readonly:[2,"readonly","readonly",Y],style:"style",styleClass:"styleClass",exact:[2,"exact","exact",Y]},outputs:{activeIndexChange:"activeIndexChange"},features:[tt],decls:4,vars:9,consts:[["list",""],["menuitem",""],["elseBlock",""],["htmlLabel",""],["htmlRouteLabel",""],[3,"ngClass","ngStyle"],["class","p-steps-item","pTooltip","",3,"ngStyle","class","tooltipOptions","ngClass",4,"ngFor","ngForOf"],["pTooltip","",1,"p-steps-item",3,"ngStyle","tooltipOptions","ngClass"],["role","link","class","p-menuitem-link",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown",4,"ngIf","ngIfElse"],["role","link",1,"p-menuitem-link",3,"click","keydown","routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],[1,"p-steps-number"],["class","p-steps-title",4,"ngIf","ngIfElse"],[1,"p-steps-title"],[1,"p-steps-title",3,"innerHTML"],["role","link",1,"p-menuitem-link",3,"click","keydown","target"]],template:function(t,r){t&1&&(m(0,"nav",5)(1,"ul",null,0),v(3,OVe,5,13,"li",6),g()()),t&2&&(ce(r.styleClass),f("ngClass",ne(7,yVe,r.readonly))("ngStyle",r.style),G("data-pc-name","steps"),p(),G("data-pc-section","menu"),p(2),f("ngForOf",r.model))},dependencies:[je,hn,rt,De,Rp,dm,cn],styles:[`@layer primeng{.p-steps{position:relative}.p-steps ul{padding:0;margin:0;list-style-type:none;display:flex}.p-steps-item{position:relative;display:flex;justify-content:center;flex:1 1 auto}.p-steps-item .p-menuitem-link{display:inline-flex;flex-direction:column;align-items:center;overflow:hidden;text-decoration:none}.p-steps.p-steps-readonly .p-steps-item{cursor:auto}.p-steps-item.p-steps-current .p-menuitem-link{cursor:default}.p-steps-title{white-space:nowrap}.p-steps-number{display:flex;align-items:center;justify-content:center}.p-steps-title{display:block}}
`],encapsulation:2,changeDetection:0})}return i})(),MW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,al,oo,al,oo]})}return i})();var VW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,al,ln,oo,xp,dt,al,oo,dt]})}return i})();var RVe=["container"],PVe=["input"],DVe=["colorSelector"],FVe=["colorHandle"],kVe=["hue"],NVe=["hueHandle"],LVe=(i,n)=>({"p-colorpicker p-component":!0,"p-colorpicker-overlay":i,"p-colorpicker-dragging":n}),MVe=i=>({"p-disabled":i}),VVe=(i,n)=>({"p-colorpicker-panel":!0,"p-colorpicker-overlay-panel":i,"p-disabled":n}),BVe=(i,n)=>({showTransitionParams:i,hideTransitionParams:n}),UVe=i=>({value:"visible",params:i});function jVe(i,n){if(i&1){let e=L();m(0,"input",9,1),k("click",function(){y(e);let r=u();return w(r.onInputClick())})("keydown",function(r){y(e);let o=u();return w(o.onInputKeydown(r))})("focus",function(){y(e);let r=u();return w(r.onInputFocus())}),g()}if(i&2){let e=u();Wn("background-color",e.inputBgColor),f("ngClass",ne(9,MVe,e.disabled))("disabled",e.disabled)("autofocus",e.autofocus),G("tabindex",e.tabindex)("id",e.inputId)("data-pc-section","input")("aria-label",e.ariaLabel)}}function GVe(i,n){if(i&1){let e=L();m(0,"div",10),k("click",function(r){y(e);let o=u();return w(o.onOverlayClick(r))})("@overlayAnimation.start",function(r){y(e);let o=u();return w(o.onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){y(e);let o=u();return w(o.onOverlayAnimationEnd(r))}),m(1,"div",11)(2,"div",12,2),k("touchstart",function(r){y(e);let o=u();return w(o.onColorDragStart(r))})("touchmove",function(r){y(e);let o=u();return w(o.onDrag(r))})("touchend",function(){y(e);let r=u();return w(r.onDragEnd())})("mousedown",function(r){y(e);let o=u();return w(o.onColorMousedown(r))}),m(4,"div",13),P(5,"div",14,3),g()(),m(7,"div",15,4),k("mousedown",function(r){y(e);let o=u();return w(o.onHueMousedown(r))})("touchstart",function(r){y(e);let o=u();return w(o.onHueDragStart(r))})("touchmove",function(r){y(e);let o=u();return w(o.onDrag(r))})("touchend",function(){y(e);let r=u();return w(r.onDragEnd())}),P(9,"div",16,5),g()()()}if(i&2){let e=u();f("ngClass",Qe(10,VVe,!e.inline,e.disabled))("@overlayAnimation",ne(16,UVe,Qe(13,BVe,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",e.inline===!0),G("data-pc-section","panel"),p(),G("data-pc-section","content"),p(),G("data-pc-section","selector"),p(2),G("data-pc-section","color"),p(),G("data-pc-section","colorHandle"),p(2),G("data-pc-section","hue"),p(2),G("data-pc-section","hueHandle")}}var HVe={provide:fn,useExisting:Zt(()=>DF),multi:!0},DF=(()=>{class i{document;platformId;el;renderer;cd;config;overlayService;style;styleClass;inline;format="hex";appendTo;disabled;tabindex;inputId;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";autofocus;onChange=new X;onShow=new X;onHide=new X;containerViewChild;inputViewChild;value={h:0,s:100,b:100};inputBgColor;shown;overlayVisible;defaultColor="ff0000";onModelChange=()=>{};onModelTouched=()=>{};documentClickListener;documentResizeListener;documentMousemoveListener;documentMouseupListener;documentHueMoveListener;scrollHandler;selfClick;colorDragging;hueDragging;overlay;colorSelectorViewChild;colorHandleViewChild;hueViewChild;hueHandleViewChild;window;constructor(e,t,r,o,s,a,l){this.document=e,this.platformId=t,this.el=r,this.renderer=o,this.cd=s,this.config=a,this.overlayService=l,this.window=this.document.defaultView}set colorSelector(e){this.colorSelectorViewChild=e}set colorHandle(e){this.colorHandleViewChild=e}set hue(e){this.hueViewChild=e}set hueHandle(e){this.hueHandleViewChild=e}get ariaLabel(){return this.config?.getTranslation(Di.ARIA)[Di.SELECT_COLOR]}onHueMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.hueDragging=!0,this.pickHue(e))}onHueDragStart(e){this.disabled||(this.hueDragging=!0,this.pickHue(e,e.changedTouches[0]))}onColorDragStart(e){this.disabled||(this.colorDragging=!0,this.pickColor(e,e.changedTouches[0]))}pickHue(e,t){let r=t?t.pageY:e.pageY,o=this.hueViewChild?.nativeElement.getBoundingClientRect().top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0);this.value=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,r-o)))/150),s:this.value.s,b:this.value.b}),this.updateColorSelector(),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}onColorMousedown(e){this.disabled||(this.bindDocumentMousemoveListener(),this.bindDocumentMouseupListener(),this.colorDragging=!0,this.pickColor(e))}onDrag(e){this.colorDragging&&(this.pickColor(e,e.changedTouches[0]),e.preventDefault()),this.hueDragging&&(this.pickHue(e,e.changedTouches[0]),e.preventDefault())}onDragEnd(){this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()}pickColor(e,t){let r=t?t.pageX:e.pageX,o=t?t.pageY:e.pageY,s=this.colorSelectorViewChild?.nativeElement.getBoundingClientRect(),a=s.top+(this.document.defaultView.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0),l=s.left+this.document.body.scrollLeft,c=Math.floor(100*Math.max(0,Math.min(150,r-l))/150),d=Math.floor(100*(150-Math.max(0,Math.min(150,o-a)))/150);this.value=this.validateHSB({h:this.value.h,s:c,b:d}),this.updateUI(),this.updateModel(),this.onChange.emit({originalEvent:e,value:this.getValueToUpdate()})}getValueToUpdate(){let e;switch(this.format){case"hex":e="#"+this.HSBtoHEX(this.value);break;case"rgb":e=this.HSBtoRGB(this.value);break;case"hsb":e=this.value;break}return e}updateModel(){this.onModelChange(this.getValueToUpdate()),this.cd.markForCheck()}writeValue(e){if(e)switch(this.format){case"hex":this.value=this.HEXtoHSB(e);break;case"rgb":this.value=this.RGBtoHSB(e);break;case"hsb":this.value=e;break}else this.value=this.HEXtoHSB(this.defaultColor);setTimeout(()=>{this.updateColorSelector(),this.updateUI(),this.cd.markForCheck()})}updateColorSelector(){if(this.colorSelectorViewChild){let e={};e.s=100,e.b=100,e.h=this.value.h,this.colorSelectorViewChild.nativeElement.style.backgroundColor="#"+this.HSBtoHEX(e)}}updateUI(){this.colorHandleViewChild&&this.hueHandleViewChild?.nativeElement&&(this.colorHandleViewChild.nativeElement.style.left=Math.floor(150*this.value.s/100)+"px",this.colorHandleViewChild.nativeElement.style.top=Math.floor(150*(100-this.value.b)/100)+"px",this.hueHandleViewChild.nativeElement.style.top=Math.floor(150-150*this.value.h/360)+"px"),this.inputBgColor="#"+this.HSBtoHEX(this.value)}onInputFocus(){this.onModelTouched()}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.inline||(this.overlay=e.element,this.appendOverlay(),this.autoZIndex&&bi.set("overlay",this.overlay,this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.updateColorSelector(),this.updateUI());break;case"void":this.onOverlayHide();break}}onOverlayAnimationEnd(e){switch(e.toState){case"visible":this.inline||this.onShow.emit({});break;case"void":this.autoZIndex&&bi.clear(e.element),this.onHide.emit({});break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.overlay):j.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.overlay)}alignOverlay(){this.appendTo?j.absolutePosition(this.overlay,this.inputViewChild?.nativeElement):j.relativePosition(this.overlay,this.inputViewChild?.nativeElement)}hide(){this.overlayVisible=!1,this.cd.markForCheck()}onInputClick(){this.selfClick=!0,this.togglePanel()}togglePanel(){this.overlayVisible?this.hide():this.show()}onInputKeydown(e){switch(e.code){case"Space":this.togglePanel(),e.preventDefault();break;case"Escape":case"Tab":this.hide();break;default:break}}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.selfClick=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}bindDocumentClickListener(){if(!this.documentClickListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",()=>{this.selfClick||(this.overlayVisible=!1,this.unbindDocumentClickListener()),this.selfClick=!1,this.cd.markForCheck()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentMousemoveListener(){if(!this.documentMousemoveListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMousemoveListener=this.renderer.listen(e,"mousemove",t=>{this.colorDragging&&this.pickColor(t),this.hueDragging&&this.pickHue(t)})}}unbindDocumentMousemoveListener(){this.documentMousemoveListener&&(this.documentMousemoveListener(),this.documentMousemoveListener=null)}bindDocumentMouseupListener(){if(!this.documentMouseupListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentMouseupListener=this.renderer.listen(e,"mouseup",()=>{this.colorDragging=!1,this.hueDragging=!1,this.unbindDocumentMousemoveListener(),this.unbindDocumentMouseupListener()})}}unbindDocumentMouseupListener(){this.documentMouseupListener&&(this.documentMouseupListener(),this.documentMouseupListener=null)}bindDocumentResizeListener(){bt(this.platformId)&&(this.documentResizeListener=this.renderer.listen(this.window,"resize",this.onWindowResize.bind(this)))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!j.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new go(this.containerViewChild?.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}validateHSB(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}}validateRGB(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}}validateHEX(e){var t=6-e.length;if(t>0){for(var r=[],o=0;o<t;o++)r.push("0");r.push(e),e=r.join("")}return e}HEXtoRGB(e){let t=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:t>>16,g:(t&65280)>>8,b:t&255}}HEXtoHSB(e){return this.RGBtoHSB(this.HEXtoRGB(e))}RGBtoHSB(e){var t={h:0,s:0,b:0},r=Math.min(e.r,e.g,e.b),o=Math.max(e.r,e.g,e.b),s=o-r;return t.b=o,t.s=o!=0?255*s/o:0,t.s!=0?e.r==o?t.h=(e.g-e.b)/s:e.g==o?t.h=2+(e.b-e.r)/s:t.h=4+(e.r-e.g)/s:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}HSBtoRGB(e){var t={r:0,g:0,b:0};let r=e.h,o=e.s*255/100,s=e.b*255/100;if(o==0)t={r:s,g:s,b:s};else{let a=s,l=(255-o)*s/255,c=(a-l)*(r%60)/60;r==360&&(r=0),r<60?(t.r=a,t.b=l,t.g=l+c):r<120?(t.g=a,t.b=l,t.r=a-c):r<180?(t.g=a,t.r=l,t.b=l+c):r<240?(t.b=a,t.r=l,t.g=a-c):r<300?(t.b=a,t.g=l,t.r=l+c):r<360?(t.r=a,t.g=l,t.b=a-c):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}RGBtoHEX(e){var t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];for(var r in t)t[r].length==1&&(t[r]="0"+t[r]);return t.join("")}HSBtoHEX(e){return this.RGBtoHEX(this.HSBtoRGB(e))}onOverlayHide(){this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.unbindDocumentClickListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&this.autoZIndex&&bi.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(Ze),S(jt),S(we),S(Ht),S(Uo))};static \u0275cmp=se({type:i,selectors:[["p-colorPicker"]],viewQuery:function(t,r){if(t&1&&(le(RVe,5),le(PVe,5),le(DVe,5),le(FVe,5),le(kVe,5),le(NVe,5)),t&2){let o;te(o=ie())&&(r.containerViewChild=o.first),te(o=ie())&&(r.inputViewChild=o.first),te(o=ie())&&(r.colorSelector=o.first),te(o=ie())&&(r.colorHandle=o.first),te(o=ie())&&(r.hue=o.first),te(o=ie())&&(r.hueHandle=o.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",inline:[2,"inline","inline",Y],format:"format",appendTo:"appendTo",disabled:[2,"disabled","disabled",Y],tabindex:"tabindex",inputId:"inputId",autoZIndex:[2,"autoZIndex","autoZIndex",Y],baseZIndex:[2,"baseZIndex","baseZIndex",We],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autofocus:[2,"autofocus","autofocus",Y]},outputs:{onChange:"onChange",onShow:"onShow",onHide:"onHide"},features:[et([HVe]),tt],decls:4,vars:11,consts:[["container",""],["input",""],["colorSelector",""],["colorHandle",""],["hue",""],["hueHandle",""],[3,"ngStyle","ngClass"],["type","text","class","p-colorpicker-preview p-inputtext","readonly","readonly","pAutoFocus","",3,"ngClass","disabled","backgroundColor","autofocus","click","keydown","focus",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["type","text","readonly","readonly","pAutoFocus","",1,"p-colorpicker-preview","p-inputtext",3,"click","keydown","focus","ngClass","disabled","autofocus"],[3,"click","ngClass"],[1,"p-colorpicker-content"],[1,"p-colorpicker-color-selector",3,"touchstart","touchmove","touchend","mousedown"],[1,"p-colorpicker-color"],[1,"p-colorpicker-color-handle"],[1,"p-colorpicker-hue",3,"mousedown","touchstart","touchmove","touchend"],[1,"p-colorpicker-hue-handle"]],template:function(t,r){t&1&&(m(0,"div",6,0),v(2,jVe,2,11,"input",7)(3,GVe,11,18,"div",8),g()),t&2&&(ce(r.styleClass),f("ngStyle",r.style)("ngClass",Qe(8,LVe,!r.inline,r.colorDragging||r.hueDragging)),G("data-pc-name","colorpicker")("data-pc-section","root"),p(2),f("ngIf",!r.inline),p(),f("ngIf",r.inline||r.overlayVisible))},dependencies:[je,rt,De,Zn],styles:[`@layer primeng{.p-colorpicker{display:inline-block}.p-colorpicker-dragging{cursor:pointer}.p-colorpicker-overlay{position:relative}.p-colorpicker-panel{position:relative;width:193px;height:166px}.p-colorpicker-overlay-panel{position:absolute;top:0;left:0}.p-colorpicker-preview{cursor:pointer}.p-colorpicker-panel .p-colorpicker-content{position:relative}.p-colorpicker-panel .p-colorpicker-color-selector{width:150px;height:150px;top:8px;left:8px;position:absolute}.p-colorpicker-panel .p-colorpicker-color{width:150px;height:150px}.p-colorpicker-panel .p-colorpicker-color-handle{position:absolute;top:0;left:150px;border-radius:100%;width:10px;height:10px;border-width:1px;border-style:solid;margin:-5px 0 0 -5px;cursor:pointer;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue{width:17px;height:150px;top:8px;left:167px;position:absolute;opacity:.85}.p-colorpicker-panel .p-colorpicker-hue-handle{position:absolute;top:150px;left:0;width:21px;margin-left:-2px;margin-top:-5px;height:10px;border-width:2px;border-style:solid;opacity:.85;cursor:pointer}}
`],encapsulation:2,data:{animation:[Tn("overlayAnimation",[ci(":enter",[qt({opacity:0,transform:"scaleY(0.8)"}),li("{{showTransitionParams}}")]),ci(":leave",[li("{{hideTransitionParams}}",qt({opacity:0}))])])]},changeDetection:0})}return i})(),BW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,fr]})}return i})();var zVe=["mask"],KVe=["content"],$Ve=["footer"],JVe=["titlebar"],qVe=(i,n,e,t,r,o,s,a,l)=>({"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter p-dialog-mask-scrollblocker":i,"p-dialog-left":n,"p-dialog-right":e,"p-dialog-top":t,"p-dialog-bottom":r,"p-dialog-top-left":o,"p-dialog-top-right":s,"p-dialog-bottom-left":a,"p-dialog-bottom-right":l}),YVe=(i,n,e,t)=>({"p-dialog p-dynamic-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-resizable":n,"p-dialog-draggable":e,"p-dialog-maximized":t}),XVe=(i,n)=>({transform:i,transition:n}),QVe=i=>({value:"visible",params:i}),ZVe=()=>({"p-dialog-header-icon p-dialog-header-maximize p-link":!0});function e5e(i,n){if(i&1){let e=L();m(0,"div",14),k("mousedown",function(r){y(e);let o=u(2);return w(o.initResize(r))}),g()}}function t5e(i,n){i&1&&ue(0)}function i5e(i,n){if(i&1&&P(0,"span",23),i&2){let e=u(5);f("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function n5e(i,n){i&1&&P(0,"WindowMaximizeIcon",24),i&2&&f("styleClass","p-dialog-header-maximize-icon")}function r5e(i,n){i&1&&P(0,"WindowMinimizeIcon",24),i&2&&f("styleClass","p-dialog-header-maximize-icon")}function o5e(i,n){i&1&&ue(0)}function s5e(i,n){i&1&&ue(0)}function a5e(i,n){if(i&1){let e=L();m(0,"button",20),k("click",function(){y(e);let r=u(4);return w(r.maximize())})("keydown.enter",function(){y(e);let r=u(4);return w(r.maximize())}),v(1,i5e,1,1,"span",21)(2,n5e,1,1,"WindowMaximizeIcon",22)(3,r5e,1,1,"WindowMinimizeIcon",22)(4,o5e,1,0,"ng-container",12)(5,s5e,1,0,"ng-container",12),g()}if(i&2){let e=u(4);f("ngClass",Ae(6,ZVe)),p(),f("ngIf",!e.maximizeIconTemplate||!e.minimizeIconTemplate),p(),f("ngIf",!e.maximized&&!e.maximizeIcon&&!e.maximizeIconTemplate),p(),f("ngIf",e.maximized&&!e.minimizeIcon&&!e.minimizeIconTemplate),p(),f("ngComponentOutlet",e.maximizeIconTemplate),p(),f("ngComponentOutlet",e.minimizeIconTemplate)}}function l5e(i,n){i&1&&P(0,"TimesIcon",24),i&2&&f("styleClass","p-dialog-header-close-icon")}function c5e(i,n){i&1&&ue(0)}function d5e(i,n){if(i&1){let e=L();m(0,"button",25),k("click",function(){y(e);let r=u(4);return w(r.hide())})("keydown.enter",function(){y(e);let r=u(4);return w(r.hide())}),v(1,l5e,1,1,"TimesIcon",22)(2,c5e,1,0,"ng-container",12),g()}if(i&2){let e=u(4);f("ngClass","p-dialog-header-icon p-dialog-header-maximize p-link"),G("aria-label",e.closeAriaLabel),p(),f("ngIf",!e.closeIconTemplate),p(),f("ngComponentOutlet",e.closeIconTemplate)}}function p5e(i,n){if(i&1&&(he(0),m(1,"span",16),F(2),g(),m(3,"div",17),v(4,a5e,6,7,"button",18)(5,d5e,3,4,"button",19),g(),fe()),i&2){let e=u(3);p(),f("id",e.ariaLabelledBy),p(),$(e.config.header),p(2),f("ngIf",e.config.maximizable),p(),f("ngIf",e.config.closable!==!1)}}function u5e(i,n){if(i&1){let e=L();m(0,"div",15,3),k("mousedown",function(r){y(e);let o=u(2);return w(o.initDrag(r))}),v(2,t5e,1,0,"ng-container",12)(3,p5e,6,4,"ng-container",11),g()}if(i&2){let e=u(2);p(2),f("ngComponentOutlet",e.headerTemplate),p(),f("ngIf",!e.headerTemplate)}}function h5e(i,n){}function f5e(i,n){i&1&&v(0,h5e,0,0,"ng-template",26)}function m5e(i,n){i&1&&ue(0)}function g5e(i,n){if(i&1&&(he(0),F(1),fe()),i&2){let e=u(3);p(),J(" ",e.config.footer," ")}}function _5e(i,n){i&1&&ue(0)}function C5e(i,n){if(i&1&&(m(0,"div",27,4),v(2,g5e,2,1,"ng-container",11)(3,_5e,1,0,"ng-container",12),g()),i&2){let e=u(2);p(2),f("ngIf",!e.footerTemplate),p(),f("ngComponentOutlet",e.footerTemplate)}}function I5e(i,n){if(i&1){let e=L();m(0,"div",7,1),k("@animation.start",function(r){y(e);let o=u();return w(o.onAnimationStart(r))})("@animation.done",function(r){y(e);let o=u();return w(o.onAnimationEnd(r))}),v(2,e5e,1,0,"div",8)(3,u5e,4,2,"div",9),m(4,"div",10,2),v(6,f5e,1,0,null,11)(7,m5e,1,0,"ng-container",12),g(),v(8,C5e,4,2,"div",13),g()}if(i&2){let e=u();ce(e.config.styleClass),f("ngClass",xn(14,YVe,e.config.rtl,e.config.resizable,e.config.draggable,e.maximized))("ngStyle",e.containerStyle)("@animation",ne(22,QVe,Qe(19,XVe,e.transformOptions,e.config.transitionOptions||"150ms cubic-bezier(0, 0, 0.2, 1)")))("pFocusTrapDisabled",e.config.focusTrap===!1),G("aria-labelledby",e.ariaLabelledBy)("aria-modal",!0),p(2),f("ngIf",e.config.resizable),p(),f("ngIf",e.config.showHeader!==!1),p(),f("ngStyle",e.config.contentStyle),p(2),f("ngIf",!e.contentTemplate),p(),f("ngComponentOutlet",e.contentTemplate),p(),f("ngIf",e.config.footer||e.footerTemplate)}}var UW=(()=>{class i{viewContainerRef;constructor(e){this.viewContainerRef=e}static \u0275fac=function(t){return new(t||i)(S(Ro))};static \u0275dir=Et({type:i,selectors:[["","pDynamicDialogContent",""]],hostAttrs:[1,"p-element"]})}return i})(),bu=class{data;header;ariaLabelledBy;footer;width;height;closeOnEscape;focusOnShow=!0;focusOnClose=!0;focusTrap=!0;baseZIndex;autoZIndex;dismissableMask;rtl;style;contentStyle;styleClass;transitionOptions;closable;showHeader;modal;maskStyleClass;resizable;draggable;keepInViewport;minX;minY;maximizable;maximizeIcon;minimizeIcon;position;closeAriaLabel;appendTo;duplicate;breakpoints;templates},Kl=class{constructor(){}close(n){this._onClose.next(n),setTimeout(()=>{this._onClose.complete()},1e3)}destroy(){this._onDestroy.next(null)}dragStart(n){this._onDragStart.next(n)}dragEnd(n){this._onDragEnd.next(n)}resizeInit(n){this._onResizeInit.next(n)}resizeEnd(n){this._onResizeEnd.next(n)}maximize(n){this._onMaximize.next(n)}_onClose=new Ue;onClose=this._onClose.asObservable();_onDestroy=new Ue;onDestroy=this._onDestroy.asObservable();_onDragStart=new Ue;onDragStart=this._onDragStart.asObservable();_onDragEnd=new Ue;onDragEnd=this._onDragEnd.asObservable();_onResizeInit=new Ue;onResizeInit=this._onResizeInit.asObservable();_onResizeEnd=new Ue;onResizeEnd=this._onResizeEnd.asObservable();_onMaximize=new Ue;onMaximize=this._onMaximize.asObservable();onChildComponentLoaded=new Ue},y5e=tl([qt({transform:"{{transform}}",opacity:0}),li("{{transition}}",qt({transform:"none",opacity:1}))]),w5e=tl([li("{{transition}}",qt({transform:"{{transform}}",opacity:0}))]),v5e=(()=>{class i{document;platformId;cd;renderer;config;dialogRef;zone;primeNGConfig;parentDialog;visible=!0;componentRef;mask;resizing;dragging;maximized;_style={};originalStyle;lastPageX;lastPageY;ariaLabelledBy;id=Tt();styleElement;insertionPoint;maskViewChild;contentViewChild;footerViewChild;headerViewChild;childComponentType;container;wrapper;documentKeydownListener;documentEscapeListener;maskClickListener;transformOptions="scale(0.7)";documentResizeListener;documentResizeEndListener;documentDragListener;documentDragEndListener;get minX(){return this.config.minX?this.config.minX:0}get minY(){return this.config.minY?this.config.minY:0}get keepInViewport(){return this.config.keepInViewport}get maximizable(){return this.config.maximizable}get maximizeIcon(){return this.config.maximizeIcon}get minimizeIcon(){return this.config.minimizeIcon}get style(){return this._style}get position(){return this.config.position}get closeAriaLabel(){return this.primeNGConfig.getTranslation(Di.ARIA).close}set style(e){e&&(this._style=oe({},e),this.originalStyle=e)}get parent(){let e=Array.from(this.document.getElementsByClassName("p-dialog"));if(e.length>1)return e.pop()}get parentContent(){let e=Array.from(this.document.getElementsByClassName("p-dialog"));if(e.length>0){let t=e[e.length-1].querySelector(".p-dialog-content");if(t)return Array.isArray(t)?t[0]:t}}get header(){return this.config.header}get data(){return this.config.data}get breakpoints(){return this.config.breakpoints}get footerTemplate(){return this.config?.templates?.footer}get headerTemplate(){return this.config?.templates?.header}get contentTemplate(){return this.config?.templates?.content}get minimizeIconTemplate(){return this.config?.templates?.minimizeicon}get maximizeIconTemplate(){return this.config?.templates?.maximizeicon}get closeIconTemplate(){return this.config?.templates?.closeicon}get dynamicDialogCount(){return this.document.querySelectorAll("p-dynamicdialog")?.length}get containerStyle(){return ke(oe({},this.config.style),{width:this.config.width,height:this.config.height})}constructor(e,t,r,o,s,a,l,c,d){this.document=e,this.platformId=t,this.cd=r,this.renderer=o,this.config=s,this.dialogRef=a,this.zone=l,this.primeNGConfig=c,this.parentDialog=d}ngOnInit(){this.breakpoints&&this.createStyle()}createStyle(){if(bt(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",j.setAttribute(this.styleElement,"nonce",this.primeNGConfig?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let t in this.breakpoints)e+=`
                        @media screen and (max-width: ${t}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[t]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e)}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngAfterViewInit(){this.loadChildComponent(this.childComponentType),this.ariaLabelledBy=this.getAriaLabelledBy(),this.cd.detectChanges()}getAriaLabelledBy(){return this.header!==null?Tt()+"_header":null}loadChildComponent(e){let t=this.insertionPoint?.viewContainerRef;t?.clear(),this.componentRef=t?.createComponent(e),this.dialogRef.onChildComponentLoaded.next(this.componentRef.instance)}moveOnTop(){this.config.autoZIndex!==!1&&(bi.set("modal",this.container,(this.config.baseZIndex||0)+this.primeNGConfig.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.moveOnTop(),this.parent&&this.unbindGlobalListeners(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.config.modal!==!1&&this.enableModality(),this.config.focusOnShow!==!1&&this.focus();break;case"void":this.wrapper&&this.config.modal!==!1&&j.addClass(this.wrapper,"p-component-overlay-leave");break}}onAnimationEnd(e){e.toState==="void"&&(this.parentContent&&this.config.focusOnClose!==!1&&this.focus(this.parentContent),this.onContainerDestroy(),this.dialogRef.destroy())}onContainerDestroy(){this.unbindGlobalListeners(),this.container&&this.config.autoZIndex!==!1&&bi.clear(this.container),this.config.modal!==!1&&this.disableModality(),this.container=null}close(){this.visible=!1,this.cd.markForCheck()}hide(){this.dialogRef&&this.dialogRef.close()}enableModality(){this.config.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.hide()})),this.dynamicDialogCount===1&&j.addClass(this.document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.config.dismissableMask&&this.unbindMaskClickListener(),this.dynamicDialogCount===1&&j.removeClass(this.document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}focus(e=this.contentViewChild.nativeElement){if(!j.getFocusableElements(e).length)return;let r=j.getFocusableElement(e,"[autofocus]");if(r){this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),5)});return}let o=j.getFocusableElement(e);o?this.zone.runOutsideAngular(()=>{setTimeout(()=>o.focus(),5)}):this.footerViewChild?this.focus(this.footerViewChild.nativeElement):!o&&this.headerViewChild&&this.focus(this.headerViewChild.nativeElement)}maximize(){this.maximized=!this.maximized,this.maximized?j.addClass(this.document.body,"p-overflow-hidden"):j.removeClass(this.document.body,"p-overflow-hidden"),this.dialogRef.maximize({maximized:this.maximized})}initResize(e){this.config.resizable&&(this.documentResizeListener||this.bindDocumentResizeListeners(),this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,j.addClass(this.document.body,"p-unselectable-text"),this.dialogRef.resizeInit(e))}onResize(e){if(this.resizing){let t=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,o=j.getOuterWidth(this.container),s=j.getOuterHeight(this.container),a=j.getOuterHeight(this.contentViewChild.nativeElement),l=o+t,c=s+r,d=this.container.style.minWidth,h=this.container.style.minHeight,_=this.container.getBoundingClientRect(),C=j.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(l+=t,c+=r),(!d||l>parseInt(d))&&_.left+l<C.width&&(this._style.width=l+"px",this.container.style.width=this._style.width),(!h||c>parseInt(h))&&_.top+c<C.height&&(this.contentViewChild.nativeElement.style.height=a+c-s+"px",this._style.height&&(this._style.height=c+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,j.removeClass(this.document.body,"p-unselectable-text"),this.dialogRef.resizeEnd(e))}initDrag(e){j.hasClass(e.target,"p-dialog-header-icon")||j.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.config.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",j.addClass(this.document.body,"p-unselectable-text"),this.dialogRef.dragStart(e))}onDrag(e){if(this.dragging){let t=j.getOuterWidth(this.container),r=j.getOuterHeight(this.container),o=e.pageX-this.lastPageX,s=e.pageY-this.lastPageY,a=this.container.getBoundingClientRect(),l=a.left+o,c=a.top+s,d=j.getViewport();this.container.style.position="fixed",this.keepInViewport?(l>=this.minX&&l+t<d.width&&(this._style.left=l+"px",this.lastPageX=e.pageX,this.container.style.left=l+"px"),c>=this.minY&&c+r<d.height&&(this._style.top=c+"px",this.lastPageY=e.pageY,this.container.style.top=c+"px")):(this.lastPageX=e.pageX,this.container.style.left=l+"px",this.lastPageY=e.pageY,this.container.style.top=c+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,j.removeClass(this.document.body,"p-unselectable-text"),this.dialogRef.dragEnd(e),this.cd.detectChanges())}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}bindDocumentDragListener(){bt(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.document,"mousemove",this.onDrag.bind(this))})}bindDocumentDragEndListener(){bt(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.document,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragListener=null)}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentResizeListeners(){bt(this.platformId)&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.document,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.document,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindGlobalListeners(){this.config.closeOnEscape!==!1&&this.bindDocumentEscapeListener(),this.config.resizable&&this.bindDocumentResizeListeners(),this.config.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener())}unbindGlobalListeners(){this.unbindDocumentEscapeListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener()}bindDocumentEscapeListener(){let e=this.maskViewChild?this.maskViewChild.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",t=>{t.which==27&&parseInt(this.container.style.zIndex)==bi.getCurrent()&&this.hide()})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}ngOnDestroy(){this.onContainerDestroy(),this.componentRef&&this.componentRef.destroy(),this.destroyStyle()}static \u0275fac=function(t){return new(t||i)(S(At),S(ai),S(we),S(jt),S(bu),S(Kl),S(Lt),S(Ht),S(i,12))};static \u0275cmp=se({type:i,selectors:[["p-dynamicDialog"]],viewQuery:function(t,r){if(t&1&&(le(UW,5),le(zVe,5),le(KVe,5),le($Ve,5),le(JVe,5)),t&2){let o;te(o=ie())&&(r.insertionPoint=o.first),te(o=ie())&&(r.maskViewChild=o.first),te(o=ie())&&(r.contentViewChild=o.first),te(o=ie())&&(r.footerViewChild=o.first),te(o=ie())&&(r.headerViewChild=o.first)}},hostAttrs:[1,"p-element"],decls:3,vars:14,consts:[["mask",""],["container",""],["content",""],["titlebar",""],["footer",""],[3,"ngClass"],["role","dialog","pFocusTrap","",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["role","dialog","pFocusTrap","",3,"ngClass","ngStyle","pFocusTrapDisabled"],["class","p-resizable-handle",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[1,"p-dialog-content",3,"ngStyle"],[4,"ngIf"],[4,"ngComponentOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],[1,"p-dialog-title",3,"id"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","role","button",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","tabindex","-1","pRipple","",3,"click","keydown.enter","ngClass"],["class","p-dialog-header-maximize-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],[3,"styleClass"],["type","button","role","button",3,"click","keydown.enter","ngClass"],["pDynamicDialogContent",""],[1,"p-dialog-footer"]],template:function(t,r){t&1&&(m(0,"div",5,0),v(2,I5e,9,24,"div",6),g()),t&2&&(ce(r.config.maskStyleClass),f("ngClass",eh(4,qVe,[r.config.modal!==!1,r.position==="left",r.position==="right",r.position==="top",r.position==="bottom",r.position==="topleft"||r.position==="top-left",r.position==="topright"||r.position==="top-right",r.position==="bottomleft"||r.position==="bottom-left",r.position==="bottomright"||r.position==="bottom-right"])),p(2),f("ngIf",r.visible))},dependencies:()=>[je,E4,rt,De,jf,Gf,Ji,Pw,UW],styles:[`@layer primeng{.p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}}
`],encapsulation:2,data:{animation:[Tn("animation",[ci("void => visible",[il(y5e)]),ci("visible => void",[il(w5e)])])]}})}return i})(),jW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,jf,Gf,Ji,dt,Dw,dt]})}return i})(),FF=class{_parentInjector;_additionalTokens;constructor(n,e){this._parentInjector=n,this._additionalTokens=e}get(n,e,t){let r=this._additionalTokens.get(n);return r||this._parentInjector.get(n,e)}},Su=(()=>{class i{appRef;injector;document;dialogComponentRefMap=new Map;constructor(e,t,r){this.appRef=e,this.injector=t,this.document=r}open(e,t){if(!this.duplicationPermission(e,t))return null;let r=this.appendDialogComponentToBody(t,e);return this.dialogComponentRefMap.get(r).instance.childComponentType=e,r}getInstance(e){return this.dialogComponentRefMap.get(e).instance}appendDialogComponentToBody(e,t){let r=new WeakMap;r.set(bu,e);let o=new Kl;r.set(Kl,o);let s=o.onClose.subscribe(()=>{this.dialogComponentRefMap.get(o).instance.close()}),a=o.onDestroy.subscribe(()=>{this.removeDialogComponentFromBody(o),a.unsubscribe(),s.unsubscribe()}),l=s4(v5e,{environmentInjector:this.appRef.injector,elementInjector:new FF(this.injector,r)});this.appRef.attachView(l.hostView);let c=l.hostView.rootNodes[0];return!e.appendTo||e.appendTo==="body"?this.document.body.appendChild(c):j.appendChild(c,e.appendTo),this.dialogComponentRefMap.set(o,l),o}removeDialogComponentFromBody(e){if(!e||!this.dialogComponentRefMap.has(e))return;let t=this.dialogComponentRefMap.get(e);this.appRef.detachView(t.hostView),t.destroy(),this.dialogComponentRefMap.delete(e)}duplicationPermission(e,t){if(t.duplicate)return!0;let r=!0;for(let[o,s]of this.dialogComponentRefMap)if(s.instance.childComponentType===e){r=!1;break}return r}static \u0275fac=function(t){return new(t||i)(de(Rl),de(Ur),de(At))};static \u0275prov=Ce({token:i,factory:i.\u0275fac})}return i})();var b5e=["scroller"],S5e=[[["p-header"]],[["p-footer"]]],E5e=["p-header","p-footer"],GW=i=>({height:i}),A5e=(i,n)=>({$implicit:i,options:n});function x5e(i,n){i&1&&ue(0)}function T5e(i,n){if(i&1&&(m(0,"div",8),hi(1),v(2,x5e,1,0,"ng-container",9),g()),i&2){let e=u();p(2),f("ngTemplateOutlet",e.headerTemplate)}}function O5e(i,n){i&1&&ue(0)}function R5e(i,n){if(i&1&&(m(0,"div",10),v(1,O5e,1,0,"ng-container",11),g()),i&2){let e=n.$implicit,t=n.options,r=u();f("ngStyle",ne(3,GW,r.itemSize+"px")),p(),f("ngTemplateOutlet",e?r.itemTemplate:r.loadingItemTemplate)("ngTemplateOutletContext",Qe(5,A5e,e,t))}}function P5e(i,n){i&1&&ue(0)}function D5e(i,n){if(i&1&&(m(0,"div",12),hi(1,1),v(2,P5e,1,0,"ng-container",9),g()),i&2){let e=u();G("data-pc-section","footer"),p(2),f("ngTemplateOutlet",e.footerTemplate)}}var SS=(()=>{class i{el;cd;value;itemSize;style;styleClass;scrollHeight;lazy;options;delay=250;onLazyLoad=new X;header;footer;templates;scroller;itemTemplate;headerTemplate;footerTemplate;loadingItemTemplate;virtualScrollTimeout;constructor(e,t){this.el=e,this.cd=t}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"loadingItem":this.loadingItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}onLazyItemLoad(e){this.virtualScrollTimeout&&clearTimeout(this.virtualScrollTimeout),this.virtualScrollTimeout=setTimeout(()=>{this.onLazyLoad.emit(ke(oe({},e),{rows:e.last-e.first,forceUpdate:()=>this.cd.detectChanges()}))},this.delay)}getBlockableElement(){return this.el.nativeElement.children[0]}scrollToIndex(e,t){this.scroller?.scrollToIndex(e,t)}static \u0275fac=function(t){return new(t||i)(S(Ze),S(we))};static \u0275cmp=se({type:i,selectors:[["p-virtualScroller"]],contentQueries:function(t,r,o){if(t&1&&(ut(o,fc,5),ut(o,As,5),ut(o,Ee,4)),t&2){let s;te(s=ie())&&(r.header=s.first),te(s=ie())&&(r.footer=s.first),te(s=ie())&&(r.templates=s)}},viewQuery:function(t,r){if(t&1&&le(b5e,5),t&2){let o;te(o=ie())&&(r.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",itemSize:[2,"itemSize","itemSize",We],style:"style",styleClass:"styleClass",scrollHeight:"scrollHeight",lazy:[2,"lazy","lazy",Y],options:"options",delay:[2,"delay","delay",We]},outputs:{onLazyLoad:"onLazyLoad"},features:[tt],ngContentSelectors:E5e,decls:8,vars:17,consts:[["content",""],["scroller",""],[3,"ngClass","ngStyle"],["class","p-virtualscroller-header",4,"ngIf"],[1,"p-virtualscroller-content"],["styleClass","p-virtualscroller-list",3,"onLazyLoad","items","itemSize","lazy","options"],["pTemplate","item"],["class","p-virtualscroller-footer",4,"ngIf"],[1,"p-virtualscroller-header"],[4,"ngTemplateOutlet"],[1,"p-virtualscroller-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-virtualscroller-footer"]],template:function(t,r){if(t&1){let o=L();$i(S5e),m(0,"div",2),v(1,T5e,3,1,"div",3),m(2,"div",4,0)(4,"p-scroller",5,1),k("onLazyLoad",function(a){return y(o),w(r.onLazyItemLoad(a))}),v(6,R5e,2,8,"ng-template",6),g()(),v(7,D5e,3,2,"div",7),g()}t&2&&(ce(r.styleClass),f("ngClass","p-virtualscroller p-component")("ngStyle",r.style),G("data-pc-name","virtualscroller")("data-pc-section","root"),p(),f("ngIf",r.header||r.headerTemplate),p(),G("data-pc-section","content"),p(2),st(ne(15,GW,r.scrollHeight)),f("items",r.value)("itemSize",r.itemSize)("lazy",r.lazy)("options",r.options),p(3),f("ngIf",r.footer||r.footerTemplate))},dependencies:[je,rt,mt,De,Ee,Xs],encapsulation:2})}return i})(),HW=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=Ve({type:i});static \u0275inj=Me({imports:[it,dt,so,dt,so]})}return i})();var ES=(()=>{class i{constructor(e,t){this.dialogRef=e,this.router=t,this.alive=!0,this.router.events.pipe(yt(()=>this.alive)).subscribe(r=>{r instanceof js&&this.dialogRef.close()})}ngOnInit(){}ngOnDestroy(){this.alive=!1}addMessageToLog(e,t){this.log&&this.log.addNewText(e,t)}static{this.\u0275fac=function(t){return new(t||i)(S(Kl),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-dynamic-panel"]],decls:2,vars:0,template:function(t,r){t&1&&(m(0,"p"),F(1,"fwc-dynamic-panel works!"),g())}})}}return i})();var Eu=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e}getDhcpPolicy(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getDhcpPolicyGrid(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/grid/${r}`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newPolicyDhcpRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules`;return this.httpClient.post(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateDhcpPolicyRule(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}moveObjectBetweenPositions(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/moveFrom`;return this.httpClient.put(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateDhcpPolicyRules(e,t,r,o){let s=r.map(c=>`rules[]=${c}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/bulkUpdate?${s}`,l={active:o.active,style:o.style,group:o.group};return this.httpClient.put(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteDhcpPolicyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteDhcpPolicyRules(e,t,r){let o=r.map(a=>`rules[]=${a}`).join("&"),s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/bulkRemove?${o}`;return this.httpClient.delete(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}manageDhcpPolicyRules(e,t,r,o,s,a){let l="copy",c=this.httpClient.post,d=o<0?"above":"below";a===Or.CUT&&(l="move",c=this.httpClient.put);let h=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/${l}`,_={to:r,offset:d,rules:s};return c.call(this.httpClient,h,_).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}compileDhcpPolicyRules(e,t,r){let o;if(r){let s=r.map(a=>`rules[]=${a}`).join("&");o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/compile?${s}`}else o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/compile`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getDhcpGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/system/dhcpGroups/${r}`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkGroupRestrictions(e){let{fwcloud:t,firewall:r,id:o}=e,s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${r}/system/dhcpGroups/${o}/restricted`;return this.httpClient.get(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newDhcpPolicyRuleGroup(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpGroups`,l={name:r,comment:o,rules:s};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateDhcpPolicyRuleGroup(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpGroups/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteDhcpPolicyRulesGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpGroups/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}installConfig(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/dhcpRules/install?channel_id=${r}`;return this.httpClient.put(s,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Y3t=Tn("fundido",[ci(":enter",[qt({opacity:0,transform:"translateY(12%)"}),li("380ms linear")])]),xS=Tn("fundidoIn",[ci(":enter",[qt({opacity:0}),li("250ms linear")]),ci("* => void",li("250ms linear"))]),jc=Tn("fundidoInOut",[Yr("void",qt({opacity:0,transform:"translateY(12%)"})),Yr("active, newItemAdded",qt({opacity:1})),ci("void => *",li("300ms")),ci("* => void",li("300ms"))]),k5e=Tn("delayFundidoInOut",[Yr("void",qt({opacity:0,transform:"translateY(12%)"})),Yr("active, newItemAdded",qt({opacity:1})),ci("void => *",[GV("div",[HV(1e3,[qt({opacity:0}),li("0.3s",qt({opacity:1}))])])]),ci("* => void",li("300ms"))]),X3t=Tn("zoomInOut",[Yr("void",qt({opacity:0,transform:"scale(0.1, 0.1)"})),Yr("active",qt({opacity:1,transform:"scale(1, 1)"})),ci("void => *",li("300ms")),ci("* => void",li("300ms"))]),Q3t=Tn("itemFundidoOut",[Yr("void",qt({opacity:0})),Yr("active, newItemAdded",qt({opacity:1})),ci("void => active",li("300ms")),ci("void => newItemAdded",li("300ms")),ci("* => void",li("300ms"))]);var WW=250,Ei=(()=>{class i{constructor(e){this.translate=e}transform(e){let t="",r;if(e)if(e.error&&typeof e.error=="object"?r=e.error:e.error&&typeof e.error=="string"?(r=e.error,r==="IP version mismatch"&&(t=this.translate.instant("ITEM_PANEL.ERRORS.INVALID_IP_VERSION.TEXT"))):e.message&&typeof e.message=="string"&&e.status===500?(r=e.message,r==="IP version mismatch"&&(t=this.translate.instant("ITEM_PANEL.ERRORS.INVALID_IP_VERSION.TEXT"))):r=e,typeof e=="string")t=r;else if(this.isFwcAPIError(r)){let o=`API_ERROR.${r.fwcErr}`,s=this.translate.instant(o);if(s===o){if(t=r.msg||"",this.isServerError(t)){let a=JSON.parse(t);t=this.translate.instant("API_ERROR."+a.code)}}else t=s}else if(this.isEmptyError(r))t=this.translate.instant("API_ERROR.500");else if(this.isFwcAPIErrorNew(r))t=r.message;else if(this.isUnknownFormatError(r)){if(t=null,r.errors){let o=r.errors;for(let s in o)Array.isArray(o[s])&&(s==="id"&&o[s].length&&(t=o[s][0]),o[s].find(a=>a==="ipObjGroupId must not be empty")?t=this.translate.instant("ROUTING.POLICY.ERROR_EMPTY_GROUP"):o[s].find(a=>a==="ipObj must contain at least one address")&&(t=this.translate.instant("ROUTING.POLICY.ERROR_EMPTY_HOST")))}if(r.data&&!t){let o=`API_ERROR.${r.status}`,s=this.translate.instant(o);s===o?t=r.error||"":t=s}}else t=r;return t=t.length>WW?t.substr(0,WW)+"...":t,t}isFwcAPIError(e){return e&&e.fwcErr!=null}isFwcAPIErrorNew(e){return e&&e.status!=null&&e.response!=null&&e.message!=null}isUnknownFormatError(e){return e&&e.status!=null&&e.data!=null}isEmptyError(e){return e&&e.status===void 0&&e.error===void 0&&e.data&&Object.keys(e.data).length===0}isServerError(e){try{let t=JSON.parse(e);return t.errno!=null&&t.code!=null}catch{return!1}}static{this.\u0275fac=function(t){return new(t||i)(S(Ye,16))}}static{this.\u0275pipe=ur({name:"fwcError",type:i,pure:!0})}}return i})();var N5e=["tooltipElem"],L5e=(i,n,e)=>({top:i,left:n,visibility:e}),M5e=()=>({width:"1.7rem",height:"1.7rem"});function V5e(i,n){i&1&&(m(0,"div",2),P(1,"p-progressSpinner"),g()),i&2&&(p(),st(Ae(2,M5e)))}function B5e(i,n){if(i&1&&(m(0,"span"),P(1,"i"),g()),i&2){let e=u(2);p(),va("flag-icon flag-icon-",e.CountryId,"")}}function U5e(i,n){if(i&1&&(m(0,"span"),P(1,"i"),g()),i&2){let e=u(2);p(),ce(e.pipeFwcIcon.transform(e.objectInfo.type,e.ContinentId))}}function j5e(i,n){if(i&1&&(m(0,"span"),F(1),D(2,"translate"),g()),i&2){let e=u(2);p(),Es(" ",e.objectInfo.nodes.length," ",N(2,2,"INFO_TT.NODES"),"")}}function G5e(i,n){if(i&1){let e=L();m(0,"div",3)(1,"h6"),P(2,"i",4),F(3),D(4,"translate"),m(5,"span",5)(6,"i",6),k("click",function(){y(e);let r=u();return w(r.showTooltip=!1)}),g()()(),m(7,"div",7),v(8,B5e,2,3,"span")(9,U5e,2,3,"span"),P(10,"i",8),D(11,"fwcIcon"),F(12,"\xA0\xA0"),m(13,"strong"),F(14),g(),F(15," ("),m(16,"i"),F(17),D(18,"translate"),g(),F(19,")"),P(20,"span",9),v(21,j5e,3,4,"span"),g(),P(22,"div",10),g()}if(i&2){let e=u();p(3),J("\xA0",N(4,10,"ITEM_PANEL.HEADER.OBJ_INFO")," "),p(5),W(e.objectInfo.type==e.ObjectTypes.OBJ_COUNTRIE?8:-1),p(),W(e.objectInfo.type==e.ObjectTypes.OBJ_CONTINENT?9:-1),p(),va("fwcIcon ",N(11,12,e.objectInfo.type),""),p(4),$(e.objectInfo.name),p(3),$(N(18,14,"GLOBALS.DB_OBJECT_NAMES."+e.objectInfo.type)),p(4),W(e.objectInfo.nodes?21:-1),p(),Q("innerHTML",e.objectInfo.infoHTML,an)}}function H5e(i,n){if(i&1){let e=L();m(0,"div")(1,"h6"),P(2,"i",11),F(3,"\xA0Error: "),m(4,"span",5)(5,"i",6),k("click",function(){y(e);let r=u();return w(r.showTooltip=!1)}),g()()(),P(6,"br"),m(7,"p"),F(8),g()()}if(i&2){let e=u();p(8),J(" ",e.objectError," ")}}var f4t=(()=>{class i{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R){this.appOptionsService=e,this.fwcObjectService=t,this.fwcInterfaceService=r,this.itemSelectedService=o,this.fwcObjectTypeService=s,this.fwcUserService=a,this.fwcFirewallService=l,this.fwcPolicyService=c,this.fwcMarkService=d,this.fwcVpnService=h,this.fwcErrorPipe=_,this.fwcRoutingTableService=C,this.fwcDhcpPolicyService=I,this.translate=b,this.pipeFwcIcon=E,this.cd=R,this.loadingData=!1,this.OBJECT_TYPES=[],this.showTooltip=!1,this.positionTooltip=!1,this.TOOLTIP_HEIGHT=350,this.TOOLTIP_MIN_WIDTH=250,this.TOOLTIP_GAP=8,this.alive=!0,this.ObjectTypes=O}ngOnInit(){this.itemSelectedService.getObjectInfo().pipe(yt(()=>this.alive)).subscribe(e=>{if(!e||!this.appOptionsService.enableInfoTooltip)return;let t=e.obj,r=e.event;this.objectInfo=void 0,this.objectError=void 0,t&&r?(this.loadingData=!0,this.tooltipX=r.clientX,this.tooltipY=r.clientY,this.targetElement=e.targetElement?e.targetElement:r.target,this.showTooltipDialog(),t._fwcShowRestrictions?this.fwcPolicyService.getPolicyRuleFull(t.firewall_id,t.rule_type,t.rule_id,this.fwcUserService.getActualFwSelectedCloud()).pipe(yt(()=>this.alive)).subscribe(o=>{},o=>{}):this.getObjectInfo(t.objId,t.objType,t.objParentId,t.fwId,t.clusterId).then(o=>{this.loadingData=!1,this.objectInfo=o,this.showTooltipDialog()}).catch(o=>{this.loadingData=!1,this.objectError=this.fwcErrorPipe.transform(o)})):(this.showTooltip=!1,this.positionTooltip=!1)}),this.fwcObjectTypeService.getObjectTypes().subscribe(e=>{if(this.OBJECT_TYPES=[],e.data){for(let t of e.data)this.OBJECT_TYPES[t.id]=t.type;this.OBJECT_TYPES[O.OBJ_CLUSTER_NODE]="CLUSTER_NODE"}},e=>{_e.error("ERROR getting object types",e),this.OBJECT_TYPES=[]})}ngOnDestroy(){this.alive=!1}showTooltipDialog(){this.cd.destroyed||this.cd.detectChanges(),this.placeTooltipDialog(),this.showTooltip=!0}placeTooltipOld(){if(this.tooltipElem){let e=this.tooltipElem.nativeElement.clientWidth,t=this.tooltipElem.nativeElement.clientHeight,r=window.innerWidth,o=window.innerHeight;this.tooltipX+e>=r-(this.TOOLTIP_GAP+3)&&(this.tooltipX=this.tooltipX-e-this.TOOLTIP_GAP),this.tooltipY+t>=o-(this.TOOLTIP_GAP+3)?this.tooltipY=this.tooltipY-t-this.TOOLTIP_GAP:this.tooltipY+=this.TOOLTIP_GAP}}placeTooltipDialog(){if(this.tooltipElem&&this.targetElement){let e=this.tooltipElem.nativeElement.clientWidth,t=this.tooltipElem.nativeElement.clientHeight,r=window.innerWidth,o=window.innerHeight,s=this.targetElement.getBoundingClientRect();this.tooltipX=this.tooltipY=void 0,s.top-t-this.TOOLTIP_GAP>0?this.tooltipY=s.top-t-this.TOOLTIP_GAP:this.tooltipY=s.bottom+this.TOOLTIP_GAP,s.left+e+this.TOOLTIP_GAP<r&&(this.tooltipX=s.left)}}getObjectInfo(e,t,r,o,s){return new Promise((l,c)=>{let d;switch(t=+t,t){case O.OBJ_FIREWALL:this.fwcFirewallService.getFirewall(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U;A=T.data,A.type=O.OBJ_FIREWALL,A.cluster&&(A.type=O.OBJ_CLUSTER_NODE),U=this.buildInfoTableHeader(A.id);let z="-";A.compiled_at&&(z=A.compiled_at),U+=`<tr><td colspan="2"><p class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMPILED_AT")}</p><p>${z}<p></td></tr>`;let ee="-";A.installed_at&&(ee=A.installed_at),U+=`<tr><td colspan="2"><p class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.INSTALLED_AT")}</p><p>${ee}<p></td></tr>`,A.comment&&(U+=`<tr><td colspan="2"><p class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</p><p>${A.comment}<p></td></tr>`),U+="</table>",A.infoHTML=U}else return c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));l(A)},T=>{c(T)});break;case O.OBJ_CLUSTER:this.fwcFirewallService.getCluster(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U;A=T.data,A.type=O.OBJ_CLUSTER,U=this.buildInfoTableHeader(A.id),A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break;case O.OBJ_INTERFACE_FIREWALL:case O.OBJ_INTERFACE_HOST:let h;t==O.OBJ_INTERFACE_HOST?(d=this.fwcInterfaceService.getInterfaceHost.bind(this.fwcInterfaceService),h=r):(d=this.fwcInterfaceService.getInterface.bind(this.fwcInterfaceService),h=o??r),d(h,e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U,z;A=T.data,U=this.buildInfoTableHeader(A.id),z=+A.type,z==O.OBJ_INTERFACE_FIREWALL?A.cluster_id!==null&&A.cluster_id!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)}'></i> Cluster</td><td><strong>${A.cluster_name} (${A.cluster_id})</strong></td></tr>`:U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name} (${A.firewall_id})</strong></td></tr>`:U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_HOST)}'></i> Host</td><td><strong>${A.host_name} (${A.host_id})</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.LABEL")}</td><td><strong>${A.labelName?A.labelName:""}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.MAC")}</td><td><strong>${A.mac?A.mac:""}</strong></td></tr>`,A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break;case O.OBJ_GROUP:case O.OBJ_SERVICE_GROUP:this.fwcObjectService.getObjectGroup(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U;if(A=T.data,U=this.buildInfoTableHeader(A.id),A.ipobjs&&A.ipobjs.length){U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.IP_OBJS")}</span><ul class='fitUlGroup'>`;for(let z=0;z<A.ipobjs.length;z++){let ee=new Sn().transform(A.ipobjs[z].type,"","fwcOrange");U+=`<li><i class='fwcIcon ${ee}'></i> ${A.ipobjs[z].name} (Id: <strong>${A.ipobjs[z].id}</strong>)</li>`}U+="</ul></td></tr>"}else U+=`<tr><td colspan="2"><i>${this.translate.instant("ITEM_PANEL.FIELDS.GROUP_EMPTY")}</i></td></tr>`;A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break;case O.OBJ_CERT_CLI:case O.OBJ_CERT_SER:case O.OBJ_OPENVPN_CONFIG_CLI:case O.OBJ_OPENVPN_CONFIG_SER:case O.OBJ_WGC_CONFIG_CLI:case O.OBJ_WGS_CONFIG_SER:case O.OBJ_ISC_CONFIG_CLI:case O.OBJ_ISS_CONFIG_SER:case O.OBJ_CA:let _,C={fwcloud:this.fwcUserService.getActualFwSelectedCloud()};t==O.OBJ_CERT_CLI||t==O.OBJ_CERT_SER?(_=this.fwcVpnService.getCertificate.bind(this.fwcVpnService),C.crt=e):t==O.OBJ_OPENVPN_CONFIG_CLI||t==O.OBJ_OPENVPN_CONFIG_SER?(_=this.fwcVpnService.getConfigInfo.bind(this.fwcVpnService),C.openvpn=e):t==O.OBJ_WGC_CONFIG_CLI||t==O.OBJ_WGS_CONFIG_SER?(_=this.fwcVpnService.getWireGuardConfigInfo.bind(this.fwcVpnService),C.wireguard=e):t==O.OBJ_ISC_CONFIG_CLI||t==O.OBJ_ISS_CONFIG_SER?(_=this.fwcVpnService.getIPSecConfigInfo.bind(this.fwcVpnService),C.ipsec=e):t==O.OBJ_CA&&(_=this.fwcVpnService.getCA.bind(this.fwcVpnService),C.ca=e),_(C).subscribe(T=>{let A;if(T.data){let U;Array.isArray(T.data.data)&&T.data.data.length>0&&(T.data.data[0].type===O.OBJ_WGS_CONFIG_SER||T.data.data[0].type===O.OBJ_WGC_CONFIG_CLI||T.data.data[0].type===O.OBJ_ISS_CONFIG_SER||T.data.data[0].type===O.OBJ_ISC_CONFIG_CLI)?A=T.data.data[0]:A=T.data,A.type=t,U=this.buildInfoTableHeader(A.id);let z=this.translate.instant("VPN.PANEL.DAY_OPTS.0");if(A.days!==void 0&&(A.days%365||(A.days/=365,z=this.translate.instant("VPN.PANEL.DAY_OPTS.1"))),(t==O.OBJ_CERT_CLI||t==O.OBJ_CERT_SER)&&(A.name=A.cn,U+=`<tr><td class='fwcOrange'>${this.translate.instant("VPN.PANEL.FIELDS.DAYS_SHORT")}</td><td><strong>${A.days} ${z}</strong></td></tr>`),t==O.OBJ_OPENVPN_CONFIG_CLI||t==O.OBJ_OPENVPN_CONFIG_SER||t==O.OBJ_WGC_CONFIG_CLI||t==O.OBJ_WGS_CONFIG_SER||t==O.OBJ_ISC_CONFIG_CLI||t==O.OBJ_ISS_CONFIG_SER){let ee=this.translate.instant("VPN.CONFIG.INSTALL.CONFIG_NOT_INSTALLED"),re=t==O.OBJ_OPENVPN_CONFIG_CLI?this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_ADDRESS"):t==O.OBJ_WGC_CONFIG_CLI?this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_ADDRESS"):t==O.OBJ_ISC_CONFIG_CLI?this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_ADDRESS"):this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_NETWORK");if(U+=`<tr><td><span class='fwcOrange'>CN</span></td><td>${A.cn}</td></tr>`,A.cluster_id!==null&&A.cluster_id!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)} fwcWhite'></i> Cluster</td><td><strong>${A.cluster_name} (${A.cluster_id})</strong></td></tr>`:A.firewall_id!==null&&A.firewall_id!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name} (${A.firewall_id})</strong></td></tr>`),U+=`<tr><td><span class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CA)}'></i> CA</span></td><td>${A.CA_cn}</td></tr>`,A.openvpn_server_cn&&(U+=`<tr><td><span class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_OPENVPN_CONFIG_SER)}'></i> ${this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_OPENVPN_CONFIG_SER")}</span></td><td><strong>${A.openvpn_server_cn}</strong></td></tr>`),A.wireguard_server_cn&&(U+=`<tr><td><span class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_WGS_CONFIG_SER)}'></i> ${this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_WGS_CONFIG_SER")}</span></td><td><strong>${A.wireguard_server_cn}</strong></td></tr>`),A.ipsec_server_cn&&(U+=`<tr><td><span class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_ISS_CONFIG_SER)}'></i> ${this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_ISS_CONFIG_SER")}</span></td><td><strong>${A.ipsec_server_cn}</strong></td></tr>`),U+=`<tr><td><span class='fwcOrange'>${re}</span></td><td><strong>${A.address}</strong></td></tr>`,A.netmask&&(U+=`<tr><td><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.MASK")}</span></td><td><strong>${A.netmask}</strong></td></tr>`),!A.status&&A.installed_at){let ae=new Date(A.installed_at).toLocaleString();ee=this.translate.instant("VPN.CONFIG.INSTALL.CONFIG_INSTALLED",{installDate:ae})}U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("VPN.CONFIG.INSTALL.STATUS")}</span><br>${ee}</td></tr>`}t==O.OBJ_CA&&(A.name=A.cn,U+=`<tr><td class='fwcOrange'>${this.translate.instant("VPN.PANEL.FIELDS.DAYS_SHORT")}</td><td><strong>${A.days} ${z}</strong></td></tr>`,A.status&&(U+=`<tr><td colspan="2">${this.translate.instant("VPN.PANEL.NEW.CA_CREATING_SHORT")}</td></tr>`)),A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));l(A)},T=>{c(T)});break;case O.OBJ_PREFIX_FOLDER:break;case O.OBJ_OPENVPN_PREFIX:let I={prefix:e,fwcloud:this.fwcUserService.getActualFwSelectedCloud()};this.fwcVpnService.getOpenVPNPrefixInfo(I).subscribe(T=>{let A;if(T.data){let U;A=T.data,U=this.buildInfoTableHeader(A.id),A.cluster_name!==null&&A.cluster_name!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)} fwcWhite'></i> Cluster</td><td><strong>${A.cluster_name}</strong></td></tr>`:A.firewall_name!==null&&A.firewall_name!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name}</strong></td></tr>`),U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CA)}'></i> ${this.translate.instant("VPN.CA_CN")}</td><td><strong>${A.ca_cn}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_OPENVPN_CONFIG_SER)}'></i> ${this.translate.instant("VPN.CONFIG.CONFIG")}</td><td><strong>${A.cn}</strong></td></tr>`;let z=A.openvpn_clients?.length?{clients:A.openvpn_clients,icon:O.OBJ_OPENVPN_CONFIG_CLI}:A.wireguard_clients?.length?{clients:A.wireguard_clients,icon:O.OBJ_WGC_CONFIG_CLI}:null;z&&(U+=`
                      <tr>
                        <td class='fwcOrange'>
                          <i class='fwcIcon ${this.pipeFwcIcon.transform(z.icon)}'></i>
                          ${this.translate.instant("VPN.CONFIG.CLIENT_CONFIGS")}
                        </td>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <ul class='UlGroup'>
                            ${z.clients.map(ee=>`<li>${ee.cn} (${ee.address})</li>`).join("")}
                          </ul>
                        </td>
                      </tr>`),U+="</table>",A.type=t,A.infoHTML=U,l(A)}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"))},T=>{c(T)});break;case O.OBJ_WIREGUARD_PREFIX:let b={prefix:e,fwcloud:this.fwcUserService.getActualFwSelectedCloud()};this.fwcVpnService.getWireGuardPrefixInfo(b).subscribe(T=>{let A;if(T.data){let U;A=T.data.data,U=this.buildInfoTableHeader(A.id),A.cluster_name!==null&&A.cluster_name!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)} fwcWhite'></i> Cluster</td><td><strong>${A.cluster_name}</strong></td></tr>`:A.firewall_name!==null&&A.firewall_name!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name}</strong></td></tr>`),U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CA)}'></i> ${this.translate.instant("VPN.CA_CN")}</td><td><strong>${A.ca_cn}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_WGS_CONFIG_SER)}'></i> ${this.translate.instant("VPN.CONFIG.WG_CONFIG")}</td><td><strong>${A.cn}</strong></td></tr>`;let ee=Array.isArray(A.wireguard_clients)&&A.wireguard_clients.some(re=>re!=null)?{clients:A.wireguard_clients.filter(re=>re!=null),icon:O.OBJ_WGC_CONFIG_CLI}:null;ee&&(U+=`
                      <tr>
                        <td class='fwcOrange'>
                          <i class='fwcIcon ${this.pipeFwcIcon.transform(ee.icon)}'></i>
                          ${this.translate.instant("VPN.CONFIG.CLIENT_CONFIGS")}
                        </td>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <ul class='UlGroup'>
                            ${ee.clients.map(re=>`<li>${re.cn} (${re.address})</li>`).join("")}
                          </ul>
                        </td>
                      </tr>`),U+="</table>",A.type=t,A.infoHTML=U,l(A)}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"))},T=>{c(T)});break;case O.OBJ_IPSEC_PREFIX:let E={prefix:e,fwcloud:this.fwcUserService.getActualFwSelectedCloud()};this.fwcVpnService.getIPSecPrefixInfo(E).subscribe(T=>{let A;if(T.data){let U;A=T.data.data,U=this.buildInfoTableHeader(A.id),A.cluster_name!==null&&A.cluster_name!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)} fwcWhite'></i> Cluster</td><td><strong>${A.cluster_name}</strong></td></tr>`:A.firewall_name!==null&&A.firewall_name!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name}</strong></td></tr>`),U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CA)}'></i> ${this.translate.instant("VPN.CA_CN")}</td><td><strong>${A.ca_cn}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_ISS_CONFIG_SER)}'></i> ${this.translate.instant("VPN.CONFIG.IPS_CONFIG")}</td><td><strong>${A.cn}</strong></td></tr>`;let ee=Array.isArray(A.ipsec_clients)&&A.ipsec_clients.some(re=>re!=null)?{clients:A.ipsec_clients.filter(re=>re!=null),icon:O.OBJ_ISC_CONFIG_CLI}:null;ee&&(U+=`
                      <tr>
                        <td class='fwcOrange'>
                          <i class='fwcIcon ${this.pipeFwcIcon.transform(ee.icon)}'></i>
                          ${this.translate.instant("VPN.CONFIG.CLIENT_CONFIGS")}
                        </td>
                      </tr>
                      <tr>
                        <td colspan="2">
                          <ul class='UlGroup'>
                            ${ee.clients.map(re=>`<li>${re.cn} (${re.address})</li>`).join("")}
                          </ul>
                        </td>
                      </tr>`),U+="</table>",A.type=t,A.infoHTML=U,l(A)}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"))},T=>{c(T)});break;case O.OBJ_MARK:let R={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),mark:e};this.fwcMarkService.getMark(R).subscribe(T=>{let A;if(T.data){let U;A=T.data,A.type=O.OBJ_MARK,U=this.buildInfoTableHeader(A.id),U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.MARK_CODE")}</td><td><strong>${A.code}</strong></td></tr>`,A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange spanComments'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break;case O.OBJ_ROUTING_TABLE:this.fwcRoutingTableService.getRoutingTable(o,this.fwcUserService.getActualFwSelectedCloud(),e).subscribe(T=>{let A={};if(T.data){let U,z=T.data;A.type=O.OBJ_ROUTING_TABLE,A.name=z.name,U=this.buildInfoTableHeader(z.id),U+=`<tr><td class='fwcOrange'>${this.translate.instant("PANELS.ROUTING_TABLE_PANEL.FIELDS.NUMBER")}</td><td><strong>${z.number}</strong></td></tr>`,z.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange spanComments'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${z.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));l(A)},T=>{c(T)});break;case O.OBJ_DHCP_GROUP:this.fwcDhcpPolicyService.getDhcpGroup(this.fwcUserService.getActualFwSelectedCloud(),o,e).subscribe(T=>{let A={};if(T.data){let U,z=T.data;A.type=O.OBJ_DHCP_GROUP,A.name=z.name,U=this.buildInfoTableHeader(z.id),A.infoHTML=U}else c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));l(A)},T=>{c(T)});break;case O.OBJ_CONTINENT:this.fwcObjectService.getObjectGroup(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U;A=T.data,this.ContinentId=T.data.name,A.name=this.translate.instant("NODE_TYPES."+T.data.name),U=this.buildInfoTableHeader(A.id),A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break;default:this.fwcObjectService.getObject(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(T=>{let A;if(T.data){let U,z;switch(A=T.data,U=this.buildInfoTableHeader(A.id),z=+A.type,z){case O.OBJ_HOST:if(Array.isArray(A.interfaces)){let Z;U+=`<tr><td colspan="2"><span class='fwcOrange'>Interfaces</span><ul class='fitUlGroup'>`;for(let ae=0;ae<A.interfaces.length;ae++){Z=A.interfaces[ae];let Ie=new Sn().transform(Z.type);if(U+=`<li><i class='fwcIcon ${Ie}'></i> ${Z.name} (Id: <strong>${Z.id}</strong>)</li>`,Array.isArray(Z.ipobjs)){U+="<ul class='fitUl'>";for(let ye=0;ye<Z.ipobjs.length;ye++){let xe=new Sn().transform(Z.ipobjs[ye].type);U+=`<li><i class='fwcIcon ${xe}'></i> ${Z.ipobjs[ye].name} (Id: <strong>${Z.ipobjs[ye].id}</strong>)</li>`}U+="</ul>"}}U+="</ul></td></tr>"}break;case O.OBJ_ADDRESS:case O.OBJ_NETWORK:if(z==O.OBJ_ADDRESS){let Z=A.host_id!==null&&A.host_id!==void 0?O.OBJ_INTERFACE_HOST:O.OBJ_INTERFACE_FIREWALL;U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.IPV")}</td><td><strong>IPv${A.ip_version}</strong></td></tr>`,A.cluster_id!==null&&A.cluster_id!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_CLUSTER)} fwcWhite'></i> Cluster</td><td><strong>${A.cluster_name} (${A.cluster_id})</strong></td></tr>`:A.firewall_id!==null&&A.firewall_id!==void 0?U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_FIREWALL)}'></i> Firewall</td><td><strong>${A.firewall_name} (${A.firewall_id})</strong></td></tr>`:A.host_id!==null&&A.host_id!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(O.OBJ_HOST)}'></i> Host</td><td><strong>${A.host_name} (${A.host_id})</strong></td></tr>`),A.if_id!==null&&A.if_id!==void 0&&(U+=`<tr><td class='fwcOrange'><i class='fwcIcon ${this.pipeFwcIcon.transform(Z)}'></i> ${this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_INTERFACE_FIREWALL")}</td><td><strong>${A.if_name} (${A.if_id})</strong></td></tr>`)}U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.ADDRESS")}</td><td><strong>${A.address}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.MASK")}</td><td><strong>${A.netmask?A.netmask:""}</strong></td></tr>`;break;case O.OBJ_ADDRESS_RANGE:U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.RANGE_S")}</td><td><strong>${A.range_start?A.range_start:""}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.RANGE_E")}</td><td><strong>${A.range_end?A.range_end:""}</strong></td></tr>`;break;case O.OBJ_SERVICE_IP:U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.PROT")}</td><td><strong>${A.protocol}</strong></td></tr>`;break;case O.OBJ_SERVICE_TCP:case O.OBJ_SERVICE_UDP:U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.SRC_PORT")}</td><td><strong>${A.source_port_start?A.source_port_start:""}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.PORT_E")}</td><td><strong>${A.source_port_end?A.source_port_end:""}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.DEST_PORT")}</td><td><strong>${A.destination_port_start?A.destination_port_start:""}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.PORT_E")}</td><td><strong>${A.destination_port_end?A.destination_port_end:""}</strong></td></tr>`;break;case O.OBJ_SERVICE_ICMP:let ee=A.icmp_type?A.icmp_type==-1?"Any":A.icmp_type.toString():"",re=A.icmp_code?A.icmp_code==-1?"Any":A.icmp_code.toString():"";U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.ICMP_TYPE")}</td><td><strong>${ee}</strong></td></tr>`,U+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.ICMP_CODE")}</td><td><strong>${re}</strong></td></tr>`;break;case O.OBJ_COUNTRIE:this.CountryId=A.name.toLocaleLowerCase(),A.name=this.translate.instant("COUNTRIES."+A.name);break}A.comment&&(U+=`<tr><td colspan="2"><span class='fwcOrange spanComments'>${this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS")}</span><br>${A.comment}</td></tr>`),U+="</table>",A.infoHTML=U}else{c(this.translate.instant("GLOBALS.ERRORS.NO_INFO"));return}l(A)},T=>{c(T)});break}})}buildInfoTableHeader(e){let t="<table class='fitTableInfo'>";return t+=`<tr><td class='fwcOrange'>${this.translate.instant("ITEM_PANEL.FIELDS.OBJ_ID")}</td><td><strong>${e}</strong></td></tr>`,t}onMouseEnter(){this.itemSelectedService.isFocused()}onMouseLeave(){this.itemSelectedService.isBlur()}static{this.\u0275fac=function(t){return new(t||i)(S(wt),S(Vi),S(Io),S(ht),S(tb),S(at),S(Dt),S(Un),S(eb),S(er),S(Ei),S(Os),S(Eu),S(Ye),S(Sn),S(we))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-info-tooltip"]],viewQuery:function(t,r){if(t&1&&le(N5e,5),t&2){let o;te(o=ie())&&(r.tooltipElem=o.first)}},features:[et([Vi,Io,tb,Dt,er,eb,Sn])],decls:5,vars:9,consts:[["tooltipElem",""],["id","fitTooltipDiv",1,"fitTooltipDiv--light",3,"mouseenter","mouseleave","ngStyle"],["id","fitDivLoader"],[1,"fitDivInfo"],[1,"fa","fa-info-circle","fwcOrange"],[1,"fitSpanClose"],[1,"fa","fa-lg","fa-times-circle",3,"click"],[1,"fitDivInfoTitle"],["aria-hidden","true"],[1,"spanSep"],[3,"innerHTML"],[1,"fa","fa-exclamation-circle","fwcRed"]],template:function(t,r){if(t&1){let o=L();m(0,"div",1,0),k("mouseenter",function(){return y(o),w(r.onMouseEnter())})("mouseleave",function(){return y(o),w(r.onMouseLeave())}),v(2,V5e,2,3,"div",2)(3,G5e,23,16,"div",3)(4,H5e,9,1,"div"),g()}t&2&&(f("ngStyle",en(5,L5e,(r.tooltipY==null?null:r.tooltipY.toString())+"px",(r.tooltipX==null?null:r.tooltipX.toString())+"px",r.showTooltip?"visible":"hidden"))("@fundidoIn",void 0),p(2),W(r.loadingData?2:-1),p(),W(!r.loadingData&&r.objectInfo?3:-1),p(),W(!r.loadingData&&r.objectError?4:-1))},dependencies:[De,or,gt,Sn],styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}div#fitDivLoader{text-align:center}div.fitOverlayPanel.p-overlaypanel{min-width:250px;max-width:450px;color:var(--fwcWhite);background-color:var(--fwcMidDark2);border-radius:.5rem}div.fitDivInfo{color:var(--fwcDark);line-height:1.5;font-size:.85rem}div.fitDivInfo h6{border-bottom:1px solid var(--fwcOrange);padding-bottom:.3rem;margin-bottom:.3rem}div.fitDivInfo .fitDivInfoTitle{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;scrollbar-width:none}div.fitDivInfo table{width:100%;table-layout:fixed;margin-top:.3rem;border:0;background:none!important}div.fitDivInfo table tr,div.fitDivInfo table td{margin:0!important;padding:.3rem!important}div.fitDivInfo table td{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden}div.fitDivInfo table *{background:none!important}div.fitDivInfo spanComments{margin-bottom:.3rem}ul.fitUl{list-style-type:none;padding-left:1rem;margin-bottom:0}ul.fitUlGroup{list-style-type:none;padding-left:1rem;margin-bottom:0;height:120px;overflow-y:auto}ul.UlGroup{padding-left:1rem;margin-bottom:0;height:120px;overflow-y:auto}div#fitTooltipDiv{position:fixed;z-index:2000;padding:.7em;min-width:250px;max-width:450px;color:var(--fwcWhite);background-color:var(--fwcMidDark2);border:1px solid var(--fwcMidDark2);border-radius:.5rem;box-shadow:0 3px 1.2rem rgba(var(--fwcDark),.6)}div#fitTooltipDiv.fitTooltipDiv--light{color:var(--fwcDark)!important;background-color:var(--fwcWhite)!important;border:1px solid var(--fwcShadow)}div#fitTooltipDiv .fitSpanClose{float:right}div#fitTooltipDiv .fitSpanClose i{cursor:pointer}
`],encapsulation:2,data:{animation:[xS]}})}}return i})();var W5e=i=>({dialog_name:i});function z5e(i,n){if(i&1){let e=L();m(0,"i",5),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.restoreDialog(r))}),P(1,"img",6),g()}}function K5e(i,n){if(i&1){let e=L();m(0,"i",5),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.restoreDialog(r))}),P(1,"img",7),g()}}function $5e(i,n){if(i&1){let e=L();m(0,"i",5),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.restoreDialog(r))}),P(1,"img",8),g()}}function J5e(i,n){if(i&1){let e=L();m(0,"i",9),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.restoreDialog(r))}),g()}if(i&2){let e=u().$implicit;va("",e.dialogIcon," dockIcon")}}function q5e(i,n){if(i&1&&(m(0,"div",1)(1,"div",2),D(2,"translate"),v(3,z5e,2,0,"i",3)(4,K5e,2,0,"i",3)(5,$5e,2,0,"i",3)(6,J5e,1,3,"i",4),g()()),i&2){let e=n.$implicit,t=u(2);f("@fundidoIn",void 0),p(),Q("pTooltip",ei(2,7,"ITEM_PANEL.RESTORE",ne(10,W5e,e.dialogName))),f("escape",!1),p(2),W(e.dialogUUID==="NGFW_PANEL"&&e.dialogIcon==="NTOPNG"?3:-1),p(),W(e.dialogUUID==="NGFW_PANEL"&&e.dialogIcon==="WEBSAFETYPROXY"?4:-1),p(),W(e.dialogUUID==="NGFW_PANEL"&&e.dialogIcon==="DNSSAFETY"?5:-1),p(),W(e.dialogUUID!=t.NGFW_PANEL?6:-1)}}function Y5e(i,n){if(i&1&&(m(0,"div",0),xr(1,q5e,7,12,"div",1,Ar),g()),i&2){let e=u();p(),Tr(e.dialogPanels)}}var S4t=(()=>{class i{constructor(e,t){this.appDialogPanelsService=e,this.store=t,this.alive=!0,this.store.pipe(yt(()=>this.alive),Cn(na.selectMinimizedDialogs)).subscribe(r=>{this.dialogPanels=r})}restoreDialog(e,t){this.store.dispatch(on.restoreDialog({dialogId:e.dialogId}))}ngOnDestroy(){this.alive=!1}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-panel-dock"]],decls:1,vars:1,consts:[[1,"divFwcDock"],[1,"divFwcDock--button"],["showDelay","500","tooltipPosition","top",3,"pTooltip","escape"],[1,"dockIcon"],[3,"class"],[1,"dockIcon",3,"click"],["height","90","width","90","src","assets/img/ntopng.png"],["height","90","width","90","src","assets/img/websafety.png"],["height","90","width","90","src","assets/img/dnssafety.png"],[3,"click"]],template:function(t,r){t&1&&v(0,Y5e,3,0,"div",0),t&2&&W(r.dialogPanels!=null&&r.dialogPanels.length?0:-1)},dependencies:[cn,gt],styles:['[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}div.divFwcDock[_ngcontent-%COMP%]{position:absolute;bottom:.2rem;text-align:center;left:50%;transform:translate(-50%);-webkit-transform:translateX(-50%)}div.divFwcDock--button[_ngcontent-%COMP%]{display:inline-block;margin:0 .3rem}div.divFwcDock--button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid var(--fwcDarkBlue);border-radius:0!important;font-size:1.5rem!important;transition:all .25s}div.divFwcDock--button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{font-size:1.7rem!important}div.divFwcDock--button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span.p-button-icon-left[_ngcontent-%COMP%]{text-shadow:1px 1px rgba(0,0,0,.3)}div.divFwcDock--button[_ngcontent-%COMP%]   .dockIcon[_ngcontent-%COMP%]{font-size:3.5rem;cursor:pointer;transition:all .25s}div.divFwcDock--button[_ngcontent-%COMP%]   .dockIcon[_ngcontent-%COMP%]:before{font-weight:400;color:var(--fwcBlue)}div.divFwcDock--button[_ngcontent-%COMP%]   .dockIcon[_ngcontent-%COMP%]:hover{font-size:4rem!important}div.divFwcDock--button[_ngcontent-%COMP%]   .dockIcon[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:.5rem;width:100%;height:1rem;left:0;background:-webkit-radial-gradient(ellipse at 50% 50%,rgba(0,0,0,.5),rgba(97,97,97,0) 60%);background:radial-gradient(ellipse at 50% 50%,#00000080,#61616100 60%)}'],data:{animation:[xS]}})}}return i})();var TS=(()=>{class i{constructor(e){this.el=e}ngAfterViewInit(){}static{this.\u0275fac=function(t){return new(t||i)(S(Ze))}}static{this.\u0275dir=Et({type:i,selectors:[["","appFocusable",""]]})}}return i})();var Q5e=()=>({"max-width":"40rem"}),Z5e=i=>({"flex-direction":i}),eBe=i=>({noColor:i}),kF=i=>({"background-color":i});function tBe(i,n){if(i&1&&(m(0,"h6",6),P(1,"i",7),F(2),g()),i&2){let e=u();p(2),J(" ",e.dialogData==null?null:e.dialogData.header,"")}}function iBe(i,n){if(i&1){let e=L();m(0,"input",17),k("blur",function(){y(e);let r=u(2).$implicit,o=u(2);return w(o.blurHandler(r))})("keydown.enter",function(r){y(e);let o=u(4);return w(o.checkDialog(r))})("keydown.esc",function(r){y(e);let o=u(4);return w(o.cancelDialog(r))})("keydown.tab",function(r){y(e);let o=u(4);return w(o.focusNext(r))})("keydown.shift.tab",function(r){y(e);let o=u(4);return w(o.focusNext(r))}),g()}if(i&2){let e=u(2),t=e.$implicit,r=e.$index;Q("id","input_"+r),f("type",t.type)("formControlName",t.name)("name",t.name)}}function nBe(i,n){if(i&1&&(m(0,"option",18),F(1),g()),i&2){let e=u(3).$implicit;f("ngValue",void 0),p(),$(e.placeholder)}}function rBe(i,n){if(i&1&&(m(0,"option",18),F(1),g()),i&2){let e=n.$implicit;f("ngValue",e.id),p(),J(" ",e.text," ")}}function oBe(i,n){if(i&1&&(m(0,"select",13),v(1,nBe,2,2,"option",18),xr(2,rBe,2,2,"option",18,Ar),g()),i&2){let e=u(2),t=e.$implicit,r=e.$index;Q("id","select_"+r),f("formControlName",t.name),p(),W(t.placeholder?1:-1),p(),Tr(t.options)}}function sBe(i,n){if(i&1){let e=L();m(0,"textarea",19),k("keydown.tab",function(r){y(e);let o=u(4);return w(o.focusNext(r))})("keydown.shift.tab",function(r){y(e);let o=u(4);return w(o.focusNext(r))}),g()}if(i&2){let e=u(2),t=e.$implicit,r=e.$index;Q("id","textarea_"+r),f("formControlName",t.name)("name",t.name)}}function aBe(i,n){if(i&1&&(m(0,"div",8)(1,"div",10)(2,"span",11),v(3,iBe,1,4,"input",12)(4,oBe,4,3,"select",13)(5,sBe,1,3,"textarea",14),m(6,"label",15),P(7,"i",8),F(8),g()()(),m(9,"p",16),F(10),D(11,"translate"),g()()),i&2){let e=u().$implicit,t=u(2);f("ngClass",e.halfSized?"col-6":"col-12"),p(3),W(e.type!=="textarea"&&e.type!=="hidden"&&e.type!=="select"?3:-1),p(),W(e.type==="select"?4:-1),p(),W(e.type==="textarea"?5:-1),p(),f("for",e.name),p(),f("ngClass",e.icon),p(),J(" \xA0 ",e.label," "),p(),f("hidden",t.formModel.get(e.name).valid||t.formModel.get(e.name).untouched),p(),$(N(11,9,"ITEM_PANEL.ERRORS.FIELD_FORMAT"))}}function lBe(i,n){if(i&1){let e=L();m(0,"button",29),k("click",function(){let r=y(e).$implicit,o=u(2).$implicit,s=u(2);return w(s.setColor(o.name,r))}),g()}if(i&2){let e=n.$implicit;f("ngStyle",ne(1,kF,e))}}function cBe(i,n){if(i&1){let e=L();m(0,"button",31),k("click",function(){let r=y(e).$implicit,o=u(3).$implicit,s=u(2);return w(s.setColor(o.name,r))}),g()}if(i&2){let e=n.$implicit,t=u(5);f("ngStyle",ne(1,kF,e&&t.RulesStylesBg[e]?t.RulesStylesBg[e]:e))}}function dBe(i,n){if(i&1&&(m(0,"div",23)(1,"label"),F(2),D(3,"translate"),g()(),m(4,"div",23),xr(5,cBe,1,3,"button",30,Ar),g()),i&2){let e=u(4);p(2),$(N(3,1,"PANELS.INPUT_PANEL.COLORS_MOST_USED")),p(3),Tr(e.mostUsedColors)}}function pBe(i,n){if(i&1){let e=L();m(0,"div",20)(1,"p-colorPicker",21),k("onChange",function(r){y(e);let o=u().$implicit,s=u(2);return w(s.onChangePickerColor(o.name,r))}),g()(),m(2,"div",22)(3,"div",2)(4,"div",23)(5,"label"),F(6),D(7,"translate"),g()(),m(8,"div",23),xr(9,lBe,1,3,"button",24,Ar),g()(),v(11,dBe,7,3),m(12,"div",23)(13,"div",10)(14,"span",25),P(15,"span",26),g(),m(16,"input",27),k("blur",function(){y(e);let r=u().$implicit,o=u(2);return w(o.blurHandler(r))})("keyup",function(r){y(e);let o=u().$implicit,s=u(2);return w(s.onSetManualColorHandler(o.name,r))}),g(),m(17,"button",28),D(18,"translate"),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.setColor(r.name,null))}),g()(),m(19,"p",16),F(20),D(21,"translate"),g()()()}if(i&2){let e=u(),t=e.$implicit,r=e.$index,o=u(2);p(),f("inline",!0)("formControlName",t.name),p(5),$(N(7,15,"PANELS.INPUT_PANEL.COLORS_STANDARD")),p(3),Tr(o.DefaultPaletteColors),p(2),W(o.mostUsedColors!=null&&o.mostUsedColors.length?11:-1),p(4),f("ngClass",ne(21,eBe,!o.formModel.get(t.name).value||!o.formModel.get(t.name).valid))("ngStyle",ne(23,kF,o.formModel.get(t.name).valid?o.formModel.get(t.name).value:"")),p(),Q("id","input_cp_"+r),f("placeholder",t.placeholder)("formControlName",t.name)("name",t.name),p(),f("pTooltip",N(18,17,"PANELS.INPUT_PANEL.NO_COLOR_TOOLTIP"))("showDelay",500)("disabled",o.formModel.get(t.name).invalid),p(2),f("hidden",o.formModel.get(t.name).valid||o.formModel.get(t.name).pristine),p(),$(N(21,19,"ITEM_PANEL.ERRORS.HEX_COLOR"))}}function uBe(i,n){i&1&&P(0,"div",3)}function hBe(i,n){if(i&1&&P(0,"input",9),i&2){let e=u().$implicit;f("formControlName",e.name)("name",e.name)}}function fBe(i,n){if(i&1&&v(0,aBe,12,11,"div",8)(1,pBe,22,25)(2,uBe,1,0,"div",3)(3,hBe,1,2,"input",9),i&2){let e=n.$implicit;W(e.type!=="hidden"&&e.type!=="button"&&e.type!=="separator"&&e.type!=="colorpicker"?0:-1),p(),W(e.type==="colorpicker"?1:-1),p(),W(e.type==="separator"?2:-1),p(),W(e.type==="hidden"?3:-1)}}function mBe(i,n){if(i&1&&(m(0,"form",4),xr(1,fBe,4,4,null,null,Ar),g()),i&2){let e=u();f("formGroup",e.formModel)("ngStyle",ne(2,Z5e,e.dialogData.isClonePanel||e.dialogData.isSSHPanel?"column":"row")),p(),Tr(e.dialogData.formControls)}}function gBe(i,n){if(i&1){let e=L();m(0,"button",36),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.clickButton(r.name))}),g()}if(i&2){let e=u().$implicit;ce(e.class),f("icon",e.icon)("label",e.label)("disabled",e.readonly)}}function _Be(i,n){if(i&1&&v(0,gBe,1,5,"button",35),i&2){let e=n.$implicit;W(e.type==="button"?0:-1)}}function CBe(i,n){if(i&1){let e=L();xr(0,_Be,1,1,null,null,Ar),P(2,"span",32),m(3,"button",33),D(4,"translate"),k("click",function(){y(e);let r=u();return w(r.cancelDialog())}),g(),m(5,"button",34),k("click",function(){y(e);let r=u();return w(r.acceptDialog())}),g()}if(i&2){let e=u();Tr(e.dialogData==null?null:e.dialogData.formControls),p(3),Q("label",N(4,2,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),f("disabled",!(e.formModel!=null&&e.formModel.valid))}}var W4t=(()=>{class i{constructor(e,t,r,o,s,a){this.inputDataService=e,this.cd=t,this.fwcUserService=r,this.fwcCloudService=o,this.utilService=s,this.translate=a,this.displayDialog=!1,this.modal=!0,this.dialogValues=new X,this.DefaultPaletteColors=pB,this.RulesStylesBg=dv}ngOnInit(){this.inputDataService.getInputData().subscribe(e=>{this.showDialog(e)})}ngAfterViewInit(){}blurHandler(e){let t=this.formModel.get(e.name);t.pristine&&t.markAsUntouched()}showDialog(e){return B(this,null,function*(){let t=!1;if(this.formModel=new rr({}),this.dialogData=e,e.modal==!1?this.modal=!1:this.modal=!0,this.onAccept=e.onAccept,e.formControls){let r=[],o=!1;e.isClonePanel=!!e.formControls.find(s=>s.label==="Firewall name"||s.label==="Address")||e.header==this.translate.instant("SNAPSHOTS_PANEL.MANAGE.DO_DIALOG.HEADER")||e.header==this.translate.instant("PANELS.DHCP_GROUP_PANEL.FIELDS.NAME"),e.isSSHPanel=!!e.formControls.find(s=>s.label==="SSH user");for(let s of e.formControls)this.formModel.addControl(s.name,new ve({value:s.value,disabled:s.readonly})),r=[],s.required&&r.push(Pe.required),s.regexp&&r.push(Pe.pattern(s.regexp)),s.type==="colorpicker"&&(r.push(Pe.pattern(/^#([A-Fa-f0-9]{6})$/)),o=!0),this.formModel.get(s.name).setValidators(r),s.type=="select"&&(s.options||(s.options=[]),s.options.forEach(a=>{a.default&&this.formModel.get(s.name).setValue(a.id)})),!t&&s.type!="hidden"&&(s.isFirst=!0,t=!0);if(o){this.mostUsedColors=[];try{let s=yield this.utilService.fwcAPICall(this.fwcCloudService.getCloudColors.bind(this.fwcCloudService),this.fwcUserService.getActualFwSelectedCloud());Array.isArray(s.data)&&(this.mostUsedColors=s.data.map(a=>a.color))}catch{}}}this.displayDialog=!0,setTimeout(()=>{if(this.recenterDialog(),this.dialogData&&this.dialogData.formControls)for(let r of this.dialogData.formControls)r.type==="colorpicker"&&r.value&&this.setColor(r.name,r.value)},1)})}recenterDialog(){try{this.cd.destroyed||this.cd.detectChanges(),this.inputDialog&&this.inputDialog.center()}catch{}}onShowDialog(){this.recenterDialog(),setTimeout(()=>{this.firstInputField&&this.firstInputField.el&&this.firstInputField.el.nativeElement.focus()},150)}onHideDialog(){this.dialogData=null,this.formModel=null}acceptDialog(){this.closeDialog(),this.onAccept&&this.onAccept(this.formModel.value)}cancelDialog(e){this.closeDialog(),this.onAccept(null)}closeDialog(){this.displayDialog=!1}checkDialog(e){if(this.formModel.valid)this.acceptDialog();else for(let t in this.formModel.controls)this.formModel.controls[t].markAsDirty()}focusNext(e){if(e){let t=[],r=e.shiftKey?-1:1,o=-1;if(this.focusableInputs.forEach((s,a)=>{s.el.nativeElement.id===e.target.id&&(o=a),t.push(s.el)}),o!==-1){let s=o<t.length-1?o+1:0;r===-1&&(s=o?o-1:t.length-1),t[s].nativeElement.focus()}e.stopPropagation(),e.preventDefault()}}clickButton(e){this.formModel.get(e).setValue(!0),this.acceptDialog()}setColor(e,t){let r=this.formModel.get(e);r&&(r.setValue(t&&dv[t]?dv[t]:t),r.markAsPristine(),this.cd.destroyed||this.cd.detectChanges())}onSetManualColorHandler(e,t){if(this.formModel.updateValueAndValidity(),t&&t.preventDefault(),this.formModel.valid){let r=this.formModel.get(e);r&&this.setColor(e,r.value)}else this.setColor(e,null)}onChangePickerColor(e,t){t.originalEvent.preventDefault(),this.onSetManualColorHandler(e)}static{this.\u0275fac=function(t){return new(t||i)(S(Cr),S(we),S(at),S(ta),S(ft),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-input-panel"]],viewQuery:function(t,r){if(t&1&&(le(Yt,5),le(Xi,5),le(TS,5)),t&2){let o;te(o=ie())&&(r.inputDialog=o.first),te(o=ie())&&(r.firstInputField=o.first),te(o=ie())&&(r.focusableInputs=o)}},outputs:{dialogValues:"dialogValues"},features:[et([ta])],decls:9,vars:9,consts:[["styleClass","dlgFwcDialog",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],[1,"col-12"],["novalidate","",2,"width","100%","display","flex",3,"formGroup","ngStyle"],["pTemplate","footer"],[1,"dlgFwcDialog-header"],[1,"fa","fa-pencil","fwcOrange"],[3,"ngClass"],["type","hidden",3,"formControlName","name"],[1,"p-inputgroup"],[1,"p-float-label"],["appFocusable","","pInputText","",3,"type","formControlName","name","id"],["appFocusable","",1,"fwcSelect",3,"formControlName","id"],["appFocusable","","pInputTextarea","","rows","3",3,"formControlName","name","id"],[3,"for"],[1,"fwc-error",3,"hidden"],["appFocusable","","pInputText","",3,"blur","keydown.enter","keydown.esc","keydown.tab","keydown.shift.tab","type","formControlName","name","id"],[3,"ngValue"],["appFocusable","","pInputTextarea","","rows","3",3,"keydown.tab","keydown.shift.tab","formControlName","name","id"],[1,"col-6","fwc-centered"],[3,"onChange","inline","formControlName"],[1,"col-6"],[1,"col-12","grid","grid-nogutter","fwcDivPaddedB"],["label"," ","pButton","",1,"p-button-secondary",3,"ngStyle"],[1,"p-inputgroup-addon",2,"position","relative"],[1,"spanColorBlock",3,"ngClass","ngStyle"],["pInputText","","type","text",3,"blur","keyup","placeholder","formControlName","name","id"],["pButton","","type","button","icon","fa fa-trash",1,"p-button-danger",3,"click","pTooltip","showDelay","disabled"],["label"," ","pButton","",1,"p-button-secondary",3,"click","ngStyle"],["pButton","","label"," ",1,"p-button-secondary",3,"ngStyle"],["pButton","","label"," ",1,"p-button-secondary",3,"click","ngStyle"],[1,"spanSep"],["type","button","pButton","","icon","fa fa-ban",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","pi pi-check","label","Ok",1,"p-button-info",3,"click","disabled"],["type","button","pButton","",3,"class","icon","label","disabled"],["type","button","pButton","",3,"click","icon","label","disabled"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onShow",function(){return r.onShowDialog()})("onHide",function(){return r.onHideDialog()}),v(1,tBe,3,1,"ng-template",1),m(2,"div",2)(3,"div",3)(4,"p"),F(5),g()(),P(6,"div",3),v(7,mBe,3,4,"form",4),g(),v(8,CBe,6,4,"ng-template",5),g()),t&2&&(st(Ae(8,Q5e)),Te("visible",r.displayDialog),f("modal",r.modal)("closable",!1)("resizable",!0),p(5),J(" ",r.dialogData==null?null:r.dialogData.helpText," "),p(2),W(r.dialogData!=null&&r.dialogData.formControls?7:-1))},dependencies:[je,De,Kn,wp,vp,Li,uc,Pi,zn,$n,Qn,Yt,Ee,pt,cn,Xi,Qr,DF,TS,gt],styles:[`.spanColorBlock{position:absolute;top:0;left:0;display:inline-block;height:100%;width:100%}.spanColorBlock.noColor{background:repeating-linear-gradient(-45deg,#eee,#eee 10px,#e5e5e5 10px 20px)}.dlgFwcDialog.p-dialog [class*=grid]{margin-bottom:0!important;margin-top:0!important}.p-dialog-content{color:#333;padding:.671em 1.3rem;font-family:Montserrat,Arial,sans-serif;font-size:.9rem;max-width:30vw}.p-float-label>label{left:.429rem;color:#9b9b9b;transition-duration:.2s}.p-float-label:first-child{margin-bottom:10px}
`],encapsulation:2})}}return i})();var IBe=["panelHint"];function yBe(i,n){if(i&1&&P(0,"img",3),i&2){let e=u();f("src",e.hint.imageURL,rs)}}function wBe(i,n){i&1&&P(0,"i",4)}var q4t=(()=>{class i{constructor(e,t){this.appHintsService=e,this.translate=t}ngOnInit(){this.appHintsService.getHintToShow().subscribe(e=>{if(e){let t,r;this.hint=e,e.target&&(t=e.target.nativeElement),e.event?r=e.event:r=document.createEvent("MouseEvent"),this.panelHint.show(r,t)}})}static{this.\u0275fac=function(t){return new(t||i)(S(yv),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-hint"]],viewQuery:function(t,r){if(t&1&&le(IBe,5),t&2){let o;te(o=ie())&&(r.panelHint=o.first)}},decls:14,vars:11,consts:[["panelHint",""],["styleClass","fwcHintPnl"],[1,"hint--image"],[3,"src"],["aria-hidden","true",1,"fa","fa-4x","fa-lightbulb","fwcBlue"],[1,"hint--text"],[3,"innerHTML"],[1,"hint--buttons"],["pButton","","icon","fa fa-check",1,"p-button-primary",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-overlayPanel",1,0)(2,"div",2),v(3,yBe,1,1,"img",3)(4,wBe,1,0,"i",4),g(),m(5,"div",5)(6,"h5"),F(7),D(8,"translate"),g(),P(9,"p",6),D(10,"translate"),g(),m(11,"div",7)(12,"button",8),D(13,"translate"),k("click",function(){y(o);let a=He(1);return w(a.hide())}),g()()()}t&2&&(p(3),W(r.hint!=null&&r.hint.imageURL?3:-1),p(),W(r.hint!=null&&r.hint.imageURL?-1:4),p(3),$(N(8,5,r.hint==null?null:r.hint.caption)),p(2),Q("innerHTML",N(10,7,r.hint==null?null:r.hint.description),an),p(3),Q("label",N(13,9,"GLOBALS.MSG_BUTTONS.UNDERSTAND")))},dependencies:[pt,rh,gt],styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.fwcHintPnl.no-fwclouds.p-overlaypanel{margin-top:.625em}.fwcHintPnl.p-overlaypanel{max-width:30rem;margin-top:14.5em;margin-left:1.25em}.fwcHintPnl.p-overlaypanel .hint--image{display:table-cell;vertical-align:top;padding-right:1rem}.fwcHintPnl.p-overlaypanel .hint--text{display:table-cell;vertical-align:top}.fwcHintPnl.p-overlaypanel .hint--text p{color:var(--fwcMidDark)}.fwcHintPnl.p-overlaypanel .hint--buttons{float:right;margin:.5em auto}
`],encapsulation:2})}}return i})();var Au=(()=>{class i{constructor(e,t,r){this.fwcPolicyService=e,this.fwcUserService=t,this.store=r}goToObjectDependency(e){if((e.rule_id||e.route_id||e.routing_rule_id||e.dhcp_rule_id||e.haproxy_rule_id||e.keepalived_rule_id)&&e.firewall_id&&!e._fwItem){let t=e.rule_type,r=e.rule_id,o=e.obj_id,s=e.obj_type_id,a=[e.rule_position_id],l,c;e.route_id?(t=Zr.ROUTING_TABLE,r=e.route_id,l=e.table_id,c=e.table_name,o=null,s=null,a=[],e.gateway_id&&(o=e.gateway_id,s=e.gateway_type,a.push(Fi.GATEWAY_POSITION)),e.interface_id&&(o=e.interface_id,s=e.interface_type,a.push(Fi.INTERFACE_POSITION)),!e.gateway_id&&!e.interface_id&&(o=s=void 0,a.push(Fi.TO_POSITION))):e.routing_rule_id?(t=Zr.POLICY_ROUTING,r=e.routing_rule_id,e.routing_table_id?a=[_o.ROUTING_TABLE_POSITION]:(o=e.ipobj_id,s=e.ipobj_type,a=[_o.FROM_POSITION])):e.dhcp_rule_id?(e.dhcp_rule_type===2||e.dhcp_rule_rule_type===2?(t=ki[M.DHCP_FIXED_IP],e.interface_id?(o=e.interface_id,a=[xs.INTERFACE]):(o=e.dhcp_rule_router,a=[xs.IP])):(t=ki[M.DHCP],e.network_id&&(o=e.network_id,a.push(xs.NETWORK)),e.ipObj_id&&(o=e.ipObj_id,a.push(xs.DNS)),e.range_id&&(o=e.range_id,a.push(xs.RANGE)),e.router_id&&(o=e.router_id,a.push(xs.ROUTER))),r=e.dhcp_rule_id):e.haproxy_rule_id?(t=ki[M.HAPROXY],e.frontendIp_id&&(o=e.frontendIp_id,a.push(Na.FRONTEND_IP)),e.frontendPort_id&&(o=e.frontendPort_id,a.push(Na.FRONTEND_PORT)),e.backendIps_id&&(o=e.backendIps_id,a.push(Na.BACKEND_IPS)),e.backendPort_id&&(o=e.backendPort_id,a.push(Na.BACKEND_PORT)),r=e.haproxy_rule_id):e.keepalived_rule_id&&(t=ki[M.KEEPALIVED],e.interface_id&&(o=e.interface_id,a.push(Id.INTERFACE)),e.keepalived_rule_virtualIps&&(o=e.keepalived_rule_virtualIps,a.push(Id.VIRTUAL_IPS)),e.keepalived_rule_masterNode&&(o=e.keepalived_rule_masterNode,a.push(Id.MASTER_NODE)),r=e.keepalived_rule_id);let d={};return d.fwcloud=this.fwcUserService.getActualFwSelectedCloud(),d._fwcPolicyType=t,d._fwcClusterId=e.cluster_id,d._fwcFwId=e.firewall_id,d._fwcFwName=e.cluster_name?e.cluster_name:e.firewall_name,d._fwcObjId=l,e.route_id?d._fwcPolicyName=c:e.dhcp_rule_id?e.dhcp_rule_type===2?d._fwcPolicyName="Fixed IPs":d._fwcPolicyName="DHCP":e.keepalived_rule_id?d._fwcPolicyName="Keepalived":e.haproxy_rule_id&&(d._fwcPolicyName="HAProxy"),d._fwcSelectRuleId=r,d._fwcSelectRulePositionIds=a,d._fwcSelectObjId=o,d._fwcSelectObjType=s,this.fwcPolicyService.setSelectedPolicy(d),!0}else{let t={};if(t._fwcSubObjId=e.obj_id,t._fwcSubObjType=e.obj_type_id,t.fwcloud=e.cloud_id||this.fwcUserService.getActualFwSelectedCloud(),e.group_id)t._fwcObjId=e.group_id,t._fwcObjType=e.group_type;else if(e.interface_id)t._fwcObjId=e.interface_id,t._fwcObjType=e.interface_type_id;else if(e.host_id)t._fwcObjId=e.host_id,t._fwcObjType=e.host_type;else if(e.openvpn)t._fwcObjId=e.id,t._fwcObjType=O.OBJ_OPENVPN_CONFIG_CLI;else if(e.wireguard)t._fwcObjId=e.id,t._fwcObjType=O.OBJ_WGC_CONFIG_CLI;else if(e.ipsec)t._fwcObjId=e.id,t._fwcObjType=O.OBJ_ISC_CONFIG_CLI;else if(e.firewall_id&&e.obj_id&&!e.rule_id||e._fwItem)e.cluster_id?(t._fwcObjId=e.cluster_id,t._fwcObjType=O.OBJ_CLUSTER):(t._fwcObjId=e.firewall_id,t._fwcObjType=O.OBJ_FIREWALL),e._fwItem&&(t._fwcSubObjId=null,t._fwcSubObjType=null);else return;return this.store.dispatch(eo.selectTreeItem({item:t})),!0}}static{this.\u0275fac=function(t){return new(t||i)(de(Un),de(at),de(nt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var vBe=i=>({"p-state-highlight":i});function bBe(i,n){if(i&1){let e=L();m(0,"div",11),k("dblclick",function(r){let o=y(e).$implicit,s=u(3);return w(s.itemDblClickEvent(r,o))}),P(1,"span",12),g()}if(i&2){let e=n.$implicit;f("ngClass",ne(2,vBe,e.visited)),p(),Q("innerHTML",e.label,an)}}function SBe(i,n){if(i&1){let e=L();m(0,"p-tree",9),Oe("selectionChange",function(r){y(e);let o=u(2);return Re(o.selectedRule,r)||(o.selectedRule=r),w(r)}),v(1,bBe,2,4,"ng-template",10),g()}if(i&2){let e=u(2);f("value",e.ruleItemsNodes),Te("selection",e.selectedRule)}}function EBe(i,n){i&1&&(P(0,"p-message",6),D(1,"translate")),i&2&&Q("text",N(1,1,"WU.NOT_USED_RULE"))}function ABe(i,n){if(i&1){let e=L();m(0,"div",13),k("dblclick",function(r){let o=y(e).$implicit,s=u(3);return w(s.itemDblClickEvent(r,o))}),P(1,"span",12),g()}if(i&2){let e=n.$implicit;p(),Q("innerHTML",e.label,an)}}function xBe(i,n){if(i&1){let e=L();m(0,"p-tree",9),Oe("selectionChange",function(r){y(e);let o=u(2);return Re(o.selectedObject,r)||(o.selectedObject=r),w(r)}),v(1,ABe,2,1,"ng-template",10),g()}if(i&2){let e=u(2);f("value",e.objectItemsNodes),Te("selection",e.selectedObject)}}function TBe(i,n){i&1&&(P(0,"p-message",6),D(1,"translate")),i&2&&Q("text",N(1,1,"WU.NOT_USED_OBJECT"))}function OBe(i,n){if(i&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"label")(4,"strong"),P(5,"i",3),g(),F(6),D(7,"translate"),D(8,"translate"),m(9,"span",4)(10,"strong"),F(11),g()()()(),v(12,SBe,2,2,"p-tree",5)(13,EBe,2,3,"p-message",6),g(),m(14,"div",7)(15,"div",2)(16,"label")(17,"strong"),P(18,"i",8),g(),F(19),D(20,"translate"),m(21,"span",4)(22,"strong"),F(23),g()()()(),v(24,xBe,2,2,"p-tree",5)(25,TBe,2,3,"p-message",6),g()()),i&2){let e=u();p(6),Es("\xA0",N(7,9,"WU.RULES"),"/",N(8,11,"WU.ROUTES"),"\xA0\xA0"),p(5),$(e.getTreeItemsNumber(e.ruleItemsNodes)),p(),W(e.ruleItemsNodes!=null&&e.ruleItemsNodes.length?12:-1),p(),W(e.ruleItemsNodes!=null&&e.ruleItemsNodes.length?-1:13),p(6),J("\xA0",N(20,13,"WU.OBJECTS"),"\xA0\xA0"),p(4),$(e.getTreeItemsNumber(e.objectItemsNodes)),p(),W(e.objectItemsNodes!=null&&e.objectItemsNodes.length?24:-1),p(),W(e.objectItemsNodes!=null&&e.objectItemsNodes.length?-1:25)}}var mg=(()=>{class i{set objectInfo(e){e&&(this._objectInfo=e,this.ruleItemsNodes=this.selectedRule=null,this.objectItemsNodes=this.selectedObject=null,this.parseInfo())}constructor(e,t,r,o,s,a,l,c){this.store=e,this.refService=t,this.fwcPolicyService=r,this.fwcPositionService=o,this.translate=s,this.fwcUserService=a,this.fwcWhereUsedFunctionalityService=l,this.pipeFwcIcon=c,this.ObjectTypes=O,this.contextMenuReference=null,this.selMode=1,this.onHideParent=new X}ngOnInit(){}ngAfterViewInit(){let e=this;setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t},1)}parseInfo(){let e,t,r;if(t=this._objectInfo,!!t&&(r=t.restrictions,!!r)){this.ruleItemsNodes=[],this.objectItemsNodes=[];for(let o of Object.keys(r)){let s=r[o];Array.isArray(s)&&s.length&&s[0]&&(s[0].rule_id!=null&&s[0].rule_type!=null||s[0].routing_rule_id!=null||s[0].route_id!=null||s[0].dhcp_rule_id!=null||s[0].keepalived_rule_id!=null||s[0].haproxy_rule_id!=null?this.ruleItemsNodes=this.buildRuleTreeNodes(o,s,this.ruleItemsNodes):(e=this.buildObjectTreeNodes(s,o),this.objectItemsNodes.push(e)))}}}getTreeItemsNumber(e){let t=0,r;if(e)for(r=e.slice(0);r.length;){let o=r.pop();o.children&&o.children.length?r.push(...o.children):t++}return t}itemDblClickEvent(e,t){let r;e.preventDefault(),e.stopPropagation(),this.clearVisitedStatus(),t?(r=t.data,t.visited=!0):e&&(r=e.value),r&&!this.readOnly&&this.fwcWhereUsedFunctionalityService.goToObjectDependency(r)&&this.onHideParent.emit(!0)}clearVisitedStatus(){let e=t=>{t.visited=!1,t.children&&t.children.forEach(e)};this.ruleItemsNodes.forEach(e)}buildRuleTreeNodes(e,t,r=[]){for(let o of t){let s=r.find(c=>!!(c.data&&c.data.firewall_id==o.firewall_id)),a,l;if(o.rule_id?o.rule_position_name?(a="WU.FOUND_IN_RULE",l={policy_name:o.rule_type_name,rule_id:o.rule_id,pos_name:o.rule_position_name}):(a="WU.FOUND_IN_RULE_NO_POS",l={policy_name:o.rule_type_name,rule_id:o.rule_id}):o.route_id?e==="IpobjInRouteAsGateway"?(a="WU.FOUND_IN_ROUTE_GATEWAY",l={route_id:o.route_id,table_name:o.table_name,table_number:o.table_number}):(a="WU.FOUND_IN_ROUTE",l={route_id:o.route_id,table_name:o.table_name,table_number:o.table_number}):o.routing_rule_id?(a="WU.FOUND_IN_ROUTING_RULE",l={routing_rule_id:o.routing_rule_id}):o.dhcp_rule_id&&(o.dhcp_rule_rule_type===2||o.dhcp_rule_type===2)?(a="WU.FOUND_IN_FIXED_DHCP_RULE",l={dhcp_rule_id:o.dhcp_rule_id,pos_name:o.rule_position_name}):o.dhcp_rule_id?(a="WU.FOUND_IN_REGULAR_DHCP_RULE",o.dhcp_rule_range&&(o.ipObj_id==null||o.ipObj_id==null)?o.range_id?(a="WU.FOUND_IN_REGULAR_DHCP_RULE_NO_POS",l={dhcp_rule_id:o.dhcp_rule_id}):l={dhcp_rule_id:o.dhcp_rule_id,pos_name:"Router"}:!o.dhcp_router&&o.ipObj_id!=null&&o.ipObj_id!=null?l={dhcp_rule_id:o.dhcp_rule_id,pos_name:"DNS"}:(a="WU.FOUND_IN_REGULAR_DHCP_RULE_NO_POS",l={dhcp_rule_id:o.dhcp_rule_id})):o.keepalived_rule_id?(a="WU.FOUND_IN_KEEPALIVED_RULE",l={keepalived_rule_id:o.keepalived_rule_id}):o.haproxy_rule_id&&(a="WU.FOUND_IN_HAPROXY_RULE",o.frontendIp_id?l={haproxy_rule_id:o.haproxy_rule_id,pos_name:"Frontend Ip"}:o.frontendPort_id?l={haproxy_rule_id:o.haproxy_rule_id,pos_name:"Frontend Port"}:o.backendIps_id?l={haproxy_rule_id:o.haproxy_rule_id,pos_name:"Backend Ip"}:o.backendPort_id&&(l={haproxy_rule_id:o.haproxy_rule_id,pos_name:"Backend Port"})),s){let c={};s.children||(s.children=[]),s.children.find(h=>h.data.rule_id!==void 0&&h.data.rule_id===o.rule_id&&h.data.rule_position_id!==void 0&&h.data.rule_position_id===o.rule_position_id&&h.data.dhcp_rule_id!==void 0&&h.data.dhcp_rule_id===o.dhcp_rule_id&&h.data.keepalived_rule_id!==void 0&&h.data.keepalived_rule_id===o.keepalived_rule_id&&h.data.haproxy_rule_id!==void 0&&h.data.haproxy_rule_id===o.haproxy_rule_id)||(c.label=this.translate.instant(a,l),c.data=Object.assign({},o),s.children.push(c))}else{let c={},d={},h,_;o.cluster_id!==void 0&&o.cluster_id!==null?(h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <strong>"+o.cluster_name+"</strong>",_=O.OBJ_CLUSTER):(h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <strong>"+o.firewall_name+"</strong>",_=O.OBJ_FIREWALL),c.label=h,c.icon=this.pipeFwcIcon.transform(_),c.children=[],c.data=Object.assign({},o),c.data._fwItem=!0,c.expanded=!0,d.label=this.translate.instant(a,l),d.data=Object.assign({},o),c.children.push(d),r.push(c)}}return r.length?r:null}buildObjectTreeNodes(e,t){let r,o=[],s;return r={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".1")+"</strong>",icon:"",expanded:!0,children:[]},e.forEach(a=>{let l={};if(a){let c,d,h;a.group_id!=null?(c=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_GROUP"),a.group_type==O.OBJ_CONTINENT?d=this.translate.instant("NODE_TYPES."+a.group_name):d=a.group_name,h=this.translate.instant("WU.FOUND_OBJECT",{type_name:c,obj_name:d}),s=this.pipeFwcIcon.transform(O.OBJ_GROUP)):a.cluster_id!=null&&a.openvpn==null&&a.wireguard==null?(c=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER"),d=a.cluster_name,h=this.translate.instant("WU.FOUND_OBJECT",{type_name:c,obj_name:d}),s=this.pipeFwcIcon.transform(O.OBJ_CLUSTER)):a.firewall_id!=null&&a.openvpn==null&&a.wireguard==null?(c=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL"),d=a.firewall_name,h=this.translate.instant("WU.FOUND_OBJECT",{type_name:c,obj_name:d}),s=this.pipeFwcIcon.transform(O.OBJ_FIREWALL)):a.interface_id!=null?(c=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_INTERFACE_FIREWALL"),d=a.interface_name,h=this.translate.instant("WU.FOUND_OBJECT",{type_name:c,obj_name:d}),s=this.pipeFwcIcon.transform(O.OBJ_INTERFACE_FIREWALL)):a.host_id!=null?(c="Host",d=a.host_name,h=this.translate.instant("WU.FOUND_OBJECT",{type_name:c,obj_name:d}),s=this.pipeFwcIcon.transform(O.OBJ_HOST)):a.openvpn!=null?(a.cluster_id!=null?h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+a.cluster_name+"</code>":h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+a.firewall_name+"</code>",h=this.translate.instant("WU.FOUND_IN_OPENVPN",{cn:a.cn,firewall_data:h}),s=this.pipeFwcIcon.transform(O.OBJ_OPENVPN_CONFIG_CLI)):a.wireguard!=null?(a.cluster_id!=null?h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+a.cluster_name+"</code>":h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+a.firewall_name+"</code>",h=this.translate.instant("WU.FOUND_IN_WIREGUARD",{cn:a.cn,firewall_data:h}),s=this.pipeFwcIcon.transform(O.OBJ_WGC_CONFIG_CLI)):a.ipsec!=null&&(a.cluster_id!=null?h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+a.cluster_name+"</code>":h=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+a.firewall_name+"</code>",h=this.translate.instant("WU.FOUND_IN_IPSEC",{cn:a.cn,firewall_data:h}),s=this.pipeFwcIcon.transform(O.OBJ_ISC_CONFIG_CLI)),l.label=h,l.data=Object.assign({},a),o.push(l)}}),r.icon=s,r.children=o,r}static{this.\u0275fac=function(t){return new(t||i)(S(nt),S(Ts),S(Un),S(ab),S(Ye),S(at),S(Au),S(Sn))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-object-wu"]],inputs:{objectInfo:"objectInfo",readOnly:"readOnly"},outputs:{onHideParent:"onHideParent"},features:[et([Sn,ab,Au])],decls:1,vars:1,consts:[[1,"col-12","grid","grid-nogutter"],[1,"col-6",2,"width","48%","margin-right","10px"],[2,"margin-bottom","5px"],[1,"fwcMenuIcon","fwci-rule","fwcOrange"],[1,"fwcBlueBg","fwcBadge"],["selectionMode","single","styleClass","treeSelector treeWU",3,"value","selection"],["severity","warn",3,"text"],[1,"col-6",2,"width","48%"],[1,"fwcMenuIcon","fwci-ipobjects","fwcOrange"],["selectionMode","single","styleClass","treeSelector treeWU",3,"selectionChange","value","selection"],["pTemplate","default"],[1,"noselect",3,"dblclick","ngClass"],[3,"innerHTML"],[1,"noselect",3,"dblclick"]],template:function(t,r){t&1&&v(0,OBe,26,15,"div",0),t&2&&W(r._objectInfo?0:-1)},dependencies:[je,Ee,Fw,gl,gt],styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divWUPanel{min-width:100%}.divWUPanel .col-6{width:100%}.divWUPanel label{text-align:left!important;font-family:arial!important;color:var(--fwcBlue)}.p-tree .p-tree-container .p-treenode .p-treenode-content.p-highlight span{background-color:var(--fwcPaleBlue3)!important;width:fit-content!important}.p-state-highlight{background-color:var(--fwcPaleBlue3)!important;color:var(--fwcDark)!important}
`],encapsulation:2})}}return i})();var RBe=()=>({"max-height":"20em",overflow:"auto",width:"100%"});function PBe(i,n){if(i&1){let e=L();m(0,"div",5),k("dblclick",function(r){let o=y(e).$implicit,s=u(2);return w(s.itemDblClickEvent(r,o))}),P(1,"span",6),g()}if(i&2){let e=n.$implicit;p(),Q("innerHTML",e.label,an)}}function DBe(i,n){if(i&1){let e=L();m(0,"p-tree",3),Oe("selectionChange",function(r){y(e);let o=u();return Re(o.selectedObject,r)||(o.selectedObject=r),w(r)}),v(1,PBe,2,1,"ng-template",4),g()}if(i&2){let e=u();st(Ae(4,RBe)),f("value",e.dependenciesTree),Te("selection",e.selectedObject)}}function FBe(i,n){if(i&1){let e=L();m(0,"div",2)(1,"button",7),D(2,"translate"),k("click",function(){y(e);let r=u();return w(r.handleRefreshClick())}),g()()}i&2&&(p(),Q("label",N(2,1,"POLICY_GRID.RELOAD")))}var gg=(()=>{class i{set dependencies(e){e&&(this.dependenciesTree=this.buildDependencyTree(e))}constructor(e,t,r,o,s,a){this.store=e,this.translate=t,this.fwcPolicyService=r,this.fwcUserService=o,this.fwcWhereUsedFunctionalityService=s,this.pipeFwcIcon=a,this.showRefreshButton=!1,this.onHideParent=new X,this.onRefreshRestrictions=new X,this.selectedObject=null}ngOnInit(){}buildDependencyTree(e){let t=[],r,o,s;e._fwcRestrictedObject&&(o=e._fwcRestrictedObject._fwcObjId,s=e._fwcRestrictedObject._fwcObjType,delete e._fwcRestrictedObject);for(let a of Object.keys(e)){let l=e[a];Array.isArray(l)?l.length&&l[0]&&(l[0].rule_id!=null&&l[0].rule_type!=null||l[0].routing_rule_id!=null||l[0].route_id!=null||l[0].dhcp_rule_id!=null||l[0].keepalived_rule_id!=null||l[0].haproxy_rule_id!=null?(r=this.buildRuleDependencyTreeNodes(l,a,o,s),t.push(r)):l[0].group_id!=null&&l[0].group_name?(r=this.buildGroupDependencyTreeNodes(l,a,o,s),t.push(r)):l[0].openvpn!=null?(r=this.buildOpenVPNDependencyTreeNodes(l,a,o,s),t.push(r)):l[0].wireguard!=null?(r=this.buildWireguardDependencyTreeNodes(l,a),t.push(r)):l[0].ipsec!=null&&(r=this.buildIPSecDependencyTreeNodes(l,a,o,s),t.push(r))):t.push({label:this.translate.instant("ITEM_PANEL.RESTR_KEYS."+a+".0"),icon:"fa fa-ban fwcBlue",children:[]})}return t}itemDblClickEvent(e,t){let r=t.data;r&&!this.readOnly&&this.fwcWhereUsedFunctionalityService.goToObjectDependency(r)&&this.onHideParent.emit(!0)}buildRuleDependencyTreeNodes(e,t,r,o){let s,a=[];s={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".0")+"</strong>",icon:"fwci-rule fwcBlue",expanded:!0,children:[]};for(let l of e){let c=a.find(h=>!!(h.data&&h.data.firewall_id==l.firewall_id)),d={};if(l)if(c)this.setRuleNodeInfo(d,l,r,o),d.data=Object.assign({},l),c.children||(c.children=[]),c.children.push(d);else{let h={},_,C;l.cluster_id!==void 0&&l.cluster_id!==null?(_=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+l.cluster_name+"</code>",C=O.OBJ_CLUSTER):(_=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+l.firewall_name+"</code>",C=O.OBJ_FIREWALL),d.label=_,d.icon=this.pipeFwcIcon.transform(C),d.children=[],d.data=Object.assign({},l),d.data._fwItem=!0,d.expanded=!0,this.setRuleNodeInfo(h,l,r,o),h.data=Object.assign({},l),d.children.push(h),a.push(d)}}return s.children=a,s}buildGroupDependencyTreeNodes(e,t,r,o){let s,a=[],l,c;return s={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".0")+"</strong>",icon:"fwci-objectgroups fwcBlue",expanded:!0,children:[]},e.forEach(d=>{let h={};l=this.translate.instant("WU.FOUND_IN_GROUP",{group_name:d.group_name}),c=this.pipeFwcIcon.transform(O.OBJ_GROUP),d.obj_type_id&&d.obj_name&&(c=this.pipeFwcIcon.transform(d.obj_type_id),l+=` > <code>${d.obj_name}</code>`),d&&(h.label=l,h.icon=c,h.data=Object.assign({},d),a.push(h))}),s.children=a,s}buildOpenVPNDependencyTreeNodes(e,t,r,o){let s,a=[],l,c;return s={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".0")+"</strong>",icon:"fwci2-openvpn fwcBlue",expanded:!0,children:[]},e.forEach(d=>{let h={};d&&(d.cluster_id!==void 0&&d.cluster_id!==null?l=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+d.cluster_name+"</code>":l=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+d.firewall_name+"</code>",c=this.pipeFwcIcon.transform(O.OBJ_OPENVPN_CONFIG_CLI),d.obj_type_id&&d.obj_name&&(c=this.pipeFwcIcon.transform(d.obj_type_id),l+=` > <code>${d.obj_name}</code>`),h.label=this.translate.instant("WU.FOUND_IN_OPENVPN",{cn:d.cn,firewall_data:l}),h.icon=c,h.data=Object.assign({},d),a.push(h))}),s.children=a,s}buildWireguardDependencyTreeNodes(e,t){let r,o=[],s,a;return r={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".0")+"</strong>",icon:"fwci2-wireguard fwcBlue",expanded:!0,children:[]},e.forEach(l=>{let c={};l&&(l.cluster_id!==void 0&&l.cluster_id!==null?s=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+l.cluster_name+"</code>":s=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+l.firewall_name+"</code>",a=this.pipeFwcIcon.transform(O.OBJ_WGC_CONFIG_CLI),l.obj_type_id&&l.obj_name&&(a=this.pipeFwcIcon.transform(l.obj_type_id),s+=` > <code>${l.obj_name}</code>`),c.label=this.translate.instant("WU.FOUND_IN_WIREGUARD",{cn:l.cn,firewall_data:s}),c.icon=a,c.data=Object.assign({},l),o.push(c))}),r.children=o,r}buildIPSecDependencyTreeNodes(e,t,r,o){console.log("IPSEC DEPENDENCY",e,t,r,o);let s,a=[],l,c;return s={label:"<strong>"+this.translate.instant("ITEM_PANEL.RESTR_KEYS."+t+".0")+"</strong>",icon:"fwci2-ipsec fwcBlue",expanded:!0,children:[]},e.forEach(d=>{let h={};d&&(d.cluster_id!==void 0&&d.cluster_id!==null?l=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")+" <code>"+d.cluster_name+"</code>":l=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")+" <code>"+d.firewall_name+"</code>",c=this.pipeFwcIcon.transform(O.OBJ_ISC_CONFIG_CLI),d.obj_type_id&&d.obj_name&&(c=this.pipeFwcIcon.transform(d.obj_type_id),l+=` > <code>${d.obj_name}</code>`),h.label=this.translate.instant("WU.FOUND_IN_IPSEC",{cn:d.cn,firewall_data:l}),h.icon=c,h.data=Object.assign({},d),a.push(h))}),s.children=a,s}setRuleNodeInfo(e,t,r,o){let s,a,l,c;t.rule_id?t.rule_position_name?(l="WU.FOUND_IN_RULE",c={policy_name:t.rule_type_name,rule_id:t.rule_id,pos_name:t.rule_position_name}):(l="WU.FOUND_IN_RULE_NO_POS",c={policy_name:t.rule_type_name,rule_id:t.rule_id},t.rule_position_name=this.translate.instant("POLICY_GRID.RULES.ACTION")):t.route_id?(l="WU.FOUND_IN_ROUTE",c={route_id:t.route_id,table_name:t.table_name,table_number:t.table_number}):t.routing_rule_id?(l="WU.FOUND_IN_ROUTING_RULE",c={routing_rule_id:t.routing_rule_id}):t.dhcp_rule_id&&t.dhcp_rule_type===2?(l="WU.FOUND_IN_FIXED_DHCP_RULE",c={dhcp_rule_id:t.dhcp_rule_id}):t.dhcp_rule_id?(l="WU.FOUND_IN_REGULAR_DHCP_RULE",t.dhcp_router&&(t.ipObj_id==null||t.ipObj_id==null)?c={dhcp_rule_id:t.dhcp_rule_id,pos_name:"Router"}:!t.dhcp_router&&(t.ipObj_id!=null||t.ipObj_id!=null)?c={dhcp_rule_id:t.dhcp_rule_id,pos_name:"DNS"}:(l="WU.FOUND_IN_REGULAR_DHCP_RULE_NO_POS",c={dhcp_rule_id:t.dhcp_rule_id})):t.keepalived_rule_id?(l="WU.FOUND_IN_KEEPALIVED_RULE",c={keepalived_rule_id:t.keepalived_rule_id}):t.haproxy_rule_id&&(l="WU.FOUND_IN_HAPROXY_RULE",t.frontendIp_id?c={haproxy_rule_id:t.haproxy_rule_id,pos_name:"Frontend Ip"}:t.frontendPort_id?c={haproxy_rule_id:t.haproxy_rule_id,pos_name:"Frontend Port"}:t.backendIps_id?c={haproxy_rule_id:t.haproxy_rule_id,pos_name:"Backend Ip"}:t.backendPort_id&&(c={haproxy_rule_id:t.haproxy_rule_id,pos_name:"Backend Port"})),s=this.translate.instant(l,c),r!==void 0&&o!==void 0&&(r!=t.obj_id||o!=t.obj_type_id)&&t.obj_name&&(s+=` > <code>${t.obj_name}</code>`),a=this.pipeFwcIcon.transform(t.obj_type_id),e.label=s,e.icon=a}handleRefreshClick(){this.onRefreshRestrictions.emit()}static{this.\u0275fac=function(t){return new(t||i)(S(nt),S(Ye),S(Un),S(at),S(Au),S(Sn))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-object-restrictions"]],inputs:{dependencies:"dependencies",readOnly:"readOnly",showRefreshButton:"showRefreshButton"},outputs:{onHideParent:"onHideParent",onRefreshRestrictions:"onRefreshRestrictions"},features:[et([Sn,Au])],decls:5,vars:5,consts:[[1,"fwcBlue"],["selectionMode","single","styleClass","treeSelector treeWU",3,"value","selection","style"],[1,"vertTopPad"],["selectionMode","single","styleClass","treeSelector treeWU",3,"selectionChange","value","selection"],["pTemplate","default"],[1,"noselect",3,"dblclick"],[3,"innerHTML"],["type","button","pButton","","icon","fa fa-refresh",1,"p-button-primary",3,"click","label"]],template:function(t,r){t&1&&(m(0,"h5",0),F(1),D(2,"translate"),g(),v(3,DBe,2,5,"p-tree",1)(4,FBe,3,3,"div",2)),t&2&&(p(),$(N(2,3,"ITEM_PANEL.RESTR.RESTRICTIONS")),p(2),W(r.dependenciesTree?3:-1),p(),W(r.showRefreshButton?4:-1))},dependencies:[Ee,pt,gl,gt]})}}return i})();var kBe=["divDlgContainer"],Gt=(()=>{class i{constructor(e,t,r,o,s,a){this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.cd=o,this.store=s,this.router=a,this.displayDialog=!1,this.dialogMinified=!1,this.alive=!0,this.router.events.pipe(yt(()=>this.alive)).subscribe(l=>{l instanceof js&&(this.hideDialog(),this.dynamicComponentRef&&this.dynamicComponentRef.destroy())}),this.store.pipe(yt(()=>this.alive),Cn(na.selectVisibleDialogsIds)).subscribe(l=>{!this.displayDialog&&l.includes(this.dialogId)&&this.restoreDialog()})}ngOnInit(){}createDialog(e,t,r){if(isNaN(this.dialogId)){this.title=e,this.icon=t,this.dialogUUID=r;let o=this.appDialogPanelsService.createDialog(e,t,r);this.dialogId=o.dialogId,this.store.dispatch(on.addDialog({dialog:o}))}}minimizeDialog(e){this.displayDialog=!1,this.dialogMinified=!0,this.store.dispatch(on.minimizeDialog({dialogId:this.dialogId})),e&&this.itemSelectedService.setLastMinifiedDialogId(this.dialogId)}showHelp(){this.appOptionsService.showHelp(this.helpSection)}restoreDialog(){this.displayDialog||this.showDialog()}showDialog(){this.displayDialog=!0,this.dialogMinified=!1,this.store.dispatch(on.restoreDialog({dialogId:this.dialogId})),this.refreshDialog()}hideDialog(){this.displayDialog=this.dialogMinified=!1,this.store.dispatch(on.hideDialog({dialogId:this.dialogId})),this.dynamicComponentRef&&this.dynamicComponentRef.destroy()}recenterDialog(){try{this.refreshDialog(),this.dialog&&this.dialog.center()}catch{}}ngOnDestroy(){this.alive=!1,this.store.dispatch(on.removeDialog({dialogId:this.dialogId}))}preventDrop(e){return e.preventDefault(),!1}refreshDialog(){this.cd.destroyed||this.cd.detectChanges()}setDynamicComponentRef(e){this.dynamicComponentRef=e}addMessageToLog(e,t){this.log&&this.log.addNewText(e,t)}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(we),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-basic-panel"]],viewQuery:function(t,r){if(t&1&&(le(Yt,5),le(kBe,5)),t&2){let o;te(o=ie())&&(r.dialog=o.first),te(o=ie())&&(r.divDlgContainer=o.first)}},decls:0,vars:0,template:function(t,r){}})}}return i})();var OS=class{constructor(){this.pk=null,this.vector=null,this.passkey=window.crypto.getRandomValues(new Uint8Array(32)),this.generatePublicKey(),this.vector=window.crypto.getRandomValues(new Uint8Array(16))}createRandomString(n){let e="";for(;e.length<n;e+=Math.random().toString(36).substr(2));return e.substr(0,n)}convertStringToArrayBufferView(n){let e;if(n){e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t)}return e}convertArrayBufferViewtoString(n){let e="";if(n)for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return e}generatePublicKey(){let n;return n=new Promise((e,t)=>{window.crypto.subtle?window.crypto.subtle.digest({name:"SHA-256"},this.passkey).then(r=>{let o={name:"AES-CBC"};window.crypto.subtle.importKey("raw",r,o,!1,["encrypt","decrypt"]).then(s=>{this.pk=s,e(s)},s=>{e(null)})}):(this.pk="CAN't USE CLIENT ENCRYPTION ON NON-HTTPS CONNECTIONS",e(null))}),n}encryptData(n){let e;return e=new Promise((t,r)=>{if(this.vector&&this.pk){let o;window.crypto.subtle?window.crypto.subtle.encrypt({name:"AES-CBC",iv:this.vector},this.pk,this.convertStringToArrayBufferView(n)).then(s=>{o=new Uint8Array(s),t(o)},s=>{t(null)}):t(this.convertStringToArrayBufferView(n))}}),e}decryptData(n){return B(this,null,function*(){let e;return e=new Promise((t,r)=>{if(this.vector&&this.pk){let o;window.crypto.subtle?window.crypto.subtle.decrypt({name:"AES-CBC",iv:this.vector},this.pk,n).then(s=>{o=new Uint8Array(s),t(this.convertArrayBufferViewtoString(o))},s=>{t(null)}):t(this.convertArrayBufferViewtoString(n))}}),e})}};var NBe=()=>({width:"100%","max-height":"20em",overflow:"auto"}),MF=i=>({display:i}),LBe=()=>["cn","realAddress"],MBe=i=>({"font-weight":i});function VBe(i,n){i&1&&(m(0,"div",4)(1,"div"),P(2,"i",16),m(3,"span"),F(4),D(5,"translate"),g()()()),i&2&&(p(4),$(N(5,1,"VPN.STATUS.DATA")))}function BBe(i,n){if(i&1&&(m(0,"div",5),P(1,"sts-fwc-message",17),g()),i&2){let e=u();p(),f("message",e.errorMessage)}}function UBe(i,n){i&1&&(m(0,"div",6)(1,"div"),P(2,"p-progressSpinner"),g()())}function jBe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2);p(),J(" (",e._configObj==null?null:e._configObj.cluster_name,") ")}}function GBe(i,n){if(i&1&&F(0),i&2){let e=u(2);J(" (",e._configObj==null?null:e._configObj.firewall_name,") ")}}function HBe(i,n){if(i&1){let e=L();m(0,"div",18)(1,"h6",19),P(2,"i",20),F(3),D(4,"translate"),m(5,"strong"),F(6),g(),v(7,jBe,2,1,"span")(8,GBe,1,1),g()(),m(9,"div",21)(10,"i",22),k("click",function(){y(e);let r=u();return w(r.onVpnStatusClose())}),g()()}if(i&2){let e=u();p(3),J(" ",N(4,3,"VPN.STATUS.PANEL_TITLE_FULL")," "),p(3),J("'",e._configObj==null?null:e._configObj._fwcObjName,"'"),p(),W(e._configObj!=null&&e._configObj.cluster_id?7:8)}}function WBe(i,n){i&1&&(m(0,"tr")(1,"th",36),F(2),D(3,"translate"),g(),m(4,"th",37),F(5),D(6,"translate"),g(),m(7,"th",37),F(8),D(9,"translate"),g(),m(10,"th",38),F(11),D(12,"translate"),P(13,"p-sortIcon",39),g(),m(14,"th",40),F(15),D(16,"translate"),P(17,"p-sortIcon",41),g(),m(18,"th",42),F(19),D(20,"translate"),P(21,"p-sortIcon",43),g()()),i&2&&(p(2),J(" ",N(3,6,"VPN.STATUS.FIELDS.CN")," "),p(3),J(" ",N(6,8,"VPN.STATUS.FIELDS.VIRTUAL_ADDRESS")," "),p(3),J(" ",N(9,10,"VPN.STATUS.FIELDS.REAL_ADDRESS")," "),p(3),J(" ",N(12,12,"VPN.STATUS.FIELDS.RECEIVED")," "),p(4),J(" ",N(16,14,"VPN.STATUS.FIELDS.SENT")," "),p(4),J(" ",N(20,16,"VPN.STATUS.FIELDS.CONNECTED_SINCE")," "))}function zBe(i,n){if(i&1&&(m(0,"tr",44)(1,"td"),F(2),g(),m(3,"td"),F(4),g(),m(5,"td"),F(6),g(),m(7,"td",45),F(8),D(9,"number"),g(),m(10,"td",45),F(11),D(12,"number"),g(),m(13,"td"),F(14),D(15,"date"),g()()),i&2){let e=n.$implicit;f("pSelectableRow",e),p(2),$(e.cn),p(2),$(e.virtualAddress),p(2),$(e.realAddress),p(2),J(" ",ei(9,7,e.bytesReceived,"1.2-2")," "),p(3),J(" ",ei(12,10,e.bytesSent,"1.2-2")," "),p(3),J(" ",ei(15,13,e.connectedSince,"d/M/y hh:mm")," ")}}function KBe(i,n){if(i&1&&(m(0,"div"),P(1,"sts-fwc-message",17),g()),i&2){let e=u(2);p(),f("message",e.msgNoData)}}function $Be(i,n){if(i&1){let e=L();m(0,"div",7)(1,"p-toolbar",23)(2,"div",24)(3,"span",19),P(4,"i",25),F(5),D(6,"translate"),g()(),m(7,"div",26)(8,"span")(9,"strong"),F(10),D(11,"date"),g()(),P(12,"span",27),m(13,"div",28)(14,"p-splitButton",29),D(15,"translate"),k("onClick",function(){y(e);let r=u();return w(r.onVpnStatusDataRefresh())}),g(),m(16,"button",30),D(17,"translate"),k("click",function(){y(e);let r=He(19),o=u();return o.vpnClientsDataShowFilter=!0,w(r.focus())}),g(),m(18,"input",31,1),D(20,"translate"),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.vpnClientsDataFilter,r)||(o.vpnClientsDataFilter=r),w(r)}),k("input",function(){y(e);let r=He(25),o=u();return w(r.filterGlobal(o.vpnClientsDataFilter,"contains"))}),g(),m(21,"button",32),D(22,"translate"),k("click",function(){y(e);let r=He(25),o=u();return o.vpnClientsDataShowFilter=!1,o.vpnClientsDataFilter="",w(r.reset())}),g()()()(),m(23,"div",33)(24,"p-table",34,2),Oe("selectionChange",function(r){y(e);let o=u();return Re(o.vpnClientSelected,r)||(o.vpnClientSelected=r),w(r)}),k("onRowSelect",function(r){y(e);let o=u();return w(o.onVpnClientSelect(r))})("onRowUnselect",function(r){y(e);let o=u();return w(o.onVpnClientSelect(r))}),v(26,WBe,22,18,"ng-template",11)(27,zBe,16,16,"ng-template",35),g()(),v(28,KBe,2,1,"div"),g()}if(i&2){let e=u();f("ngClass",e.verticalTotalsMode?"lg:col-6":"lg:col-7"),p(5),J(" ",N(6,18,"VPN.STATUS.FIELDS.CLIENTS"),""),p(5),$(ei(11,20,e.vpnStatusUpdated,"d/M/y HH:mm:ss")),p(4),Q("pTooltip",N(15,23,"VPN.STATUS.BUTTONS.UPDATE")),f("model",e.refreshMenuItems),p(2),Q("pTooltip",N(17,25,"VPN.STATUS.BUTTONS.SEARCH")),f("ngStyle",ne(31,MF,e.vpnClientsDataShowFilter?"none":"inline")),p(2),Q("placeholder",N(20,27,"VPN.STATUS.SEARCH")),f("ngStyle",ne(33,MF,e.vpnClientsDataShowFilter?"inline":"none")),Te("ngModel",e.vpnClientsDataFilter),p(3),Q("pTooltip",N(22,29,"VPN.STATUS.BUTTONS.CLEAR_SEARCH")),f("ngStyle",ne(35,MF,e.vpnClientsDataShowFilter?"inline":"none")),p(3),f("value",e.vpnClientsData)("responsive",!1)("resizableColumns",!0),Te("selection",e.vpnClientSelected),f("globalFilterFields",Ae(37,LBe)),p(4),W(e.vpnClientsData&&!e.vpnClientsData.length?28:-1)}}function JBe(i,n){i&1&&ue(0)}function qBe(i,n){if(i&1&&v(0,JBe,1,0,"ng-container",48),i&2){u(2);let e=He(9);f("ngTemplateOutlet",e)}}function YBe(i,n){if(i&1&&(m(0,"div",8)(1,"div")(2,"p-toolbar",23)(3,"div",24)(4,"span",19),P(5,"i",46),F(6),D(7,"translate"),g()()()(),m(8,"div"),P(9,"p-chart",47),g(),v(10,qBe,1,1,"ng-container"),g()),i&2){let e=u();f("ngClass",e.verticalTotalsMode?"lg:col-4":"lg:col-5"),p(6),J(" ",N(7,5,"VPN.STATUS.DATA_CONSUMPTION"),""),p(3),f("data",e.vpnClientsChartData)("options",e.vpnClientsChartOptions),p(),W(e.verticalTotalsMode?-1:10)}}function XBe(i,n){i&1&&ue(0)}function QBe(i,n){if(i&1&&(m(0,"div",9),v(1,XBe,1,0,"ng-container",48),g()),i&2){u();let e=He(9);p(),f("ngTemplateOutlet",e)}}function ZBe(i,n){if(i&1&&(m(0,"div",50)(1,"div",51)(2,"div",52)(3,"div",53),F(4),g(),m(5,"div",54)(6,"span"),P(7,"i",55),F(8),D(9,"translate"),g()()()(),m(10,"div",51)(11,"div",56)(12,"div",53),F(13),D(14,"number"),g(),m(15,"div",54)(16,"span"),P(17,"i",57),F(18),D(19,"translate"),g()()()(),m(20,"div",51)(21,"div",58)(22,"div",53),F(23),D(24,"number"),g(),m(25,"div",54)(26,"span"),P(27,"i",59),F(28),D(29,"translate"),g()()()()()),i&2){let e=u(2);f("ngClass",e.verticalTotalsMode?"divVpnStatusMain-totals--vertical":"divVpnStatusMain-totals--horizontal"),p(4),J(" ",e.vpnClientsChartDataTotals.clientsConnected," "),p(4),J(" ",N(9,7,"VPN.STATUS.FIELDS.CLIENTS"),""),p(5),J(" ",ei(14,9,e.vpnClientsChartDataTotals.bytesReceived,".0-0")," "),p(5),J(" ",N(19,12,"VPN.STATUS.FIELDS.RECEIVED"),""),p(5),J(" ",ei(24,14,e.vpnClientsChartDataTotals.bytesSent,".0-0")," "),p(5),J(" ",N(29,17,"VPN.STATUS.FIELDS.SENT"),"")}}function e6e(i,n){if(i&1&&(m(0,"div")(1,"p-toolbar",23)(2,"div",24)(3,"span",19),P(4,"i",49),F(5),D(6,"translate"),g()()(),v(7,ZBe,30,19,"div",50),g()),i&2){let e=u();p(5),J(" ",N(6,2,"VPN.STATUS.TOTALS"),""),p(2),W(e.vpnClientsChartDataTotals?7:-1)}}function t6e(i,n){i&1&&(m(0,"div",60)(1,"h6",61),P(2,"i",62),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"VPN.STATUS.NODE_SELECT_DIALOG.TITLE")," "))}function i6e(i,n){if(i&1){let e=L();m(0,"span",63),k("dblclick",function(){let r=y(e).$implicit,o=u();return w(o.onNodeSelect(r))}),P(1,"i",64),D(2,"fwcIcon"),m(3,"span",65),F(4),g()()}if(i&2){let e=n.$implicit;p(),va("fwcTreeIcon ",N(2,5,e.data==null?null:e.data.object_type),""),p(2),f("ngStyle",ne(7,MBe,e.selectable?"normal":"bold")),p(),J(" ",e.label," ")}}function n6e(i,n){if(i&1){let e=L();m(0,"button",66),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onNodeSelect(r.selectedNode))}),g(),m(2,"button",67),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.onSelectCancel())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.SELECT")),f("disabled",!e.selectedNode),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.CANCEL"))}}var r6e=20,KW=(()=>{class i{set configObj(e){e&&(this._configObj=e,this.resetProperties(),this.selectFirewallToShow())}constructor(e,t,r,o,s,a,l,c,d){this.fwcFirewallService=e,this.fwcUserService=t,this.translate=r,this.inputDataService=o,this.utilService=s,this.fwcErrorPipe=a,this.fwcVpnService=l,this.fwcEventService=c,this.confirmationService=d,this.statusLoaded=new X,this.statusError=new X,this.alive=!0,this.fwcCrypto=new OS}ngOnInit(){this.vpnClientsChartOptions={title:{display:!0,position:"left",text:this.translate.instant("VPN.STATUS.ALL_CLIENTS")}},this.msgNoData={type:"warning",title:this.translate.instant("VPN.STATUS.NO_DATA.0"),text:this.translate.instant("VPN.STATUS.NO_DATA.1")},this.refreshMenuItems=[{id:"20",label:"20s",command:()=>{this.setRefreshRate(20)}},{id:"40",label:"40s",command:()=>{this.setRefreshRate(40)}},{id:"60",label:"60s",command:()=>{this.setRefreshRate(60)}},{id:"99999",label:this.translate.instant("GLOBALS.MSG_BUTTONS.DISABLE"),command:()=>{this.setRefreshRate(99999)}}],this.setRefreshRate(r6e)}ngOnDestroy(){this.alive=!1,clearInterval(this.refreshTimer)}resetProperties(){this.vpnClientsData=void 0,this.vpnClientSelected=void 0,this.vpnClientsChartData=null,this.vpnClientsDataHistoric=[],this.vpnClientsChartDataTotals=null,this.sshCredentials=null,this.errorMessage=null,clearInterval(this.refreshTimer)}setRefreshRate(e){this.refreshMenuItems.forEach(t=>{t.id==e.toString()?(t.icon="fa fa-check",this.refreshRateSec=e,this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=setInterval(()=>{this.onVpnStatusDataRefresh()},this.refreshRateSec*1e3))):t.icon=""})}selectFirewallToShow(){if(this._configObj){let e,t,r;this._configObj.cluster_id!=null?(e=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),t=this._configObj.cluster_id,r=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")):this._configObj.firewall_id!=null&&(e=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),t=this._configObj.firewall_id,r=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")),e&&(this.resetProperties(),e(t,this.fwcUserService.getActualFwSelectedCloud()).subscribe(o=>B(this,null,function*(){this.clusterNodes=[],this.selectedNode=null,Array.isArray(o.data)?this.clusterNodes.push(...o.data):this.clusterNodes.push(o.data);let s=this.fwcUserService.getActualFwcUser().privateKey;for(let a=0;a<this.clusterNodes.length;a++){let l=this.clusterNodes[a];try{l.install_user&&(l.install_user=yield this.utilService.openPGPDecrypt(l.install_user,s)),l.install_pass&&(l.install_pass=yield this.utilService.openPGPDecrypt(l.install_pass,s))}catch{}}this.loadingData=!1,this._configObj.cluster_id!=null?(this.clusterTreeNodes=this.buildNodesTree(this.clusterNodes),this.displaySelectDialog=!0):this.askSSHCredentials(t)}),o=>{this.loadingData=!1;let s=this.translate.instant("VPN.STATUS.ERRORS.GETTING_DATA.GEN_DETAILS");o.error&&o.error.msg&&(s=o.error.msg),this.errorMessage={type:"error",title:this.translate.instant("VPN.STATUS.ERRORS.GETTING_DATA.SUMMARY",{objType:r}),text:this.translate.instant("VPN.STATUS.ERRORS.GETTING_DATA.TEXT",{objType:r,msg:s})},this.statusLoaded.emit(!0)}))}}buildNodesTree(e){let t=[],r={label:this._configObj.cluster_name,data:{object_type:O.OBJ_CLUSTER},selectable:!1,expanded:!0,children:[]};return e.forEach(o=>{r.children.push({label:o.name,data:{object_type:O.OBJ_FIREWALL,firewall_id:o.id},selectable:!0})}),t.push(r),t}onNodeSelect(e){!e||!e.selectable||(this.displaySelectDialog=!1,this.askSSHCredentials(e.data.firewall_id))}askSSHCredentials(e,t){if(!this.clusterNodes)return;let r=this.clusterNodes.find(o=>o.id===e);if(r)if(r.install_interface&&r.install_ipobj)if(r.install_communication==="agent")this.onGetSSHData({firewall_id:r.id,communication:r.install_communication});else{let o={header:this.translate.instant("COMPILE.INST_SSH",{name:r.name}),helpText:this.translate.instant("COMPILE.INST_SSH_TEXT"),modal:!1,formControls:[{name:"firewall_id",type:"hidden",value:r.id},{name:"communication",type:"hidden",value:r.install_communication},{name:"interface_name",label:this.translate.instant("COMPILE.FIELDS.INST_IF"),icon:"fwci-interface fwcGreen",type:"text",value:r.interface_name,readonly:!0,halfSized:!0},{name:"ip_name",label:this.translate.instant("COMPILE.FIELDS.INST_IP"),icon:"fwci-address fwcBlue",type:"text",value:r.ip_name+" ("+r.ip+")",readonly:!0,halfSized:!0},{name:"",label:"",type:"separator"},{name:"ssh_user",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_USER"),type:"text",required:!0,value:t?t.ssh_user:r.install_user,setFocus:!0},{name:"",label:"",type:"separator"},{name:"ssh_password",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS"),type:"password",required:!0,value:t?t.ssh_password:r.install_pass}],onAccept:this.onGetSSHData.bind(this),onCancel:()=>{this.statusError.emit(!0)}};this.inputDataService.setInputData(o)}else this.confirmationService.confirm({header:this.translate.instant("VPN.STATUS.ERRORS.NO_INST_DATA.SUMMARY"),icon:"fa fa-exclamation-circle fwcRed iconBig",rejectVisible:!1,message:this.translate.instant("VPN.STATUS.ERRORS.NO_INST_DATA.TEXT"),acceptLabel:"Ok",accept:()=>{let o=this.translate.instant("VPN.STATUS.ERRORS.NO_INST_DATA.TEXT");this.statusError.emit(!0)}})}onGetSSHData(e){return B(this,null,function*(){if(e){let t,r;if(t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:this._configObj.id_obj,firewall:e.firewall_id},e.communication!=="agent"){e.ssh_encrypted_password?r=yield this.fwcCrypto.decryptData(e.ssh_encrypted_password):r=e.ssh_password;let o=this.fwcUserService.getActualFwcUser().publicKey,s=e.ssh_user,a=r;s&&(s=yield this.utilService.openPGPEncrypt(s,o)),a&&(a=yield this.utilService.openPGPEncrypt(a,o)),t=ke(oe({},t),{sshuser:s,sshpass:a})}this.loadingData=!0,this.fwcVpnService.getConfigStatus(t).subscribe(o=>B(this,null,function*(){let s=this.parseVpnStatus(o.data),a=yield this.fwcCrypto.encryptData(e.ssh_password);this.sshCredentials||(this.sshCredentials={firewall_id:e.firewall_id,ssh_user:e.ssh_user,ssh_encrypted_password:a}),s&&(this.vpnClientsData=s,this.updateVpnChartData(),this.statusLoaded.emit(!0)),this.loadingData=!1,clearInterval(this.refreshTimer),this.refreshTimer=setInterval(()=>{this.onVpnStatusDataRefresh()},this.refreshRateSec*1e3)}),o=>{let s=this.utilService.isCommunicationError(o.error),a=s||this.fwcErrorPipe.transform(o);this.confirmationService.confirm({header:this.translate.instant("VPN.STATUS.ERRORS.CONFIG_GET.SUMMARY"),icon:"fa fa-exclamation-circle fwcRed iconBig",rejectVisible:!1,message:this.translate.instant("VPN.STATUS.ERRORS.CONFIG_GET.TEXT",{error:a}),acceptLabel:"Ok",accept:()=>{if(s&&e.communication==="ssh")return this.askSSHCredentials(e.firewall_id,e);this.statusError.emit(!0)}}),this.loadingData=!1,clearInterval(this.refreshTimer)})}else this.statusError.emit(!0)})}parseVpnStatus(e){if(!e||typeof e!="string")return[];let t=[],r=[],o,s=e.split(`
`),a={clientsConnected:0,bytesReceived:0,bytesSent:0},l,c;for(let d of s)if(!(/Common Name/.exec(d)||/Virtual Address/.exec(d))){if(l=d.split(","),l.map(h=>h.trim()),l.length==2&&/Updated/.exec(l[0])&&(this.vpnStatusUpdated=Date.parse(l[1]),o={timestamp:this.vpnStatusUpdated,clients:[]}),l.length==5){let h=Date.parse(l[4]);c={cn:l[0],realAddress:l[1],bytesReceived:parseInt(l[2]),bytesSent:parseInt(l[3]),connectedSince:h},t.push(c),o||(o={timestamp:Date.parse(Date()),clients:[]}),o.clients.push(c),a.clientsConnected++,a.bytesReceived+=c.bytesReceived,a.bytesSent+=c.bytesSent}else if(l.length===4){let h=l[2],_=l[0],C=t.find(I=>I.realAddress===h);C&&(C.virtualAddress=_)}}return this.vpnClientsChartDataTotals=a,o&&this.vpnClientsDataHistoric.findIndex(d=>d.timestamp==o.timestamp)==-1&&this.vpnClientsDataHistoric.push(o),t}updateVpnChartData(){let e;e={labels:[],datasets:[{label:this.translate.instant("VPN.STATUS.FIELDS.RECEIVED"),data:[],fill:!1,borderColor:"#0069a7"},{label:this.translate.instant("VPN.STATUS.FIELDS.SENT"),data:[],fill:!1,borderColor:"#009900"}]};let t;this.vpnClientsDataHistoric.forEach(r=>{if(e.labels.push(new Date(r.timestamp).toLocaleString()),this.vpnClientSelected?(t=r.clients.filter(o=>o.cn==this.vpnClientSelected.cn),this.vpnClientsChartOptions.title.text=this.vpnClientSelected.cn):(t=r.clients.slice(0),this.vpnClientsChartOptions.title.text=this.translate.instant("VPN.STATUS.ALL_CLIENTS")),t.length){let o=t.reduce((s,a)=>({cn:"",realAddress:"",bytesReceived:s.bytesReceived+a.bytesReceived,bytesSent:s.bytesSent+a.bytesSent,connectedSince:void 0}));e.datasets[0].data.push(o.bytesReceived),e.datasets[1].data.push(o.bytesSent)}}),this.vpnClientsChartData=e}onVpnClientSelect(e){this.updateVpnChartData()}onVpnStatusDataRefresh(){this.onGetSSHData(this.sshCredentials)}onVpnStatusClose(){this.resetProperties()}onSelectHide(e){}onSelectCancel(){this.displaySelectDialog=!1,this.statusError.emit(!0)}static{this.\u0275fac=function(t){return new(t||i)(S(Dt),S(at),S(Ye),S(Cr),S(ft),S(Ei),S(er),S(dn),S(Jt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-vpn-status"]],inputs:{configObj:"configObj",showTitle:"showTitle",verticalTotalsMode:"verticalTotalsMode"},outputs:{statusLoaded:"statusLoaded",statusError:"statusError"},features:[et([Dt])],decls:21,vars:19,consts:[["vpnTotals",""],["inputSearch",""],["tabVpnStatusTable",""],[1,"grid","grid","grid-nogutter","divVpnStatusMain"],[1,"col-12","divVpnStatusMain-placeholder"],[1,"col-12"],[1,"col-12","divVpnStatusMain-loader"],[1,"col-12","divVpnStatusMain-table",3,"ngClass"],[1,"col-12","divVpnStatusMain-data",3,"ngClass"],[1,"col-12","lg:col-2"],["styleClass","dlgFwcDialog dlgFwcDialog--small",3,"visibleChange","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[1,"grid"],["selectionMode","single","styleClass","treeSelector",3,"selectionChange","value","selection"],["pTemplate","default"],["pTemplate","footer"],[1,"fa","fa-bar-chart","fa-4x"],[3,"message"],[1,"col-11","divVpnStatusMain-title"],[1,"fwcBlue"],[1,"fa","fa-fw","fa-users","fwcOrange"],[1,"col-1","divVpnStatusMain-close"],[1,"fa","fa-lg","fa-close",3,"click"],["styleClass","tbrHighlighted"],[1,"p-toolbar-group-left"],[1,"fa","fa-fw","fa-desktop","fwcOrange"],[1,"p-toolbar-group-right"],[1,"fwcSepShort"],[1,"divVpnStatusMain-buttons"],["icon","fa fa-refresh","tooltipPosition","bottom","showDelay","700","appendTo","body",3,"onClick","pTooltip","model"],["pButton","","type","button","icon","fa fa-search","tooltipPosition","bottom","showDelay","700",1,"p-button-success",3,"click","pTooltip","ngStyle"],["type","text","pInputText","",3,"ngModelChange","input","placeholder","ngStyle","ngModel"],["pButton","","type","button","icon","fa fa-close","tooltipPosition","bottom","showDelay","700",1,"p-button-warning",3,"click","pTooltip","ngStyle"],[1,"col-12",2,"overflow","auto"],["columnResizeMode","expand","selectionMode","single","styleClass","optionsTable",3,"selectionChange","onRowSelect","onRowUnselect","value","responsive","resizableColumns","selection","globalFilterFields"],["pTemplate","body"],["pSortableColumn","cn","pResizableColumn",""],["pResizableColumn",""],["pSortableColumn","bytesReceived","pResizableColumn",""],["field","bytesReceived"],["pSortableColumn","bytesSent","pResizableColumn",""],["field","bytesSent"],["pSortableColumn","connectedSince","pResizableColumn",""],["field","connectedSince"],[3,"pSelectableRow"],[2,"text-align","right"],[1,"fa","fa-fw","fa-bar-chart","fwcOrange"],["type","line",3,"data","options"],[4,"ngTemplateOutlet"],[1,"fa","fa-fw","fa-calculator","fwcOrange"],[1,"divVpnStatusMain-totals",3,"ngClass"],[1,"divVpnStatusMain-card2"],[1,"divVpnStatusMain-card2-content","fwcOrangeBg"],[1,"card2-value"],[1,"card2-text"],[1,"fa","fw","fa-desktop"],[1,"divVpnStatusMain-card2-content","fwcBlueBg"],[1,"fa","fw","fa-download"],[1,"divVpnStatusMain-card2-content","fwcGreenBg"],[1,"fa","fw","fa-upload"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-firewalls","fwcOrange"],[1,"noselect",3,"dblclick"],["aria-hidden","true"],[3,"ngStyle"],["pButton","","icon","pi pi-check",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"div",3),v(1,VBe,6,3,"div",4)(2,BBe,2,1,"div",5)(3,UBe,3,0,"div",6)(4,HBe,11,5)(5,$Be,29,38,"div",7)(6,YBe,11,7,"div",8)(7,QBe,2,1,"div",9),g(),v(8,e6e,8,4,"ng-template",null,0,Bt),m(10,"p-dialog",10),Oe("visibleChange",function(a){return y(o),Re(r.displaySelectDialog,a)||(r.displaySelectDialog=a),w(a)}),k("onHide",function(a){return y(o),w(r.onSelectHide(a))}),v(11,t6e,5,3,"ng-template",11),m(12,"div",12)(13,"div",5)(14,"p"),F(15),D(16,"translate"),g()(),m(17,"div",5)(18,"p-tree",13),Oe("selectionChange",function(a){return y(o),Re(r.selectedNode,a)||(r.selectedNode=a),w(a)}),v(19,i6e,5,9,"ng-template",14),g()()(),v(20,n6e,4,7,"ng-template",15),g()}t&2&&(p(),W(!r.vpnClientsData&&!r.errorMessage?1:-1),p(),W(r.errorMessage?2:-1),p(),W(r.loadingData?3:-1),p(),W(r.vpnClientsData&&r.showTitle?4:-1),p(),W(r.vpnClientsData?5:-1),p(),W(r.vpnClientsData?6:-1),p(),W(r.vpnClientsData&&r.verticalTotalsMode?7:-1),p(3),Te("visible",r.displaySelectDialog),f("modal",!!r.showTitle)("resizable",!1)("closable",!1),p(5),$(N(16,16,"VPN.STATUS.NODE_SELECT_DIALOG.TEXT")),p(3),st(Ae(18,NBe)),f("value",r.clusterTreeNodes),Te("selection",r.selectedNode))},dependencies:[je,mt,De,Li,Pi,mn,Yt,Ee,pt,or,cn,gl,Xi,sr,Oa,Tp,ah,Ra,wS,TC,AW,Fn,Rf,cc,gt,Sn],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divVpnStatusMain[_ngcontent-%COMP%]{min-height:8rem;max-height:30rem;overflow:auto}.divVpnStatusMain-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right}.divVpnStatusMain-placeholder[_ngcontent-%COMP%]{text-align:center}.divVpnStatusMain-loader[_ngcontent-%COMP%]{position:absolute;z-index:4000;width:100%;height:100%;top:0;left:0;background:#ffffff80}.divVpnStatusMain-placeholder[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .divVpnStatusMain-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--fwcGrey)}.divVpnStatusMain-placeholder[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .divVpnStatusMain-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block}.divVpnStatusMain-placeholder[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .divVpnStatusMain-loader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}.divVpnStatusMain-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.divVpnStatusMain-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-family:Montserrat,Arial,Helvetica,sans-serif;font-size:.9rem;font-weight:400;margin-bottom:0!important}.divVpnStatusMain-close[_ngcontent-%COMP%]{text-align:right}.divVpnStatusMain-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fwcPaleDark);cursor:pointer}.divVpnStatusMain-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--fwcDark)}.divVpnStatusMain-table[_ngcontent-%COMP%]{overflow-y:auto}.divVpnStatusMain-table[_ngcontent-%COMP%]   .p-table[_ngcontent-%COMP%]   .p-table-thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:70px}.divVpnStatusMain-table[_ngcontent-%COMP%]   .p-toolbar-group-left[_ngcontent-%COMP%], .divVpnStatusMain-table[_ngcontent-%COMP%]   .p-toolbar-group-right[_ngcontent-%COMP%]{line-height:2rem}.divVpnStatusMain-buttons[_ngcontent-%COMP%]{display:inline!important}.divVpnStatusMain-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0!important;margin-left:.5rem}.divVpnStatusMain-buttons[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:6rem!important;height:2rem!important;line-height:2.1rem!important}.divVpnStatusMain-data[_ngcontent-%COMP%]{overflow-y:auto}.divVpnStatusMain-totals[_ngcontent-%COMP%]{overflow-y:auto;display:flex;justify-content:space-between}.divVpnStatusMain-totals--vertical[_ngcontent-%COMP%]{flex-direction:column}.divVpnStatusMain-totals--horizontal[_ngcontent-%COMP%]{flex-direction:row}.divVpnStatusMain-card[_ngcontent-%COMP%]{white-space:nowrap;color:var(--fwcWhite);height:4rem}.divVpnStatusMain-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:inline-block;height:4rem;text-align:center;line-height:4rem;vertical-align:top;padding:.5rem}.divVpnStatusMain-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{display:inline-block;height:4rem;text-align:left;overflow:hidden}.divVpnStatusMain-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child   span[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.divVpnStatusMain-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child   p[_ngcontent-%COMP%]{color:var(--fwcWhite);margin-top:-.5rem;text-transform:uppercase;text-overflow:ellipsis}.divVpnStatusMain-card.fwcOrangeBg[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{color:var(--fwcPaleOrange2)}.divVpnStatusMain-card.fwcBlueBg[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{color:var(--fwcPaleBlue2)}.divVpnStatusMain-card.fwcGreenBg[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{color:var(--fwcPaleGreen)}.divVpnStatusMain-card2[_ngcontent-%COMP%]{flex:1;margin:.3rem}.divVpnStatusMain-card2-content[_ngcontent-%COMP%]{color:var(--fwcWhite);text-align:center;border-radius:3px;padding-bottom:.4rem}.divVpnStatusMain-card2-content[_ngcontent-%COMP%]   .card2-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.divVpnStatusMain-card2-content[_ngcontent-%COMP%]   .card2-text[_ngcontent-%COMP%]{text-transform:uppercase}.divVpnStatusMain-card2-content[_ngcontent-%COMP%]   .card2-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.divVpnStatusMain-card2-content.fwcOrangeBg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fwcPaleOrange2)}.divVpnStatusMain-card2-content.fwcBlueBg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fwcPaleBlue2)}.divVpnStatusMain-card2-content.fwcGreenBg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fwcPaleGreen)}@media (max-width: 64em){.divVpnStatusMain[_ngcontent-%COMP%]{height:100%}}"]})}}return i})();var bo=class{constructor(n){n&&(this.channel=n.channel,this.id=n.id,this.payload=n.payload||{},this.timestamp=n.timestamp)}getValue(){return{id:this.id,channel:this.channel,payload:this.payload,timestamp:this.timestamp}}};var JW=No(Gc());function s6e(i,n){i&1&&(m(0,"span",8),P(1,"i",9),m(2,"span"),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"LOG_PANEL.PROCESSING")," "))}function a6e(i,n){if(i&1&&(m(0,"h6",5)(1,"span",6),P(2,"i",7),F(3),D(4,"translate"),g(),v(5,s6e,5,3,"span",8),g()),i&2){let e=u();p(3),J(" ",N(4,2,"LOG_PANEL.LOGS_HEADER")," "),p(2),W(e.loadingData?5:-1)}}function l6e(i,n){i&1&&P(0,"br")}function c6e(i,n){if(i&1&&(m(0,"span",11),F(1),D(2,"date"),g()),i&2){let e=u(2).$implicit;p(),J(" [",ei(2,1,e.time,"HH:mm:ss"),"] - ")}}function d6e(i,n){i&1&&(m(0,"span"),F(1," \xA0 "),P(2,"i",13),g())}function p6e(i,n){if(i&1&&(v(0,c6e,3,4,"span",11),m(1,"span"),P(2,"i")(3,"span",12),v(4,d6e,3,0,"span"),g()),i&2){let e=u().$implicit,t=u();W(e.type!==t.LogMessageTypes.MSG_SSH_CMD_OUTPUT?0:-1),p(),ce(t.getLogMessageTypeStyles(e.type,e.message).className),p(),ce(t.getLogMessageTypeStyles(e.type,e.message).icon),p(),Q("innerHTML",e.message,an),p(),W(e.completed?4:-1)}}function u6e(i,n){if(i&1&&v(0,l6e,1,0,"br")(1,p6e,5,9,"span",10),i&2){let e=n.$implicit,t=u();W(e.type===t.LogMessageTypes.MSG_SEPARATOR?0:1)}}function h6e(i,n){if(i&1){let e=L();m(0,"div",14)(1,"button",15),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.downloadLog())}),g()()}if(i&2){let e=u(2);p(),Q("label",N(2,2,"LOG_PANEL.BTN_DOWNLOAD")),f("disabled",e.loadingData)}}function f6e(i,n){i&1&&v(0,h6e,3,4,"ng-template",4)}var $W="<br />",UF=class{constructor(n){n?(this.messages=n,this.messagesCopy=n.slice(0)):(this.messages=[],this.messagesCopy=[])}addMessage(n){this.messages.push(n),this.messagesCopy.push(n)}resetValue(){this.messages=[],this.messagesCopy=[]}getValue(n){return n===this.messages?this.messagesCopy:this.messages}completeTask(n){let e=this.messages.find(t=>t.task_id&&t.task_id===n);e&&(e.completed=!0),e=this.messagesCopy.find(t=>t.task_id&&t.task_id===n),e&&(e.completed=!0)}};var RS={[Ne.MSG_INFO]:{className:"fwcBlue",icon:"fa fa-lg fa-fw fa-info-circle"},[Ne.MSG_OK]:{className:"fwcGreen",icon:"fa fa-lg fa-fw fa-check-circle"},[Ne.MSG_ERROR]:{className:"fwcRed",icon:"fa fa-lg fa-fw fa-exclamation-circle"},[Ne.MSG_SEPARATOR]:{className:"",icon:""},[Ne.MSG_WARNING]:{className:"fwcOrange",icon:"fa fa-lg fa-fw fa-info-circle"},[Ne.MSG_NOTICE]:{className:"fwcDark",icon:""}},pr=(()=>{class i{constructor(e){this.cd=e,this.height="450px",this.showFooter=!1,this.fwcMessages=[],this.LogMessageTypes=Ne,this.isBottomScrolled=!0}ngOnInit(){this.virtualLogMessages=new UF}ngAfterViewInit(){}addNewText(e,t=Ne.MSG_NOTICE,r){e&&(e=e.replace(/^<br>/g,""));let o=new bo({payload:{data:{},task_id:void 0,type:t,highlight:r,message:e}});this.addNewMessage(o)}trackById(e,t){return e}addBreakLine(){this.addNewText("",Ne.MSG_SEPARATOR)}addNewMessage(e){if(e&&e.payload){let t={time:new Date,type:e.payload.type,task_id:e.payload.task_id,message:e.payload.message,highlight:e.payload.highlight};if(!(t.type===Ne.MSG_START||t.type===Ne.MSG_HEARTBEAT))if(t.type===Ne.MSG_END)this.loadingData=!1;else{if(t.type===Ne.MSG_START_TASK)t.subtask=!0;else if(t.type===Ne.MSG_END_TASK){this.virtualLogMessages.completeTask(t.task_id),this.fwcMessages=[...this.virtualLogMessages.getValue(this.fwcMessages)],this.cd.detectChanges();return}let r=[t.message];t.message!==null&&t.message!==void 0&&(t.message=t.message.replace(/(\r\n|\n\r|\r|\n)/g,$W),r=t.message.split($W),r.length>1&&(r[0]===""&&r.shift(),r.length>1&&r[r.length-1]===""&&r.pop())),r.forEach(o=>{let s=Object.assign({},t);t.highlight?s.message=`<strong>${o}</strong>`:s.message=o,this.virtualLogMessages.addMessage(s)}),this.fwcMessages=[...this.virtualLogMessages.getValue(this.fwcMessages)],this.cd.detectChanges(),this.scrollToBottom()}}}addNewTaskMessage(e,t,r){this.addNewMessage(new bo({payload:{data:{},task_id:e,type:Ne.MSG_START_TASK,highlight:r,message:t}}))}completeTaskMessage(e){this.addNewMessage(new bo({payload:{data:{},task_id:e,type:Ne.MSG_END_TASK}}))}setDataLoad(e){this.loadingData=e,e&&this.scrollToBottom()}startDataLoad(){this.loadingData=!0}stopDataLoad(){this.loadingData=!1,this.cd.markForCheck()}clearMessages(){this.fwcMessages=[],this.virtualLogMessages.resetValue(),this.loadingData=!1,this.cd.detectChanges()}getLogMessageTypeStyles(e,t){let r={icon:RS[e]?RS[e].icon:"",className:RS[e]?RS[e].className:""};return new RegExp(/\(\*\) */).test(t)&&(r.className="fwcRulePurple"),(new RegExp("Error").test(t)||new RegExp("ERROR").test(t)||new RegExp("error").test(t))&&(r.className="fwcRed"),(new RegExp("Plugin enabled").test(t)||new RegExp("Plugin habilitado").test(t)||new RegExp("Plugin disabled").test(t)||new RegExp("Plugin deshabilitado").test(t))&&(r.className="fwcGreen"),r}scrollToBottom(){if(!this.cd.destroyed&&(this.cd.detectChanges(),this.fwcMessages&&this.fwcMessages.length>0)){let e=this.vsLog.getBlockableElement().querySelector(".p-scroller");e&&e.scrollHeight>e.clientHeight&&e.scrollTo({top:e.scrollHeight-e.clientHeight})}}downloadLog(){let e="",t="",r=`
`;if(this.fwcMessages){navigator.appVersion.indexOf("Win")!=-1&&(r=`\r
`),this.fwcMessages.forEach(a=>{if(a.type===Ne.MSG_SEPARATOR)e+=r;else{let l="",c="";try{l=`${a.time.getFullYear()}/${a.time.getMonth()+1}/${a.time.getDate()} ${a.time.getHours()}:${a.time.getMinutes()}:${a.time.getSeconds()}`,c=a.message.replace(/(<([^>]+)>)/gi,"")}catch{l="N/A"}e+=`${l} - [${a.type.toUpperCase()}] ${c} ${r}`}});let o=new Blob([e],{type:"text/plain;charset=utf-8"});t=`LOG_${new Date().getTime()}.txt`,(0,JW.saveAs)(o,t)}}static{this.\u0275fac=function(t){return new(t||i)(S(we))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-log"]],viewQuery:function(t,r){if(t&1&&le(SS,5),t&2){let o;te(o=ie())&&(r.vsLog=o.first)}},inputs:{height:"height",showFooter:"showFooter"},decls:5,vars:5,consts:[["vsLog",""],["styleClass","fwcLog",3,"value","trackBy","scrollHeight","itemSize"],["pTemplate","header"],["pTemplate","item"],["pTemplate","footer"],[1,"fwc-left"],[1,"fwcLog-header"],[1,"fa","fa-lg","fa-list","fwcBlue"],[1,"fwcLog-loading"],[1,"fa","fa-spin","fa-spinner","fwcBlue"],[3,"class"],[1,"fwcLog-date"],[3,"innerHTML"],[1,"fa","fa-lg","fa-check-circle","fwcGreen"],[1,"fwc-right"],["type","button","pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","disabled","label"]],template:function(t,r){t&1&&(m(0,"p-virtualScroller",1,0),v(2,a6e,6,4,"ng-template",2)(3,u6e,2,1,"ng-template",3)(4,f6e,1,0,null,4),g()),t&2&&(f("value",r.fwcMessages)("trackBy",r.trackById)("scrollHeight",r.height)("itemSize",18),p(4),W(r.showFooter?4:-1))},dependencies:[Ee,pt,SS,cc,gt],styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}div.fwcLog.p-virtualscroller{white-space:nowrap}div.fwcLog.p-virtualscroller .p-virtualscroller-header span.fwcLog-loading{float:right}div.fwcLog.p-virtualscroller .p-virtualscroller-header span.fwcLog-loading span{margin-left:.2rem;font-size:small;color:var(--fwcLightBlue);font-weight:100}div.fwcLog.p-virtualscroller .p-scroller-content{padding:.7em;background-color:var(--fwcGrey6);font-size:.9em;font-family:monospace}div.fwcLog.p-virtualscroller .p-scroller-content li{border:none}div.fwcLog.p-virtualscroller span.fwcLog-date{color:var(--fwcPaleDark)}
`],encapsulation:2,changeDetection:0})}}return i})();var m6e=["pDialog"],g6e=["pfuUpload"],_6e=["fwcLogComponent"],C6e=["fwcMessageComponent"],I6e=()=>({"max-width":"40rem"});function y6e(i,n){if(i&1&&(m(0,"h6",7),P(1,"i",8),F(2),g()),i&2){let e=u();p(2),J(" ",e.options==null?null:e.options.title,"")}}function w6e(i,n){if(i&1&&(m(0,"div"),P(1,"sts-fwc-message",12,2),m(3,"div"),P(4,"sts-fwc-log",13,3),g()()),i&2){let e=u(3);p(),f("message",e.opMessage),p(2),Wn("display",e.options.showLogMessages?"block":"none"),p(),f("height","6rem")}}function v6e(i,n){if(i&1&&(m(0,"div",15),P(1,"i",16)(2,"br"),m(3,"p"),F(4),D(5,"translate"),g()()),i&2){let e=u(4);p(),f("ngClass",e.draggedOver?"fwcGreen":""),p(3),$(N(5,2,"PANELS.FILEUPLOAD_PANEL.UPLOAD_PLACEHOLDER"))}}function b6e(i,n){if(i&1){let e=L();m(0,"div",14),k("dragover",function(r){y(e);let o=u(3);return w(o.onDragOver(r))})("dragleave",function(r){y(e);let o=u(3);return w(o.onDragLeave(r))})("drop",function(r){y(e);let o=u(3);return w(o.onDragDrop(r))}),v(1,v6e,6,4,"div",15),g()}if(i&2){u(2);let e=He(3);p(),W(e.files!=null&&e.files.length?-1:1)}}function S6e(i,n){if(i&1&&v(0,w6e,6,4,"div")(1,b6e,2,1,"div"),i&2){let e=u(2);W(e.loading?0:1)}}function E6e(i,n){if(i&1){let e=L();P(0,"p",9)(1,"br"),m(2,"p-fileUpload",10,1),D(4,"translate"),D(5,"translate"),D(6,"translate"),D(7,"translate"),D(8,"translate"),k("onBeforeUpload",function(){y(e);let r=u();return w(r.onBeforeUpload())})("onUpload",function(r){y(e);let o=u();return w(o.onUploadCompleted(r))})("onError",function(r){y(e);let o=u();return w(o.onUploadError(r))}),v(9,S6e,2,1,"ng-template",11),g()}if(i&2){let e=u();f("innerHTML",e.options.summary,an),p(2),f("url",e.options.url)("headers",e.headers)("withCredentials",!0)("accept",e.options.uploadOptions.acceptPattern)("maxFileSize",e.options.uploadOptions.maxFileSize)("chooseLabel",e.options.uploadOptions.buttonChoose)("uploadLabel",e.options.uploadOptions.buttonUpload)("cancelLabel",N(4,13,"GLOBALS.MSG_BUTTONS.CANCEL"))("invalidFileSizeMessageSummary",N(5,15,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_SIZE.SUMMARY"))("invalidFileSizeMessageDetail",N(6,17,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_SIZE.DETAIL"))("invalidFileTypeMessageSummary",N(7,19,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_TYPE.SUMMARY"))("invalidFileTypeMessageDetail",N(8,21,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_TYPE.DETAIL"))}}function A6e(i,n){}function x6e(i,n){if(i&1){let e=L();m(0,"button",17),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancelHandler())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loading)}}var qW=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d){super(e,t,r,s,d,c),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.translate=o,this.cd=s,this.fwcEventService=a,this.utilService=l,this.router=c,this.store=d,this.filesToUpload=[],this.alive=!0}ngOnInit(){this.headers=new Mo,this.headers=this.headers.set("X-FWC-TIMEOUT","9999999")}ngOnDestroy(){this.alive=!1}waitWSMessages(){return new Promise((t,r)=>{this.options.channelId?(this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(o=>{let s=new bo(o);s&&s.payload?(s.payload.type===Ne.MSG_END?t(s):(s.payload.type,Ne.MSG_ERROR,this.resetTimer()),this.options.showLogMessages?this.fwcLogComponent&&this.fwcLogComponent.addNewMessage(s):this.fwcMessageComponent&&this.fwcMessageComponent.changeStatus(s.payload.message,this.translate.instant("ITEM_BATCH.TABLE_HEADER.1")+":")):this.addLogText(this.translate.instant("LOG_PANEL.MALFORMED_MSG"),Ne.MSG_ERROR)}),this.utilService.ioListenOnLogEvent(this.options.channelId)):t(null)})}resetTimer(){this.timeoutTimer&&clearTimeout(this.timeoutTimer)}showFUDialog(e){if(e){let t=e.uploadTitle?e.uploadTitle:this.translate.instant("PANELS.FILEUPLOAD_PANEL.INFO.LOADING_HEADER"),r=e.uploadText?e.uploadText:this.translate.instant("PANELS.FILEUPLOAD_PANEL.INFO.LOADING_TEXT");this.opMessage={horizontal:!!e.showLogMessages,type:"loading",title:t,text:r},this.displayDialog=!0,this.options=e,e.channelId&&this.waitWSMessages()}}addLogText(e,t){this.fwcLogComponent&&this.fwcLogComponent.addNewText(e,t)}hideDialog(){this.displayDialog=!1,this.loading=!1,this.filesToUpload=[],this.pfuUpload&&this.pfuUpload.clear(),this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.dynamicComponentRef&&this.dynamicComponentRef.destroy()}onCancelHandler(){this.hideDialog()}onBeforeUpload(){this.loading=!0,this.pfuUpload.showUploadButton=!1,this.cd.destroyed||this.cd.detectChanges(),this.pDialog.center()}onUploadCompleted(e){this.loading=!1,this.pfuUpload.showUploadButton=!0,this.pDialog.center(),this.options.onUploadCompleted&&this.options.onUploadCompleted(e)}onUploadError(e){this.loading=!1,this.pfuUpload.showUploadButton=!0,this.pDialog.center(),this.options.onUploadError&&this.options.onUploadError(e)}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.draggedOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.draggedOver=!1}onDragDrop(e){e.preventDefault(),this.draggedOver=!1;let t=e.dataTransfer.files;t.length==1&&(this.filesToUpload=[],this.filesToUpload.push(t.item(0)))}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(Ye),S(we),S(dn),S(ft),S(ct),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-fileupload-panel"]],viewQuery:function(t,r){if(t&1&&(le(m6e,5),le(g6e,5),le(_6e,5),le(C6e,5)),t&2){let o;te(o=ie())&&(r.pDialog=o.first),te(o=ie())&&(r.pfuUpload=o.first),te(o=ie())&&(r.fwcLogComponent=o.first),te(o=ie())&&(r.fwcMessageComponent=o.first)}},features:[Se],decls:6,vars:7,consts:[["pDialog",""],["pfuUpload",""],["fwcMessageComponent",""],["fwcLogComponent",""],["styleClass","dlgFwcDialog",3,"visible","modal","closable"],["pTemplate","header"],["pTemplate","footer"],[1,"dlgFwcDialog-header"],[1,"fwcIcons2","fwci2-moveup","fwcOrange"],[3,"innerHTML"],["name","file","fileLimit","1",3,"onBeforeUpload","onUpload","onError","url","headers","withCredentials","accept","maxFileSize","chooseLabel","uploadLabel","cancelLabel","invalidFileSizeMessageSummary","invalidFileSizeMessageDetail","invalidFileTypeMessageSummary","invalidFileTypeMessageDetail"],["pTemplate","content"],[3,"message"],[3,"height"],[3,"dragover","dragleave","drop"],[1,"divUploadDiv"],[1,"fa","fa-3x","fa-cloud-upload",3,"ngClass"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",4,0),v(2,y6e,3,1,"ng-template",5)(3,E6e,10,23)(4,A6e,0,0)(5,x6e,2,4,"ng-template",6),g()),t&2&&(st(Ae(6,I6e)),f("visible",r.displayDialog)("modal",!0)("closable",!1),p(3),W(r.options?3:4))},dependencies:[je,Yt,Ee,pt,bS,pr,Fn,gt],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divUploadDiv[_ngcontent-%COMP%]{text-align:center}.divUploadDiv[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--fwcMidDark);margin:1rem 0}.divUploadDiv[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--fwcPaleDark)}"]})}}return i})();var Is=[];for(let i=0;i<256;++i)Is.push((i+256).toString(16).slice(1));function YW(i,n=0){return(Is[i[n+0]]+Is[i[n+1]]+Is[i[n+2]]+Is[i[n+3]]+"-"+Is[i[n+4]]+Is[i[n+5]]+"-"+Is[i[n+6]]+Is[i[n+7]]+"-"+Is[i[n+8]]+Is[i[n+9]]+"-"+Is[i[n+10]]+Is[i[n+11]]+Is[i[n+12]]+Is[i[n+13]]+Is[i[n+14]]+Is[i[n+15]]).toLowerCase()}var jF,T6e=new Uint8Array(16);function GF(){if(!jF){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jF=crypto.getRandomValues.bind(crypto)}return jF(T6e)}var O6e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),HF={randomUUID:O6e};function R6e(i,n,e){if(HF.randomUUID&&!n&&!i)return HF.randomUUID();i=i||{};let t=i.random??i.rng?.()??GF();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,n){if(e=e||0,e<0||e+16>n.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let r=0;r<16;++r)n[e+r]=t[r];return n}return YW(t)}var $r=R6e;var P6e=()=>({width:"30vw"});function D6e(i,n){if(i&1){let e=L();m(0,"div",8)(1,"h6",9),F(2),D(3,"translate"),g()(),m(4,"div",10)(5,"button",11),k("click",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()()}i&2&&(p(2),J(" ",N(3,1,"TFA.HEADER")," "))}function F6e(i,n){if(i&1&&P(0,"img",13),i&2){let e=u(2);f("src",e.dataURL,rs)}}function k6e(i,n){if(i&1){let e=L();m(0,"div",4)(1,"div",12)(2,"h6"),F(3),D(4,"translate"),g(),v(5,F6e,1,1,"img",13),m(6,"p"),F(7),D(8,"translate"),g(),m(9,"p"),F(10),D(11,"translate"),g(),m(12,"form",14,0),k("ngSubmit",function(){y(e);let r=u();return w(r.confirm())}),m(14,"input",15,1),D(16,"translate"),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.authCode,r)||(o.authCode=r),w(r)}),g(),P(17,"br")(18,"button",16),D(19,"translate"),g()()()}if(i&2){let e=He(15),t=u();p(3),$(N(4,9,"TFA.TITLE")),p(2),W(t.dataURL?5:-1),p(2),Es("",N(8,11,"TFA.SECRET_KEY")," - ",t.tempSecret,""),p(3),$(N(11,13,"TFA.AUTH_TYPE")),p(4),Q("placeholder",N(16,15,"TFA.AUTH_CODE")),Te("ngModel",t.authCode),p(4),Q("label",N(19,17,"TFA.AUTH_ENABLE")),f("disabled",e==null||e.errors==null?null:e.errors.required)}}function N6e(i,n){if(i&1){let e=L();m(0,"div",4)(1,"div",12)(2,"h6"),F(3),D(4,"translate"),g(),P(5,"img",13),m(6,"p"),F(7),D(8,"translate"),g(),m(9,"p"),F(10),D(11,"translate"),g(),m(12,"button",17),D(13,"translate"),k("click",function(){y(e);let r=u();return w(r.disable())}),g()()()}if(i&2){let e=u();p(3),$(N(4,6,"TFA.CURRENT")),p(2),f("src",e.dataURL,rs),p(2),Es("",N(8,8,"TFA.SECRET_KEY")," - ",e.secret||e.tempSecret,""),p(3),$(N(11,10,"TFA.AUTH_TYPE")),p(2),Q("label",N(13,12,"TFA.AUTH_DISABLE"))}}function L6e(i,n){if(i&1){let e=L();m(0,"button",18),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.close())}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.CLOSE"))}var XW=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_){super(e,t,r,l,c,d),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.messageService=o,this.fwcUserService=s,this.utilService=a,this.cd=l,this.store=c,this.router=d,this.confirmationService=h,this.translate=_,this.darkMode=!1,this.authCode="",this.authErrorMsg=[],this.closeChange=new Ue}ngOnInit(){this.authErrorMsg=[]}ngOnDestroy(){}show(e){this.secret=e.secret,this.tempSecret=e.tempSecret,this.dataURL=e.dataURL,this.tfaURL=this.tfaURL,this.showDialog()}confirm(){this.authErrorMsg=[];let e={authCode:this.authCode,secret:this.secret,tempSecret:this.tempSecret,dataURL:this.dataURL,tfaURL:this.tfaURL};this.utilService.fwcAPICall(this.fwcUserService.verifyAuth.bind(this.fwcUserService),e).then(t=>{t&&t.data?(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("TFA.HEADER"),detail:this.translate.instant("TFA.SUCCESS")}),this.closeChange.next(!0),this.close()):(this.closeChange.next(!1),this.authErrorMsg.push({severity:"error",summary:this.translate.instant("TFA.ERROR"),detail:this.translate.instant("TFA.AUTH_CODE_INVALID")}))}).catch(t=>{t.status===401?(this.closeChange.next(!1),this.authErrorMsg.push({severity:"error",summary:this.translate.instant("TFA.ERROR"),detail:this.translate.instant("TFA.AUTH_CODE_INVALID")})):(this.closeChange.next(!1),this.authErrorMsg.push({severity:"error",summary:this.translate.instant("TFA.ERROR"),detail:this.translate.instant("USER.MSG_USER_AUTH.AUTH_ERROR")}))})}disable(){this.utilService.fwcAPICall(this.fwcUserService.deleteAuth.bind(this.fwcUserService)).then(()=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("TFA.HEADER"),detail:this.translate.instant("TFA.DISABLED")}),this.closeChange.next(!1),this.close()})}ngAfterViewInit(){}onChange(){return this.closeChange.asObservable()}close(){this.closeChange.next(!1),this.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(Kt),S(at),S(ft),S(we),S(nt),S(ct),S(Jt),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-user-2FA-component"]],features:[Se],decls:7,vars:11,consts:[["otpForm","ngForm"],["iauthcode","ngModel"],["styleClass","dlgFwcDialog",3,"visibleChange","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],[1,"col-12","noVertPad"],[3,"valueChange","value","closable"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"divHeaderButtons"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],[1,"col-12",2,"align-items","center"],["alt","",1,"img-thumbnail",2,"display","block","margin","auto",3,"src"],[1,"form-group",3,"ngSubmit"],["name","authcode","type","text","maxlength","6","id","authcode","autocomplete","off","required","",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["type","Submit","pButton","",1,"p-button-success",3,"disabled","label"],["pButton","",1,"p-button-danger",3,"click","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",2),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onHide",function(){return r.close()}),v(1,D6e,6,3,"ng-template",3)(2,k6e,20,19,"div",4)(3,N6e,14,14,"div",4),m(4,"div",5)(5,"p-messages",6),Oe("valueChange",function(s){return Re(r.authErrorMsg,s)||(r.authErrorMsg=s),s}),g()(),v(6,L6e,2,3,"ng-template",7),g()),t&2&&(st(Ae(10,P6e)),Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(2),W(r.secret?-1:2),p(),W(r.secret?3:-1),p(2),Te("value",r.authErrorMsg),f("closable",!1))},dependencies:[Kn,Li,Pi,zn,S_,Jn,mn,HT,Yt,Ee,pt,D1,gt]})}}return i})();var M6e=()=>({width:"50vw"});function V6e(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"GLOBALS.ERRORS.COMMUNICATION")," "))}function B6e(i,n){if(i&1){let e=L();m(0,"button",10),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onClose())}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.CLOSE"))}var WF=15,fo=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d){super(r,t,e,l,c,d),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.utilService=o,this.fwcUserService=s,this.fwcEventService=a,this.cd=l,this.store=c,this.router=d,this.seconds=WF,this.attemps=1,this.socketEventEmitter=new X}checkConnection(){return new Promise(e=>{if(this.utilService.ioGetSocketConnected())return this.onConnected(),e();this.showDialog(),this.interval=setInterval(()=>{if(this.seconds>0)this.seconds--;else if(this.attemps++,this.seconds=WF*this.attemps,this.utilService.ioGetSocketConnected())return this.onConnected(),e()},1e3)})}onConnected(){this.hideDialog(),this.socketEventEmitter.emit("connected")}WsReconect(){this.seconds=WF*this.attemps,this.utilService.ioGetSocketConnected()&&this.onConnected()}onClose(){this.socketEventEmitter.emit("disconnected"),this.fwcUserService.logoutUser().toPromise().finally(()=>{this.utilService.doAppLogout(),this.router.navigate(["user","login"])})}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(ft),S(at),S(dn),S(we),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ws-connection-panel"]],outputs:{socketEventEmitter:"socketEventEmitter"},features:[et([_e]),Se],decls:17,vars:19,consts:[["styleClass","dlgFwcDialog","modal","true",3,"visibleChange","visible","closable","resizable"],["pTemplate","header"],[1,"col-12"],[1,"fa","fa-exclamation-circle","fwcRed","iconBig"],[1,"fwc-centered"],["pButton","",1,"p-button-success",3,"click","label"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcOrange","fa-wifi-slash"],["type","button","pButton","","icon","fa fa-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),v(1,V6e,5,3,"ng-template",1),m(2,"div",2)(3,"p"),P(4,"i",3),F(5),D(6,"translate"),g()(),m(7,"div",4)(8,"p"),F(9),D(10,"translate"),D(11,"translate"),g()(),F(12," \xA0 "),m(13,"div",4)(14,"button",5),D(15,"translate"),k("click",function(){return r.WsReconect()}),g()(),v(16,B6e,2,3,"ng-template",6),g()),t&2&&(st(Ae(18,M6e)),Te("visible",r.displayDialog),f("closable",!1)("resizable",!0),p(5),J("\xA0\xA0",N(6,10,"WEBSOCKET_ERROR.DESCRIPTION"),""),p(4),Tf("",N(10,12,"WEBSOCKET_ERROR.TRY_AGAIN")," ",r.seconds," ",N(11,14,"WEBSOCKET_ERROR.SECONDS"),""),p(5),Q("label",N(15,16,"WEBSOCKET_ERROR.TRY_NOW")))},dependencies:[Yt,Ee,pt,gt],encapsulation:2})}}return i})();var PS=(()=>{class i{transform(e,t="asc",r=""){return!e||!t||e.length<=1?e:!r||r===""?t==="asc"?e.sort():e.sort().reverse():R2(e,[r],[t])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"fwcSortBy",type:i,pure:!0})}}return i})();var U6e=["inputCustomerId"],j6e=["inputUserName"],G6e=["inputResetPass"],H6e=["dlgConfigDialog"],W6e=["ddCustomers"],z6e=()=>({width:"3.5rem",height:"3.5rem",marginBottom:"1rem"}),Hc=i=>({visibility:i}),zF=()=>({width:"1.7rem",height:"1.7rem"}),K6e=()=>({width:"auto"});function $6e(i,n){if(i&1){let e=L();m(0,"button",53),k("click",function(){y(e);let r=u(2);return w(r.showHelp())}),g()}if(i&2){let e=u(2);f("disabled",e.loadingData)}}function J6e(i,n){if(i&1&&(m(0,"div",48)(1,"h6",49),P(2,"i",50),F(3),D(4,"translate"),g()(),m(5,"div",51),v(6,$6e,1,1,"button",52),g()),i&2){let e=u();p(3),J(" ",N(4,2,"CONFIG_PANEL.HEADER")," "),p(3),W(e.helpSection?6:-1)}}function q6e(i,n){if(i&1){let e=L();m(0,"button",77),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onDeleteCustomer())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"CONFIG_PANEL.CUSTOMER.BUTTONS.DELETE")),f("disabled",e.loadingData)}}function Y6e(i,n){if(i&1){let e=L();P(0,"span",75),m(1,"button",78),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancelCustomerEdit())}),g()}if(i&2){let e=u(2);p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",e.loadingData)}}function X6e(i,n){if(i&1){let e=L();m(0,"form",54),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkCustomerForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.onCancelCustomerEdit())}),m(1,"fieldset",55)(2,"div",9)(3,"div",56)(4,"h5",14),F(5),D(6,"translate"),g()(),m(7,"div",57)(8,"div",28)(9,"label",58),F(10),D(11,"translate"),g(),P(12,"input",59,2),g(),m(14,"p",60),F(15),D(16,"translate"),g()(),m(17,"div",61)(18,"div",28)(19,"label",62),F(20),D(21,"translate"),g(),P(22,"input",63),g(),m(23,"p",60),F(24),D(25,"translate"),g()(),m(26,"div",64)(27,"div",28)(28,"label",65),F(29),D(30,"translate"),g(),P(31,"input",66),g(),m(32,"p",60),F(33),D(34,"translate"),g()(),m(35,"div",64)(36,"div",28)(37,"label",67),F(38),D(39,"translate"),g(),P(40,"input",68),g(),m(41,"p",60),F(42),D(43,"translate"),g()(),m(44,"div",57)(45,"div",28)(46,"label",69),F(47),D(48,"translate"),g(),P(49,"input",70),g(),P(50,"p"),g(),m(51,"div",61)(52,"div",28)(53,"label",71),F(54),D(55,"translate"),g(),P(56,"textarea",72),g()(),m(57,"div",10)(58,"div",73),P(59,"p-progressSpinner"),g(),m(60,"button",74),D(61,"translate"),k("click",function(){y(e);let r=u();return w(r.onSaveCustomer())}),g(),P(62,"span",75),v(63,q6e,2,4,"button",76)(64,Y6e,3,4),g()()()()}if(i&2){let e=u();f("formGroup",e.formModelCustomer),p(),f("disabled",e.loadingData),p(4),J(" ",N(6,27,"CONFIG_PANEL.CUSTOMER.DATA")," "),p(5),$(N(11,29,"CONFIG_PANEL.CUSTOMER.FIELDS.ID")),p(2),G("readonly",e.selectedCustomer),p(2),f("ngStyle",ne(51,Hc,e.formModelCustomer.get("id").valid||e.formModelCustomer.get("id").pristine?"hidden":"visible")),p(),J(" ",N(16,31,"CONFIG_PANEL.CUSTOMER.ERRORS.FIELD_INVALID_ID")," "),p(5),$(N(21,33,"CONFIG_PANEL.CUSTOMER.FIELDS.NAME")),p(3),f("ngStyle",ne(53,Hc,e.formModelCustomer.get("name").valid||e.formModelCustomer.get("name").pristine?"hidden":"visible")),p(),J(" ",N(25,35,"CONFIG_PANEL.CUSTOMER.ERRORS.FIELD_INVALID_NAME")," "),p(5),$(N(30,37,"CONFIG_PANEL.CUSTOMER.FIELDS.EMAIL")),p(3),f("ngStyle",ne(55,Hc,e.formModelCustomer.get("email").valid||e.formModelCustomer.get("email").pristine?"hidden":"visible")),p(),J(" ",N(34,39,"CONFIG_PANEL.CUSTOMER.ERRORS.FIELD_INVALID_EMAIL")," "),p(5),$(N(39,41,"CONFIG_PANEL.CUSTOMER.FIELDS.WEB")),p(3),f("ngStyle",ne(57,Hc,e.formModelCustomer.get("web").valid||e.formModelCustomer.get("web").pristine?"hidden":"visible")),p(),J(" ",N(43,43,"CONFIG_PANEL.CUSTOMER.ERRORS.FIELD_INVALID_WEB")," "),p(5),$(N(48,45,"CONFIG_PANEL.CUSTOMER.FIELDS.TEL")),p(7),$(N(55,47,"CONFIG_PANEL.CUSTOMER.FIELDS.ADDRESS")),p(2),f("rows",3)("cols",30),p(2),f("ngStyle",ne(59,Hc,e.loadingData?"visible":"hidden")),p(),st(Ae(61,zF)),p(),Q("label",N(61,49,"CONFIG_PANEL.CUSTOMER.BUTTONS.SAVE")),f("disabled",e.formModelCustomer.pristine||!e.formModelCustomer.valid||e.loadingData),p(3),W(e.selectedCustomer?63:-1),p(),W(e.formModelCustomer!=null&&e.formModelCustomer.dirty||!e.selectedCustomer?64:-1)}}function Q6e(i,n){if(i&1&&(P(0,"input",85),D(1,"translate"),D(2,"translate"),D(3,"translate"),D(4,"translate")),i&2){let e=u(2);f("showPassword",e.displayUserPassword)("promptLabel",N(1,5,"GLOBALS.MSG_PASSWORD.PASS"))("weakLabel",N(2,7,"GLOBALS.MSG_PASSWORD.WEAK"))("mediumLabel",N(3,9,"GLOBALS.MSG_PASSWORD.NORMAL"))("strongLabel",N(4,11,"GLOBALS.MSG_PASSWORD.SAFE"))}}function Z6e(i,n){if(i&1){let e=L();m(0,"button",88),k("mousedown",function(){y(e);let r=u(2);return w(r.displayUserPassword=!0)})("mouseup",function(){y(e);let r=u(2);return w(r.displayUserPassword=!1)})("mouseout",function(){y(e);let r=u(2);return w(r.displayUserPassword=!1)}),g()}if(i&2){let e=u(2);f("disabled",e.loadingData)}}function eUe(i,n){if(i&1){let e=L();m(0,"button",89),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.allowPasswordReset())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"CONFIG_PANEL.USER.BUTTONS.RESET")),f("disabled",e.loadingData)}}function tUe(i,n){if(i&1&&(he(0),m(1,"div",96),P(2,"img",97),m(3,"span"),F(4),g()(),fe()),i&2){let e=n.$implicit;p(4),$(e.name)}}function iUe(i,n){if(i&1&&(he(0),v(1,tUe,5,1,"ng-container",95),fe()),i&2){let e=u().$implicit,t=u(3);p(),f("ngForOf",e)("ngForTrackBy",t.trackByFn)}}function nUe(i,n){i&1&&(m(0,"label",98)(1,"span"),F(2),D(3,"translate"),g()()),i&2&&(p(2),$(N(3,1,"CONFIG_PANEL.USER.CHOOSE_CLOUDS")))}function rUe(i,n){if(i&1&&v(0,iUe,2,2,"ng-container",94)(1,nUe,4,3,"ng-template",null,4,Bt),i&2){let e=n.$implicit,t=He(2);f("ngIf",(e==null?null:e.length)>0)("ngIfElse",t)}}function oUe(i,n){if(i&1&&(P(0,"img",99),m(1,"div",100),F(2),g()),i&2){let e=n.$implicit;p(2),J(" ",e.name," ")}}function sUe(i,n){if(i&1){let e=L();m(0,"div",10)(1,"div",28)(2,"label",90),F(3),D(4,"translate"),g(),m(5,"p-multiSelect",91),D(6,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(2);return Re(o.selectedFwclouds,r)||(o.selectedFwclouds=r),w(r)}),k("onChange",function(){y(e);let r=u(2);return w(r.selectedFwcloudsChanged=!0)}),v(7,rUe,3,2,"ng-template",92)(8,oUe,3,1,"ng-template",93),g()()()}if(i&2){let e=u(2);p(3),$(N(4,6,"CONFIG_PANEL.USER.FIELDS.FWCLOUDS")),p(2),st(Ae(10,K6e)),Q("defaultLabel",N(6,8,"CONFIG_PANEL.USER.CHOOSE_CLOUDS")),f("options",e.fwclouds),Te("ngModel",e.selectedFwclouds)}}function aUe(i,n){if(i&1){let e=L();m(0,"button",77),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onDeleteUser())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"CONFIG_PANEL.USER.BUTTONS.DELETE")),f("disabled",e.loadingData)}}function lUe(i,n){if(i&1){let e=L();P(0,"span",75),m(1,"button",78),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancelUserEdit())}),g()}if(i&2){let e=u(2);p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",e.loadingData)}}function cUe(i,n){if(i&1){let e=L();m(0,"form",54),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkUserForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.onCancelUserEdit())}),m(1,"fieldset",55)(2,"div",9)(3,"div",56)(4,"h5",14),F(5),D(6,"translate"),g()(),m(7,"div",64)(8,"div",28)(9,"label",62),F(10),D(11,"translate"),g(),P(12,"input",63,3),g(),m(14,"p",60),F(15),D(16,"translate"),g()(),m(17,"div",79)(18,"div",28)(19,"label"),F(20),D(21,"translate"),g()()(),m(22,"div",21),P(23,"p-dropdown",80),g(),m(24,"div",64)(25,"div",28)(26,"label",81),F(27),D(28,"translate"),g(),P(29,"input",82),g(),m(30,"p",60),F(31),D(32,"translate"),g()(),m(33,"div",64)(34,"div",83)(35,"label",84),F(36),D(37,"translate"),g(),v(38,Q6e,5,13,"input",85)(39,Z6e,1,1,"button",86)(40,eUe,2,4,"button",87),g()()()()(),v(41,sUe,9,11,"div",10),m(42,"div",10)(43,"div",73),P(44,"p-progressSpinner"),g(),m(45,"button",74),D(46,"translate"),k("click",function(){y(e);let r=u();return w(r.onSaveUser())}),g(),P(47,"span",75),v(48,aUe,2,4,"button",76)(49,lUe,3,4),g()}if(i&2){let e=u();f("formGroup",e.formModelUser),p(),f("disabled",e.loadingData),p(4),J(" ",N(6,23,"CONFIG_PANEL.USER.DATA")," "),p(5),$(N(11,25,"CONFIG_PANEL.USER.FIELDS.NAME")),p(4),f("ngStyle",ne(39,Hc,e.formModelUser.get("name").valid||e.formModelUser.get("name").pristine?"hidden":"visible")),p(),J(" ",N(16,27,"CONFIG_PANEL.USER.ERRORS.FIELD_INVALID_NAME")," "),p(5),$(N(21,29,"CONFIG_PANEL.USER.FIELDS.ROLE")),p(3),f("options",e.userRoles),p(4),$(N(28,31,"CONFIG_PANEL.USER.FIELDS.USERNAME")),p(3),f("ngStyle",ne(41,Hc,e.formModelUser.get("username").valid||e.formModelUser.get("username").pristine?"hidden":"visible")),p(),J(" ",N(32,33,"CONFIG_PANEL.USER.ERRORS.FIELD_INVALID_USERNAME")," "),p(5),$(N(37,35,"CONFIG_PANEL.USER.FIELDS.PASSWORD")),p(2),W(e.formModelUser!=null&&e.formModelUser.controls.password.enabled?38:-1),p(),W(e.formModelUser!=null&&e.formModelUser.controls.password.enabled?39:-1),p(),W(e.formModelUser!=null&&e.formModelUser.controls.password.disabled?40:-1),p(),W(e.fwclouds&&e.fwclouds.length&&(e.formModelUser==null?null:e.formModelUser.controls.role.value)==e.UserRoles.ROLE_MANAGER?41:-1),p(2),f("ngStyle",ne(43,Hc,e.loadingData?"visible":"hidden")),p(),st(Ae(45,zF)),p(),Q("label",N(46,37,"CONFIG_PANEL.USER.BUTTONS.SAVE")),f("disabled",e.formModelUser.pristine&&!e.selectedFwcloudsChanged||!e.formModelUser.valid||e.loadingData),p(3),W(e.selectedUser?48:-1),p(),W(e.formModelUser&&(e.formModelUser!=null&&e.formModelUser.dirty||!e.selectedUser)||e.selectedFwcloudsChanged?49:-1)}}function dUe(i,n){if(i&1&&(m(0,"div"),P(1,"sts-fwc-message",101),g()),i&2){let e=u();p(),f("message",e.errorMessage)}}function pUe(i,n){if(i&1){let e=L();m(0,"button",74),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onResetPassword())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"CONFIG_PANEL.USER.BUTTONS.RESET_PASS")),f("disabled",e.loadingData||e.formModelResetPassword.invalid)}}function uUe(i,n){if(i&1){let e=L();P(0,"span",75),m(1,"button",78),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancelResetPassword())}),g()}if(i&2){let e=u(2);p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",e.loadingData)}}function hUe(i,n){if(i&1){let e=L();m(0,"p-tabPanel",23),D(1,"translate"),m(2,"div",9)(3,"div",13)(4,"h5",14),F(5),D(6,"translate"),g()(),m(7,"div",64)(8,"div",28)(9,"label",90),F(10),D(11,"translate"),g(),P(12,"input",102),g()(),m(13,"div",64)(14,"form",103),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkUserPasswordForm(r))}),m(15,"fieldset",55)(16,"div",28)(17,"label",104),F(18),D(19,"translate"),g(),P(20,"input",105,5),D(22,"translate"),D(23,"translate"),D(24,"translate"),D(25,"translate"),m(26,"button",106),k("mousedown",function(){y(e);let r=u();return w(r.displayUserPassword=!0)})("mouseup",function(){y(e);let r=u();return w(r.displayUserPassword=!1)})("mouseout",function(){y(e);let r=u();return w(r.displayUserPassword=!1)}),g()()()()(),m(27,"div",10)(28,"div",73),P(29,"p-progressSpinner"),g(),v(30,pUe,2,4,"button",107)(31,uUe,3,4),g()()()}if(i&2){let e=u();Q("header",N(1,19,"CONFIG_PANEL.PASSWORD_RESET.HEADER")),f("selected",(e.loggedUser==null?null:e.loggedUser.role)==e.UserRoles.ROLE_MANAGER)("disabled",e.loadingData),p(5),J(" ",N(6,21,"CONFIG_PANEL.PASSWORD_RESET.TITLE")," "),p(5),$(N(11,23,"CONFIG_PANEL.USER.FIELDS.USERNAME")),p(2),f("value",e.loggedUser.username),p(2),f("formGroup",e.formModelResetPassword),p(),f("disabled",e.loadingData),p(3),$(N(19,25,"CONFIG_PANEL.USER.FIELDS.PASSWORD")),p(2),f("showPassword",e.displayUserPassword)("promptLabel",N(22,27,"GLOBALS.MSG_PASSWORD.PASS"))("weakLabel",N(23,29,"GLOBALS.MSG_PASSWORD.WEAK"))("mediumLabel",N(24,31,"GLOBALS.MSG_PASSWORD.NORMAL"))("strongLabel",N(25,33,"GLOBALS.MSG_PASSWORD.SAFE")),p(8),f("ngStyle",ne(35,Hc,e.loadingData?"visible":"hidden")),p(),st(Ae(37,zF)),p(),W(e.loggedUser?30:-1),p(),W(e.formModelResetPassword&&(e.formModelResetPassword!=null&&e.formModelResetPassword.dirty)?31:-1)}}function fUe(i,n){i&1&&(m(0,"div",112)(1,"label"),F(2),D(3,"translate"),g(),P(4,"p-calendar",132),g()),i&2&&(p(2),J("",N(3,2,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_FIXED.1")," "),p(2),f("timeOnly",!0))}function mUe(i,n){i&1&&P(0,"input",133)}function gUe(i,n){i&1&&P(0,"input",134)}function _Ue(i,n){if(i&1){let e=L();m(0,"div",15)(1,"label"),F(2),D(3,"translate"),g(),v(4,mUe,1,0,"input",133)(5,gUe,1,0,"input",134),m(6,"p-dropdown",135),k("onChange",function(){y(e);let r=u(3);return w(r.onChangeBackupTimeOptions())}),g()()}if(i&2){let e=u(3);p(2),J("",N(3,4,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_INTERVAL.1")," \xA0"),p(2),W((e.formModelBackupOptions==null?null:e.formModelBackupOptions.get("backupTimeOption").value)==60?4:-1),p(),W((e.formModelBackupOptions==null?null:e.formModelBackupOptions.get("backupTimeOption").value)==1?5:-1),p(),f("options",e.backupTimeOptions)}}function CUe(i,n){i&1&&(m(0,"colgroup"),P(1,"col")(2,"col")(3,"col")(4,"col"),g()),i&2&&(p(),Wn("width","12rem"),p(),Wn("width","8rem"),p(),Wn("width","8rem"))}function IUe(i,n){i&1&&(m(0,"tr")(1,"th"),F(2),D(3,"translate"),g(),m(4,"th"),F(5),D(6,"translate"),g(),m(7,"th"),F(8),D(9,"translate"),g(),m(10,"th"),F(11),D(12,"translate"),g()()),i&2&&(p(2),J(" ",N(3,4,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.TABLE_HEADER.0")," "),p(3),J(" ",N(6,6,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.TABLE_HEADER.1")," "),p(3),J(" ",N(9,8,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.TABLE_HEADER.3")," "),p(3),J(" ",N(12,10,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.TABLE_HEADER.4")," "))}function yUe(i,n){i&1&&(m(0,"span"),P(1,"i",137),g())}function wUe(i,n){if(i&1&&(m(0,"tr",136)(1,"td"),F(2),D(3,"date"),g(),m(4,"td"),F(5),g(),m(6,"td",46),v(7,yUe,2,0,"span"),g(),m(8,"td"),F(9),g()()),i&2){let e=n.$implicit;f("pSelectableRow",e),p(2),J(" ",ei(3,5,e.date,"dd/MM/yyyy HH:mm:ss")," "),p(3),J(" ",e.version," "),p(2),W(e.imported?7:-1),p(2),J(" ",e.comment," ")}}function vUe(i,n){if(i&1){let e=L();m(0,"div",130)(1,"button",138),D(2,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onRestoreOrDeleteBackup(!0))}),g(),m(3,"button",139),D(4,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onRestoreOrDeleteBackup())}),g(),m(5,"button",140),D(6,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onExportBackup())}),g()()}if(i&2){let e=u(3);p(),Q("label",N(2,6,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.DELETE_BACKUP")),f("disabled",!e.selectedBackup||e.loadingData),p(2),Q("label",N(4,8,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_BACKUP")),f("disabled",!e.selectedBackup||e.loadingData),p(2),Q("label",N(6,10,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.EXPORT_BACKUP")),f("disabled",!e.selectedBackup||e.loadingData)}}function bUe(i,n){if(i&1&&(m(0,"div",131),P(1,"sts-fwc-message",101),g()),i&2){let e=u(3);p(),f("message",e.backupErrorMessage)}}function SUe(i,n){if(i&1){let e=L();m(0,"p-tabView",109),k("onChange",function(r){y(e);let o=u(2);return w(o.onBackupTabChange(r))}),m(1,"p-tabPanel",110),D(2,"translate"),m(3,"form",19)(4,"fieldset",111)(5,"div",112)(6,"h5",14),F(7),D(8,"translate"),g()(),m(9,"div",113)(10,"button",114),D(11,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onDoBackup())}),g()(),m(12,"div",112)(13,"h5",14),F(14),D(15,"translate"),g()(),m(16,"div",115)(17,"label"),F(18),D(19,"translate"),g(),P(20,"p-selectButton",116),F(21," \xA0 "),m(22,"p",60),F(23),D(24,"translate"),g()(),m(25,"div",112),P(26,"p-radioButton",117),D(27,"translate"),g(),v(28,fUe,5,4,"div",112),m(29,"div",112),P(30,"p-radioButton",117),D(31,"translate"),g(),v(32,_Ue,7,6,"div",15),m(33,"div",112)(34,"h6",90),F(35),D(36,"translate"),g()(),m(37,"div",118)(38,"p-checkbox",119),D(39,"translate"),k("onChange",function(){y(e);let r=u(2);return w(r.onChangeBackupOptions())}),g()(),m(40,"div",120),P(41,"input",121),g(),m(42,"div",118)(43,"p-checkbox",122),D(44,"translate"),k("onChange",function(){y(e);let r=u(2);return w(r.onChangeBackupOptions())}),g()(),m(45,"div",120),P(46,"input",123),g(),m(47,"div",124)(48,"button",74),D(49,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onSaveBackupOptions())}),g()()()()(),m(50,"p-tabPanel",125),D(51,"translate"),m(52,"form",19)(53,"fieldset",111)(54,"div",10)(55,"h5",14),F(56),D(57,"translate"),g()(),m(58,"div",112)(59,"p-table",126),D(60,"fwcSortBy"),Oe("selectionChange",function(r){y(e);let o=u(2);return Re(o.selectedBackup,r)||(o.selectedBackup=r),w(r)}),v(61,CUe,5,6,"ng-template",127)(62,IUe,13,12,"ng-template",8)(63,wUe,10,8,"ng-template",128),g(),m(64,"div",9)(65,"div",57)(66,"button",129),D(67,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onImportBackup())}),g()(),v(68,vUe,7,12,"div",130),g()(),v(69,bUe,2,1,"div",131),g()()()()}if(i&2){let e=u(2);p(),Q("header",N(2,39,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.HEADER")),f("disabled",e.loadingData),p(2),f("formGroup",e.formModelBackupOptions),p(),f("disabled",e.loadingData),p(3),J(" ",N(8,41,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.TITLE_INST")," "),p(3),Q("label",N(11,43,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.BTN_BACKUP")),f("disabled",e.loadingData),p(4),J(" ",N(15,45,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.TITLE_PLAN")," "),p(4),J("",N(19,47,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_DAYS")," \xA0\xA0"),p(2),f("options",e.backupDays),p(2),f("ngStyle",ne(73,Hc,e.formModelBackupOptions.get("backupDays").valid||e.formModelBackupOptions.get("backupDays").pristine?"hidden":"visible")),p(),J(" ",N(24,49,"CONFIG_PANEL.BACKUP_RESTORE.ERRORS.FIELD_DAYS")," "),p(3),Q("value",e.EnumBackupOptions.BACKUP_FIXED_TIME),Q("label",N(27,51,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_FIXED.0")),p(2),W((e.formModelBackupOptions==null?null:e.formModelBackupOptions.get("backupType").value)==e.EnumBackupOptions.BACKUP_FIXED_TIME?28:-1),p(2),Q("value",e.EnumBackupOptions.BACKUP_INTERVAL_TIME),Q("label",N(31,53,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_INTERVAL.0")),p(2),W((e.formModelBackupOptions==null?null:e.formModelBackupOptions.get("backupType").value)==e.EnumBackupOptions.BACKUP_INTERVAL_TIME?32:-1),p(3),J(" ",N(36,55,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.TITLE_PLAN_OPTIONS")," "),p(3),Q("value",e.EnumBackupOptions.BACKUP_MAX_COPIES),Q("label",N(39,57,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_OPTIONS.0")),f("formControl",e.formModelBackupOptions.controls.backupOptions),p(5),Q("value",e.EnumBackupOptions.BACKUP_MAX_DAYS),Q("label",N(44,59,"CONFIG_PANEL.BACKUP_RESTORE.BACKUP.PLAN_OPTIONS.1")),f("formControl",e.formModelBackupOptions.controls.backupOptions),p(5),Q("label",N(49,61,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModelBackupOptions.valid||e.formModelBackupOptions.pristine||e.loadingData),p(2),Q("header",N(51,63,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.HEADER")),f("disabled",e.loadingData),p(2),f("formGroup",e.formModelBackupOptions),p(),f("disabled",e.loadingData),p(3),J(" ",N(57,65,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.TITLE")," "),p(3),f("value",Ms(60,67,e.backups,"desc","date")),Te("selection",e.selectedBackup),f("scrollable",!0),p(7),Q("label",N(67,71,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.IMPORT_BACKUP")),f("disabled",e.loadingData),p(2),W(e.backups!=null&&e.backups.length?68:-1),p(),W(e.backups!=null&&e.backups.length?-1:69)}}function EUe(i,n){if(i&1&&(m(0,"p-tabPanel",31),D(1,"translate"),v(2,SUe,70,75,"p-tabView",108),g()),i&2){let e=u();Q("header",N(1,4,"CONFIG_PANEL.BACKUP_RESTORE.HEADER")),f("disabled",!(e.formModelBackupOptions&&!e.loadingData))("selected",(e.loggedUser==null?null:e.loggedUser.role)==e.UserRoles.ROLE_MANAGER),p(2),W(e.formModelBackupOptions?2:-1)}}function AUe(i,n){if(i&1){let e=L();m(0,"p-tabPanel",32),D(1,"translate"),m(2,"form",19)(3,"fieldset",141)(4,"div",10)(5,"div",25)(6,"h5",14),F(7),D(8,"translate"),g()(),m(9,"div",142)(10,"button",143),D(11,"translate"),k("click",function(){y(e);let r=u();return w(r.doHistoric())}),g()()(),m(12,"div",10)(13,"div",144)(14,"label"),F(15),D(16,"translate"),g(),F(17,"\xA0 "),P(18,"input",145),F(19,"\xA0 "),m(20,"select",146,6)(22,"option",147),F(23),D(24,"translate"),g(),m(25,"option",148),F(26),D(27,"translate"),g(),m(28,"option",149),F(29),D(30,"translate"),g()()(),m(31,"div",144)(32,"label"),F(33),D(34,"translate"),g(),F(35,"\xA0 "),P(36,"input",150),F(37,"\xA0 "),m(38,"select",151,6)(40,"option",147),F(41),D(42,"translate"),g(),m(43,"option",148),F(44),D(45,"translate"),g(),m(46,"option",149),F(47),D(48,"translate"),g()()(),m(49,"div",152)(50,"button",74),D(51,"translate"),k("click",function(){y(e);let r=u();return w(r.onSaveHistoricOptions())}),g()()()()()()}if(i&2){let e=u();Q("header",N(1,17,"OPENVPN_HISTORIC.HEADER")),f("disabled",e.loadingData),p(2),f("formGroup",e.formModelHistoric),p(),f("disabled",e.loadingData),p(4),$(N(8,19,"OPENVPN_HISTORIC.HEADER")),p(3),Q("label",N(11,21,"OPENVPN_HISTORIC.BUTTON")),f("disabled",e.loadingData),p(5),$(N(16,23,"OPENVPN_HISTORIC.DATA_BASE")),p(8),J(" ",N(24,25,"VPN.PANEL.DAY_OPTS.0"),""),p(3),J(" ",N(27,27,"VPN.PANEL.DAY_OPTS.2"),""),p(3),J(" ",N(30,29,"VPN.PANEL.DAY_OPTS.1"),""),p(4),$(N(34,31,"OPENVPN_HISTORIC.DISK")),p(8),J(" ",N(42,33,"VPN.PANEL.DAY_OPTS.0"),""),p(3),J(" ",N(45,35,"VPN.PANEL.DAY_OPTS.2"),""),p(3),J(" ",N(48,37,"VPN.PANEL.DAY_OPTS.1"),""),p(3),Q("label",N(51,39,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",e.loadingData||e.formModelHistoric.pristine)}}function xUe(i,n){if(i&1){let e=L();m(0,"button",153),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}function TUe(i,n){i&1&&(P(0,"i",154),F(1),D(2,"translate")),i&2&&(p(),J(" ",N(2,1,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_DIALOG.HEADER")," "))}var NBt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A,U,z,ee,re,Z){super(r,t,e,s,U,a),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.translate=o,this.cd=s,this.router=a,this.messageService=l,this.fwcCustomerService=c,this.fwcEventService=d,this.fwcCloudService=h,this.fwcUserService=_,this.fwcBackupService=C,this.utilService=I,this.confirmationService=b,this.fwcErrorPipe=E,this.fwcApiService=R,this.fwcAuthService=T,this.inputDataService=A,this.store=U,this.fwcAiAssistantService=z,this.fwcVpnService=ee,this.aiAssistantCheckEnabledService=re,this._document=Z,this.UserRoles=fh,this.EnumBackupOptions=ll,this.darkMode=!1,this.themeOptions=[{value:!1,label:this.translate.instant("CONFIG_PANEL.CUSTOM.LIGHT_THEME"),icon:"pi pi-sun fwcOrange"},{value:!0,label:this.translate.instant("CONFIG_PANEL.CUSTOM.DARK_THEME"),icon:"pi pi-moon fwcDarkBlue"}],this.TFAOptions=[{value:!0,label:this.translate.instant("CONFIG_PANEL.CUSTOM.TFA_ENABLED"),icon:"fa fa-user-shield fwcOrange"},{value:!1,label:this.translate.instant("CONFIG_PANEL.CUSTOM.TFA_DISABLED"),icon:"fa fa-user-minus fwcBlue"}],this.openAIapiKey="",this.ai_types=[{version:"ChatGPT",name:"ChatGPT"}],this.gptModels=[{name:"Select a model",version:""},{name:"GPT-5",version:"gpt-5"},{name:"GPT-5 mini",version:"gpt-5-mini"},{name:"GPT-5 nano",version:"gpt-5-nano"},{name:"GPT-4.1",version:"gpt-4.1"},{name:"GPT-4.1 mini",version:"gpt-4.1-mini"},{name:"GPT-4.1 nano",version:"gpt-4.1-nano"},{name:"GPT-4o",version:"gpt-4o"},{name:"GPT-4o mini",version:"gpt-4o-mini"},{name:"GPT-4 Turbo",version:"gpt-4-turbo"},{name:"O1-preview",version:"o1-preview"},{name:"O1-mini",version:"o1-mini"},{name:"GPT-4",version:"gpt-4"},{name:"GPT-3.5 Turbo",version:"gpt-3.5-turbo"}],this.formEnabled=!1,this.helpSection="/configuration",this.translate.get("CONFIG_PANEL.TITLE").subscribe(ae=>{this.createDialog(ae,"fwci-config")}),this.backupDays=[],this.translate.get("GLOBALS.DAYS_OF_WEEK").subscribe(ae=>{Object.values(ae).forEach((Ie,ye)=>{let xe;ye==6?xe=0:xe=ye+1,this.backupDays.push({label:Ie,value:xe})})}),this.backupTimeOptions=[],this.translate.get("GLOBALS.HOUR_MINUTES").subscribe(ae=>{this.backupTimeOptions.push({label:ae[0],value:60}),this.backupTimeOptions.push({label:ae[1],value:1})}),_.getAuth().subscribe(ae=>{ae.data.enabled&&ae.data.tfa.secret?this.TFAMode=!0:this.TFAMode=!1})}ngOnInit(){this.store.pipe(Cn(Ko),yt(()=>this.alive)).subscribe(e=>{this.darkMode=e==="dark"}),this.userRoles=[{label:this.translate.instant("CONFIG_PANEL.CUSTOMER.ROLES.0"),value:fh.ROLE_ADMINISTRATOR},{label:this.translate.instant("CONFIG_PANEL.CUSTOMER.ROLES.1"),value:fh.ROLE_MANAGER}],this.createHistoricForm(),this.selectedAI={name:this.ai_types[0].name},this.selectedModel=this.gptModels[0],this.createGPTAssistantForm()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){}updateAndShow(){return B(this,null,function*(){this.resetProperties(),yield this.getLoggedUser().then(e=>{this.loggedUser=e.data,this.createResetPasswordForm(),this.formModelResetPassword=new rr({resetpassword:new ve("",[Pe.required,Pe.pattern(Pt.passwordRegexp)])})}).catch(e=>{if(e&&e.error&&e.error.fwcErr==1008){this.loggedUser=e.data;let t=this.fwcUserService.getActualFwcUser();this.loggedUser.name="",this.loggedUser.customer=t.customer_id,this.loggedUser.id=t.user_id,this.loggedUser.username=t.user_name,this.loggedUser.enabled=1,this.loggedUser.role=fh.ROLE_MANAGER,this.createResetPasswordForm(),this.activeMenuOption=2,this.cd.detectChanges()}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("CONFIG_PANEL.USER.ERRORS.GET_USER_ERROR"),detail:this.fwcErrorPipe.transform(e)}),this.loggedUser=null}),this.loggedUser&&this.loggedUser.role==fh.ROLE_ADMINISTRATOR&&(yield Promise.all([this.getCustomers(),this.getClouds(),this.getBackups(),this.getBackupConfig()]).then(s=>B(this,[s],function*([e,t,r,o]){Array.isArray(t.data)?this.fwclouds=t.data:this.fwclouds=null,e&&Array.isArray(e.data)&&(this.customers=e.data,this.selectedCustomer=this.customers[0],yield this.loadCustomer(this.selectedCustomer),this.selectedUserCustomer=this.selectedCustomer,yield this.loadUsers(this.selectedUserCustomer)),this.backups=[],Array.isArray(r.data)&&r.data.length?this.backups=r.data:this.backupErrorMessage={type:"warning",title:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.WARNING_NO_BACKUPS.0"),text:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.WARNING_NO_BACKUPS.1")},this.createBackupOptionsForm(o.data)})).catch(e=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(e)}),this.formModelCustomer=null,this.formModelBackupOptions=null,this.fwclouds=null})),this.store.dispatch(Bi.requestUnblockUI()),this.recenterDialog(),this.showDialog()})}resetProperties(){this.customers=this.customer=null,this.users=this.user=null,this.selectedCustomer=this.selectedUser=this.selectedUserCustomer=null,this.selectedFwcloudsChanged=!1,this.activeMenuOption=0,this.errorMessage=null,this.backupErrorMessage=null}getCustomers(){return new Promise((e,t)=>{this.fwcCustomerService.getCustomers().subscribe({next:r=>{e(r)},error:r=>{t(r)},complete:()=>{}})})}getClouds(){return new Promise((e,t)=>{this.fwcCloudService.getClouds().subscribe({next:r=>{e(r)},error:r=>{t(r)},complete:()=>{}})})}trackByFn(e,t){return t.id}getUserClouds(e){return new Promise((t,r)=>{this.fwcUserService.getUserClouds(e).subscribe({next:o=>{o.data&&o.data.length?(this.selectedFwclouds=o.data,this.userFwclouds=this.selectedFwclouds.slice(0)):(this.selectedFwclouds=[],this.userFwclouds=[]),this.selectedFwcloudsChanged=!1,t(o)},error:o=>{r(o)}})})}getLoggedUser(){return B(this,null,function*(){try{let e=this.fwcUserService.getActualFwcUser(),t={customer:e.customer_id,user:e.user_id};return yield Jc(this.fwcUserService.getUser(t))}catch(e){throw e}})}getBackups(){return new Promise((e,t)=>{let r={next:o=>{e(o)},error:o=>{t(o)},complete:()=>{}};this.fwcBackupService.getBackups().subscribe(r)})}getBackupConfig(){return new Promise((e,t)=>{let r={next:o=>{e(o)},error:o=>{t(o)},complete:()=>{}};this.fwcBackupService.getBackupConfig().subscribe(r)})}onChangeOption(e){e&&e.index==2&&this.inputResetPass&&setTimeout(()=>{this.inputResetPass.nativeElement.focus()},100),this.recenterDialog()}createCustomerForm(e){let t=Math.max(...this.customers.map(r=>r.id),0);this.formModelCustomer=new rr({id:new ve(e?e.id:t+1,Pe.required),name:new ve(e?e.name:"",[Pe.required,Pe.maxLength(255)]),email:new ve(e?e.email:"",[Pe.email,Pe.maxLength(255)]),web:new ve(e?e.web:"",[Pe.pattern(Pt.webAddressRegexp),Pe.maxLength(255)]),phone:new ve(e?e.phone:""),addr:new ve(e?e.addr:"",[Pe.maxLength(255)])})}loadCustomer(e){return new Promise((t,r)=>{let o={customer:e?e.id:-1};this.loadingData=!0;let s={next:a=>{this.createCustomerForm(a.data),this.customer=Object.assign({},a.data),this.loadingData=!1,t(a)},error:a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),this.formModelCustomer=null,this.loadingData=!1,r(a)},complete:()=>{}};this.fwcCustomerService.getCustomer(o).subscribe(s)})}onChangeCustomer(e){e&&e.value&&this.loadCustomer(e.value)}onNewCustomer(){this.createCustomerForm(),this.selectedCustomer=null,this.inputCustomerId.nativeElement.focus()}onDeleteCustomer(){if(!this.selectedCustomer)return;let e={customer:this.selectedCustomer.id},t={next:r=>{},error:r=>{r.error&&r.error.restrictions&&this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_NOT_POSSIBLE"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("CONFIG_PANEL.CUSTOMER.ERRORS.HAS_USERS",{name:this.selectedCustomer.name}),accept:()=>{}})},complete:()=>{}};this.fwcCustomerService.checkCustomerRestrictions(e).subscribe(t),this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("CONFIG_PANEL.CUSTOMER.CONFIRM_DELETE",{name:this.selectedCustomer.name}),accept:()=>{this.utilService.fwcAPICall(this.fwcCustomerService.deleteCustomer.bind(this.fwcCustomerService),e).then(()=>{let r=this.customers.slice(0),o=r.findIndex(s=>s.id==this.selectedCustomer.id);r.splice(o,1),this.customers=r,this.selectedCustomer=this.customers[0],this.loadCustomer(this.selectedCustomer),this.selectedUserCustomer=this.selectedCustomer,this.loadUsers(this.selectedUserCustomer),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.CUSTOMER.SUCCESS.DELETE")})}).catch(r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.CUSTOMER.ERRORS.DELETE_ERROR",{error:this.fwcErrorPipe.transform(r)})})})},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")})}onSaveCustomer(){let e,t,r;r=Object.assign({},this.customer);let o={};for(let s in this.formModelCustomer.controls)o[s]=this.formModelCustomer.controls[s].value!==null&&this.formModelCustomer.controls[s].value!==void 0?this.formModelCustomer.controls[s].value:void 0,r[s]=o[s];this.selectedCustomer?(e=this.fwcCustomerService.updateCustomer.bind(this.fwcCustomerService),t=this.translate.instant("CONFIG_PANEL.CUSTOMER.SUCCESS.UPDATE")):(e=this.fwcCustomerService.newCustomer.bind(this.fwcCustomerService),t=this.translate.instant("CONFIG_PANEL.CUSTOMER.SUCCESS.NEW")),o.customer=+o.id,delete o.id,this.loadingData=!0,e&&this.utilService.fwcAPICall(e,o).then(s=>{this.customer=r;let a=[];if(this.customers&&(a=this.customers.slice(0)),this.selectedCustomer){let l=a.findIndex(c=>c.id==r.id);l!=-1&&(a[l]=r,this.customers=a)}else{let l={id:r.id,name:r.name};a.push(l),this.customers=a,this.selectedCustomer=l}this.formModelCustomer.reset(this.customer),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:t}),this.loadingData=!1}).catch(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.CUSTOMER.ERRORS.SAVE_ERROR",{error:this.fwcErrorPipe.transform(s)})}),this.loadingData=!1})}onCancelCustomerEdit(){if(!this.selectedCustomer&&this.customer){let e=this.customers.findIndex(t=>t.id==this.customer.id);e!=-1&&(this.selectedCustomer=this.customers[e])}this.createCustomerForm(this.customer)}checkCustomerForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModelCustomer.valid&&(e.target.blur(),this.onSaveCustomer())}createUserForm(e,t){!e&&t?this.formModelUser=null:(this.formModelUser=new rr({customer:new ve(e?e.customer:this.selectedUserCustomer.id,Pe.required),id:new ve(e?e.id:void 0),name:new ve(e?e.name:"",[Pe.required,Pe.maxLength(254)]),username:new ve(e?e.username:"",[Pe.required,Pe.maxLength(32)]),role:new ve(e?e.role:2,Pe.required),password:new ve(e?e.password:"",[Pe.required,Pe.pattern(Pt.passwordRegexp)]),enabled:new ve(1)}),e&&this.formModelUser.controls.password.disable())}loadUsers(e){return new Promise((t,r)=>{this.user=null;let o={customer:e?e.id:-1};this.loadingData=!0;let s={next:a=>B(this,null,function*(){a&&Array.isArray(a.data)&&(this.users=a.data,this.users.length?(this.selectedUser=this.users[0],yield this.loadUser(this.selectedUser)):(this.selectedUser=null,this.formModelUser=null,this.errorMessage={type:"warning",title:this.translate.instant("CONFIG_PANEL.CUSTOMER.NO_USERS.0"),text:this.translate.instant("CONFIG_PANEL.CUSTOMER.NO_USERS.1")}),t(a)),this.loadingData=!1}),error:a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),this.errorMessage={type:"error",title:"Error",text:this.translate.instant("CONFIG_PANEL.USER.ERRORS.API_ERROR",{error:this.fwcErrorPipe.transform(a)})},this.formModelUser=null,this.loadingData=!1,r(a)},complete:()=>{}};this.fwcUserService.getUser(o).subscribe(s)})}loadUser(e){return new Promise((t,r)=>{let o={customer:e?e.customer:-1,user:e?e.id:-1};this.loadingData=!0;let s={next:a=>B(this,null,function*(){this.createUserForm(a.data),this.user=a.data,yield this.getUserClouds(this.user.id),this.loadingData=!1,t(a)}),error:a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),this.errorMessage={type:"error",title:"Error",text:this.translate.instant("CONFIG_PANEL.USER.ERRORS.API_ERROR",{error:this.fwcErrorPipe.transform(a)})},this.formModelUser=null,this.loadingData=!1,r(a)},complete:()=>{}};this.fwcUserService.getUser(o).subscribe(s)})}allowPasswordReset(){this.formModelUser&&(this.formModelUser.controls.password.setValue(""),this.formModelUser.controls.password.enable(),this.cd.detectChanges())}onChangeUserCustomer(e){e&&e.value&&this.loadUsers(e.value)}onChangeUser(e){e&&e.value&&this.loadUser(e.value)}onNewUser(){this.selectedUser=null,this.fallbackUser=Object.assign({},this.user),Array.isArray(this.userFwclouds)&&(this.fallbackUserFwclouds=this.userFwclouds.slice(0)),this.user=null,this.selectedFwclouds=[],this.userFwclouds=[],this.createUserForm(),this.allowPasswordReset(),setTimeout(()=>{this.inputUserName.nativeElement.focus()},100)}onDeleteUser(){if(!this.selectedUser)return;let e={customer:this.selectedUser.customer,user:this.selectedUser.id},t={next:r=>{},error:r=>{r.error&&r.error.restrictions&&this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_NOT_POSSIBLE"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("CONFIG_PANEL.USER.ERRORS.LAST_ADMIN",{name:this.selectedUser.name}),accept:()=>{}})},complete:()=>{this.askForUserDeletion(e)}};this.fwcUserService.checkUserRestrictions(e).subscribe(t)}askForUserDeletion(e){this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("CONFIG_PANEL.USER.CONFIRM_DELETE",{name:this.selectedUser.name}),accept:()=>{this.utilService.fwcAPICall(this.fwcUserService.deleteUser.bind(this.fwcUserService),e).then(()=>{let t=this.users.slice(0),r=t.findIndex(o=>o.id===this.selectedUser.id);t.splice(r,1),this.users=t,this.users.length?(this.selectedUser=this.users[0],this.loadUser(this.selectedUser)):(this.selectedUser=null,this.formModelUser=null),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.USER.SUCCESS.DELETE")})}).catch(t=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.USER.ERRORS.DELETE_ERROR",{error:this.fwcErrorPipe.transform(t)})})})},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")})}onCancelUserEdit(){this.fallbackUser&&(this.user=this.fallbackUser,this.selectedUser=this.user,this.formModelUser.controls.password.disable()),this.createUserForm(this.user,!0),this.fallbackUserFwclouds?(this.userFwclouds=this.fallbackUserFwclouds.slice(0),this.selectedFwclouds=this.fallbackUserFwclouds.slice(0)):Array.isArray(this.userFwclouds)&&(this.selectedFwclouds=this.userFwclouds.slice(0)),this.selectedFwcloudsChanged=!1}onSaveUser(){let e,t,r;r=Object.assign({},this.user);let o={};for(let s in this.formModelUser.controls)o[s]=this.formModelUser.controls[s].value!==null&&this.formModelUser.controls[s].value!==void 0?this.formModelUser.controls[s].value:void 0,r[s]=o[s];o.id?(e=this.fwcUserService.updateUser.bind(this.fwcUserService),o.user=+o.id,delete o.id,t=this.translate.instant("CONFIG_PANEL.USER.SUCCESS.UPDATE")):(e=this.fwcUserService.newUser.bind(this.fwcUserService),t=this.translate.instant("CONFIG_PANEL.USER.SUCCESS.NEW")),this.loadingData=!0,e&&this.utilService.fwcAPICall(e,o).then(s=>B(this,null,function*(){s.data&&s.data.user&&(r.id=s.data.user),this.user=r;let a=[];if(this.users&&(a=this.users.slice(0)),!this.selectedUser)a.push(this.user),this.users=a,this.selectedUser=this.user;else{let l=a.findIndex(c=>c.id==r.id);l!=-1&&(a[l]=r,this.users=a)}this.formModelUser.reset(this.user),yield this.saveUserClouds(this.user.id).then(()=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:t}),this.loadingData=!1}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.USER.ERRORS.SAVE_ERROR",{error:this.fwcErrorPipe.transform(l)})}),this.loadingData=!1})})).catch(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.USER.ERRORS.SAVE_ERROR",{error:this.fwcErrorPipe.transform(s)})}),this.loadingData=!1})}onResetPassword(){let e=this.formModelResetPassword.get("resetpassword").value;e.match(Pt.passwordRegexp)&&(this.loadingData=!0,this.utilService.fwcAPICall(this.fwcUserService.updateUserPassword.bind(this.fwcUserService),e).then(t=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.USER.SUCCESS.RESET_PASS")}),this.formModelResetPassword.reset(),this.loadingData=!1}).catch(t=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CONFIG_PANEL.USER.ERRORS.PASS_RESET_ERROR",{error:this.fwcErrorPipe.transform(t)})}),this.loadingData=!1}))}createResetPasswordForm(){this.formModelResetPassword=new rr({resetpassword:new ve("",[Pe.required,Pe.pattern(Pt.passwordRegexp)])})}onCancelResetPassword(){this.formModelResetPassword.reset()}saveUserClouds(e){return B(this,null,function*(){return new Promise((r,o)=>B(this,null,function*(){let s=[],a=[];if(this.userFwclouds&&this.userFwclouds.length){let l;for(let c=0;c<this.userFwclouds.length;c++){let d=this.userFwclouds[c];l=!0,this.selectedFwclouds.find(h=>h.id==d.id)&&(l=!1),l&&a.push(d)}}if(this.selectedFwclouds&&this.selectedFwclouds.length){let l;for(let c=0;c<this.selectedFwclouds.length;c++){let d=this.selectedFwclouds[c];l=!0,this.userFwclouds.find(h=>h.id==d.id)&&(l=!1),l&&s.push(d)}}for(let l=0;l<a.length;l++){let c=a[l];yield this.manageUserCloud(c,e,!1).catch(d=>o(d))}for(let l=0;l<s.length;l++){let c=s[l];yield this.manageUserCloud(c,e,!0).catch(d=>o(d))}this.selectedFwclouds&&(this.userFwclouds=this.selectedFwclouds.slice(0)),this.selectedFwcloudsChanged=!1,r(!0)}))})}manageUserCloud(e,t,r){return new Promise((s,a)=>{let l;r?l=this.fwcUserService.addUserCloud.bind(this.fwcUserService):l=this.fwcUserService.removeUserCloud.bind(this.fwcUserService),this.utilService.fwcAPICall(l,t,e.id).then(c=>{s(c)}).catch(c=>{a(c)})})}checkUserForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModelUser.valid&&(e.target.blur(),this.onSaveUser())}checkUserPasswordForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModelResetPassword.valid&&(e.target.blur(),this.onResetPassword())}createBackupOptionsForm(e){if(e){let t=e.schedule,r=e.max_copies,o=e.max_days,s=this.convertCronToOptions(t),a=[];r&&a.push(ll.BACKUP_MAX_COPIES),o&&a.push(ll.BACKUP_MAX_DAYS),s?this.formModelBackupOptions=new rr({backupType:new ve(s.backupType),backupOptions:new ve(a),backupDays:new ve(s.backupDays,Pe.required),backupHour:new ve(s.backupHour),backupTimeOption:new ve(s.backupTimeOption),backupEachHourOrMinutes:new ve(s.backupEachHourOrMinutes,Pe.min(1)),backupMaxCopies:new ve({value:r,disabled:!r}),backupMaxDays:new ve({value:o,disabled:!o})}):this.formModelBackupOptions=null}}onChangeBackupOptions(){let e=this.formModelBackupOptions.get("backupOptions").value;e&&e.some(t=>t==ll.BACKUP_MAX_COPIES)?this.formModelBackupOptions.get("backupMaxCopies").enable():(this.formModelBackupOptions.get("backupMaxCopies").disable(),this.formModelBackupOptions.get("backupMaxCopies").setValue(0)),e&&e.some(t=>t==ll.BACKUP_MAX_DAYS)?this.formModelBackupOptions.get("backupMaxDays").enable():(this.formModelBackupOptions.get("backupMaxDays").disable(),this.formModelBackupOptions.get("backupMaxDays").setValue(0))}onChangeBackupTimeOptions(){let e=this.formModelBackupOptions.get("backupTimeOption").value,t=this.formModelBackupOptions.get("backupEachHourOrMinutes");e==60?(t.value>23&&t.setValue(23),t.setValidators([Pe.min(1),Pe.max(23)])):e==1&&(t.value>59&&t.setValue(59),t.setValidators([Pe.min(1),Pe.max(59)]))}convertOptionsToCron(){let e=["0","*","*","*","*","*"];switch(this.formModelBackupOptions.get("backupType").value){case ll.BACKUP_FIXED_TIME:let r=this.formModelBackupOptions.get("backupHour").value;r&&(e[1]=r.getMinutes().toString(),e[2]=r.getHours().toString());break;case ll.BACKUP_INTERVAL_TIME:let o=this.formModelBackupOptions.get("backupTimeOption").value,s=this.formModelBackupOptions.get("backupEachHourOrMinutes").value;o==60?(e[1]="0",e[2]=s?"*/"+s.toString():"*"):o==1&&(e[1]=s?"*/"+s.toString():"*",e[2]="*");break}let t=this.formModelBackupOptions.get("backupDays").value;return t&&t.length<7&&(t.sort((r,o)=>r-o),e[5]=t.join(",")),e.join(" ")}convertCronToOptions(e){let t={};if(e){let r=e.split(" ");if(r.length==6){let o,s,a=r[1],l=r[2],c=r[5];if(o=a.match(/^\*\/(\d+)$/),s=l.match(/^\*\/(\d+)$/),t.backupTimeOption=60,a!==void 0&&l!==void 0&&a.match(/^\d+$/)&&l.match(/^\d+$/))t.backupHour=new Date,t.backupHour.setHours(+l),t.backupHour.setMinutes(+a),t.backupType=ll.BACKUP_FIXED_TIME;else if(o&&l==="*")t.backupEachHourOrMinutes=o[1],t.backupType=ll.BACKUP_INTERVAL_TIME,t.backupTimeOption=1;else if(s&&a==="0")t.backupEachHourOrMinutes=s[1],t.backupType=ll.BACKUP_INTERVAL_TIME,t.backupTimeOption=60;else return;c=="*"?t.backupDays=[0,1,2,3,4,5,6]:t.backupDays=c.split(",").map(d=>+d)}else return}return t}onSaveBackupOptions(){let e=this.formModelBackupOptions.get("backupMaxCopies").value,t=this.formModelBackupOptions.get("backupMaxDays").value,r={schedule:this.convertOptionsToCron(),max_copies:e|0,max_days:t|0};this.loadingData=!0,this.formModelBackupOptions.disable(),this.utilService.fwcAPICall(this.fwcBackupService.saveBackupConfig.bind(this.fwcBackupService),r).then(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.SUCCESS.SAVE_CONFIG")}),this.formModelBackupOptions.markAsPristine(),this.loadingData=!1,this.formModelBackupOptions.enable()}).catch(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.SAVE_ERROR")}),this.loadingData=!1,this.formModelBackupOptions.enable()})}onDoBackup(){let e={header:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.BACKUP.COMMENT_HEADER"),helpText:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.BACKUP.COMMENT_HELPTEXT"),formControls:[{name:"backupComment",label:this.translate.instant("ITEM_PANEL.FIELDS.COMMENTS"),type:"text",required:!0}],onAccept:t=>{if(t){this.loadingData=!0,this.formModelBackupOptions.disable();let r=$r(),o={comment:t.backupComment},s={channelId:r,headerIcon:"fa fa-3x fa-vault fwcBlue",textHeader:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.INFO.DOING_BACKUP.0"),textMessage:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.INFO.DOING_BACKUP.1"),apiCall:this.fwcBackupService.doBackup.bind(this.fwcBackupService),apiParams:[r,o],onClose:c=>{c&&!c.error?this.getBackups().then(d=>{this.selectedBackup=null,Array.isArray(d.data)&&d.data.length&&(this.backups=d.data),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.SUCCESS.DO_BACKUP")})}).catch(d=>{this.backups=[],this.backupErrorMessage={type:"error",title:"Error",text:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.READ_ERROR")}}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.BACKUP_ERROR")}),this.loadingData=!1,this.formModelBackupOptions.enable()}},a=this.utilService.createDynamicComponentRef(fo),l=a.instance;l.setDynamicComponentRef(a),this.communicationSubscription=l.socketEventEmitter.subscribe(c=>{c=="connected"&&this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:s}),this.communicationSubscription.unsubscribe()}),l.checkConnection()}}};this.inputDataService.setInputData(e)}onImportBackup(){let e={title:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.UPLOAD_HEADER"),summary:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.UPLOAD_TEXT"),url:`${_e.settings.fwcAppURL}/backups/import`,onUploadCompleted:this.onUploadCompleted.bind(this),onUploadError:this.onUploadError.bind(this),uploadOptions:{acceptPattern:".zip",maxFileSize:1024e5,buttonChoose:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.CHOOSE_FILE"),buttonUpload:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.UPLOAD_FILE")}},t=this.utilService.createDynamicComponentRef(qW),r=t.instance;r.setDynamicComponentRef(t),r.showFUDialog(e)}onUploadCompleted(e){this.getBackups().then(t=>{this.selectedBackup=null,Array.isArray(t.data)&&t.data.length&&(this.backups=t.data),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.SUCCESS")})}).catch(t=>{this.backups=[],this.backupErrorMessage={type:"error",title:"Error",text:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.READ_ERROR")}})}onUploadError(e){this.confirmationService.confirm({icon:"fa fa-exclamation-circle fwcRed iconBig",header:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.UPLOAD_ERROR.SUMMARY"),message:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.IMPORT.UPLOAD_ERROR.DETAIL"),accept:()=>{},acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK"),rejectVisible:!1})}onExportBackup(){if(this.selectedBackup){let e={channelId:void 0,headerIcon:"fa fa-3x fa-vault fwcBlue",textHeader:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.EXPORT.TITLE"),textMessage:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.IMPORT_EXPORT.EXPORT.TEXT"),apiCall:this.fwcBackupService.exportBackup.bind(this.fwcBackupService),apiParams:[this.selectedBackup.id],onClose:t=>{}};this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:e})}}onRestoreOrDeleteBackup(e){if(this.selectedBackup){let t,r,o;e?(t=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.ASK_DELETE",{date:new Date(this.selectedBackup.date).toLocaleString()}),r=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.SUCCESS.DELETE_BACKUP"),o=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.DELETE_ERROR")):(t=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.ASK_RESTORE",{date:new Date(this.selectedBackup.date).toLocaleString()}),r=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.SUCCESS.RESTORE_BACKUP"),o=this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.RESTORE_ERROR")),this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:t,rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{if(this.loadingData=!0,e)this.utilService.fwcAPICall(this.fwcBackupService.deleteBackup.bind(this.fwcBackupService),this.selectedBackup.id).then(s=>{this.backups=this.backups.filter(a=>a.id!=this.selectedBackup.id),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:r}),this.backups.length||(this.backupErrorMessage={type:"warning",title:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.WARNING_NO_BACKUPS.0"),text:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.WARNING_NO_BACKUPS.1")}),this.loadingData=!1},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:o}),this.loadingData=!1});else{let s=$r(),a={channelId:s,headerIcon:"fa fa-3x fa-undo fwcBlue",textHeader:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_DIALOG.HEADER"),textMessage:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_DIALOG.TEXT"),apiCall:this.fwcBackupService.restoreBackup.bind(this.fwcBackupService),apiParams:[s,this.selectedBackup.id],onClose:d=>{d&&!d.error?(this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:r}),this.confirmationService.confirm({header:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.INFO.RESTORE_WARNING.0"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.INFO.RESTORE_WARNING.1"),accept:()=>{this.fwcUserService.logoutUser().toPromise().finally(()=>{this.utilService.doAppLogout(),this.router.navigate(["user","login"])})}})):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:o}),this.loadingData=!1}},l=this.utilService.createDynamicComponentRef(fo),c=l.instance;c.setDynamicComponentRef(l),this.communicationSubscription=c.socketEventEmitter.subscribe(d=>{d=="connected"&&this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:a}),this.communicationSubscription.unsubscribe()}),c.checkConnection()}}})}}onBackupTabChange(e){e.index===1&&(this.loadingData=!0,this.getBackups().then(t=>{this.selectedBackup=null,Array.isArray(t.data)&&t.data.length&&(this.backups=t.data),this.loadingData=!1}).catch(t=>{this.backups=[],this.backupErrorMessage={type:"error",title:"Error",text:this.translate.instant("CONFIG_PANEL.BACKUP_RESTORE.ERRORS.READ_ERROR")},this.loadingData=!1})),this.recenterDialog()}changeTheme(){this.darkMode?this.store.dispatch(Bi.setTheme({theme:"dark"})):this.store.dispatch(Bi.setTheme({theme:"light"}))}change2FA(){this.TFAMode?this.fwcUserService.getAuth().subscribe(e=>{let t=this.utilService.createDynamicComponentRef(XW),r=t.instance;r.setDynamicComponentRef(t),e.data.enabled?r.show(e.data.tfa):this.utilService.fwcAPICall(this.fwcUserService.setupAuth.bind(this.fwcUserService),this.loggedUser).then(o=>{this.fwcUserService.getAuth().subscribe(s=>{r.show(s.data.tfa)})}),r.onChange().pipe(yt(()=>this.alive)).subscribe(()=>{this.fwcUserService.getAuth().subscribe(o=>{o.data.enabled&&o.data.tfa.secret?this.TFAMode=!0:this.TFAMode=!1})})}):(this.fwcUserService.getAuth().subscribe(e=>{this.utilService.fwcAPICall(this.fwcUserService.deleteAuth.bind(this.fwcUserService)).then(()=>{e.data.enabled&&e.data.tfa.secret&&this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("TFA.HEADER"),detail:this.translate.instant("TFA.DISABLED")})})}),this.TFAMode=!1)}createGPTAssistantForm(){return B(this,null,function*(){this.formModelAIAssistant=new xa({selectedAI:new Vo(this.ai_types[0]),openAIapiKey:new Vo(""),model:new Vo(this.selectedModel.name)});try{let e=yield this.utilService.fwcAPICall(this.fwcAiAssistantService.getAiAssistantApikey.bind(this.fwcAiAssistantService));if(e.data.length==0)this.formEnabled=!1,this.formModelAIAssistant.disable();else{this.formEnabled=!0;let t=e.data[0],r=this.ai_types.find(l=>l.name===t.ai),o=this.gptModels.find(l=>l.version===t.model),s=this.fwcUserService.getActualFwcUser().privateKey,a=yield this.utilService.openPGPDecrypt(t.apiKey,s);this.formModelAIAssistant.patchValue({selectedAI:r,openAIapiKey:a,model:o}),this.formModelAIAssistant.get("openAIapiKey").enable(),this.formModelAIAssistant.get("model").enable(),this.formModelAIAssistant.get("selectedAI").enable()}}catch{this.formEnabled=!1,this.formModelAIAssistant.disable()}})}onChangeAI(e){}onChangeModel(e){e&&e.value&&(this.selectedModel=this.gptModels.find(t=>t.name===e.value.name),this.selectedModel&&this.formModelAIAssistant.controls.model.setValue(this.selectedModel))}saveApiKey(){this.loadingData=!0;let e=this.formModelAIAssistant.get("openAIapiKey").value,t=this.formModelAIAssistant.get("model").value,r=this.formModelAIAssistant.get("selectedAI").value;if(!e){this.messageService.add({key:"fwcToastMsgs",severity:"warn",summary:"Warning",detail:"API Key cannot be empty"}),this.loadingData=!1;return}let o=this.fwcUserService.getActualFwcUser().publicKey;this.utilService.openPGPEncrypt(e,o).then(s=>{let a={apiKey:s,model:t.version,ai:r.name};this.utilService.fwcAPICall(this.fwcAiAssistantService.saveAiAssistantApikey.bind(this.fwcAiAssistantService),a).then(()=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:"Success",detail:"API Key saved successfully"}),this.loadingData=!1}).catch(l=>{JSON.parse(l.error).data.error==="Invalid OpenAI API Key."?(this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:"Invalid API Key"}),console.error(l),this.loadingData=!1):(this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:"Failed to save API Key"}),console.error(l),this.loadingData=!1)})}).catch(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:"Failed to encrypt API Key"}),console.error(s),this.loadingData=!1})}toggleFormState(){this.formEnabled?(this.formEnabled=!0,this.aiAssistantCheckEnabledService.setaiAssistantCheckEnabled(!0),this.formModelAIAssistant.enable(),this.formModelAIAssistant.get("model").setValue(this.gptModels[1])):this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),message:this.translate.instant("CONFIG_PANEL.AI.DELETE_CONFIRM"),icon:"fwcRed fa fa-exclamation-triangle iconBig",acceptLabel:"Ok",rejectLabel:"No",accept:()=>{this.formEnabled=!1,this.aiAssistantCheckEnabledService.setaiAssistantCheckEnabled(!1),this.formModelAIAssistant.get("openAIapiKey").setValue(""),this.formModelAIAssistant.get("model").setValue(""),this.utilService.fwcAPICall(this.fwcAiAssistantService.deleteAiAssistantApikey.bind(this.fwcAiAssistantService))},reject:()=>{this.formEnabled=!0,this.aiAssistantCheckEnabledService.setaiAssistantCheckEnabled(!0)}})}createHistoricForm(){let e,t,r,o;this.formModelHistoric=new rr({archive_days:new ve(0),retention_days:new ve(0),archive_interval:new ve("day"),retention_interval:new ve("day")}),this.fwcVpnService.getHistoricConfig().subscribe(s=>{e=s.data.archive_days,t=s.data.retention_days,e%365==0?(e=e/365,r="year"):e%31==0?(e=e/31,r="month"):r="day",t%365==0?(t=t/365,o="year"):t%31==0?(t=t/31,o="month"):o="day",this.formModelHistoric.controls.archive_days.setValue(e),this.formModelHistoric.controls.retention_days.setValue(t),this.formModelHistoric.controls.retention_interval.setValue(o),this.formModelHistoric.controls.archive_interval.setValue(r)})}doHistoric(){this.loadingData=!0,this.formModelHistoric.disable();let e=$r();this.onSaveHistoricOptions().then(t=>B(this,null,function*(){if(t||this.formModelHistoric.pristine){let r={channelId:e,headerIcon:"fa fa-3x fa fa-book-bookmark fwcBlue",textHeader:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.INFO.DOING_ARCHIVER.0"),textMessage:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.INFO.DOING_ARCHIVER.1"),apiCall:this.fwcVpnService.doHistoric.bind(this.fwcVpnService),apiParams:[e],onClose:a=>{this.loadingData=!1,a&&!a.error?this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.SUCCESS.DO_ARCHIVER")}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.ERRORS.ARCHIVER_LOCK_ERROR")}),this.formModelHistoric.enable()}},o=this.utilService.createDynamicComponentRef(fo),s=o.instance;s.setDynamicComponentRef(o),this.communicationSubscription=s.socketEventEmitter.subscribe(a=>{a=="connected"&&this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:r}),this.communicationSubscription.unsubscribe()}),s.checkConnection()}else this.loadingData=!1,this.formModelHistoric.enable()})),this.loadingData=!1}onSaveHistoricOptions(){if(!this.formModelHistoric.pristine){let e=this.formModelHistoric.get("archive_days").value,t=this.formModelHistoric.get("retention_days").value,r=this.formModelHistoric.get("archive_interval").value,o=this.formModelHistoric.get("retention_interval").value;switch(r){case"month":e=e*31;break;case"year":e=e*365;break}switch(o){case"month":t=t*31;break;case"year":t=t*365;break}if(t<e)return this.confirmationService.confirm({header:this.translate.instant("OPENVPN_HISTORIC.HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",message:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.ERRORS.DAYS_ERRORS"),rejectVisible:!1,accept:()=>{}}),new Promise(s=>s(null));{this.loadingData=!0;let s={archive_days:e,retention_days:t},a=this.utilService.fwcAPICall(this.fwcVpnService.saveHistoricConfig.bind(this.fwcVpnService),s);return a.then(l=>{this.loadingData=!1,this.formModelHistoric.enable(),this.formModelHistoric.markAsPristine(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("CONFIG_PANEL.OPENVPN_STATUS_ARCHIVER.SUCCESS.SAVE_CONFIG")})}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(l)}),this.loadingData=!1,this.formModelHistoric.enable()}),a}}return new Promise(e=>e(null))}onCancel(){this.hideDialog()}onShowDialog(){}onHideDialog(){this.eventsSubscription&&this.eventsSubscription.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(Ye),S(we),S(ct),S(Kt),S(Zv),S(dn),S(ta),S(at),S(Sv),S(ft),S(Jt),S(Ei),S(Mi),S(ea),S(Cr),S(nt),S(Np),S(er),S(PB),S(At))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-config-panel"]],viewQuery:function(t,r){if(t&1&&(le(U6e,5),le(j6e,5),le(G6e,5),le(H6e,5),le(W6e,5)),t&2){let o;te(o=ie())&&(r.inputCustomerId=o.first),te(o=ie())&&(r.inputUserName=o.first),te(o=ie())&&(r.inputResetPass=o.first),te(o=ie())&&(r.dlgConfigDialog=o.first),te(o=ie())&&(r.ddCustomers=o.first)}},features:[et([Zv,ta,Sv]),Se],decls:119,vars:132,consts:[["dlgConfigDialog",""],["ddCustomers",""],["inputCustomerId",""],["inputUserName",""],["placeholderTemplate",""],["inputResetPass",""],["ifSelect",""],["styleClass","dlgFwcDialog",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],[1,"col-12"],["orientation","left","styleClass","tabTabbedMenu",1,"first-tabview",3,"onChange","activeIndex"],["leftIcon","fa fa-building",3,"disabled","selected","header"],[1,"col-12","grid","grid-nogutter"],[1,"fwcBlue","botBorder"],[1,"col-10"],["styleClass","dropDownForm","appendTo","body","optionLabel","name","dataKey","id","filter","true",3,"ngModelChange","onChange","options","ngModel","disabled","autoDisplayFirst","emptyFilterMessage"],[1,"col-2"],["pButton","","type","button","icon","fa fa-plus",1,"p-button-success","fwcButtonHeight",3,"click","disabled","label"],[3,"formGroup"],["leftIcon","fa fa-users",3,"disabled","header"],[1,"col-5"],["styleClass","dropDownForm p-dropdown--config","appendTo","body","filter","true","optionLabel","name","dataKey","id",3,"ngModelChange","onChange","options","ngModel","disabled","autoDisplayFirst","emptyFilterMessage"],["leftIcon","fa fa-key",3,"selected","disabled","header"],["leftIcon","fa fa-user-shield fwcOrange",3,"disabled","header"],[1,"grid","grid","grid-nogutter"],[1,"fwcBlue","borBorder"],[1,"col-12",2,"padding",".5rem"],[1,"p-inputgroup"],["for","sel2FA",1,"fwcBlue"],["id","sel2FA",3,"ngModelChange","onChange","options","ngModel"],["leftIcon","fa fa-vault fwcOrange",3,"disabled","selected","header"],["leftIcon","fa fa-book-bookmark fwcOrange",3,"disabled","header"],["leftIcon","fa fa-desktop","id","aiAssistant",3,"disabled","header"],[1,"col-12","grid-nogutter"],["binary","true","inputId","enableForm",3,"ngModelChange","onChange","ngModel","label"],["formControlName","selectedAI","styleClass","dropDownForm","optionLabel","name",3,"onChange","options","disabled"],["formControlName","model","styleClass","dropDownForm","optionLabel","name",2,"margin-left","31px",3,"onChange","options","appendTo","disabled"],[1,"p-inputgroup",2,"align-items","center"],["formControlName","openAIapiKey",3,"toggleMask","feedback","disabled"],["type","button","pButton","","icon","fa fa-save","id","saveApikey",1,"p-button-success",3,"click","disabled"],["leftIcon","fa fa-desktop",3,"disabled","header"],["for","selTheme",1,"fwcBlue"],["id","selTheme",3,"ngModelChange","onChange","options","ngModel"],["pTemplate","footer"],[3,"modal","closeOnEscape","closable","visible"],[1,"fwc-centered"],[2,"font-size","smaller"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-config","fwcOrange"],[1,"divHeaderButtons"],["pButton","","type","button","icon","fa fa-question",1,"p-button-primary",3,"disabled"],["pButton","","type","button","icon","fa fa-question",1,"p-button-primary",3,"click","disabled"],[3,"keyup.enter","keyup.esc","formGroup"],[3,"disabled"],[1,"col-12","grid","grid-nogutter",2,"padding-top","0.5rem"],[1,"col-4"],["for","id"],["pInputText","","type","number","formControlName","id","name","id"],[1,"fwc-error",3,"ngStyle"],[1,"col-8"],["for","name"],["pInputText","","type","text","formControlName","name","name","name","maxlength","255"],[1,"col-6"],["for","email"],["pInputText","","type","text","formControlName","email","name","email","maxlength","255"],["for","web"],["pInputText","","type","text","formControlName","web","name","web","maxlength","255"],["for","phone"],["pInputText","","type","text","formControlName","phone","name","phone","maxlength","25"],["for","addr"],["pInputTextarea","","formControlName","addr","name","addr","maxlength","255",3,"rows","cols"],[1,"divLoadTemp",3,"ngStyle"],["type","button","pButton","","icon","fa fa-save",1,"p-button-success",3,"click","disabled","label"],[1,"fwcSepShort"],["type","button","pButton","","icon","fwci-delete",1,"p-button-danger",3,"disabled","label"],["type","button","pButton","","icon","fwci-delete",1,"p-button-danger",3,"click","disabled","label"],["type","button","pButton","","icon","fwci-delete",1,"p-button-warning",3,"click","disabled","label"],[1,"col-1"],["formControlName","role","styleClass","dropDownForm p-dropdown--config",3,"options"],["for","username"],["pInputText","","type","text","formControlName","username","name","username","maxlength","32"],[1,"p-inputgroup",2,"min-height","2.4375rem"],["for","password"],["pPassword","","formControlName","password","name","password","maxlength","64",3,"showPassword","promptLabel","weakLabel","mediumLabel","strongLabel"],["pButton","","type","button","icon","fa fa-eye",1,"p-button-secondary",3,"disabled"],["pButton","","type","button","icon","fa fa-edit",1,"p-button-warning",3,"disabled","label"],["pButton","","type","button","icon","fa fa-eye",1,"p-button-secondary",3,"mousedown","mouseup","mouseout","disabled"],["pButton","","type","button","icon","fa fa-edit",1,"p-button-warning",3,"click","disabled","label"],[1,"fwcBlue"],["appendTo","body","styleClass","fwcMsClouds","dataKey","id","optionLabel","name",3,"ngModelChange","onChange","options","ngModel","defaultLabel"],["pTemplate","selectedItems"],["pTemplate","item"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"fwcMsClouds-selItem"],["src","assets/img/cloud.png"],[1,"fwcDark"],["src","assets/img/cloud.png",2,"width","1.5rem","display","inline-block","vertical-align","middle"],[2,"display","inline-block","margin-left","5px"],[3,"message"],["pInputText","","type","text","readonly","",3,"value"],[3,"keyup.enter","formGroup"],["for","resetpassword"],["pPassword","","formControlName","resetpassword","name","resetpassword","maxlength","64",3,"showPassword","promptLabel","weakLabel","mediumLabel","strongLabel"],["pButton","","type","button","icon","fa fa-eye",1,"p-button-secondary",3,"mousedown","mouseup","mouseout"],["type","button","pButton","","icon","fa fa-save",1,"p-button-success",3,"disabled","label"],[1,"second-tabview"],[1,"second-tabview",3,"onChange"],["leftIcon","fa fa-vault",3,"disabled","header"],[2,"display","inline-block !important","width","100% !important",3,"disabled"],[1,"col-12",2,"padding",".3rem"],[1,"col-12","grid","grid-nogutter","fwc-centered",2,"justify-content","center","padding",".3rem"],["type","button","pButton","","icon","fa fa-vault",1,"p-button-success",3,"click","disabled","label"],[1,"col-12",2,"padding","0","display","flex"],["formControlName","backupDays","multiple","multiple",3,"options"],["name","backupType","formControlName","backupType",3,"value","label"],[1,"col-6",2,"display","flex","float","left"],["name","backupOptionsMC",3,"onChange","value","formControl","label"],[1,"col-6",2,"display","flex","float","right"],["pInputText","","type","number","formControlName","backupMaxCopies","min","0","pKeyFilter","int",1,"fwcInputInline--small"],["name","backupOptionsMD",3,"onChange","value","formControl","label"],["pInputText","","type","number","formControlName","backupMaxDays","min","0","pKeyFilter","int",1,"fwcInputInline--small"],[1,"col-12","fwc-right",2,"float","right"],["leftIcon","fa fa-undo",3,"disabled","header"],["selectionMode","single","scrollHeight","15rem",3,"selectionChange","value","selection","scrollable"],["pTemplate","colgroup"],["pTemplate","body"],["type","button","pButton","","icon","fa fa-upload",1,"p-button-primary",3,"click","disabled","label"],[1,"col-8","divButtons"],[1,"col-12","grid","grid-nogutter",2,"padding",".3rem"],["formControlName","backupHour",3,"timeOnly"],["pInputText","","type","number","formControlName","backupEachHourOrMinutes","min","0","max","23","pKeyFilter","int",1,"fwcInputInline--small"],["pInputText","","type","number","formControlName","backupEachHourOrMinutes","min","0","max","59","pKeyFilter","int",1,"fwcInputInline--small"],["styleClass","dropDownInline","formControlName","backupTimeOption",3,"onChange","options"],[3,"pSelectableRow"],[1,"fa","fa-fw","fa-lg","fa-check-square","fwcGreen"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-undo",1,"p-button-primary",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-download",1,"p-button-primary",3,"click","disabled","label"],[2,"display","inline-block !important","height","100% !important","width","100% !important",3,"disabled"],[1,"col-12","grid","grid-nogutter","fwc-centered",2,"justify-content","center"],["type","button","pButton","","icon","fa fa-book-bookmark",1,"p-button-success",3,"click","disabled","label"],[1,"col-12","grid","grid-nogutter",2,"align-items","center","flex-wrap","nowrap"],["pInputText","","type","number","formControlName","archive_days","min","0","pKeyFilter","int","value","15",1,"fwcInputInline--small"],["formControlName","archive_interval","name","interval",2,"width","30%","margin","0"],["value","day"],["value","month"],["value","year"],["pInputText","","type","number","formControlName","retention_days","min","0","pKeyFilter","int","value","15",1,"fwcInputInline--small"],["formControlName","retention_interval","name","interval",2,"width","30%","margin","0"],[1,"col-12","fwc-right"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"],[1,"fa","fa-lg","fa-undo"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",7,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(r.onShowDialog())})("onHide",function(){return y(o),w(r.onHideDialog())}),v(2,J6e,7,4,"ng-template",8),m(3,"div",9)(4,"div",10)(5,"p-tabView",11),k("onChange",function(a){return y(o),w(r.onChangeOption(a))}),m(6,"p-tabPanel",12),D(7,"translate"),m(8,"div",9)(9,"div",13)(10,"h5",14),F(11),D(12,"translate"),g()(),m(13,"div",15)(14,"p-dropdown",16,1),D(16,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.selectedCustomer,a)||(r.selectedCustomer=a),w(a)}),k("onChange",function(a){return y(o),w(r.onChangeCustomer(a))}),g()(),m(17,"div",17)(18,"button",18),D(19,"translate"),k("click",function(){return y(o),w(r.onNewCustomer())}),g()()(),v(20,X6e,65,62,"form",19),g(),m(21,"p-tabPanel",20),D(22,"translate"),m(23,"div",9)(24,"div",13)(25,"h5",14),F(26),D(27,"translate"),g()(),m(28,"div",21)(29,"p-dropdown",22),D(30,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.selectedUserCustomer,a)||(r.selectedUserCustomer=a),w(a)}),k("onChange",function(a){return y(o),w(r.onChangeUserCustomer(a))}),g()(),m(31,"div",21)(32,"p-dropdown",22),D(33,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.selectedUser,a)||(r.selectedUser=a),w(a)}),k("onChange",function(a){return y(o),w(r.onChangeUser(a))}),g()(),m(34,"div",17)(35,"button",18),D(36,"translate"),k("click",function(){return y(o),w(r.onNewUser())}),g()()(),v(37,cUe,50,46)(38,dUe,2,1,"div"),g(),v(39,hUe,32,38,"p-tabPanel",23),m(40,"p-tabPanel",24),D(41,"translate"),m(42,"div",9)(43,"div",25)(44,"h5",26),F(45),D(46,"translate"),g(),m(47,"div",27)(48,"p"),F(49),D(50,"translate"),g()(),m(51,"div",28)(52,"label",29),F(53),D(54,"translate"),g(),m(55,"p-selectButton",30),Oe("ngModelChange",function(a){return y(o),Re(r.TFAMode,a)||(r.TFAMode=a),w(a)}),k("onChange",function(){return y(o),w(r.change2FA())}),g()()()()(),v(56,EUe,3,6,"p-tabPanel",31)(57,AUe,52,41,"p-tabPanel",32),m(58,"p-tabPanel",33),D(59,"translate"),m(60,"div",34)(61,"h5",14),F(62),D(63,"translate"),g()(),m(64,"div",34)(65,"p-checkbox",35),D(66,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.formEnabled,a)||(r.formEnabled=a),w(a)}),k("onChange",function(){return y(o),w(r.toggleFormState())}),g()(),m(67,"form",19)(68,"div",10)(69,"div",28)(70,"label"),F(71),D(72,"translate"),g(),m(73,"p-dropdown",36),k("onChange",function(a){return y(o),w(r.onChangeAI(a))}),g()()(),m(74,"div",10)(75,"div",28)(76,"label"),F(77),D(78,"translate"),g(),m(79,"p-dropdown",37),k("onChange",function(a){return y(o),w(r.onChangeModel(a))}),g()()(),m(80,"div",10)(81,"div",38)(82,"label"),F(83),D(84,"translate"),g(),P(85,"p-password",39),m(86,"button",40),k("click",function(){return y(o),w(r.saveApiKey())}),F(87),D(88,"translate"),g()()()()(),m(89,"p-tabPanel",41),D(90,"translate"),m(91,"div",9)(92,"div",13)(93,"h5",14),F(94),D(95,"translate"),g()(),m(96,"div",10)(97,"div",28)(98,"label",42),F(99),D(100,"translate"),g(),m(101,"p-selectButton",43),Oe("ngModelChange",function(a){return y(o),Re(r.darkMode,a)||(r.darkMode=a),w(a)}),k("onChange",function(){return y(o),w(r.changeTheme())}),g()()()()()()()(),v(102,xUe,2,4,"ng-template",44),g(),m(103,"p-dialog",45),v(104,TUe,3,3,"ng-template",8),m(105,"div",46),P(106,"p-progressSpinner"),m(107,"p"),F(108),D(109,"translate"),m(110,"strong"),F(111),D(112,"date"),g(),F(113,". "),g(),m(114,"p")(115,"small",47),F(116),D(117,"translate"),g()(),P(118,"br"),g()()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(5),f("activeIndex",r.activeMenuOption),p(),Q("header",N(7,78,"CONFIG_PANEL.CUSTOMER.CUSTOMERS")),f("disabled",!(r.customers&&!r.loadingData))("selected",(r.loggedUser==null?null:r.loggedUser.role)!=r.UserRoles.ROLE_MANAGER),p(5),J(" ",N(12,80,"CONFIG_PANEL.CUSTOMER.SEL")," "),p(3),Q("emptyFilterMessage",N(16,82,"CONFIG_PANEL.CUSTOMER.NOT_FOUND")),f("options",r.customers),Te("ngModel",r.selectedCustomer),f("disabled",r.loadingData)("autoDisplayFirst",!1),p(4),Q("label",N(19,84,"CONFIG_PANEL.CUSTOMER.NEW")),f("disabled",r.loadingData),p(2),W(r.formModelCustomer?20:-1),p(),Q("header",N(22,86,"CONFIG_PANEL.USER.USERS")),f("disabled",!(r.customers&&!r.loadingData)),p(5),J(" ",N(27,88,"CONFIG_PANEL.USER.SEL")," "),p(3),Q("emptyFilterMessage",N(30,90,"CONFIG_PANEL.CUSTOMER.NOT_FOUND")),f("options",r.customers),Te("ngModel",r.selectedUserCustomer),f("disabled",r.loadingData)("autoDisplayFirst",!1),p(3),Q("emptyFilterMessage",N(33,92,"CONFIG_PANEL.USER.NOT_FOUND")),f("options",r.users),Te("ngModel",r.selectedUser),f("disabled",r.loadingData)("autoDisplayFirst",!1),p(3),Q("label",N(36,94,"CONFIG_PANEL.CUSTOMER.NEW")),f("disabled",r.loadingData),p(2),W(r.formModelUser?37:-1),p(),W(r.formModelUser?-1:38),p(),W(r.loggedUser?39:-1),p(),Q("header",N(41,96,"CONFIG_PANEL.CUSTOM.TFA")),f("disabled",r.loadingData),p(5),J(" ",N(46,98,"CONFIG_PANEL.CUSTOM.TFA")," "),p(4),$(N(50,100,"TFA.DESCRIPTION")),p(4),J("",N(54,102,"CONFIG_PANEL.CUSTOM.TFA"),":"),p(2),f("options",r.TFAOptions),Te("ngModel",r.TFAMode),p(),W(r.loggedUser?56:-1),p(),W(r.loggedUser?57:-1),p(),Q("header",N(59,104,"CONFIG_PANEL.AI.HEADER")),f("disabled",r.loadingData),p(4),J(" ",N(63,106,"CONFIG_PANEL.AI.TITLE")," "),p(3),Q("label",N(66,108,"CONFIG_PANEL.AI.ENABLE_FORM")),Te("ngModel",r.formEnabled),p(2),f("formGroup",r.formModelAIAssistant),p(4),$(N(72,110,"CONFIG_PANEL.AI.AI_TYPE")),p(2),f("options",r.ai_types)("disabled",!r.formEnabled||r.loadingData),p(4),$(N(78,112,"CONFIG_PANEL.AI.MODELS")),p(2),f("options",r.gptModels)("appendTo","body")("disabled",!r.formEnabled||r.loadingData),p(4),$(N(84,114,"CONFIG_PANEL.AI.AI_APIKEY")),p(2),f("toggleMask",!0)("feedback",!1)("disabled",!r.formEnabled||r.loadingData),p(),f("disabled",!r.formModelAIAssistant.dirty||r.loadingData),p(),J(" ",N(88,116,"CONFIG_PANEL.AI.SAVE_APIKEY")," "),p(2),Q("header",N(90,118,"CONFIG_PANEL.CUSTOM.HEADER")),f("disabled",r.loadingData),p(5),J(" ",N(95,120,"CONFIG_PANEL.CUSTOM.UI_HEADER")," "),p(5),J(" ",N(100,122,"CONFIG_PANEL.CUSTOM.THEME_CHANGE"),": "),p(2),f("options",r.themeOptions),Te("ngModel",r.darkMode),p(2),f("modal",!0)("closeOnEscape",!1)("closable",!1)("visible",r.showRestoreWarningDialog),p(3),st(Ae(131,z6e)),p(2),J(" ",N(109,124,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_DIALOG.TEXT")," "),p(3),J(" ",ei(112,126,r.selectedBackup==null?null:r.selectedBackup.date,"dd/MM/yyyy HH:mm:ss")," "),p(5),$(N(117,129,"CONFIG_PANEL.BACKUP_RESTORE.RESTORE.RESTORE_DIALOG.FOOTER")))},dependencies:[hn,rt,De,Kn,wp,vp,Li,ud,uc,Pi,zn,Jn,$T,KT,mn,zT,$n,Qn,Yt,Ee,pt,or,Xi,Qr,P1,XP,fd,hd,sr,Tp,mr,Pa,SF,RC,AO,D_,Fn,cc,gt,PS],styles:["[_nghost-%COMP%]     .p-tabview{font-family:Montserrat,Arial,sans-serif!important}.p-inputtext[_ngcontent-%COMP%]{font-family:Montserrat,Arial,sans-serif!important}[_nghost-%COMP%]     .p-tabview .p-tabview-nav li .p-tabview-nav-link{border-top-left-radius:0;border-top-right-radius:0;font-size:.9rem!important;color:var(--fwcDark)!important}[_nghost-%COMP%]     .p-tabview .p-tabview-panels{width:100%}[_nghost-%COMP%]     .first-tabview>div>div.p-tabview-nav-container>div>ul{display:flex;flex-direction:column;padding:10px}[_nghost-%COMP%]     .second-tabview>div>div.p-tabview-nav-container>div>ul{display:flex;flex-direction:row;padding:10px}[_nghost-%COMP%]     .p-dialog .p-dialog-content{min-width:100%!important}p-password[_ngcontent-%COMP%]     .p-inputwrapper{width:98%}[_nghost-%COMP%]     #saveApikey span.p-button-icon{margin-right:10px}[_nghost-%COMP%]     p-tabpanel#aiAssistant .p-tabview-panel{height:100%;overflow:hidden}"]})}}return i})();var ZW=40,OUe=34,RUe=55,PUe=28,DUe=3,DS=(()=>{class i{constructor(e,t){this.cd=e,this.ruleSelectedService=t,this.maximumRuleHeight=0,this.rulesViewportInfo=null}*policyIterator(e){e||(e=[]);for(let t=0;t<e.length;t++){let r=e[t];if(yield r,r.rule_group&&Array.isArray(r.rules))for(let o=0;o<r.rules.length;o++){let s=r.rules[o];s.groupHide=r.groupHide,yield s}}}clearActualViewportInfo(){this.actualViewportInfo=null}resetMaximumRuleHeight(){this.maximumRuleHeight=0}calcRuleHeight(e,t){let r=ZW;if(e.special)r=ZW;else if(e.rule_group)r=OUe;else{if(!t&&(t=0,Array.isArray(e.positions)))for(let o=0;o<e.positions.length;o++){let s=e.positions[o];Array.isArray(s.ipobjs)&&s.ipobjs.length>t&&(t=s.ipobjs.length-1)}t<=1?(r=RUe,e.mark&&(r+=18)):(r=t*PUe+t+DUe*Math.min(t/2,6),e.mark&&(r+=t===2?11:0))}r>this.maximumRuleHeight&&(this.maximumRuleHeight=r),e.heightPx=r}showRulesInViewport(e,t){t||(t=this.actualViewportInfo||{scrollTop:0,offsetHeight:window.innerHeight});let r=t.scrollTop-Number((t.offsetHeight*.5).toFixed(0))-this.maximumRuleHeight,o=t.scrollTop+Number((t.offsetHeight*1.2).toFixed(0))+this.maximumRuleHeight;r<0&&(r=0);let s,a,l=0,c=0,d=new Set;for(let h of this.policyIterator(e))h.groupHide?d.has(h.idgroup)||(l+=h.heightPx,d.add(h.idgroup)):(l+h.heightPx>=r&&l<=o?(h.visible=!0,s===void 0&&(s=c),a=c):h.visible=!1,l+=h.heightPx),c++;this.rulesViewportInfo={firstVisibleRuleIndex:s,lastVisibleRuleIndex:a,viewportStartPx:r,viewportEndPx:o},this.actualViewportInfo=t,this.cd.detectChanges()}getVisibleRules(e){let t=[];return Array.isArray(e)&&this.rulesViewportInfo&&(t=e),t}static{this.\u0275fac=function(t){return new(t||i)(de(we),de($p))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var FUe=()=>({width:"30vw"}),kUe=()=>({visibility:"hidden"});function NUe(i,n){i&1&&(m(0,"div",10)(1,"h6",11),P(2,"i",12),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"PANELS.ROUTING_RULE_PANEL.TITLE")," "))}function LUe(i,n){if(i&1){let e=L();P(0,"div",8),m(1,"div",8)(2,"div",13)(3,"span",14),P(4,"p-dropdown",15,1),m(6,"label",16),F(7),D(8,"translate"),g()()()(),P(9,"div",8),m(10,"div",8)(11,"div",13)(12,"span",14),P(13,"sts-fwc-object-group",17),D(14,"translate"),m(15,"label",16),F(16),D(17,"translate"),g()()(),P(18,"p",18),g(),m(19,"div",8)(20,"div",13)(21,"span",14)(22,"input",19,2),k("drop",function(r){y(e);let o=u();return w(o.preventDrop(r))}),g(),m(24,"label",20),F(25),D(26,"translate"),g()()()()}if(i&2){let e=u();p(4),f("options",e.routingTables)("autoDisplayFirst",!1),p(3),$(N(8,9,"ROUTING.NEW_TABLE_PANEL.TABLE")),p(6),Q("msgNotAllowed",N(14,11,"PANELS.ROUTING_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_ROUTING_RULE_FROM),p(3),$(N(17,13,"PANELS.ROUTING_RULE_PANEL.FROM")),p(2),f("ngStyle",Ae(17,kUe)),p(7),$(N(26,15,"ITEM_PANEL.FIELDS.COMMENTS"))}}function MUe(i,n){if(i&1&&(m(0,"div",8),P(1,"sts-fwc-message",21),g()),i&2){let e=u();p(),f("message",e.opMessage)}}function VUe(i,n){if(i&1){let e=L();m(0,"button",22),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g(),m(2,"button",23),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData)}}var FS=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E){super(r,t,e,o,s,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.store=s,this.fb=a,this.router=l,this.fwcErrorPipe=c,this.utilService=d,this.fwcPolicyService=h,this.fwcRoutingPolicyService=_,this.fwcRoutingTableService=C,this.fwcUserService=I,this.translate=b,this.messageService=E,this.ObjectTypes=O,this.loadingData=!1,this.dataLoaded=!1}ngOnInit(){this.formModel=this.fb.group({routingTable:new ve(void 0,Pe.required),ipObject:new ve(void 0,Pe.required),comment:new ve("")})}showNewRuleDialog(e,t,r,o){this.clusterId=e,this.firewallId=t,this.baseRuleId=r,this.newRuleOffset=o,this.utilService.fwcAPICall(this.fwcRoutingTableService.getRoutingTables.bind(this.fwcRoutingTableService),t,this.fwcUserService.getActualFwSelectedCloud()).then(s=>{Array.isArray(s.data)&&s.data.length?(this.routingTables=s.data,this.dataLoaded=!0,this.formModel.get("routingTable").setValue(this.routingTables[0])):this.opMessage={type:"error",title:this.translate.instant("PANELS.ROUTING_RULE_PANEL.ERRORS.NO_ROUTING_TABLES.SUMMARY"),text:this.translate.instant("PANELS.ROUTING_RULE_PANEL.ERRORS.NO_ROUTING_TABLES.TEXT")}}).catch(s=>{this.opMessage={type:"error",title:this.translate.instant("PANELS.ROUTING_RULE_PANEL.ERRORS.GET_ROUTING_TABLES.SUMMARY"),text:this.translate.instant("PANELS.ROUTING_RULE_PANEL.ERRORS.GET_ROUTING_TABLES.TEXT")}}).finally(()=>{this.displayDialog=!0})}handleSave(){if(this.formModel.valid){this.store.dispatch(Bi.requestBlockUI());let{routingTable:e,ipObject:t,comment:r}=this.formModel.value,o=this.newRuleOffset<0?"above":"below";if(e&&t){let s={routingTableId:e.id,to:this.baseRuleId,offset:o,comment:r},{id:a,type:l}=t,c={id:a,order:1};switch(l){case O.OBJ_GROUP:s.ipObjGroupIds=[c];break;case O.OBJ_OPENVPN_CONFIG_CLI:s.openVPNIds=[c];break;case O.OBJ_OPENVPN_PREFIX:s.openVPNPrefixIds=[c];break;case O.OBJ_WGC_CONFIG_CLI:s.wireguardIds=[c];break;case O.OBJ_WIREGUARD_PREFIX:s.wireguardPrefixIds=[c];break;case O.OBJ_ISC_CONFIG_CLI:s.ipsecIds=[c];break;case O.OBJ_IPSEC_PREFIX:s.ipsecPrefixIds=[c];break;case O.OBJ_MARK:s.markIds=[c];break;default:s.ipObjIds=[c]}this.loadingData=!0,this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.newRoutingPolicyRule.bind(this.fwcRoutingPolicyService),this.firewallId,this.fwcUserService.getActualFwSelectedCloud(),s).then(d=>{this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.ROUTING_RULE_PANEL.INFO.SAVE_RULE")}),this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}}))}).catch(d=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(d)})}).finally(()=>{this.loadingData=!1,this.store.dispatch(Bi.requestUnblockUI())})}}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(nt),S(qr),S(ct),S(Ei),S(ft),S(Un),S(Kp),S(Os),S(at),S(Ye),S(Kt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-routing-rule-panel"]],features:[Se],decls:9,vars:11,consts:[["dlgRoutingRuleDialog",""],["ddRoutingTables",""],["inputObjName",""],["styleClass","dlgFwcDialog fwcObjectDialog--small",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-routing","fwcOrange"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","routingTable","styleClass","dropDownForm","appendTo","body","optionLabel","name","dataKey","id",3,"options","autoDisplayFirst"],[1,"fwcFloatLabel"],["formControlName","ipObject",3,"readOnly","groupType","msgNotAllowed"],[1,"fwc-error",3,"ngStyle"],["pInputText","","type","text","formControlName","comment","name","comment","maxlength","64",3,"drop"],["for","comment"],[3,"message"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",3,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)})("onHide",function(){return y(o),w(!0)}),v(2,NUe,5,3,"ng-template",4),m(3,"form",5)(4,"fieldset",6),k("keyup.enter",function(a){return y(o),w(r.handleCheckForm(a))})("keyup.esc",function(){return y(o),w(r.handleCancel())}),m(5,"div",7),v(6,LUe,27,18)(7,MUe,2,1,"div",8),g()()(),v(8,VUe,4,7,"ng-template",9),g()}t&2&&(st(Ae(10,FUe)),Te("visible",r.displayDialog),f("modal",!1)("closable",!1)("resizable",!0),p(3),f("formGroup",r.formModel),p(),f("disabled",r.loadingData),p(2),W(r.dataLoaded?6:-1),p(),W(!r.loadingData&&r.opMessage?7:-1))}})}}return i})();var ez=No(Gc());var BUe=["txtCompiledString"],UUe=()=>({minWidth:"80vw"}),jUe=()=>({height:"98%",minHeight:"12rem"});function GUe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2);p(),J(" (",e.ruleCompiler,") ")}}function HUe(i,n){if(i&1&&(m(0,"div",6)(1,"h6",7),P(2,"i",8),F(3),v(4,GUe,2,1,"span"),g()()),i&2){let e=u();p(3),J(" ",e.dialogTitle," "),p(),W(e.ruleCompiler?4:-1)}}function WUe(i,n){if(i&1){let e=L();m(0,"button",12),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onDownloadConfigFile(r.ruleCompiledString))}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"VPN.CONFIG.DOWNLOAD.BUTTON")),f("disabled",!e.ruleCompiledString)}}function zUe(i,n){if(i&1){let e=L();m(0,"button",9),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleCopyRuleCompilationToClipboard())}),g(),v(2,WUe,2,4,"button",10),m(3,"button",11),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();Q("label",N(1,3,"VPN.CONFIG.CLIPBOARD.BUTTON")),f("disabled",!e.ruleCompiledString),p(2),W(e.ruleCompiledString&&e.type==="dhcp"||e.type==="keepalived"||e.type==="haproxy"?2:-1)}}var Wa=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h){super(e,t,r,c,o,l),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.store=o,this.translate=s,this.messageService=a,this.router=l,this.cd=c,this.fwcEventService=d,this.utilService=h,this.dialogTitle=this.translate.instant("CONTEXT.RULE.COMP_TITLE")}ngOnInit(){}ngOnDestroy(){}showCompiledString(e,t){this.ruleCompiledString=e,this.ruleCompiler=t}showCompilationData(e,t,r,o,s,a){if(this.type=a,this.ruleCompiledString="",o&&(this.dialogTitle=o),Array.isArray(e))for(let[l,c]of e.entries()){this.ruleCompiledString&&(this.ruleCompiledString+=`
`);let d=t&&t.find(_=>_.id===c.id),h=d&&d._fwcRuleOrder?d._fwcRuleOrder:l+1;a==="dhcp"?this.ruleCompiledString+=c.cs:a==="keepalived"?this.ruleCompiledString+=c.cs:a==="haproxy"?this.ruleCompiledString+=c.cs:this.ruleCompiledString+=`# ${r.toUpperCase()} ${h} (ID: ${c.id})
${c.cs}`}this.ruleCompiler=s,this.displayDialog=!0}onDownloadConfigFile(e,t){let r;t==="dhcp"?r="dhcp.conf":t==="keepalived"?r="keepalived.conf":t==="haproxy"&&(r="haproxy.conf");let o=new Blob([e],{type:"text/plain;charset=utf-8"});(0,ez.saveAs)(o,r)}handleCopyRuleCompilationToClipboard(){this.txtCompiledString&&(this.txtCompiledString.nativeElement.select(),document.execCommand("copy"),this.txtCompiledString.nativeElement.setSelectionRange(0,0),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("POLICY.RULE_COMPILATION_COPIED")}))}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(nt),S(Ye),S(Kt),S(ct),S(we),S(dn),S(ft))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-rule-compile-panel"]],viewQuery:function(t,r){if(t&1&&le(BUe,5),t&2){let o;te(o=ie())&&(r.txtCompiledString=o.first)}},features:[Se],decls:7,vars:8,consts:[["dlgCompile",""],["txtCompiledString",""],["styleClass","dlgFwcDialog",3,"visibleChange","onShow","visible","modal"],["pTemplate","header"],["readonly","true","pInputTextarea","",1,"textCompiledString",3,"ngStyle"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-compilerule","fwcOrange"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"label","disabled"],["type","button","pButton","","icon","pi pi-check","label","Ok",3,"click"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)}),v(2,HUe,5,2,"ng-template",3),m(3,"textarea",4,1),F(5),g(),v(6,zUe,4,5,"ng-template",5),g()}t&2&&(st(Ae(6,UUe)),Te("visible",r.displayDialog),f("modal",!0),p(3),f("ngStyle",Ae(7,jUe)),p(2),$(r.ruleCompiledString))},dependencies:[De,Yt,Ee,pt,Qr,gt],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}"]})}}return i})();var kS=(()=>{class i{constructor(e,t,r,o,s,a,l,c,d,h){this.translate=e,this.fwcErrorPipe=t,this.utilService=r,this.fwcUserService=o,this.fwcRoutingPolicyService=s,this.fwcRoutingTableService=a,this.ruleSelectedService=l,this.messageService=c,this.cd=d,this.store=h}setGroupValues(e){if(e){let t=e.groupData,r=e.group,o=e.policyType,s={style:e.groupColor,name:e.groupName};this.updateGroup(o,t.firewall,t.fwcloud,r,s)}}updateGroup(e,t,r,o,s){let a;e===Zr.POLICY_ROUTING?a=this.fwcRoutingPolicyService.updateRoutingPolicyRuleGroup.bind(this.fwcRoutingPolicyService):e===Zr.ROUTING_TABLE&&(a=this.fwcRoutingTableService.updateRoutingTableRouteGroup.bind(this.fwcRoutingTableService)),a&&(this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(a,t,r,o.idgroup,s).then(()=>{if(s.name){o.group_name=s.name;let l=o.rules;for(let c=0;c<l.length;c++)l[c].group_name=o.group_name}if(s.style){o.group_style=s.style;let l=o.rules;for(let c=0;c<l.length;c++)l[c].group_style=o.group_style}o=Wt(o)}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()}))}compileRulesOrRoutes(e){let t,r,o,s=this.ruleSelectedService.getActualSelectedRules(),a=this.ruleSelectedService.getRulesOrderedIds(s),l;if(Array.isArray(a.orderedRules)&&a.orderedRules[0]){l=a.orderedRules[0],t=this.fwcUserService.getActualFwcUser().selectedFwCloud,r=l.firewall,o=a.rulesIds;let c=this.fwcRoutingPolicyService.compileRoutingPolicyRules.bind(this.fwcRoutingPolicyService),d=[r,t,o],h=this.translate.instant("ROUTING.POLICY.RULE"),_=this.translate.instant("ROUTING.POLICY.COMPILE_DIALOG_TITLE");e&&(c=this.fwcRoutingTableService.compileRoutingTableRoutes.bind(this.fwcRoutingTableService),d=[r,t,e,o],h=this.translate.instant("ROUTING.NEW_TABLE_PANEL.ROUTE"),_=this.translate.instant("ROUTING.ROUTE.COMPILE_DIALOG_TITLE")),this.ruleSelectedService.setRuleStatus(""),this.detectChanges(),this.utilService.fwcAPICall(c,...d).then(C=>{if(Array.isArray(C.data)){let I=this.utilService.createDynamicComponentRef(Wa),b=I.instance;b.setDynamicComponentRef(I),b.showCompilationData(C.data,s,h,_)}}).catch(C=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(C)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}}filterIpObjects(e,t){let r=[];return Array.isArray(e)&&(r=e.filter(t).map(o=>({id:o.id,order:o.position_order}))),r}buildCopyApiData(e,t){let r={},o,s,a=e._fwcObjId,l=e._fwcObjType,c=t.ipobjs;switch(l){case O.OBJ_GROUP:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_GROUP),s="ipObjGroupIds";break}case O.OBJ_OPENVPN_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_OPENVPN_PREFIX),s="openVPNPrefixIds";break}case O.OBJ_OPENVPN_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_OPENVPN_CONFIG_CLI),s="openVPNIds";break}case O.OBJ_WIREGUARD_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_WIREGUARD_PREFIX),s="wireguardPrefixIds";break}case O.OBJ_WGC_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_WGC_CONFIG_CLI),s="wireguardIds";break}case O.OBJ_IPSEC_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_IPSEC_PREFIX),s="ipsecPrefixIds";break}case O.OBJ_ISC_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_ISC_CONFIG_CLI),s="ipsecIds";break}case O.OBJ_MARK:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_MARK),s="markIds";break}default:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_ADDRESS||d.type===O.OBJ_ADDRESS_RANGE||d.type===O.OBJ_NETWORK||d.type===O.OBJ_HOST||d.type===O.OBJ_DNS),s="ipObjIds";break}}return r[s]=[...o,{id:a,order:c?c.length:1}],r}buildRemoveApiData(e,t){let r={},o,s,a=e._fwcObjId,l=e._fwcObjType,c=t.ipobjs;switch(l){case O.OBJ_GROUP:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_GROUP&&d.id!==a),s="ipObjGroupIds";break}case O.OBJ_OPENVPN_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_OPENVPN_PREFIX&&d.id!==a),s="openVPNPrefixIds";break}case O.OBJ_OPENVPN_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_OPENVPN_CONFIG_CLI&&d.id!==a),s="openVPNIds";break}case O.OBJ_WIREGUARD_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_WIREGUARD_PREFIX&&d.id!==a),s="wireguardPrefixIds";break}case O.OBJ_WGC_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_WGC_CONFIG_CLI&&d.id!==a),s="wireguardIds";break}case O.OBJ_IPSEC_PREFIX:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_IPSEC_PREFIX&&d.id!==a),s="ipsecPrefixIds";break}case O.OBJ_ISC_CONFIG_CLI:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_ISC_CONFIG_CLI&&d.id!==a),s="ipsecIds";break}case O.OBJ_MARK:{o=this.filterIpObjects(c,d=>d.type===O.OBJ_MARK&&d.id!==a),s="markIds";break}default:{o=this.filterIpObjects(c,d=>(d.type===O.OBJ_ADDRESS||d.type===O.OBJ_ADDRESS_RANGE||d.type===O.OBJ_NETWORK||d.type===O.OBJ_HOST||d.type===O.OBJ_DNS)&&d.id!==a),s="ipObjIds";break}}return r[s]=[...o],r}removeObjectFromPosition(e,t){if(Array.isArray(e.ipobjs)){e.ipobjs=e.ipobjs.filter(r=>r._fwcObjId!==t._fwcObjId||r._fwcObjType!==t._fwcObjType);for(let r of e.ipobjs)r.position_order!=null&&r.position_order>t.position_order&&r.position_order--}}dispatchFwStatusUpdateAction(e,t){this.store.dispatch(eo.updateFwStatus({item:{cluster:e,id:t,status:3}}))}dispatchReloadItemPanelAction(){this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]}))}dispatchReloadItemEditingPanels(){this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL,ri.CLUSTER_PANEL,ri.FIREWALL_PANEL,ri.OVCONFIG_PANEL,ri.WIREGUARD_CONFIG_PANEL,ri.IPSEC_CONFIG_PANEL]}))}detectChanges(){this.cd.destroyed||(this.cd.markForCheck(),this.cd.detectChanges())}static{this.\u0275fac=function(t){return new(t||i)(de(Ye),de(Ei),de(ft),de(at),de(Kp),de(Os),de($p),de(Kt),de(we),de(nt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var NS=(()=>{class i extends kS{constructor(e,t,r,o,s,a,l,c,d,h,_,C){super(e,t,r,o,a,l,c,d,_,C),this.translate=e,this.fwcErrorPipe=t,this.utilService=r,this.fwcUserService=o,this.fwcPolicyService=s,this.fwcRoutingPolicyService=a,this.fwcRoutingTableService=l,this.ruleSelectedService=c,this.messageService=d,this.confirmationService=h,this.cd=_,this.store=C}parseRoutingPolicyRules(e,t,r){let o=[];for(let s of r){let a={id:s.id,idgroup:s.routingGroupId,group_name:s.routingGroup&&s.routingGroup.name,group_style:s.routingGroup&&s.routingGroup.style,comment:s.comment,style:s.style,type:Zr.POLICY_ROUTING,rule_order:s.rule_order,active:s.active?1:0,firewall:e,fwcloud:t,routingTableId:s.routingTableId,fw_apply_to:s.firewallApplyToId,positions:[]},l=1,c={id:_o.FROM_POSITION,name:this.translate.instant("ITEM_PANEL.FIELDS.PORT_S"),policy_type:a.type,position_order:l++,content:"O",single_object:0,fwcloud:t,firewall:e,rule:a.id,ipobjs:[]};if(Array.isArray(s.items)){let d=1;for(let h of s.items){let _={rule:a.id,position:Fi.TO_POSITION,id:h.id,name:h.name,type:h.type,position_order:d++,firewall_id:h.firewall_id,firewall_name:h.firewall_name,cluster_id:h.cluster_id,cluster_name:h.cluster_name,host_id:h.host_id,host_name:h.host_name};c.ipobjs.push(_)}}a.positions.push(c),o.push(a)}return o}handleChangeRoutingTable(e,t){let r={routingTableId:t};this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),e.firewall,this.fwcUserService.getActualFwSelectedCloud(),e.id,r).then(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_RULE")}),this.dispatchFwStatusUpdateAction(e._fwcClusterId,e.firewall),this.dispatchReloadItemEditingPanels(),this.detectChanges()}).catch(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null)})}updateRule(e,t,r,o,s,a,l){this.ruleSelectedService.setRuleStatus("");let c={},d=!1;s&&(c.comment=s,d=!0),a&&(c.style=a),l!==void 0&&(c.active=l,d=!0),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),t,r,o.id,c).then(h=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.fwcPolicyService.reloadPolicy(),d&&this.dispatchFwStatusUpdateAction(e,t)}).catch(h=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(h)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null)})}updateSelectedRules(e,t,r,o){let s=this.ruleSelectedService.getActualSelectedRules(),a=!!Object.keys(o).filter(l=>l!=="style").length;if(Array.isArray(s)&&s.length){let l=s.map(c=>c.id);this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRules.bind(this.fwcRoutingPolicyService),t,r,l,o).then(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.fwcPolicyService.reloadPolicy(),a&&this.dispatchFwStatusUpdateAction(e,t)}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null)})}}updateRuleComment(e){if(e&&e.formModel){let t=e.formModel.comment;if(e.comment!==t){let r=e.firewall,o=e.fwcloud,s={comment:t};this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),r,o,e.id,s).then(a=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_RULE")}),e.comment=t,this.dispatchFwStatusUpdateAction(e._fwcClusterId,r)}).catch(a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),e.formModel.comment=e.comment}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}}}updateRulePosition(e,t,r,o,s,a,l){let c={},d=a._fwcPositionId,h=a._fwcRuleId;if((a.obj_type==O.OBJ_OPENVPN_PREFIX||a.obj_type==O.OBJ_WIREGUARD_PREFIX||a.obj_type==O.OBJ_IPSEC_PREFIX||a.obj_type==O.OBJ_INTERFACE_FIREWALL)&&"items"in a&&a.items.length===0||a.obj_type==O.OBJ_HOST&&"items"in a&&a.items.length>0&&a.items[0].items.length===0){this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:a.obj_type==O.OBJ_HOST?this.translate.instant("POSITION.ERROR_EMPTY_CONTAINER",{name:a._fwcObjName,ipVersion:"IP"}):a.obj_type==O.OBJ_INTERFACE_FIREWALL?this.translate.instant("POSITION.ERROR_GROUP_EMPTY",{name:a._fwcObjName}):this.translate.instant("POSITION.ERROR_EMPTY_PREFIX",{name:a._fwcObjName}),accept:()=>{}});return}let _=this.checkOperation(e,a,l);if(_)this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:_,rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}});else{let C=e.getClusterId();d==null||h==null||l==Or.COPY?(c=this.buildCopyApiData(a,s),this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),t,r,o,c).then(I=>{this.addObjectToPosition(s,a),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.dispatchFwStatusUpdateAction(C,t),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(o)}).catch(I=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})):(this.ruleSelectedService.setRuleStatus(""),this.moveObject(e,t,r,o,s,a).then(()=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")})}).catch(I=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()}))}}checkOperation(e,t,r){let o;return t._fwcRuleId&&t._fwcPositionId&&(r===Or.CUT||r===Or.DELETE)&&e.getPolicyRule(t._fwcRuleId).positions.find(c=>c.id===t._fwcPositionId).ipobjs.filter(c=>c._fwcObjType!==O.OBJ_ANY).length<2&&(o=this.translate.instant("ROUTING.POLICY.ERROR_LAST_IPOBJECT")),o}moveObjectAlt(e,t,r,o,s,a){return B(this,null,function*(){try{let l=this.buildCopyApiData(a,s);yield this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),t,r,o,l);let c=e.getPolicyRule(a._fwcRuleId),d=c.positions.find(C=>C.id===a._fwcPositionId),h=this.buildRemoveApiData(a,d);yield this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),t,r,c.id,h),this.addObjectToPosition(s,a),this.removeObjectFromPosition(d,a),this.ruleSelectedService.setRuleHeightRecalculate(c.id),this.ruleSelectedService.setRuleHeightRecalculate(o),this.dispatchReloadItemEditingPanels();let _=e.getClusterId();this.dispatchFwStatusUpdateAction(_,t),Promise.resolve()}catch{Promise.reject()}})}moveObject(e,t,r,o,s,a){return B(this,null,function*(){try{let l,c;switch(a._fwcObjType){case O.OBJ_GROUP:{l="ipObjGroupId";break}case O.OBJ_OPENVPN_PREFIX:{l="openVPNPrefixId";break}case O.OBJ_OPENVPN_CONFIG_CLI:{l="openVPNId";break}case O.OBJ_WIREGUARD_PREFIX:{l="wireguardPrefixId";break}case O.OBJ_WGC_CONFIG_CLI:{l="wireguardId";break}case O.OBJ_IPSEC_PREFIX:{l="ipsecPrefixId";break}case O.OBJ_ISC_CONFIG_CLI:{l="ipsecId";break}case O.OBJ_MARK:{l="markId";break}default:{l="ipObjId";break}}let d=e.getPolicyRule(a._fwcRuleId),h=d.positions.find(C=>C.id===a._fwcPositionId);c={fromId:d.id,toId:o},c[l]=a._fwcObjId,yield this.utilService.fwcAPICall(this.fwcRoutingPolicyService.moveObjectBetweenFromPositions.bind(this.fwcRoutingPolicyService),t,r,c),this.addObjectToPosition(s,a),this.removeObjectFromPosition(h,a),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(d.id),this.ruleSelectedService.setRuleHeightRecalculate(o);let _=e.getClusterId();this.dispatchFwStatusUpdateAction(_,t),Promise.resolve()}catch{Promise.reject()}})}deleteObjectFromPosition(e,t,r,o,s,a){let l={};l=this.buildRemoveApiData(a,s),this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),e,r,o,l).then(c=>{this.removeObjectFromPosition(s,a),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.dispatchFwStatusUpdateAction(t,e),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(o)}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}addObjectToPosition(e,t){let r={cluster_id:t._fwcClusterId,cluster_name:t._fwcClusterName,firewall_id:t._fwcFwId,firewall_name:t._fwcFwName,host_id:t._fwcHostId,host_name:t._fwcHostName,id:t._fwcObjId,id_obj:t._fwcObjId,name:t._fwcObjName,obj_type:t._fwcObjType,parent_id:t.parent_id,position:e.id,position_order:e.ipobjs?e.ipobjs.length:1,rule:e.rule,type:t._fwcObjType,_fwcFwId:t._fwcFwId,_fwcFwName:t._fwcFwName,_fwcObjId:t._fwcObjId,_fwcObjName:t._fwcObjName,_fwcObjType:t._fwcObjType,_fwcPositionId:e.id,_fwcRuleId:e.rule,_fwcUserId:this.fwcUserService.getActualFwcUser().user_id,highlighted:t.highlighted};e.ipobjs=[...e.ipobjs,r]}showNewRuleDialog(e,t,r,o){let s=this.utilService.createDynamicComponentRef(FS),a=s.instance;a.setDynamicComponentRef(s),a.showNewRuleDialog(e,t,r,o)}moveSelectedRules(e,t,r,o,s){this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.manageRoutingPolicyRules.bind(this.fwcRoutingPolicyService),e,t,r,s,o,Or.CUT).then(a=>{this.fwcPolicyService.reloadPolicy()}).catch(a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("GLOBALS.MSG_OP_RESULT.PROCESS_ERROR")})}).finally(()=>{this.store.dispatch(Bi.requestUnblockUI())})}newRoutingRuleGroup(e,t,r){let o=r&&r.groupName,s=r&&r.groupComment;if(o){let l=this.ruleSelectedService.getActualSelectedRules().map(c=>c.id);this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.newRoutingPolicyRuleGroup.bind(this.fwcRoutingPolicyService),e,t,o,s,l).then(c=>{this.dispatchReloadItemPanelAction(),this.fwcPolicyService.reloadPolicy()}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}else return}setRuleStyle(e,t){if(t){let r={style:t.ruleColor};this.updateSelectedRules(e._fwcClusterId,e.firewall,this.fwcUserService.getActualFwSelectedCloud(),r)}}compileSelectedRules(){this.compileRulesOrRoutes()}handleChangeApplyToTable(e){if(e&&e.formModel){let t=e.firewall,r=e.fwcloud,o={firewallApplyToId:e.formModel.fw_apply_to};this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingPolicyService.updateRoutingPolicyRule.bind(this.fwcRoutingPolicyService),t,r,e.id,o).then(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_RULE")}),this.dispatchFwStatusUpdateAction(e._fwcClusterId,e.firewall),this.dispatchReloadItemEditingPanels(),this.detectChanges()}).catch(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}}static{this.\u0275fac=function(t){return new(t||i)(de(Ye),de(Ei),de(ft),de(at),de(Un),de(Kp),de(Os),de($p),de(Kt),de(Jt),de(we),de(nt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var KUe=()=>({width:"30vw"}),$Ue=()=>({visibility:"hidden"}),JUe=i=>({table_name:i});function qUe(i,n){if(i&1&&(m(0,"div",15)(1,"h6",16),P(2,"i",17),F(3),D(4,"translate"),g()()),i&2){let e=u();p(3),J(" ",ei(4,1,"PANELS.ROUTING_ROUTE_PANEL.TITLE",ne(4,JUe,e.tableName))," ")}}function YUe(i,n){if(i&1){let e=L();m(0,"button",18),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g(),m(2,"button",19),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loading)}}var LS=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I){super(r,t,e,o,d,_),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.utilService=s,this.fwcPolicyService=a,this.fwcRoutingTableService=l,this.fwcUserService=c,this.store=d,this.fb=h,this.router=_,this.messageService=C,this.translate=I,this.ObjectTypes=O,this.loading=!1}ngOnInit(){this.formModel=this.fb.group({gateway:new ve(void 0,Pe.required),comment:new ve("")})}showNewRouteDialog(e,t,r,o,s,a){this.clusterId=e,this.firewallId=t,this.tableId=r,this.tableName=o,this.baseRouteId=s,this.newRouteOffset=a,this.displayDialog=!0}handleSave(){if(this.formModel.valid){this.store.dispatch(Bi.requestBlockUI());let{gateway:e,comment:t}=this.formModel.value,r=e&&e.id;this.loading=!0,this.utilService.fwcAPICall(this.fwcRoutingTableService.newRoutingTableRoute.bind(this.fwcRoutingTableService),this.firewallId,this.fwcUserService.getActualFwSelectedCloud(),this.tableId,r,t,this.baseRouteId,this.newRouteOffset).then(o=>{this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.ROUTING_ROUTE_PANEL.INFO.SAVE_ROUTE")}),this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}}))}).catch(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.ROUTING_ROUTE_PANEL.ERRORS.SAVE_ROUTE")})}).finally(()=>{this.loading=!1,this.store.dispatch(Bi.requestUnblockUI())})}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(ft),S(Un),S(Os),S(at),S(nt),S(qr),S(ct),S(Kt),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-routing-table-route-panel"]],features:[Se],decls:24,vars:22,consts:[["dlgRoutingRuleDialog",""],["styleClass","dlgFwcDialog fwcObjectDialog--small",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","gateway",3,"readOnly","groupType","msgNotAllowed"],[1,"fwcFloatLabel"],[1,"fwc-error",3,"ngStyle"],["pInputText","","type","text","formControlName","comment","name","comment",3,"drop"],["for","comment"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-policy","fwcOrange"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)})("onHide",function(){return y(o),w(!0)}),v(2,qUe,5,6,"ng-template",2),m(3,"form",3)(4,"fieldset",4),k("keyup.enter",function(a){return y(o),w(r.handleCheckForm(a))})("keyup.esc",function(){return y(o),w(r.handleCancel())}),m(5,"div",5),P(6,"div",6),m(7,"div",6)(8,"div",7)(9,"span",8),P(10,"sts-fwc-object-group",9),D(11,"translate"),m(12,"label",10),F(13),D(14,"translate"),g()()(),P(15,"p",11),g(),m(16,"div",6)(17,"div",7)(18,"span",8)(19,"input",12),k("drop",function(a){return y(o),w(r.preventDrop(a))}),g(),m(20,"label",13),F(21),D(22,"translate"),g()()()()()()(),v(23,YUe,4,7,"ng-template",14),g()}t&2&&(st(Ae(20,KUe)),Te("visible",r.displayDialog),f("modal",!1)("closable",!1)("resizable",!0),p(3),f("formGroup",r.formModel),p(),f("disabled",r.loading),p(6),Q("msgNotAllowed",N(11,14,"PANELS.ROUTING_ROUTE_PANEL.ERRORS.INVALID_GATEWAY")),f("readOnly",!1)("groupType",r.ObjectTypes.OBJ_ROUTING_GATEWAY),p(3),$(N(14,16,"PANELS.ROUTING_ROUTE_PANEL.GATEWAY")),p(2),f("ngStyle",Ae(21,$Ue)),p(6),$(N(22,18,"ITEM_PANEL.FIELDS.COMMENTS")))}})}}return i})();var KF=()=>({visibility:"hidden"});function XUe(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"PANELS.ROUTING_TABLE_PANEL.TITLE_EDIT")," ")}function QUe(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"PANELS.ROUTING_TABLE_PANEL.TITLE")," ")}function ZUe(i,n){if(i&1&&(m(0,"div",6)(1,"h6",7),P(2,"i",8),v(3,XUe,2,3)(4,QUe,2,3),g()()),i&2){let e=u();p(3),W(e.formModel!=null&&e.formModel.get("id").value?3:4)}}function e8e(i,n){if(i&1&&P(0,"sts-fwc-message",3),i&2){let e=u();f("message",e.errorMessage)}}function t8e(i,n){if(i&1){let e=L();m(0,"form",4)(1,"fieldset",9),k("keyup.enter",function(r){y(e);let o=u();return w(o.handleCheckForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.handleCancel())}),m(2,"div",10),P(3,"div",11),m(4,"div",11)(5,"div",12)(6,"span",13)(7,"label",14),F(8),D(9,"translate"),g(),P(10,"p-dropdown",15),g()(),P(11,"p",16),g(),m(12,"div",11)(13,"div",12)(14,"span",13)(15,"label",14),F(16),D(17,"translate"),g(),m(18,"input",17),k("drop",function(r){y(e);let o=u();return w(o.preventDrop(r))}),g()()(),P(19,"p",16),g(),m(20,"div",11)(21,"div",12)(22,"span",13)(23,"label",14),F(24),D(25,"translate"),g(),m(26,"input",18),k("drop",function(r){y(e);let o=u();return w(o.preventDrop(r))}),g()()(),P(27,"p",16),g()()()()}if(i&2){let e=u();f("formGroup",e.formModel),p(),f("disabled",e.loading),p(7),$(N(9,9,"PANELS.ROUTING_TABLE_PANEL.FIELDS.NUMBER")),p(2),f("options",e.availableNumbersItems),p(),f("ngStyle",Ae(15,KF)),p(5),$(N(17,11,"PANELS.ROUTING_TABLE_PANEL.FIELDS.NAME")),p(3),f("ngStyle",Ae(16,KF)),p(5),$(N(25,13,"PANELS.ROUTING_TABLE_PANEL.FIELDS.COMMENT")),p(3),f("ngStyle",Ae(17,KF))}}function i8e(i,n){if(i&1){let e=L();m(0,"button",19),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g(),m(2,"button",20),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!(e.formModel!=null&&e.formModel.valid)||(e.formModel==null?null:e.formModel.pristine)||e.loading)}}var tz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b){super(r,t,e,o,d,h),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.utilService=s,this.fwcPolicyService=a,this.fwcRoutingTableService=l,this.fwcUserService=c,this.store=d,this.router=h,this.fwcErrorPipe=_,this.fb=C,this.messageService=I,this.translate=b,this.availableNumbersItems=[]}ngOnInit(){this.formModel=this.fb.group({id:new ve(void 0),number:new ve(Pe.required),name:new ve("",Pe.required),comment:new ve("")}),this.formModel.valueChanges.subscribe(({number:e})=>{if(this.selectedTableNumber!==e){this.selectedTableNumber=e;let t=this.formModel.get("name");e===254?(t.setValue("main"),t.disable()):(t.enable(),t.value==="main"&&t.reset())}})}showNewRoutingTableDialog(e,t,r,o,s,a){this.clusterId=e,this.clusterName=t,this.firewallId=r,this.firewallName=o,this.fwcloudId=s;let l=[];this.utilService.fwcAPICall(this.fwcRoutingTableService.getRoutingTables.bind(this.fwcRoutingTableService),r,s).then(c=>{let d,h=c.data,_=new Map;if(Array.isArray(h))for(let C of h)_.set(C.number,C.name),C.id===a&&(d=C);l.push({label:"254 (main)",value:254,disabled:_.has(254)});for(let C=1;C<=250;C++){let I="";_.has(C)&&(I=` (${_.get(C)})`),l.push({label:C+I,value:C,disabled:I!==""})}if(d)this.formModel.reset({id:d.id,name:d.name,number:d.number,comment:d.comment});else for(let C of l)if(!C.disabled){this.formModel.get("number").setValue(C.value),this.formModel.markAsDirty();break}}).catch(c=>{this.errorMessage={type:"error",title:this.translate.instant("PANELS.ROUTING_RULE_PANEL.ERRORS.GET_ROUTING_TABLES.TEXT"),text:this.fwcErrorPipe.transform(c)}}).finally(()=>{this.availableNumbersItems=l.map(c=>({label:c.label,value:c.value,disabled:c.disabled||!1})),this.showDialog()})}handleSave(){if(this.formModel.valid){let{id:e,number:t,name:r,comment:o}=this.formModel.getRawValue();this.store.dispatch(Bi.requestBlockUI());let s=this.fwcRoutingTableService.newRoutingTable.bind(this.fwcRoutingTableService),a=[this.firewallId,this.fwcloudId,t,r,o];e&&(s=this.fwcRoutingTableService.updateRoutingTable.bind(this.fwcRoutingTableService),a=[this.firewallId,this.fwcloudId,e,t,r,o]),this.loading=!0,this.utilService.fwcAPICall(s,...a).then(l=>{let c;e||(c={_fwcObjId:l.data.id,_fwcObjType:Zr.ROUTING_TABLE,container:qe.C_FIREWALLS}),this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS,treeNodeToSelect:c});let d=this.fwcPolicyService.getActualSelectedPolicy();if(e&&d&&d._fwcPolicyType===Zr.ROUTING_TABLE&&d._fwcObjId===e?(d._fwcPolicyName=r,this.fwcPolicyService.setSelectedPolicy(d)):d._fwcPolicyType===Zr.POLICY_ROUTING&&this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}})),!e){let h={fwcloud:this.fwcloudId,_fwcFwId:this.firewallId,_fwcFwName:this.clusterId?this.clusterName:this.firewallName,_fwcClusterId:this.clusterId,_fwcObjId:l.data.id,_fwcPolicyType:Zr.ROUTING_TABLE,_fwcPolicyName:r};this.fwcPolicyService.setSelectedPolicy(h)}this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.NEW_TABLE_PANEL.SUCCESS")}),this.hideDialog()}).catch(l=>{let c;c=this.fwcErrorPipe.transform(l),c||(c=this.translate.instant("ROUTING.NEW_TABLE_PANEL.ERROR")),this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:c})}).finally(()=>{this.loading=!1,this.store.dispatch(Bi.requestUnblockUI())})}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(ft),S(Un),S(Os),S(at),S(nt),S(ct),S(Ei),S(qr),S(Kt),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-routing-table-panel"]],features:[Se],decls:6,vars:5,consts:[["dlgRoutingRuleDialog",""],["styleClass","dlgFwcDialog fwcObjectDialog--small",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[3,"message"],[3,"formGroup"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-policy","fwcOrange"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],[1,"p-inputgroup"],[1,"p-float-label"],[1,"fwcFloatLabel"],["formControlName","number","appendTo","body",3,"options"],[1,"fwc-error",3,"ngStyle"],["pInputText","","type","text","formControlName","name","name","name",3,"drop"],["pInputText","","type","text","formControlName","comment","name","comment",3,"drop"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)})("onHide",function(){return y(o),w(!0)}),v(2,ZUe,5,1,"ng-template",2)(3,e8e,1,1,"sts-fwc-message",3)(4,t8e,28,18,"form",4)(5,i8e,4,7,"ng-template",5),g()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(3),W(r.errorMessage?3:4))},dependencies:[De,Kn,Li,Pi,zn,$n,Qn,Yt,Ee,pt,Xi,mr,Fn,gt]})}}return i})();var xu=(()=>{class i extends kS{constructor(e,t,r,o,s,a,l,c,d,h,_,C){super(e,t,r,o,a,l,c,d,h,_),this.translate=e,this.fwcErrorPipe=t,this.utilService=r,this.fwcUserService=o,this.fwcPolicyService=s,this.fwcRoutingPolicyService=a,this.fwcRoutingTableService=l,this.ruleSelectedService=c,this.messageService=d,this.cd=h,this.store=_,this.confirmationService=C}showNewRoutingTableDialog(e,t,r,o,s,a){let l=this.utilService.createDynamicComponentRef(tz),c=l.instance;c.setDynamicComponentRef(l),c.showNewRoutingTableDialog(e,t,r,o,s,a)}showNewRouteDialog(e,t,r,o,s,a){let l=this.utilService.createDynamicComponentRef(LS),c=l.instance;c.setDynamicComponentRef(l),c.showNewRouteDialog(e,t,r,o,s,a)}parseRoutingTableRoutes(e,t,r){let o=[];for(let s of r){let a={id:s.id,idgroup:s.routeGroupId,group_name:s.routeGroup&&s.routeGroup.name,group_style:s.routeGroup&&s.routeGroup.style,comment:s.comment,style:s.style,type:Zr.ROUTING_TABLE,rule_order:s.route_order,active:s.active?1:0,firewall:e,fwcloud:t,fw_apply_to:s.firewallApplyToId,positions:[]},l=1,c={id:Fi.TO_POSITION,name:this.translate.instant("ITEM_PANEL.FIELDS.PORT_E"),policy_type:a.type,position_order:l++,content:"O",single_object:0,fwcloud:t,firewall:e,rule:a.id,ipobjs:[]};if(Array.isArray(s.items)){let h=1;for(let _ of s.items){let C={rule:a.id,position:Fi.TO_POSITION,id:_.id,name:_.name,type:_.type,position_order:h++,firewall_id:_.firewall_id,firewall_name:_.firewall_name,cluster_id:_.cluster_id,cluster_name:_.cluster_name,host_id:_.host_id,host_name:_.host_name};c.ipobjs.push(C)}}if(a.positions.push(c),s.gateway){let h=s.gateway,_={id:Fi.GATEWAY_POSITION,name:this.translate.instant("Gateway"),policy_type:a.type,position_order:l++,content:"O",single_object:1,fwcloud:t,firewall:e,rule:a.id,ipobjs:[{rule:a.id,position:Fi.GATEWAY_POSITION,id:h.id,name:h.name,type:h.ipObjTypeId,allowDrag:!1,position_order:1,firewall_id:h.firewall_id,firewall_name:h.firewall_name,cluster_id:h.cluster_id,cluster_name:h.cluster_name,host_id:h.host_id,host_name:h.host_name}]};a.positions.push(_)}let d={id:Fi.INTERFACE_POSITION,name:this.translate.instant("GLOBALS.MSG_OBJ_TYPES.OBJ_INTERFACE_FIREWALL"),policy_type:a.type,position_order:l++,content:"I",single_object:1,fwcloud:t,firewall:e,rule:a.id,ipobjs:[]};if(s.interface){let h=s.interface,_={rule:a.id,position:Fi.INTERFACE_POSITION,id:h.id,name:h.name,type:h.type,position_order:1,firewall_id:h.firewall_id||h.firewallId,firewall_name:h.firewall_name,cluster_id:h.cluster_id,cluster_name:h.cluster_name,host_id:h.host_id,host_name:h.host_name};d.ipobjs.push(_)}a.positions.push(d),o.push(a)}return o}updateRoute(e,t,r,o,s,a){let l=!1,c=!1,d=r.comment,h=r.style,_=r.active,C=r.id,I=r.routingTableId,b={};o!==d&&(b.comment=o,l=!0,c=!0),s!==h&&(b.style=s,l=!0),a!==_&&(b.active=!!a,l=!0,c=!0),l&&(this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),e,t,I,C,b).then(E=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),s!==h&&(r.style=s),a!==_&&(r.active=a),o!==d&&(r.comment=o),c&&this.fwcPolicyService.reloadPolicy()}).catch(E=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(E)}),s!==h&&(r.style=h),a!==_&&(r.active=_),o!==d&&(r.comment=d)}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()}))}updateSelectedRoutes(e,t,r,o,s){let a=this.ruleSelectedService.getActualSelectedRules();if(Array.isArray(a)&&a.length){let l=a.map(d=>d.id);this.ruleSelectedService.setRuleStatus("");let c=!!Object.keys(s).filter(d=>d!=="style").length;this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoutes.bind(this.fwcRoutingTableService),t,r,o,l,s).then(d=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.fwcPolicyService.reloadPolicy(),c&&this.dispatchFwStatusUpdateAction(e,t)}).catch(d=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null)})}}buildRoutesCopyApiData(e,t){let r={};switch(t.id){case Fi.GATEWAY_POSITION:{r.gatewayId=e._fwcObjId;break}case Fi.INTERFACE_POSITION:{r.interfaceId=e._fwcObjId;break}case Fi.TO_POSITION:{r=this.buildCopyApiData(e,t);break}default:return}return r}buildRoutesRemoveApiData(e,t){let r={};switch(t.id){case Fi.GATEWAY_POSITION:break;case Fi.INTERFACE_POSITION:{r.interfaceId=null;break}case Fi.TO_POSITION:{r=this.buildRemoveApiData(e,t);break}default:return}return r}updateRoutePosition(e,t,r,o,s,a,l,c){let d={},h=l._fwcPositionId,_=l._fwcRuleId;if(h==null||_==null||c==Or.COPY)if((l.obj_type==O.OBJ_OPENVPN_PREFIX||l.obj_type==O.OBJ_WIREGUARD_PREFIX||l.obj_type==O.OBJ_IPSEC_PREFIX||l.obj_type==O.OBJ_INTERFACE_FIREWALL)&&"items"in l&&l.items.length===0||l.obj_type==O.OBJ_HOST&&"items"in l&&l.items.length>0&&l.items[0].items.length===0)this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:l.obj_type==O.OBJ_HOST?this.translate.instant("POSITION.ERROR_EMPTY_CONTAINER",{name:l._fwcObjName,ipVersion:"IP"}):l.obj_type==O.OBJ_INTERFACE_FIREWALL?this.translate.instant("POSITION.ERROR_GROUP_EMPTY",{name:l._fwcObjName}):this.translate.instant("POSITION.ERROR_EMPTY_PREFIX",{name:l._fwcObjName}),accept:()=>{}});else{let C=this.buildRoutesCopyApiData(l,a);this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),t,r,o,s,C).then(I=>{this.addOrUpdateObjectToPosition(a,l),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")});let b=e.getClusterId();this.dispatchFwStatusUpdateAction(b,t),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(s)}).catch(I=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}else this.ruleSelectedService.setRuleStatus(""),this.moveObject(e,t,r,o,s,a,l).then(()=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")})}).catch(C=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(C)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}moveObjectAlt(e,t,r,o,s,a,l){return B(this,null,function*(){try{let c=this.buildRoutesCopyApiData(l,a);yield this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),t,r,o,s,c);let d=e.getPolicyRule(l._fwcRuleId),h=d.positions.find(I=>I.id===l._fwcPositionId),_=this.buildRoutesRemoveApiData(l,h);yield this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),t,r,o,d.id,_),this.addOrUpdateObjectToPosition(a,l),this.removeObjectFromPosition(h,l);let C=e.getClusterId();this.dispatchFwStatusUpdateAction(C,t),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(d.id),this.ruleSelectedService.setRuleHeightRecalculate(s)}catch(c){throw c}})}moveObject(e,t,r,o,s,a,l){return B(this,null,function*(){try{let c,d;switch(l._fwcObjType){case O.OBJ_GROUP:{c="ipObjGroupId";break}case O.OBJ_OPENVPN_PREFIX:{c="openVPNPrefixId";break}case O.OBJ_OPENVPN_CONFIG_CLI:{c="openVPNId";break}case O.OBJ_WIREGUARD_PREFIX:{c="wireguardPrefixId";break}case O.OBJ_WGC_CONFIG_CLI:{c="wireguardId";break}case O.OBJ_IPSEC_PREFIX:{c="ipsecPrefixId";break}case O.OBJ_ISC_CONFIG_CLI:{c="ipsecId";break}case O.OBJ_INTERFACE_FIREWALL:{c="interfaceId";break}default:{c="ipObjId";break}}let h=e.getPolicyRule(l._fwcRuleId),_=h.positions.find(I=>I.id===l._fwcPositionId);d={fromId:h.id,toId:s},d[c]=l._fwcObjId,yield this.utilService.fwcAPICall(this.fwcRoutingTableService.moveObjectInRoutes.bind(this.fwcRoutingTableService),t,r,o,a.id,d),this.addOrUpdateObjectToPosition(a,l),this.removeObjectFromPosition(_,l),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(h.id),this.ruleSelectedService.setRuleHeightRecalculate(s);let C=e.getClusterId();this.dispatchFwStatusUpdateAction(C,t),Promise.resolve()}catch{Promise.reject()}})}addOrUpdateObjectToPosition(e,t){let r={cluster_id:t._fwcClusterId,cluster_name:t._fwcClusterName,firewall_id:t._fwcFwId,firewall_name:t._fwcFwName,host_id:t._fwcHostId,host_name:t._fwcHostName,id:t._fwcObjId,id_obj:t._fwcObjId,name:t._fwcObjName,obj_type:t._fwcObjType,parent_id:t.parent_id,position:e.id,position_order:e.ipobjs?e.ipobjs.length:1,rule:e.rule,type:t._fwcObjType,_fwcFwId:t._fwcFwId,_fwcFwName:t._fwcFwName,_fwcObjId:t._fwcObjId,_fwcObjName:t._fwcObjName,_fwcObjType:t._fwcObjType,_fwcPositionId:e.id,_fwcRuleId:e.rule,_fwcUserId:this.fwcUserService.getActualFwcUser().user_id,highlighted:t.highlighted};e.id===Fi.GATEWAY_POSITION||e.id===Fi.INTERFACE_POSITION?(e.id===Fi.GATEWAY_POSITION?(e.ipobjs=e.ipobjs.filter(o=>o.obj_type!==O.OBJ_ADDRESS),r.allowDrag=!1):e.ipobjs=e.ipobjs.filter(o=>o.obj_type!==O.OBJ_INTERFACE_FIREWALL&&o.obj_type!==O.OBJ_INTERFACE_HOST),e.ipobjs.unshift(r)):e.id===Fi.TO_POSITION&&(e.ipobjs=[...e.ipobjs,r])}deleteObjectFromPosition(e,t,r,o,s,a,l){let c={};switch(a.id){case Fi.INTERFACE_POSITION:{c.interfaceId=null;break}case Fi.TO_POSITION:{c=this.buildRemoveApiData(l,a);break}default:return}this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),e,r,o,s,c).then(d=>{this.removeObjectFromPosition(a,l),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),this.dispatchFwStatusUpdateAction(t,e),this.dispatchReloadItemEditingPanels(),this.ruleSelectedService.setRuleHeightRecalculate(s)}).catch(d=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}compileRoutes(e){this.compileRulesOrRoutes(e)}moveSelectedRoutes(e,t,r,o,s,a,l){this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcRoutingTableService.manageTableRoutes.bind(this.fwcRoutingTableService),t,r,o,s,l,a,Or.CUT).then(c=>{this.fwcPolicyService.reloadPolicy(),this.dispatchFwStatusUpdateAction(e,t)}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("GLOBALS.MSG_OP_RESULT.PROCESS_ERROR")})}).finally(()=>{this.store.dispatch(Bi.requestUnblockUI())})}setRouteStyle(e,t){if(t){let r={style:t.ruleColor};this.updateSelectedRoutes(e._fwcClusterId,e.firewall,this.fwcUserService.getActualFwSelectedCloud(),t.routingTableId,r)}}updateRouteComment(e,t){if(t&&t.formModel){let r=t.formModel.comment;if(t.comment!==r){let o=t.firewall,s=t.fwcloud,a={comment:r};this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingTableService),o,s,e,t.id,a).then(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_ROUTE")}),t.comment=r,this.dispatchFwStatusUpdateAction(t._fwcClusterId,o)}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)}),t.formModel.comment=t.comment}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}}}updateRuleApplyTo(e,t){if(t&&t.formModel){let r=t.firewall,o=t.fwcloud,s={firewallApplyToId:t.formModel.fw_apply_to};this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.updateRoutingTableRoute.bind(this.fwcRoutingPolicyService),r,o,e,t.id,s).then(a=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("ROUTING.SUCCESS.UPDATE_RULE")}),this.dispatchFwStatusUpdateAction(t._fwcClusterId,t.firewall),this.dispatchReloadItemEditingPanels(),this.detectChanges()}).catch(a=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null),this.detectChanges()})}}newRouteGroup(e,t,r){let o=r&&r.groupName,s=r&&r.groupComment;if(o){let l=this.ruleSelectedService.getActualSelectedRules().map(c=>c.id);this.ruleSelectedService.setRuleStatus(""),this.utilService.fwcAPICall(this.fwcRoutingTableService.newRoutingTableRouteGroup.bind(this.fwcRoutingTableService),e,t,o,s,l).then(c=>{this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]})),this.fwcPolicyService.reloadPolicy()}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c)})}).finally(()=>{this.ruleSelectedService.setRuleStatus(null)})}else return}static{this.\u0275fac=function(t){return new(t||i)(de(Ye),de(Ei),de(ft),de(at),de(Un),de(Kp),de(Os),de($p),de(Kt),de(we),de(nt),de(Jt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})();var r8e=["txtScriptString"],o8e=()=>({height:"98%",minHeight:"12rem"});function s8e(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"SCRIPT_PANEL.HEADER_DHCP")," ")}function a8e(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"SCRIPT_PANEL.HEADER_KEEPALIVED")," ")}function l8e(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"SCRIPT_PANEL.HEADER_HAPROXY")," ")}function c8e(i,n){i&1&&(F(0),D(1,"translate")),i&2&&J(" ",N(1,1,"SCRIPT_PANEL.HEADER")," ")}function d8e(i,n){if(i&1&&(m(0,"div",9)(1,"h6",10),v(2,s8e,2,3)(3,a8e,2,3)(4,l8e,2,3)(5,c8e,2,3),g()()),i&2){let e,t=u();p(2),W((e=t.policyType)===66?2:e===68?3:e===69?4:5)}}function p8e(i,n){if(i&1){let e=L();he(0),m(1,"div",11)(2,"button",12),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel())}),g(),m(4,"button",13),D(5,"translate"),k("click",function(){y(e);let r=u();return w(r.onSubmit())}),g()(),fe()}i&2&&(p(2),Q("label",N(3,2,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(5,4,"GLOBALS.MSG_BUTTONS.SAVE")))}var BUt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d){super(e,t,r,o,s,a),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.cd=o,this.store=s,this.router=a,this.confirmationService=l,this.translate=c,this._document=d,this.darkMode=!1}ngOnInit(){this.store.pipe(Cn(Ko),yt(()=>this.alive)).subscribe(e=>{this.darkMode=e==="dark"})}ngAfterViewInit(){}onShowDialog(){this.txtScriptString&&setTimeout(()=>{this.txtScriptString.nativeElement.focus()},100)}ngOnDestroy(){super.ngOnDestroy()}show(e,t){this.rule=t,this.PolicyObject=e,this.scriptstring=t.run_before,this.policyType=this.PolicyObject.getPolicyType(),(this.policyType===66||this.policyType===68||this.policyType===69)&&(this.scriptstring=t.cfg_text),this.scriptGroup=new rr({scriptForm:new ve(this.scriptstring)}),this.showDialog()}onSubmit(){this.scriptstring=this.scriptGroup.value.scriptForm,this.rule.formModel.run_before=this.scriptstring,this.rule.type===ki[M.DHCP]||this.rule.type===ki[M.KEEPALIVED]||this.rule.type===ki[M.HAPROXY]?(this.rule.formModel.cfg_text=this.scriptstring,this.rule.formModel.run_before=void 0,this.PolicyObject.setRuleScript(this.rule)):this.PolicyObject.setRuleScript(this.rule),this.hideDialog()}onCancel(e){!e&&this.scriptGroup&&!this.scriptGroup.pristine&&this.scriptGroup.valid?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("CLOUD.MSG_CLOUD_EXIT"),accept:()=>{this.onCancel(!0)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):this.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(we),S(nt),S(ct),S(Jt),S(Ye),S(At))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-config-panel"]],viewQuery:function(t,r){if(t&1&&le(r8e,5),t&2){let o;te(o=ie())&&(r.txtScriptString=o.first)}},features:[et([Dt,DS,NS,xu]),Se],decls:10,vars:8,consts:[["dlgConfigDialog",""],["txtScriptString",""],["styleClass","dlgFwcDialog",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"fwcScriptPanel",3,"formGroup"],[1,"grid"],[1,"col-12"],["id","textScript","formControlName","scriptForm","pInputTextarea","",1,"textScript",3,"ngStyle"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"divLoadTemp"],["type","button","pButton","","icon","pi pi-trash","icon","pi pi-times",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","fa fa-save",1,"p-button-success",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(r.onShowDialog())})("onHide",function(){return y(o),w(r.hideDialog())}),v(2,d8e,6,1,"ng-template",3),m(3,"form",4)(4,"div",5)(5,"div",6)(6,"textarea",7,1),F(8),g()()()(),v(9,p8e,6,6,"ng-template",8),g()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(3),f("formGroup",r.scriptGroup),p(3),f("ngStyle",Ae(7,o8e)),p(2),$(r.scriptstring))},dependencies:[De,Kn,Li,Pi,zn,$n,Qn,Yt,Ee,pt,Qr,gt]})}}return i})();var $F=No(Gc());var u8e=["txtCompiledString"],h8e=()=>({height:"98%",minHeight:"12rem"});function f8e(i,n){if(i&1){let e=L();m(0,"div",8)(1,"h6",9),F(2),D(3,"translate"),g()(),m(4,"div",10)(5,"button",11),k("click",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()()}if(i&2){let e=u();p(2),Es(" ",N(3,2,"CONTEXT.POLICY.HEADER")," ",e.firewallName," ")}}function m8e(i,n){if(i&1){let e=L();m(0,"button",12),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleExportedToClipboard())}),g(),m(2,"button",13),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.downloadPolicyScript(r.firewallId))}),g(),m(4,"button",14),D(5,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel())}),g()}i&2&&(Q("label",N(1,3,"VPN.CONFIG.CLIPBOARD.BUTTON")),p(2),Q("label",N(3,5,"CONTEXT.POLICY.DOWNLOAD")),p(2),Q("label",N(5,7,"GLOBALS.MSG_BUTTONS.CLOSE")))}var JF=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I){super(e,t,r,c,d,h),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.fwcFirewallService=o,this.fwcPolicyService=s,this.fwcUserService=a,this.utilService=l,this.cd=c,this.store=d,this.router=h,this.confirmationService=_,this.translate=C,this._document=I,this.darkMode=!1,this.firewalls=[],this.FirewallOpsIcons=Cc}ngOnInit(){this.store.pipe(Cn(Ko),yt(()=>this.alive)).subscribe(e=>{this.darkMode=e==="dark"})}ngAfterViewInit(){}show(e){let t,r=[];this.fwcFirewallService.getClustersByCloud(this.fwcUserService.getActualFwSelectedCloud()).subscribe(o=>{o.data&&Array.isArray(o.data)&&(r=o.data),r.find(s=>s.id===e)===void 0||r.find(s=>s.id===e)===null?t=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService):t=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),t(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a=[],l,c;Array.isArray(s.data)&&s.data.length?a.push(...s.data):s.data&&s.data.id&&a.push(s.data),this.firewalls=[];for(let d=0;d<a.length;d++){if(a[d].status_compiled=a[d].status&1,a[d].status_installed=a[d].status&2,a[d].status_compiled=a[d].status_compiled?Xt.FW_PENDING:Xt.FW_OK,a[d].status_installed=a[d].status_installed?Xt.FW_PENDING:Xt.FW_OK,l=a[d].cluster,l==null)this.firewalls.push(a[d]);else{c=!1;for(let C=0;C<this.firewalls.length&&!c;C++)this.firewalls[C].cluster==l&&(this.firewalls[C].fwnodes.push(a[d]),c=!0);let h="",_=r.filter(C=>C.id==l);if(_&&_.length&&(h=_[0].name),!c){let C=Object.assign({},a[d]);a[d].name=h,a[d].fwnodes=[],a[d].fwnodes.push(C),this.firewalls.push(a[d])}}this.firewalls[d]!==void 0&&this.firewalls[d].status_compiled==Xt.FW_PENDING?(this.firewalls[d].status_compiled=Xt.FW_WARNING,this.hideDialog(),this.confirmationService.confirm({header:this.translate.instant("CONTEXT.POLICY.ERROR_HEADER"),message:this.translate.instant("CONTEXT.POLICY.ERROR_BODY",{name:this.firewalls[d].name}),reject:()=>{this.hideDialog()},accept:()=>{let h;r.find(_=>_.id===e)===void 0||r.find(_=>_.id===e)===null?h={compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_FIREWALL,compileId:e,compileType:0}:h={compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_CLUSTER,compileId:e,compileType:100},this.itemSelectedService.setCloudToCompile(h),this.hideDialog()},rejectLabel:"No",acceptLabel:this.translate.instant("CONTEXT.FW.COMPILE")})):(this.firewallName=this.firewalls[0].name,this.firewallId=this.firewalls[0].id,this.fwcPolicyService.getPolicyRules(this.fwcUserService.getActualFwSelectedCloud(),this.firewallId).subscribe(h=>{this.PolicyCompiledString=h.data}),this.showDialog())}})})}ngOnDestroy(){super.ngOnDestroy()}onShowDialog(){}onCancel(){this.hideDialog()}downloadPolicyScript(e){return B(this,null,function*(){let t="";if(this.firewalls.length===0||this.firewalls===null||this.firewalls===void 0){let r,o=[];this.fwcFirewallService.getClustersByCloud(this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{s.data&&Array.isArray(s.data)&&(o=s.data),o.find(a=>a.id===e)===void 0||o.find(a=>a.id===e)===null?r=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService):r=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),r(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(a=>{let l=[],c,d;if(Array.isArray(a.data)&&a.data.length?l.push(...a.data):a.data&&a.data.id&&l.push(a.data),l[0].status_compiled=l[0].status&1,l[0].status_installed=l[0].status&2,l[0].status_compiled=l[0].status_compiled?Xt.FW_PENDING:Xt.FW_OK,l[0].status_installed=l[0].status_installed?Xt.FW_PENDING:Xt.FW_OK,c=l[0].cluster,c==null)this.firewalls.push(l[0]);else{d=!1;for(let C=0;C<this.firewalls.length&&!d;C++)this.firewalls[C].cluster==c&&(this.firewalls[C].fwnodes.push(l[0]),d=!0);let h="",_=o.filter(C=>C.id==c);if(_&&_.length&&(h=_[0].name),!d){let C=Object.assign({},l[0]);l[0].name=h,l[0].fwnodes=[],l[0].fwnodes.push(C),this.firewalls.push(l[0])}}l[0]!==void 0&&l[0].status_compiled==Xt.FW_PENDING?(this.hideDialog(),this.confirmationService.confirm({header:this.translate.instant("CONTEXT.POLICY.ERROR_HEADER"),message:this.translate.instant("CONTEXT.POLICY.ERROR_BODY",{name:this.firewalls[0].name}),reject:()=>{this.hideDialog()},accept:()=>{let h;o.find(_=>_.id===e)===void 0||o.find(_=>_.id===e)===null?h={compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_FIREWALL,compileId:e,compileType:0}:h={compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_CLUSTER,compileId:e,compileType:100},this.itemSelectedService.setCloudToCompile(h),this.hideDialog()},rejectLabel:"No",acceptLabel:this.translate.instant("CONTEXT.FW.COMPILE")})):(this.firewallName=this.firewalls[0].name,this.utilService.fwcAPICall(this.fwcPolicyService.generatePolicyScript.bind(this.fwcPolicyService),this.fwcUserService.getActualFwSelectedCloud(),this.firewalls[0].id).then(h=>{let _=`${this.fwcUserService.getActualFwcUser().selectedFwCloudName}_${this.firewallName}_policy.sh`;(0,$F.saveAs)(h.body,_)}))})})}else this.firewallName=this.firewalls[0].name,this.utilService.fwcAPICall(this.fwcPolicyService.generatePolicyScript.bind(this.fwcPolicyService),this.fwcUserService.getActualFwSelectedCloud(),e).then(r=>{let o=`${this.fwcUserService.getActualFwcUser().selectedFwCloudName}_${this.firewallName}_policy.sh`;(0,$F.saveAs)(r.body,o)});this.ngOnDestroy()})}handleExportedToClipboard(){this.txtCompiledString&&(document.execCommand("copy"),this.txtCompiledString.nativeElement.setSelectionRange(0,0))}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(Dt),S(Un),S(at),S(ft),S(we),S(nt),S(ct),S(Jt),S(Ye),S(At))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-config-panel"]],viewQuery:function(t,r){if(t&1&&le(u8e,5),t&2){let o;te(o=ie())&&(r.txtCompiledString=o.first)}},features:[et([Dt,ta,DS,NS,xu]),Se],decls:9,vars:7,consts:[["dlgConfigDialog",""],["txtCompiledString",""],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid","divFw"],[1,"col-12"],["id","textarea","readonly","true","pInputTextarea","",1,"textPolicyString",3,"ngStyle"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"divHeaderButtons"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(r.onShowDialog())})("onHide",function(){return y(o),w(r.hideDialog())}),v(2,f8e,6,4,"ng-template",3),m(3,"div",4)(4,"div",5)(5,"textarea",6,1),F(7),g()()(),v(8,m8e,6,9,"ng-template",7),g()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(5),f("ngStyle",Ae(6,h8e)),p(2),$(r.PolicyCompiledString))},dependencies:[De,Yt,Ee,pt,Qr,gt],styles:["textarea[_ngcontent-%COMP%]{font-family:monospace!important}"]})}}return i})();var g8e=["opLogger"],_8e=["menuUpdate"],C8e=i=>({display:i}),I8e=()=>({width:"2rem",height:"2rem"}),y8e=()=>({width:"1.5rem",height:"1.5rem"});function w8e(i,n){if(i&1){let e=L();m(0,"div",3)(1,"div",11)(2,"i",12),k("click",function(){y(e);let r=u();return w(r.handleCloseDialog())}),g()(),m(3,"div",5),P(4,"p-progressSpinner"),m(5,"h3"),F(6),D(7,"translate"),g()()()}i&2&&(p(4),st(Ae(5,I8e)),p(2),$(N(7,3,"PANELS.UPDATES_PANEL.INFO.CHECKING_UPDATES.HEADER")))}function v8e(i,n){i&1&&(m(0,"tr")(1,"th"),F(2),D(3,"translate"),g(),m(4,"th"),F(5),D(6,"translate"),g(),m(7,"th"),F(8),D(9,"translate"),g(),m(10,"th"),F(11),D(12,"translate"),g(),m(13,"th"),F(14,"Changelog"),g()()),i&2&&(p(2),$(N(3,4,"PANELS.UPDATES_PANEL.TABLE.APP")),p(3),$(N(6,6,"PANELS.UPDATES_PANEL.TABLE.CURRENT")),p(3),$(N(9,8,"PANELS.UPDATES_PANEL.TABLE.LAST")),p(3),$(N(12,10,"PANELS.UPDATES_PANEL.TABLE.NEEDS_UPDATE")))}function b8e(i,n){i&1&&P(0,"i",21)}function S8e(i,n){if(i&1){let e=L();m(0,"a",23),k("click",function(){y(e);let r=u().$implicit,o=u(2);return w(o.fetchChangeLog(r))}),P(1,"i",24),g()}}function E8e(i,n){i&1&&P(0,"p-progressSpinner"),i&2&&st(Ae(2,y8e))}function A8e(i,n){if(i&1){let e=L();m(0,"tr")(1,"td")(2,"span",19),k("contextmenu",function(r){let o=y(e).$implicit,s=u(2);return w(s.handleShowUpdateMenu(o,r))}),F(3),g()(),m(4,"td")(5,"span"),F(6),g()(),m(7,"td")(8,"span"),F(9),g()(),m(10,"td",20),v(11,b8e,1,0,"i",21),g(),m(12,"td",20),v(13,S8e,2,0,"a")(14,E8e,1,3,"p-progressSpinner",22),g()()}if(i&2){let e=n.$implicit,t=u(2);p(3),J(" ",e.appName," "),p(3),J(" ",e.current?e.current:"?"," "),p(3),J(" ",e.last?e.last:"?","\xA0 "),p(2),W(e.needsUpdate?11:-1),p(2),W(t.appBeingFetched!==e.appName?13:-1),p(),W(t.appBeingFetched===e.appName?14:-1)}}function x8e(i,n){if(i&1){let e=L();m(0,"button",25),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.handleUpdate())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_OP_ASK.YES")),f("disabled",e.updating||!e.anyUpdatesSelected||e.pkgBasedInstall)}}function T8e(i,n){if(i&1){let e=L();m(0,"div",3)(1,"div",5),P(2,"i",13),m(3,"p")(4,"strong"),F(5),D(6,"translate"),D(7,"translate"),g()()(),m(8,"div",7)(9,"p"),F(10),D(11,"translate"),D(12,"translate"),g()(),m(13,"div",7)(14,"p-table",14),v(15,v8e,15,12,"ng-template",15)(16,A8e,15,6,"ng-template",16),g()(),m(17,"div",7)(18,"p"),F(19),D(20,"translate"),D(21,"translate"),g()(),m(22,"div",9),v(23,x8e,2,4,"button",17),m(24,"button",18),D(25,"translate"),D(26,"translate"),k("click",function(){y(e);let r=u();return w(r.dialogRef.close({needsReloadUpdates:!!r.pkgBasedInstall}))}),g()()()}if(i&2){let e=u();p(5),$(e.manualUpdate?N(6,7,"PANELS.UPDATES_PANEL.INFO.MANUAL_VERSION.HEADER"):N(7,9,"PANELS.UPDATES_PANEL.INFO.NEW_VERSION.HEADER")),p(5),J(" ",e.manualUpdate?N(11,11,"PANELS.UPDATES_PANEL.INFO.MANUAL_VERSION.TEXT"):N(12,13,"PANELS.UPDATES_PANEL.INFO.NEW_VERSION.TEXT")," "),p(4),f("value",e.updateDataAsArray),p(5),J(" ",e.pkgBasedInstall?N(20,15,"PANELS.UPDATES_PANEL.INFO.NEW_VERSION.SUBTEXT_PKG_INSTALL"):N(21,17,"PANELS.UPDATES_PANEL.INFO.NEW_VERSION.SUBTEXT")," "),p(4),W(e.pkgBasedInstall?-1:23),p(),Q("label",e.pkgBasedInstall?N(26,21,"GLOBALS.MSG_BUTTONS.CLOSE"):N(25,19,"GLOBALS.MSG_OP_ASK.LATER")),f("disabled",e.updating)}}function O8e(i,n){if(i&1&&(m(0,"div",7),P(1,"sts-fwc-message",26),g()),i&2){let e=u();p(),f("message",e.opMessage)}}var iz=(()=>{class i extends ES{constructor(e,t,r,o,s,a,l,c,d,h,_){super(e,r),this.dialogRef=e,this.dialogConfig=t,this._router=r,this.fwcEventService=o,this.fwcUserService=s,this.fwcAuthService=a,this.appDialogPanelsService=l,this.confirmationService=c,this.messageService=d,this.utilService=h,this.translate=_,this.shouldCheckUpdates=!0,this.needsUpdate=!1,this.manualUpdate=!1,this.openedFromHelp=!1,this.needsRelogin=!1,this.needsReloadUpdates=!1,this.updating=!1,this.anyUpdatesSelected=!1,this.finishedUpdating=!1,this.updateDataAsArray=[],this.menuUpdateOptions=[],this.shouldCheckUpdates=_e.settings.checkUpdates,this.pkgBasedInstall=_e.settings.installMethod===pc.pkg}ngOnInit(){this.openedFromHelp=this.dialogConfig.data&&this.dialogConfig.data.openedFromHelp,this.checkingUpdates=!0,this.getUpdatesSubscription=this.utilService.getAppVersions().subscribe({next:e=>{if(e.data){this.updateData=this.parseUpdateInfo(e.data),this.updateDataAsArray=this.transformUpdateInfoToArray(this.updateData),this.fwcUserService.setAppVersions(this.updateDataAsArray),this.itUpdateData=this.createUpdateDataIterator(),this.manualUpdate=this.dialogConfig.data&&this.dialogConfig.data.manualUpdate;for(let t in e.data)if(e.data[t].needsUpdate){this.needsUpdate=!0,this.anyUpdatesSelected=!0;break}!this.needsUpdate&&!this.manualUpdate&&(this.dialogRef.close({needsReloadUpdates:!0}),this.shouldCheckUpdates&&this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("PANELS.UPDATES_PANEL.INFO.VERSION_ALREADY_UPDATED.HEADER"),detail:this.translate.instant("PANELS.UPDATES_PANEL.INFO.VERSION_ALREADY_UPDATED.TEXT")}))}this.checkingUpdates=!1},error:()=>{this.fwcUserService.setAppVersions([]),this.dialogRef.close({needsReloadUpdates:!0}),this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.NEW_VERSION.HEADER"),detail:this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.NEW_VERSION.TEXT")+(this.openedFromHelp?"":this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.NEW_VERSION.SUBTEXT"))}),this.checkingUpdates=!1}})}ngOnDestroy(){this.alive=!1}handleShowUpdateMenu(e,t){this.manualUpdate&&e&&e.apiEndpoint!=="updater"&&(e.needsUpdate?this.menuUpdateOptions=[{label:this.translate.instant("PANELS.UPDATES_PANEL.UPDATE_MENU.CLEAR"),icon:"fa fa-times fwcRed",command:()=>{e.needsUpdate=!1;let r=!1;for(let o of this.updateDataAsArray)if(o.needsUpdate){r=!0;break}this.anyUpdatesSelected=r}}]:this.menuUpdateOptions=[{label:this.translate.instant("PANELS.UPDATES_PANEL.UPDATE_MENU.FORCE"),icon:"fa fa-check fwcGreen",command:()=>{e.needsUpdate=!0,this.anyUpdatesSelected=!0}}],this.menuUpdate.toggle(t))}handleUpdate(){return B(this,null,function*(){this.updating=!0,this.updateData&&(this.fwcEventService.getEvent().pipe(yt(()=>this.alive)).subscribe(e=>{e.type===Ll.EVENT_CONNECTION_ESTABLISHED?(this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.SERVER_CONNECTION_RESTORED"),Ne.MSG_INFO),this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.OK_TEXT",{appName:this.currentOp.appName}),Ne.MSG_OK),this.needsReloadUpdates=!0,this.currentOp&&this.currentOp.impliesRelogin&&(this.needsRelogin=!0),this.log.addBreakLine(),this.doUpdateOperation()):e.type===Ll.EVENT_CONNECTION_LOST&&this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.SERVER_CONNECTION_LOST"),Ne.MSG_INFO)}),this.log.startDataLoad(),this.doUpdateOperation())})}doUpdateOperation(){return B(this,null,function*(){if(this.currentOp=this.itUpdateData.next().value,this.currentOp)if(this.currentOp.needsUpdate)try{this.currentOp.impliesConnectionLoss?(this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.LOG_TEXT",{appName:this.currentOp.appName}),Ne.MSG_INFO),yield this.utilService.fwcAPICall(this.utilService.updateVersion.bind(this.utilService),this.currentOp.apiEndpoint)):(this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.LOG_TEXT",{appName:this.currentOp.appName}),Ne.MSG_INFO),yield this.utilService.fwcAPICall(this.utilService.updateVersion.bind(this.utilService),this.currentOp.apiEndpoint),this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.OK_TEXT",{appName:this.currentOp.appName}),Ne.MSG_OK),this.needsReloadUpdates=!0,this.currentOp.impliesRelogin&&(this.needsRelogin=!0),this.log.addBreakLine(),this.doUpdateOperation())}catch{this.addMessageToLog(this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.APPLYING_UPDATES.TEXT"),Ne.MSG_ERROR),this.log.stopDataLoad(),this.finishedUpdating=!0}else this.doUpdateOperation();else this.log.stopDataLoad(),this.finishedUpdating=!0,this.needsRelogin&&(this.opMessage={type:"warning",title:this.translate.instant("PANELS.UPDATES_PANEL.INFO.RELOAD_REQUIRED.HEADER"),text:this.translate.instant("PANELS.UPDATES_PANEL.INFO.RELOAD_REQUIRED.TEXT")})})}fetchChangeLog(e){e&&e.changelogURL&&e.appName&&(this.appBeingFetched=e.appName,fetch(e.changelogURL).then(t=>t.json()).then(t=>{if(t){let r=decodeURIComponent(escape(atob(t.content)));this.appDialogPanelsService.searchAndShowDialog({uuid:ri.DOCS_PANEL,data:{markdown:r,title:this.translate.instant("PANELS.UPDATES_PANEL.INFO.CHANGES",{appName:e.appName}),icon:"fa fa-tags"}})}this.appBeingFetched=null}).catch(t=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.CHECKING_CHANGELOG.HEADER"),detail:this.translate.instant("PANELS.UPDATES_PANEL.ERRORS.CHECKING_CHANGELOG.TEXT",{appName:e.appName})}),this.appBeingFetched=null}))}handleCloseDialog(){return B(this,null,function*(){if(this.getUpdatesSubscription&&this.getUpdatesSubscription.unsubscribe(),this.needsReloadUpdates&&!this.needsRelogin)try{this.checkingUpdates=!0,this.needsUpdate=this.manualUpdate=this.updating=!1;let e=yield this.utilService.fwcAPICall(this.utilService.getAppVersions.bind(this.utilService)),t=this.parseUpdateInfo(e.data),r=this.transformUpdateInfoToArray(t);this.fwcUserService.setAppVersions(r)}catch{}this.menuUpdate&&this.menuUpdate.hide(),this.dialogRef.close({needsReloadUpdates:this.needsReloadUpdates,needsRelogin:this.needsRelogin}),this.needsRelogin&&this.fwcUserService.logoutUser().toPromise().finally(()=>{this.utilService.doAppLogout(!0),this._router.navigate(["/"])})})}parseUpdateInfo(e){if(e){for(let t in e)e[t]||(e[t]={});e.updater.impliesConnectionLoss=!1,e.updater.apiEndpoint="updater",e.updater.appName=this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPS.UPDATER"),e.updater.changelogURL="https://api.github.com/repos/soltecsis/fwcloud-updater/contents/CHANGELOG.md?ref=main",e.api.impliesConnectionLoss=!0,e.api.apiEndpoint="api",e.api.appName=this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPS.API"),e.api.changelogURL="https://api.github.com/repos/soltecsis/fwcloud-api/contents/CHANGELOG.md?ref=main",e.websrv.impliesConnectionLoss=!0,e.websrv.apiEndpoint="websrv",e.websrv.appName=this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPS.WEBSRV"),e.websrv.changelogURL="https://api.github.com/repos/soltecsis/fwcloud-websrv/contents/CHANGELOG.md?ref=main",e.ui.impliesRelogin=!0,e.ui.apiEndpoint="ui",e.ui.appName=this.translate.instant("PANELS.UPDATES_PANEL.INFO.APPS.UI"),e.ui.changelogURL="https://api.github.com/repos/soltecsis/fwcloud-ui/contents/CHANGELOG.md?ref=main"}return e}transformUpdateInfoToArray(e){let t=[];return e&&(this.pkgBasedInstall||t.push(e.websrv),t.push(e.ui),t.push(e.api),this.pkgBasedInstall||t.push(e.updater)),t}*createUpdateDataIterator(){this.updateData&&(yield this.updateData.updater,yield this.updateData.api,yield this.updateData.websrv,yield this.updateData.ui)}static{this.\u0275fac=function(t){return new(t||i)(S(Kl),S(bu),S(ct),S(dn),S(at),S(ea),S(St),S(Jt),S(Kt),S(ft),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-update-panel"]],viewQuery:function(t,r){if(t&1&&(le(g8e,5),le(_8e,5)),t&2){let o;te(o=ie())&&(r.log=o.first),te(o=ie())&&(r.menuUpdate=o.first)}},features:[Se],decls:21,vars:18,consts:[["menuUpdate",""],["opLogger",""],["appendTo","body",3,"popup","model"],[1,"grid"],[1,"grid",3,"ngStyle"],[1,"col-12","fwc-centered"],[1,"fa","fa-5x","fa-refresh","fwcBlue"],[1,"col-12"],["height","10rem"],[1,"col-12","divButtons"],["type","button","pButton","","icon","fa fa-times",1,"p-button-info",3,"click","disabled","label"],[1,"col-12","fwc-right"],[1,"pi","pi-times",2,"cursor","pointer",3,"click"],[1,"fa","fa-5x","fa-info-circle","fwcBlue"],["styleClass","tblUpdateTable",3,"value"],["pTemplate","header"],["pTemplate","body"],["type","button","pButton","","icon","fa fa-check",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-times",1,"p-button-secondary",3,"click","disabled","label"],[3,"contextmenu"],[2,"text-align","center"],[1,"fa","fa-fw","fa-check","fwcGreen"],[3,"style"],[3,"click"],[1,"fa","fa-fw","fa-eye","fwcBlue"],["type","button","pButton","","icon","fa fa-check",1,"p-button-success",3,"click","disabled","label"],[3,"message"]],template:function(t,r){if(t&1){let o=L();P(0,"p-menu",2,0),v(2,w8e,8,6,"div",3)(3,T8e,27,23,"div",3),m(4,"div",4)(5,"div",5),P(6,"i",6),m(7,"h6"),F(8),D(9,"translate"),g()(),m(10,"div",7)(11,"p"),F(12),D(13,"translate"),g()(),m(14,"div",7),P(15,"sts-fwc-log",8,1),g(),v(17,O8e,2,1,"div",7),m(18,"div",9)(19,"button",10),D(20,"translate"),k("click",function(){return y(o),w(r.handleCloseDialog())}),g()()()}t&2&&(f("popup",!0)("model",r.menuUpdateOptions),p(2),W(r.checkingUpdates?2:-1),p(),W((r.needsUpdate||r.manualUpdate)&&!r.updating?3:-1),p(),f("ngStyle",ne(16,C8e,r.updating?"block":"none")),p(4),$(N(9,10,"PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.HEADER")),p(4),$(N(13,12,"PANELS.UPDATES_PANEL.INFO.APPLYING_UPDATES.TEXT")),p(5),W(r.opMessage?17:-1),p(2),Q("label",N(20,14,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",!r.finishedUpdating||r.checkingUpdates||r.appBeingFetched))},dependencies:[De,Ee,pt,or,sr,uh,pr,Fn,gt],styles:[`.tblUpdateTable table td{white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden}.tblUpdateTable table td *{vertical-align:middle}.divButtons{text-align:left}.divButtons button{padding:.429rem 1rem!important}
`],encapsulation:2})}}return i})();var nz=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}static{this.\u0275fac=function(t){return new(t||i)(S(Dl,16))}}static{this.\u0275pipe=ur({name:"fwcSafeUrl",type:i,pure:!0})}}return i})();var P8e=["fwcHelpDialog"],D8e=["menuUpdate"];function F8e(i,n){if(i&1&&P(0,"p-menu",3,1),i&2){let e=u();f("popup",!0)("model",e.menuUpdateOptions)}}function k8e(i,n){if(i&1){let e=L();m(0,"div",9)(1,"h6",10),P(2,"i",11),F(3),D(4,"translate"),g()(),m(5,"div",12)(6,"button",13),k("click",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()()}i&2&&(p(3),J(" ",N(4,1,"HELP.TITLE")," "))}function N8e(i,n){i&1&&P(0,"p-progressSpinner")}function L8e(i,n){if(i&1){let e=L();m(0,"div",6)(1,"div",14),v(2,N8e,1,0,"p-progressSpinner"),g(),m(3,"iframe",15,2),D(5,"fwcSafeUrl"),k("load",function(){y(e);let r=u();return w(r.handleIframeLoad())})("error",function(){y(e);let r=u();return w(r.handleIframeLoad(!0))}),g()()}if(i&2){let e=u();p(2),W(e.loadingData?2:-1),p(),f("src",N(5,2,e.helpURL),Ax)}}function M8e(i,n){if(i&1&&(m(0,"span"),F(1),m(2,"strong"),F(3),g()()),i&2){let e=u().$implicit;p(),J(" ",e==null?null:e.appName," - "),p(2),$(e!=null&&e.current?"v"+e.current:"?")}}function V8e(i,n){if(i&1&&(m(0,"span"),F(1),m(2,"strong"),F(3,"?"),g()()),i&2){let e=u().$implicit;p(),J(" ",e==null?null:e.appName," - ")}}function B8e(i,n){if(i&1){let e=L();m(0,"span",37),k("contextmenu",function(r){y(e);let o=u(3);return w(o.menuUpdate.toggle(r))}),v(1,M8e,4,2,"span")(2,V8e,4,1,"span"),P(3,"br"),g()}if(i&2){let e=n.$implicit;p(),W(e!=null&&e.current?1:2)}}function U8e(i,n){if(i&1&&(m(0,"div"),xr(1,B8e,4,1,"span",null,Ar),g()),i&2){let e=u(2);p(),Tr(e.appVersions)}}function j8e(i,n){if(i&1){let e=L();m(0,"span",37),k("contextmenu",function(r){y(e);let o=u(3);return w(o.menuUpdate.toggle(r))}),F(1),D(2,"translate"),m(3,"strong"),F(4,"?"),g()()}i&2&&(p(),J(" ",N(2,1,"PANELS.UPDATES_PANEL.INFO.APPS.WEBSRV")," - "))}function G8e(i,n){if(i&1){let e=L();m(0,"span",37),k("contextmenu",function(r){y(e);let o=u(3);return w(o.menuUpdate.toggle(r))}),F(1),D(2,"translate"),m(3,"strong"),F(4,"?"),g()()}i&2&&(p(),J(" ",N(2,1,"PANELS.UPDATES_PANEL.INFO.APPS.API")," - "))}function H8e(i,n){if(i&1){let e=L();m(0,"span",37),k("contextmenu",function(r){y(e);let o=u(3);return w(o.menuUpdate.toggle(r))}),F(1),D(2,"translate"),m(3,"strong"),F(4,"?"),g()()}i&2&&(p(),J(" ",N(2,1,"PANELS.UPDATES_PANEL.INFO.APPS.UPDATER")," - "))}function W8e(i,n){if(i&1){let e=L();v(0,j8e,5,3,"span"),P(1,"br"),m(2,"span",37),k("contextmenu",function(r){y(e);let o=u(2);return w(o.menuUpdate.toggle(r))}),F(3),D(4,"translate"),m(5,"strong"),F(6),g()(),P(7,"br"),v(8,G8e,5,3,"span"),P(9,"br"),v(10,H8e,5,3,"span"),P(11,"br")}if(i&2){let e=u(2);W(e.shouldCheckUpdates?0:-1),p(3),J(" ",N(4,5,"PANELS.UPDATES_PANEL.INFO.APPS.UI")," - "),p(3),J("v",e.fwcAppVersion,""),p(2),W(e.shouldCheckUpdates?8:-1),p(2),W(e.shouldCheckUpdates?10:-1)}}function z8e(i,n){if(i&1){let e=L();m(0,"button",38),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCheckUpdates())}),g()}i&2&&Q("label",N(1,1,"HELP.CHECK_UPDATES"))}function K8e(i,n){if(i&1&&(m(0,"div",7)(1,"div",16)(2,"div",17)(3,"a",18),P(4,"img",19),g(),m(5,"div",20),v(6,U8e,3,0,"div")(7,W8e,12,7),P(8,"br"),v(9,z8e,2,3,"button",21),P(10,"br")(11,"br")(12,"span",22),D(13,"translate"),g()()(),m(14,"div",23)(15,"h5",24),F(16),D(17,"translate"),g(),m(18,"a",25),P(19,"img",26),g(),m(20,"div")(21,"strong")(22,"a",25),F(23,"SOLTECSIS SOLUCIONES TECNOL\xD3GICAS, S.L."),g()(),P(24,"br"),m(25,"div",27)(26,"span"),P(27,"i",28),g(),F(28," info@soltecsis.com "),P(29,"br")(30,"span"),m(31,"strong"),F(32),D(33,"translate"),g(),P(34,"br"),m(35,"span"),P(36,"i",29),g(),m(37,"a",30),F(38,"https://forum.fwcloud.net "),g(),P(39,"br"),g()(),P(40,"br"),m(41,"h5",24),F(42),D(43,"translate"),g(),m(44,"ul")(45,"li")(46,"a",31),D(47,"translate"),F(48),D(49,"translate"),g()(),m(50,"li")(51,"a",32),F(52),D(53,"translate"),g()(),m(54,"li")(55,"a",33),F(56),D(57,"translate"),g()(),m(58,"li")(59,"a",34),F(60),D(61,"translate"),g()(),m(62,"li")(63,"a",35),F(64),D(65,"translate"),g()(),m(66,"li")(67,"a",36),F(68),D(69,"translate"),g()()()()()),i&2){let e=u();p(6),W(e.appVersions&&e.appVersions.length?6:7),p(3),W(e.shouldCheckUpdates?9:-1),p(3),Q("innerHTML",N(13,13,"GLOBALS.LICENSE"),an),p(4),J("",N(17,15,"HELP.DEV"),":"),p(16),$(N(33,17,"HELP.SUPPORT_EMAIL")),p(10),J("",N(43,19,"HELP.LINKS"),":"),p(4),Q("href",N(47,21,"HELP.SUPPORT_WEB"),rs),p(2),$(N(49,23,"HELP.GOTO_DOC")),p(4),$(N(53,25,"HELP.GIT_INSTALLER")),p(4),$(N(57,27,"HELP.GIT_WEBSRV")),p(4),$(N(61,29,"HELP.GIT_UI")),p(4),$(N(65,31,"HELP.GIT_API")),p(4),$(N(69,33,"HELP.GIT_UPDATER"))}}function $8e(i,n){if(i&1){let e=L();m(0,"button",39),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onClose())}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.CLOSE"))}var F8t=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I){super(e,t,o,_,C,h),this.appDialogPanelsService=e,this.appOptionsService=t,this.confirmationService=r,this.itemSelectedService=o,this.fwcUserService=s,this.messageService=a,this.dialogService=l,this.utilService=c,this.translate=d,this.router=h,this.cd=_,this.store=C,this._document=I,this.fwcAppVersion=Uf.VERSION,this.appVersions=[],this.menuUpdateOptions=[],this.loadingData=!1,this.shouldCheckUpdates=!0,this.shouldCheckUpdates=_e.settings.checkUpdates,this.pkgBasedInstall=_e.settings.installMethod===pc.pkg,this.translate.get("HELP.TITLE").subscribe(b=>{this.createDialog(b,"fwci-help")})}ngOnInit(){this.appOptionsService.showHelp().pipe(yt(()=>this.alive)).subscribe(e=>{if(e){if(e!==this.helpUrlOrSection){let t=/\/(cloud|policy|vpn|ipobjs|firewalls|configuration)/,r,o=t.exec(e);if(o){let s=o[1];r=AB[s]}r||(r=""),this.helpUrlOrSection=e,this.loadingData=!0,this.helpURL=_e.settings.fwcAppDocsURL+"/"+r}}else{this.helpURL=null,this.helpUrlOrSection=null;let t=this.fwcUserService.getActualFwcUser();t.appVersions&&(this.appVersions=t.appVersions),this.menuUpdateOptions=[{label:this.translate.instant("HELP.UPDATE_MANUALLY"),icon:"fa fa-wrench",command:()=>{this.onCheckUpdates(!0)}}]}this.showDialog()})}ngOnDestroy(){super.ngOnDestroy()}onCheckUpdates(e=!1){this.dialogService.open(iz,{showHeader:!1,data:{manualUpdate:e,openedFromHelp:!0}}).onClose.pipe(yt(()=>this.alive)).subscribe(r=>{if(r){if(r.needsReloadUpdates){let o=this.fwcUserService.getActualFwcUser();o.appVersions&&(this.appVersions=o.appVersions)}r.needsRelogin&&this.onClose()}})}onClose(){this.menuUpdate&&this.menuUpdate.hide(),super.hideDialog()}changeTheme(e){e?this._document.getElementById("fwcTheme").setAttribute("href","assets/themes/fwc-dark.css"):this._document.getElementById("fwcTheme").removeAttribute("href")}goToWebsite(){window.open(this.translate.instant("HELP.SUPPORT_WEB"),"_blank")}reCenter(e){this.cd.detectChanges(),this.fwcHelpDialog.center()}handleIframeLoad(e){this.loadingData=!1}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(Jt),S(ht),S(at),S(Kt),S(Su),S(ft),S(Ye),S(ct),S(we),S(nt),S(At))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-dashboard-help"]],viewQuery:function(t,r){if(t&1&&(le(P8e,5),le(D8e,5)),t&2){let o;te(o=ie())&&(r.fwcHelpDialog=o.first),te(o=ie())&&(r.menuUpdate=o.first)}},features:[et([Su]),Se],decls:7,vars:7,consts:[["fwcHelpDialog",""],["menuUpdate",""],["iframeHelp",""],["appendTo","body",3,"popup","model"],[3,"visibleChange","onChange","visible","styleClass","modal","closable","resizable"],["pTemplate","header"],[1,"iframeContainer"],[1,"grid"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"pi","pi-info","fwcOrange"],[1,"divHeaderButtons"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],[1,"iframeContainer-loader"],["frameborder","0",3,"load","error","src"],[1,"col-4"],[1,"divHelpLogo"],["href","https://fwcloud.net","target","_blank"],["src","assets/img/fwcloud.png"],[1,"fwcVersion"],["pButton","","icon","fa fa-server",1,"p-button-primary",3,"label"],[3,"innerHTML"],[1,"col-8","divDevInfo"],[1,"fwcBlue"],["href","https://soltecsis.com","target","_blank"],["src","assets/img/logo-Soltecsis.jpg"],[1,"divData"],[1,"fa","fa-fw","fa-envelope","fwcBlue"],[1,"fa","fa-fw","fa-comments","fwcBlue"],["href","https://forum.fwcloud.net","target","_blank"],["target","_blank",3,"href"],["href","https://github.com/soltecsis/fwcloud-installer","target","_blank"],["href","https://github.com/soltecsis/fwcloud-websrv","target","_blank"],["href","https://github.com/soltecsis/fwcloud-ui","target","_blank"],["href","https://github.com/soltecsis/fwcloud-api","target","_blank"],["href","https://github.com/soltecsis/fwcloud-updater","target","_blank"],[3,"contextmenu"],["pButton","","icon","fa fa-server",1,"p-button-primary",3,"click","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){if(t&1){let o=L();v(0,F8e,2,2,"p-menu",3),m(1,"p-dialog",4,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onChange",function(a){return y(o),w(r.reCenter(a))}),v(3,k8e,7,3,"ng-template",5)(4,L8e,6,4,"div",6)(5,K8e,70,35,"div",7)(6,$8e,2,3,"ng-template",8),g()}t&2&&(W(r.pkgBasedInstall?-1:0),p(),Te("visible",r.displayDialog),f("styleClass",r.helpURL?"dlgFwcDialog dlgFwcDialog--medium dlgFwcDialog--height":"dlgFwcDialog dlgFwcDialog--medium dlgFwcDialog")("modal",!0)("closable",!1)("resizable",!0),p(3),W(r.helpURL?4:5))},dependencies:[Yt,Ee,pt,or,uh,gt,nz],styles:["[_ngcontent-%COMP%]:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divHelpLogo[_ngcontent-%COMP%]{text-align:center}.divHelpLogo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{display:block;width:180px;height:auto;margin:0 auto 1em}.divDevInfo[_ngcontent-%COMP%]{border-left:1px solid var(--fwcBlue);padding-left:1rem;font-family:Montserrat,Arial,sans-serif!important}.divDevInfo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none!important;color:#007ad9!important}.divDevInfo[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:auto;float:right}.divDevInfo[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:.5rem;line-height:1.5;font-size:.9rem}.divDevInfo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}.divDevInfo[_ngcontent-%COMP%]   .divData[_ngcontent-%COMP%]{color:var(--fwcDark)}.divDevInfo[_ngcontent-%COMP%]   .divData[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:1.7rem}.fwcVersion[_ngcontent-%COMP%]{font-family:monospace,sans-serif;text-align:center;font-size:.8em}.iframeContainer[_ngcontent-%COMP%]{height:100%;width:100%}.iframeContainer-loader[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.iframeContainer[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:100%;width:100%}.p-dialog-content[_ngcontent-%COMP%]   .divDevInfo[_ngcontent-%COMP%]{font-family:Montserrat,Arial,sans-serif!important}  .p-contextmenu .p-menuitem>.p-menuitem-content{box-shadow:0 1px 3px #0000004d!important;color:var(--inputColor);background:linear-gradient(to bottom,var(--fwcLightGreyGradient1) 0%,var(--fwcLightGreyGradient2) 100%)!important;border:1px solid var(--fwcGrey7)!important;border-radius:3px!important;font-family:Montserrat,Arial,sans-serif!important;font-size:.9rem!important}  .p-contextmenu .p-menuitem>.p-menuitem-content:hover{background:var(--fwcGrey7)!important}"]})}}return i})();var J8e=()=>({"padding-top":"20px"}),q8e=()=>({width:"2rem",height:"2rem"});function Y8e(i,n){i&1&&(m(0,"div",6)(1,"h6",7),P(2,"i",8),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"SNAPSHOTS_PANEL.HEADER")," "))}function X8e(i,n){i&1&&(m(0,"colgroup"),P(1,"col")(2,"col")(3,"col")(4,"col")(5,"col"),g()),i&2&&(p(),Wn("width","12rem"),p(2),Wn("width","4rem"),p(),Wn("width","10rem"))}function Q8e(i,n){i&1&&(m(0,"tr")(1,"th"),F(2),D(3,"translate"),g(),m(4,"th"),F(5),D(6,"translate"),g(),m(7,"th"),F(8),D(9,"translate"),g(),m(10,"th"),F(11),D(12,"translate"),g(),m(13,"th"),F(14),D(15,"translate"),g()()),i&2&&(p(2),$(N(3,5,"SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.0")),p(3),$(N(6,7,"SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.1")),p(3),$(N(9,9,"SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.2")),p(3),$(N(12,11,"SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.3")),p(3),$(N(15,13,"SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.4")))}function Z8e(i,n){i&1&&(m(0,"span"),P(1,"i",21),D(2,"translate"),F(3," \xA0 "),g()),i&2&&(p(),Q("pTooltip",N(2,1,"SNAPSHOTS_PANEL.INFO.INFO_INCOMPATIBLE")))}function eje(i,n){if(i&1&&(m(0,"tr",20)(1,"td"),v(2,Z8e,4,3,"span"),F(3),D(4,"date"),g(),m(5,"td"),F(6),g(),m(7,"td"),F(8),g(),m(9,"td"),F(10),D(11,"slice"),g(),m(12,"td"),F(13),g()()),i&2){let e=n.$implicit;f("pSelectableRow",e)("ngClass",e.compatible?"":"incompatible"),p(2),W(e.compatible?-1:2),p(),J(" ",ei(4,8,e.date,"dd/MM/yyyy HH:mm:ss")," "),p(3),J(" ",e.name," "),p(2),J(" ",e.version," "),p(2),J(" ",ei(11,11,e.schema,-7)," "),p(3),J(" ",e.comment," ")}}function tje(i,n){if(i&1){let e=L();m(0,"div",9)(1,"p-table",13),D(2,"fwcSortBy"),Oe("selectionChange",function(r){y(e);let o=u(2);return Re(o.selectedSnapshot,r)||(o.selectedSnapshot=r),w(r)}),v(3,X8e,6,6,"ng-template",14)(4,Q8e,16,15,"ng-template",2)(5,eje,14,14,"ng-template",15),g(),m(6,"div",3)(7,"div",16)(8,"button",17),D(9,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onDeleteSnapshot())}),g(),P(10,"span",18),m(11,"button",19),D(12,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onRestoreSnapshot())}),g()()()()}if(i&2){let e=u(2);p(),f("value",Ms(2,9,e.snapshots,"desc","date")),Te("selection",e.selectedSnapshot),f("scrollable",!0),p(6),st(Ae(17,J8e)),p(),Q("label",N(9,13,"SNAPSHOTS_PANEL.MANAGE.BTN_DELETE")),f("disabled",!e.selectedSnapshot||e.loadingData),p(3),Q("label",N(12,15,"SNAPSHOTS_PANEL.MANAGE.BTN_RESTORE")),f("disabled",!e.selectedSnapshot||e.loadingData||!(e.selectedSnapshot!=null&&e.selectedSnapshot.compatible))}}function ije(i,n){if(i&1){let e=L();m(0,"div",3)(1,"div",9)(2,"h5",10),F(3),D(4,"translate"),g()(),m(5,"div",11)(6,"button",12),D(7,"translate"),k("click",function(){y(e);let r=u();return w(r.onDoSnapshot())}),g()(),m(8,"div",9)(9,"h5",10),F(10),D(11,"translate"),g()(),v(12,tje,13,18,"div",9),g()}if(i&2){let e=u();p(3),J(" ",N(4,5,"SNAPSHOTS_PANEL.DO.HEADER")," "),p(3),Q("label",N(7,7,"SNAPSHOTS_PANEL.DO.BTN_DO")),f("disabled",e.loadingData),p(4),J(" ",N(11,9,"SNAPSHOTS_PANEL.MANAGE.HEADER")," "),p(2),W(e.snapshots!=null&&e.snapshots.length?12:-1)}}function nje(i,n){i&1&&(m(0,"div",4),P(1,"p-progressSpinner"),g()),i&2&&(p(),st(Ae(2,q8e)))}function rje(i,n){if(i&1&&(m(0,"div",4),P(1,"sts-fwc-message",22),g()),i&2){let e=u();p(),f("message",e.errorMessage)}}function oje(i,n){if(i&1){let e=L();m(0,"button",23),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var $8t=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b){super(o,t,e,d,b,C),this.itemSelectedService=e,this.appOptionsService=t,this.fwcUserService=r,this.appDialogPanelsService=o,this.utilService=s,this.confirmationService=a,this.messageService=l,this.translate=c,this.cd=d,this.inputDataService=h,this.fwcAuthService=_,this.router=C,this.fwcSnapshotService=I,this.store=b,this.translate.get("SNAPSHOTS_PANEL.TITLE").subscribe(E=>{this.createDialog(E,"fwci-copy")})}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}loadSnapshots(){this.loadingData=!0,this.errorMessage=null,this.utilService.fwcAPICall(this.fwcSnapshotService.getSnapshots.bind(this.fwcSnapshotService),this.fwcUserService.getActualFwSelectedCloud()).then(e=>{this.snapshots=e.data,(!this.snapshots||!this.snapshots.length)&&(this.errorMessage={type:"warning",title:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.WARN_NO_SNAPSHOTS.0"),text:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.WARN_NO_SNAPSHOTS.1")}),this.recenterDialog(),this.loadingData=!1}).catch(e=>{this.errorMessage={type:"error",title:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_LOADING.0"),text:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_LOADING.1")},this.loadingData=!1})}onDoSnapshot(e){let t={header:this.translate.instant("SNAPSHOTS_PANEL.MANAGE.DO_DIALOG.HEADER"),helpText:this.translate.instant("SNAPSHOTS_PANEL.MANAGE.DO_DIALOG.TEXT"),formControls:[{name:"name",label:this.translate.instant("SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.1"),type:"text",required:!0},{name:"separator",type:"separator"},{name:"comment",label:this.translate.instant("SNAPSHOTS_PANEL.MANAGE.TABLE_HEADER.4"),type:"text",required:!1}],onAccept:r=>{if(r){let o=$r(),s={name:r.name,comment:r.comment},a={channelId:o,textHeader:this.translate.instant("SNAPSHOTS_PANEL.INFO.DOING_SNAPSHOT.0"),textMessage:this.translate.instant("SNAPSHOTS_PANEL.INFO.DOING_SNAPSHOT.1"),apiCall:this.fwcSnapshotService.createSnapshot.bind(this.fwcSnapshotService),apiParams:[this.fwcUserService.getActualFwSelectedCloud(),o,s],onClose:d=>{this.loadingData=!1,d&&!d.error?this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("SNAPSHOTS_PANEL.SUCCESS.CREATE_OK")}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_CREATING.0"),detail:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_CREATING.1")}),this.loadSnapshots(),e&&this.onRestoreSnapshot(!0)}},l=this.utilService.createDynamicComponentRef(fo),c=l.instance;c.setDynamicComponentRef(l),this.communicationSubscription=c.socketEventEmitter.subscribe(d=>{d=="connected"&&(this.loadingData=!0,this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:a})),this.communicationSubscription.unsubscribe()}),c.checkConnection()}}};this.inputDataService.setInputData(t)}onDeleteSnapshot(){this.selectedSnapshot&&this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("SNAPSHOTS_PANEL.ASK.DELETE",{date:new Date(this.selectedSnapshot.date).toLocaleString()}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.loadingData=!0,this.utilService.fwcAPICall(this.fwcSnapshotService.deleteSnapshot.bind(this.fwcSnapshotService),this.fwcUserService.getActualFwSelectedCloud(),this.selectedSnapshot.id).then(e=>{this.snapshots=this.snapshots.filter(t=>t.id!=this.selectedSnapshot.id),this.snapshots.length||(this.errorMessage={type:"warning",title:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.WARN_NO_SNAPSHOTS.0"),text:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.WARN_NO_SNAPSHOTS.1")}),this.loadingData=!1,this.selectedSnapshot=null,this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("SNAPSHOTS_PANEL.SUCCESS.DELETE_OK")})},e=>{this.loadingData=!1,this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.DELETE_ERROR")})})}})}onRestoreSnapshot(e){if(this.selectedSnapshot){let t=$r();if(!e){this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("SNAPSHOTS_PANEL.ASK.BACKUP"),rejectVisible:!0,rejectLabel:this.translate.instant("SNAPSHOTS_PANEL.ASK.BTN_NO"),acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.onDoSnapshot(!0)},reject:()=>{this.onRestoreSnapshot(!0)}});return}let r={channelId:t,textHeader:this.translate.instant("SNAPSHOTS_PANEL.INFO.RESTORING_SNAPSHOT.0"),textMessage:this.translate.instant("SNAPSHOTS_PANEL.INFO.RESTORING_SNAPSHOT.1"),apiCall:this.fwcSnapshotService.restoreSnapshot.bind(this.fwcSnapshotService),apiParams:[this.fwcUserService.getActualFwSelectedCloud(),this.selectedSnapshot.id,t],showStatusMessage:!0,onClose:a=>{a&&!a.error?(this.fwcUserService.setSelectedFwCloud(a.data.id,a.data.name),this.fwcAuthService.setSelectedFwCloud(a.data.id,a.data.name),this.hideDialog(),this.reloadCurrentRoute(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("SNAPSHOTS_PANEL.SUCCESS.RESTORE_OK")})):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_RESTORING.0"),detail:this.translate.instant("SNAPSHOTS_PANEL.ERRORS.ERROR_RESTORING.1")}),this.loadingData=!1,this.selectedSnapshot=null}},o=this.utilService.createDynamicComponentRef(fo),s=o.instance;s.setDynamicComponentRef(o),this.communicationSubscription=s.socketEventEmitter.subscribe(a=>{a=="connected"&&this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:r}),this.communicationSubscription.unsubscribe()}),s.checkConnection()}}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}onCancel(){this.hideDialog()}onShowDialog(){this.loadSnapshots()}onHideDialog(){this.snapshots=null,this.errorMessage=null}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(at),S(St),S(ft),S(Jt),S(Kt),S(Ye),S(we),S(Cr),S(ea),S(ct),S(lb),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-snapshots-panel"]],features:[et([lb]),Se],decls:7,vars:6,consts:[["dlgSnapshotsDialog",""],["styleClass","dlgFwcDialog","modal","true",3,"visibleChange","onShow","onHide","visible","closable","resizable"],["pTemplate","header"],[1,"grid"],[1,"col-12","fwc-centered"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-copy","fwcOrange"],[1,"col-12"],[1,"fwcBlue","botBorder"],[1,"col-12","grid-nogutter","fwc-centered"],["type","button","pButton","","icon","fa fa-vault",1,"p-button-success",3,"click","disabled","label"],["styleClass","tabSnapshots","selectionMode","single","scrollHeight","15rem",3,"selectionChange","value","selection","scrollable"],["pTemplate","colgroup"],["pTemplate","body"],[1,"col-12","fwc-right"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"click","disabled","label"],[1,"fwcSepShort"],["type","button","pButton","","icon","fa fa-undo",1,"p-button-primary",3,"click","disabled","label"],[3,"pSelectableRow","ngClass"],["tooltipPosition","top","hideDelay","500",1,"fa","fa-exclamation","fwcRed",3,"pTooltip"],[3,"message"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(r.onShowDialog())})("onHide",function(){return y(o),w(r.onHideDialog())}),v(2,Y8e,5,3,"ng-template",2)(3,ije,13,11,"div",3)(4,nje,2,3,"div",4)(5,rje,2,1,"div",4)(6,oje,2,4,"ng-template",5),g()}t&2&&(Te("visible",r.displayDialog),f("closable",!1)("resizable",!0),p(3),W(r.snapshots?3:-1),p(),W(r.loadingData?4:-1),p(),W(r.errorMessage?5:-1))},dependencies:[je,Yt,Ee,pt,or,cn,sr,Tp,Fn,aw,cc,gt,PS],styles:[`.tabSnapshots .incompatible{text-decoration:line-through;font-style:italic}
`],encapsulation:2})}}return i})();var rz=No(Gc());var sje=["fwcLogComponent"],aje=["fwcMessageComponent"],lje=()=>({width:"2rem",height:"2rem"});function cje(i,n){i&1&&(m(0,"h6",9),P(1,"i",10),F(2),D(3,"translate"),g()),i&2&&(p(2),J(" ",N(3,1,"LOG_PANEL.HEADER"),""))}function dje(i,n){if(i&1&&(m(0,"div",4)(1,"div",5),P(2,"sts-fwc-message",11,0),g()(),m(4,"div"),P(5,"sts-fwc-log",12,1),g()),i&2){let e=u();Wn("display",e.options!=null&&e.options.showStatusMessage&&e.statusMessage?"block":"none"),p(2),f("message",e.statusMessage),p(2),Wn("display",e.options!=null&&e.options.showStatusMessage?"none":"block"),p(),f("height","15rem")}}function pje(i,n){i&1&&P(0,"p-progressSpinner"),i&2&&st(Ae(2,lje))}function uje(i,n){if(i&1&&(P(0,"p-message",14),D(1,"translate"),D(2,"translate")),i&2){let e=u(2);f("severity",e.operationResult!=null&&e.operationResult.error?"error":"success")("text",e.operationResult!=null&&e.operationResult.error?N(1,2,"GLOBALS.MSG_OP_RESULT.PROCESS_ERROR"):N(2,4,"GLOBALS.MSG_OP_RESULT.PROCESS_OK"))}}function hje(i,n){if(i&1&&(m(0,"div",7),v(1,pje,1,3,"p-progressSpinner",13)(2,uje,3,6,"p-message",14),g()),i&2){let e=u();p(),W(e.loadingData?1:2)}}function fje(i,n){if(i&1){let e=L();m(0,"button",15),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",!e.allowClose)}}var oz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_){super(e,t,o,c,h,_),this.appDialogPanelsService=e,this.appOptionsService=t,this.fwcEventService=r,this.itemSelectedService=o,this.utilService=s,this.messageService=a,this.confirmationService=l,this.cd=c,this.translate=d,this.store=h,this.router=_,this.loadingData=!1,this.onClose=new X,this.createDialog(this.translate.instant("ITEM_BATCH.PANEL_TITLE"),"fwci-ipobjects",ri.BLOCK_UI_PANEL)}ngOnInit(){this.appDialogPanelsService.searchAndShowDialog().pipe(yt(()=>this.alive)).subscribe(e=>{e.uuid===this.dialogUUID&&this.showAndBlockUI(e.data)})}ngOnDestroy(){super.ngOnDestroy()}waitWSMessages(){return new Promise((t,r)=>{this.options.channelId?(this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(o=>{let s=new bo(o);s&&s.payload?(s.payload.type===Ne.MSG_END?t(s):(s.payload.type===Ne.MSG_ERROR&&(this.operationResult={error:!0},this.statusMessage={type:"error",text:this.translate.instant("GLOBALS.MSG_OP_RESULT.PROCESS_ERROR")}),this.resetTimer()),this.options.showStatusMessage?this.fwcMessageComponent&&this.fwcMessageComponent.changeStatus(s.payload.message,this.translate.instant("ITEM_BATCH.TABLE_HEADER.1")+":"):this.log&&this.log.addNewMessage(s)):(this.addMessageToLog(this.translate.instant("LOG_PANEL.MALFORMED_MSG"),Ne.MSG_ERROR),this.operationResult={error:!0},this.stopProcess())}),this.utilService.ioListenOnLogEvent(this.options.channelId)):t(null)})}doApiCall(){return new Promise((t,r)=>{this.options.apiCall?(Array.isArray(this.options.apiParams)||(this.options.apiParams=[]),this.options.showStatusMessage&&(this.statusMessage={type:"loading",text:this.translate.instant("GLOBALS.MSG_OP_RESULT.OPERATION_IN_PROGRESS")}),this.utilService.fwcAPICall(this.options.apiCall,...this.options.apiParams).then(o=>{t(o),setTimeout(()=>{this.allowClose=!0,this.cd.detectChanges()},150)}).catch(o=>{o.error.fwcErr==8001||o.error.fwcErr==8002?r(o.error):r(o)})):t({})})}showAndBlockUI(e){if(!e)return;this.options=e,this.operationResult=void 0,this.displayDialog=!0,this.cd.markForCheck(),this.cd.detectChanges(),this.startProcess(),this.resetTimer();let t=vE(this.waitWSMessages(),this.doApiCall());this.mainSubscription=t.subscribe({next:([r,o])=>{if(o instanceof pd){let s=this.options.defaultDownloadFilename||"fwcloud-download";o.headers.get("Content-Disposition")&&(s=o.headers.get("Content-Disposition").split("filename=")[1]),s=s.replace(/\"/g,""),(0,rz.saveAs)(o.body,s)}this.operationResult=o,this.addMessageToLog(this.translate.instant("LOG_PANEL.MSG_SUCCESS"),Ne.MSG_OK),this.statusMessage={type:"success",text:this.translate.instant("GLOBALS.MSG_OP_RESULT.PROCESS_OK")},this.stopProcess()},error:r=>{this.operationResult={error:!0,data:r},this.addMessageToLog(this.translate.instant("LOG_PANEL.MSG_ERROR"),Ne.MSG_ERROR),this.stopProcess()}})}resetTimer(){this.timeoutTimer&&clearTimeout(this.timeoutTimer)}startProcess(){this.loadingData=!0,this.log&&this.log.startDataLoad()}stopProcess(){this.allowClose=!0,this.loadingData=!1,clearTimeout(this.timeoutTimer),this.log&&this.log.stopDataLoad()}onShowDialog(){this.allowClose=!1}hideDialog(){if(this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.mainSubscription&&this.mainSubscription.unsubscribe(),this.log&&this.log.clearMessages(),this.options){if(this.options.onClose)try{this.options.onClose(this.operationResult)}catch{}this.options=null}clearTimeout(this.timeoutTimer),this.onClose&&this.onClose.emit(this.operationResult),this.operationResult=null,super.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(dn),S(ht),S(ft),S(Kt),S(Jt),S(we),S(Ye),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-block-ui-panel"]],viewQuery:function(t,r){if(t&1&&(le(sje,5),le(aje,5)),t&2){let o;te(o=ie())&&(r.log=o.first),te(o=ie())&&(r.fwcMessageComponent=o.first)}},outputs:{onClose:"onClose"},features:[Se],decls:14,vars:9,consts:[["fwcMessageComponent",""],["fwcLogComponent",""],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"onShow","closable","modal","visible"],["pTemplate","header"],[1,"grid"],[1,"col-12"],[1,"divIconMessage","divIconMessage--condensed"],[1,"fwc-centered"],["pTemplate","footer"],[1,"dlgFwcDialog-header"],[1,"fa","fa-info","fwcOrange"],[3,"message"],[3,"height"],[3,"style"],[3,"severity","text"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",2),k("onShow",function(){return r.onShowDialog()}),v(1,cje,4,3,"ng-template",3),m(2,"div",4)(3,"div",5)(4,"div",6),P(5,"i")(6,"br"),m(7,"h6"),F(8),g(),m(9,"p"),F(10),g()()()(),v(11,dje,7,6)(12,hje,3,1,"div",7)(13,fje,2,4,"ng-template",8),g()),t&2&&(f("closable",!1)("modal",!0)("visible",r.displayDialog),p(5),ce((r.options==null?null:r.options.headerIcon)||"fa fa-3x fa-lock fwcBlue"),p(3),$(r.options==null?null:r.options.textHeader),p(2),$(r.options==null?null:r.options.textMessage),p(),W(r.options!=null&&r.options.channelId?11:12))}})}}return i})();var Tu=No(_c());var sz="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var qF=(i=21)=>{let n="",e=crypto.getRandomValues(new Uint8Array(i|=0));for(;i--;)n+=sz[e[i]&63];return n};var mje=["menuNodesSelector"],gje=i=>({"divInterfacesEditor--disabled":i}),_je=i=>({divNodeSpecial:i}),Cje=(i,n)=>({spanNodeEditing:i,spanNodeDisabled:n}),az=i=>({fwcInvalid:i});function Ije(i,n){i&1&&(m(0,"div",8)(1,"div",9),P(2,"i",10)(3,"br"),m(4,"h6"),F(5),D(6,"translate"),g(),m(7,"p"),F(8),D(9,"translate"),g()()()),i&2&&(p(5),$(N(6,2,"FW.MSG_AUTODISCOVER.LOADING.HEADER")),p(3),$(N(9,4,"FW.MSG_AUTODISCOVER.LOADING.TEXT")))}function yje(i,n){if(i&1){let e=L();m(0,"span",12)(1,"button",31),D(2,"translate"),D(3,"translate"),k("click",function(){y(e);let r=u(4);return w(r.onResetTree())}),g()()}if(i&2){let e=u(4);p(),Q("pTooltip",N(2,3,"IF_EDITOR.HEADER.RESET_TREE_TOOLTIP")),Q("label",N(3,5,"IF_EDITOR.HEADER.RESET_TREE")),f("disabled",!(!(e.options==null||e.options.discoveredIfs==null)&&e.options.discoveredIfs.length))}}function wje(i,n){if(i&1){let e=L();m(0,"span",12)(1,"button",32),D(2,"translate"),k("click",function(){y(e);let r=u(4);return w(r.onDiscoverInterfacesHandler())}),g()()}i&2&&(p(),Q("label",N(2,1,"FW.MSG_FW_EDITION.DISCOVER_IF_SHORT")))}function vje(i,n){i&1&&(m(0,"div",33)(1,"div",8)(2,"h6",13),F(3),D(4,"translate"),g()()()),i&2&&(p(3),J(" ",N(4,1,"IF_EDITOR.TREE.HEADER")," "))}function bje(i,n){i&1&&(m(0,"span"),P(1,"i",42),g())}function Sje(i,n){i&1&&(P(0,"i",39),D(1,"translate")),i&2&&(Q("pTooltip",N(1,2,"IF_EDITOR.TREE.SPECIAL_TOOLTIP")),f("showDelay",500))}function Eje(i,n){i&1&&(P(0,"i",45),D(1,"translate")),i&2&&Q("pTooltip",N(1,1,"IF_EDITOR.PROPS.INSTALL"))}function Aje(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(3).$implicit,t=u(5);p(),J(" ",t.getFirewallName(e.data.installFirewallUUIDs)," ")}}function xje(i,n){i&1&&(m(0,"span",46),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"IF_EDITOR.TREE.NODE_INST")," "))}function Tje(i,n){i&1&&P(0,"i",47)}function Oje(i,n){if(i&1){let e=L();m(0,"span",44),k("click",function(r){y(e);let o=u(2).$implicit,s=u(5);return w(s.showFirewallsSelector(r,o))}),v(1,Eje,2,3,"i",45)(2,Aje,2,1,"span")(3,xje,3,3,"span",46)(4,Tje,1,0,"i",47),g()}if(i&2){let e=u(2).$implicit,t=u(5);p(),W(!(e.data==null||e.data.installFirewallUUIDs==null)&&e.data.installFirewallUUIDs.size?1:-1),p(),W(!(e.data==null||e.data.installFirewallUUIDs==null)&&e.data.installFirewallUUIDs.size?2:3),p(2),W((e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_ADDRESS?4:-1)}}function Rje(i,n){if(i&1&&v(0,Oje,5,3,"span",43),i&2){let e=u().$implicit,t=u(5);W(!(e.data==null||e.data.installFirewallUUIDs==null)&&e.data.installFirewallUUIDs.size||e.key==t.hoveredTreeNodeKey&&(e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_ADDRESS||e.key==t.clickedTreeNodeKey?0:-1)}}function Pje(i,n){i&1&&(P(0,"i",45),D(1,"translate")),i&2&&Q("pTooltip",N(1,1,"IF_EDITOR.PROPS.INSTALL"))}function Dje(i,n){if(i&1){let e=L();m(0,"i",49),D(1,"translate"),k("click",function(r){y(e);let o=u(2).$implicit,s=u(5);return w(s.onSetInstallAddress(r,o))}),g()}i&2&&(Q("pTooltip",N(1,2,"IF_EDITOR.TREE.SET_INSTALL_TOOLTIP")),f("showDelay",700))}function Fje(i,n){if(i&1&&v(0,Pje,2,3,"i",45)(1,Dje,2,4,"i",48),i&2){let e=u().$implicit,t=u(5);W(!(e.data==null||e.data.installFirewallUUIDs==null)&&e.data.installFirewallUUIDs.size?0:-1),p(),W(e.key==t.hoveredTreeNodeKey&&!(!(e.data==null||e.data.installFirewallUUIDs==null)&&e.data.installFirewallUUIDs.size)&&(e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_ADDRESS?1:-1)}}function kje(i,n){if(i&1){let e=L();m(0,"i",50),D(1,"translate"),k("click",function(r){y(e);let o=u().$implicit,s=u(5);return w(s.onShowNodeInfo(r,o))}),g()}i&2&&(Q("pTooltip",N(1,2,"IF_EDITOR.TREE.EDIT_TOOLTIP")),f("showDelay",700))}function Nje(i,n){i&1&&(m(0,"span"),F(1,"..."),g())}function Lje(i,n){if(i&1&&(m(0,"span",51)(1,"span")(2,"p"),F(3),D(4,"translate"),g()(),m(5,"span"),F(6),D(7,"slice"),v(8,Nje,2,0,"span"),g()()),i&2){let e=u(2).$implicit;p(3),$(N(4,3,"IF_EDITOR.TREE.LBL")),p(3),J(" ",Ms(7,5,e.data.labelName,0,20)," "),p(2),W(e.data.labelName.length>20?8:-1)}}function Mje(i,n){if(i&1&&(m(0,"span",51)(1,"span")(2,"p"),F(3,"mac"),g()(),m(4,"span"),F(5),g()()),i&2){let e=u(2).$implicit;p(5),J(" ",e.data.mac," ")}}function Vje(i,n){if(i&1&&v(0,Lje,9,9,"span",51)(1,Mje,6,1,"span",51),i&2){let e=u().$implicit;W(e.data!=null&&e.data.labelName?0:-1),p(),W(e.data!=null&&e.data.mac?1:-1)}}function Bje(i,n){if(i&1&&(m(0,"span",52)(1,"span")(2,"p"),F(3),g()(),m(4,"span"),F(5),g()()),i&2){let e=u(2).$implicit,t=u(5);f("ngClass",e.data.ip_version==4?"pillInfo":""),p(3),J("V",e.data.ip_version,""),p(2),J(" ",t.addressNetmaskToCIDRAddress(e.data.address,e.data.netmask)," ")}}function Uje(i,n){if(i&1&&v(0,Bje,6,3,"span",52),i&2){let e=u().$implicit;W(e.data!=null&&e.data.address?0:-1)}}function jje(i,n){if(i&1){let e=L();m(0,"div",36),k("mouseenter",function(){let r=y(e).$implicit,o=u(5);return w(o.onMouseEnter(r))})("mouseleave",function(){let r=y(e).$implicit,o=u(5);return w(o.onMouseLeave(r))}),v(1,bje,2,0,"span"),m(2,"span",37),P(3,"i",38),D(4,"fwcIcon"),v(5,Sje,2,4,"i",39)(6,Rje,1,1)(7,Fje,2,2)(8,kje,2,4,"i",40),m(9,"span",41),F(10),g(),v(11,Vje,2,2)(12,Uje,1,1),g()()}if(i&2){let e=n.$implicit,t=u(5);f("ngClass",ne(13,_je,e.data==null?null:e.data.special)),p(),W(e.key===t.editingTreeNodeKey?1:-1),p(),f("ngClass",Qe(15,Cje,e.key==t.editingTreeNodeKey,e.data==null?null:e.data.id)),p(),ce(N(4,11,e.data==null?null:e.data.type)),p(2),W(e.data!=null&&e.data.special&&(e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_INTERFACE_FIREWALL&&!(e.data!=null&&e.data.id)?5:-1),p(),W((t.firewallsSelectorOptions==null?null:t.firewallsSelectorOptions.length)>1?6:7),p(2),W(e.key==t.hoveredTreeNodeKey&&!(e.data!=null&&e.data.special)?8:-1),p(2),$(e.label),p(),W((e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_INTERFACE_FIREWALL||(e.data==null?null:e.data.type)===t.ObjectTypes.OBJ_INTERFACE_HOST?11:12)}}function Gje(i,n){if(i&1){let e=L();m(0,"p-tree",34,3),Oe("selectionChange",function(r){y(e);let o=u(4);return Re(o.selectedTreeNodes,r)||(o.selectedTreeNodes=r),w(r)}),k("onNodeSelect",function(r){y(e);let o=u(4);return w(o.onNodeSelect(r))})("onNodeUnselect",function(r){y(e);let o=u(4);return w(o.onNodeUnselect(r))}),v(2,jje,13,18,"ng-template",35),g()}if(i&2){let e=u(4);f("value",e.filteredTreeNodes)("propagateSelectionUp",!1)("propagateSelectionDown",!1),Te("selection",e.selectedTreeNodes)}}function Hje(i,n){i&1&&(m(0,"div",28),P(1,"i",53)(2,"br"),m(3,"h6"),F(4),D(5,"translate"),g(),m(6,"p"),F(7),D(8,"translate"),g()()),i&2&&(p(4),$(N(5,2,"IF_EDITOR.TREE.MSG_NO_DATA")),p(3),$(N(8,4,"IF_EDITOR.TREE.TEXT_NO_DATA")))}function Wje(i,n){i&1&&(m(0,"span",55)(1,"span")(2,"p"),F(3),D(4,"translate"),g()()()),i&2&&(p(3),$(N(4,1,"IF_EDITOR.PROPS.EXISTS")))}function zje(i,n){i&1&&(m(0,"span",55)(1,"span")(2,"p"),P(3,"i",56),D(4,"translate"),F(5),D(6,"translate"),g()()()),i&2&&(p(3),Q("pTooltip",N(4,2,"IF_EDITOR.PROPS.INFO_SPECIAL")),p(2),J(" ",N(6,4,"IF_EDITOR.PROPS.SPECIAL")," "))}function Kje(i,n){if(i&1&&(m(0,"span",54),F(1," \xA0 "),P(2,"i",38),D(3,"fwcIcon"),F(4),v(5,Wje,5,3,"span",55)(6,zje,7,6,"span",55),g()),i&2){let e,t=u(5);p(2),ce(N(3,6,t.formModel.get("type").value)),p(2),J(" ",(e=t.treeSearchByNodeKey(t.editingTreeNodeKey))==null?null:e.label," \xA0 "),p(),W(t.formModel.get("id").value?5:-1),p(),W(t.formModel.get("special").value?6:-1)}}function $je(i,n){if(i&1&&(m(0,"div",33)(1,"div",8)(2,"h6",13),F(3),D(4,"translate"),v(5,Kje,7,8,"span",54),g()()()),i&2){let e=u(4);p(3),J(" ",N(4,2,"IF_EDITOR.PROPS.HEADER")," "),p(2),W(e.formModel&&e.editingTreeNodeKey?5:-1)}}function Jje(i,n){if(i&1){let e=L();m(0,"div",63)(1,"div",60)(2,"span",57)(3,"input",64),k("keyup",function(){y(e);let r=u(5);return w(r.onNodeFormInputType())}),g(),m(4,"label",65),F(5),D(6,"translate"),g()()()(),m(7,"div",63)(8,"div",60)(9,"span",57)(10,"input",66),k("keyup",function(){y(e);let r=u(5);return w(r.onNodeFormInputType())}),g(),m(11,"label",67),F(12),D(13,"translate"),g()()()()}if(i&2){let e,t,r=u(5);p(3),f("ngClass",ne(8,az,((e=r.formModel.get("address"))==null?null:e.invalid)&&((e=r.formModel.get("address"))==null?null:e.touched))),p(2),$(N(6,4,"ITEM_PANEL.FIELDS.ADDRESS")),p(5),f("ngClass",ne(10,az,((t=r.formModel.get("netmask"))==null?null:t.invalid)&&((t=r.formModel.get("netmask"))==null?null:t.touched))),p(2),$(N(13,6,"ITEM_PANEL.FIELDS.MASK"))}}function qje(i,n){if(i&1){let e=L();m(0,"div",63)(1,"div",60)(2,"span",57)(3,"input",68),k("keyup",function(){y(e);let r=u(5);return w(r.onNodeFormInputType())}),g(),m(4,"label",69),F(5),D(6,"translate"),g()()()(),m(7,"div",63)(8,"div",60)(9,"span",57)(10,"input",70),k("keyup",function(){y(e);let r=u(5);return w(r.onNodeFormInputType())}),g(),m(11,"label",71),F(12),D(13,"translate"),g()()()()}i&2&&(p(5),$(N(6,2,"ITEM_PANEL.FIELDS.LABEL")),p(7),$(N(13,4,"ITEM_PANEL.FIELDS.MAC")))}function Yje(i,n){if(i&1){let e=L();m(0,"form",29)(1,"div",8)(2,"span",57)(3,"input",58),k("keyup",function(){y(e);let r=u(4);return w(r.onNodeFormInputType())}),g(),m(4,"label",59),F(5),D(6,"translate"),g()()(),v(7,Jje,14,12)(8,qje,14,6),m(9,"div",8)(10,"div",60)(11,"span",57)(12,"input",61),k("keyup",function(){y(e);let r=u(4);return w(r.onNodeFormInputType())}),g(),m(13,"label",62),F(14),D(15,"translate"),g()()()()()}if(i&2){let e,t=u(4);f("formGroup",t.formModel),p(5),$(N(6,4,"ITEM_PANEL.FIELDS.NAME")),p(2),W(((e=t.formModel.get("type"))==null?null:e.value)===t.ObjectTypes.OBJ_ADDRESS?7:8),p(7),$(N(15,6,"ITEM_PANEL.FIELDS.COMMENTS"))}}function Xje(i,n){i&1&&(m(0,"div",28),P(1,"i",72)(2,"br"),m(3,"h6"),F(4),D(5,"translate"),g(),m(6,"p"),F(7),D(8,"translate"),g()()),i&2&&(p(4),$(N(5,2,"IF_EDITOR.PROPS.MSG_NO_OBJ")),p(3),$(N(8,4,"IF_EDITOR.PROPS.TEXT_NO_OBJ")))}function Qje(i,n){i&1&&(m(0,"span",74),F(1),D(2,"translate"),g()),i&2&&(p(),$(N(2,1,"IF_EDITOR.PROPS.SAVED")))}function Zje(i,n){if(i&1&&(m(0,"div",73),v(1,Qje,3,3,"span",74),g()),i&2){let e=u(4);p(),W(e.nodeSaved?1:-1)}}function e7e(i,n){if(i&1){let e=L();m(0,"div",8)(1,"div",11)(2,"span",12)(3,"h6",13),P(4,"i",14),F(5),D(6,"translate"),g()(),m(7,"span",12)(8,"button",15),D(9,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onChangeSelected(!0))}),g()(),m(10,"span",12)(11,"button",16),D(12,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onChangeSelected(!1))}),g()(),v(13,yje,4,7,"span",12)(14,wje,3,3,"span",12),P(15,"span",17),m(16,"span",12)(17,"h6",13),P(18,"i",18),F(19),D(20,"translate"),g()(),m(21,"span",12)(22,"p-checkbox",19),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.selectedIpVersions,r)||(o.selectedIpVersions=r),w(r)}),k("onChange",function(){y(e);let r=u(3);return w(r.onChangeFilters())}),g()(),m(23,"span",12)(24,"p-checkbox",20),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.selectedIpVersions,r)||(o.selectedIpVersions=r),w(r)}),k("onChange",function(){y(e);let r=u(3);return w(r.onChangeFilters())}),g()(),P(25,"span",21),m(26,"input",22,2),D(28,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.searchPattern,r)||(o.searchPattern=r),w(r)}),k("keyup",function(r){y(e);let o=u(3);return w(o.onSearchType(r.target.value))}),g(),m(29,"button",23),k("click",function(r){y(e);let o=He(27);u(3);let s=He(4);return w(s.toggle(r,o))}),g()()(),m(30,"div",24)(31,"p-card",25),v(32,vje,5,3,"ng-template",26)(33,Gje,3,4,"p-tree",27)(34,Hje,9,6,"div",28),g()(),m(35,"div",24)(36,"p-card",25),v(37,$je,6,4,"ng-template",26)(38,Yje,16,8,"form",29)(39,Xje,9,6,"div",28)(40,Zje,2,1,"ng-template",30),g()()}if(i&2){let e=u(3);p(5),J(" ",N(6,14,"IF_EDITOR.HEADER.SELECT")," "),p(3),Q("label",N(9,16,"IF_EDITOR.HEADER.ALL")),p(3),Q("label",N(12,18,"IF_EDITOR.HEADER.NONE")),p(2),W(e.options!=null&&e.options.hideActionButtons?-1:13),p(),W(e.options!=null&&e.options.hideActionButtons?-1:14),p(5),J(" ",N(20,20,"IF_EDITOR.HEADER.FILTER")," "),p(3),f("value",4),Te("ngModel",e.selectedIpVersions),p(2),f("value",6),Te("ngModel",e.selectedIpVersions),p(2),Q("placeholder",N(28,22,"IF_EDITOR.HEADER.FILTER_TEXT")),Te("ngModel",e.searchPattern),p(7),W(e.filteredTreeNodes!=null&&e.filteredTreeNodes.length?33:34),p(5),W(e.formModel&&e.editingTreeNodeKey?38:39)}}function t7e(i,n){if(i&1){let e=L();m(0,"div",8)(1,"div",9),P(2,"i",75)(3,"br"),m(4,"h6"),F(5),D(6,"translate"),g(),m(7,"p"),F(8),D(9,"translate"),g(),m(10,"p")(11,"button",32),D(12,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onDiscoverInterfacesHandler())}),g()()()()}i&2&&(p(5),$(N(6,3,"FW.MSG_AUTODISCOVER.HEADER")),p(3),$(N(9,5,"FW.MSG_AUTODISCOVER.TEXT")),p(3),Q("label",N(12,7,"FW.MSG_FW_EDITION.DISCOVER_IF")))}function i7e(i,n){if(i&1&&v(0,e7e,41,24)(1,t7e,13,9,"div",8),i&2){let e=u(2);W(e.treeNodes!=null&&e.treeNodes.length?0:1)}}function n7e(i,n){if(i&1&&(m(0,"div",5),v(1,Ije,10,6,"div",8)(2,i7e,2,1),g()),i&2){let e=u();f("ngClass",ne(2,gje,e.disabled)),p(),W(e.loading?1:2)}}var lz=(()=>{class i{set options(e){e&&(this._options=e,this.parseOptions(e))}get options(){return this._options}set inputNodes(e){this.buildTree(e)}constructor(e,t,r,o){this.formBuilder=e,this.confirmationService=t,this.translate=r,this.cd=o,this.onInstallModified=new X,this.onIpObjectModified=new X,this.onStartAutodiscover=new X,this.selectedIpVersions=[4,6],this.searchUpdated=new Ue,this.formInputUpdated=new Ue,this.nodeSaved=!1,this.ObjectTypes=O,this.alive=!0}ngOnInit(){this.searchUpdated.asObservable().pipe(ef(300),qc(),yt(()=>this.alive)).subscribe(()=>{this.filterTree()}),this.formInputUpdated.asObservable().pipe(ef(300),yt(()=>this.alive)).subscribe(()=>{this.onSaveNode()})}ngOnDestroy(){this.alive=!1}getFirewallName(e){let t=[];if(this._options)return e&&e.forEach(r=>{let o=this._options.firewalls.find(s=>s.firewallUUID&&s.firewallUUID===r);o&&t.push(o.firewall_name)}),t.join("/")}addFirewall(e){if(this._options&&e){let t;Array.isArray(this._options.firewalls)?t=this._options.firewalls.find(r=>r.firewallUUID&&r.firewallUUID===e.firewallUUID):this._options.firewalls=[],t||(this._options.firewalls.push(oe({},e)),this.firewallsSelectorOptions||(this.firewallsSelectorOptions=[]),this.firewallsSelectorOptions.push({id:e.firewallUUID,label:e.firewall_name||this.translate.instant("IF_EDITOR.TREE.UNNAMED_NODE"),command:r=>this.onChangeFirewallsSelectorOptions(r)})),this.cd.detectChanges()}}updateFirewallName(e,t){if(this._options&&Array.isArray(this._options.firewalls)&&Array.isArray(this.firewallsSelectorOptions)){let r=this._options.firewalls.find(s=>s.firewallUUID&&s.firewallUUID===e),o=this.firewallsSelectorOptions.find(s=>s.id&&s.id===e);r&&o&&(r.firewall_name=t,o.label=t,this.cd.detectChanges())}}deleteFirewall(e){if(this._options&&Array.isArray(this._options.firewalls)){let t=this._options.firewalls.findIndex(o=>o.firewallUUID&&o.firewallUUID===e),r=this.firewallsSelectorOptions.findIndex(o=>o.id&&o.id===e);t!==-1&&r!==-1&&(this._options.firewalls.splice(t,1),this.firewallsSelectorOptions.splice(r,1),Array.isArray(this.treeNodes)&&(this.treeNodes.forEach(o=>{o.data.installFirewallUUIDs&&o.data.installFirewallUUIDs.delete(e),Array.isArray(o.children)&&o.children.forEach(s=>{s.data.installFirewallUUIDs&&s.data.installFirewallUUIDs.delete(e)})}),this.filterTree()))}}getInterfacesFromTree(){let e=[];return Array.isArray(this.treeNodes)&&this.treeNodes.forEach(t=>{let r={interfaceUUID:t.data.interfaceUUID,id:t.data.id,id_node:t.data.id_node,firewall:t.data.firewall,cluster:t.data.cluster,type:t.data.type,interface_type:t.data.type,labelName:t.data.labelName,mac:t.data.mac,comment:t.data.comment,name:t.label,ipobjs:[]};Array.isArray(t.children)&&t.children.forEach(o=>{r.ipobjs.push({ipObjUUID:o.data.ipObjUUID,id:o.data.id,name:o.label,id_node:o.data.id_node,address:o.data.address,comment:o.data.comment,ip_version:o.data.ip_version,netmask:o.data.netmask,type:O.OBJ_ADDRESS,port:o.data.port})}),e.push(r)}),e}getObjectFromTreeNode(e){let t=null;return e&&(t=e.data,t.name=e.label),t}processOptions(e){e&&(this._options=e,this.parseOptions(e))}parseOptions(e){if(e&&e.firewalls){let t=this.getInterfacesFromTree();Array.isArray(e.existingIfs)&&e.existingIfs.forEach(s=>{t.find(l=>l.name===s.name)||t.push(s)});let r=s=>{let a=[];try{if(Array.isArray(s))for(let l=0;l<s.length;l++){let c=s[l],d,h,[_,C]=c.split("/"),I=Tu.parse(_);if(I.kind()=="ipv4")d=4,h="/"+C;else if(I.kind()=="ipv6")d=6,h="/"+C;else throw Error(_);a.push({address:_,netmask:h,ip_version:d})}}catch{return[]}return a},o=s=>{let a,l=Pt.netmaskCIDRRegexp.exec(s);return l?a=parseInt(l[1]):a=Tu.IPv4.parse(s).prefixLengthFromSubnetMask(),a};this.firewallsSelectorOptions=[],e.firewalls.forEach(s=>{this.firewallsSelectorOptions.push({id:s.firewallUUID,label:s.firewall_name||this.translate.instant("IF_EDITOR.TREE.UNNAMED_NODE"),command:a=>this.onChangeFirewallsSelectorOptions(a)})}),e.discoveredIfs.forEach(s=>{let a=t.find(d=>d.name===s.name);if(!a){let d=t.push({interfaceUUID:qF(),id:void 0,comment:void 0,ipobjs:[],labelName:void 0,name:s.name,mac:s.mac,type:O.OBJ_INTERFACE_FIREWALL});a=t[d-1]}let l=[];l=r(s.ipv4).concat(r(s.ipv6)),Array.isArray(a.ipobjs)||(a.ipobjs=[]);let c={4:0,6:0};for(let d=0;d<l.length;d++){let h=l[d],_=!1,C,I,b,E=new Set;C=h.netmask,(!C||!parseInt(C.substr(1)))&&(C=h.ip_version==4?"/32":"/128"),I=parseInt(C.substr(1));for(let R=0;R<a.ipobjs.length&&!_;R++){let T=a.ipobjs[R],A=Tu.parse(T.address).toNormalizedString();h.ip_version==T.ip_version&&Tu.parse(h.address).toNormalizedString()===A&&!E.has(A)&&(b=o(T.netmask),I===b&&(_=!0,E.add(A)))}if(!_){let R="",T="";if(s.name!=="lo"&&!/^tun\d+$/.test(s.name)&&!/^wg\d+$/.test(s.name))if(!e.isCluster)R=c[h.ip_version]?":"+(c[h.ip_version]-1):"";else{s.suffixToAdd&&(T="_"+s.suffixToAdd);let A=o(C);if((A===24||A===32)&&h.ip_version===4)try{let U=Tu.IPv4.parse(h.address);R=c[h.ip_version]?"_F"+U.octets[3]:T}catch{}else R=c[h.ip_version]?"_F"+c[h.ip_version]:T}a.ipobjs.push({ipObjUUID:a.interfaceUUID+qF(),id:void 0,id_node:void 0,address:h.address,comment:"",name:s.name+R,ip_version:h.ip_version,netmask:C,type:O.OBJ_ADDRESS,port:void 0})}c[h.ip_version]++}}),this.buildTree(t)}}buildTree(e){let t=new Map,r=new Map;if(e&&Array.isArray(e)){let s=1;this.treeNodes=[],this.filteredTreeNodes=[];let a=[];this.selectedTreeNodes&&(a=this.selectedTreeNodes.map(l=>{let c;return l.data&&(l.data.type===O.OBJ_ADDRESS?c=l.data.ipObjUUID:c=l.data.interfaceUUID),c})),this.selectedTreeNodes=[],this._options.firewalls.forEach(l=>{if(l.installOptions){if(l.installOptions.interface){let c=t.get(l.installOptions.interface.name);c||(c=new Set),c.add(l.installOptions.firewallUUID),t.set(l.installOptions.interface.name,c)}l.installOptions.ipobj&&r.set(l.installOptions.ipobj.address,new Set([l.installOptions.firewallUUID]))}}),e.forEach(l=>{let c={key:""+s++,label:l.name,data:{interfaceUUID:l.interfaceUUID,id:l.id,id_node:l.id_node,firewall:l.firewall,cluster:l.cluster,type:l.type,interface_type:l.type,labelName:l.labelName,mac:l.mac,comment:l.comment,installFirewallUUIDs:t.get(l.name)},children:[],expanded:!0,selectable:!l.id};(l.id||c.data.installFirewallUUIDs||a.find(d=>c.data.interfaceUUID===d))&&this.treeSelectNode(c),!l.id&&l.type===O.OBJ_INTERFACE_FIREWALL&&l.name==="lo"&&(c.data.special=!0,c.selectable=!1,this.treeSelectNode(c)),Array.isArray(l.ipobjs)&&(l.ipobjs.forEach(d=>{let h;h=r.get(d.address);let _={key:""+s++,label:d.name,data:{ipObjUUID:d.ipObjUUID,id:d.id,id_node:d.id_node,interface:l.id,type:d.type,ip_version:d.ip_version,address:d.address,netmask:d.netmask,comment:d.comment,installFirewallUUIDs:h},selectable:!d.id};d.id||h||a.find(C=>_.data.ipObjUUID===C)?this.treeSelectNode(_):h&&(this.treeSelectNode(_),this.treeSelectNode(c),this.onInstallModified.emit({firewallUUID:this._options.discoveredFirewallUUID,interface:this.getObjectFromTreeNode(c),ipobj:this.getObjectFromTreeNode(_)})),c.data.special&&!d.id&&d.type===O.OBJ_ADDRESS&&d.name==="lo"&&(_.data.special=!0,_.selectable=!1,this.treeSelectNode(_)),c.children.push(_)}),c.children.sort((d,h)=>d.data.ip_version-h.data.ip_version)),this.treeNodes.push(c)})}let o=this._options.firewalls.find(s=>s.firewallUUID===this._options.discoveredFirewallUUID);if(o&&this._options.discoveredAddress&&o.installOptions&&!o.installOptions.interface&&!o.installOptions.ipobj&&!this._options.firewalls.find(s=>s.installOptions&&s.installOptions.ipobj&&s.installOptions.ipobj.address===this._options.discoveredAddress)){let s=!1;for(let a=0;a<this.treeNodes.length;a++){let l=this.treeNodes[a];if(l.children)for(let c=0;c<l.children.length&&!s;c++){let d=l.children[c],h=!1;d.data.installFirewallUUIDs&&(h=d.data.installFirewallUUIDs.has(o.firewallUUID)),d.data&&d.data.type===O.OBJ_ADDRESS&&d.data.address===this._options.discoveredAddress&&!h&&(d.data.installFirewallUUIDs=new Set([o.firewallUUID]),this.treeSelectNode(d),l.data.installFirewallUUIDs||(l.data.installFirewallUUIDs=new Set),l.data.installFirewallUUIDs.add(o.firewallUUID),this.treeSelectNode(l),this.onInstallModified.emit({firewallUUID:o.firewallUUID,interface:this.getObjectFromTreeNode(l),ipobj:this.getObjectFromTreeNode(d)}),s=!0)}}}this.filterTree()}filterTree(){let e=t=>{let r=[],o=s=>{let a=!0;if(this.searchPattern&&this.searchPattern.trim().length&&s.label&&s.data.type===O.OBJ_INTERFACE_FIREWALL){let l=this.searchPattern.trim().split(/\s+/),c=s.label.toLowerCase(),d=[],h=[];for(let I=0;I<l.length;I++){let b=l[I].toLowerCase();b[0]!=="!"?d.push(b):h.push(b)}let _=!d.length;for(let I=0;I<d.length&&!_;I++){let b=d[I],E=b[b.length-1],R;E!=="*"?c===b&&(_=!0):(R=b.substring(0,b.length-1),R.length&&c.includes(R)&&(_=!0))}let C=!0;for(let I=0;I<h.length;I++){let b=h[I],E=b[b.length-1],R;E!=="*"?(R=b.substring(1),R.length&&c===R&&(C=!1)):(R=b.substring(1,b.length-1),R.length&&c.includes(R)&&(C=!1))}a=_&&C}return a};if(Array.isArray(t)){let s=t.map(a=>Wt(a));for(let a=0;a<s.length;a++){let l=s[a],c=!0;l.data&&(this.selectedIpVersions.indexOf(4)==-1&&l.data&&l.data.type==O.OBJ_ADDRESS&&l.data.ip_version==4||this.selectedIpVersions.indexOf(6)==-1&&l.data&&l.data.type==O.OBJ_ADDRESS&&l.data.ip_version==6||!o(l))&&(c=!1),c&&(Array.isArray(l.children)&&(l.children=e(l.children)),r.push(l))}}return r};this.filteredTreeNodes=e(this.treeNodes),this.filteredTreeNodes=this.filteredTreeNodes.sort((t,r)=>t.label.toLocaleLowerCase().localeCompare(r.label.toLocaleLowerCase())),this.selectedTreeNodes=this.selectedTreeNodes.filter(t=>{if(!t.selectable)return!0;for(let r=0;r<this.filteredTreeNodes.length;r++){let o=this.filteredTreeNodes[r];if(o.key===t.key)return!0;if(Array.isArray(o.children)){for(let s=0;s<o.children.length;s++)if(o.children[s].key===t.key)return!0}}return!1}),this.onIpObjectModified.emit({}),this.cd.detectChanges()}onShowNodeInfo(e,t){e.stopPropagation(),this.editingTreeNodeKey=t.key,this.createForm(t.key),this.nodeSaved=!1}onSetInstallAddress(e,t){e.stopPropagation();let r=this.treeSearchByNodeKey(t.key),o=this.firewallsSelectorOptions[0].id;this.doSetInstallAddress(r,o)}doSetInstallAddress(e,t){if(e){let r=null,o;if(e.data.installFirewallUUIDs){if(o=e.data.installFirewallUUIDs.values().next().value,o===t)return}else e.data.installFirewallUUIDs=new Set;for(let s=0;s<this.treeNodes.length;s++){let a=this.treeNodes[s];if(a.data.installFirewallUUIDs&&(a.data.installFirewallUUIDs.delete(t),o&&a.data.installFirewallUUIDs.delete(o)),a.selectable=!a.data.id&&!a.data.special,a.children)for(let l=0;l<a.children.length;l++){let c=a.children[l];c.data.installFirewallUUIDs&&(c.data.installFirewallUUIDs.delete(t),o&&c.data.installFirewallUUIDs.delete(o)),c.selectable=!c.data.id&&!c.data.special,c.key===e.key&&(r=a,r.data.installFirewallUUIDs||(r.data.installFirewallUUIDs=new Set))}}this.treeSelectNode(e),e.data.installFirewallUUIDs.add(t),r&&(this.treeSelectNode(r),r.data.installFirewallUUIDs.add(t)),this.filterTree(),this.onInstallModified.emit({firewallUUID:t,interface:this.getObjectFromTreeNode(r),ipobj:this.getObjectFromTreeNode(e)})}}updateInstallOptions(e){if(this._options&&e){let t=this._options.firewalls.find(r=>r.firewallUUID&&r.firewallUUID===e.firewallUUID);t&&(t.installOptions=e,this.treeNodes.forEach(r=>{r.data.installFirewallUUIDs&&(r.data.installFirewallUUIDs.delete(t.firewallUUID),Array.isArray(r.children)&&r.children.forEach(o=>{o.data.installFirewallUUIDs&&o.data.installFirewallUUIDs.delete(t.firewallUUID)})),r.data.id&&e.interface&&r.data.interfaceUUID===e.interface.interfaceUUID&&(r.data.installFirewallUUIDs||(r.data.installFirewallUUIDs=new Set),r.data.installFirewallUUIDs.add(e.firewallUUID),Array.isArray(r.children)&&r.children.forEach(o=>{o.data.id&&e.ipobj&&o.data.ipObjUUID===e.ipobj.ipObjUUID&&(o.data.installFirewallUUIDs||(o.data.installFirewallUUIDs=new Set),o.data.installFirewallUUIDs.add(e.firewallUUID))}))}),this.filterTree())}}treeSelectNode(e){this.selectedTreeNodes.find(t=>t.key===e.key)||this.selectedTreeNodes.push(e)}treeGetParentNode(e){let t=null,r=!1;for(let o=0;o<this.treeNodes.length&&!r;o++){let s=this.treeNodes[o];if(s.key===e.key&&(r=!0),Array.isArray(s.children)){t=s;for(let a=0;a<s.children.length&&!r;a++)s.children[a].key===e.key&&(r=!0)}}return r?t:null}treeSearchByNodeKey(e,t=this.treeNodes){let r;if(t)for(let o=0;!r&&o<t.length;o++){let s=t[o];s.key===e?r=s:s.children&&(r=this.treeSearchByNodeKey(e,s.children))}return r}treeSearchByObjectIdAndType(e,t,r=this.treeNodes){let o;if(r)for(let s=0;s<r.length;s++){let a=r[s];if(a.data&&a.data.id===e&&a.data.type===t){o=a;break}Array.isArray(a.children)&&this.treeSearchByObjectIdAndType(e,t,a.children)}return o}createForm(e){let t=this.treeSearchByNodeKey(e);t&&t.data&&(this.formModel=null,this.cd.detectChanges(),this.formModel=this.formBuilder.group({id:t.data.id,key:t.key,special:!!t.data.special,type:t.data.type,label:[t.label,Pe.required],comment:t.data.comment}),t.data.type==O.OBJ_ADDRESS?(this.formModel.addControl("address",new ve(t.data.address,[Pe.required,Pt.ipAddressValidator.bind(this)])),this.formModel.addControl("netmask",new ve(t.data.netmask,[Pe.required,Pt.netmaskValidator.bind(this)])),this.formModel.addControl("ip_version",new ve(t.data.ip_version,[Pe.required]))):(this.formModel.addControl("labelName",new ve(t.data.labelName,Pe.pattern(Pt.nameRegExp))),this.formModel.addControl("mac",new ve(t.data.mac,Pe.pattern(Pt.macRegexp)))),t.data.special?this.formModel.disable():this.formModel.enable()),this.cd.detectChanges(),this.cd.markForCheck()}addressNetmaskToCIDRAddress(e,t){let r=e;if(t){let o=Pt.netmaskCIDRRegexp.exec(t);if(o)r+="/"+o[1];else try{let s=Tu.IPv4.parse(t).prefixLengthFromSubnetMask();s?r+="/"+s:r=this.translate.instant("IF_EDITOR.TREE.ERROR_ADDRESS")}catch{r=this.translate.instant("IF_EDITOR.TREE.ERROR_ADDRESS")}}return r}onSearchType(e){this.searchUpdated.next(e)}onChangeFilters(){this.filterTree()}onChangeSelected(e){Array.isArray(this.treeNodes)&&(this.selectAllNodes(e),this.onIpObjectModified.emit({}))}selectAllNodes(e){e?(this.selectedTreeNodes=[],this.filteredTreeNodes.forEach(t=>{this.selectedTreeNodes.push(t),Array.isArray(t.children)&&t.children.length&&this.selectedTreeNodes.push(...t.children)})):this.selectedTreeNodes=this.selectedTreeNodes.filter(t=>t.selectable===!1)}onNodeSelect(e){if(e&&e.node){let t=e.node;t.parent&&this.treeSelectNode(t.parent),this.onIpObjectModified.emit({})}}onNodeUnselect(e){if(e&&e.node){let t=e.node;if(t.data.special)e.originalEvent.preventDefault(),this.treeSelectNode(t);else{let r=this.treeSearchByNodeKey(t.key);if(Array.isArray(r.children))this.selectedTreeNodes=this.selectedTreeNodes.filter(o=>!t.children.find(s=>s.key===o.key&&s.selectable)),r.data.installFirewallUUIDs&&(r.data.installFirewallUUIDs=null,r.children.forEach(o=>{o.data.installFirewallUUIDs=null}));else if(r.data.installFirewallUUIDs){let o=this.treeGetParentNode(r),a=r.data.installFirewallUUIDs.values().next().value;o.data.installFirewallUUIDs.delete(a),r.data.installFirewallUUIDs=null}this.filterTree(),t.data.installFirewallUUIDs?t.data.installFirewallUUIDs.forEach(o=>{this.onInstallModified.emit({firewallUUID:o,interface:null,ipobj:null})}):this.onIpObjectModified.emit({})}this.cd.markForCheck()}}onMouseEnter(e){this.hoveredTreeNodeKey=e.key}onMouseLeave(e){this.hoveredTreeNodeKey=null}onNodeFormInputType(){this.nodeSaved=!1,this.formModel.valid&&this.formInputUpdated.next(void 0)}onCancelNodeEdit(){if(this.formModel){let e=this.formModel.value,t=this.treeSearchByNodeKey(e.key),r={};Object.keys(e).forEach(o=>{o==="key"||o==="label"?r[o]=t[o]:t.data&&(r[o]=t.data[o])}),this.formModel.reset(r)}}onSaveNode(){if(this.formModel&&this.formModel.valid){let e=this.formModel.value,t=this.treeSearchByNodeKey(e.key);t&&(Object.keys(e).forEach(r=>{switch(r){case"key":break;case"label":t.label=e[r];break;default:t.data[r]=e[r]}}),t.data.modified=!0,t.data.id?this.onIpObjectModified.emit(ke(oe({},t.data),{name:t.label})):t.data.installFirewallUUIDs&&this.onIpObjectModified.emit({installFirewallUUIDs:t.data.installFirewallUUIDs,type:t.data.type,name:t.label,address:t.data.address}),this.filterTree(),this.formModel.markAsPristine(),this.nodeSaved=!0)}}onResetTree(){this.treeNodes.find(t=>!t.data.id)&&this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("IF_EDITOR.TREE.MSG_RESET_TREE"),accept:()=>{this.treeNodes=this.treeNodes.filter(t=>t.data&&t.data.id),this.treeNodes.forEach(t=>{Array.isArray(t.children)&&(t.children=t.children.filter(r=>r.data&&r.data.id))}),this.selectedTreeNodes=this.selectedTreeNodes.filter(t=>t.data&&t.data.id),this.filterTree(),this._options.firewalls.forEach(t=>{let r=!0;this.selectedTreeNodes.find(o=>o.data&&o.data.installFirewallUUIDs&&o.data.installFirewallUUIDs.has(t.firewallUUID))&&(r=!1),r&&this.onInstallModified.emit({firewallUUID:t.firewallUUID,interface:null,ipobj:null})})},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")})}isThereAnySelectedNode(){let e=!0;if(this.treeNodes){let t;t=this.treeNodes.some(r=>r.selectable),t&&!this.getSelectedTreeNodes(!0).length&&(e=!1)}return e}areTherePendingOperations(){let e=!1;return this.selectedTreeNodes&&(e=!!this.selectedTreeNodes.find(t=>t.data&&(t.data.id&&t.data.modified||!t.data.id))),e}getSelectedTreeNodes(e=!1){let t=r=>{let o=[];return r&&r.forEach(s=>{let a=-1;if(this.selectedTreeNodes.find(l=>!e&&s.key===l.key||s.key===l.key&&l.selectable)&&(a=o.push(oe({},s))-1),a!==-1){let l=o[a];l.children&&(l.children=t(l.children))}}),o};return t(this.treeNodes)}setNewLoIds(e){if(e&&e.loData&&this.treeNodes){let t=this.treeNodes.find(r=>r.data.special);t&&Array.isArray(t.children)&&(t.data.id=e.loData.ifId,t.data.updateSpecial=!0,t.children.forEach(r=>{r.data&&(r.data.interface=e.loData.ifId,r.data.updateSpecial=!0,r.data.id=r.data.ip_version===4?e.loData.ipv4Id:e.loData.ipv6Id)})),this.filterTree()}}getInstallationData(e){let t,r,o;return Array.isArray(this.selectedTreeNodes)&&this.selectedTreeNodes.forEach(s=>{s.data&&(s.data.type===O.OBJ_INTERFACE_FIREWALL&&s.data.installFirewallUUIDs&&s.data.installFirewallUUIDs.has(e)&&(r=s.data),s.data.type===O.OBJ_ADDRESS&&s.data.installFirewallUUIDs&&s.data.installFirewallUUIDs.has(e)&&(o=s.data))}),(r||o)&&(t={interface:r,address:o}),t}operationsModified(){let e=!1;if(Array.isArray(this.selectedTreeNodes))for(let t=0;t<this.selectedTreeNodes.length&&!e;t++){let r=this.selectedTreeNodes[t];if(r.data.modified||r.data.updateSpecial||!r.data.id)e=!0;else if(Array.isArray(r.children))for(let o=0;o<r.children.length&&!e;o++){let s=r.children[o];(s.data.modified||r.data.updateSpecial||!s.data.id)&&(e=!0)}}return e}getSelectedModifiedTreeNodes(){if(Array.isArray(this.selectedTreeNodes))return this.selectedTreeNodes.filter(e=>e.data&&e.data.modified)}showFirewallsSelector(e,t){e.stopPropagation(),t.data.type===O.OBJ_ADDRESS&&(this.clickedTreeNodeKey=t.key,this.menuNodesSelector.toggle(e))}hideFirewallSelector(){this.menuNodesSelector.hide()}onHideFirewallsSelector(){this.clickedTreeNodeKey=null}onChangeFirewallsSelectorOptions(e){let r=e.item.id,o=this.treeSearchByNodeKey(this.clickedTreeNodeKey);this.doSetInstallAddress(o,r)}onDiscoverInterfacesHandler(){this.onStartAutodiscover.emit(!0)}resetProperties(){this._options=null,this.treeNodes=[],this.filteredTreeNodes=[],this.selectedTreeNodes=[],this.searchPattern=null,this.editingTreeNodeKey=null,this.nodeSaved=!1}static{this.\u0275fac=function(t){return new(t||i)(S(qr),S(Jt),S(Ye),S(we))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-interfaces-tree-editor"]],viewQuery:function(t,r){if(t&1&&le(mje,5),t&2){let o;te(o=ie())&&(r.menuNodesSelector=o.first)}},inputs:{options:"options",inputNodes:"inputNodes",disabled:"disabled",minimized:"minimized",loading:"loading",manualMode:"manualMode"},outputs:{onInstallModified:"onInstallModified",onIpObjectModified:"onIpObjectModified",onStartAutodiscover:"onStartAutodiscover"},decls:48,vars:21,consts:[["menuNodesSelector",""],["opFilterHelp",""],["inputFilter",""],["treeSelector",""],["appendTo","body",3,"onHide","popup","model"],[1,"grid","divInterfacesEditor",3,"ngClass"],["appendTo","body"],[1,"fa","fa-lg","fa-info-circle","fwcBlue"],[1,"col-12"],[1,"divIconMessage","divIconMessage--condensed"],[1,"fa","fa-4x","fa-cog","fa-spin","fwcBlue"],[1,"divInlineInput"],[1,"spanField"],[1,"fwcBlue"],[1,"fa","fa-list-ul"],["type","button","pButton","","icon","fa fa-check-square",1,"p-button-primary",3,"click","label"],["type","button","pButton","","icon","fa fa-square",1,"p-button-primary",3,"click","label"],[1,"fwcSep"],[1,"fa","fa-filter"],["name","ipVersions","label","IPv4","inputId","ipv4",3,"ngModelChange","onChange","value","ngModel"],["name","ipVersions","label","IPv6","inputId","ipv6",3,"ngModelChange","onChange","value","ngModel"],[1,"fwcSepShort"],["type","text","pInputText","","name","search","maxlength","255",3,"ngModelChange","keyup","placeholder","ngModel"],["pButton","","type","button","icon","fa fa-info",1,"p-button-info","fwcButtonHeight",3,"click"],[1,"col-12","md:col-6"],["styleClass","cardInterfacesEditor"],["pTemplate","header"],["selectionMode","checkbox","styleClass","treeSelector",3,"value","propagateSelectionUp","propagateSelectionDown","selection"],[1,"divIconMessage"],[1,"grid","formCondensed",3,"formGroup"],["pTemplate","footer"],["type","button","pButton","","icon","fa fa-trash","showDelay","500","tooltipPosition","top",1,"p-button-danger",3,"click","pTooltip","disabled","label"],["type","button","pButton","","icon","fa fa-search-plus",1,"p-button-primary",3,"click","label"],[1,"grid"],["selectionMode","checkbox","styleClass","treeSelector",3,"selectionChange","onNodeSelect","onNodeUnselect","value","propagateSelectionUp","propagateSelectionDown","selection"],["pTemplate","default"],[1,"treeSelector-node",3,"mouseenter","mouseleave","ngClass"],[3,"ngClass"],["aria-hidden","true"],[1,"fa","fa-fw","fa-info-circle","fwcBlue",3,"pTooltip","showDelay"],["tooltipPosition","top",1,"fa","fa-pencil","fwcIconButton","padded","iconInfo",3,"pTooltip","showDelay"],[1,"spanNodeLabel"],[1,"fa","fa-fw","fa-angle-right","fwcBlue"],[1,"spanSimplePill"],[1,"spanSimplePill",3,"click"],["showDelay","500","tooltipPosition","top",1,"fa","fa-fw","fa-lg","fa-check","fwcGreen",3,"pTooltip"],[1,"spanSimplePill-select"],[1,"pi","pi-chevron-down","fwcBlue"],["tooltipPosition","top",1,"fa","fa-check","fwcIconButton","padded","iconSuccess",3,"pTooltip","showDelay"],["tooltipPosition","top",1,"fa","fa-check","fwcIconButton","padded","iconSuccess",3,"click","pTooltip","showDelay"],["tooltipPosition","top",1,"fa","fa-pencil","fwcIconButton","padded","iconInfo",3,"click","pTooltip","showDelay"],[1,"spanInfoPill","pillSuccess"],[1,"spanInfoPill",3,"ngClass"],[1,"fa","fa-5x","fa-exclamation","fwcPaleDark"],[1,"fwcDark"],[1,"spanInfoPill","pillInfoBadge"],["showDelay","300","tooltipPosition","top",1,"fa","fa-info-circle",3,"pTooltip"],[1,"p-float-label"],["type","text","pInputText","","formControlName","label","name","label","maxlength","64",3,"keyup"],["for","label"],[1,"p-inputgroup"],["type","text","pInputText","","formControlName","comment","name","comment",3,"keyup"],["for","comment"],[1,"col-6"],["type","text","pInputText","","formControlName","address","name","address","maxlength","45",3,"keyup","ngClass"],["for","address"],["type","text","pInputText","","formControlName","netmask","name","netmask","maxlength","15",3,"keyup","ngClass"],["for","netmask"],["type","text","pInputText","","formControlName","labelName","name","labelName","maxlength","64",3,"keyup"],["for","labelName"],["type","text","pInputText","","formControlName","mac","name","mac","maxlength","17",3,"keyup"],["for","mac"],[1,"fa","fa-5x","fa-exclamation-triangle"],[2,"text-align","right"],[1,"fwcGreen"],[1,"fa","fa-4x","fa-info-circle","fwcBlue"]],template:function(t,r){if(t&1){let o=L();m(0,"p-menu",4,0),k("onHide",function(){return y(o),w(r.onHideFirewallsSelector())}),g(),v(2,n7e,3,4,"div",5),m(3,"p-overlayPanel",6,1)(5,"h6"),P(6,"i",7),F(7),D(8,"translate"),g(),m(9,"ul")(10,"li"),F(11),D(12,"translate"),m(13,"code"),F(14,"lo"),g()(),m(15,"li"),F(16),D(17,"translate"),m(18,"code"),F(19,"lo"),m(20,"strong"),F(21,"*"),g()()(),m(22,"li"),F(23),D(24,"translate"),m(25,"code")(26,"strong"),F(27,"!"),g(),F(28,"lo"),g()(),m(29,"li"),F(30),D(31,"translate"),m(32,"code")(33,"strong"),F(34,"!"),g(),F(35,"lo"),m(36,"strong"),F(37,"*"),g()()()(),m(38,"p"),F(39),D(40,"translate"),g(),m(41,"ul")(42,"li")(43,"code"),F(44,"lo* tun*"),g()(),m(45,"li")(46,"code"),F(47,"tun* !tun10*"),g()()()()}t&2&&(f("popup",!0)("model",r.firewallsSelectorOptions),p(2),W(r.minimized?-1:2),p(5),J(" ",N(8,9,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.TITLE")," "),p(4),J(" ",N(12,11,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.EXACT_COINCIDENCE")," "),p(5),J(" ",N(17,13,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.PARTIAL_COINCIDENCE")," "),p(7),J(" ",N(24,15,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.EXACT_EXCLUSION")," "),p(7),J(" ",N(31,17,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.PARTIAL_EXCLUSION")," "),p(9),$(N(40,19,"PANELS.INTERFACES_EDITOR.USE_SAMPLE.TIP")))},styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divInterfacesEditor{position:relative}.divInterfacesEditor-loader{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}.divInterfacesEditor--disabled:before{position:absolute;content:"";inset:0;z-index:10001;background:#00000017}.treeInterfacesEditor{max-height:20em;overflow:auto;width:100%;border:none!important}.cardInterfacesEditor{overflow:hidden;height:19rem}.cardInterfacesEditor .p-card-header{height:10%}.cardInterfacesEditor .p-card-body{height:95%;overflow:hidden}.cardInterfacesEditor .p-card-body .p-card-content{height:100%;overflow:hidden}.cardInterfacesEditor .treeSelector{height:100%}.spanNodeLabel{margin:0 .5rem}.spanNodeEditing{font-weight:700}.spanNodeEditing .spanNodeLabel{border-bottom:1px dashed}.divNodeSpecial{color:var(--fwcPaleDark);font-style:italic}.spanNodeDisabled{color:var(--fwcDarkBlue2);font-style:italic}.spanInfo{color:var(--fwcMidDark);margin-left:.5rem}.spanBadge{border:1px solid var(--fwcMidDark);background:var(--fwcGrey2);font-size:smaller;font-family:monospace;padding:0 3px}.formCondensed{padding-top:.5rem!important}.formCondensed [class*=col-]:not(:last-child){margin-bottom:1rem!important}.p-dialog .grid{display:flex;flex-wrap:wrap;box-sizing:border-box}.dlgFwcDialog.p-dialog [class*=grid]{margin-bottom:0!important;margin-top:0!important}.p-tree.treeSelector .p-treenode{padding:0!important}.p-tree.treeSelector .p-treenode .p-treenode-label{background-color:var(--fwcPaleBlue3)!important;color:var(--fwcDark)!important}.cardInterfacesEditor .treeSelector{height:100%;overflow:auto}
`],encapsulation:2,changeDetection:0})}}return i})();var _g=class{constructor(n){n&&(this.fwcloud=n.fwcloud)}getValue(){return{fwcloud:this.fwcloud}}},Cg=class extends _g{constructor(n){super(n),n&&(this.node_parent=n.node_parent,this.node_order=n.node_order,this.node_type=n.node_type,this.force=n.force)}getValue(){return ke(oe({},super.getValue()),{node_parent:this.node_parent,node_order:this.node_order,node_type:this.node_type,force:this.force})}},Ig=class extends _g{constructor(n){super(n),n&&(this.id=n.id)}getValue(){return ke(oe({},super.getValue()),{id:this.id})}};var MS=class extends Cg{constructor(n){super(n),n&&(this.interface=n.interface,this.name=n.name,this.type=n.type,this.protocol=n.protocol,this.address=n.address,this.netmask=n.netmask,this.diff_serv=n.diff_serv,this.ip_version=n.ip_version,this.icmp_code=n.icmp_code,this.icmp_type=n.icmp_type,this.tcp_flags_mask=n.tcp_flags_mask,this.tcp_flags_settings=n.tcp_flags_settings,this.range_start=n.range_start,this.range_end=n.range_end,this.source_port_start=n.source_port_start,this.source_port_end=n.source_port_end,this.destination_port_start=n.destination_port_start,this.destination_port_end=n.destination_port_end,this.options=n.options,this.comment=n.comment)}getValue(){return ke(oe({},super.getValue()),{interface:this.interface,name:this.name,type:this.type,protocol:this.protocol,address:this.address,netmask:this.netmask,diff_serv:this.diff_serv,ip_version:this.ip_version,icmp_code:this.icmp_code,icmp_type:this.icmp_type,tcp_flags_mask:this.tcp_flags_mask,tcp_flags_settings:this.tcp_flags_settings,range_start:this.range_start,range_end:this.range_end,source_port_start:this.source_port_start,source_port_end:this.source_port_end,destination_port_start:this.destination_port_start,destination_port_end:this.destination_port_end,options:this.options,comment:this.comment})}},VS=class extends Ig{constructor(n){super(n),n&&(this.interface=n.interface,this.name=n.name,this.type=n.type,this.protocol=n.protocol,this.address=n.address,this.netmask=n.netmask,this.diff_serv=n.diff_serv,this.ip_version=n.ip_version,this.icmp_code=n.icmp_code,this.icmp_type=n.icmp_type,this.tcp_flags_mask=n.tcp_flags_mask,this.tcp_flags_settings=n.tcp_flags_settings,this.range_start=n.range_start,this.range_end=n.range_end,this.source_port_start=n.source_port_start,this.source_port_end=n.source_port_end,this.destination_port_start=n.destination_port_start,this.destination_port_end=n.destination_port_end,this.options=n.options,this.comment=n.comment)}getValue(){return ke(oe({},super.getValue()),{interface:this.interface,name:this.name,type:this.type,protocol:this.protocol,address:this.address,netmask:this.netmask,diff_serv:this.diff_serv,ip_version:this.ip_version,icmp_code:this.icmp_code,icmp_type:this.icmp_type,tcp_flags_mask:this.tcp_flags_mask,tcp_flags_settings:this.tcp_flags_settings,range_start:this.range_start,range_end:this.range_end,source_port_start:this.source_port_start,source_port_end:this.source_port_end,destination_port_start:this.destination_port_start,destination_port_end:this.destination_port_end,options:this.options,comment:this.comment})}};var BS=class extends Ig{constructor(n){super(n),this.type=null,n&&(this.name=n.name,this.labelName=n.labelName,this.type=n.type,this.comment=n.comment,this.mac=n.mac,this.interface_type=n.interface_type)}getValue(){return ke(oe({},super.getValue()),{name:this.name,labelName:this.labelName,type:this.type,comment:this.comment,mac:this.mac,interface_type:this.interface_type})}},US=class extends Cg{constructor(n){super(n),n&&(this.name=n.name,this.firewall=n.firewall,this.host=n.host,this.labelName=n.labelName,this.type=n.type,this.interface_type=n.interface_type,this.comment=n.comment,this.mac=n.mac)}getValue(){return ke(oe({},super.getValue()),{name:this.name,firewall:this.firewall,namhoste:this.host,labelName:this.labelName,type:this.type,interface_type:this.interface_type,comment:this.comment,mac:this.mac})}};var r7e=()=>({width:"80vw"}),o7e=i=>({trInProgress:i});function s7e(i,n){i&1&&(m(0,"div",10)(1,"h6",11),P(2,"i",12),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"ITEM_BATCH.PANEL_TITLE"),""))}function a7e(i,n){if(i&1&&(m(0,"h6",6),P(1,"i",13),D(2,"fwcIcon"),F(3,"\xA0 "),m(4,"strong"),F(5),D(6,"translate"),g(),F(7),g()),i&2){let e=u();p(),ce(N(2,5,e.options.parentObject.type)),p(4),$(N(6,7,"GLOBALS.DB_OBJECT_NAMES."+e.options.parentObject.type)),p(2),J(" ",e.options.parentObject.name," ")}}function l7e(i,n){i&1&&(m(0,"colgroup"),P(1,"col")(2,"col")(3,"col"),g()),i&2&&(p(),Wn("width","20rem"),p(),Wn("width","10rem"))}function c7e(i,n){i&1&&(m(0,"tr")(1,"th"),F(2),D(3,"translate"),g(),m(4,"th"),F(5),D(6,"translate"),g(),m(7,"th"),F(8),D(9,"translate"),g()()),i&2&&(p(2),$(N(3,3,"ITEM_BATCH.TABLE_HEADER.0")),p(3),$(N(6,5,"ITEM_BATCH.TABLE_HEADER.1")),p(3),$(N(9,7,"ITEM_BATCH.TABLE_HEADER.2")))}function d7e(i,n){i&1&&P(0,"i",19)}function p7e(i,n){if(i&1&&(m(0,"span",20)(1,"span"),P(2,"i"),F(3," \xA0 "),m(4,"p"),F(5),D(6,"translate"),g()()()),i&2){let e=u().rowData,t=u(2);f("ngClass",t.ItemBatchOperationTypeOptions[e.operationType].displayClass),p(2),ce(t.ItemBatchOperationTypeOptions[e.operationType].icon),p(3),$(N(6,5,t.ItemBatchOperationTypeOptions[e.operationType].translateKey))}}function u7e(i,n){if(i&1){let e=L();m(0,"a",22),k("click",function(r){y(e);let o=u(2).rowData,s=u(2),a=He(10);return w(s.showOperationMessage(r,o.operationMessage,a))}),P(1,"i",23),g()}}function h7e(i,n){if(i&1&&(m(0,"span",21),P(1,"i"),F(2," \xA0 "),m(3,"span"),F(4),D(5,"translate"),g(),F(6," \xA0 "),v(7,u7e,2,0,"a"),g()),i&2){let e=u().rowData,t=u(2);f("ngClass",t.ItemBatchOperationStatusOptions[e.operationStatus].displayClass),p(),ce(t.ItemBatchOperationStatusOptions[e.operationStatus].icon),p(3),$(N(5,6,t.ItemBatchOperationStatusOptions[e.operationStatus].translateKey)),p(3),W(e.operationMessage?7:-1)}}function f7e(i,n){if(i&1&&(m(0,"tr",17)(1,"td"),P(2,"p-treeTableToggler",18)(3,"i",13),D(4,"fwcIcon"),F(5),v(6,d7e,1,0,"i",19),g(),m(7,"td"),v(8,p7e,7,7,"span",20),g(),m(9,"td"),v(10,h7e,8,8,"span",21),g()()),i&2){let e=n.$implicit,t=n.rowData,r=u(2);Q("id",t.operationKey),f("ngClass",ne(12,o7e,t.operationKey===(r.currentOperationData==null?null:r.currentOperationData.operationKey))),p(2),f("rowNode",e),p(),ce(N(4,10,t.object==null?null:t.object.type)),p(2),J(" ",t.object==null?null:t.object.name," "),p(),W(t.object!=null&&t.object.installFirewallUUID?6:-1),p(2),W(r.ItemBatchOperationTypeOptions[t.operationType]?8:-1),p(2),W(r.ItemBatchOperationStatusOptions[t.operationStatus]?10:-1)}}function m7e(i,n){if(i&1&&(m(0,"div",5)(1,"p-treeTable",14),v(2,l7e,4,4,"ng-template",15)(3,c7e,10,9,"ng-template",3)(4,f7e,11,14,"ng-template",16),g()()),i&2){let e=u();p(),f("value",e.objectOperationsTreeNodes)("scrollable",!0)}}function g7e(i,n){if(i&1&&(m(0,"div",5)(1,"div",24),P(2,"i",25)(3,"br"),m(4,"h6"),F(5),D(6,"translate"),g(),m(7,"p"),F(8),g()()()),i&2){let e=u();p(5),$(N(6,2,"ITEM_BATCH.ERROR_HEADER")),p(3),$(e.optionsErrorMessage)}}function _7e(i,n){if(i&1){let e=L();m(0,"button",28),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.processOperations(r.objectOperationsTreeNodes))}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"ITEM_BATCH.BTN_TRY_AGAIN")),f("disabled",e.loadingData)}}function C7e(i,n){if(i&1){let e=L();v(0,_7e,2,4,"button",26),m(1,"button",27),D(2,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();W((e.currentOperationData==null?null:e.currentOperationData.operationStatus)===e.ItemBatchOperationStatus.ERROR?0:-1),p(),Q("label",N(2,3,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var cz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C){super(e,t,r,d,_,C),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.fwcUserService=o,this.fwcInterfaceService=s,this.fwcObjectService=a,this.confirmationService=l,this.utilService=c,this.cd=d,this.translate=h,this.store=_,this.router=C,this.ItemBatchOperationStatusOptions=EB,this.ItemBatchOperationTypeOptions=SB,this.ItemBatchOperationStatus=gr,this.loadingData=!1,this.createDialog(this.translate.instant("ITEM_BATCH.PANEL_TITLE"),"fwci-ipobjects",ri.ITEM_BATCH_MANAGER)}ngOnInit(){this.appDialogPanelsService.searchAndShowDialog().pipe(yt(()=>this.alive)).subscribe(e=>{e.uuid===this.dialogUUID&&this.setOptions(e.data)})}ngOnDestroy(){super.ngOnDestroy()}setOptions(e){return B(this,null,function*(){e&&(this.options=e,Array.isArray(e.objectTreeNodes)?(this.objectOperationsTreeNodes=[],this.objectOperationsTreeNodes=this.parseOptionObjects(e.objectTreeNodes),this.objectOperationsTreeNodes.length&&(this.currentOperationData=void 0,this.cd.markForCheck(),this.showDialog(),this.loadingData=!0,yield this.processOperations(this.objectOperationsTreeNodes),this.loadingData=!1)):(this.optionsErrorMessage=this.translate.instant("ITEM_BATCH.ERROR_NO_DATA"),this.cd.markForCheck(),this.showDialog()))})}parseOptionObjects(e,t){let r=[];if(Array.isArray(e)){let o=this.fwcUserService.getActualFwSelectedCloud();e=e.filter(s=>{let a=Array.isArray(s.children)&&s.children.length;return s.data.modified||s.data.updateSpecial||!s.data.id||a&&s.children.some(l=>l.data.modified||l.data.updateSpecial||!l.data.id)}),e.forEach(s=>{let a,l=s.data||{},c,d=gr.PENDING,h=s.key;if(!l.id&&!l.special){if(c=Zs.CREATE,!this.options.parentObject)return this.optionsErrorMessage=this.translate.instant("ITEM_BATCH.ERROR_NO_PARENT"),[]}else l.id&&l.special&&l.updateSpecial?c=Zs.UPDATE_SPECIAL:l.id&&l.modified?c=Zs.UPDATE:(c=Zs.NO_OP,d=gr.NO_OP);a={operationKey:h,operationType:c,operationStatus:d,object:ke(oe({},l),{fwcloud:o,name:s.label})};let _={key:h,expanded:!0,data:a,children:[]};Array.isArray(s.children)&&(_.children=this.parseOptionObjects(s.children,h)),r.push(_)})}return r}processOperations(e,t){return B(this,null,function*(){if(Array.isArray(e)){t||(t=this.options.parentObject);for(let r=0;r<e.length;r++){let o=e[r],s=o.data;if(!this.currentOperationData||this.currentOperationData&&this.currentOperationData.operationKey===s.operationKey){if(s.operationType==Zs.NO_OP)s.operationStatus=gr.NO_OP;else if(s.operationType==Zs.UPDATE_SPECIAL)s.operationStatus=gr.SUCCESS,s.operationResult={insertId:s.object.id};else{s.operationStatus=gr.RUNNING,s.object.node_parent=t.id_node,s.object.node_type=aB[s.object.type],s.object.node_order=r+1,this.currentOperationData=s;try{let a=yield this.processCurrentOperation(t);a.data&&a.data.insertId&&(s.object.id=a.data.insertId,s.object.id_node=a.data.TreeinsertId,s.operationResult={insertId:a.data.insertId,TreeInsertId:a.data.TreeinsertId}),s.operationStatus=gr.SUCCESS}catch(a){s.operationStatus=gr.ERROR,s.operationMessage=a,this.cd.markForCheck();return}}this.cd.markForCheck()}Array.isArray(o.children)&&(yield this.processOperations(o.children,s.object))}}})}processCurrentOperation(e,t=!0){return B(this,null,function*(){let r;if(e&&this.currentOperationData){let o,s,a=document.getElementById(this.currentOperationData.operationKey);if(a&&a.scrollIntoView(),this.currentOperationData.operationType===Zs.CREATE){let l=this.currentOperationData.object;switch(this.currentOperationData.object.type){case O.OBJ_INTERFACE_FIREWALL:case O.OBJ_INTERFACE_HOST:{o=this.fwcInterfaceService.newInterface.bind(this.fwcInterfaceService);let c=new US(l);c.fwcloud=this.currentOperationData.object.fwcloud,c.node_parent=e.id_node,e.type===O.OBJ_FIREWALL?c.firewall=e.id:e.type===O.OBJ_HOST&&(c.host=e.id),s=c.getValue();break}default:{o=this.fwcObjectService.newObject.bind(this.fwcObjectService);let c=new MS(l);c.fwcloud=this.currentOperationData.object.fwcloud,c.node_parent=e.id_node,c.force=t?1:0,(e.type===O.OBJ_INTERFACE_FIREWALL||e.type===O.OBJ_INTERFACE_HOST)&&(c.interface=e.id),s=c.getValue();break}}}else if(this.currentOperationData.operationType===Zs.UPDATE){let l=this.currentOperationData.object;switch(this.currentOperationData.object.type){case O.OBJ_INTERFACE_FIREWALL:case O.OBJ_INTERFACE_HOST:{o=this.fwcInterfaceService.updateInterface.bind(this.fwcInterfaceService);let c=new BS(l);c.interface_type=l.type,s=c.getValue();break}default:{o=this.fwcObjectService.updateObject.bind(this.fwcObjectService),s=new VS(l).getValue();break}}}if(o)r=yield this.utilService.fwcAPICall(o,s),this.currentOperationData=null;else throw new Error("No API Call");return r}})}getResultOperations(e){let t=[];return e||(e=this.objectOperationsTreeNodes),Array.isArray(e)&&e.forEach(r=>{t.push(r.data),Array.isArray(r.children)&&t.push(...this.getResultOperations(r.children))}),t}showOperationMessage(e,t,r){this.operationOverlayMessage=t,r.toggle(e)}onShowDialog(e){}onHideDialog(e){this.optionsErrorMessage=null,this.options&&this.options.onClose&&this.options.onClose(this.getResultOperations())}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(at),S(Io),S(Vi),S(Jt),S(ft),S(we),S(Ye),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-item-batch-manager-panel"]],features:[et([Io,Vi]),Se],decls:17,vars:12,consts:[["itemBatchDialog",""],["overlayPanel",""],["styleClass","dlgFwcDialog",3,"visibleChange","onShow","onHide","visible","modal","closable"],["pTemplate","header"],[1,"grid"],[1,"col-12"],[1,"fwcBlue"],["pTemplate","footer"],["appendTo","body"],[1,"divOverlayMessage"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-ipobjects","fwcOrange"],["aria-hidden","true"],["styleClass","tableBatchOps","scrollHeight","15rem",3,"value","scrollable"],["pTemplate","colgroup"],["pTemplate","body"],[3,"ngClass","id"],[3,"rowNode"],[1,"fa","fa-fw","fa-lg","fa-check","fwcGreen"],[1,"spanInfoPill",3,"ngClass"],[3,"ngClass"],[3,"click"],[1,"fa","fa-lg","fa-fw","fa-info-circle"],[1,"divIconMessage"],[1,"fa","fa-5x","fa-exclamation-triangle","fwcRed"],["type","button","pButton","","icon","fa fa-refresh",1,"p-button-warning",3,"disabled","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"p-button-warning",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(a){return y(o),w(r.onShowDialog(a))})("onHide",function(a){return y(o),w(r.onHideDialog(a))}),v(2,s7e,5,3,"ng-template",3),m(3,"div",4)(4,"div",5),v(5,a7e,8,9,"h6",6),g(),v(6,m7e,5,2,"div",5)(7,g7e,9,4,"div",5),g(),v(8,C7e,3,5,"ng-template",7),g(),m(9,"p-overlayPanel",8,1)(11,"div",9)(12,"h6"),F(13,"Error"),g(),m(14,"p"),F(15),D(16,"json"),g()()()}t&2&&(st(Ae(11,r7e)),Te("visible",r.displayDialog),f("modal",!0)("closable",!1),p(5),W(r.options!=null&&r.options.parentObject?5:-1),p(),W(r.optionsErrorMessage?-1:6),p(),W(r.optionsErrorMessage?7:-1),p(8),J(" ",N(16,9,r.operationOverlayMessage)," "))},styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.tableBatchOps{font-size:.9rem}.tableBatchOps tr th{text-align:center}.tableBatchOps tr td:nth-child(2){text-align:center}.tableBatchOps tr td:nth-child(3){text-align:right}.tableBatchOps tr.trInProgress{background:var(--fwcPaleBlue)}.tableBatchOps tr.trInProgress td:first-child{font-weight:700}.divOverlayMessage{max-width:25rem}
`],encapsulation:2,changeDetection:0})}}return i})();var dz=No(Gc());function I7e(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"PANELS.WINDOWS_INSTALLER.TITLE")," "))}function y7e(i,n){i&1&&(m(0,"div",5),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"PANELS.WINDOWS_INSTALLER.DESC")," "))}function w7e(i,n){if(i&1){let e=L();v(0,y7e,3,3,"div",5),m(1,"div",5)(2,"div",10)(3,"span",11)(4,"label",12),F(5),D(6,"translate"),g()(),m(7,"span",11)(8,"input",13,1),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.connection_name,r)||(o.connection_name=r),w(r)}),g()(),m(10,"span",11)(11,"button",14),D(12,"translate"),k("click",function(){y(e);let r=u();return w(r.doGenerateFile())}),g()()()()}if(i&2){let e=He(9),t=u();W(t.opMessage?-1:0),p(5),$(N(6,7,"PANELS.WINDOWS_INSTALLER.FIELDS.NOMBRE_CON")),p(3),Te("ngModel",t.connection_name),f("pattern",t.CommonValidators.connNameRegExp)("required",!0),p(3),Q("label",N(12,9,"PANELS.WINDOWS_INSTALLER.BUTTONS.GENERATE")),f("disabled",e.invalid)}}function v7e(i,n){if(i&1){let e=L();m(0,"div",16)(1,"button",17),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.opMessage=void 0)}),g()()}i&2&&(p(),Q("label",N(2,1,"PANELS.WINDOWS_INSTALLER.BUTTONS.TRY_AGAIN")))}function b7e(i,n){if(i&1&&(m(0,"div",5),P(1,"sts-fwc-message",15),v(2,v7e,3,3,"div",16),g()),i&2){let e=u();p(),f("message",e.opMessage),p(),W(e.opMessage.type==="error"?2:-1)}}function S7e(i,n){if(i&1){let e=L();m(0,"button",18),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var pz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_){super(e,t,r,o,_,c),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.cd=o,this.translate=s,this.fwcUserService=a,this.utilService=l,this.router=c,this.fwcCloudService=d,this.fwcFirewallService=h,this.store=_,this.CommonValidators=Pt,this.createDialog(s.instant("PANELS.WINDOWS_INSTALLER.TITLE"),"fa-brands fa-windows",ri.VPN_WINDOWS_INSTALLER)}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}showDialog(e){this.data=Object.assign({},e),this.connection_name=this.data.parentConfigName||"",this.connection_name=this.connection_name.replace(/\./gi,"_").substr(0,32),super.showDialog()}doGenerateFile(){return B(this,null,function*(){if(!this.data)return;this.opMessage={type:"loading",title:this.translate.instant("PANELS.WINDOWS_INSTALLER.INFO.GENERATING.HEADER"),text:this.translate.instant("PANELS.WINDOWS_INSTALLER.INFO.GENERATING.TEXT")};let e;if(this.data.cluster)try{let r=(yield this.utilService.fwcAPICall(this.fwcFirewallService.getClusterMasterNode.bind(this.fwcFirewallService),this.data.cluster,this.fwcUserService.getActualFwSelectedCloud())).data;r&&(e=r.id)}catch{}else e=this.data.firewall;e?(this.loadingData=!0,this.utilService.fwcAPICall(this.fwcCloudService.generateWindowsInstaller.bind(this.fwcCloudService),this.data.fwcloud,e,this.data.vpn,this.connection_name).then(t=>{let r=this.data.fwcloudName||"FWCLOUD",o;this.data.cluster?o=this.data.clusterName||"VPN":o=this.data.firewallName||"VPN";let s=r.trim()+"-"+o.trim()+"-"+this.connection_name.trim()+".exe";(0,dz.saveAs)(t.body,s),this.opMessage={type:"success",title:this.translate.instant("PANELS.WINDOWS_INSTALLER.INFO.SUCCESS_GEN.HEADER"),text:this.translate.instant("PANELS.WINDOWS_INSTALLER.INFO.SUCCESS_GEN.TEXT")},this.loadingData=!1}).catch(t=>{this.opMessage={type:"error",title:this.translate.instant("PANELS.WINDOWS_INSTALLER.ERRORS.GEN.HEADER"),text:this.translate.instant("PANELS.WINDOWS_INSTALLER.ERRORS.GEN.TEXT")},this.loadingData=!1})):this.opMessage={type:"error",title:this.translate.instant("PANELS.WINDOWS_INSTALLER.ERRORS.GEN.HEADER"),text:this.translate.instant("PANELS.WINDOWS_INSTALLER.ERRORS.GEN.TEXT")}})}resetState(){this.connection_name="",this.opMessage=void 0}onDialogHide(){this.resetState()}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(we),S(Ye),S(at),S(ft),S(ct),S(ta),S(Dt),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-vpn-windows-installer-panel"]],features:[et([_e,ta,Dt]),Se],decls:7,vars:5,consts:[["dlgWindowsInstallerDialog",""],["inputName","ngModel"],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fa","fa-magic","fwcOrange"],[1,"divInlineInput"],[1,"spanField"],[1,"fwcBlue"],["type","text","pInputText","","name","name","maxlength","32",2,"min-width","12rem",3,"ngModelChange","ngModel","pattern","required"],["type","button","pButton","","icon","fa fa-cloud-download",1,"p-button-primary",3,"click","disabled","label"],[3,"message"],[1,"fwc-centered"],["type","button","pButton","","icon","fa fa-refresh",1,"p-button-primary",3,"click","label"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)})("onHide",function(){return y(o),w(r.onDialogHide())}),v(2,I7e,5,3,"ng-template",3),m(3,"div",4),v(4,w7e,13,11,"div",5)(5,b7e,3,2,"div",5),g(),v(6,S7e,2,4,"ng-template",6),g()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(4),W(r.opMessage?5:4))},dependencies:[Li,Pi,S_,Jn,JT,mn,Yt,Ee,pt,Xi,Fn,gt]})}}return i})();function QF(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Hh=QF();function _z(i){Hh=i}var Cz=/[&<>"']/,E7e=new RegExp(Cz.source,"g"),Iz=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,A7e=new RegExp(Iz.source,"g"),x7e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},uz=i=>x7e[i];function za(i,n){if(n){if(Cz.test(i))return i.replace(E7e,uz)}else if(Iz.test(i))return i.replace(A7e,uz);return i}var T7e=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function O7e(i){return i.replace(T7e,(n,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}var R7e=/(^|[^\[])\^/g;function tr(i,n){let e=typeof i=="string"?i:i.source;n=n||"";let t={replace:(r,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(R7e,"$1"),e=e.replace(r,s),t},getRegex:()=>new RegExp(e,n)};return t}function hz(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}var NC={exec:()=>null};function fz(i,n){let e=i.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),t=e.split(/ \|/),r=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),n)if(t.length>n)t.splice(n);else for(;t.length<n;)t.push("");for(;r<t.length;r++)t[r]=t[r].trim().replace(/\\\|/g,"|");return t}function jS(i,n,e){let t=i.length;if(t===0)return"";let r=0;for(;r<t;){let o=i.charAt(t-r-1);if(o===n&&!e)r++;else if(o!==n&&e)r++;else break}return i.slice(0,t-r)}function P7e(i,n){if(i.indexOf(n[1])===-1)return-1;let e=0;for(let t=0;t<i.length;t++)if(i[t]==="\\")t++;else if(i[t]===n[0])e++;else if(i[t]===n[1]&&(e--,e<0))return t;return-1}function mz(i,n,e,t){let r=n.href,o=n.title?za(n.title):null,s=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){t.state.inLink=!0;let a={type:"link",raw:e,href:r,title:o,text:s,tokens:t.inlineTokens(s)};return t.state.inLink=!1,a}return{type:"image",raw:e,href:r,title:o,text:za(s)}}function D7e(i,n){let e=i.match(/^(\s+)(?:```)/);if(e===null)return n;let t=e[1];return n.split(`
`).map(r=>{let o=r.match(/^\s+/);if(o===null)return r;let[s]=o;return s.length>=t.length?r.slice(t.length):r}).join(`
`)}var wg=class{options;rules;lexer;constructor(n){this.options=n||Hh}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:jS(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=D7e(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(/#$/.test(t)){let r=jS(t,"#");(this.options.pedantic||!r||/ $/.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:e[0]}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);t=jS(t.replace(/^ *>[ \t]?/gm,""),`
`);let r=this.lexer.state.top;this.lexer.state.top=!0;let o=this.lexer.blockTokens(t);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:o,text:t}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,o={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let s=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",l="",c=!1;for(;n;){let d=!1;if(!(e=s.exec(n))||this.rules.block.hr.test(n))break;a=e[0],n=n.substring(a.length);let h=e[2].split(`
`,1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),_=n.split(`
`,1)[0],C=0;this.options.pedantic?(C=2,l=h.trimStart()):(C=e[2].search(/[^ ]/),C=C>4?1:C,l=h.slice(C),C+=e[1].length);let I=!1;if(!h&&/^ *$/.test(_)&&(a+=_+`
`,n=n.substring(_.length+1),d=!0),!d){let R=new RegExp(`^ {0,${Math.min(3,C-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),T=new RegExp(`^ {0,${Math.min(3,C-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),A=new RegExp(`^ {0,${Math.min(3,C-1)}}(?:\`\`\`|~~~)`),U=new RegExp(`^ {0,${Math.min(3,C-1)}}#`);for(;n;){let z=n.split(`
`,1)[0];if(_=z,this.options.pedantic&&(_=_.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),A.test(_)||U.test(_)||R.test(_)||T.test(n))break;if(_.search(/[^ ]/)>=C||!_.trim())l+=`
`+_.slice(C);else{if(I||h.search(/[^ ]/)>=4||A.test(h)||U.test(h)||T.test(h))break;l+=`
`+_}!I&&!_.trim()&&(I=!0),a+=z+`
`,n=n.substring(z.length+1),h=_.slice(C)}}o.loose||(c?o.loose=!0:/\n *\n *$/.test(a)&&(c=!0));let b=null,E;this.options.gfm&&(b=/^\[[ xX]\] /.exec(l),b&&(E=b[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:a,task:!!b,checked:E,loose:!1,text:l,tokens:[]}),o.raw+=a}o.items[o.items.length-1].raw=a.trimEnd(),o.items[o.items.length-1].text=l.trimEnd(),o.raw=o.raw.trimEnd();for(let d=0;d<o.items.length;d++)if(this.lexer.state.top=!1,o.items[d].tokens=this.lexer.blockTokens(o.items[d].text,[]),!o.loose){let h=o.items[d].tokens.filter(C=>C.type==="space"),_=h.length>0&&h.some(C=>/\n.*\n/.test(C.raw));o.loose=_}if(o.loose)for(let d=0;d<o.items.length;d++)o.items[d].loose=!0;return o}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:o}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!/[:|]/.test(e[2]))return;let t=fz(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),o=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let a of r)/^ *-+: *$/.test(a)?s.align.push("right"):/^ *:-+: *$/.test(a)?s.align.push("center"):/^ *:-+ *$/.test(a)?s.align.push("left"):s.align.push(null);for(let a of t)s.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of o)s.rows.push(fz(a,s.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return s}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:za(e[1])}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;let s=jS(t.slice(0,-1),"\\");if((t.length-s.length)%2===0)return}else{let s=P7e(e[2],"()");if(s>-1){let l=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],o="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(t)?r=r.slice(1):r=r.slice(1,-1)),mz(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(/\s+/g," "),o=e[r.toLowerCase()];if(!o){let s=t[0].charAt(0);return{type:"text",raw:s,text:s}}return mz(t,o,t[0],this.lexer)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!r||r[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let s=[...r[0]].length-1,a,l,c=s,d=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*n.length+s);(r=h.exec(e))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){c+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){d+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+d);let _=[...r[0]][0].length,C=n.slice(0,s+r.index+_+l);if(Math.min(s,l)%2){let b=C.slice(1,-1);return{type:"em",raw:C,text:b,tokens:this.lexer.inlineTokens(b)}}let I=C.slice(2,-2);return{type:"strong",raw:C,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(/\n/g," "),r=/[^ ]/.test(t),o=/^ /.test(t)&&/ $/.test(t);return r&&o&&(t=t.substring(1,t.length-1)),t=za(t,!0),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=za(e[1]),r="mailto:"+t):(t=za(e[1]),r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=za(e[0]),r="mailto:"+t;else{let o;do o=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(o!==e[0]);t=za(e[0]),e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t;return this.lexer.state.inRawBlock?t=e[0]:t=za(e[0]),{type:"text",raw:e[0],text:t}}}},F7e=/^(?: *(?:\n|$))+/,k7e=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,N7e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,MC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,L7e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,yz=/(?:[*+-]|\d{1,9}[.)])/,wz=tr(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,yz).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ZF=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,M7e=/^[^\n]+/,ek=/(?!\s*\])(?:\\.|[^\[\]\\])+/,V7e=tr(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ek).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),B7e=tr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,yz).getRegex(),WS="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",tk=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,U7e=tr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",tk).replace("tag",WS).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vz=tr(ZF).replace("hr",MC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",WS).getRegex(),j7e=tr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vz).getRegex(),ik={blockquote:j7e,code:k7e,def:V7e,fences:N7e,heading:L7e,hr:MC,html:U7e,lheading:wz,list:B7e,newline:F7e,paragraph:vz,table:NC,text:M7e},gz=tr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",MC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",WS).getRegex(),G7e=ke(oe({},ik),{table:gz,paragraph:tr(ZF).replace("hr",MC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",gz).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",WS).getRegex()}),H7e=ke(oe({},ik),{html:tr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",tk).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:NC,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tr(ZF).replace("hr",MC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wz).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),bz=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,W7e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Sz=/^( {2,}|\\)\n(?!\s*$)/,z7e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,VC="\\p{P}\\p{S}",K7e=tr(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,VC).getRegex(),$7e=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,J7e=tr(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,VC).getRegex(),q7e=tr("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,VC).getRegex(),Y7e=tr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,VC).getRegex(),X7e=tr(/\\([punct])/,"gu").replace(/punct/g,VC).getRegex(),Q7e=tr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Z7e=tr(tk).replace("(?:-->|$)","-->").getRegex(),e9e=tr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Z7e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),HS=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,t9e=tr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",HS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ez=tr(/^!?\[(label)\]\[(ref)\]/).replace("label",HS).replace("ref",ek).getRegex(),Az=tr(/^!?\[(ref)\](?:\[\])?/).replace("ref",ek).getRegex(),i9e=tr("reflink|nolink(?!\\()","g").replace("reflink",Ez).replace("nolink",Az).getRegex(),nk={_backpedal:NC,anyPunctuation:X7e,autolink:Q7e,blockSkip:$7e,br:Sz,code:W7e,del:NC,emStrongLDelim:J7e,emStrongRDelimAst:q7e,emStrongRDelimUnd:Y7e,escape:bz,link:t9e,nolink:Az,punctuation:K7e,reflink:Ez,reflinkSearch:i9e,tag:e9e,text:z7e,url:NC},n9e=ke(oe({},nk),{link:tr(/^!?\[(label)\]\((.*?)\)/).replace("label",HS).getRegex(),reflink:tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",HS).getRegex()}),YF=ke(oe({},nk),{escape:tr(bz).replace("])","~|])").getRegex(),url:tr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),r9e=ke(oe({},YF),{br:tr(Sz).replace("{2,}","*").getRegex(),text:tr(YF.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),GS={normal:ik,gfm:G7e,pedantic:H7e},kC={normal:nk,gfm:YF,breaks:r9e,pedantic:n9e},Qd=class i{tokens;options;state;tokenizer;inlineQueue;constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Hh,this.options.tokenizer=this.options.tokenizer||new wg,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={block:GS.normal,inline:kC.normal};this.options.pedantic?(e.block=GS.pedantic,e.inline=kC.pedantic):this.options.gfm&&(e.block=GS.gfm,this.options.breaks?e.inline=kC.breaks:e.inline=kC.gfm),this.tokenizer.rules=e}static get rules(){return{block:GS,inline:kC}}static lex(n,e){return new i(e).lex(n)}static lexInline(n,e){return new i(e).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`),this.blockTokens(n,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(n,e=[]){this.options.pedantic?n=n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n=n.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let t,r,o,s;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(t=a.call({lexer:this},n,e))?(n=n.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.space(n)){n=n.substring(t.raw.length),t.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(t);continue}if(t=this.tokenizer.code(n)){n=n.substring(t.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(t);continue}if(t=this.tokenizer.fences(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.heading(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.hr(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.blockquote(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.list(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.html(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.def(n)){n=n.substring(t.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+t.raw,r.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.lheading(n)){n=n.substring(t.raw.length),e.push(t);continue}if(o=n,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=n.slice(1),c;this.options.extensions.startBlock.forEach(d=>{c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=n.substring(0,a+1))}if(this.state.top&&(t=this.tokenizer.paragraph(o))){r=e[e.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(t),s=o.length!==n.length,n=n.substring(t.raw.length);continue}if(t=this.tokenizer.text(n)){n=n.substring(t.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+t.raw,r.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(t);continue}if(n){let a="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(n,e=[]){return this.inlineQueue.push({src:n,tokens:e}),e}inlineTokens(n,e=[]){let t,r,o,s=n,a,l,c;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;n;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(t=d.call({lexer:this},n,e))?(n=n.substring(t.raw.length),e.push(t),!0):!1))){if(t=this.tokenizer.escape(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.tag(n)){n=n.substring(t.raw.length),r=e[e.length-1],r&&t.type==="text"&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):e.push(t);continue}if(t=this.tokenizer.link(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(t.raw.length),r=e[e.length-1],r&&t.type==="text"&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):e.push(t);continue}if(t=this.tokenizer.emStrong(n,s,c)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.codespan(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.br(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.del(n)){n=n.substring(t.raw.length),e.push(t);continue}if(t=this.tokenizer.autolink(n)){n=n.substring(t.raw.length),e.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(n))){n=n.substring(t.raw.length),e.push(t);continue}if(o=n,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=n.slice(1),_;this.options.extensions.startInline.forEach(C=>{_=C.call({lexer:this},h),typeof _=="number"&&_>=0&&(d=Math.min(d,_))}),d<1/0&&d>=0&&(o=n.substring(0,d+1))}if(t=this.tokenizer.inlineText(o)){n=n.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(c=t.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=t.raw,r.text+=t.text):e.push(t);continue}if(n){let d="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return e}},Wc=class{options;constructor(n){this.options=n||Hh}code(n,e,t){let r=(e||"").match(/^\S*/)?.[0];return n=n.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+za(r)+'">'+(t?n:za(n,!0))+`</code></pre>
`:"<pre><code>"+(t?n:za(n,!0))+`</code></pre>
`}blockquote(n){return`<blockquote>
${n}</blockquote>
`}html(n,e){return n}heading(n,e,t){return`<h${e}>${n}</h${e}>
`}hr(){return`<hr>
`}list(n,e,t){let r=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+r+o+`>
`+n+"</"+r+`>
`}listitem(n,e,t){return`<li>${n}</li>
`}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(n){return`<p>${n}</p>
`}table(n,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+e+`</table>
`}tablerow(n){return`<tr>
${n}</tr>
`}tablecell(n,e){let t=e.header?"th":"td";return(e.align?`<${t} align="${e.align}">`:`<${t}>`)+n+`</${t}>
`}strong(n){return`<strong>${n}</strong>`}em(n){return`<em>${n}</em>`}codespan(n){return`<code>${n}</code>`}br(){return"<br>"}del(n){return`<del>${n}</del>`}link(n,e,t){let r=hz(n);if(r===null)return t;n=r;let o='<a href="'+n+'"';return e&&(o+=' title="'+e+'"'),o+=">"+t+"</a>",o}image(n,e,t){let r=hz(n);if(r===null)return t;n=r;let o=`<img src="${n}" alt="${t}"`;return e&&(o+=` title="${e}"`),o+=">",o}text(n){return n}},LC=class{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,e,t){return""+t}image(n,e,t){return""+t}br(){return""}},Zd=class i{options;renderer;textRenderer;constructor(n){this.options=n||Hh,this.options.renderer=this.options.renderer||new Wc,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new LC}static parse(n,e){return new i(e).parse(n)}static parseInline(n,e){return new i(e).parseInline(n)}parse(n,e=!0){let t="";for(let r=0;r<n.length;r++){let o=n[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=o,a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){t+=a||"";continue}}switch(o.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{let s=o;t+=this.renderer.heading(this.parseInline(s.tokens),s.depth,O7e(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{let s=o;t+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{let s=o,a="",l="";for(let d=0;d<s.header.length;d++)l+=this.renderer.tablecell(this.parseInline(s.header[d].tokens),{header:!0,align:s.align[d]});a+=this.renderer.tablerow(l);let c="";for(let d=0;d<s.rows.length;d++){let h=s.rows[d];l="";for(let _=0;_<h.length;_++)l+=this.renderer.tablecell(this.parseInline(h[_].tokens),{header:!1,align:s.align[_]});c+=this.renderer.tablerow(l)}t+=this.renderer.table(a,c);continue}case"blockquote":{let s=o,a=this.parse(s.tokens);t+=this.renderer.blockquote(a);continue}case"list":{let s=o,a=s.ordered,l=s.start,c=s.loose,d="";for(let h=0;h<s.items.length;h++){let _=s.items[h],C=_.checked,I=_.task,b="";if(_.task){let E=this.renderer.checkbox(!!C);c?_.tokens.length>0&&_.tokens[0].type==="paragraph"?(_.tokens[0].text=E+" "+_.tokens[0].text,_.tokens[0].tokens&&_.tokens[0].tokens.length>0&&_.tokens[0].tokens[0].type==="text"&&(_.tokens[0].tokens[0].text=E+" "+_.tokens[0].tokens[0].text)):_.tokens.unshift({type:"text",text:E+" "}):b+=E+" "}b+=this.parse(_.tokens,c),d+=this.renderer.listitem(b,I,!!C)}t+=this.renderer.list(d,a,l);continue}case"html":{let s=o;t+=this.renderer.html(s.text,s.block);continue}case"paragraph":{let s=o;t+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=o,a=s.tokens?this.parseInline(s.tokens):s.text;for(;r+1<n.length&&n[r+1].type==="text";)s=n[++r],a+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);t+=e?this.renderer.paragraph(a):a;continue}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return t}parseInline(n,e){e=e||this.renderer;let t="";for(let r=0;r<n.length;r++){let o=n[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){let s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){t+=s||"";continue}}switch(o.type){case"escape":{let s=o;t+=e.text(s.text);break}case"html":{let s=o;t+=e.html(s.text);break}case"link":{let s=o;t+=e.link(s.href,s.title,this.parseInline(s.tokens,e));break}case"image":{let s=o;t+=e.image(s.href,s.title,s.text);break}case"strong":{let s=o;t+=e.strong(this.parseInline(s.tokens,e));break}case"em":{let s=o;t+=e.em(this.parseInline(s.tokens,e));break}case"codespan":{let s=o;t+=e.codespan(s.text);break}case"br":{t+=e.br();break}case"del":{let s=o;t+=e.del(this.parseInline(s.tokens,e));break}case"text":{let s=o;t+=e.text(s.text);break}default:{let s='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return t}},yg=class{options;constructor(n){this.options=n||Hh}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}},XF=class{defaults=QF();options=this.setOptions;parse=this.#e(Qd.lex,Zd.parse);parseInline=this.#e(Qd.lexInline,Zd.parseInline);Parser=Zd;Renderer=Wc;TextRenderer=LC;Lexer=Qd;Tokenizer=wg;Hooks=yg;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let o=r;for(let s of o.header)t=t.concat(this.walkTokens(s.tokens,e));for(let s of o.rows)for(let a of s)t=t.concat(this.walkTokens(a.tokens,e));break}case"list":{let o=r;t=t.concat(this.walkTokens(o.items,e));break}default:{let o=r;this.defaults.extensions?.childTokens?.[o.type]?this.defaults.extensions.childTokens[o.type].forEach(s=>{let a=o[s].flat(1/0);t=t.concat(this.walkTokens(a,e))}):o.tokens&&(t=t.concat(this.walkTokens(o.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r=oe({},t);if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){let s=e.renderers[o.name];s?e.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:e.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[o.level];s?s.unshift(o.tokenizer):e[o.level]=[o.tokenizer],o.start&&(o.level==="block"?e.startBlock?e.startBlock.push(o.start):e.startBlock=[o.start]:o.level==="inline"&&(e.startInline?e.startInline.push(o.start):e.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(e.childTokens[o.name]=o.childTokens)}),r.extensions=e),t.renderer){let o=this.defaults.renderer||new Wc(this.defaults);for(let s in t.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;let a=s,l=t.renderer[a],c=o[a];o[a]=(...d)=>{let h=l.apply(o,d);return h===!1&&(h=c.apply(o,d)),h||""}}r.renderer=o}if(t.tokenizer){let o=this.defaults.tokenizer||new wg(this.defaults);for(let s in t.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,l=t.tokenizer[a],c=o[a];o[a]=(...d)=>{let h=l.apply(o,d);return h===!1&&(h=c.apply(o,d)),h}}r.tokenizer=o}if(t.hooks){let o=this.defaults.hooks||new yg;for(let s in t.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;let a=s,l=t.hooks[a],c=o[a];yg.passThroughHooks.has(s)?o[a]=d=>{if(this.defaults.async)return Promise.resolve(l.call(o,d)).then(_=>c.call(o,_));let h=l.call(o,d);return c.call(o,h)}:o[a]=(...d)=>{let h=l.apply(o,d);return h===!1&&(h=c.apply(o,d)),h}}r.hooks=o}if(t.walkTokens){let o=this.defaults.walkTokens,s=t.walkTokens;r.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults=oe(oe({},this.defaults),r)}),this}setOptions(n){return this.defaults=oe(oe({},this.defaults),n),this}lexer(n,e){return Qd.lex(n,e??this.defaults)}parser(n,e){return Zd.parse(n,e??this.defaults)}#e(n,e){return(t,r)=>{let o=oe({},r),s=oe(oe({},this.defaults),o);this.defaults.async===!0&&o.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);let a=this.#t(!!s.silent,!!s.async);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(t):t).then(l=>n(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>e(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(a);try{s.hooks&&(t=s.hooks.preprocess(t));let l=n(t,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let c=e(l,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(l){return a(l)}}}#t(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+za(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},Gh=new XF;function Pn(i,n){return Gh.parse(i,n)}Pn.options=Pn.setOptions=function(i){return Gh.setOptions(i),Pn.defaults=Gh.defaults,_z(Pn.defaults),Pn};Pn.getDefaults=QF;Pn.defaults=Hh;Pn.use=function(...i){return Gh.use(...i),Pn.defaults=Gh.defaults,_z(Pn.defaults),Pn};Pn.walkTokens=function(i,n){return Gh.walkTokens(i,n)};Pn.parseInline=Gh.parseInline;Pn.Parser=Zd;Pn.parser=Zd.parse;Pn.Renderer=Wc;Pn.TextRenderer=LC;Pn.Lexer=Qd;Pn.lexer=Qd.lex;Pn.Tokenizer=wg;Pn.Hooks=yg;Pn.parse=Pn;var f7t=Pn.options,m7t=Pn.setOptions,g7t=Pn.use,_7t=Pn.walkTokens,C7t=Pn.parseInline;var I7t=Zd.parse,y7t=Qd.lex;var o9e=["*"],s9e="Copy",a9e="Copied",l9e=(()=>{class i{constructor(){this._buttonClick$=new Ue,this.copied$=this._buttonClick$.pipe(xo(()=>wE(vt(!0),El(3e3).pipe(Mu(!1)))),qc(),nf(1)),this.copiedText$=this.copied$.pipe(Bg(!1),K(e=>e?a9e:s9e))}onCopyToClipboardClick(){this._buttonClick$.next()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=se({type:i,selectors:[["markdown-clipboard"]],standalone:!0,features:[Ct],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(t,r){t&1&&(m(0,"button",0),D(1,"async"),k("click",function(){return r.onCopyToClipboardClick()}),F(2),D(3,"async"),g()),t&2&&(Dn("copied",N(1,3,r.copied$)),p(2),$(N(3,5,r.copiedText$)))},dependencies:[A4],encapsulation:2,changeDetection:0})}}return i})(),c9e=new Xe("CLIPBOARD_OPTIONS");var rk=function(i){return i.CommandLine="command-line",i.LineHighlight="line-highlight",i.LineNumbers="line-numbers",i}(rk||{}),Tz=new Xe("MARKED_EXTENSIONS"),d9e=new Xe("MARKED_OPTIONS"),p9e="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",u9e="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",h9e="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",f9e="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",m9e="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",g9e="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",Oz=new Xe("SECURITY_CONTEXT");var Rz=(()=>{class i{get options(){return this._options}set options(e){this._options=oe(oe({},this.DEFAULT_MARKED_OPTIONS),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}constructor(e,t,r,o,s,a,l){this.clipboardOptions=e,this.extensions=t,this.platform=o,this.securityContext=s,this.http=a,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new Wc},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ue,this.reload$=this._reload$.asObservable(),this.options=r}parse(e,t=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:r,inline:o,emoji:s,mermaid:a,disableSanitizer:l}=t,c=oe(oe({},this.options),t.markedOptions),d=c.renderer||this.renderer||new Wc;this.extensions&&(this.renderer=this.extendsRendererForExtensions(d)),a&&(this.renderer=this.extendsRendererForMermaid(d));let h=this.trimIndentation(e),_=r?this.decodeHtml(h):h,C=s?this.parseEmoji(_):_,I=this.parseMarked(C,c,o);return(l?I:this.sanitizer.sanitize(this.securityContext,I))||""}render(e,t=this.DEFAULT_RENDER_OPTIONS,r){let{clipboard:o,clipboardOptions:s,katex:a,katexOptions:l,mermaid:c,mermaidOptions:d}=t;a&&this.renderKatex(e,oe(oe({},this.DEFAULT_KATEX_OPTIONS),l)),c&&this.renderMermaid(e,oe(oe({},this.DEFAULT_MERMAID_OPTIONS),d)),o&&this.renderClipboard(e,r,oe(oe(oe({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),s)),this.highlight(e)}reload(){this._reload$.next()}getSource(e){if(!this.http)throw new Error(g9e);return this.http.get(e,{responseType:"text"}).pipe(K(t=>this.handleExtension(e,t)))}highlight(e){if(!bt(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;e||(e=document);let t=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(t,r=>r.classList.add("language-none")),Prism.highlightAllUnder(e)}decodeHtml(e){if(!bt(this.platform))return e;let t=document.createElement("textarea");return t.innerHTML=e,t.value}extendsRendererForExtensions(e){let t=e;return t.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Pn.use(...this.extensions),t.\u0275NgxMarkdownRendererExtendedForExtensions=!0),e}extendsRendererForMermaid(e){let t=e;if(t.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return e;let r=e.code;return e.code=function(o,s,a){return s==="mermaid"?`<div class="mermaid">${o}</div>`:r.call(this,o,s,a)},t.\u0275NgxMarkdownRendererExtendedForMermaid=!0,e}handleExtension(e,t){let r=e.lastIndexOf("://"),o=r>-1?e.substring(r+4):e,s=o.lastIndexOf("/"),a=s>-1?o.substring(s+1).split("?")[0]:"",l=a.lastIndexOf("."),c=l>-1?a.substring(l+1):"";return c&&c!=="md"?"```"+c+`
`+t+"\n```":t}parseMarked(e,t,r=!1){if(t.renderer){let o=oe({},t.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete t.renderer,Pn.use({renderer:o})}return r?Pn.parseInline(e,t):Pn.parse(e,t)}parseEmoji(e){if(!bt(this.platform))return e;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(p9e);return joypixels.shortnameToUnicode(e)}renderKatex(e,t){if(bt(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(u9e);renderMathInElement(e,t)}}renderClipboard(e,t,r){if(!bt(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(f9e);if(!t)throw new Error(m9e);let{buttonComponent:o,buttonTemplate:s}=r,a=e.querySelectorAll("pre");for(let l=0;l<a.length;l++){let c=a.item(l),d=document.createElement("div");d.style.position="relative",c.parentNode.insertBefore(d,c),d.appendChild(c);let h=document.createElement("div");h.classList.add("markdown-clipboard-toolbar"),h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.zIndex="1",d.insertAdjacentElement("beforeend",h),d.onmouseenter=()=>h.classList.add("hover"),d.onmouseleave=()=>h.classList.remove("hover");let _;if(o){let I=t.createComponent(o);_=I.hostView,I.changeDetectorRef.markForCheck()}else if(s)_=t.createEmbeddedView(s);else{let I=t.createComponent(l9e);_=I.hostView,I.changeDetectorRef.markForCheck()}let C;_.rootNodes.forEach(I=>{h.appendChild(I),C=new ClipboardJS(I,{text:()=>c.innerText})}),_.onDestroy(()=>C.destroy())}}renderMermaid(e,t=this.DEFAULT_MERMAID_OPTIONS){if(!bt(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(h9e);let r=e.querySelectorAll(".mermaid");r.length!==0&&(mermaid.initialize(t),mermaid.run({nodes:r}))}trimIndentation(e){if(!e)return"";let t;return e.split(`
`).map(r=>{let o=t;return r.length>0&&(o=isNaN(o)?r.search(/\S|$/):Math.min(r.search(/\S|$/),o)),isNaN(t)&&(t=o),o?r.substring(o):r}).join(`
`)}static{this.\u0275fac=function(t){return new(t||i)(de(c9e,8),de(Tz,8),de(d9e,8),de(ai),de(Oz),de(ti,8),de(Dl))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac})}}return i})(),zS=(()=>{class i{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(e){this._disableSanitizer=this.coerceBooleanProperty(e)}get inline(){return this._inline}set inline(e){this._inline=this.coerceBooleanProperty(e)}get clipboard(){return this._clipboard}set clipboard(e){this._clipboard=this.coerceBooleanProperty(e)}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get mermaid(){return this._mermaid}set mermaid(e){this._mermaid=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}get commandLine(){return this._commandLine}set commandLine(e){this._commandLine=this.coerceBooleanProperty(e)}constructor(e,t,r){this.element=e,this.markdownService=t,this.viewContainerRef=r,this.error=new X,this.load=new X,this.ready=new X,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Ue}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Vu(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(e,t=!1){return B(this,null,function*(){let r={decodeHtml:t,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},s=yield this.markdownService.parse(e,r);this.element.nativeElement.innerHTML=s,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(e){return e!=null&&`${String(e)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:e=>{this.render(e).then(()=>{this.load.emit(e)})},error:e=>this.error.emit(e)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,rk.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,rk.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,t){let r=e.querySelectorAll("pre");for(let o=0;o<r.length;o++){let s=t instanceof Array?t:[t];r.item(o).classList.add(...s)}}setPluginOptions(e,t){let r=e.querySelectorAll("pre");for(let o=0;o<r.length;o++)Object.keys(t).forEach(s=>{let a=t[s];if(a){let l=this.toLispCase(s);r.item(o).setAttribute(l,a.toString())}})}toLispCase(e){let t=e.match(/([A-Z])/g);if(!t)return e;let r=e.toString();for(let o=0,s=t.length;o<s;o++)r=r.replace(new RegExp(t[o]),"-"+t[o].toLowerCase());return r.slice(0,1)==="-"&&(r=r.slice(1)),r}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(Rz),S(Ro))}}static{this.\u0275cmp=se({type:i,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Yi,Ct],ngContentSelectors:o9e,decls:1,vars:0,template:function(t,r){t&1&&($i(),hi(0))},encapsulation:2})}}return i})();function _9e(i){return[Rz,i?.loader??[],i?.clipboardOptions??[],i?.markedOptions??[],{provide:Tz,useValue:i?.markedExtensions??[]},{provide:Oz,useValue:i?.sanitize??wa.HTML}]}var Pz=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[_9e(e)]}}static forChild(){return{ngModule:i}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({imports:[it]})}}return i})(),xz;(function(i){let n;(function(r){r.Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox"})(n=i.SecurityLevel||(i.SecurityLevel={}));let e;(function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"})(e=i.Theme||(i.Theme={}));let t;(function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"})(t=i.LogLevel||(i.LogLevel={}))})(xz||(xz={}));var Dz=i=>({display:i}),I9e=()=>({width:"2rem",height:"2rem"});function y9e(i,n){if(i&1&&(m(0,"div",10)(1,"h6",11),P(2,"i",12),F(3),g()()),i&2){let e=u();p(2),f("ngClass",e.icon),p(),J(" ",e.title," ")}}function w9e(i,n){i&1&&(m(0,"div",4),P(1,"p-progressSpinner"),g()),i&2&&(p(),st(Ae(2,I9e)))}function v9e(i,n){if(i&1){let e=L();m(0,"markdown",13),k("load",function(r){y(e);let o=u();return w(o.onMarkdownLoaded(r))})("error",function(r){y(e);let o=u();return w(o.onMarkdownError(r))}),g()}if(i&2){let e=u();f("src",e.fileName)}}function b9e(i,n){if(i&1){let e=L();m(0,"markdown",14),k("ready",function(r){y(e);let o=u();return w(o.onMarkdownLoaded(r))}),g()}if(i&2){let e=u();f("data",e.markdown)}}function S9e(i,n){if(i&1&&(m(0,"div",8),P(1,"sts-fwc-message",15),g()),i&2){let e=u();p(),f("message",e.errorMessage)}}function E9e(i,n){if(i&1){let e=L();m(0,"button",16),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var K7t=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l){super(e,t,r,o,a,l),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.cd=o,this.translate=s,this.store=a,this.router=l,this.createDialog(s.instant("PANELS.DOCS_PANEL.TITLE"),"fa fa-info",ri.DOCS_PANEL)}ngOnInit(){this.appDialogPanelsService.searchAndShowDialog().pipe(yt(()=>this.alive)).subscribe(e=>{e.uuid===this.dialogUUID&&e.data&&(e.data.fileName||e.data.url||e.data.markdown)&&(this.errorMessage=void 0,this.loadingData=!0,e.data.title&&(this.title=e.data.title),e.data.icon&&(this.icon=e.data.icon),e.data.url?this.fileName=e.data.url:e.data.fileName?this.fileName="./assets/docs/"+e.data.fileName+".md":e.data.markdown&&(this.markdown=e.data.markdown,this.loadingData=!1),this.showDialog())})}ngOnDestroy(){super.ngOnDestroy()}onMarkdownLoaded(e){this.loadingData=!1,setTimeout(()=>{this.recenterDialog()},1)}onMarkdownError(e){this.loadingData=!1,this.errorMessage={type:"error",title:"Error",text:this.translate.instant("PANELS.DOCS_PANEL.ERRORS.READING_FILE",{name:this.fileName})},this.recenterDialog()}onHideDialog(){}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(we),S(Ye),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-docs-panel"]],viewQuery:function(t,r){if(t&1&&le(zS,5),t&2){let o;te(o=ie())&&(r.mdComponent=o.first)}},features:[Se],decls:10,vars:14,consts:[["dlgDocsDialog",""],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"visibleChange","onShow","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid","divMarkdown",3,"ngStyle"],[1,"col-12","fwc-centered"],[1,"col-12","divMarkdown-contents",3,"ngStyle"],[3,"src"],[3,"data"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcOrange",3,"ngClass"],[3,"load","error","src"],[3,"ready","data"],[3,"message"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(!0)})("onHide",function(){return y(o),w(!0)}),v(2,y9e,4,2,"ng-template",2),m(3,"div",3),v(4,w9e,2,3,"div",4),m(5,"div",5),v(6,v9e,1,1,"markdown",6)(7,b9e,1,1,"markdown",7),g(),v(8,S9e,2,1,"div",8),g(),v(9,E9e,2,4,"ng-template",9),g()}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(3),f("ngStyle",ne(10,Dz,r.fileName||r.markdown?"block":"none")),p(),W(r.loadingData?4:-1),p(),f("ngStyle",ne(12,Dz,r.loadingData?"none":"block")),p(),W(r.fileName?6:-1),p(),W(r.markdown?7:-1),p(),W(!r.loadingData&&r.errorMessage?8:-1))},dependencies:[je,De,zS,Yt,Ee,pt,or,Fn,gt],styles:[`.divMarkdown-contents h1{margin-top:0;font-size:2em}.divMarkdown-contents h2{font-size:1.5em}.divMarkdown-contents h3{font-size:1.17em}.divMarkdown-contents h4{font-size:1em}.divMarkdown-contents h5{font-size:.83em}.divMarkdown-contents h6{font-size:.67em}
`],encapsulation:2})}}return i})();var kz=No(Gc());var Fz=(()=>{class i{constructor(){this.units=["bytes","KB","MB","GB","TB","PB"]}transform(e=0,t=2){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"?";let r=0;for(;e>=1024;)e/=1024,r++;return e.toFixed(+t)+" "+this.units[r]}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=ur({name:"fwcFileSize",type:i,pure:!0})}}return i})();var x9e=["fwcMessageComponent"],T9e=["txtExported"];function O9e(i,n){i&1&&ue(0)}function R9e(i,n){if(i&1){let e=L();m(0,"div",21)(1,"textarea",22),D(2,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.iptablesSaveText,r)||(o.iptablesSaveText=r),w(r)}),g()()}if(i&2){let e=u(3);p(),Q("placeholder",N(2,2,"PANELS.IPTABLES_SAVE.IMPORT.INFO.PASTE_HERE")),Te("ngModel",e.iptablesSaveText)}}function P9e(i,n){if(i&1){let e=L();m(0,"div",26),P(1,"i",27),m(2,"span"),F(3),g(),m(4,"span",28),F(5),D(6,"fwcFileSize"),g(),m(7,"button",29),k("click",function(){y(e),u();let r=He(2),o=u(3);return w(o.handleRemoveSelectedFile(r,0))}),g()()}if(i&2){let e=n.$implicit,t=u(4);p(3),$(e.name),p(2),$(N(6,3,e.size)),p(2),f("disabled",t.loadingData||t.success)}}function D9e(i,n){i&1&&(m(0,"div",31),P(1,"i",32)(2,"br"),m(3,"p"),F(4),D(5,"translate"),g()()),i&2&&(p(4),$(N(5,1,"PANELS.FILEUPLOAD_PANEL.SELECT_FILE")))}function F9e(i,n){if(i&1&&v(0,D9e,6,3,"div",30),i&2){u();let e=He(2);f("ngIf",!(e.files!=null&&e.files.length))}}function k9e(i,n){if(i&1){let e=L();m(0,"div",15)(1,"p-fileUpload",23,3),D(3,"translate"),D(4,"translate"),D(5,"translate"),D(6,"translate"),D(7,"translate"),k("onSelect",function(r){y(e);let o=u(3);return w(o.handleSelectFile(r))})("onRemove",function(r){y(e);let o=u(3);return w(o.handleOnRemoveSelectedFile(r))}),v(8,P9e,8,5,"ng-template",24)(9,F9e,1,1,"ng-template",25),g()()}if(i&2){let e=u(3);p(),f("disabled",e.loadingData||e.success)("maxFileSize",1e3*1e3*10)("chooseLabel",N(3,9,"PANELS.IPTABLES_SAVE.BUTTONS.CHOOSE"))("showCancelButton",!1)("showUploadButton",!1)("invalidFileSizeMessageSummary",N(4,11,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_SIZE.SUMMARY"))("invalidFileSizeMessageDetail",N(5,13,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_SIZE.DETAIL"))("invalidFileTypeMessageSummary",N(6,15,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_TYPE.SUMMARY"))("invalidFileTypeMessageDetail",N(7,17,"PANELS.FILEUPLOAD_PANEL.UPLOAD_ERRORS.FILE_TYPE.DETAIL"))}}function N9e(i,n){i&1&&ue(0)}function L9e(i,n){if(i&1&&(m(0,"div",15),v(1,N9e,1,0,"ng-container",33),g()),i&2){u(3);let e=He(4);p(),f("ngTemplateOutlet",e)}}function M9e(i,n){if(i&1){let e=L();m(0,"div",34)(1,"p-checkbox",35),D(2,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.okToImport,r)||(o.okToImport=r),w(r)}),g()()}if(i&2){let e=u(3);p(),Q("label",N(2,3,"WIZARDS.FIREWALL_IMPORT.INFO.WARN_IMPORT")),Te("ngModel",e.okToImport),f("disabled",e.loadingData)}}function V9e(i,n){if(i&1){let e=L();m(0,"div",14)(1,"div",15)(2,"p"),F(3),D(4,"translate"),g()(),m(5,"div",15)(6,"p-radioButton",16),D(7,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(2);return Re(o.selectedImportOption,r)||(o.selectedImportOption=r),w(r)}),g()(),m(8,"div",15)(9,"p-radioButton",16),D(10,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(2);return Re(o.selectedImportOption,r)||(o.selectedImportOption=r),w(r)}),g()(),m(11,"div",17)(12,"p-radioButton",16),D(13,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(2);return Re(o.selectedImportOption,r)||(o.selectedImportOption=r),w(r)}),g()(),P(14,"br"),v(15,R9e,3,4,"div",18)(16,k9e,10,19,"div",19)(17,L9e,2,1,"div",19)(18,M9e,3,5,"div",20),g()}if(i&2){let e=u(2);p(3),$(N(4,17,"PANELS.IPTABLES_SAVE.IMPORT.SELECT_OPTION")),p(3),f("disabled",e.loadingData||e.success)("value",e.FwcIptablesSaveImportOptions.COPYPASTE)("label",N(7,19,"PANELS.IPTABLES_SAVE.IMPORT.OPTIONS.COPY_PASTE")),Te("ngModel",e.selectedImportOption),p(3),f("disabled",e.loadingData||e.success)("value",e.FwcIptablesSaveImportOptions.UPLOAD_FILE)("label",N(10,21,"PANELS.IPTABLES_SAVE.IMPORT.OPTIONS.FILE_UPLOAD")),Te("ngModel",e.selectedImportOption),p(3),f("disabled",e.loadingData||e.success)("value",e.FwcIptablesSaveImportOptions.SSH_OR_AGENT)("label",N(13,23,"PANELS.IPTABLES_SAVE.IMPORT.OPTIONS.SSH")),Te("ngModel",e.selectedImportOption),p(3),f("ngIf",e.selectedImportOption===e.FwcIptablesSaveImportOptions.COPYPASTE&&!e.success),p(),f("ngIf",e.selectedImportOption===e.FwcIptablesSaveImportOptions.UPLOAD_FILE&&!e.success),p(),f("ngIf",e.selectedImportOption===e.FwcIptablesSaveImportOptions.SSH_OR_AGENT&&!e.success),p(),f("ngIf",(e.options==null?null:e.options.operation)===e.FwcIptablesSaveOperation.IMPORT&&!e.hideUI)}}function B9e(i,n){i&1&&ue(0)}function U9e(i,n){i&1&&ue(0)}function j9e(i,n){if(i&1&&(m(0,"div",14)(1,"div",15)(2,"p"),F(3),D(4,"translate"),g()(),m(5,"div",21),v(6,U9e,1,0,"ng-container",33),g()()),i&2){u(3);let e=He(4);p(3),$(N(4,2,"PANELS.IPTABLES_SAVE.EXPORT.TEXT")),p(3),f("ngTemplateOutlet",e)}}function G9e(i,n){if(i&1&&(m(0,"div",14)(1,"div",15),F(2),D(3,"translate"),g(),m(4,"div",15)(5,"textarea",36,6),F(7),g()()()),i&2){let e=u(3);p(2),J(" ",N(3,2,"PANELS.IPTABLES_SAVE.EXPORT.INFO.SUCCESS"),": "),p(5),$(e.exportFile)}}function H9e(i,n){if(i&1&&v(0,B9e,1,0,"ng-container",13)(1,j9e,7,4,"ng-template",null,4,Bt)(3,G9e,8,4,"ng-template",null,5,Bt),i&2){let e=He(2),t=He(4),r=u(2);f("ngIf",!r.exportFile)("ngIfThen",e)("ngIfElse",t)}}function W9e(i,n){if(i&1&&(he(0),v(1,O9e,1,0,"ng-container",13)(2,V9e,19,25,"ng-template",null,1,Bt)(4,H9e,5,3,"ng-template",null,2,Bt),fe()),i&2){let e=He(3),t=He(5),r=u();p(),f("ngIf",(r.options==null?null:r.options.operation)===r.FwcIptablesSaveOperation.IMPORT)("ngIfThen",e)("ngIfElse",t)}}function z9e(i,n){if(i&1&&(m(0,"div",14)(1,"div",15),P(2,"sts-fwc-message",37,7),g()()),i&2){let e=u();p(2),f("message",e.statusMessage)}}function K9e(i,n){i&1&&ue(0)}function $9e(i,n){if(i&1){let e=L();m(0,"button",41),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handleImportExport())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,(e.options==null?null:e.options.operation)===e.FwcIptablesSaveOperation.IMPORT?"PANELS.IPTABLES_SAVE.BUTTONS.IMPORT":"PANELS.IPTABLES_SAVE.BUTTONS.EXPORT")),f("disabled",e.loadingData||(e.options==null?null:e.options.operation)===e.FwcIptablesSaveOperation.IMPORT&&(!e.hideUI&&!e.okToImport||e.selectedImportOption===e.FwcIptablesSaveImportOptions.COPYPASTE&&!e.iptablesSaveText||e.selectedImportOption===e.FwcIptablesSaveImportOptions.UPLOAD_FILE&&!e.iptablesFileText||e.selectedImportOption===e.FwcIptablesSaveImportOptions.SSH_OR_AGENT&&!e.formModel.valid)||(e.options==null?null:e.options.operation)===e.FwcIptablesSaveOperation.EXPORT&&!e.formModel.valid)}}function J9e(i,n){if(i&1){let e=L();v(0,$9e,2,4,"button",39),m(1,"button",40),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.handleCancel())}),g()}if(i&2){let e=u(2);f("ngIf",e.firewall),p(),Q("label",N(2,3,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",e.loadingData)}}function q9e(i,n){if(i&1){let e=L();he(0),m(1,"button",43),D(2,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handleCopyExportedToClipboard())}),g(),m(3,"button",44),D(4,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handleDownloadExported())}),g(),fe()}if(i&2){let e=u(3);p(),Q("label",N(2,4,"VPN.CONFIG.CLIPBOARD.BUTTON")),f("disabled",e.loadingData),p(2),Q("label",N(4,6,"VPN.CONFIG.DOWNLOAD.BUTTON")),f("disabled",e.loadingData)}}function Y9e(i,n){if(i&1){let e=L();v(0,q9e,5,8,"ng-container",11),m(1,"button",42),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.handleCancel())}),g()}if(i&2){let e=u(2);f("ngIf",e.exportFile),p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CLOSE"))}}function X9e(i,n){if(i&1&&(m(0,"div",14)(1,"div",38),v(2,K9e,1,0,"ng-container",13)(3,J9e,3,5,"ng-template",null,8,Bt)(5,Y9e,3,4,"ng-template",null,9,Bt),g()()),i&2){let e=He(4),t=He(6),r=u();p(2),f("ngIf",r.success)("ngIfThen",t)("ngIfElse",e)}}function Q9e(i,n){if(i&1){let e=L();he(0),m(1,"div",17)(2,"div",47)(3,"span",48)(4,"select",59),k("change",function(){return y(e),w(!0)}),m(5,"option",50),F(6),D(7,"translate"),g(),m(8,"option",60),F(9,"HTTPS"),g(),m(10,"option",61),F(11,"HTTP"),g()(),m(12,"label",62),F(13),D(14,"translate"),g()()()(),m(15,"div",15)(16,"div",47)(17,"span",48),P(18,"input",63),m(19,"label",64),F(20),D(21,"translate"),g()()()(),fe()}i&2&&(p(5),f("value",null),p(),J(" ",N(7,6,"FW.MSG_FW_EDITION.AGENT_PROTOCOL")," "),p(7),$(N(14,8,"FW.MSG_FW_EDITION.AGENT_PROTOCOL")),p(5),f("showPassword",!1)("feedback",!1),p(2),$(N(21,10,"FW.MSG_FW_EDITION.AGENT_APIKEY")))}function Z9e(i,n){i&1&&(m(0,"div",17)(1,"div",47)(2,"span",48),P(3,"input",65),m(4,"label",66),F(5),D(6,"translate"),g()()()(),m(7,"div",15)(8,"div",47)(9,"span",48),P(10,"input",67),m(11,"label",68),F(12),D(13,"translate"),g()()()()),i&2&&(p(5),J(" ",N(6,2,"CLUSTER.MSG_CLUSTER_EDITION.SSH_USER")," "),p(7),J(" ",N(13,4,"CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS")," "))}function eGe(i,n){if(i&1){let e=L();m(0,"form",45)(1,"fieldset",46),k("keyup.enter",function(){y(e);let r=u();return w(r.handleImportExport())})("keyup.esc",function(){y(e);let r=u();return w(r.handleCancel())}),m(2,"div",15)(3,"div",47)(4,"span",48)(5,"select",49),k("change",function(){return y(e),w(!0)}),m(6,"option",50),F(7),D(8,"translate"),g(),m(9,"option",51),F(10,"SSH"),g(),m(11,"option",52),F(12,"FWCloud-Agent"),g()(),m(13,"label",53),F(14),D(15,"translate"),g()()()(),m(16,"div",17)(17,"div",47)(18,"span",48),P(19,"input",54),m(20,"label",55),F(21),D(22,"translate"),g()()()(),m(23,"div",17)(24,"div",47)(25,"span",48),P(26,"input",56),m(27,"label",57),F(28),D(29,"translate"),g()()()(),v(30,Q9e,22,12,"ng-container",58)(31,Z9e,14,6,"ng-template",null,10,Bt),g()()}if(i&2){let e,t=He(32),r=u();f("formGroup",r.formModel),p(),f("disabled",r.loadingData||r.success),p(5),f("value",null),p(),J(" ",N(8,12,"FW.MSG_FW_EDITION.COMM_TYPE")," "),p(2),f("disabled",r.isSSHCommunicationDisabled),p(5),$(N(15,14,"FW.MSG_FW_EDITION.COMM_TYPE")),p(5),f("readOnly",(r.options==null?null:r.options.operation)===r.FwcIptablesSaveOperation.EXPORT),p(2),J(" ",N(22,16,"ITEM_PANEL.FIELDS.ADDRESS")," "),p(5),f("readOnly",(r.options==null?null:r.options.operation)===r.FwcIptablesSaveOperation.EXPORT),p(2),J(" ",N(29,18,"CLUSTER.MSG_CLUSTER_EDITION.PORT")," "),p(2),f("ngIf",((e=r.formModel.get("communication"))==null?null:e.value)==="agent")("ngIfElse",t)}}var Ds=function(i){return i[i.IMPORT=1]="IMPORT",i[i.EXPORT=2]="EXPORT",i}(Ds||{}),$l=function(i){return i[i.COPYPASTE=1]="COPYPASTE",i[i.UPLOAD_FILE=2]="UPLOAD_FILE",i[i.SSH_OR_AGENT=3]="SSH_OR_AGENT",i}($l||{}),tGe=12e4,Nz=(()=>{class i{set importSSHData(e){if(e){this.options={objId:e.firewall,objName:"",objType:O.OBJ_FIREWALL,operation:Ds.IMPORT},this.selectedImportOption=$l.SSH_OR_AGENT;let t={id:e.firewall,ip:e.ip,install_communication:e.communication,install_port:e.port,install_user:e.sshuser,install_pass:e.sshpass,install_protocol:e.protocol,install_apikey:e.apikey};this.createForm(t),this.handleImportExport()}}constructor(e,t,r,o,s,a,l,c){this.fwcEventService=e,this.fwcFirewallService=t,this.utilService=r,this.formBuilder=o,this.cd=s,this.translate=a,this.fwcUserService=l,this.messageService=c,this.onFinish=new X,this.selectedImportOption=$l.COPYPASTE,this.okToImport=!1,this.filesToUpload=[],this.loadingData=!1,this.alive=!0,this.isSSHCommunicationDisabled=!1,this.FwcIptablesSaveOperation=Ds,this.FwcIptablesSaveImportOptions=$l}ngOnInit(){return B(this,null,function*(){if(this.checkData(this.options)&&!this.hideUI){let e,t;if(this.options.objType===O.OBJ_FIREWALL?(e=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),t=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL")):this.options.objType===O.OBJ_CLUSTER&&(e=this.fwcFirewallService.getClusterMasterNode.bind(this.fwcFirewallService),t=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER")),this.isSSHCommunicationDisabled=!(yield this.utilService.fwcAPICall(this.fwcFirewallService.loadBackEndConfig.bind(this.fwcFirewallService))).data.availablecommunications.includes("ssh"),e){this.loadingData=!0;let r=t.toLowerCase();this.options.objName&&(r+=" '"+this.options.objName+"'"),this.statusMessage={text:this.translate.instant("PANELS.IPTABLES_SAVE.INFO.READ_DATA",{name:r}),type:"loading"},this.utilService.fwcAPICall(e,this.options.objId,this.fwcUserService.getActualFwSelectedCloud()).then(o=>B(this,null,function*(){if(o.data)if(this.loadingData=!1,this.options.operation===Ds.EXPORT&&!o.data.install_ipobj)this.statusMessage={title:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.NO_INST_DATA.HEADER"),text:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.NO_INST_DATA.TEXT"),type:"error",horizontal:!0};else{let s=Object.assign(o.data),a=this.fwcUserService.getActualFwcUser().privateKey,l=s.install_user,c=s.install_pass,d=s.install_apikey;try{l&&(l=yield this.utilService.openPGPDecrypt(l,a)),c&&(c=yield this.utilService.openPGPDecrypt(c,a)),d&&(d=yield this.utilService.openPGPDecrypt(d,a))}catch{}s.install_user=l,s.install_pass=c,s.install_apikey=d,this.createForm(s),this.firewall=o.data,this.statusMessage=null,this.options.operation===Ds.EXPORT&&s.install_communication==="agent"&&this.handleImportExport()}})).catch(o=>{this.statusMessage={title:"Error",text:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.READ_DATA",{name:`${t} '${this.options.objName}'`}),type:"error",details:o,horizontal:!0,bordered:!0},this.loadingData=!1})}}else this.hideUI||(this.statusMessage={title:"Error",text:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.INCORRECT_OPTIONS"),type:"error",horizontal:!0})})}createForm(e){this.formModel=this.formBuilder.group({id:new ve(e.id,[Pe.required]),ip:new ve(e.ip,[Pe.required,Pe.pattern(Pt.ipV4Regexp)]),port:new ve(e.install_port,[Pe.required,Pe.pattern(Pt.portRegexp)]),communication:new ve(e.install_communication||"agent",[Pe.required]),sshuser:new ve(e.install_user,e.install_communication==="ssh"?Pe.required:[]),sshpass:new ve(e.install_pass,e.install_communication==="ssh"?Pe.required:[]),protocol:new ve(e.install_protocol,e.install_communication==="agent"?Pe.required:[]),apikey:new ve(e.install_apikey,e.install_communication==="agent"?Pe.required:[])})}checkData(e){return e&&(e.operation===Ds.IMPORT||e.operation===Ds.EXPORT)&&typeof e.objId=="number"&&(e.objType===O.OBJ_FIREWALL||e.objType===O.OBJ_CLUSTER)}handleSelectFile(e){return B(this,null,function*(){if(e){let t=e.files[0];if(t){this.iptablesFileText=null;try{this.iptablesFileText=yield this.readFile(t)}catch{}}}})}handleRemoveSelectedFile(e,t){e.files.splice(t),this.handleOnRemoveSelectedFile()}handleOnRemoveSelectedFile(e){this.iptablesFileText=null}handleImportExport(){return B(this,null,function*(){let e,t,r,o,s,a;if(this.loadingData||!this.options||this.options.operation===Ds.IMPORT&&(!this.hideUI&&!this.okToImport||this.selectedImportOption===$l.COPYPASTE&&!this.iptablesSaveText||this.selectedImportOption===$l.UPLOAD_FILE&&!this.iptablesFileText||this.selectedImportOption===$l.SSH_OR_AGENT&&!this.formModel.valid)||this.options.operation===Ds.EXPORT&&!this.formModel.valid)return;let l=d=>{let h=!1;if(!(d instanceof pd&&d.body)){if(d.data)if(this.options.operation===Ds.IMPORT){let _=d.data,C=`
              <div class="grid p-0 fwcPaleDarkBg">
                <div class="col-12 fwc-centered">
                  <strong>${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.TITLE")}</strong>
                </div>
                <div class="col-6 fwc-right noVertPad">
                  ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.IPOBJS")}: 
                </div>
                <div class="col-6 fwc-left noVertPad">
                  <strong>${_.ipObjs}</strong>
                </div>
                <div class="col-6 fwc-right noVertPad">
                  ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.INTERFACES")}: 
                </div>
                <div class="col-6 fwc-left noVertPad">
                  <strong>${_.interfaces}</strong>
                </div>
                <div class="col-6 fwc-right noVertPad">
                  ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.RULES")}: 
                </div>
                <div class="col-6 fwc-left noVertPad">
                  <strong>${_.rules}</strong>
                </div>
                <div class="col-6 fwc-right noVertPad">
                  ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.IGNORED_MODS")}: 
                </div>
                <div class="col-6 fwc-left noVertPad">
                  <strong>${Array.isArray(_.modulesIgnored)?_.modulesIgnored.join(", "):"-"}</strong>
                </div>
                <div class="col-12 vertPad">
                  <hr>
                  <strong class="fwcRed"><i class="fa fa-lg fa-exclamation-triangle"></i> ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.TXT_WARNING.TITLE")}:</strong> ${this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.RESUME.TXT_WARNING.TEXT")}
                  <br>
                </div>
              </div>
            `;o+=C,h=!0,this.statusMessage=ke(oe({},this.statusMessage),{text:o,type:"success",highlight:!0})}else this.exportFile=Array.isArray(d.data)?d.data.join(`
`):"",this.statusMessage=null}this.success=!0,this.hideUI&&this.onFinish.emit({success:!0,reloadUI:h}),this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.loadingData=!1},c=d=>{let h=this.translate.instant("GLOBALS.ERRORS.COMMUNICATION");if(this.success=!1,d){let _=this.utilService.isCommunicationErrorStr(d.error);_?s=_:h=d.error}this.statusMessage={title:"Error",text:s,details:h,type:"error",horizontal:!0,bordered:!0},this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.loadingData=!1,this.hideUI&&this.onFinish.emit({success:!1,reloadUI:!1})};if(this.options.operation===Ds.IMPORT)switch(t=this.fwcFirewallService.ipTablesSaveImport.bind(this.fwcFirewallService),o=this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.INFO.SUCCESS"),s=this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.ERRORS.ERROR"),a=this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.INFO.IN_PROCESS"),this.selectedImportOption){case $l.COPYPASTE:case $l.UPLOAD_FILE:if(this.selectedImportOption===$l.COPYPASTE?r=this.iptablesSaveText:r=this.iptablesFileText,r){let d=r.replace(/\r\n/g,`
`).split(`
`).filter(h=>h);e={firewall:this.firewall.id,fwcloud:this.fwcUserService.getActualFwSelectedCloud(),type:"data",ip_version:4,data:d}}break;case $l.SSH_OR_AGENT:if(this.formModel.valid){e=yield this.buildSSHApiObject();let d=Object.assign({},e);d.communication==="agent"&&(delete d.sshuser,delete d.sshpass),e=d}break}else if(this.options.operation===Ds.EXPORT&&this.formModel.valid){e=yield this.buildSSHApiObject();let d=Object.assign({},e);delete d.type,delete d.ip,delete d.port,delete d.protocol,delete d.apikey,d.communication==="agent"&&(delete d.sshuser,delete d.sshpass),delete d.communication,e=d,t=this.fwcFirewallService.ipTablesSaveExport.bind(this.fwcFirewallService),s=this.translate.instant("PANELS.IPTABLES_SAVE.EXPORT.ERRORS.ERROR"),a=this.translate.instant("PANELS.IPTABLES_SAVE.EXPORT.INFO.IN_PROCESS")}e&&(this.loadingData=!0,this.statusMessage={text:a,type:"loading"},this.channel_id=$r(),this.utilService.ioListenOnLogEvent(this.channel_id),this.fwcEventService.getEvent().pipe(yt(()=>this.alive)).subscribe(d=>{this.loadingData&&this.resetTimer();let h=new bo(d);this.fwcMessageComponent&&h&&h.payload&&this.fwcMessageComponent.changeStatus(h.payload.message,this.translate.instant("PANELS.IPTABLES_SAVE.IMPORT.INFO.LINE")+":")}),this.resetTimer(),this.cd.detectChanges(),this.apiCallSubscription=t(e,this.channel_id).subscribe(d=>{l(d)},d=>{if(d&&d.status==403&&d.error){let h=d.error;if(h.fwc_confirm_token){let _=h.fwc_confirm_token;this.fwcUserService.setConfirmationToken(_),this.apiCallSubscription=t(e,this.channel_id).subscribe(C=>B(this,null,function*(){l(C),this.fwcUserService.setConfirmationToken(void 0)}),C=>{c(C),this.fwcUserService.setConfirmationToken(void 0)})}else c(d)}else c(d)}))})}doSSHImport(e){}handleCancel(){let e=!1;this.channel_id&&this.utilService.ioReleaseLogEvent(this.channel_id),this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.checkData(this.options)&&this.options.operation===Ds.IMPORT&&this.success&&(e=!0),this.onFinish.emit({success:this.success,reloadUI:e})}handleCopyExportedToClipboard(){this.txtExported&&(this.txtExported.nativeElement.select(),document.execCommand("copy"),this.txtExported.nativeElement.setSelectionRange(0,0),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.IPTABLES_SAVE.EXPORT.INFO.CLIPBOARD")}))}handleDownloadExported(){if(this.txtExported){let e="iptables-save.txt";this.checkData(this.options)&&(e=`${this.options.objName.replace(/[^a-z0-9\-]/gi,"_")}-iptables-save.txt`);let t=new Blob([this.exportFile],{type:"text/plain;charset=utf-8"});(0,kz.saveAs)(t,e)}}buildSSHApiObject(){return B(this,null,function*(){let e=this.fwcUserService.getActualFwcUser().publicKey,t=this.formModel.get("sshuser").value,r=this.formModel.get("sshpass").value,o=this.formModel.get("apikey").value;return t&&(t=yield this.utilService.openPGPEncrypt(t,e)),r&&(r=yield this.utilService.openPGPEncrypt(r,e)),o&&(o=yield this.utilService.openPGPEncrypt(o,e)),{firewall:this.formModel.get("id").value,fwcloud:this.fwcUserService.getActualFwSelectedCloud(),type:"remote",ip_version:4,ip:this.formModel.get("ip").value,port:this.formModel.get("port").value,sshuser:t,sshpass:r,communication:this.formModel.get("communication").value,apikey:o,protocol:this.formModel.get("protocol").value}})}buildJSONFromBlob(e){return new Promise((t,r)=>{let o=new FileReader;o.addEventListener("loadend",s=>{let a="",l;s.currentTarget&&(l=JSON.parse(s.currentTarget.result),a=l.data.join(`
`)),t(a)}),o.addEventListener("error",s=>{r(s)}),o.readAsText(e)})}readFile(e){return new Promise((t,r)=>{let o=new FileReader;o.readAsText(e,"UTF-8"),o.onload=s=>{t(s.target.result)},o.onerror=s=>{r(s)}})}resetTimer(){this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(()=>{this.utilService.ioReleaseLogEvent(this.channel_id),this.apiCallSubscription&&this.apiCallSubscription.unsubscribe(),this.success=!1,this.loadingData=!1,this.statusMessage={type:"error",title:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.TIMEOUT.HEADER"),text:this.translate.instant("PANELS.IPTABLES_SAVE.ERRORS.TIMEOUT.TEXT"),bordered:!0}},tGe)}static{this.\u0275fac=function(t){return new(t||i)(S(dn),S(Dt),S(ft),S(qr),S(we),S(Ye),S(at),S(Kt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-iptables-save"]],viewQuery:function(t,r){if(t&1&&(le(x9e,5),le(T9e,5)),t&2){let o;te(o=ie())&&(r.fwcMessageComponent=o.first),te(o=ie())&&(r.txtExported=o.first)}},inputs:{options:"options",hideUI:"hideUI",importSSHData:"importSSHData",doSSHImport:"doSSHImport"},outputs:{onFinish:"onFinish"},decls:5,vars:3,consts:[["sshForm",""],["import",""],["export",""],["pfuUpload",""],["showExportOptions",""],["showExportResult",""],["txtExported",""],["fwcMessageComponent",""],["showButtons",""],["showCloseButton",""],["sshFirewall",""],[4,"ngIf"],["class","grid",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"grid"],[1,"col-12"],["name","importOptions",3,"ngModelChange","disabled","value","label","ngModel"],[1,"col-12","vertPad"],["class","col-12 divConfigFile",4,"ngIf"],["class","col-12",4,"ngIf"],["class","col-12 divCentered",4,"ngIf"],[1,"col-12","divConfigFile"],["pInputTextarea","","rows","8",3,"ngModelChange","ngModel","placeholder"],["name","file","fileLimit","1",3,"onSelect","onRemove","disabled","maxFileSize","chooseLabel","showCancelButton","showUploadButton","invalidFileSizeMessageSummary","invalidFileSizeMessageDetail","invalidFileTypeMessageSummary","invalidFileTypeMessageDetail"],["pTemplate","file"],["pTemplate","content"],[1,"divFileInfo"],[1,"fa","fa-lg","fa-file-text","fwcBlue"],[1,"fwcPaleDark"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled"],["class","fwc-centered",4,"ngIf"],[1,"fwc-centered"],[1,"fa","fa-2x","fa-file","fwcPaleDark"],[4,"ngTemplateOutlet"],[1,"col-12","divCentered"],["name","chkOkToDelete","binary","true",3,"ngModelChange","ngModel","disabled","label"],["pInputTextarea","","rows","15","cols","85","readonly","",2,"height","auto !important","font-family","monospace !important"],[3,"message"],[1,"col-12","divButtons"],["type","button","class","p-button-primary","pButton","","icon","fa fa-upload",3,"disabled","label","click",4,"ngIf"],["type","button","pButton","","icon","fa fa-close",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-upload",1,"p-button-primary",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","label"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label","disabled"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","communication","name","communication",3,"change"],["disabled","",3,"value"],["value","ssh",3,"disabled"],["value","agent"],["for","install_ipobj"],["pInputText","","type","text","formControlName","ip","name","ip","id","ip",3,"readOnly"],["for","ip"],["pInputText","","type","number","formControlName","port","name","port","id","port",3,"readOnly"],["for","port"],[4,"ngIf","ngIfElse"],["formControlName","protocol","name","protocol",1,"selNoMargin",3,"change"],["value","https"],["value","http"],["for","protocol"],["pPassword","","formControlName","apikey","name","apikey","maxlength","64",3,"showPassword","feedback"],["for","apikey"],["pInputText","","type","text","formControlName","sshuser","name","sshuser","id","sshuser"],["for","sshuser"],["pInputText","","type","password","formControlName","sshpass","name","sshpass","id","sshpass"],["for","sshpass"]],template:function(t,r){t&1&&v(0,W9e,6,3,"ng-container",11)(1,z9e,4,1,"div",12)(2,X9e,7,3,"div",12)(3,eGe,33,20,"ng-template",null,0,Bt),t&2&&(f("ngIf",r.firewall&&!r.hideUI),p(),f("ngIf",r.statusMessage),p(),f("ngIf",!r.hideUI))},dependencies:[rt,mt,Kn,wp,vp,Li,ud,uc,Pi,zn,Jn,mn,$n,Qn,Ee,pt,Xi,Qr,P1,Pa,RC,bS,Fn,gt,Fz]})}}return i})();var KS=(()=>{class i extends ES{constructor(e,t,r){super(e,r),this.dialogRef=e,this.dialogConfig=t,this.router=r}ngOnInit(){}handleFinish(e){if(this.dialogRef.close(e&&e.success),e&&e.reloadUI){let t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([t])})}}static{this.\u0275fac=function(t){return new(t||i)(S(Kl),S(bu),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-iptables-save-panel"]],features:[Se],decls:2,vars:1,consts:[[3,"onFinish","options"]],template:function(t,r){t&1&&(he(0),m(1,"sts-fwc-iptables-save",0),k("onFinish",function(s){return r.handleFinish(s)}),g(),fe()),t&2&&(p(),f("options",r.dialogConfig.data))},styles:[".divBlockable[_ngcontent-%COMP%]{position:relative}.divBlockable-blocker[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100%;background-color:#6464641a;z-index:9999}.divFileInfo[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .divFileInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:.5rem}"]})}}return i})();var Lz=(()=>{class i{constructor(e){this.decimalPipe=e}transform(e,t,r){let o=e,s="B";return e>=1024*1024*1024*1024?(o=e/(1024*1024*1024*1024),s="TB"):e>=1024*1024*1024?(o=e/(1024*1024*1024),s="GB"):e>=1024*1024?(o=e/(1024*1024),s="MB"):e>=1024&&(o=e/1024,s="KB"),`${this.decimalPipe.transform(o,t,r)} ${s}`}static{this.\u0275fac=function(t){return new(t||i)(S(Rf,16))}}static{this.\u0275pipe=ur({name:"suitableBytePrecission",type:i,pure:!0})}}return i})();var ok=i=>({name:i}),nGe=()=>({standalone:!0}),rGe=()=>["cn","address"];function oGe(i,n){if(i&1&&(m(0,"h6",7),P(1,"i",8),F(2),D(3,"translate"),g()),i&2){let e=u(2);p(2),J(" ",ei(3,1,"PANELS.VPN_HISTORIC_PANEL.TITLE",ne(4,ok,e.options==null?null:e.options.openVpnConfigName))," ")}}function sGe(i,n){if(i&1&&(m(0,"h6",7),P(1,"i",8),F(2),D(3,"translate"),g()),i&2){let e=u(2);p(2),J(" ",ei(3,1,"PANELS.VPN_HISTORIC_PANEL.WG_TITLE",ne(4,ok,e.options==null?null:e.options.wireGuardConfigName))," ")}}function aGe(i,n){if(i&1&&(m(0,"h6",7),P(1,"i",8),F(2),D(3,"translate"),g()),i&2){let e=u(2);p(2),J(" ",ei(3,1,"PANELS.VPN_HISTORIC_PANEL.IPS_TITLE",ne(4,ok,e.options==null?null:e.options.ipsecConfigName))," ")}}function lGe(i,n){if(i&1&&(m(0,"div",6),v(1,oGe,4,6,"h6",7)(2,sGe,4,6,"h6",7)(3,aGe,4,6,"h6",7),g()),i&2){let e=u();p(),W(e.options.openVpnConfigType===e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER?1:e.options.wireGuardConfigType===e.ObjectTypes.OBJ_WGS_CONFIG_SER?2:e.options.wireGuardConfigType===e.ObjectTypes.OBJ_ISS_CONFIG_SER?3:-1)}}function cGe(i,n){if(i&1&&(m(0,"div",4)(1,"div",9),P(2,"sts-fwc-message",10,0),g()()),i&2){let e=u();p(2),f("message",e.statusMessage)}}function dGe(i,n){if(i&1){let e=L();m(0,"div",14)(1,"div",17)(2,"span",18)(3,"input",39),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(4,"label",40),F(5),D(6,"translate"),g()()()()}i&2&&(p(5),$(N(6,1,"VPN.PANEL.FIELDS.CN")))}function pGe(i,n){i&1&&(m(0,"th",41),F(1),D(2,"translate"),P(3,"p-sortIcon",52),g()),i&2&&(p(),J(" ",N(2,1,"VPN.STATUS.FIELDS.CN")," "))}function uGe(i,n){if(i&1&&(m(0,"tr"),v(1,pGe,4,3,"th",41),m(2,"th",42),F(3),D(4,"translate"),P(5,"p-sortIcon",43),g(),m(6,"th",44),F(7),D(8,"translate"),P(9,"p-sortIcon",45),g(),m(10,"th",46),F(11),D(12,"translate"),P(13,"p-sortIcon",47),g(),m(14,"th",48),F(15),D(16,"translate"),P(17,"p-sortIcon",49),g(),m(18,"th",50),F(19),D(20,"translate"),P(21,"p-sortIcon",51),g()()),i&2){let e=u(2);p(),W((e.options==null?null:e.options.openVpnConfigType)===e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||(e.options==null?null:e.options.wireGuardConfigType)===e.ObjectTypes.OBJ_WGS_CONFIG_SER||(e.options==null?null:e.options.ipsecConfigType)===e.ObjectTypes.OBJ_ISS_CONFIG_SER?1:-1),p(2),J(" ",N(4,6,"VPN.STATUS.FIELDS.REAL_ADDRESS")," "),p(4),J(" ",N(8,8,"VPN.STATUS.FIELDS.CONNECTED_AT")," "),p(4),J(" ",N(12,10,"VPN.STATUS.FIELDS.DISCONNECTED_AT")," "),p(4),J(" ",N(16,12,"VPN.STATUS.FIELDS.RECEIVED")," "),p(4),J(" ",N(20,14,"VPN.STATUS.FIELDS.SENT")," ")}}function hGe(i,n){if(i&1&&(m(0,"td"),F(1),g()),i&2){let e=u(2).$implicit,t=u(2);G("rowspan",t.tableData==null?null:t.tableData.historyGroupsMetadata[e.cn].size),p(),J(" ",e.cn," ")}}function fGe(i,n){if(i&1&&(m(0,"td"),F(1),g()),i&2){let e=u(2).$implicit;p(),$(e.cn)}}function mGe(i,n){if(i&1&&v(0,hGe,2,2,"td")(1,fGe,2,1,"td"),i&2){u(2);let e=He(55);W(e.sortField==="cn"?0:1)}}function gGe(i,n){if(i&1&&(m(0,"tr",53),v(1,mGe,2,1),m(2,"td"),F(3),g(),m(4,"td"),F(5),D(6,"date"),g(),m(7,"td"),F(8),D(9,"date"),g(),m(10,"td",54),F(11),D(12,"suitableBytePrecission"),g(),m(13,"td",54),F(14),D(15,"suitableBytePrecission"),g()()),i&2){let e=n.$implicit,t=u(2);f("pSelectableRow",e),p(),W((t.options==null?null:t.options.openVpnConfigType)===t.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||(t.options==null?null:t.options.wireGuardConfigType)===t.ObjectTypes.OBJ_WGS_CONFIG_SER||(t.options==null?null:t.options.ipsecConfigType)===t.ObjectTypes.OBJ_ISS_CONFIG_SER?1:-1),p(2),$(e.address),p(2),$(Ms(6,7,e.connected_at,"d/M/y hh:mm","UTC")),p(3),$(Ms(9,11,e.disconnected_at,"d/M/y hh:mm","UTC")),p(3),J(" ",ei(12,15,e.bytesReceived,"1.2-2")," "),p(3),J(" ",ei(15,18,e.bytesSent,"1.2-2")," ")}}function _Ge(i,n){if(i&1&&(m(0,"tr")(1,"td"),F(2),D(3,"translate"),g()()),i&2){let e=u(2);p(),G("colspan",(e.options==null?null:e.options.openVpnConfigType)===e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||(e.options==null?null:e.options.wireGuardConfigType)===e.ObjectTypes.OBJ_WGS_CONFIG_SER||(e.options==null?null:e.options.ipsecConfigType)===e.ObjectTypes.OBJ_ISS_CONFIG_SER?6:5),p(),J(" ",N(3,2,"VPN.STATUS.NO_DATA.0")," ")}}function CGe(i,n){if(i&1){let e=L();m(0,"div",4)(1,"div",9)(2,"form",11)(3,"p-fieldset",12),D(4,"translate"),m(5,"div",13),v(6,dGe,7,3,"div",14),m(7,"div",15)(8,"div",4)(9,"div",16)(10,"div",17)(11,"span",18)(12,"select",19),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.selectDates,r)||(o.selectDates=r),w(r)}),k("change",function(){y(e);let r=u();return w(r.handleChangeDateSelector())}),m(13,"option",20),F(14),D(15,"translate"),g(),m(16,"option",21),F(17),D(18,"translate"),g(),m(19,"option",22),F(20),D(21,"translate"),g(),m(22,"option",23),F(23),D(24,"translate"),g()(),m(25,"label",24),F(26),D(27,"translate"),g()()()(),m(28,"div",16)(29,"div",17)(30,"span",18)(31,"p-calendar",25),k("onSelect",function(){y(e);let r=u();return w(r.handleSelectDate())}),g(),m(32,"label",26),F(33),D(34,"translate"),g()()()(),m(35,"div",16)(36,"div",17)(37,"span",18)(38,"p-calendar",27),k("onSelect",function(){y(e);let r=u();return w(r.handleSelectDate())}),g(),m(39,"label",28),F(40),D(41,"translate"),g()()()()()(),m(42,"div",29)(43,"div",17)(44,"button",30),k("click",function(){y(e);let r=u();return w(r.handleReloadData())}),g(),m(45,"button",31),D(46,"translate"),k("click",function(){y(e);let r=u();return w(r.handleClearFilters())}),g()()()()()()()(),m(47,"div",4)(48,"div",9)(49,"p-fieldset",12),D(50,"translate"),m(51,"div",32)(52,"div",9)(53,"div",33)(54,"p-table",34,1),Oe("selectionChange",function(r){y(e);let o=u();return Re(o.vpnClientSelected,r)||(o.vpnClientSelected=r),w(r)}),k("onRowSelect",function(){y(e);let r=u();return w(r.handleVpnClientSelect())})("onRowUnselect",function(){y(e);let r=u();return w(r.handleVpnClientSelect())})("onSort",function(){y(e);let r=u();return w(r.handleSortTable())}),v(56,uGe,22,16,"ng-template",3)(57,gGe,16,21,"ng-template",35)(58,_Ge,4,4,"ng-template",36),g()()(),m(59,"div",37),P(60,"p-chart",38),g(),m(61,"div",37),P(62,"p-chart",38),g()()()()()}if(i&2){let e=u();p(2),f("formGroup",e.filterFormModel),p(),Q("legend",N(4,32,"PANELS.VPN_HISTORIC_PANEL.INFO.FILTERS")),p(3),W((e.options==null?null:e.options.openVpnConfigType)===e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||(e.options==null?null:e.options.wireGuardConfigType)===e.ObjectTypes.OBJ_WGS_CONFIG_SER||(e.options==null?null:e.options.ipsecConfigType)===e.ObjectTypes.OBJ_ISS_CONFIG_SER?6:-1),p(),f("ngClass",(e.options==null?null:e.options.openVpnConfigType)===e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||(e.options==null?null:e.options.wireGuardConfigType)===e.ObjectTypes.OBJ_WGS_CONFIG_SER||(e.options==null?null:e.options.wireGuardConfigType)===e.ObjectTypes.OBJ_ISS_CONFIG_SER?"col-9 lg:6":"col-9"),p(5),Te("ngModel",e.selectDates),f("ngModelOptions",Ae(52,nGe)),p(),f("value",void 0),p(),J(" ",N(15,34,"PANELS.VPN_HISTORIC_PANEL.FIELDS.RANGE_CUSTOM")," "),p(3),J(" ",N(18,36,"PANELS.VPN_HISTORIC_PANEL.FIELDS.RANGE_1D")," "),p(3),J(" ",N(21,38,"PANELS.VPN_HISTORIC_PANEL.FIELDS.RANGE_1W")," "),p(3),J(" ",N(24,40,"PANELS.VPN_HISTORIC_PANEL.FIELDS.RANGE_1M")," "),p(3),$(N(27,42,"PANELS.VPN_HISTORIC_PANEL.FIELDS.PERIOD")),p(5),f("maxDate",e.filterFormModel.get("ends_at").value),p(2),$(N(34,44,"PANELS.VPN_HISTORIC_PANEL.FIELDS.FROM")),p(5),f("minDate",e.filterFormModel.get("starts_at").value),p(2),$(N(41,46,"PANELS.VPN_HISTORIC_PANEL.FIELDS.TO")),p(4),f("disabled",!1),p(),Q("label",N(46,48,"PANELS.VPN_HISTORIC_PANEL.FIELDS.CLEAR")),f("disabled",!1),p(4),Q("legend",N(50,50,"PANELS.VPN_HISTORIC_PANEL.INFO.DATA")),p(5),f("value",e.tableData==null?null:e.tableData.parsedHistoryData)("autoLayout",!0)("responsive",!1)("resizableColumns",!0)("rowTrackBy",e.tableRowTrackBy),Te("selection",e.vpnClientSelected),f("globalFilterFields",Ae(53,rGe))("loading",e.loadingData),p(6),f("data",e.tableData==null?null:e.tableData.volumeChartData)("options",e.volumeGraphOptions),p(2),f("data",e.tableData==null?null:e.tableData.speedChartData)("options",e.speedGraphOptions)}}function IGe(i,n){if(i&1){let e=L();m(0,"button",55),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onHandleCancel())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var yGe=50,$S=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I){super(l,a,e,c,h,d),this.itemSelectedService=e,this.fwcFirewallService=t,this.fwcVpnService=r,this.fwcErrorPipe=o,this.utilService=s,this.appOptionsService=a,this.appDialogPanelsService=l,this.cd=c,this.router=d,this.store=h,this.translate=_,this.fb=C,this.primengConfig=I,this.volumeGraphPrecission="B",this.speedGraphPrecission="B",this.loadingData=!1,this.destroy$=new Ue,this.ObjectTypes=O,this.filterFormModel=C.group({name:new ve(""),starts_at:new ve(null),ends_at:new ve(null)}),this.selectDates="1w",this.handleChangeDateSelector(),this.filterFormModel.valueChanges.pipe(ef(300),qc(),Vu(this.destroy$)).subscribe(b=>{this.loadingData=!0;let E="openVpnConfigId"in this.options?this.options.openVpnConfigId:"wireGuardConfigId"in this.options?this.options.wireGuardConfigId:"ipsecConfigId"in this.options?this.options.ipsecConfigId:void 0;this.getHistoryData(this.options.cloudId,this.options.firewallId,E,b).then(([R,T])=>{this.buildTableData(R.data),this.buildTableGraphs(T.data)}).catch(R=>{this.statusMessage={title:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.ERRORS.GETTING_INFO.HEADER"),text:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.ERRORS.GETTING_INFO.TEXT"),details:this.fwcErrorPipe.transform(R),type:"error"}}).finally(()=>{this.loadingData=!1})}),this.esLocale={firstDayOfWeek:1,dayNames:["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],dayNamesShort:["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],dayNamesMin:["D","L","M","X","J","V","S"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],monthNamesShort:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],today:"Hoy",clear:"Borrar",weekHeader:"Sm"},this.primengConfig.setTranslation(this.esLocale),this.volumeGraphOptions={aspectRatio:1.5,maintainAspectRatio:!1,scales:{y:{ticks:{callback:(b,E,R)=>`${b}  ${this.volumeGraphPrecission}`}}},plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,text:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.INFO.CHART_VOLUME"),fontSize:14,position:"top"},customCanvasDisplay:{display:"flex"}}},this.speedGraphOptions={aspectRatio:1.5,maintainAspectRatio:!1,scales:{y:{ticks:{callback:(b,E,R)=>`${b}  ${this.speedGraphPrecission}/s`}}},plugins:{legend:{display:!0,position:"bottom"},title:{display:!0,text:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.INFO.CHART_SPEED"),fontSize:14,position:"top"}}}}ngOnInit(){}ngOnDestroy(){this.destroy$.next(void 0),this.destroy$.complete()}updateAndShow(e){return B(this,null,function*(){if(e){this.statusMessage={text:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.INFO.GETTING_INFO"),type:"loading"},this.options=e,this.displayDialog=!0;try{let t=yield this.getMasterFirewallId(e),r,o,s;"openVpnConfigId"in e?(r=e.openVpnConfigId,o=e.openVpnConfigType,s=e.openVpnConfigName,this.filterFormModel.get("name").setValue(s)):"wireGuardConfigId"in e&&(r=e.wireGuardConfigId,o=e.wireGuardConfigType,s=e.wireGuardConfigName,this.filterFormModel.get("name").setValue(s));let[a,l]=yield this.getHistoryData(e.cloudId,t,r,this.filterFormModel.value);this.statusMessage=null,this.buildTableData(a.data),this.buildTableGraphs(l.data)}catch(t){this.statusMessage={title:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.ERRORS.GETTING_INFO.HEADER"),text:this.translate.instant("PANELS.VPN_HISTORIC_PANEL.ERRORS.GETTING_INFO.TEXT"),details:this.fwcErrorPipe.transform(t),type:"error"}}}})}getHistoryData(e,t,r,o){if(o||(o={}),o.name=o.name&&o.name.replace(/\*/g,"%"),o.starts_at){let a=new Date(o.starts_at);o.starts_at=a.setHours(0,0,0)}if(o.ends_at){let a=new Date(o.ends_at);o.ends_at=a.setHours(23,59,59)}let s=Object.assign({},o);return s.limit=yGe,Promise.all([this.utilService.fwcAPICall(this.fwcVpnService.getConfigHistoric.bind(this.fwcVpnService),e,t,r,o),this.utilService.fwcAPICall(this.fwcVpnService.getConfigHistoricGraph.bind(this.fwcVpnService),e,t,r,s)])}getMasterFirewallId(e){return new Promise((t,r)=>{if(e.clusterId)this.fwcFirewallService.getClusterMasterNode(e.clusterId,e.cloudId).subscribe(o=>{let s=o.data.id;return e.firewallId=s,t(s)},o=>r(o));else return e.firewallId?t(e.firewallId):r()})}buildTableData(e){let t=[],r=1;for(let o in e){let s=e[o];if(s&&Array.isArray(s.connections))for(let a of s.connections)t.push({rowId:r++,cn:o,connected_at:a.connected_at,disconnected_at:a.disconnected_at,bytesReceived:a.bytesReceived,bytesSent:a.bytesSent,address:a.address})}this.tableData=ke(oe({},this.tableData),{parsedHistoryData:t}),this.updateRowGroupMetaData(),this.recenterDialog()}buildTableGraphs(e){if(e=this.transformSuitableUnit(e),Array.isArray(e)){let t,r;t={labels:[],datasets:[{label:this.translate.instant("VPN.STATUS.FIELDS.RECEIVED"),data:[],fill:!0,borderColor:"rgba(0, 105, 167, 1)",backgroundColor:"rgba(0, 105, 167, 0.7)",pointRadius:0},{label:this.translate.instant("VPN.STATUS.FIELDS.SENT"),data:[],fill:!0,borderColor:"rgba(0, 153, 0, 1)",backgroundColor:"rgba(0, 153, 0, 1)",pointRadius:0}]},r={labels:[],datasets:[{label:this.translate.instant("VPN.STATUS.FIELDS.SPEED_UP"),data:[],fill:!1,borderColor:"rgba(0, 105, 167, 1)",backgroundColor:"rgba(0, 105, 167, 1)",pointRadius:0},{label:this.translate.instant("VPN.STATUS.FIELDS.SPEED_DOWN"),data:[],fill:!1,borderColor:"rgba(0, 153, 0, 1)",backgroundColor:"rgba(0, 153, 0, 1)",pointRadius:0}]};try{for(let o=0;o<e.length;o++){let s=e[o],a=new Date(s.timestamp).toLocaleString();t.labels.push(a),t.datasets[0].data.push(s.bytesReceived),t.datasets[1].data.push(s.bytesSent),r.labels.push(a),r.datasets[0].data.push(s.bytesSentSpeed),r.datasets[1].data.push(s.bytesReceivedSpeed)}this.tableData.volumeChartData=t,this.tableData.speedChartData=r}catch{}}}tableRowTrackBy(e,t){return t?t.rowId:null}updateRowGroupMetaData(){let e={};if(this.tableData&&this.tableData.parsedHistoryData){let t=this.tableData.parsedHistoryData;for(let r=0;r<t.length;r++){let s=t[r].cn;if(r==0)e[s]={index:0,size:1};else{let l=t[r-1].cn;s===l?e[s].size++:e[s]={index:r,size:1}}}this.tableData=ke(oe({},this.tableData),{historyGroupsMetadata:e})}}handleChangeDateSelector(){let e=new Date,t,r=e;switch(this.selectDates){case"1d":t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1);break;case"1w":t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-7);break;case"1m":t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-30);break;default:t=this.filterFormModel.get("starts_at").value,r=this.filterFormModel.get("ends_at").value}this.filterFormModel.get("starts_at").setValue(t),this.filterFormModel.get("ends_at").setValue(r)}handleSelectDate(){this.selectDates=void 0}handleClearFilters(){this.filterFormModel.reset(),this.selectDates=void 0}handleReloadData(){this.filterFormModel.updateValueAndValidity()}handleVpnClientSelect(){console.log(this.vpnClientSelected)}handleSortTable(){this.updateRowGroupMetaData()}onHandleCancel(){this.displayDialog=!1}onHideDialog(){this.dynamicComponentRef&&this.dynamicComponentRef.destroy()}transformSuitableUnit(e){if(e.length===0)return e;let t=0,r=0;e.forEach(c=>{c.bytesReceived&&c.bytesReceived>t&&(t=c.bytesReceived),c.bytesSent&&c.bytesSent>t&&(t=c.bytesSent),c.bytesReceivedSpeed&&c.bytesReceivedSpeed>r&&(r=c.bytesReceivedSpeed),c.bytesSentSpeed&&c.bytesSentSpeed>r&&(r=c.bytesSentSpeed)});let o="B",s="B",a=c=>c,l=c=>c;return t>=1024*1024*1024*1024?(o="TB",a=c=>c/(1024*1024*1024*1024)):t>=1024*1024*1024?(o="GB",a=c=>c/(1024*1024*1024)):t>=1024*1024?(o="MB",a=c=>c/(1024*1024)):t>=1024&&(o="KB",a=c=>c/1024),this.volumeGraphPrecission=o,r>=1024*1024*1024*1024?(s="TB",l=c=>c/(1024*1024*1024*1024)):r>=1024*1024*1024?(s="GB",l=c=>c/(1024*1024*1024)):r>=1024*1024?(s="MB",l=c=>c/(1024*1024)):r>=1024&&(s="KB",l=c=>c/1024),this.speedGraphPrecission=s,e.map(c=>({timestamp:c.timestamp,bytesReceived:a(c.bytesReceived),bytesReceivedSpeed:l(c.bytesReceivedSpeed),bytesSent:a(c.bytesSent),bytesSentSpeed:l(c.bytesSentSpeed)}))}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(Dt),S(er),S(Ei),S(ft),S(wt),S(St),S(we),S(ct),S(nt),S(Ye),S(qr),S(Ht))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-vpn-historic-panel"]],features:[et([Dt]),Se],decls:5,vars:5,consts:[["fwcMessageComponent",""],["tabVpnStatusTable",""],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"visibleChange","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fa","fa-list-alt","fwcOrange","panel-header-icon"],[1,"col-12"],[3,"message"],[2,"margin-bottom","0.5rem",3,"formGroup"],[3,"legend"],["id","gridFilter",1,"grid"],[1,"col-12","lg:col-3"],[3,"ngClass"],[1,"col-4"],[1,"p-inputgroup"],[1,"p-float-label"],["name","selectDates",1,"selNoMargin",3,"ngModelChange","change","ngModel","ngModelOptions"],[3,"value"],["value","1d"],["value","1w"],["value","1m"],["for","selectDates",2,"font-size",".9rem !important"],["formControlName","starts_at","dateFormat","dd/mm/yy","appendTo","body","showButtonBar","true",3,"onSelect","maxDate"],["for","starts_at"],["formControlName","ends_at","dateFormat","dd/mm/yy","appendTo","body","showButtonBar","true",3,"onSelect","minDate"],["for","ends_at"],[1,"col-3",2,"align-self","baseline"],["type","button","pButton","","icon","fa fa-refresh",1,"p-button-primary","fwcButtonHeight",3,"click","disabled"],["type","button","pButton","","icon","fa fa-times",1,"p-button-secondary","fwcButtonHeight",2,"width","inherit",3,"click","disabled","label"],["id","gridData",1,"grid"],[2,"overflow","auto","max-height","60vh"],["columnResizeMode","expand","dataKey","rowId","selectionMode","single","styleClass","optionsTable","sortField","cn","sortMode","single",3,"selectionChange","onRowSelect","onRowUnselect","onSort","value","autoLayout","responsive","resizableColumns","rowTrackBy","selection","globalFilterFields","loading"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-6",2,"height","20rem"],["type","line",3,"data","options"],["pInputText","","type","text","maxlength","64","formControlName","name","name","name",3,"drop"],["for","name"],["pSortableColumn","cn","pResizableColumn",""],["pSortableColumn","address","pResizableColumn",""],["field","address"],["pSortableColumn","connected_at","pResizableColumn",""],["field","connected_at"],["pSortableColumn","disconnected_at","pResizableColumn",""],["field","disconnected_at"],["pSortableColumn","bytesReceived","pResizableColumn",""],["field","bytesReceived"],["pSortableColumn","bytesSent","pResizableColumn",""],["field","bytesSent"],["field","cn"],[3,"pSelectableRow"],[2,"text-align","right"],["type","button","pButton","","icon","fa fa-close",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",2),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onHide",function(){return r.onHideDialog()}),v(1,lGe,4,1,"ng-template",3)(2,cGe,4,1,"div",4)(3,CGe,63,54)(4,IGe,2,4,"ng-template",5),g()),t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(2),W(r.statusMessage?2:3))},dependencies:[je,Kn,wp,vp,Li,uc,Pi,zn,Jn,mn,$n,Qn,Yt,Ee,pt,Xi,uu,sr,Oa,Tp,ah,Ra,wS,D_,Fn,cc,gt,Lz],styles:["#gridFilter[_ngcontent-%COMP%], #gridData[_ngcontent-%COMP%]{width:-webkit-fill-available!important}#gridFilter[_ngcontent-%COMP%]{align-items:baseline!important}  p-chart>div{width:100%;height:100%!important;min-height:fit-content!important}"]})}}return i})();var wGe=i=>({visibility:i,"margin-left":"1rem"}),vGe=()=>({width:"1.7rem",height:"1.7rem"});function bGe(i,n){i&1&&(m(0,"div",19)(1,"h6",20),P(2,"i",21),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"CONTEXT.SYSTEMCTL.PANEL.TITLE")," "))}function SGe(i,n){if(i&1&&(P(0,"i"),F(1)),i&2){let e=u().$implicit;ce(e.iconClass),p(),J(" ",e.label," ")}}function EGe(i,n){if(i&1&&F(0),i&2){let e=u().$implicit;J(" ",e.label," ")}}function AGe(i,n){if(i&1&&v(0,SGe,2,4)(1,EGe,1,1),i&2){let e=n.$implicit;W(e.iconClass?0:1)}}function xGe(i,n){if(i&1&&(P(0,"i"),F(1)),i&2){let e=u().$implicit;ce(e.iconClass),p(),J(" ",e.label," ")}}function TGe(i,n){if(i&1&&F(0),i&2){let e=u().$implicit;J(" ",e.label," ")}}function OGe(i,n){if(i&1&&v(0,xGe,2,4)(1,TGe,1,1),i&2){let e=n.$implicit;W(e.iconClass?0:1)}}function RGe(i,n){if(i&1){let e=L();m(0,"button",22),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onCommandSelect())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.RUN")),f("disabled",e.formModel.get("commandSelector").invalid)}}function PGe(i,n){if(i&1){let e=L();m(0,"button",23),k("click",function(){y(e);let r=u();return w(r.stopAction())}),g()}}function DGe(i,n){if(i&1){let e=L();m(0,"button",24),k("click",function(){y(e);let r=u();return w(r.handleClose())}),g()}}var sk=function(i){return i.status="status",i.start="start",i.stop="stop",i.restart="restart",i.reload="reload",i.enable="enable",i.disable="disable",i}(sk||{}),Qo=function(i){return i.openvpn="openvpn",i.dhcp="isc-dhcp-server",i.keepalived="keepalived",i.HAProxy="haproxy",i.wireGuard="wg-quick",i.IPSec="strongswan-starter",i}(Qo||{}),vg=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T){super(c,t,e,E,R,T),this.itemSelectedService=e,this.appOptionsService=t,this.fwcUserService=r,this.fwcFirewallService=o,this.fwcPolicyService=s,this.fwcErrorPipe=a,this.fb=l,this.appDialogPanelsService=c,this.confirmationService=d,this.messageService=h,this.inputDataService=_,this.fwcEventService=C,this.utilService=I,this.translate=b,this.cd=E,this.store=R,this.router=T,this.statusError=new X,this.nodeSelected=new X,this.displaySystemCtlSelectorDialog=!1,this.data={},this.loadingData=!1,this.firstAction=!0,this.errorOcurred=!1,this.timeoutRegex=/ECONNABORTED:\sTimeout/,this.apiErrorRegex=/ApiKeyNotValid:/,this.apiNotFoundRegex=/ApiKeyNotFound:/,this.apiConnectionRefusedRegex=/ECONNREFUSED/,this.apiHostUnreachableRegex=/EHOSTUNREACH/,this.createDialog(b.instant("CONTEXT.SYSTEMCTL.PANEL.TITLE"),"fa-solid fa-terminal",ri.SYSTEMCTL_PANEL)}ngOnInit(){super.ngOnInit(),this.initializeCommandSelector(),this.formModel=this.fb.group({commandSelector:new ve(null,Pe.required)})}initializeCommandSelector(){this.commandSelector=[{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.DEFAULT"),value:null},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.STATUS"),iconClass:"fwcMenuIcon fwci-help fwcBlue",value:"status"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.START"),iconClass:"fa-solid fa-circle-play fwcBlue",value:"start"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.STOP"),iconClass:"fwcMenuIcon fwci-reject fwcRed",value:"stop"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.RELOAD"),iconClass:"fa-solid fa-rotate-right fwcBlue",value:"reload"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.RESTART"),iconClass:"fwci-reload fwcBlue",value:"restart"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.ENABLE"),iconClass:"fa-regular fa-circle-check fwcBlue",value:"enable"},{label:this.translate.instant("CONTEXT.SYSTEMCTL.COMMANDS.DISABLE"),iconClass:"fa-solid fa-ban fwcRed",value:"disable"}]}handleLoadingDataChange(e){this.loadingData=e,e?this.formModel.get("commandSelector").disable():this.formModel.get("commandSelector").enable()}systemCtlSelectorDialog(e){this.data=e,this.displaySystemCtlSelectorDialog=!0}onCommandSelect(){let e=this.formModel.get("commandSelector").value;e&&(this.data.command=e.value,this.handleLoadingDataChange(!0),this.showSystemctlDialog())}showSystemctlDialog(){return B(this,null,function*(){this.loadingData=!0;let e=(yield this.utilService.fwcAPICall(this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),this.data.firewall,this.fwcUserService.getActualFwSelectedCloud())).data;if(e.install_communication==="ssh"){this.displaySystemCtlSelectorDialog=!1;let t=this.fwcUserService.getActualFwcUser().privateKey,r={header:this.translate.instant("COMPILE.INST_SSH",{name:e.name}),helpText:this.translate.instant("COMPILE.INST_SSH_TEXT"),modal:!0,formControls:[{name:"firewall_id",type:"hidden",value:e.id},{name:"communication",type:"hidden",value:e.install_communication},{name:"interface_name",label:this.translate.instant("COMPILE.FIELDS.INST_IF"),icon:"fwci-interface fwcGreen",type:"text",value:e.interface_name,readonly:!0,halfSized:!0},{name:"ip_name",label:this.translate.instant("COMPILE.FIELDS.INST_IP"),icon:"fwci-address fwcBlue",type:"text",value:e.ip_name+" ("+e.ip+")",readonly:!0,halfSized:!0},{name:"",label:"",type:"separator"},{name:"ssh_user",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_USER"),type:"text",required:!0,value:e.install_user?yield this.utilService.openPGPDecrypt(e.install_user,t):"",setFocus:!0},{name:"",label:"",type:"separator"},{name:"ssh_password",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS"),type:"password",required:!0,value:e.install_pass?yield this.utilService.openPGPDecrypt(e.install_pass,t):""}],onAccept:o=>B(this,null,function*(){let s=this.fwcUserService.getActualFwcUser().publicKey,a=o.ssh_user,l=o.ssh_password;a&&(a=yield this.utilService.openPGPEncrypt(a,s)),l&&(l=yield this.utilService.openPGPEncrypt(l,s)),this.data=ke(oe({},this.data),{sshuser:a,sshpass:l}),this.displaySystemCtlSelectorDialog=!0,this.loadingData=!1,yield this.systemctlAction()}),onCancel:()=>{this.statusError.emit(!0)}};this.inputDataService.setInputData(r)}else this.loadingData=!1,yield this.systemctlAction()})}systemctlAction(){return B(this,null,function*(){let e=this.data.service;this.loadingData=!0,this.log.startDataLoad(),this.firstAction?this.firstAction=!1:(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.log.scrollToBottom()),this.addMessageToLog(this.translate.instant(`CONTEXT.SYSTEMCTL.PANEL.${this.data.command.toUpperCase()}`,{service:e}),Ne.MSG_INFO),this.communicationSubscription=this.utilService.fwcAPICallObservable(this.fwcFirewallService.getSystemctlInformation.bind(this.fwcFirewallService),this.data).subscribe({next:t=>{this.systemctlStatusResponse=Object.assign({},this.systemctlStatusResponse),this.systemctlStatusResponse=JSON.parse(JSON.stringify(t.data.data)),t.data.data===""?(this.systemctlStatusResponse=" ",this.log.scrollToBottom()):(this.addMessageToLog(this.systemctlStatusResponse,Ne.MSG_NOTICE),this.log.scrollToBottom()),this.addMessageToLog(this.translate.instant("CONTEXT.SYSTEMCTL.PANEL.DONE"),Ne.MSG_OK),this.log.scrollToBottom(),this.handleLoadingDataChange(!1),this.loadingData=!1},error:t=>B(this,null,function*(){this.errorOcurred=!0,this.systemctlResponseError=t.error.msg?t.error.msg:t.error.message,this.timeoutRegex.test(this.systemctlResponseError)?this.systemctlResponseError=this.translate.instant("API_ERROR.ECONNABORTED: Timeout"):this.apiNotFoundRegex.test(this.systemctlResponseError)?this.systemctlResponseError=this.translate.instant("API_ERROR.ApiKeyNotFound"):this.apiErrorRegex.test(this.systemctlResponseError)?this.systemctlResponseError=this.translate.instant("API_ERROR.ApiKeyNotValid"):this.apiConnectionRefusedRegex.test(this.systemctlResponseError)?this.systemctlResponseError=this.translate.instant("API_ERROR.ECONNREFUSED"):this.apiHostUnreachableRegex.test(this.systemctlResponseError)?this.systemctlResponseError=this.translate.instant("API_ERROR.EHOSTUNREACH"):this.systemctlResponseError=JSON.parse(this.systemctlResponseError)?JSON.parse(this.systemctlResponseError).message:this.systemctlResponseError,this.addMessageToLog(this.systemctlResponseError,Ne.MSG_ERROR),this.addMessageToLog(this.translate.instant("CONTEXT.SYSTEMCTL.PANEL.ERROR"),Ne.MSG_ERROR),this.log.scrollToBottom(),this.handleLoadingDataChange(!1),this.loadingData=!1})}),this.log.stopDataLoad()})}stopAction(){this.communicationSubscription&&(this.loadingData=!1,this.handleLoadingDataChange(!1),this.communicationSubscription.unsubscribe(),this.communicationSubscription=null)}handleClose(){this.hideDialog(),this.displaySystemCtlSelectorDialog=!1,this.communicationSubscription&&(this.communicationSubscription.unsubscribe(),this.communicationSubscription=null)}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(at),S(Dt),S(Un),S(Ei),S(qr),S(St),S(Jt),S(Kt),S(Cr),S(dn),S(ft),S(Ye),S(we),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-systemctl-actions-panel"]],viewQuery:function(t,r){if(t&1&&le(pr,5),t&2){let o;te(o=ie())&&(r.log=o.first)}},outputs:{statusError:"statusError",nodeSelected:"nodeSelected"},features:[Se],decls:24,vars:17,consts:[["styleClass","dlgFwcDialog fwcObjectDialog--small",3,"visibleChange","visible","modal","resizable","closable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc"],["id","systemctlSelector",1,"grid"],[1,"col-12"],[1,"col-6"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","commandSelector","appendTo","body","optionLabel","label","dataKey","value",3,"options"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"fwcFloatLabel"],[1,"grid","col-6"],["pButton","","icon","pi pi-check",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-xmark","label","Stop",1,"p-button-danger"],[1,"divLoadTemp",3,"ngStyle"],[1,"logger"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fa-solid","fa-terminal","panel-header-icon"],["pButton","","icon","pi pi-check",1,"p-button-success",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-xmark","label","Stop",1,"p-button-danger",3,"click"],["type","button","pButton","","icon","pi pi-check","label","Close",1,"p-button-primary",3,"click"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displaySystemCtlSelectorDialog,s)||(r.displaySystemCtlSelectorDialog=s),s}),v(1,bGe,5,3,"ng-template",1),m(2,"form",2)(3,"fieldset",3),k("keyup.enter",function(){return r.onCommandSelect()})("keyup.esc",function(){return r.handleClose()}),m(4,"div",4),he(5),P(6,"div",5),m(7,"div",6)(8,"div",7)(9,"span",8)(10,"p-dropdown",9),v(11,AGe,2,1,"ng-template",10)(12,OGe,2,1,"ng-template",11),g(),m(13,"label",12),F(14),D(15,"translate"),g()()()(),fe(),m(16,"div",13),v(17,RGe,2,4,"button",14)(18,PGe,1,0,"button",15),m(19,"div",16),P(20,"p-progressSpinner"),g()()()()(),m(21,"div",17),P(22,"sts-fwc-log"),g(),v(23,DGe,1,0,"ng-template",18),g()),t&2&&(Te("visible",r.displaySystemCtlSelectorDialog),f("modal",!1)("resizable",!0)("closable",!1),p(2),f("formGroup",r.formModel),p(8),f("options",r.commandSelector),p(4),$(N(15,12,"CONTEXT.SYSTEMCTL.ACTIONS")),p(3),W(r.loadingData?-1:17),p(),W(r.loadingData?18:-1),p(),f("ngStyle",ne(14,wGe,r.loadingData?"visible":"hidden")),p(),st(Ae(16,vGe)))},styles:["#systemctlSelector[_ngcontent-%COMP%]{border-bottom:2px solid var(--fwcGrey2);padding:.313rem}.logger[_ngcontent-%COMP%]{margin-top:.625rem;margin-bottom:.313rem}"]})}}return i})();var BC=()=>({visibility:"hidden"});function FGe(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"PANELS.DHCP_RULE_PANEL.TITLE")," "))}function kGe(i,n){if(i&1){let e=L();m(0,"div",10)(1,"div",11)(2,"span",12)(3,"p-dropdown",13),k("onChange",function(r){y(e);let o=u(2);return w(o.toggleFields(r.value))}),g(),m(4,"label",14),F(5),D(6,"translate"),g()()()()}if(i&2){let e=u(2);p(3),f("options",e.dhcpRegularRuleTypes)("autoDisplayFirst",!1),p(2),$(N(6,3,"DHCP.NEW_RULE_PANEL.TYPES"))}}function NGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",15),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.DHCP_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_DHCP_RULE_NETWORK),p(3),$(N(7,7,"POLICY_GRID.RULES.DHCP_NETWORK")),p(2),f("ngStyle",Ae(9,BC))}}function LGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",17),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.DHCP_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_DHCP_RULE_RANGE),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.RANGE")),p(2),f("ngStyle",Ae(9,BC))}}function MGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",18),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.DHCP_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_DHCP_RULE_ROUTER),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.ROUTER")),p(2),f("ngStyle",Ae(9,BC))}}function VGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",19),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.DHCP_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_DHCP_RULE_INTERFACE),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.INTERFACE")),p(2),f("ngStyle",Ae(9,BC))}}function BGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",20),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.DHCP_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_DHCP_RULE_IP),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.IP")),p(2),f("ngStyle",Ae(9,BC))}}function UGe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"label",21),F(2),D(3,"translate"),g(),m(4,"div",22)(5,"textarea",23),k("drop",function(r){y(e);let o=u(2);return w(o.preventDrop(r))}),g()()()}i&2&&(p(2),$(N(3,1,"ITEM_PANEL.FIELDS.CFG_TEXT")))}function jGe(i,n){if(i&1&&(P(0,"div",5),v(1,kGe,7,5,"div",10)(2,NGe,9,10,"div",5)(3,LGe,9,10,"div",5)(4,MGe,9,10,"div",5)(5,VGe,9,10,"div",5)(6,BGe,9,10,"div",5)(7,UGe,6,3,"div",5)),i&2){let e=u();p(),W(e.dhcpFixedIpPolicySelected()?-1:1),p(),W(e.isRegularRuleSelected()?2:-1),p(),W(e.isRegularRuleSelected()?3:-1),p(),W(e.isRegularRuleSelected()?4:-1),p(),W(e.dhcpFixedIpPolicySelected()?5:-1),p(),W(e.dhcpFixedIpPolicySelected()?6:-1),p(),W(e.isManualConfigRuleSelected()||e.isDefaultConfigRuleSelected()?7:-1)}}function GGe(i,n){if(i&1&&(m(0,"div",5),P(1,"sts-fwc-message",24),g()),i&2){let e=u();p(),f("message",e.opMessage)}}function HGe(i,n){if(i&1){let e=L();m(0,"button",25),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleCancel())}),g(),m(2,"button",26),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData)}}var Mz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T){super(r,t,e,o,s,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.store=s,this.fb=a,this.router=l,this.fwcErrorPipe=c,this.utilService=d,this.fwcPolicyService=h,this.fwcDhcpPolicyService=_,this.fwcUserService=C,this.fwcFirewallService=I,this.confirmationService=b,this.translate=E,this.messageService=R,this.http=T,this.ObjectTypes=O,this.defaultConfigTextSet=!1,this.loadingData=!1,this.dataLoaded=!1,this.dhcpRegularRuleTypes=[{id:0,name:this.translate.instant("DHCP.NEW_RULE_PANEL.REGULAR_TYPE"),rule_type:1},{id:1,name:this.translate.instant("DHCP.NEW_RULE_PANEL.MANUAL_CONFIG_TYPE"),rule_type:3},{id:2,name:this.translate.instant("DHCP.NEW_RULE_PANEL.DEFAULT_CONFIG_TYPE"),rule_type:3}],this.dhcpFixedIpRuleType={id:0,name:this.translate.instant("DHCP.NEW_RULE_PANEL.FIXED_IP_TYPE"),rule_type:2}}ngOnInit(){this.formModel=this.fb.group({dhcpRegularRuleTypes:new ve,dhcpRegularRule:new ve,dhcpManualConfigRule:new ve,dhcpDefaultConfigRule:new ve,dhcpFixedIpRule:new ve,network:new ve(void 0),range:new ve(void 0),router:new ve(void 0),interface:new ve(void 0),ip:new ve(void 0),cfg_text:new ve(void 0)}),this.dhcpRegularRule={id:0,name:this.translate.instant("DHCP.NEW_RULE_PANEL.REGULAR_TYPE"),rule_type:1,network:"",range:"",router:""},this.dhcpManualConfigRule={id:1,name:this.translate.instant("DHCP.NEW_RULE_PANEL.MANUAL_CONFIG_TYPE"),rule_type:3,cfg_text:""},this.dhcpDefaultConfigRule={id:2,name:this.translate.instant("DHCP.NEW_RULE_PANEL.DEFAULT_CONFIG_TYPE"),rule_type:3,cfg_text:""},this.dhcpFixedIpRule={id:0,name:this.translate.instant("DHCP.NEW_RULE_PANEL.FIXED_IP_TYPE"),rule_type:2,interface:"",ip:""},this.formModel.setValidators([this.validateRegularRuleFields.bind(this),this.validateFixedIpRuleFields.bind(this),this.validateManualConfigRuleFields.bind(this)]),this.formModel.get("dhcpRegularRuleTypes").valueChanges.subscribe(e=>{if(e!==this.formModel.get("dhcpRegularRuleTypes").value){this.toggleFields(e);let t=this.formModel.get("dhcpRegularRuleTypes"),r=this.formModel.get("network"),o=this.formModel.get("range"),s=this.formModel.get("router");t.setValidators(this.getDhcpRuleTypesValidators()),r.setValidators(this.getDhcpRuleTypesValidators()),o.setValidators(this.getDhcpRuleTypesValidators()),s.setValidators(this.getDhcpRuleTypesValidators()),t.updateValueAndValidity(),r.updateValueAndValidity(),o.updateValueAndValidity(),s.updateValueAndValidity(),this.formModel.updateValueAndValidity()}}),this.formModel.get("dhcpFixedIpRule").valueChanges.subscribe(e=>{if(e!==this.formModel.get("dhcpFixedIpRule").value){this.toggleFields(e);let t=this.formModel.get("dhcpFixedIpRule"),r=this.formModel.get("interface"),o=this.formModel.get("ip"),s=this.formModel.get("cfg_text");this.defaultConfigTextSet&&(s.setValue("",{emitEvent:!1}),this.defaultConfigTextSet=!1),t.setValidators(this.getDhcpFixedIpRuleValidators()),r.setValidators(this.getDhcpFixedIpRuleValidators()),o.setValidators(this.getDhcpFixedIpRuleValidators()),t.updateValueAndValidity(),r.updateValueAndValidity(),o.updateValueAndValidity(),this.formModel.updateValueAndValidity()}}),this.formModel.get("dhcpManualConfigRule").valueChanges.subscribe(e=>{if(e!==this.formModel.get("dhcpManualConfigRule").value){this.toggleFields(e);let t=this.formModel.get("cfg_text");this.defaultConfigTextSet&&(t.setValue("",{emitEvent:!1}),this.defaultConfigTextSet=!1),t.updateValueAndValidity(),this.formModel.updateValueAndValidity()}}),this.formModel.get("dhcpDefaultConfigRule").valueChanges.subscribe(e=>{if(e!==this.formModel.get("dhcpDefaultConfigRule").value){this.toggleFields(e);let t=this.formModel.get("cfg_text");this.setDhcpConfigText(),t.updateValueAndValidity(),this.formModel.updateValueAndValidity()}})}toggleFields(e){let t=this.formModel.get("network"),r=this.formModel.get("range"),o=this.formModel.get("router"),s=this.formModel.get("interface"),a=this.formModel.get("ip"),l=this.formModel.get("cfg_text");t.reset(),r.reset(),o.reset(),t.disable(),r.disable(),o.disable(),s.reset(),a.reset(),s.disable(),a.disable(),l.reset(),e==="dhcpRegularRuleTypes"?(t.enable(),r.enable(),o.enable()):e==="dhcpFixedIpRule"?(s.enable(),a.enable()):(e==="dhcpManualConfigRule"||e==="dhcpDefaultConfigRule")&&l.enable()}dhcpFixedIpPolicySelected(){let e=this.fwcPolicyService.getActualSelectedPolicy();return e&&e._fwcPolicyType===ki[M.DHCP_FIXED_IP]}isRegularRuleSelected(){let e=this.formModel.get("dhcpRegularRuleTypes").value,t=e&&e.name===this.translate.instant("DHCP.NEW_RULE_PANEL.REGULAR_TYPE")&&e.rule_type===1;return t&&(this.defaultConfigTextSet=!1),t}isManualConfigRuleSelected(){let e=this.formModel.get("dhcpRegularRuleTypes").value,t=e&&e.name===this.translate.instant("DHCP.NEW_RULE_PANEL.MANUAL_CONFIG_TYPE");return t&&(this.defaultConfigTextSet=!1),t}isDefaultConfigRuleSelected(){let e=this.formModel.get("dhcpRegularRuleTypes").value,t=e&&e.name===this.translate.instant("DHCP.NEW_RULE_PANEL.DEFAULT_CONFIG_TYPE");return t&&!this.defaultConfigTextSet?(this.setDhcpConfigText(),this.defaultConfigTextSet=!0):t||(this.defaultConfigTextSet=!1),t}getDhcpRuleTypesValidators(){return this.isRegularRuleSelected()?Pe.required:null}getDhcpFixedIpRuleValidators(){return this.dhcpFixedIpPolicySelected()?Pe.required:null}validateRegularRuleFields(){let e=this.formModel.get("network"),t=this.formModel.get("range"),r=this.formModel.get("router");return this.isRegularRuleSelected()&&(!e.value||!t.value||!r.value)?{requiredFieldsMissing:!0}:null}validateFixedIpRuleFields(){let e=this.formModel.get("interface"),t=this.formModel.get("ip");return this.dhcpFixedIpPolicySelected()&&(!e.value||!t.value)?{requiredFieldsMissing:!0}:null}validateManualConfigRuleFields(){return this.isManualConfigRuleSelected(),null}loadDhcpConfigFile(){return B(this,null,function*(){try{return yield this.http.get("assets/config/system/dhcpd-DEFAULT.conf",{responseType:"text"}).toPromise()}catch(e){throw this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)}),e}})}setDhcpConfigText(){return B(this,null,function*(){try{let e=yield this.loadDhcpConfigFile();this.formModel.get("cfg_text").setValue(e)}catch(e){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)})}})}showNewRuleDialog(e,t,r,o){this.clusterId=e,this.firewallId=t,this.baseRuleId=r,this.newRuleOffset=o,e?this.fwcFirewallService.getCluster.bind(this.fwcFirewallService)(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{this.clusterId=s.data.id,this.displayDialog=!0}):this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService)(t,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{this.firewallId=s.data.id,this.displayDialog=!0}),this.dataLoaded=!0}handleSave(){if(this.formModel.valid){this.store.dispatch(Bi.requestBlockUI());let{comment:e}=this.formModel.value,t=this.newRuleOffset<1?"above":"below",r=this.dhcpRegularRuleTypes[0].rule_type,o=this.dhcpRegularRuleTypes[1].rule_type,s=this.dhcpRegularRuleTypes[2].rule_type,a=this.dhcpFixedIpRule.rule_type,l={firewallId:this.firewallId,to:this.baseRuleId,offset:t,style:void 0,comment:e};this.isRegularRuleSelected()?(l.networkId=this.formModel.controls.network.value.id,l.rangeId=this.formModel.controls.range.value.id,l.routerId=this.formModel.controls.router.value.id,l.rule_type=r):this.dhcpFixedIpPolicySelected()?(l.interfaceId=this.formModel.controls.interface.value.id,l.routerId=this.formModel.controls.ip.value.id,l.rule_type=a):this.isManualConfigRuleSelected()?(l.rule_type=o,l.cfg_text=this.formModel.controls.cfg_text.value):this.isDefaultConfigRuleSelected()&&(l.rule_type=s,l.cfg_text=this.formModel.controls.cfg_text.value),this.loadingData=!0,this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcDhcpPolicyService.newPolicyDhcpRule.bind(this.fwcDhcpPolicyService),this.firewallId,this.fwcUserService.getActualFwSelectedCloud(),l).then(()=>{this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.DHCP_RULE_PANEL.INFO.SAVE_RULE")}),this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}}))}).catch(c=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(c)})}).finally(()=>{this.loadingData=!1,this.store.dispatch(Bi.requestUnblockUI())})}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog(),this.fwcPolicyService.reloadPolicy()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(nt),S(qr),S(ct),S(Ei),S(ft),S(Un),S(Eu),S(at),S(Dt),S(Jt),S(Ye),S(Kt),S(ti))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-dhcp-rule-panel"]],features:[Se],decls:8,vars:9,consts:[["styleClass","dlgFwcDialog--system fwcObjectDialog--dhcp",3,"visibleChange","onShow","onHide","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fa","fa-gear","fwcOrange"],[1,"col-12",2,"margin-bottom","10px"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","dhcpRegularRuleTypes","styleClass","dropDownForm","appendTo","body","optionLabel","name","dataKey","id",3,"onChange","options","autoDisplayFirst"],[1,"fwcFloatLabel"],["formControlName","network",3,"readOnly","groupType","msgNotAllowed"],[1,"fwc-error",3,"ngStyle"],["formControlName","range",3,"readOnly","groupType","msgNotAllowed"],["formControlName","router",3,"readOnly","groupType","msgNotAllowed"],["formControlName","interface",3,"readOnly","groupType","msgNotAllowed"],["formControlName","ip",3,"readOnly","groupType","msgNotAllowed"],["for","cfg_text"],[1,"fwcTextArea"],["pInputTextarea","","formControlName","cfg_text","name","cfg_text",2,"height","120px",3,"drop"],[3,"message"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onShow",function(){return!0})("onHide",function(){return!0}),v(1,FGe,5,3,"ng-template",1),m(2,"form",2)(3,"fieldset",3),k("keyup.enter",function(s){return r.handleCheckForm(s)})("keyup.esc",function(){return r.handleCancel()}),m(4,"div",4),v(5,jGe,8,7)(6,GGe,2,1,"div",5),g()()(),v(7,HGe,4,7,"ng-template",6),g()),t&2&&(Te("visible",r.displayDialog),f("modal",!1)("closable",!1)("draggable",!0)("resizable",!0),p(2),f("formGroup",r.formModel),p(),f("disabled",r.loadingData),p(2),W(r.dataLoaded?5:-1),p(),W(!r.loadingData&&r.opMessage?6:-1))}})}}return i})();var Ou=(()=>{class i extends Mi{constructor(e,t){super(e),this.httpClient=e,this.fwcFirewallService=t,this._isKeepalivedPolicy=new vn(!1),this.isKeepalivedPolicy$=this._isKeepalivedPolicy.asObservable(),this._keepalivedClusterId=new vn(0),this.keepalivedClusterId$=this._keepalivedClusterId.asObservable()}setIsKeepalivedPolicy(e){this._isKeepalivedPolicy.next(e)}setKeepalivedClusterId(e){this._keepalivedClusterId.next(e)}getKeepalivedClusterId(){return this._keepalivedClusterId.getValue()}getKeepalivedPolicy(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getKeepalivedPolicyGrid(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/grid`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newPolicyKeepalivedRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules`;return this.httpClient.post(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateKeepalivedPolicyRule(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}moveObjectBetweenPositions(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/moveFrom`;return this.httpClient.put(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateKeepalivedPolicyRules(e,t,r,o){let s=r.map(c=>`rules[]=${c}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/bulkUpdate?${s}`,l={active:o.active,style:o.style,group:o.group};return this.httpClient.put(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteKeepalivedPolicyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteKeepalivedPolicyRules(e,t,r){let o=r.map(a=>`rules[]=${a}`).join("&"),s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/bulkRemove?${o}`;return this.httpClient.delete(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}manageKeepalivedPolicyRules(e,t,r,o,s,a){let l="copy",c=this.httpClient.post,d=o<0?"above":"below";a===Or.CUT&&(l="move",c=this.httpClient.put);let h=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/${l}`,_={to:r,offset:d,rules:s};return c.call(this.httpClient,h,_).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}compileKeepalivedPolicyRules(e,t,r){let o;if(r){let s=r.map(a=>`rules[]=${a}`).join("&");o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/compile?${s}`}else o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/compile`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getKeepalivedGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/system/keepalivedGroups/${r}`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkGroupRestrictions(e){let{fwcloud:t,firewall:r,id:o}=e,s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${r}/system/keepalivedGroups/${o}/restricted`;return this.httpClient.get(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newKeepalivedPolicyRuleGroup(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedGroups`,l={name:r,comment:o,rules:s};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateKeepalivedPolicyRuleGroup(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedGroups/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteKeepalivedPolicyRulesGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedGroups/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}installConfig(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/keepalivedRules/install?channel_id=${r}`;return this.httpClient.put(s,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti),de(Dt))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ak=()=>({visibility:"hidden"});function WGe(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"PANELS.KEEPALIVED_RULE_PANEL.TITLE")," "))}function zGe(i,n){i&1&&P(0,"div",5)}function KGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",15),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.KEEPALIVED_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_KEEPALIVED_INTERFACE),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.INTERFACE")),p(2),f("ngStyle",Ae(9,ak))}}function $Ge(i,n){i&1&&P(0,"div",5)}function JGe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"div",11)(2,"span",12)(3,"sts-fwc-object-group",17),D(4,"translate"),k("onVirtualIpChange",function(r){y(e);let o=u(2);return w(o.handleOnChange(r))}),g(),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()}if(i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.KEEPALIVED_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_KEEPALIVED_VIRTUAL_IPS),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.VIRTUAL_IPS")),p(2),f("ngStyle",Ae(9,ak))}}function qGe(i,n){i&1&&P(0,"div",5)}function YGe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",18),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.KEEPALIVED_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_KEEPALIVED_MASTER_NODE),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.MASTER_NODE")),p(2),f("ngStyle",Ae(9,ak))}}function XGe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"label",19),F(2),D(3,"translate"),g(),m(4,"div",20)(5,"textarea",21),k("drop",function(r){y(e);let o=u(2);return w(o.preventDrop(r))}),g()()()}i&2&&(p(2),$(N(3,1,"ITEM_PANEL.FIELDS.CFG_TEXT")))}function QGe(i,n){if(i&1){let e=L();P(0,"div",5),m(1,"div",10)(2,"div",11)(3,"span",12)(4,"p-dropdown",13),k("onChange",function(r){y(e);let o=u();return w(o.toggleFields(r.value))}),g(),m(5,"label",14),F(6),D(7,"translate"),g()()()(),v(8,zGe,1,0,"div",5)(9,KGe,9,10,"div",5)(10,$Ge,1,0,"div",5)(11,JGe,9,10,"div",5)(12,qGe,1,0,"div",5)(13,YGe,9,10,"div",5)(14,XGe,6,3,"div",5)}if(i&2){let e=u();p(4),f("options",e.keepalivedRuleTypes)("autoDisplayFirst",!1),p(2),$(N(7,10,"KEEPALIVED.NEW_RULE_PANEL.TYPES")),p(2),W(e.keepalivedRuleSelected()?8:-1),p(),W(e.keepalivedRuleSelected()?9:-1),p(),W(e.keepalivedRuleSelected()?10:-1),p(),W(e.keepalivedRuleSelected()?11:-1),p(),W(e.keepalivedRuleSelected()?12:-1),p(),W(e.keepalivedRuleSelected()?13:-1),p(),W(e.keepalivedManualConfigRuleSelected()||e.isDefaultConfigRuleSelected()?14:-1)}}function ZGe(i,n){if(i&1&&(m(0,"div",5),P(1,"sts-fwc-message",22),g()),i&2){let e=u();p(),f("message",e.opMessage)}}function eHe(i,n){if(i&1){let e=L();m(0,"button",23),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleCancel())}),g(),m(2,"button",24),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData)}}var Vz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T){super(r,t,e,o,s,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.store=s,this.fb=a,this.router=l,this.fwcErrorPipe=c,this.utilService=d,this.fwcPolicyService=h,this.fwcKeepalivedPolicyService=_,this.fwcUserService=C,this.fwcFirewallService=I,this.confirmationService=b,this.translate=E,this.messageService=R,this.http=T,this.ObjectTypes=O,this.defaultConfigTextSet=!1,this.loadingData=!1,this.dataLoaded=!1,this.keepalivedRuleTypes=[{id:0,name:this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_RULE"),rule_type:1},{id:1,name:this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_MANUAL"),rule_type:2},{id:2,name:this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_DEFAULT"),rule_type:2}]}ngOnInit(){this.formModel=this.fb.group({keepalivedRuleTypes:new ve,keepalivedRule:new ve,keepalivedManualConfigRule:new ve,keepalivedDefaultConfigRule:new ve,interface:new ve,virtualIps:this.fb.array([]),masterNode:new ve,cfg_text:new ve}),this.formModel.get("keepalivedRuleTypes").valueChanges.subscribe(e=>{this.toggleFields(e),this.formModel.updateValueAndValidity()}),this.formModel.setValidators([this.validateFields.bind(this)])}toggleFields(e){let t=this.formModel.get("interface"),r=this.formModel.get("virtualIps"),o=this.formModel.get("masterNode"),s=this.formModel.get("cfg_text");if(t.reset(),o.reset(),s.reset(),e&&e.rule_type===1)for(t.enable(),o.enable(),s.disable();r.length!==0;)r.removeAt(0);else e&&e.rule_type===2?(s.enable(),t.disable(),o.disable(),r.controls.forEach(a=>{a.disable()})):e&&e.rule_type===2&&e==="keepalivedDefaultConfigRule"&&s.enable()}validateFields(){let e=this.formModel.get("keepalivedRuleTypes").value,t=this.formModel.get("interface"),r=this.formModel.get("virtualIps"),o=this.formModel.get("masterNode"),s=this.formModel.get("cfg_text");if(e&&e.rule_type===1){if(!t.value||!o.value||r.length===0)return{requiredFieldsMissing:!0}}else if(e&&e.rule_type===2)return s.value,null;return null}addVirtualIp(e){let t=this.fb.control(e);t.setValue(e),this.formModel.get("virtualIps").push(t)}handleOnChange(e){this.addVirtualIp(e.id)}keepalivedRuleSelected(){let e=this.formModel.get("keepalivedRuleTypes").value;return e&&e.name===this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_RULE")&&e.rule_type===1}keepalivedManualConfigRuleSelected(){let e=this.formModel.get("keepalivedRuleTypes").value;return e&&e.name===this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_MANUAL")&&e.rule_type===2}isDefaultConfigRuleSelected(){let e=this.formModel.get("keepalivedRuleTypes").value,t=e&&e.name===this.translate.instant("KEEPALIVED.NEW_RULE_PANEL.KEEPALIVED_DEFAULT");return t&&!this.defaultConfigTextSet?(this.setKeepalivedConfigText(),this.defaultConfigTextSet=!0):t||(this.defaultConfigTextSet=!1),t}loadKeepalivedConfigFile(){return B(this,null,function*(){try{return yield this.http.get("assets/config/system/keepalived-DEFAULT.conf",{responseType:"text"}).toPromise()}catch(e){throw this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)}),e}})}setKeepalivedConfigText(){return B(this,null,function*(){try{let e=yield this.loadKeepalivedConfigFile();this.formModel.get("cfg_text").setValue(e)}catch(e){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)})}})}showNewRuleDialog(e,t,r,o){this.clusterId=e,this.firewallId=t,this.baseRuleId=r,this.newRuleOffset=o,this.fwcFirewallService.getCluster.bind(this.fwcFirewallService)(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{this.clusterId=s.data.id,this.displayDialog=!0}),this.dataLoaded=!0}handleSave(){if(this.formModel.valid){this.store.dispatch(Bi.requestBlockUI());let{comment:e}=this.formModel.value,t=this.newRuleOffset<1?"above":"below",r=this.keepalivedRuleTypes[0].rule_type,o=this.keepalivedRuleTypes[1].rule_type,s=this.keepalivedRuleTypes[2].rule_type,a={firewallId:this.firewallId,to:this.baseRuleId,offset:t,style:void 0,comment:e};if(this.keepalivedRuleSelected()){a.interfaceId=this.formModel.controls.interface.value.id,a.masterNodeId=this.formModel.controls.masterNode.value.id,a.rule_type=r;let l=[];Array.isArray(this.formModel.get("virtualIps").value)&&this.formModel.get("virtualIps").value.forEach((c,d)=>{l.push({id:c,order:d+1})}),a.virtualIpsIds=l}else this.keepalivedManualConfigRuleSelected()?(a.rule_type=o,a.cfg_text=this.formModel.controls.cfg_text.value):this.isDefaultConfigRuleSelected()&&(a.rule_type=s,a.cfg_text=this.formModel.controls.cfg_text.value);this.loadingData=!0,this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcKeepalivedPolicyService.newPolicyKeepalivedRule.bind(this.fwcKeepalivedPolicyService),this.firewallId,this.fwcUserService.getActualFwSelectedCloud(),a).then(()=>{this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.INFO.SAVE_RULE")}),this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}}))}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(l)})}).finally(()=>{this.loadingData=!1,this.store.dispatch(Bi.requestUnblockUI())})}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog(),this.fwcPolicyService.reloadPolicy()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(nt),S(qr),S(ct),S(Ei),S(ft),S(Un),S(Ou),S(at),S(Dt),S(Jt),S(Ye),S(Kt),S(ti))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-keepalived-rule-panel"]],features:[Se],decls:8,vars:9,consts:[["styleClass","dlgFwcDialog--system fwcObjectDialog---dhcp",3,"visibleChange","onShow","onHide","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fa","fa-gear","fwcOrange"],[1,"col-12",2,"margin-bottom","10px"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","keepalivedRuleTypes","styleClass","dropDownForm","appendTo","body","optionLabel","name","dataKey","id",3,"onChange","options","autoDisplayFirst"],[1,"fwcFloatLabel"],["formControlName","interface",3,"readOnly","groupType","msgNotAllowed"],[1,"fwc-error",3,"ngStyle"],["dropzone","move","formArrayName","virtualIps",3,"onVirtualIpChange","readOnly","groupType","msgNotAllowed"],["formControlName","masterNode",3,"readOnly","groupType","msgNotAllowed"],["for","cfg_text"],[1,"fwcTextArea"],["pInputTextarea","","formControlName","cfg_text","name","cfg_text",2,"height","120px",3,"drop"],[3,"message"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onShow",function(){return!0})("onHide",function(){return!0}),v(1,WGe,5,3,"ng-template",1),m(2,"form",2)(3,"fieldset",3),k("keyup.enter",function(s){return r.handleCheckForm(s)})("keyup.esc",function(){return r.handleCancel()}),m(4,"div",4),v(5,QGe,15,12)(6,ZGe,2,1,"div",5),g()()(),v(7,eHe,4,7,"ng-template",6),g()),t&2&&(Te("visible",r.displayDialog),f("modal",!1)("closable",!1)("draggable",!0)("resizable",!0),p(2),f("formGroup",r.formModel),p(),f("disabled",r.loadingData),p(2),W(r.dataLoaded?5:-1),p(),W(!r.loadingData&&r.opMessage?6:-1))}})}}return i})();var Ru=(()=>{class i extends Mi{constructor(e){super(e),this.httpClient=e,this._isHAProxyPolicy=new vn(!1),this.isHAProxyPolicy$=this._isHAProxyPolicy.asObservable()}setIsHAProxyPolicy(e){this._isHAProxyPolicy.next(e)}getHAProxyPolicy(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getHAProxyPolicyGrid(e,t){let r=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/grid`;return this.httpClient.get(r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newPolicyHAProxyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules`;return this.httpClient.post(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateHAProxyPolicyRule(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}moveObjectBetweenPositions(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/moveFrom`;return this.httpClient.put(o,r).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateHAProxyPolicyRules(e,t,r,o){let s=r.map(c=>`rules[]=${c}`).join("&"),a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/bulkUpdate?${s}`,l={active:o.active,style:o.style,group:o.group};return this.httpClient.put(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteHAProxyPolicyRule(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteHAProxyPolicyRules(e,t,r){let o=r.map(a=>`rules[]=${a}`).join("&"),s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/bulkRemove?${o}`;return this.httpClient.delete(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}manageHAProxyPolicyRules(e,t,r,o,s,a){let l="copy",c=this.httpClient.post,d=o<0?"above":"below";a===Or.CUT&&(l="move",c=this.httpClient.put);let h=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/${l}`,_={to:r,offset:d,rules:s};return c.call(this.httpClient,h,_).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}compileHAProxyPolicyRules(e,t,r){let o;if(r){let s=r.map(a=>`rules[]=${a}`).join("&");o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/compile?${s}`}else o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/compile`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}getHAProxyGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${e}/firewalls/${t}/system/haproxyGroups/${r}`;return this.httpClient.get(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}checkGroupRestrictions(e){let{fwcloud:t,firewall:r,id:o}=e,s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${r}/system/haproxyGroups/${o}/restricted`;return this.httpClient.get(s).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}newHAProxyPolicyRuleGroup(e,t,r,o,s){let a=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyGroups`,l={name:r,comment:o,rules:s};return this.httpClient.post(a,l).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}updateHAProxyPolicyRuleGroup(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyGroups/${r}`;return this.httpClient.put(s,o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}deleteHAProxyPolicyRulesGroup(e,t,r){let o=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyGroups/${r}`;return this.httpClient.delete(o).pipe(K(this.handleAPIResponseNew),q(this.handleAPIErrorNew))}installConfig(e,t,r,o){let s=`${_e.settings.fwcAppURL}/fwclouds/${t}/firewalls/${e}/system/haproxyRules/install?channel_id=${r}`;return this.httpClient.put(s,JSON.stringify(o)).pipe(K(this.handleAPIResponse),q(this.handleAPIError))}static{this.\u0275fac=function(t){return new(t||i)(de(ti))}}static{this.\u0275prov=Ce({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var tHe=["txtConfigFile"],iHe=()=>({width:"80vw"}),Bz=i=>({name:i}),nHe=i=>({visibility:i}),rHe=()=>({width:"1.7rem",height:"1.7rem"});function oHe(i,n){if(i&1&&(m(0,"h6",12),P(1,"i",13),F(2),D(3,"translate"),g()),i&2){let e=u(2);p(2),J(" ",ei(3,1,e.configManageTranslateKey+".FORM_HEADER",ne(4,Bz,e.objectToManage.firewall_name))," ")}}function sHe(i,n){if(i&1&&(m(0,"h6",12),P(1,"i",13),F(2),D(3,"translate"),g()),i&2){let e=u(2);p(2),J(" ",ei(3,1,e.configManageTranslateKey+".FORM_HEADER",ne(4,Bz,e.objectToManage.cluster_name))," ")}}function aHe(i,n){if(i&1&&(he(0),m(1,"div",11),v(2,oHe,4,6,"h6",12)(3,sHe,4,6,"h6",12),g(),fe()),i&2){let e=u();p(2),W(e.objectToManage.cluster_id?-1:2),p(),W(e.objectToManage.cluster_id?3:-1)}}function lHe(i,n){if(i&1&&(m(0,"span"),P(1,"i",14),F(2,"\xA0"),m(3,"strong"),F(4),g()()),i&2){let e=u(2).$implicit;p(4),$(e.firewallName)}}function cHe(i,n){if(i&1&&(m(0,"span"),P(1,"span",15)(2,"i",16),F(3),g()),i&2){let e=u(2).$implicit;p(3),J("\xA0",e.firewallName,"")}}function dHe(i,n){if(i&1&&(m(0,"td"),v(1,lHe,5,1,"span")(2,cHe,4,1,"span"),g()),i&2){let e=u().$implicit;p(),W(e.isNode?-1:1),p(),W(e.isNode?2:-1)}}function pHe(i,n){if(i&1&&(m(0,"td"),P(1,"i",16),F(2),g()),i&2){let e=u().$implicit;p(2),J("\xA0",e.firewallName," ")}}function uHe(i,n){if(i&1&&(m(0,"tr",8),v(1,dHe,3,2,"td")(2,pHe,3,1,"td"),m(3,"td",7),P(4,"i"),g()()),i&2){let e=n.$implicit,t=u();f("ngClass",e.coloredBg?"bgColored":"bgNormal"),p(),W(e.clusterId!==null&&e.clusterId!==void 0?1:-1),p(),W(e.clusterId===null||e.clusterId===void 0?2:-1),p(2),ce(t.FirewallOpsIcons[e.installState])}}function hHe(i,n){if(i&1){let e=L();m(0,"button",20),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.doStopProcess())}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.STOP"))}function fHe(i,n){if(i&1){let e=L();m(0,"button",23),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.doPauseProcess(!0))}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"COMPILE.PAUSE")),f("disabled",e.disableButtons)}}function mHe(i,n){if(i&1){let e=L();m(0,"button",24),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.doContinueProcess())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"COMPILE.CONTINUE")),f("disabled",e.disableButtons)}}function gHe(i,n){if(i&1&&v(0,fHe,2,4,"button",21)(1,mHe,2,4,"button",22),i&2){let e=u(2);W(!e.pauseProcess&&e.operationInProcessId<e.operationQueue.length?0:-1),p(),W(e.pauseProcess&&e.operationInProcessId<e.operationQueue.length?1:-1)}}function _He(i,n){if(i&1){let e=L();m(0,"button",25),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancel())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function CHe(i,n){if(i&1&&(m(0,"div",17),P(1,"p-progressSpinner"),g(),v(2,hHe,2,3,"button",18)(3,gHe,2,2)(4,_He,2,4,"button",19)),i&2){let e=u();f("ngStyle",ne(6,nHe,e.savingData?"visible":"hidden")),p(),st(Ae(8,rHe)),p(),W(e.loadingData?2:-1),p(),W(e.objectToManage&&(e.operationQueue[e.operationInProcessId]==null?null:e.operationQueue[e.operationInProcessId].clusterId)!==null&&(e.operationQueue[e.operationInProcessId]==null?null:e.operationQueue[e.operationInProcessId].clusterId)!==void 0?3:-1),p(),W(e.object?-1:4)}}var IHe=6e4,bg=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,a,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.translate=s,this.store=a,this.router=l,this.fwcFirewallService=c,this.utilService=d,this.fwcDhcpPolicyService=h,this.fwcKeepalivedPolicyService=_,this.fwcHAProxyPolicyService=C,this.fwcUserService=I,this.confirmationService=b,this.messageService=E,this.fwcEventService=R,this.fwcErrorPipe=T,this.inputDataService=A,this.restrictionsReadOnly=!1,this.ObjectTypes=O,this.FirewallOpsIcons=Cc,this.operationQueue=[],this.operationStatus={},this.pauseProcess=!1,this.disableButtons=!1,this.NodeTypes=M,this.alive=!0}ngOnInit(){return B(this,null,function*(){this.store.pipe(yt(()=>this.alive),Cn(na.selectDialogUuidsToReload)).subscribe(t=>{t&&t.find(r=>r===this.dialogUUID)&&this.reloadPanel()});let e=this.objectToManage;if(e.parent_type===O.OBJ_CLUSTER){let t;if(t=yield this.getClusterMasterFirewall(e.parent_id),t)e.firewall=t.id,e.firewall_name=t.name;else{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CLUSTER.ERROR_MASTER_TEXT",{name:e.name})});return}}else e.firewall=e.parent_id})}ngOnDestroy(){super.ngOnDestroy()}startTimeoutHandler(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.timeoutTimer=setTimeout(()=>{this.eventsSubscription.unsubscribe(),this.doTimeoutOp()},IHe)}refreshTimeoutHandler(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.startTimeoutHandler()}reloadPanel(){if(this.displayDialog||this.dialogMinified){let e=this.itemSelectedService.getActualLastMinifiedDialogId();this.resetProperties(),this.dialogId===e&&(this.showDialog(),this.itemSelectedService.setLastMinifiedDialogId(void 0)),this.store.dispatch(on.reloadDialogFinished({dialogUuid:this.dialogUUID}))}}resetProperties(){this.savingData=!1,this.loadingData=!1,this.disableButtons=!1,this.object=this.objectToManage=null,this.remoteOptions=[],this.errorMsg=null}onItemManage(e,t){return B(this,null,function*(){if(!e)return;let r,o,s,a=[],l=this.fwcUserService.getActualFwSelectedCloud();this.objectToManage=e,e._fwcObjType===ki[M.DHCP]?(this.configManageTranslateKey="DHCP.CONFIG",this.configManageAPICall=this.fwcDhcpPolicyService.installConfig.bind(this.fwcDhcpPolicyService)):e._fwcObjType===ki[M.KEEPALIVED]?(this.configManageTranslateKey="KEEPALIVED.CONFIG",this.configManageAPICall=this.fwcKeepalivedPolicyService.installConfig.bind(this.fwcKeepalivedPolicyService)):e._fwcObjType===ki[M.HAPROXY]&&(this.configManageTranslateKey="HAPROXY.CONFIG",this.configManageAPICall=this.fwcHAProxyPolicyService.installConfig.bind(this.fwcHAProxyPolicyService)),this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.showDialog(),t&&this.recenterDialog(),this.channel_id=$r(),this.utilService.ioListenOnLogEvent(this.channel_id),this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(c=>{let d=new bo(c),h;d.payload.type===Ne.MSG_ERROR&&(h=this.utilService.isCommunicationErrorStr(d.payload.message),this.pauseProcess=!0,this.loadingData=!1,this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.operationWithErrors=!0),h?this.continueButtonText=this.translate.instant("COMPILE.RETRY"):(this.log.addNewMessage(d),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"))}),e.parent_type===O.OBJ_CLUSTER?(s=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),o=e.parent_id,r=!0):e.parent_type===O.OBJ_FIREWALL&&(s=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),o=e.firewall_id,r=!1),s&&s(o,l).subscribe(c=>B(this,null,function*(){c.data&&c.data instanceof Array?a=c.data:c.data?(a=[],a.push(c.data)):a=[],this.operationQueue=[];let d;r&&(d={clusterId:o,firewallId:o,firewallName:e._fwcClusterName,installState:Xt.FW_DISABLED,opInstalled:!1},this.operationQueue.push(Object.assign({},d)));for(let h=0;h<a.length;h++){let _=a[h];d={clusterId:_.cluster,clusterName:e._fwcClusterName,isNode:!!_.cluster,firewallId:a[h].id,firewallName:a[h].name,installState:Xt.FW_PENDING,opInstalled:!1,installCommunication:a[h].install_communication,installProtocol:a[h].install_protocol,installApikey:a[h].install_apikey},this.operationQueue.push(Object.assign({},d))}this.operationInProcessId=0,this.processOperation(!0)}),c=>{c.error&&c.error.fwcErr!==1002&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c)}),this.eventsSubscription.unsubscribe(),this.loadingData=!1})})}doTimeoutOp(){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.pauseProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_TIMEOUT"),Ne.MSG_WARNING)),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.eventsSubscription&&(this.eventsSubscription.unsubscribe(),this.eventsSubscription=null)}doPauseProcess(e){this.pauseProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),e&&this.addMessageToLog(this.translate.instant("COMPILE.WARN_PAUSE"),Ne.MSG_WARNING)}doContinueProcess(){this.pauseProcess=!1,this.operationQueue&&this.operationQueue[this.operationInProcessId].clusterId!==null&&this.operationQueue[this.operationInProcessId].clusterId!==void 0&&this.processOperation()}processOperation(e){let t;if(!this.pauseProcess&&this.operationQueue&&this.operationInProcessId<this.operationQueue.length){let r=this.operationQueue[this.operationInProcessId];if(!r)return;if(this.operationWithErrors=!1,r.clusterId!==null&&r.clusterId!==void 0?t=this.translate.instant("COMPILE.INST_CLUSTER_NODE",{clusterName:r.clusterName,firewallName:r.firewallName}):t=this.translate.instant("COMPILE.INST_FW",{firewallName:r.firewallName}),r.installState===Xt.FW_PENDING){r.installState=Xt.FW_PROCESSING,e||this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".START",{name:t}),Ne.MSG_INFO);let o={firewall_id:r.firewallId,interface_name:r.installInterfaceName,ip_name:void 0};this.disableButtons=!0,this.loadingData=!0,this.refreshTimeoutHandler(),this.manageConfig(o).catch(s=>{t=this.translate.instant("COMPILE.INST_FW_ERROR_TEXT",{name:r.firewallName,error:s})})}else this.operationInProcessId++,this.processOperation(e)}}manageConfig(e){return B(this,null,function*(){let t,r;if(this.operationQueue&&this.operationInProcessId<this.operationQueue.length&&(r=this.operationQueue[this.operationInProcessId]),!(!r||!this.configManageAPICall))if(r.clusterId!==null&&r.clusterId!==void 0?t=`cluster ${r.clusterId} - firewall ${r.firewallId} (${r.firewallName})`:t=`firewall ${r.firewallId} (${r.firewallName})`,this.disableButtons=!1,e){this.startTimeoutHandler(),this.log.startDataLoad(),this.disableButtons=!0,this.loadingData=!0;let o=yield this.fwcFirewallService.getFirewall(e.firewall_id,this.fwcUserService.getActualFwSelectedCloud()).toPromise(),s;try{o.data.ip===null||o.data.ip===void 0||o.data.install_interface===null||o.data.install_interface===void 0?this.confirmationService.confirm({key:"cdErrorFw",header:this.translate.instant("COMPILE.INST_SSH_ERROR"),message:this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:o.data.name}),reject:()=>{this.doPauseProcess()},accept:()=>{this.pauseProcess=!0,this.disableButtons=!1,this.loadingData=!1,s=!1;let a=this.translate.instant("COMPILE.INST_FW_ERROR_IP");this.addMessageToLog(this.translate.instant("COMPILE.INST_CONFIG_ERROR",{name:o.data.firewall_name,error:a}),Ne.MSG_ERROR)}}):s=!0}catch(a){if(a.message==="Missing ip/interface")return}s&&(this.communicationAPISubscription=this.utilService.fwcAPICallObservable(this.configManageAPICall,e.firewall_id,this.fwcUserService.getActualFwSelectedCloud(),this.channel_id).subscribe({next:()=>{this.disableButtons=!1,r.installState=Xt.FW_OK,this.log&&this.log.stopDataLoad(),this.operationWithErrors?this.addMessageToLog(this.translate.instant("VPN.CONFIG.ERRORS.OPERATION_ERRORS"),Ne.MSG_ERROR):(this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".COMPLETED"),Ne.MSG_OK),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null)),this.operationInProcessId++,this.operationQueue&&this.operationInProcessId<this.operationQueue.length&&this.processOperation(),this.loadingData=!1},error:a=>{if(this.disableButtons=!1,this.loadingData=!1,this.log.stopDataLoad(),a.status===403){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null);return}this.installConfigError=a.error.msg?a.error.msg:a.error.message,this.installConfigError=JSON.parse(this.installConfigError)?JSON.parse(this.installConfigError).message:this.installConfigError,a.error&&this.installConfigError==="EPROTO: Protocol error"&&a.status===400?this.addMessageToLog(this.translate.instant("DHCP.CONFIG.ERRORS.PROTOCOL_ERROR"),Ne.MSG_ERROR):a.error&&this.installConfigError==="Method not implemented."&&a.status===500?(this.addMessageToLog(this.translate.instant("DHCP.CONFIG.ERRORS.METHOD_NOT_IMPLEMENTED"),Ne.MSG_ERROR),this.doContinueProcess()):a.error&&this.installConfigError==="ETIMEDOUT: IP is not valid"&&a.status===400?(this.addMessageToLog(this.translate.instant("DHCP.CONFIG.ERRORS.IP_NOT_VALID"),Ne.MSG_ERROR),this.doContinueProcess()):a.error&&this.installConfigError==="ECONNREFUSED: Port is not valid"&&a.status===400?(this.addMessageToLog(this.translate.instant("DHCP.CONFIG.ERRORS.INVALID_PORT"),Ne.MSG_ERROR),this.doContinueProcess()):a.error&&this.installConfigError==="Request failed with status code 404"&&a.status===500&&(this.addMessageToLog(this.translate.instant("DHCP.CONFIG.ERRORS.INTERNAL_SERVER"),Ne.MSG_ERROR),this.doContinueProcess()),this.operationInProcessId<this.operationQueue.length-1?this.doPauseProcess():(this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.doContinueProcess())}}))}else r.installState=Xt.FW_WARNING,this.addMessageToLog(this.translate.instant("COMPILE.INST_WARNING",{name:t}),Ne.MSG_ERROR),this.operationInProcessId++,this.processOperation()})}onShowDialog(){this.recenterDialog(),this.showDialog()}onCancel(e){!e&&this.formModel&&!this.formModel.pristine&&this.formModel.valid?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("DHCP.CONFIG.EXIT_PANEL"),accept:()=>{this.onCancel(!0)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):(this.hideDialog(),this.log&&this.log.clearMessages(),this.operationQueue=[],this.operationInProcessId=void 0,this.pauseProcess=!1,this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.objectToManage&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:this.objectToManage.container}),this.resetProperties())}doStopProcess(){this.pauseProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("DHCP.CONFIG.STOP"),Ne.MSG_WARNING)),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.eventsSubscription&&(this.eventsSubscription.unsubscribe(),this.eventsSubscription=null)}getClusterMasterFirewall(e){return new Promise((t,r)=>{this.fwcFirewallService.getClusterMasterNode(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(o=>{let s;s=o.data,t(s)},o=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)}),r()})})}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(Ye),S(nt),S(ct),S(Dt),S(ft),S(Eu),S(Ou),S(Ru),S(at),S(Jt),S(Kt),S(dn),S(Ei),S(Cr))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-system-install-panel"]],viewQuery:function(t,r){if(t&1&&(le(tHe,5),le(pr,5)),t&2){let o;te(o=ie())&&(r.txtConfigFile=o.first),te(o=ie())&&(r.log=o.first)}},inputs:{restrictionsReadOnly:"restrictionsReadOnly"},features:[Se],decls:22,vars:13,consts:[["dlgOVConfigPanel",""],["styleClass","dlgFwcDialog fwcObjectDialog",3,"visibleChange","onShow","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[1,"grid","grid","grid-nogutter"],[1,"col-4"],[1,"divTableScroll"],[1,"tableFw","unstriped"],[1,"fwc-centered"],[3,"ngClass"],[1,"col-8"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwci-edit","fwcOrange"],[1,"fwcMenuIcon","fwci-cluster","fwcOrange"],[1,"fwcSepShort"],[1,"fwcMenuIcon","fwci-firewall","fwcBlue"],[1,"divLoadTemp",3,"ngStyle"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(){return y(o),w(r.onShowDialog())})("onHide",function(){return y(o),w(r.hideDialog())}),v(2,aHe,4,2,"ng-template",2),he(3),m(4,"div",3)(5,"div",4)(6,"div",5)(7,"table",6)(8,"thead")(9,"tr")(10,"th"),F(11),D(12,"translate"),g(),m(13,"th",7),F(14),D(15,"translate"),g()()(),m(16,"tbody"),xr(17,uHe,5,6,"tr",8,Ar),g()()()(),m(19,"div",9),P(20,"sts-fwc-log"),g()(),fe(),v(21,CHe,5,9,"ng-template",10),g()}t&2&&(st(Ae(12,iHe)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(11),$(N(12,8,"COMPILE.FORM.NAME")),p(3),J(" ",N(15,10,r.configManageTranslateKey+".OPERATION")," "),p(3),Tr(r.operationQueue))}})}}return i})();var YS=()=>({visibility:"hidden"});function yHe(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"PANELS.HAPROXY_RULE_PANEL.TITLE")," "))}function wHe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"div",11)(2,"span",12)(3,"sts-fwc-object-group",15),D(4,"translate"),k("onHAProxyIpChange",function(r){y(e);let o=u(2);return w(o.handleOnFrontendIpChange(r))}),g(),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()}if(i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.HAPROXY_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_HAPROXY_RULE_FRONTEND_IP),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.FRONTEND_IP")),p(2),f("ngStyle",Ae(9,YS))}}function vHe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",17),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.HAPROXY_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_HAPROXY_RULE_FRONTEND_PORT),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.FRONTEND_PORT")),p(2),f("ngStyle",Ae(9,YS))}}function bHe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"div",11)(2,"span",12)(3,"sts-fwc-object-group",18),D(4,"translate"),k("onHAProxyIpChange",function(r){y(e);let o=u(2);return w(o.handleOnBackendIpChange(r))}),g(),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()}if(i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.HAPROXY_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_HAPROXY_RULE_BACKEND_IPS),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.BACKEND_IPS")),p(2),f("ngStyle",Ae(9,YS))}}function SHe(i,n){if(i&1&&(m(0,"div",5)(1,"div",11)(2,"span",12),P(3,"sts-fwc-object-group",19),D(4,"translate"),m(5,"label",14),F(6),D(7,"translate"),g()()(),P(8,"p",16),g()),i&2){let e=u(2);p(3),Q("msgNotAllowed",N(4,5,"PANELS.HAPROXY_RULE_PANEL.ERRORS.INVALID_FROM")),f("readOnly",!1)("groupType",e.ObjectTypes.OBJ_HAPROXY_RULE_BACKEND_PORT),p(3),$(N(7,7,"ITEM_PANEL.FIELDS.BACKEND_PORT")),p(2),f("ngStyle",Ae(9,YS))}}function EHe(i,n){if(i&1){let e=L();m(0,"div",5)(1,"label",20),F(2),D(3,"translate"),g(),m(4,"div",21)(5,"textarea",22),k("drop",function(r){y(e);let o=u(2);return w(o.preventDrop(r))}),g()()()}i&2&&(p(2),$(N(3,1,"ITEM_PANEL.FIELDS.CFG_TEXT")))}function AHe(i,n){if(i&1){let e=L();P(0,"div",5),m(1,"div",10)(2,"div",11)(3,"span",12)(4,"p-dropdown",13),k("onChange",function(r){y(e);let o=u();return w(o.toggleFields(r.value))}),g(),m(5,"label",14),F(6),D(7,"translate"),g()()()(),v(8,wHe,9,10,"div",5)(9,vHe,9,10,"div",5)(10,bHe,9,10,"div",5)(11,SHe,9,10,"div",5)(12,EHe,6,3,"div",5)}if(i&2){let e=u();p(4),f("options",e.HAProxyRuleTypes)("autoDisplayFirst",!1),p(2),$(N(7,8,"HAPROXY.NEW_RULE_PANEL.TYPES")),p(2),W(e.HAProxyRuleSelected()?8:-1),p(),W(e.HAProxyRuleSelected()?9:-1),p(),W(e.HAProxyRuleSelected()?10:-1),p(),W(e.HAProxyRuleSelected()?11:-1),p(),W(e.HAProxyManualConfigRuleSelected()||e.isDefaultConfigRuleSelected()?12:-1)}}function xHe(i,n){if(i&1&&(m(0,"div",5),P(1,"sts-fwc-message",23),g()),i&2){let e=u();p(),f("message",e.opMessage)}}function THe(i,n){if(i&1){let e=L();m(0,"button",24),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleCancel())}),g(),m(2,"button",25),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.handleSave())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.CANCEL")),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData)}}var Uz=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T){super(r,t,e,o,s,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.store=s,this.fb=a,this.router=l,this.fwcErrorPipe=c,this.utilService=d,this.fwcPolicyService=h,this.fwcHAProxyPolicyService=_,this.fwcUserService=C,this.fwcFirewallService=I,this.confirmationService=b,this.translate=E,this.messageService=R,this.http=T,this.ObjectTypes=O,this.defaultConfigTextSet=!1,this.loadingData=!1,this.dataLoaded=!1,this.HAProxyRuleTypes=[{id:0,name:this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_RULE"),rule_type:1},{id:1,name:this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_MANUAL"),rule_type:2},{id:2,name:this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_DEFAULT"),rule_type:2}]}ngOnInit(){this.formModel=this.fb.group({HAProxyRuleTypes:new ve,HAProxyRule:new ve,HAProxyManualConfigRule:new ve,HAProxyDefaultConfigRule:new ve,frontendIp:new ve,frontendPort:new ve,backendIps:this.fb.array([]),backendPort:new ve,cfg_text:new ve}),this.formModel.get("HAProxyRuleTypes").valueChanges.subscribe(e=>{this.toggleFields(e),this.formModel.updateValueAndValidity()}),this.formModel.setValidators([this.validateHAProxyRuleFields.bind(this)])}toggleFields(e){let t=this.formModel.get("frontendIp"),r=this.formModel.get("frontendPort"),o=this.formModel.get("backendIps"),s=this.formModel.get("backendPort"),a=this.formModel.get("cfg_text");if(t.reset(),r.reset(),s.reset(),a.reset(),e&&e.rule_type===1)for(t.enable(),r.enable(),s.enable(),a.disable();o.length!==0;)o.removeAt(0);else e&&e.rule_type===2?(a.enable(),t.disable(),r.disable(),s.disable(),o.controls.forEach(l=>{l.disable()})):e&&e.rule_type===2&&e==="HAProxyDefaultConfigRule"&&a.enable()}validateHAProxyRuleFields(){let e=this.formModel.get("HAProxyRuleTypes").value,t=this.formModel.get("frontendIp"),r=this.formModel.get("frontendPort"),o=this.formModel.get("backendIps"),s=this.formModel.get("backendPort"),a=this.formModel.get("cfg_text");return e&&e.rule_type===1?!t.value||!r.value||o.length===0||!s.value?{requiredFieldsMissing:!0}:null:(e&&e.rule_type===2&&a.value,null)}addFrontendIp(e){this.formModel.get("frontendIp").setValue(e)}addBackendIp(e){let t=this.fb.control(e);t.setValue(e),this.formModel.get("backendIps").push(t)}handleOnBackendIpChange(e){this.addBackendIp(e.id)}handleOnFrontendIpChange(e){this.addFrontendIp(e.id)}HAProxyRuleSelected(){let e=this.formModel.get("HAProxyRuleTypes").value;return e&&e.name===this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_RULE")&&e.rule_type===1}HAProxyManualConfigRuleSelected(){let e=this.formModel.get("HAProxyRuleTypes").value;return e&&e.name===this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_MANUAL")&&e.rule_type===2}isDefaultConfigRuleSelected(){let e=this.formModel.get("HAProxyRuleTypes").value,t=e&&e.name===this.translate.instant("HAPROXY.NEW_RULE_PANEL.HAPROXY_DEFAULT");return t&&!this.defaultConfigTextSet?(this.setHAProxyConfigText(),this.defaultConfigTextSet=!0):t||(this.defaultConfigTextSet=!1),t}loadHAProxyConfigFile(){return B(this,null,function*(){try{return yield this.http.get("assets/config/system/HAProxy-DEFAULT.conf",{responseType:"text"}).toPromise()}catch(e){throw this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)}),e}})}setHAProxyConfigText(){return B(this,null,function*(){try{let e=yield this.loadHAProxyConfigFile();this.formModel.get("cfg_text").setValue(e)}catch(e){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(e)})}})}showNewRuleDialog(e,t,r,o){this.clusterId=e,this.firewallId=t,this.baseRuleId=r,this.newRuleOffset=o,e?this.fwcFirewallService.getCluster.bind(this.fwcFirewallService)(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{this.clusterId=s.data.id,this.displayDialog=!0}):this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService)(t,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{this.firewallId=s.data.id,this.displayDialog=!0}),this.dataLoaded=!0}handleSave(){if(this.formModel.valid){this.store.dispatch(Bi.requestBlockUI());let{comment:e}=this.formModel.value,t=this.newRuleOffset<1?"above":"below",r=this.HAProxyRuleTypes[0].rule_type,o=this.HAProxyRuleTypes[1].rule_type,s=this.HAProxyRuleTypes[2].rule_type,a={firewallId:this.firewallId,to:this.baseRuleId,offset:t,style:void 0,comment:e};if(this.HAProxyRuleSelected()){a.frontendIpId=this.formModel.controls.frontendIp.value,a.frontendPortId=this.formModel.controls.frontendPort.value.id,a.backendPortId=this.formModel.controls.backendPort.value.id,a.rule_type=r;let l=[];Array.isArray(this.formModel.get("backendIps").value)&&this.formModel.get("backendIps").value.forEach((c,d)=>{l.push({id:c,order:d+1})}),a.backendIpsIds=l}else this.HAProxyManualConfigRuleSelected()?(a.rule_type=o,a.cfg_text=this.formModel.controls.cfg_text.value):this.isDefaultConfigRuleSelected()&&(a.rule_type=s,a.cfg_text=this.formModel.controls.cfg_text.value);this.loadingData=!0,this.store.dispatch(Bi.requestBlockUI()),this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.newPolicyHAProxyRule.bind(this.fwcHAProxyPolicyService),this.firewallId,this.fwcUserService.getActualFwSelectedCloud(),a).then(()=>{this.hideDialog(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.INFO.SAVE_RULE")}),this.fwcPolicyService.reloadPolicy(),this.store.dispatch(eo.updateFwStatus({item:{cluster:this.clusterId,id:this.firewallId,status:3}}))}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(l)})}).finally(()=>{this.loadingData=!1,this.store.dispatch(Bi.requestUnblockUI())})}}handleCheckForm(e){e&&e.target&&this.formModel.valid&&(e.target.blur(),this.handleSave())}handleCancel(){this.hideDialog(),this.fwcPolicyService.reloadPolicy()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(nt),S(qr),S(ct),S(Ei),S(ft),S(Un),S(Ru),S(at),S(Dt),S(Jt),S(Ye),S(Kt),S(ti))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-haproxy-rule-panel"]],features:[Se],decls:8,vars:9,consts:[["styleClass","dlgFwcDialog--system fwcObjectDialog--dhcp",3,"visibleChange","onShow","onHide","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[3,"formGroup"],[3,"keyup.enter","keyup.esc","disabled"],[1,"grid"],[1,"col-12"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fa","fa-gear","fwcOrange"],[1,"col-12",2,"margin-bottom","10px"],[1,"p-inputgroup"],[1,"p-float-label"],["formControlName","HAProxyRuleTypes","styleClass","dropDownForm","appendTo","body","optionLabel","name","dataKey","id",3,"onChange","options","autoDisplayFirst"],[1,"fwcFloatLabel"],["formControlName","frontendIp",3,"onHAProxyIpChange","readOnly","groupType","msgNotAllowed"],[1,"fwc-error",3,"ngStyle"],["formControlName","frontendPort",3,"readOnly","groupType","msgNotAllowed"],["formArrayName","backendIps",3,"onHAProxyIpChange","readOnly","groupType","msgNotAllowed"],["formControlName","backendPort",3,"readOnly","groupType","msgNotAllowed"],["for","cfg_text"],[1,"fwcTextArea"],["pInputTextarea","","formControlName","cfg_text","name","cfg_text",2,"height","120px",3,"drop"],[3,"message"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"click","label"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","label","disabled"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),k("onShow",function(){return!0})("onHide",function(){return!0}),v(1,yHe,5,3,"ng-template",1),m(2,"form",2)(3,"fieldset",3),k("keyup.enter",function(s){return r.handleCheckForm(s)})("keyup.esc",function(){return r.handleCancel()}),m(4,"div",4),v(5,AHe,13,10)(6,xHe,2,1,"div",5),g()()(),v(7,THe,4,7,"ng-template",6),g()),t&2&&(Te("visible",r.displayDialog),f("modal",!1)("closable",!1)("draggable",!0)("resizable",!0),p(2),f("formGroup",r.formModel),p(),f("disabled",r.loadingData),p(2),W(r.dataLoaded?5:-1),p(),W(!r.loadingData&&r.opMessage?6:-1))}})}}return i})();var lk=class{constructor(){this.data={action:"move",clone:null,dropPos:-1,handle:null,source:null,sourceCtrl:null,sourceData:null,sourceIndex:-1,target:null,targetCtrl:null,type:""}}clearData(){this.data={action:"move",clone:null,dropPos:-1,handle:null,source:null,sourceCtrl:null,sourceData:null,sourceIndex:-1,target:null,targetCtrl:null,type:""}}getData(){return this.data}setData(n){n&&(n.action&&(this.data.action=n.action),isNaN(n.dropPos)||(this.data.dropPos=n.dropPos),isNaN(n.sourceIndex)||(this.data.sourceIndex=n.sourceIndex),this.data.clone=n.clone!==void 0?n.clone:null,this.data.source=n.source!==void 0?n.source:null,this.data.handle=n.handle!==void 0?n.handle:null,this.data.sourceCtrl=n.sourceCtrl!==void 0?n.sourceCtrl:null,this.data.sourceData=n.sourceData!==void 0?n.sourceData:null,this.data.target=n.target!==void 0?n.target:null,this.data.targetCtrl=n.targetCtrl!==void 0?n.targetCtrl:null,this.data.type=n.type!==void 0?n.type:"")}checkHit(n,e,t){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom}getDropPos(n,e,t,r){return r==="horizontal"?this.getDropPosHorizontal(n,e,t):this.getDropPosVertical(n,e,t)}getDropPosHalf(n,e,t){let r={left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height};switch(t){case"full":if(this.checkHit(n.x,n.y,r))return 0;break;case"horizontal":if(r.right=e.x+e.width/2,this.checkHit(n.x,n.y,r))return 1;if(r.left=r.right,r.right=e.x+e.width,this.checkHit(n.x,n.y,r))return 2;break;default:if(r.bottom=e.y+e.height/2,this.checkHit(n.x,n.y,r))return 1;if(r.top=r.bottom,r.bottom=e.y+e.height,this.checkHit(n.x,n.y,r))return 2}return-1}getDropPosHorizontal(n,e,t){if(t)return this.getDropPosHalf(n,e,"horizontal");{let r={left:e.x+e.width/4,top:e.y,right:e.x+3*e.width/4,bottom:e.y+e.height};if(this.checkHit(n.x,n.y,r))return 0;if(r.right=r.left,r.left=e.x,this.checkHit(n.x,n.y,r))return 1;if(r.left=e.x+3*e.width/4,r.right=e.x+e.width,this.checkHit(n.x,n.y,r))return 2}return-1}getDropPosVertical(n,e,t){if(t)return this.getDropPosHalf(n,e,"vertical");{let r={left:e.x,top:e.y+e.height/4,right:e.x+e.width,bottom:e.y+3*e.height/4};if(this.checkHit(n.x,n.y,r))return 0;if(r.bottom=r.top,r.top=e.y,this.checkHit(n.x,n.y,r))return 1;if(r.top=e.y+3*e.height/4,r.bottom=e.y+e.height,this.checkHit(n.x,n.y,r))return 2}return-1}},OHe=function(){var i;return{getInstance:function(){return i==null&&((i=new lk).constructor=null),i}}}(),jz=OHe;var ck=class{isString(n){return n?typeof n=="string"||n instanceof String:!1}_isFilterCondition(n){return n==="a"||n==="b"||n==="c"||n==="d"||n==="e"||n==="f"||n==="g"||n==="h"||n==="i"||n==="j"||n==="k"||n==="l"||n==="m"||n==="n"||n==="o"||n==="p"||n==="q"||n==="r"||n==="s"||n==="t"||n==="u"||n==="v"||n==="w"||n==="x"||n==="y"||n==="z"}beginsWith(n,e,t){return n!==void 0&&e!==void 0&&this.isString(n)&&this.isString(e)&&n.length>=e.length?t!==!1?n.substring(0,e.length)===e:n.toLowerCase().substring(0,e.length)===e.toLowerCase():!1}endsWith(n,e,t){return n!==void 0&&e!==void 0&&this.isString(n)&&this.isString(e)&&n.length>=e.length?t!==!1?n.substring(n.length-e.length,n.length)===e:n.toLowerCase().substring(n.length-e.length,n.length)===e.toLowerCase():!1}_getFilterCondition(n,e){let t="abcdefghijklmnopqrstuvwxyz".indexOf(e);return n&&t>=0&&t<n.length?n[t]:null}_createFilterNode(){return{result:!1}}_setFilterNode(n,e,t,r){let o=this._createFilterNode();o.condition=this._getFilterCondition(e,t),o.negative=r,n.left?n.right||(n.right=o):n.left=o}_getMatchResult(n,e,t,r,o){let s=!1;if(n!==void 0&&t!==void 0){switch(e){case">":s=n>t;break;case">=":s=n>=t;break;case"<":s=n<t;break;case"<=":s=n<=t;break;case"=":this.isString(n)&&this.isString(t)?s=o!==!1?n===t:n.toLowerCase()===t.toLowerCase():s=n===t;break;case"!=":case"<>":this.isString(n)&&this.isString(t)?s=o!==!1?n!==t:n.toLowerCase()!==t.toLowerCase():s=n!==t;break;case"->":s=this.beginsWith(n,t,o);break;case"<-":s=this.endsWith(n,t,o);break;case"><":case"[]":s=this.isString(n)&&this.isString(t)?o!==!1?n.indexOf(t)>-1:n.toLowerCase().indexOf(t.toLowerCase())>-1:!1;break;case"][":s=!(s=this.isString(n)&&this.isString(t)?o!==!1?n.indexOf(t)>-1:n.toLowerCase().indexOf(t.toLowerCase())>-1:!1);break;default:s=!1}r===!0&&(s=!s)}return s}_getFilterResult(n,e,t,r){if(e){if(Array.isArray(e.value)){let o=[];for(let a=0;a<e.value.length;a++)o.push(this._getMatchResult(n,e.operation,e.value[a],t,r));let s=!0;if(e.join==="&")for(let a=0;a<o.length;a++)s=s&&o[a];else{s=!1;for(let a=0;a<o.length;a++)s=s||o[a]}return s}return this._getMatchResult(n,e.operation,e.value,t,r)}return!0}_applyFilter(n,e,t){if(e){let r=e,o=r;return o.left&&(o.left.condition?o.left.result=this._getFilterResult(n,o.left.condition,o.left.negative,t):(o=o.left,this._applyFilter(n,o,t))),(o=r).right&&(o.right.condition?o.right.result=this._getFilterResult(n,o.right.condition,o.right.negative,t):(o=o.right,this._applyFilter(n,o,t))),r.operator==="&"?(r.result=!0,r.left&&(r.result=r.result&&r.left.result),r.right&&(r.result=r.result&&r.right.result)):(r.result=!1,r.left&&(r.result=r.result||r.left.result),r.right&&(r.result=r.result||r.right.result)),r.result}return!0}createTree(n,e){if(e){let t=this._createFilterNode(),r=t,o=null,s=!1;for(let a=0;a<e.length;a++)this._isFilterCondition(e[a])?this._setFilterNode(r,n,e[a],s):e[a]==="&"||e[a]==="|"?(s=!1,r.operator=e[a]):e[a]==="!"?s=!0:e[a]==="("?(s=!1,(o=this._createFilterNode()).parent=r,r=o):e[a]===")"&&(s=!1,r.parent&&(r.parent.left?r.parent.right||(r.parent.right=r):r.parent.left=r),r=r.parent);return t}return null}match(n,e,t,r,o){if(Array.isArray(e))return o||(o=this.createTree(e,r)),this._applyFilter(n,o,t);let s=e?e.negative:!1;return this._getFilterResult(n,e,s,t)}filter(n,e,t,r,o,s){let a=[];if(n&&Array.isArray(n))for(let l=0;l<n.length;l++){let c=e?n[l][e]:n[l];this.match(c,t,s,r,o)&&a.push(n[l])}return a}},Gz=ck;var dk=Be`
    .iui-dragwin
    {
        opacity: 0;
        background: -webkit-linear-gradient(white, #F1EFEC);
        background:    -moz-linear-gradient(white, #F1EFEC);
        background:     -ms-linear-gradient(white, #F1EFEC);
        background:      -o-linear-gradient(white, #F1EFEC);
        background :         linear-gradient(white, #F1EFEC);

        background-color: #F1EFEC;
        border: thin solid black;
        border-radius: 3px;
        font-size: var(--iui-dragwin-font-size, 1em);
        margin:0;
        padding: 2px;
        position: absolute;
        box-shadow: 0 0 3px #888888;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        max-width: 200px;
        z-index: 9999999;
    }
    .iui-dragwin-title
    {
        border-left: thin solid #c5c5c5;
        padding: 3px 3px 3px 5px;
        margin: 0 2px 0 0;
        vertical-align: middle;
    }
    .iui-dragwin-icon
    {
        display: inline-block;
        padding: 0;
        margin: 2px 0 3px 2px;
        width: 16px;
        height: 16px;
        vertical-align: middle;
    }
    .iui-dragwin-num
    {
        border-left: thin solid #c5c5c5;
        color: black;
        padding: 3px 3px 3px 5px;
        margin: 0;
        vertical-align: middle;
    }
    .iui-dragwin-move-left
    {
        background-image: url(../../icons/move-left.ico);
    }
    .iui-dragwin-move-up
    {
        background-image: url(../../icons/move-up.ico);
    }
    .iui-dragwin-move-in
    {
        background-image: url(../../icons/move-in.ico);
    }
    .iui-dragwin-move-right
    {
        background-image: url(../../icons/move-right.ico);
    }
    .iui-dragwin-move-down
    {
        background-image: url(../../icons/move-down.ico);
    }
    .iui-dragwin-move-end
    {
        background-image: url(../../icons/move-end.ico);
    }
    .iui-dragwin-move-left-copy
    {
        background-image: url(../../icons/move-left-copy.ico);
    }
    .iui-dragwin-move-up-copy
    {
        background-image: url(../../icons/move-up-copy.ico);
    }
    .iui-dragwin-move-in-copy
    {
        background-image: url(../../icons/move-in-copy.ico);
    }
    .iui-dragwin-move-right-copy
    {
        background-image: url(../../icons/move-right-copy.ico);
    }
    .iui-dragwin-move-down-copy
    {
        background-image: url(../../icons/move-down-copy.ico);
    }
    .iui-dragwin-move-end-copy
    {
        background-image: url(../../icons/move-end-copy.ico);
    }
    .hidden-drag-ghost {
        position: absolute;
        top: 0;
        left: 0;
        visibility: hidden;
    }
`;var Hz=Be`
`;var Wz=Be`
    .iui-dragwin {
        opacity: 0;
        background: -webkit-linear-gradient(#363636, #303030);
        background:    -moz-linear-gradient(#363636, #303030);
        background:     -ms-linear-gradient(#363636, #303030);
        background:      -o-linear-gradient(#363636, #303030);
        background :         linear-gradient(#363636, #303030);

        background-color: #303030;
        border: thin solid #151515;
        box-shadow: 0 0 3px #151515;
        color: #cccccc;
    }
    .iui-dragwin-title {
        border-left: thin solid #151515;
    }
    .iui-dragwin-num {
        color: #cccccc;
    }
`;var zz=Be`
`;var XS=class extends Ym{constructor(){super(),this._commonService=new Xm,this._currentDragNum=1,this._currentIconClass="",this._currentPosition={x:0,y:0},this._currentSize={width:0,height:0},this._currentTitle="",this._currentDisplay="block",this._currentControlStyleSettings=dk,this._currentResourcePath="../icons",this._currentCustomStyle={},this._currentTheme=Vn.None,this._currentThemeSettings=Be``}connectedCallback(){}disconnectedCallback(){}static get properties(){return{colorScheme:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"light":return ui.Light;case"dark":return ui.Dark;default:return ui.None}},toAttribute:n=>{switch(n){case ui.Light:return"Light";case ui.Dark:return"Dark";default:return"None"}}},reflect:!0},customStyle:{type:Object,attribute:"custom-style"},display:{type:String,reflect:!0},dragNum:{type:Number,attribute:"drag-num",reflect:!0},iconClass:{type:String,attribute:"icon-class",reflect:!0},position:{type:Object},resourcePath:{type:String,attribute:"resource-path",reflect:!0},size:{type:Object},title:{type:String,reflect:!0},theme:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"office":return Vn.Office;case"dark":return Vn.Dark;default:return Vn.None}},toAttribute:n=>{switch(n){case Vn.Office:return"Office";case Vn.Dark:return"Dark";default:return"None"}}},reflect:!0}}}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}get colorScheme(){return this._currentColorScheme}set colorScheme(n){if(this._currentColorScheme!==n){let e=this._currentColorScheme;this._currentColorScheme=n,this._updateColorSchemeSettings(n),this.requestUpdate("colorScheme",e),this.refresh()}}get customStyle(){return this._currentCustomStyle}set customStyle(n){if(this._currentCustomStyle!==n){let e=this._currentCustomStyle;this._currentCustomStyle=n,this.requestUpdate("customStyle",e),this.refresh()}}get display(){return this._currentDisplay}set display(n){if(this._currentDisplay!==n){let e=this._currentDisplay;this._currentDisplay=n,this.requestUpdate("display",e)}}get dragNum(){return this._currentDragNum}set dragNum(n){if(this._currentDragNum!==n){let e=this._currentDragNum;this._currentDragNum=n,this.requestUpdate("dragNum",e)}}get iconClass(){return this._currentIconClass}set iconClass(n){if(this._currentIconClass!==n){let e=this._currentIconClass;this._currentIconClass=n,this.requestUpdate("iconClass",e)}}get position(){return this._currentPosition}set position(n){let e=this._currentPosition;this._currentPosition=n,this.requestUpdate("position",e)}get resourcePath(){return this._currentResourcePath}set resourcePath(n){if(this._currentResourcePath!==n){let e=this._currentResourcePath;this._currentResourcePath=n,this._updateControlStyleSettings(n),this.requestUpdate("resourcePath",e)}}get size(){return this._currentSize}set size(n){let e=this._currentSize;this._currentSize=n,this.requestUpdate("size",e)}get title(){return this._currentTitle}set title(n){if(this._currentTitle!==n){let e=this._currentTitle;this._currentTitle=n,this.requestUpdate("title",e)}}get theme(){return this._currentTheme}set theme(n){if(this._currentTheme!==n){let e=this._currentTheme;this._currentTheme=n,this._updateThemeSettings(n),this.requestUpdate("theme",e),this.refresh()}}updatePos(n){n&&(this.dragNum=n.num?n.num:1,this.iconClass=n.class?n.class:"",this.position={x:n.left,y:n.top},this.title=n.text?n.text:"",this.refresh())}_getTitleStyle(){let n={};return this._currentIconClass===""&&(n.border=0),n}_updateColorSchemeSettings(n){switch(this._currentColorSchemeSettings=Be``,n){case ui.Dark:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(Wz.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(zz.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentColorSchemeSettings.cssText=""}}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(Hz.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText=""}}firstUpdated(n){}refresh(){this.update()}render(){return Ke`             <style>                 ${this._currentControlStyleSettings}                 ${this._currentThemeSettings}                 ${this._currentColorSchemeSettings}                 ${this._currentCustomStyle}             </style>             <div data-drag-window class="iui-dragwin" style=${sn({display:this._currentDisplay,top:this._currentPosition.y+"px",left:this._currentPosition.x+"px"})}>                 ${this._currentIconClass!==""?Ke`<span class=${Ln(this._currentIconClass)}></span>`:Ke``}                 <span class="iui-dragwin-title" style=${sn(this._getTitleStyle())}>${this._currentTitle}</span>                 ${this._currentDragNum>1?Ke`<span class="iui-dragwin-num">+${this._currentDragNum-1}</span>`:Ke``}             </div>         `}_updateControlStyleSettings(n){this._currentControlStyleSettings=Be``,this._currentControlStyleSettings.cssText=this._commonService.replaceAll(dk.cssText,"../../icons",n)}};window.customElements.define("iui-dragwin",XS);var Kz=XS;var pk=class extends pu{_init(){super._init(),this._lastUpdate=0,this._updateDelay=100,this._dataService=new Zm,this._dragDropService=jz.getInstance(),this._filterService=new Gz,this._currentAnimationSpeedValue=400,this._initSuccess=!0,this._isAnimationInProcess=!1,this._isInitActive=!1,this._stackAdd=[],this._stackRemove=[],this._currentDefaultGroupName="other",this._currentGroupBy=null,this._currentGroupList=[],this._currentList=[],this._dataGroups=[],this._dataItems=[],this._fullList=[],this._fullChildList=[],this._fullRemovalList=[],this._scrollItemList=[],this._currentDragDropMode=Wr.Dynamic,this._dropMarkElem=null,this._dragCmp=null,this._expandItem=null,this._isAutoExpanded=!1,this._dragContentElem=null,this._dragItemList=[],this._dragItemObj=null,this._dragElemPos={top:-9999999,left:0},this._dragElemSize={width:0,height:0},this._dragListPos={top:-9999999,left:0},this._dragListSize={width:0,height:0},this._dragListStartPos={top:-9999999,left:0},this._dragWindow=null,this._dragListIndex=-1,this._dragTargetIndex=-1,this._dragOverStarted=!1,this._currentDragPos={x:0,y:0},this._prevDragPos={x:0,y:0},this._dragMoveSpace=10,this._dropPos=-1,this._cloneElem=null,this._cloneElemStartPos={x:0,y:0},this._expandTimeout=null,this._isCtrlDragEntered=!1,this._isDragActive=!1,this._isDragCopy=!1,this._isDragInside=!1,this._isDragActiveTimeout=null,this._currentDragItems=0,this._maxDragItems=3,this._totalDragItems=0,this._filterParams=null,this._ctrlCursor="default",this._currentContentVisibility=Fo.Both,this._hoverItem=null,this._options={allowDrag:!1,allowDrop:!1,currentStyle:null,dataFields:null,selectedItem:null},this._isGroupingEnabled=!1,this._blockHoverRect={height:0,left:0,top:-9999999,width:0},this._blockSelectRect=[],this._blockSelectHeight=0,this._hoverItemObj={data:{}},this._currentFocusObj=null,this._isKeyboardActive=!1,this._avgItemHeight=0,this._blockSize={width:0,height:0},this._contentSize={width:0,height:0},this._ctrlPadding={top:0,right:0,bottom:0,left:0},this._currentIndex=0,this._currentItemSize={width:0,height:0},this._currentItemSpacing=0,this._prevIndex=0,this._isAutoSized=!1,this._isHoverTemplatePresent=!1,this._isSelectedTemplatePresent=!1,this._isUpdateActive=!1,this._prevLongestItemWidth=0,this._longestItemWidth=0,this._longestItemWidthValue="auto",this._requestUpdateLayout=!1,this._virtualization=!0,this._visibleRange=100,this._updateTimer=null,this._isLoading=!1,this._isLoadingEnd=!1,this._loadingEndTimeout=null,this._loadIconPos={top:0,left:0},this._currentMouseWheelSpeed=us.Normal,this._currentScrollAppearance=Mn.Static,this._currentScrollPos={x:0,y:0},this._maxScrollPos={x:0,y:0},this._accelerator=.5,this._isMouseWheelActive=!1,this._isScrollActive=!1,this._isScrollTimerActive=!1,this._isScrollVisible=!0,this._prevScrollPos={x:0,y:0},this._scrollAppearanceTimeout=null,this._scrollBarSize={width:0,height:0},this._scrollCount=0,this._scrollLargeChange={x:0,y:0},this._scrollSize={width:0,height:0},this._scrollSizeAddition=0,this._scrollTimerID=null,this._horScrollOrientation=Vr.Horizontal,this._currentSelection=null,this._currentSelectionMode=br.One,this._isItemClicked=!1,this._shiftFirstSelectedItem=null,this._removeIndex=-1,this._currentSelectedItems=[],this._currentCtrlSize={width:0,height:0},this._currentSorting=ml.None,this._sortComparer=null,this._dragListClass={},this._groupClassName="iui-baselistgroup",this._groupContentClassName=this._groupClassName+"-content",this._expandBoxClassName=this._groupClassName+"-expand-box",this._itemClassName="iui-baselistitem",this._itemContentClassName=this.itemClassName+"-content",this._scrollCornerClassName="iui-scrollbar-corner",this._animationCheckTimer=null,this._touchStartPos={x:0,y:0},this._touchEndPos={x:0,y:0}}connectedCallback(){super.connectedCallback(),this._windowDragOver=this._windowDragOver.bind(this),window.addEventListener("dragover",this._windowDragOver),this._windowKeyDown=this._windowKeyDown.bind(this),window.addEventListener("keydown",this._windowKeyDown),this._windowKeyUp=this._windowKeyUp.bind(this),window.addEventListener("keyup",this._windowKeyUp)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("dragover",this._windowDragOver),window.removeEventListener("keydown",this._windowKeyDown),window.removeEventListener("keyup",this._windowKeyUp),this._clearDragTimeout(),this._clearExpandTimeout(),this._resetAnimationCheckTimer(),this._resetLayoutTimer(),this._resetScrollAppearanceTimeout()}_initStyle(){this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"},group:{expandBox:{general:this._expandBoxClassName,expanded:this._expandBoxClassName+"-open",collapsed:this._expandBoxClassName+"-close"},general:{disabled:this._groupClassName+"-disabled",focused:this._groupClassName+"-focused",normal:this._groupClassName,hovered:this._groupClassName+"-hovered",selected:this._groupClassName+"-selected"},content:{disabled:this._groupContentClassName+"-disabled",focused:this._groupContentClassName+"-focused",normal:this._groupContentClassName,hovered:this._groupContentClassName+"-hovered",selected:this._groupContentClassName+"-selected"}},item:{general:{disabled:this._itemClassName+"-disabled",focused:this._itemClassName+"-focused",normal:this._itemClassName,hovered:this._itemClassName+"-hovered",selected:this._itemClassName+"-selected"},content:{disabled:this._itemContentClassName+"-disabled",focused:this._itemContentClassName+"-focused",normal:this._itemContentClassName,hovered:this._itemContentClassName+"-hovered",selected:this._itemContentClassName+"-selected"}}},this._updateStyle(this.controlStyle),this._updateControlClass(),this._updateColorSchemeSettings(this._currentColorScheme),this.refresh()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{allowDrag:{type:Boolean,attribute:"allow-drag",reflect:!0},allowDrop:{type:Boolean,attribute:"allow-drop",reflect:!0},allowFilter:{type:Boolean,attribute:"allow-filter",reflect:!0},animateInit:{type:Boolean,attribute:"animate-init",reflect:!0},contentVisibility:{attribute:"content-visibility",converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"none":return Fo.None;case"hover":return Fo.Hover;case"select":return Fo.Select;default:return Fo.Both}},toAttribute:n=>{switch(n){case Fo.None:return"None";case Fo.Hover:return"Hover";case Fo.Select:return"Select";default:return"Both"}}},reflect:!0},dataFields:{type:Object,attribute:"data-fields"},dragDropMode:{attribute:"dragdrop-mode",converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"popup":return Wr.Static;default:return br.Dynamic}},toAttribute:n=>{switch(n){case Wr.Static:return"Static";default:return"Dynamic"}}},reflect:!0},focusedItem:{type:Object,attribute:"focused-item"},items:{type:Array},itemSpacing:{type:Number,attribute:"item-spacing",reflect:!0},mouseWheelSpeed:{attribute:"mousewheel-speed",converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"veryslow":return us.VerySlow;case"slow":return us.Slow;case"fast":return us.Fast;case"veryfast":return us.VeryFast;default:return us.Normal}},toAttribute:n=>{switch(n){case us.VerySlow:return"VerySlow";case us.Slow:return"Slow";case us.Fast:return"Fast";case us.VeryFast:return"VeryFast";default:return"Normal"}}},reflect:!0},scrollAppearance:{attribute:"scroll-appearance",converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="dynamic"?Mn.Dynamic:Mn.Static,toAttribute:(n,e)=>n===Mn.Dynamic?"Dynamic":"Static"},reflect:!0},selectedItem:{type:Object,attribute:"selected-item"},selectionMode:{attribute:"selection-mode",converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"none":return br.None;case"multisimple":return br.MultiSimple;case"multiextended":return br.MultiExtended;default:return br.One}},toAttribute:n=>{switch(n){case br.None:return"None";case br.MultiSimple:return"MultiSimple";case br.MultiExtended:return"MultiExtended";default:return"One"}}},reflect:!0},showScroll:{type:Boolean,attribute:"show-scroll",reflect:!0},sorting:{converter:{fromAttribute:n=>{switch((n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()){case"ascending":return ml.Ascending;case"descending":return ml.Descending;default:return ml.None}},toAttribute:n=>{switch(n){case ml.Ascending:return"Ascending";case ml.Descending:return"Descending";default:return"None"}}},reflect:!0},virtualMode:{type:Boolean,attribute:"virtual-mode",reflect:!0}}}set allowDrag(n){if(this._options.allowDrag!==n){let e=this._options.allowDrag;this._options.allowDrag=n,this.requestUpdate("allowDrag",e)}}set allowDrop(n){if(this._options.allowDrop!==n){let e=this._options.allowDrop;this._options.allowDrop=n,this.requestUpdate("allowDrop",e)}}set allowFilter(n){if(this._options.allowFilter!==n){let e=this._options.allowFilter;this._options.allowFilter=n,this.requestUpdate("allowFilter",e)}}get allowFocus(){return this._options.allowFocus}set allowFocus(n){if(this._options.allowFocus!==n){let e=this._options.allowFocus;this._options.allowFocus=n,n||(this._currentFocusObj=null),this.refresh(),this.requestUpdate("allowFocus",e)}}get animateInit(){return this._isInitActive}set animateInit(n){if(this._isInitActive!==n){let e=this._isInitActive;this._isInitActive=n,this.requestUpdate("animateInit",e)}}get dataFields(){return this._options.dataFields}set dataFields(n){let e=this._options.dataFields;this._updateDataFields(n),this.requestUpdate("dataFields",e)}get focusedItem(){return this._currentFocusObj?this._currentFocusObj.data:null}set focusedItem(n){let e=this.allowFocus&&!this._currentFocusObj,t=this.allowFocus&&this._currentFocusObj&&this._currentFocusObj.data!==n;if(e||t){let r=this._currentFocusObj?this._currentFocusObj.data:null;this._currentFocusObj=this._getObjFromItem(n),this._updateFocusItem(),this.selectedItem!==n&&this._processSelection(null,n),this.requestUpdate("focusedItem",r),this.refresh()}}get contentVisibility(){return this._currentContentVisibility}set contentVisibility(n){if(this._currentContentVisibility!==n){let e=this._currentContentVisibility;this._currentContentVisibility=n,this.requestUpdate("contentVisibility",e)}}get dragDropMode(){return this._currentDragDropMode}set dragDropMode(n){if(this._currentDragDropMode!==n){let e=this._currentDragDropMode;this._currentDragDropMode=n,this.requestUpdate("dragDropMode",e)}}get items(){return this._dataItems}set items(n){let e=this._dataItems;e.length===0&&(this._initSuccess=!1),this._dataItems=n,this._updateData(),this.requestUpdate("items",e)}get itemSpacing(){return this._currentItemSpacing}set itemSpacing(n){let e=this._currentItemSpacing;this._currentItemSpacing=n,this.requestUpdate("itemSpacing",e)}get mouseWheelSpeed(){return this._currentMouseWheelSpeed}set mouseWheelSpeed(n){if(this._currentMouseWheelSpeed!==n){let e=this._currentMouseWheelSpeed;this._currentMouseWheelSpeed=n,this.requestUpdate("mouseWheelSpeed",e)}}get scrollAppearance(){return this._currentScrollAppearance}set scrollAppearance(n){if(this._currentScrollAppearance!==n){let e=this._currentScrollAppearance;this._currentScrollAppearance=n,this._isScrollVisible=this._currentScrollAppearance!==Mn.Dynamic,this.requestUpdate("scrollAppearance",e),this._internalUpdateLayout()}}get showScroll(){return this._options.showScroll}set showScroll(n){let e=this._options.showScroll;this._updateShowScroll(n),this.requestUpdate("showScroll",e)}get selectedItem(){return this._currentSelection}set selectedItem(n){if(this._currentSelection!==n){let e=this._currentSelection,t=this,r=setTimeout(function(){t._processSelection(null,n),t.requestUpdate("selectedItem",e),clearTimeout(r)},1)}}get selectionMode(){return this._currentSelectionMode}set selectionMode(n){if(this._currentSelectionMode!==n){let e=this,t=e._currentSelectionMode;e._currentSelectionMode=n,e._clearPrevSelection(e._currentSelectionMode!==br.None?e._currentSelection:null);let r=setTimeout(function(){e.refresh(),e._currentSelectionMode===br.None&&(e._currentSelection=null),e._invokeEvent("selectionChanged",{item:e._currentSelection}),e.requestUpdate("selectionMode",t),clearTimeout(r)},1)}}get sorting(){return this._currentSorting}set sorting(n){if(this._currentSorting!==n){let e=this._currentSorting;this._currentSorting=n,this.requestUpdate("sorting",e)}}get virtualMode(){return this._virtualization}set virtualMode(n){if(this._virtualization!==n){let e=this._virtualization;this._virtualization=!0,this.requestUpdate("virtualMode",e),this._internalUpdateLayout()}}addItem(n,e){return B(this,null,function*(){return this._callEventAdd("add",n,-1,e)})}_addItemToList(n,e,t,r,o,s){let a=this,l=!0,c=-1,d=a._dragDropService.getData();if(a._isAnimationAllowed&&!d.source){let h=a._currentList.length,_=[],C=null,I=null;switch(c=a._scrollItemList.length,n){case"at":h=t,r?_=a._currentList.filter(b=>b.data.type!=="group"&&b.data[a._options.dataFields.pid]===r[a._options.dataFields.id]):_=a._currentList.filter(b=>b.data.type!=="group"&&!b.data[a._options.dataFields.pid]),a._commonService.isIndexInRange(h,_)?(C=a._getObjFromScrollItem(_[h].data),c=a._getItemScrollIndex(C)):_.length>0?(C=a._getObjFromScrollItem(_[_.length-1].data))?c=a._getItemScrollIndex(C)+1:c=-1:r&&(c=0);break;case"ref":if(o){let b=a._getObjFromScrollItem(o);b?(c=a._scrollItemList.indexOf(b),s&&(I=a._getLastChildItemFromExpanded(o))&&(c=(C=a._getObjFromScrollItem(I))?a._getItemScrollIndex(C)+1:-1)):l=!1}break;default:r&&(I=a._getLastChildItemFromExpanded(r))&&(c=(C=a._getObjFromScrollItem(I))?a._getItemScrollIndex(C)+1:-1)}c<0&&(l=!1)}switch(n){case"at":for(let _=e.length-1;_>=0;_--)a._dataService.insert(e[_],t,r);break;case"ref":let h=s?e.toReversed():e;for(let _=0;_<h.length;_++)a._dataService.insertByRef(h[_],o,s);break;default:for(let _=0;_<e.length;_++)a._dataService.insert(e[_],-1,r)}return{animateAllowed:l,scrollIndex:c,addAllowed:!0}}clearItems(n){return B(this,null,function*(){let e=this;return n||(e._currentSelectedItems.length=0,e._currentSelection=null),e._callEventClear(n)})}insertItemAt(n,e,t){return B(this,null,function*(){return this._callEventAdd("at",n,e,t)})}insertItemBefore(n,e){return B(this,null,function*(){return this._callEventAdd("ref",n,-1,null,e)})}insertItemAfter(n,e){return B(this,null,function*(){return this._callEventAdd("ref",n,-1,null,e,!0)})}removeItem(n){return B(this,null,function*(){return this._callEventRemove(n)})}removeItemAt(n,e){return B(this,null,function*(){return this._callEventRemove(null,n,e)})}_callEventAdd(n,e,t,r,o,s){return B(this,null,function*(){let a=this,l=a._dragDropService.getData();return!a._isAnimationAllowed||l.source?a._processAddItemGeneral(n,e,t,r,o,s):(a._stackAdd.push({type:n,item:e,index:t,parent:r,refItem:o,flag:s}),a._stackAdd.length===1?a._processAddRange(n,e,t,r,o,s):Promise.resolve())})}_callEventClear(n){return B(this,null,function*(){let e=this;return new Promise(t=>{e._isAnimationAllowed&&e._scrollItemList.length>0?(e._isAnimationInProcess=!0,setTimeout(function(){return B(this,null,function*(){yield e._applyScaleAnimation(e._scrollItemList),e._dataService.clear(n),yield e._processUpdateCurrentLayout(),e._invokeEvent("clear",{parent:n}),e._isAnimationInProcess=!1,t()})},1)):e._isUpdateAllowed?setTimeout(function(){return B(this,null,function*(){e._dataService.clear(n),yield e._processUpdateCurrentLayout(),e._invokeEvent("clear",{parent:n}),t()})},1):(e._dataService.clear(n),e._invokeEvent("clear",{parent:n}),t())})})}_callEventRemove(n,e,t){return B(this,null,function*(){let r=this,o=r._dragDropService.getData();return!r._isAnimationAllowed||o.source?r._processRemoveItemGeneral(n,e,t):(r._stackRemove.push({item:n,index:e,parent:t}),r._stackRemove.length===1?r._processRemoveRange(n,e,t):Promise.resolve())})}_processAddItemGeneral(n,e,t,r,o,s){let a=this;return new Promise(l=>{if(a._invokeEvent("itemAdding",{cancel:!1,item:e,index:t,parent:r}).cancel!==!0){let c=Array.isArray(e)?e:[e];a._addItemToList(n,c,t,r,o,s),a._processItemAdd(e,r);let d=a._dragDropService.getData();d.source?(a._invokeEvent("itemAdded",{index:t,item:e}),l()):a._isUpdateAllowed?setTimeout(function(){return B(this,null,function*(){d.source||(a._scrollItemList.length===0&&(a.update(),a._updateClientRect(),a._currentItemSize.width=a._clientRect.width),yield a._processUpdateCurrentLayout()),a._invokeEvent("itemAdded",{index:t,item:e}),l()})},1):(a._invokeEvent("itemAdded",{index:t,item:e}),l())}else l()})}_processItemAdd(n,e){}_processItemRemoval(n,e){}_processRemoveItemGeneral(n,e,t){return B(this,null,function*(){let r=this;return new Promise(o=>{if(r._invokeEvent("itemRemoving",{cancel:!1,item:n,index:e,parent:t}).cancel!==!0){!n&&r._commonService.isIndexInRange(e,r._fullList)&&(n=r._fullList[e]);let s=Array.isArray(n)?n:[n];for(let a=0;a<s.length;a++)r._dataService.removeAt(s[a],e,t);r._processItemRemoval(n,t),n&&n[r._options.dataFields.selected]&&(n[r._options.dataFields.selected]=!1,r._currentSelectedItems=r._currentSelectedItems.filter(a=>a!==n),r._currentSelection&&r._commonService.isEqual(r._currentSelection[r._options.dataFields.id],n[r._options.dataFields.id])&&(r._currentSelection=null),r._invokeEvent("selectionChanged",{item:r._currentSelection})),r._dragDropService.getData().source?(r._invokeEvent("itemRemoved",{index:e,item:n}),o()):r._isUpdateAllowed?setTimeout(function(){return B(this,null,function*(){yield r._processUpdateCurrentLayout(),r._invokeEvent("itemRemoved",{index:e,item:n}),o()})},1):(r._invokeEvent("itemRemoved",{index:e,item:n}),o())}else o()})})}_getLastChildItemFromExpanded(n){let e=this;if(e.isItemExpanded(n)){let t=e._currentList.filter(r=>r.data.type!=="group"&&r.data[e._options.dataFields.pid]===n[e._options.dataFields.id]);if(t.length>0)return e._getLastChildItemFromExpanded(t[t.length-1].data)}return n}_animateCurrentItemPos(n,e){n.forEach((t,r)=>{t.element.position={x:t.element.position.x,y:t.values.top}}),this.update(),e&&this._clearInactiveAnimations()}_animateNewItemPos(n,e){n.forEach((t,r)=>{t.element.position={x:t.element.position.x,y:t.values.top}}),this.update(),e&&this._clearInactiveAnimations()}_animatePosition(n,e){n.forEach((t,r)=>{t.element.position={x:t.element.position.x,y:t.values.top}}),e&&this._clearInactiveAnimations(),this.update()}_cancelAddProcess(n,e,t,r,o,s){}_processAddRange(n,e,t,r,o,s){return B(this,null,function*(){let a=this;return new Promise(l=>{if(a._invokeEvent("itemAdding",{cancel:!1,item:e,index:t,parent:r}).cancel!==!0){let c=Array.isArray(e)?e:[e],d=a._addItemToList(n,c,t,r,o,s);if(d.addAllowed&&d.animateAllowed){a._isAnimationInProcess=!0;let h=d.scrollIndex;a._processItemAdd(c,r),setTimeout(function(){return B(this,null,function*(){a._scrollItemList.length===0&&(a.update(),a._updateClientRect(),a._currentItemSize.width=a._clientRect.width,a._updateBlockSize());let _={x:a._ctrlPadding.left,y:a._ctrlPadding.top},C=a._currentItemSize.height>0?a._currentItemSize.height:30,I=[],b=null;h>=0&&h<a._scrollItemList.length?(_={x:(b=a._scrollItemList[h]).position.x,y:b.position.y},yield a._updateCurrentScrollItemPos(h,c.length*a._currentItemSize.height),_.y-=a._currentItemSize.height):a._scrollItemList.length>0&&(_={x:(b=a._scrollItemList[a._scrollItemList.length-1]).position.x,y:b.position.y});let E=b?b.indent:0;if(r){let T=a._getObjFromItem(r);E=T?T.indent+a._options.indent:E}for(let T=0;T<c.length;T++){a._scrollItemList.length===0&&(_.y-=C);let A={clickPos:{x:0,y:0},data:c[T],indent:E,index:h,inlineStyle:{},position:{x:_.x,y:_.y},showCheckBox:a._isItemCheckBoxAllowed(c[T]),showRadioButton:a._isItemRadioButtonAllowed(c[T]),size:{width:0,height:a._currentItemSize.height},targetPosition:{x:_.x,y:_.y},style:{},tabIndex:0,zIndex:0};a._updateItemStyle(A),a._scrollItemList.splice(h,0,A),a.refresh();let U=Math.max(50,300-50*a._stackAdd.length);a._applyScaleAnimation([A],U,.8,1),yield a._updateNewScrollItemPos(A,U),I.push(A),h++,_.y+=C}a._invokeEvent("itemAdded",{index:t,item:e});let R=Math.max(50,300-50*a._stackAdd.length);setTimeout(function(){if(a._currentList.length===0&&(a._updateCurrentItemSize(),a._updateVisibleRange()),a._updateCurrentList(),a._stackAdd.splice(0,1),a._stackAdd.length>0){let T=a._stackAdd[0];a._processAddRange(T.type,T.item,T.index,T.parent,T.refItem,T.flag)}else a._internalUpdateCurrentLayout(),a._isAnimationInProcess=!1,l()},R)})},1)}else if(a._stackAdd.splice(0,1),a._stackAdd.length>0){let h=a._stackAdd[0];a._processAddRange(h.type,h.item,h.index,h.parent,h.refItem,h.flag)}else a._internalUpdateCurrentLayout(),a._isAnimationInProcess=!1,l()}else if(a._stackAdd.splice(0,1),a._stackAdd.length>0){let c=a._stackAdd[0];a._processAddRange(c.type,c.item,c.index,c.parent,c.refItem,c.flag)}else a._internalUpdateCurrentLayout(),a._isAnimationInProcess=!1,l()})})}_updateFullRemovalList(n){let e=this;n.forEach(t=>{e._fullRemovalList.push(t),t[e._options.dataFields.items]&&e.isItemExpanded(t)&&e._updateFullRemovalList(t[e._options.dataFields.items])})}_animateRemove(n,e){n.forEach((t,r)=>{t.element.animateLeft=t.values.animateLeft}),e&&this._clearInactiveAnimations(),this.update()}_animateScale(n,e){n.forEach((t,r)=>{t.element.scale=t.values.scale}),e&&this._clearInactiveAnimations(),this.update()}_applyRemoveAnimation(n,e){return B(this,null,function*(){let t=this._animateRemove.bind(this),r=new Xo;this._activeAnimations.push(r);let o=[];for(let s=0;s<n.length;s++){let a=n[s],l={animateLeft:0},c={animateLeft:100};o.push({element:a,current:l,values:c})}return yield r.animate(o,100,e!==void 0?e:200,t),Promise.resolve()})}_applyScaleAnimation(n,e,t,r){return B(this,null,function*(){let o=this._animateScale.bind(this),s=new Xo;this._activeAnimations.push(s);let a=[];for(let l=0;l<n.length;l++){let c=n[l],d={scale:t!==void 0?t:1},h={scale:r!==void 0?r:0};a.push({element:c,current:d,values:h})}return yield s.animate(a,0,e!==void 0?e:200,o),Promise.resolve()})}_processRemoveRange(n,e,t){return B(this,null,function*(){let r=this;return new Promise(o=>{if(r._invokeEvent("itemRemoving",{cancel:!1,item:n,index:e,parent:t}).cancel!==!0){if(!n){let a=[];t?a=r._currentList.filter(l=>l.data.type!=="group"&&l.data[r._options.dataFields.pid]===t[r._options.dataFields.id]):a=r._currentList.filter(l=>l.data.type!=="group"&&!l.data[r._options.dataFields.pid]),r._commonService.isIndexInRange(e,a)&&(n=a[e].data)}let s=[];if(n&&(s=Array.isArray(n)?n:[n]),s.length>0)r._isAnimationInProcess=!0,setTimeout(function(){return B(this,null,function*(){r._fullRemovalList.length=0,r._updateFullRemovalList(s);let a=[],l=[...r._scrollItemList],c=0;for(let C=0;C<r._fullRemovalList.length;C++){let I=r._getObjFromScrollItem(r._fullRemovalList[C]);I&&(c++,a.push(I),l=l.filter(b=>b.data!==I.data))}let d=Math.max(50,200-50*r._stackRemove.length);yield r._applyScaleAnimation(a,d,1,.8),yield r._applyRemoveAnimation(a,d),c>0&&r.refresh();let h=!1;for(let C=0;C<s.length;C++){let I=s[C];r._dataService.removeAt(I,e,t),I&&I[r._options.dataFields.selected]&&(I[r._options.dataFields.selected]=!1,r._currentSelectedItems=r._currentSelectedItems.filter(b=>b!==I),r._currentSelection&&r._commonService.isEqual(r._currentSelection[r._options.dataFields.id],I[r._options.dataFields.id])&&(r._currentSelection=null),h=!0)}for(let C=0;C<r._fullRemovalList.length;C++){let I=r._fullRemovalList[C],b=e!==void 0?e:r._fullList.indexOf(I);b>=0&&r._fullList.splice(b,1),(b=r._getItemCurrentIndex(I))>=0&&r._currentList.splice(b,1)}r._processItemRemoval(n,t);let _=Math.max(50,300-50*r._stackRemove.length);if(c>0&&l.length>0){let C={x:r._ctrlPadding.left,y:r._ctrlPadding.top};l.forEach(I=>{I.targetPosition.y=C.y,C.y+=r._currentItemSize.height}),r._repositionItems(l,0,_)}if(c>0&&r._scrollItemList.length>0){let C=[],I=r._scrollItemList.length-1,b=r._scrollItemList[I],E={x:b.position.x,y:b.position.y+r._currentItemSize.height},R=r._currentIndex+r._visibleRange-c;for(let A=0;A<c;A++)if(R+A<r._currentList.length){let U=r._currentList[R+A].data,z={clickPos:{x:0,y:0},data:U,indent:r._currentList[R+A].indent,index:I+A+1,inlineStyle:{},position:{x:E.x,y:E.y},showCheckBox:r._isItemCheckBoxAllowed(U),showRadioButton:r._isItemRadioButtonAllowed(U),size:{width:0,height:r._currentItemSize.height},targetPosition:{x:E.x,y:E.y},style:{},tabIndex:0,zIndex:0};C.push(z),r._updateItemStyle(z),r._scrollItemList.splice(z.index,0,z),E.y+=r._currentItemSize.height}r.update();let T=c*r._currentItemSize.height;yield r._moveItemsUpward(r._scrollItemList,I+1,-T,_)}a.forEach(C=>{let I=r._scrollItemList.indexOf(C);I>=0&&r._scrollItemList.splice(I,1)}),r.refresh(),r._invokeEvent("itemRemoved",{index:e,item:n}),h&&r._invokeEvent("selectionChanged",{item:r._currentSelection}),setTimeout(function(){if(r._stackRemove.splice(0,1),r._updateCurrentList(),r._stackRemove.length>0){let C=r._stackRemove[0];r._processRemoveRange(C.item,C.index,C.parent)}else r._isAnimationInProcess=!1,r._internalUpdateCurrentLayout(),o()},_)})},1);else if(r._stackRemove.splice(0,1),r._stackRemove.length>0){let a=r._stackRemove[0];r._processRemoveRange(a.item,a.index,a.parent)}else r._isAnimationInProcess=!1,r._internalUpdateCurrentLayout(),o()}else if(r._stackRemove.splice(0,1),r._stackRemove.length>0){let s=r._stackRemove[0];r._processRemoveRange(s.item,s.index,s.parent)}else r._isAnimationInProcess=!1,r._internalUpdateCurrentLayout(),o()})})}_repositionItems(n,e,t){return B(this,null,function*(){let r=this._animatePosition.bind(this),o=new Xo;this._activeAnimations.push(o);let s=[];for(let a=e;a<n.length;a++){let l=n[a],c={top:l.position.y},d={top:l.targetPosition.y};s.push({element:l,current:c,values:d})}return yield o.animate(s,0,t!==void 0?t:250,r),Promise.resolve()})}_updateCurrentScrollItemPos(n,e){return B(this,null,function*(){let t=this,r=t._animateCurrentItemPos.bind(t),o=new Xo;t._activeAnimations.push(o);let s=[];for(let a=n;a<t._scrollItemList.length;a++){let l=t._scrollItemList[a],c={top:l.position.y},d={top:l.position.y+e};s.push({element:l,current:c,values:d})}return yield o.animate(s,0,250,r),Promise.resolve()})}_updateNewScrollItemPos(n,e){return B(this,null,function*(){let t=this._animateNewItemPos.bind(this),r=new Xo;this._activeAnimations.push(r);let o=[],s=this._currentItemSize.height>0?this._currentItemSize.height:30,a={top:n.position.y},l={top:n.position.y+s};return o.push({element:n,current:a,values:l}),yield r.animate(o,0,e!==void 0?e:200,t),Promise.resolve()})}_updateCtrlSize(n){return B(this,null,function*(){this._clearAnimations(),this._isAnimationInProcess=!0;let e=this._animateSize.bind(this),t=new Xo;this._activeAnimations.push(t);let r=[{current:{height:this._currentCtrlSize.height},values:{height:this._clientRect.height}}];return yield t.animate(r,100,n!==void 0?n:250,e),this._isAnimationInProcess=!1,Promise.resolve()})}_animateSize(n,e){let t=this;n.length>0&&(t._currentCtrlSize.height=n[0].values.height),e&&(t._currentCtrlSize.height=t._clientRect.height,setTimeout(function(){t._clearInactiveAnimations()},1)),t.update()}_animateToggle(n,e){let t=this;n.length>0&&(t._currentCtrlSize.height=n[0].values.height,n.forEach((r,o)=>{r.element.position={x:r.element.position.x,y:r.values.top}})),e&&(t._currentCtrlSize.height=t._clientRect.height,t._clearInactiveAnimations()),t.update()}_moveItemsDownward(n,e,t){return B(this,null,function*(){let r=this,o=r._animateToggle.bind(r),s=new Xo;r._activeAnimations.push(s);let a=[];for(let l=e;l<n.length;l++){let c=n[l],d={top:c.position.y,height:r._currentCtrlSize.height},h={top:t!=null?c.position.y+t:c.targetPosition.y,height:r._clientRect.height};a.push({element:c,current:d,values:h})}return yield s.animate(a,0,250,o),Promise.resolve()})}_moveItemsUpward(n,e,t,r){return B(this,null,function*(){let o=this,s=o._animateToggle.bind(o),a=new Xo;o._activeAnimations.push(a);let l=[];for(let c=e;c<n.length;c++){let d=n[c],h={top:d.position.y,height:o._currentCtrlSize.height},_={top:t!=null?d.position.y+t:d.targetPosition.y,height:o._clientRect.height};l.push({element:d,current:h,values:_})}return yield a.animate(l,0,r!==void 0?r:250,s),Promise.resolve()})}_updateItemCollapse(n){return B(this,null,function*(){let e=this,t=e._getObjFromScrollItem(n);if(t){e._updateItemStyle(t);let r=e._scrollItemList.indexOf(t);if(r<e._scrollItemList.length){let o=e._scrollItemList[r];e._fullChildList.length=0,e._updateChildList(t.data[e._options.dataFields.items],t.indent);let s=e._fullChildList.length;if(e._currentCtrlSize.height=e._clientRect.height,e._clientRect.height=(e._currentList.length-s)*e._avgItemHeight,r<e._scrollItemList.length-1){let c=[],d=e._scrollItemList.length-1,h=e._scrollItemList[e._scrollItemList.length-1],_={x:h.position.x,y:h.position.y+e._currentItemSize.height},C=e._getItemCurrentIndex(h.data);if(C>=0){let b=C+1;for(let E=0;E<s&&E+b<e._currentList.length;E++){let R=e._currentList[E+b],T={clickPos:{x:0,y:0},data:R.data,indent:R.indent,index:E+d+1,inlineStyle:{},position:{x:_.x,y:_.y},showCheckBox:e._isItemCheckBoxAllowed(R.data),showRadioButton:e._isItemRadioButtonAllowed(R.data),size:{width:0,height:e._currentItemSize.height},targetPosition:{x:_.x,y:_.y},style:{},tabIndex:0,zIndex:0};c.push(T),e._updateItemStyle(T),e._scrollItemList.splice(T.index,0,T),_.y+=e._currentItemSize.height}e.update()}let I=s*e._currentItemSize.height;e._moveItemsUpward(e._scrollItemList,r+s,-I)}let a=[],l=0;for(let c=r+1;c<e._scrollItemList.length&&l<s;c++,l++){let d=e._scrollItemList[c];d.targetPosition={x:o.position.x,y:o.position.y},a.push(d)}yield e._moveItemsUpward(a,0)}}return e._internalUpdateCurrentLayout(),e._isAnimationInProcess=!1,Promise.resolve()})}_updateChildList(n,e){let t=this;n.forEach(r=>{if(t._isItemAllowed(r)){let o=e+t._options.indent;t._fullChildList.push({data:r,indent:o}),r[t._options.dataFields.items]&&t.isItemExpanded(r)&&t._updateChildList(r[t._options.dataFields.items],o)}})}_updateItemExpand(n){return B(this,null,function*(){let e=this,t=e._getObjFromScrollItem(n);if(t){let r=e._scrollItemList.indexOf(t);if(r<e._scrollItemList.length){let o=e._scrollItemList[r],s={x:o.position.x,y:o.position.y};e._fullChildList.length=0,e._updateChildList(t.data[e._options.dataFields.items],t.indent);let a=e._fullChildList.length;if(r<e._scrollItemList.length-1){let c=a*e._currentItemSize.height;e._moveItemsDownward(e._scrollItemList,r+1,c)}let l=[];e._currentCtrlSize.height=e._clientRect.height,e._clientRect.height=(e._currentList.length+a)*e._avgItemHeight;for(let c=0;c<e._fullChildList.length;c++){let d=e._fullChildList[c],h={clickPos:{x:0,y:0},data:d.data,indent:d.indent,index:c+r,inlineStyle:{},position:{x:s.x,y:s.y},showCheckBox:e._isItemCheckBoxAllowed(d.data),showRadioButton:e._isItemRadioButtonAllowed(d.data),size:{width:0,height:e._currentItemSize.height},targetPosition:{x:s.x,y:s.y+(c+1)*e._currentItemSize.height},style:{},tabIndex:0,zIndex:0};l.push(h),e._updateItemStyle(h),e._scrollItemList.splice(h.index,0,h)}yield e._moveItemsDownward(l,0)}}return e._internalUpdateCurrentLayout(),e._isAnimationInProcess=!1,Promise.resolve()})}_animateItemPos(n,e){n.forEach((t,r)=>{t.element.position={x:t.values.left,y:t.element.position.y}}),this.update(),e&&this._clearInactiveAnimations()}_isInitAnimationAllowed(){return this._isAnimationAllowed&&this._isInitActive&&!this._initSuccess}_updateScrollItemPos(){return B(this,null,function*(){let n=this;if(n._isInitAnimationAllowed()){let e=n._animateItemPos.bind(n),t=new Xo;n._activeAnimations.push(t);let r=[];n._scrollItemList.forEach((o,s)=>{let a={left:o.position.x},l={left:o.targetPosition.x};r.push({element:o,current:a,values:l})}),yield t.animate(r,0,250,e),n.refresh()}return n._initSuccess=!0,Promise.resolve()})}_itemClickEvent(n,e){this._isEnabled&&n.which===1&&this._invokeEvent("itemClick",{event:n,item:e.data})}_itemDblClickEvent(n,e){this._isEnabled&&n.which===1&&this._invokeEvent("itemDblClick",{event:n,item:e.data})}_itemRightClickEvent(n,e){this._isEnabled&&this._invokeEvent("itemRightClick",{event:n,item:e.data})}_processLoadData(n,e,t,r){return B(this,null,function*(){yield this.clearItems(e),this._updateDataFields(t);let o=[];if(n)if(r||r===void 0){let s=[];n.forEach((a,l)=>{a[this._options.dataFields.items]=[];let c=a[this._options.dataFields.pid];s[c]?(s[c][this._options.dataFields.items]||(s[c][this._options.dataFields.items]=[]),s[a[this._options.dataFields.id]]=a,s[c][this._options.dataFields.items].push(a)):(s[a[this._options.dataFields.id]]=a,o.push(a))}),s.length=0}else o=n;return e?(o.map(s=>s[this._options.dataFields.pid]=e[this._options.dataFields.id]),e[this._options.dataFields.items]=o):this.items&&(this.items.length=0,o.map(s=>this.items.push(s))),this._invokeEvent("loadComplete"),this._internalUpdateLayout(),Promise.resolve()})}_updateData(){this._dataService.init([{data:this.items}])}_updateDataFields(n){n?this._options.dataFields={allowCheckBox:n.allowCheckBox?n.allowCheckBox:"allowCheckBox",allowDrag:n.allowDrag?n.allowDrag:"allowDrag",allowDrop:n.allowDrop?n.allowDrop:"allowDrop",allowEdit:n.allowEdit?n.allowEdit:"allowEdit",allowFocus:n.allowFocus?n.allowFocus:"allowFocus",allowRadioButton:n.allowRadioButton?n.allowRadioButton:"allowRadioButton",autoCheck:n.autoCheck?n.autoCheck:"autoCheck",canSelect:n.canSelect?n.canSelect:"canSelect",checkBoxSettings:n.checkBoxSettings?n.checkBoxSettings:"checkBoxSettings",checked:n.checked?n.checked:"checked",checkState:n.checkState?n.checkState:"checkState",childCount:n.childCount?n.childCount:"childCount",content:n.content?n.content:"content",contentVisibility:n.contentVisibility?n.contentVisibility:"contentVisibility",contextMenu:n.contextMenu?n.contextMenu:"contextMenu",enabled:n.enabled?n.enabled:"enabled",expanded:n.expanded?n.expanded:"expanded",group:n.group?n.group:"group",hasChildren:n.hasChildren?n.hasChildren:"hasChildren",icon:n.icon?n.icon:"icon",iconUrl:n.iconUrl?n.iconUrl:"iconUrl",id:n.id?n.id:"id",items:n.items?n.items:"items",name:n.name?n.name:"name",objects:n.items?n.items:"items",pid:n.pid?n.pid:"pid",radioGroup:n.radioGroup?n.radioGroup:"radioGroup",selected:n.selected?n.selected:"selected",showCheckBox:n.showCheckBox?n.showCheckBox:"showCheckBox",statusIcon:n.statusIcon?n.statusIcon:"statusIcon",style:n.style?n.style:"style",templateObj:n.templateObj?n.templateObj:"templateObj",text:n.text?n.text:"text",tooltip:n.tooltip?n.tooltip:"tooltip",value:n.value?n.value:"value",visible:n.visible?n.visible:"visible"}:this._options.dataFields={allowCheckBox:"allowCheckBox",allowDrag:"allowDrag",allowDrop:"allowDrop",allowEdit:"allowEdit",allowFocus:"allowFocus",allowRadioButton:"allowRadioButton",autoCheck:"autoCheck",canSelect:"canSelect",checkBoxSettings:"checkBoxSettings",checked:"checked",checkState:"checkState",childCount:"childCount",content:"content",contentVisibility:"contentVisibility",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",group:"group",hasChildren:"hasChildren",icon:"icon",iconUrl:"iconUrl",id:"id",items:"items",name:"name",objects:"items",pid:"pid",radioGroup:"radioGroup",selected:"selected",showCheckBox:"showCheckBox",statusIcon:"statusIcon",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value",visible:"visible"},this._dataService&&this._dataService.updateDataFields(this._options.dataFields)}_updateOptions(n){n?(this._options={allowDrag:this._commonService.isFieldAvailable(n.allowDrag,!1),allowDrop:this._commonService.isFieldAvailable(n.allowDrop,!1),allowFilter:this._commonService.isFieldAvailable(n.allowFilter,!1),allowFocus:this._commonService.isFieldAvailable(n.allowFocus,!1),dataFields:null,selectedItem:this._commonService.isFieldAvailable(n.selectedItem,this._options.selectedItem?this._options.selectedItem:null)},this._updateShowScroll(n.showScroll)):(this._options={allowDrag:!1,allowDrop:!1,allowFilter:!1,allowFocus:!1,dataFields:null,selectedItem:null},this._updateDataFields(),this._updateShowScroll())}_resetScrollItemList(){this._scrollItemList.length=0,this.update()}_updateScrollItemList(n){this._resetScrollItemList()}_updateShowScroll(n){n?this._options.showScroll={horizontal:this._commonService.isFieldAvailable(n.horizontal,!0),vertical:this._commonService.isFieldAvailable(n.vertical,!0)}:this._options.showScroll={horizontal:!0,vertical:!0}}_isItemCheckBoxAllowed(n){return!1}_isItemRadioButtonAllowed(n){return!1}_addDropMark(n){this._removeDropMark(),(this._currentDragDropMode!==Wr.Dynamic||this._dragItemObj!==null)&&(this._dragCmp=document.createElement("iui-dragwin",{is:Kz}),this._dragCmp&&(this._dragCmp.colorScheme=this._currentColorScheme,this._dragCmp.customStyle=this.customStyle,this._dragCmp.resourcePath=this.resourcePath,this._dragCmp.theme=this._currentTheme,document.body.appendChild(this._dragCmp),this._dragCmp.refresh()))}_removeDropMark(){this._dragCmp&&this._dragCmp.remove(),this._dragCmp=null}_calcDragMoveSpace(){return Math.floor(.4*this._currentItemSize.height)}_callDragDropEvent(n,e,t){let r={action:e.action,cancel:!1,dragObj:e.source,dropPos:e.dropPos,event:n,isDropAllowed:e.allow,mousePos:this._commonService.getMousePos(n),sourceCtrl:e.sourceCtrl,targetCtrl:e.targetCtrl,targetObj:e.target};return t?this._invokeEvent("dragDrop",r):this._invokeEvent("dragOver",r),r}_checkEmptySpace(n){let e=this._getContentSize(),t=this._commonService.getPageRect(this._elemRef),r=t.top+e.height,o=t.bottom,s=this._commonService.getMousePos(n),a=this._commonService.getShiftPos();return s.x-=a.x,s.y-=a.y,s.y>=r&&s.y<=o}_clearDragActive(){let n=this;n._isDragActiveTimeout=setTimeout(function(){n._isDragActive=!1,clearTimeout(n._isDragActiveTimeout)},100)}_clearDragTimeout(){this._isDragActiveTimeout&&clearTimeout(this._isDragActiveTimeout),this._isDragActiveTimeout=null}_clearDragDropSettings(n){n&&this._dragDropService.clearData(),this._dragItemList.length=0,this._dragItemObj=null,this._dragOverStarted=!1,this._dropPos=-1,this._hoverItem=null,this._isDragCopy=!1,this._scrollSizeAddition=0,this._removeDropMark(),this._resetDragListPos()}_clearExpandTimeout(){this._expandTimeout&&clearTimeout(this._expandTimeout),this._expandTimeout=null}_ctrlDragEnd(n){this._removeDropMark();let e=this._dragDropService.getData();e.targetCtrl&&e.targetCtrl.removeDropMark&&e.targetCtrl.removeDropMark(),this._itemDragEnd(n,null)}_ctrlDragEnter(n){this._isEnabled&&this._processDragEnter(n)}_ctrlDragDrop(n){this._isEnabled&&(this._currentDragDropMode===Wr.Static?(this._processDragDropStatic(n),this._removeDropMark()):this._processDragDropDynamic(n),n.stopPropagation())}_ctrlDragLeave(n){this._isEnabled&&this._processDragLeave(n)}_ctrlDragOver(n){this._isEnabled&&(this._currentDragDropMode===Wr.Static?(this._processDragOverStatic(n),n.stopPropagation()):this._options.allowDrop?(this._processScroll(n),this._isScrollTimerActive?this._updateDragListPos(n):this._processDragOverDynamic(n)):this._isDragActive&&this._dragItemObj&&(this._dragDropService.getData().targetCtrl?this._dropMark(n):(this._updateDropMark(n),n.stopPropagation())))}_dropMark(n,e,t){if(!this._dragCmp&&!this._isScrollTimerActive&&this._addDropMark({x:n.pageX,y:n.pageY}),this._dragCmp){let r="none";(t||this._options.allowDrop)&&(r=e?"block":"none"),this._dragCmp.display=r,this._dragCmp.refresh()}}_expandOnDelay(n){let e=this;e._isAutoExpanded!==!1&&n&&(e._expandItem!==n&&(e._clearExpandTimeout(),e._expandTimeout=setTimeout(function(){e._expandTimeout&&e.expand(n),clearTimeout(e._expandTimeout)},this._currentDragDropMode===Wr.Dynamic?750:500)),e._expandItem=n)}_updateDragComponent(n){this._dragCmp&&this._dragCmp.updatePos(n)}_isDragAllowed(n){return this._options.allowDrag?!!(n&&(n[this._options.dataFields.allowDrag]||n[this._options.dataFields.allowDrag]===void 0)):!1}_isDropAllowed(n,e,t){let r=this._options.allowDrop;if(r&&n&&e)if(e[this._options.dataFields.allowDrop]||e[this._options.dataFields.allowDrop]===void 0){r=!0;let o=!1;if(Array.isArray(n))for(let s=0;s<n.length;s++){if(o=!!(t===0&&this._isParentOf(e,n[s])),this._commonService.isEqual(n[s][this._options.dataFields.id],e[this._options.dataFields.id])||o||this._isChildOf(e,n[s])){r=!1;break}if(!r)break}else o=!!(t===0&&this._isParentOf(e,n)),(this._commonService.isEqual(n[this._options.dataFields.id],e[this._options.dataFields.id])||o||this._isChildOf(e,n))&&(r=!1)}else r=!1;return r}_processDragStartStatic(n,e){if(this._dragDropService.clearData(),this._isDragAllowed(e)){if(e)if(!this._isDragAllowed(e))n.dataTransfer?n.dataTransfer.effectAllowed="none":n.originalEvent&&n.originalEvent.dataTransfer&&(n.originalEvent.dataTransfer.effectAllowed="none");else{let t={clone:null,source:null,sourceCtrl:this,sourceData:this.items};switch(this.selectionMode){case br.MultiSimple:case br.MultiExtended:t.clone=this._createCloneList(this._currentSelectedItems,!0),t.source=this._currentSelectedItems;break;default:t.clone=this._createCloneList([e],!0)[0],t.source=e}let r={action:n.shiftKey?"copy":"move",cancel:!1,dragObj:t.source,dropPos:-1,event:n,isDropAllowed:this._options.allowDrop,mousePos:this._commonService.getMousePos(n),sourceCtrl:t.sourceCtrl,targetCtrl:this,targetObj:null};if(this._invokeEvent("dragStart",r),r.cancel===!0){n.preventDefault();return}else this._isDragActive=!0,this._addDropMark({x:n.pageX,y:n.pageY}),this._dropMark(n),n.dataTransfer?(n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text",e[this._options.dataFields.id]?e[this._options.dataFields.id].toString():"")):n.originalEvent&&n.originalEvent.dataTransfer&&(n.originalEvent.dataTransfer.effectAllowed="move",n.originalEvent.dataTransfer.setData("text",e[this._options.dataFields.id]?e[this._options.dataFields.id].toString():"")),this._dragDropService.setData(t)}}else n.preventDefault()}_processDragStartDynamic(n,e,t){let r=this;if(r._dragDropService.clearData(),r._isDragAllowed(e)){if(e)if(!r._isDragAllowed(e))n.dataTransfer?n.dataTransfer.effectAllowed="none":n.originalEvent&&n.originalEvent.dataTransfer&&(n.originalEvent.dataTransfer.effectAllowed="none");else{let s={clone:null,source:null,sourceCtrl:r,sourceData:r.items};switch(r.selectionMode){case br.MultiSimple:case br.MultiExtended:s.clone=r._createCloneList(r._currentSelectedItems,!0),s.source=r._currentSelectedItems;break;default:s.clone=r._createCloneList([e],!0)[0],s.source=e}let a={action:n.shiftKey?"copy":"move",cancel:!1,dragObj:s.source,dropPos:-1,event:n,isDropAllowed:r._options.allowDrop,mousePos:r._commonService.getMousePos(n),sourceCtrl:s.sourceCtrl,targetCtrl:r,targetObj:null};if(r._invokeEvent("dragStart",a),a.cancel===!0){n.preventDefault();return}else{r._isAnimationInProcess=!0,r._isCtrlDragEntered=!0,r._isDragActive=!0,r._dragOverStarted=!1,r._isMouseEnterAllowed=!1;let l=r._getObjFromScrollItem(e);if(l){r._updateDragItemList(s);let c=r._commonService.getShiftPos(),d=r._commonService.getMousePos(n);d.x-=c.x,d.y-=c.y,r._dragElemPos.top=t.client.y,r._dragElemSize={width:t.page.width,height:t.page.height},r._dragItemObj=l,r._dragListStartPos.top=d.y-t.page.y,r._dragListStartPos.left=d.x-t.page.x,r._currentDragPos=r._commonService.getMousePos(n),r._prevDragPos=r._commonService.getMousePos(n);let h=Array.isArray(s.source)?s.source.length:1;r._currentDragItems=Math.min(r._maxDragItems,h),r._totalDragItems=h,r._dropPos=-1,r._dragMoveSpace=r._calcDragMoveSpace(),r.update(),r._updateDragListSize(),r._dragListIndex=r._scrollItemList.indexOf(l);let _=r._scrollItemList.filter(I=>!r._isItemDragged(I.data));r._isGroupingEnabled&&(_=_.filter(I=>!(I.data.type==="group"&&!I.data.visibleOnDrag)));let C={x:r._ctrlPadding.left,y:r._ctrlPadding.top};for(let I=0;I<_.length;I++){let b=_[I];I===r._dragListIndex&&(C.y+=r._currentItemSize.height),b.position={x:C.x,y:C.y},C.y+=r._currentItemSize.height}r._dragListIndex=-1;var o=document.createElement("span");o.id="drag-ghost",o.style.position="absolute",o.style.top="-1000px",document.body.appendChild(o),n.dataTransfer.setDragImage(o,0,0),o.remove()}r._addDropMark({x:n.pageX,y:n.pageY}),r._dropMark(n),n.dataTransfer?(n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text",e[r._options.dataFields.id]?e[r._options.dataFields.id].toString():"")):n.originalEvent&&n.originalEvent.dataTransfer&&(n.originalEvent.dataTransfer.effectAllowed="move",n.originalEvent.dataTransfer.setData("text",e[r._options.dataFields.id]?e[r._options.dataFields.id].toString():"")),r._dragDropService.setData(s)}}}else n.preventDefault()}_preventDrop(n){n.dataTransfer?n.dataTransfer.dropEffect="none":n.originalEvent&&n.originalEvent.dataTransfer&&(n.originalEvent.dataTransfer.dropEffect="none")}_processDragEnter(n){this._options.allowDrop||this._preventDrop(n),this._currentDragDropMode===Wr.Static?this._processDragEnterStatic(n):this._processDragEnterDynamic(n)}_processDragEnterStatic(n){if(!this._isCtrlDragEntered){this._isCtrlDragEntered=!0;let e=this._dragDropService.getData(),t={action:n.shiftKey?"copy":"move",dragObj:e.source,dropPos:-1,event:n,isDropAllowed:this._options.allowDrop,mousePos:this._commonService.getMousePos(n),sourceCtrl:e.sourceCtrl,targetCtrl:this,targetObj:null};this._invokeEvent("dragEnter",t)}}_processDragEnterDynamic(n){if(n.preventDefault(),this._options.allowDrop&&!this._isCtrlDragEntered){this._isCtrlDragEntered=!0,this._isDragActive=!0,this._dropPos=-1,this._dropMark(n),this._updateDragItemList(),this._dragItemObj||(this._dragListStartPos.top=this._currentItemSize.height>0?this._currentItemSize.height/2:10,this._dragListStartPos.left=this._currentItemSize.width>0?this._currentItemSize.width/2:10,this._updateDragListPos(n),this.update());let e=this._dragDropService.getData();this._dragDropService.setData({action:n.shiftKey?"copy":"move",clone:e.clone,dropPos:-1,source:e.source,sourceCtrl:e.sourceCtrl,sourceData:e.sourceData,target:null,targetCtrl:this});let t={action:n.shiftKey?"copy":"move",dragObj:e.source,dropPos:-1,event:n,isDropAllowed:this._options.allowDrop,mousePos:this._commonService.getMousePos(n),sourceCtrl:e.sourceCtrl,targetCtrl:this,targetObj:null};this._invokeEvent("dragEnter",t)}}_processDragLeave(n){this._currentDragDropMode===Wr.Static?this._processDragLeaveStatic(n):this._processDragLeaveDynamic(n)}_processDragLeaveStatic(n){if(this._isCtrlDragEntered){let e=this._commonService.getPageRect(this._elemRef),t=this._commonService.getMousePos(n),r=this._commonService.getShiftPos();if(t.x-=r.x,t.y-=r.y,t.x<e.left||t.x>e.right||t.y<e.top||t.y>e.bottom){this._isCtrlDragEntered=!1,this._stopScrollTimer();let o=this._dragDropService.getData(),s={action:n.shiftKey?"copy":"move",dragObj:o.source,dropPos:-1,event:n,isDropAllowed:!1,mousePos:this._commonService.getMousePos(n),sourceCtrl:o.sourceCtrl,targetCtrl:null,targetObj:null};this._invokeEvent("dragLeave",s)}this._dropMark(n)}}_processDragLeaveDynamic(n){if(this._isCtrlDragEntered){let e=this._commonService.getPageRect(this._elemRef),t=this._commonService.getMousePos(n),r=this._commonService.getShiftPos();if(t.x-=r.x,t.y-=r.y,t.x<=e.left||t.x>=e.right||t.y<=e.top||t.y>=e.bottom){this._isCtrlDragEntered=!1,this._dragListIndex=-1,this._dropPos=-1,this._resetDragListPos(),this._updateScrollItemList(),this.update(),this._stopScrollTimer();let o=this._dragDropService.getData();this._dragDropService.setData({action:n.shiftKey?"copy":"move",clone:o.clone,dropPos:-1,source:o.source,sourceCtrl:o.sourceCtrl,sourceData:o.sourceData,target:null,targetCtrl:null});let s={action:n.shiftKey?"copy":"move",dragObj:o.source,dropPos:-1,event:n,isDropAllowed:!1,mousePos:this._commonService.getMousePos(n),sourceCtrl:o.sourceCtrl,targetCtrl:null,targetObj:null};this._invokeEvent("dragLeave",s)}}}_processDragOverStatic(n,e,t,r,o){n.preventDefault(),this._processDragEnter(n);let s=!0;if(n.dataTransfer?s=n.dataTransfer.effectAllowed!=="none":n.originalEvent&&n.originalEvent.dataTransfer&&(s=n.originalEvent.dataTransfer.effectAllowed!=="none"),s){let a=this._dragDropService.getData(),l=this._commonService.getShiftPos();if(e){let c=this._commonService.getMousePos(n);c.x-=l.x,c.y-=l.y;let d=this._dragDropService.getDropPos(c,t,r,o);s=this._isDropAllowed(a.source,e,d);let h={action:n.shiftKey?"copy":"move",source:a.source,dropPos:d,allow:s,sourceCtrl:a.sourceCtrl,target:e,targetCtrl:this},_=this._callDragDropEvent(n,h);if(!s||_.cancel===!0)this._preventDrop(n),this._dropMark(n);else{let C=this._commonService.getMousePos(n),I=C.y+16,b=C.x+20,E={"iui-dragwin-icon":!0},R="";switch(_.dropPos){case 0:R="iui-dragwin-move-in";break;case 1:o==="horizontal"?R="iui-dragwin-move-left":R="iui-dragwin-move-up";break;case 2:o==="horizontal"?R="iui-dragwin-move-right":R="iui-dragwin-move-down";break;default:R=""}R!==""&&(_.action==="copy"&&(R+="-copy"),E[R]=!0),this._updateDragComponent({class:E,top:I,left:b,text:e[this._options.dataFields.text]}),this._dropMark(n,s),this._dragDropService.setData({action:_.action,clone:a.clone,source:a.source,sourceCtrl:a.sourceCtrl,sourceData:a.sourceData,target:e,targetCtrl:this,dropPos:_.dropPos})}}else if(!this._options.allowDrop)this._preventDrop(n),this._dropMark(n);else{s=this._checkEmptySpace(n);let c={action:n.shiftKey?"copy":"move",source:a.source,dropPos:-1,allow:s,sourceCtrl:a.sourceCtrl,target:null,targetCtrl:this},d=this._callDragDropEvent(n,c);if(!s||d.cancel===!0)this._preventDrop(n),this._dropMark(n);else{let h=this._commonService.getMousePos(n),_=h.y+16,C=h.x+20,I={"iui-dragwin-icon":!0,"iui-dragwin-move-end":!0};d.action==="copy"&&(I["iui-dragwin-move-end-copy"]=!0),this._updateDragComponent({class:I,top:_,left:C,text:this.name?this.name:"Component"}),this._dropMark(n,s),this._dragDropService.setData({action:d.action,clone:a.clone,source:a.source,sourceCtrl:a.sourceCtrl,sourceData:a.sourceData,target:null,targetCtrl:this,dropPos:d.dropPos})}}}}_processDragDropStatic(n,e){n.preventDefault(),this._dropMark(n);let t=!0;n.dataTransfer?t=n.dataTransfer.effectAllowed!=="none":n.originalEvent&&n.originalEvent.dataTransfer&&(t=n.originalEvent.dataTransfer.effectAllowed!=="none");let r=this._dragDropService.getData();if(t)if(e?t=this._isDropAllowed(r.source,e,r.dropPos):t=this._checkEmptySpace(n),t&&r.source){let o={action:r.action,source:r.source,dropPos:r.dropPos,allow:t,sourceCtrl:r.sourceCtrl,target:r.target,targetCtrl:this},s=this._callDragDropEvent(n,o,!0);this._dragDropService.setData({action:s.action,clone:r.clone,dropPos:s.dropPos,source:r.source,sourceCtrl:r.sourceCtrl,sourceData:r.sourceData,target:r.target,targetCtrl:this}),!s.cancel&&this._isProcessAllowed?this._drop(this._dragDropService.getData()):this._isDragActive=!1}else this._isDragActive=!1,this._dragDropService.clearData();else this._isDragActive=!1,this._dragDropService.clearData();this._clearDragDropSettings(),this.update()}_processDragOverDynamic(n){n.preventDefault(),this._processDragEnter(n);let e=!0;if(n.dataTransfer?e=n.dataTransfer.effectAllowed!=="none":n.originalEvent&&n.originalEvent.dataTransfer&&(e=n.originalEvent.dataTransfer.effectAllowed!=="none"),e){let t=this._dragDropService.getData();if(this._isAnimationInProcess=!0,this._dragOverStarted){this._updateDragListPos(n),this._currentDragPos=this._commonService.getMousePos(n);let r=this._scrollItemList,o=this._getDragDropTarget(e),s=o.target?o.target.data:null;e=o.pass&&this._options.allowDrop,this._dragTargetIndex>=0&&this._dragTargetIndex<r.length&&(s=r[this._dragTargetIndex].data),this._dropPos===0&&this._expandOnDelay(s);let a={action:n.shiftKey?"copy":"move",source:t.source,dropPos:s?this._dropPos:-1,allow:e,sourceCtrl:t.sourceCtrl,target:s,targetCtrl:this};this._isDragCopy=!!n.shiftKey;let l=this._callDragDropEvent(n,a);!e||l.cancel===!0?this._preventDrop(n):(this._updateDragItemPos(),this._dragDropService.setData({action:l.action,clone:t.clone,source:t.source,sourceCtrl:t.sourceCtrl,sourceData:t.sourceData,target:s,targetCtrl:this,dropPos:l.dropPos})),this._prevDragPos=this._commonService.getMousePos(n),this.update()}else{this._dragItemList.forEach(o=>o.data[this._options.dataFields.expanded]=!1);let r=this._dragItemObj?this.getNextCurrentItem(this._dragItemObj.data):null;for(;r&&this._isItemDragged(r);)r=this.getNextCurrentItem(r);this._processUpdateCurrentLayout(),this._dragItemObj&&this.isItemExpanded(this._dragItemObj.data)&&this.collapse(this._dragItemObj.data),this._scrollSizeAddition=0,t.sourceCtrl!==this?this._scrollSizeAddition=this._dragListSize.height:this._dragItemObj&&this._dragItemObj.position.y+this._currentScrollPos.y+this._dragListSize.height<this._maxScrollPos.y&&(this._scrollSizeAddition=this._dragListSize.height),this._updateScrollSize(),this._dragOverStarted=!0,this._updateScrollItemList(r),this.update(),this._dragListIndex=-1}}}_resetDragListPos(){this._dragListPos={top:-9999999,left:0}}_updateDragListPos(n){let e=this._commonService.getShiftPos(),t=this._commonService.getMousePos(n);t.x-=e.x,t.y-=e.y;let r=this._commonService.getPageRect(this._elemRef);this._dragListPos.top=t.y-r.y-this._dragListStartPos.top,this._dragListPos.left=t.x-r.x-this._dragListStartPos.left}_getDragDropTarget(n){let e=null,t=this._dragDropService.getData();if(this._currentDragPos.y>this._prevDragPos.y)for(let r=this._scrollItemList.length-1;r>=0;r--){let o=this._scrollItemList[r];if(e=o.data,this._dragListPos.top+this._dragListSize.height>o.position.y+this._dragMoveSpace&&(this._dragListIndex=r+1,this._dropPos=2,n=this._isDropAllowed(t.source,e))){this._dragTargetIndex=r;break}}else if(this._currentDragPos.y<this._prevDragPos.y)for(let r=0;r<this._scrollItemList.length;r++){let o=this._scrollItemList[r];if(e=o.data,this._dragListPos.top<o.position.y+o.size.height-this._dragMoveSpace&&(this._dragListIndex=r,this._dropPos=1,n=this._isDropAllowed(t.source,e))){this._dragTargetIndex=r;break}}return{pass:n,target:e}}_updateDragItemPos(){if(this._dragListIndex>=0){let n={x:this._ctrlPadding.left,y:this._ctrlPadding.top},e=0;for(e=0;e<this._scrollItemList.length;e++){let t=this._scrollItemList[e];e===this._dragListIndex&&(n.y+=this._dragListSize.height),e===this._dragTargetIndex&&this._updateDragIndent(this._dropPos>=0?t.indent:0),this._activeAnimations.filter(r=>r.isAnimated(t)).length===0&&this._animateTarget(t,n),n.y+=this.isSeparator(t.data)?15:this._currentItemSize.height}}}_updateDragIndent(n){}_animateTarget(n,e){let t={top:n.position.y,left:n.position.x},r={top:e.y,left:e.x};if(r.top!==t.top||r.left!==t.left){let o=this._updateAnimationValues.bind(this),s=new Xo(n);this._activeAnimations.push(s),s.animate({element:n,current:t,values:r},0,this._currentAnimationSpeedValue,o)}}_clearTargetAnimation(n){this._activeAnimations.filter(e=>e.isAnimated(n)).forEach(e=>{e.destroy(),e=void 0}),this._activeAnimations=this._activeAnimations.filter(e=>!e.isAnimated(n))}_updateAnimationValues(n,e,t){n.length>0&&(n.forEach(r=>{r.element&&(r.element.position={x:r.values.left,y:r.values.top},e&&(this._clearTargetAnimation(r.element),this._clearInactiveAnimations()))}),this.update())}_updateDragListSize(){this._dragContentElem=this.shadowRoot.querySelector("#drag-content"),this._dragContentElem&&(this._dragListSize={width:this._dragContentElem.offsetWidth,height:this._dragContentElem.offsetHeight})}_getDragItemExpandBoxStyle(n){return{}}_updateDragItemList(n){this._dragItemList.length=0;let e=n||this._dragDropService.getData();if(e.source){let t=Array.isArray(e.source)?e.source:[e.source];t.forEach(r=>{this._dragItemList.push({data:r,expanded:r[this._options.dataFields.expanded],indent:0,style:{expandBox:this._getDragItemExpandBoxStyle(r)}})}),this._currentDragItems=Math.min(this._maxDragItems,t.length),this._totalDragItems=t.length,this.refresh(),this._updateDragListSize()}}_processDragDropDynamic(n){return B(this,null,function*(){n.preventDefault(),this._dragItemList.forEach(r=>r.data[this._options.dataFields.expanded]=r.expanded),this._updateCurrentLayout(!1),this._dropMark(n),this._dragItemList.length=0,this.update();let e=!0;n.dataTransfer?e=n.dataTransfer.effectAllowed!=="none":n.originalEvent&&n.originalEvent.dataTransfer&&(e=n.originalEvent.dataTransfer.effectAllowed!=="none");let t=this._dragDropService.getData();if(e)if(t.target&&(e=this._isDropAllowed(t.source,t.target)),e&&t.source){let r={action:t.action,source:t.source,dropPos:t.dropPos,allow:e,sourceCtrl:t.sourceCtrl,target:t.target,targetCtrl:this},o=this._callDragDropEvent(n,r,!0);this._dragDropService.setData({action:o.action,clone:t.clone,dropPos:o.dropPos,source:t.source,sourceCtrl:t.sourceCtrl,sourceData:t.sourceData,target:t.target,targetCtrl:this}),!o.cancel&&this._isProcessAllowed?yield this._drop(this._dragDropService.getData()):this._isDragActive=!1}else this._isDragActive=!1,this._dragDropService.clearData();else this._isDragActive=!1,this._dragDropService.clearData();return this._clearDragDropSettings(),this.update(),Promise.resolve()})}_drop(n){return B(this,null,function*(){return this._currentDragDropMode===Wr.Static?this._dropStatic(n):this._dropDynamic(n)})}_dropDynamic(n){return B(this,null,function*(){let e=this;return new Promise(t=>{let r=e.getTopItem(),o=e._getItemCurrentIndex(r),s=0;if(n&&n.sourceCtrl){let a=n.action==="copy"&&n.clone?n.clone:n.source,l=-1;if(Array.isArray(a)){let c=[];a.forEach(d=>{if((l=e._getItemCurrentIndex(d))<o&&(s++,e._isGroupingEnabled)){let h=e._getGroupFromItem(d);h&&!h.visibleOnDrag&&s--}c.push(d)}),n.dropPos===2&&(c=c.toReversed()),e._processDataDrop(c,n)}else{if((l=e._getItemCurrentIndex(a))<o&&(s=1,e._isGroupingEnabled)){let c=e._getGroupFromItem(a);c&&!c.visibleOnDrag&&s--}e._processDataDrop([a],n)}e._isAnimationInProcess=!1,n.sourceCtrl!==n.targetCtrl&&(s=0,e._isDragActive=!1),s=n.action!=="copy"?s:0,e.scrollTo(r,s),e._processUpdateLayout(),e._clearAllSelection(),e.refresh()}e._isAnimationInProcess=!1,setTimeout(function(){e._isCtrlDragEntered=!1,e._clearDragActive(),e._clearExpandTimeout(),e._dragDropService.clearData(),t()},250)})})}_dropStatic(n){return B(this,null,function*(){let e=this;return new Promise(t=>{if(n&&n.sourceCtrl){e.suspendLayout();let r=n.action==="copy"&&n.clone?n.clone:n.source;if(Array.isArray(r)){let o=[];for(let s=0;s<r.length;s++)o.push(r[s]);n.dropPos===2&&(o=o.toReversed()),e._processDataDrop(o,n)}else e._processDataDrop([r],n);n.sourceCtrl!==n.targetCtrl&&n.sourceCtrl.updateLayout&&n.sourceCtrl.updateLayout(),e.resumeLayout(),e._clearAllSelection(),e.refresh()}setTimeout(function(){e._isCtrlDragEntered=!1,e._clearDragActive(),e._clearExpandTimeout(),e._dragDropService.clearData(),t()},250)})})}_processDataDrop(n,e){return B(this,null,function*(){let t=this;return new Promise(r=>{let o=!0;if(t._currentDragDropMode===Wr.Dynamic&&e.dropPos<0&&(e.target||t._currentList.length>0)){o=!1;let s=t._commonService.getPageRect(t._elemRef),a=t._commonService.getShiftPos(),l=t._currentDragPos.y-a.y-s.top,c=t._scrollItemList[t._scrollItemList.length-1];c&&l>=c.position.y+c.size.height&&l<=s.height&&(o=!0)}if(o){if(e.action!=="copy"&&e.sourceCtrl&&e.sourceCtrl.removeItem&&e.sourceCtrl.removeItem(n),t._isGroupingEnabled&&e.dropPos>0&&e.target){let s=e.target[t._options.dataFields.group];if(e.target.type==="group"){let a=e.dropPos===1?t.getPrevObj(e.target,t._currentGroupList):e.target;if(s=a?a[t._options.dataFields.name]:void 0,a){let l=t._currentGroupBy?t._currentGroupBy:t._options.dataFields.group,c=t._fullList.filter(d=>d[l]===a[t._options.dataFields.name]&&t._isItemAllowed(d));c.length>0&&(e.dropPos===1?(e.target=c[c.length-1],e.dropPos=2):(e.target=c[0],e.dropPos=1))}else e.dropPos=-1}n.forEach(a=>a[t._options.dataFields.group]=s)}switch(e.dropPos){case 0:t.insertItemAt(n,t._currentDragDropMode===Wr.Dynamic?0:-1,e.target);break;case 1:t.insertItemBefore(n,e.target);break;case 2:t.insertItemAfter(n,e.target);break;default:t.addItem(n)}}else r()})})}_itemDragStart(n,e,t){if(this._isEnabled)if(this._currentDragDropMode===Wr.Static)this._processDragStartStatic(n,e.data);else{let r=this._getItemElemList();if(r&&t>=0&&t<r.length){let o=this._commonService.getPageRect(r[t]),s={x:o.left,y:o.top,width:o.right-o.left,height:o.bottom-o.top},a={x:(o=this._commonService.getClientRect(this._elemRef,r[t])).left,y:o.top,width:o.right-o.left,height:o.bottom-o.top};this._processDragStartDynamic(n,e.data,{page:s,client:a})}}n.stopPropagation()}_itemDragOver(n,e,t,r){if(this._isEnabled&&this._currentDragDropMode===Wr.Static&&this._options.allowDrop){let o=this._getItemElemList();if(o&&t>=0&&t<o.length){let s=this._commonService.getPageRect(o[t]),a={x:s.left,y:s.top,width:s.right-s.left,height:s.bottom-s.top};this._expandOnDelay(e.data),this._processScroll(n),this._isScrollTimerActive||this._processDragOverStatic(n,e.data,a,r)}n.stopPropagation()}}_itemDragDrop(n,e){this._isEnabled&&this._currentDragDropMode===Wr.Static&&(this._processDragDropStatic(n,e.data),n.stopPropagation())}_itemDragEnd(n,e){let t=this._dragDropService.getData(),r={action:n.shiftKey?"copy":"move",dragObj:t.source,dropPos:t.dropPos,event:n,mousePos:this._commonService.getMousePos(n),sourceCtrl:t.sourceCtrl,targetCtrl:this,targetObj:t.target};this._invokeEvent("dragEnd",r),this.updateLayout(),this._clearDragDropSettings(),this._isAnimationInProcess=!1}_updateDropMark(n){let e=this._commonService.getMousePos(n),t=e.y+16,r=e.x-8,o=this._dragItemObj.data[this._options.dataFields.text];this._updateDragComponent({num:this._totalDragItems,top:t,left:r,text:o}),this._dropMark(n,!0,!0)}_windowDragOver(n){if(this._currentDragDropMode===Wr.Dynamic&&this._isDragActive&&this._dragItemObj){let e=this._commonService.getPageRect(this._elemRef),t=this._commonService.getMousePos(n),r=this._commonService.getShiftPos();t.x-=r.x,t.y-=r.y,t.x<e.left||t.x>e.right||t.y<e.top||t.y>e.bottom?this._dragDropService.getData().targetCtrl?this._dropMark(n):this._updateDropMark(n):this._dropMark(n)}}exportToJSON(n,e,t,r){t=t||null,n=n||this.items;let o=e||[this._options.dataFields.allowDrag,this._options.dataFields.allowDrop,this._options.dataFields.allowEdit,this._options.dataFields.allowFocus,this._options.dataFields.autoCheck,this._options.dataFields.canSelect,this._options.dataFields.checkBoxSettings,this._options.dataFields.checked,this._options.dataFields.checkState,this._options.dataFields.childCount,this._options.dataFields.content,this._options.dataFields.contentVisibility,this._options.dataFields.contextMenu,this._options.dataFields.enabled,this._options.dataFields.fixed,this._options.dataFields.fixChildren,this._options.dataFields.group,this._options.dataFields.hasChildren,this._options.dataFields.icon,this._options.dataFields.id,this._options.dataFields.name,this._options.dataFields.radioGroup,this._options.dataFields.selected,this._options.dataFields.showCheckBox,this._options.dataFields.statusIcon,this._options.dataFields.style,this._options.dataFields.templateObj,this._options.dataFields.text,this._options.dataFields.tooltip,this._options.dataFields.value,this._options.dataFields.visible];return JSON.stringify(n,o,t)}filter(n){this._filterParams=n,this._processUpdateLayout(),this._invokeEvent("filtered")}_clearHoverItem(){let n=this;if(n._hoverItem){let e=setTimeout(function(){let t=n._getObjFromScrollItem(n._hoverItem);n._hoverItem=null,n._updateItemStyle(t),clearTimeout(e)},25)}}cloneItem(n){return this._dataService.clone(n)}_createCloneList(n,e){let t=[];return n.map(r=>{let o=this.cloneItem(r);e&&delete o[this._options.dataFields.selected],t.push(o)}),t}_getFilterTree(n){return n?this._filterService.createTree(n.conditions,n.formula):null}_getGroupFromItem(n){let e=this,t=e._currentGroupBy?e._currentGroupBy:e._options.dataFields.group,r=e._currentGroupList.filter(o=>e._isGroupAllowed(o)&&o[e._options.dataFields.name]===n[t]);return r.length>0?r[0]:null}_getObjFromItem(n){return this._getObjFromList(n,this._currentList)}_getObjFromList(n,e){let t=e.filter(r=>n&&r.data===n);return t.length>0?t[0]:null}_getObjFromScrollItem(n){return this._getObjFromList(n,this._scrollItemList)}_getItemCurrentIndex(n){let e=this._getObjFromItem(n);return n&&e&&this._currentList?this._currentList.indexOf(e):-1}_getItemScrollIndex(n){return n&&this._scrollItemList?this._scrollItemList.indexOf(n):-1}_getItemElem(n){let e=this._getObjFromScrollItem(n);if(e){let t=this._getItemElemList(),r=this._getItemScrollIndex(e);if(r>=0&&r<t.length)return t[r]}return null}_getItemContentElem(n){let e=this._getObjFromScrollItem(n);if(e){let t=this._getItemContentElemList(),r=this._getItemScrollIndex(e);if(r>=0&&r<t.length)return t[r]}return null}_getItemElemList(){return this._itemElems?this._itemElems:null}_getItemContentElemList(){return this._itemContentElems?this._itemContentElems:null}getHoverItem(){return this._hoverItem}getList(n,e){let t=[];switch(n){case"current":t=this._currentList;break;case"selected":t=this._currentSelectedItems;break;case"virtual":t=this._scrollItemList?this._scrollItemList.map(r=>r.data):[];break;default:t=this._dataService.getList(e)}return t}getFullList(){return this._fullList}_updateCurrentList(){}updateFullList(){return this._fullList=[...this._dataService.getList()],this._fullList=this._applySorting(this._fullList),this._fullList}getTopItem(){return this.virtualMode!==!1&&this._scrollItemList.length>0?this._scrollItemList[0].data:null}_isChildOf(n,e){return!1}_isThereNoSelectTemplate(n){return this.contentVisibility===Fo.Both&&(!this._isSelectedTemplatePresent||!n[this._options.dataFields.selected])}_isThereHoverTemplate(n){return this._isThereNoSelectTemplate(n)||this.contentVisibility===Fo.Hover}_checkItemHoverVisibility(n){return n[this._options.dataFields.contentVisibility]===void 0||n[this._options.dataFields.contentVisibility]===Fo.Hover||n[this._options.dataFields.contentVisibility]===Fo.Both}_isContentAllowed(n,e){let t=this.contentVisibility===Fo.Both;switch(e){case"hover":t=this._isThereHoverTemplate(n)&&this._checkItemHoverVisibility(n);break;case"select":{let r=t||this.contentVisibility===Fo.Select,o=n[this._options.dataFields.contentVisibility]===void 0||n[this._options.dataFields.contentVisibility]===Fo.Select||n[this._options.dataFields.contentVisibility]===Fo.Both;t=r&&o}break;default:t=this.contentVisibility===Fo.Both}return t}_isGroupAllowed(n){return n[this._options.dataFields.visible]!==!1}_isIndexInRange(n){return this._currentList?n>=0&&n<this._currentList.length:!1}_isItemAllowed(n){if(n[this._options.dataFields.visible]===!1)return!1;if(this._options.allowFilter===!1)return!0;let e=!0;if(n&&this._filterParams){let t=n[this._options.dataFields.value];t=t!==void 0?t:n[this._options.dataFields.text],this._filterParams.callback?e=this._filterParams.callback(t,n):!(e=this._filterService.match(t,this._filterParams.conditions,this._filterParams.caseSensitive,this._filterParams.formula,this._getFilterTree(this._filterParams)))&&this._filterParams.allowParent&&(e=this._filterIsThereChildren(n))}return e}isSeparator(n){return!1}_filterIsThereChildren(n){let e=!1,t=n[this._options.dataFields.items];if(t)for(let r=0;r<t.length&&!(e=this._isItemAllowed(t[r]));r++);return e}_isItemDragged(n){return n?this._dragItemList.filter(e=>e.data===n).length>0:!1}_isItemEnabled(n){return this._isEnabled&&n&&this._commonService.isTrue(n[this._options.dataFields.enabled])}isItemExpanded(n){return n?!!(n[this._options.dataFields.expanded]||n[this._options.dataFields.expanded]===void 0):!0}_isItemHovered(n){return!!(!this._isDragActive&&!this._isScrollTimerActive&&n&&n===this._hoverItem)}_isItemSelected(n){return!!(n&&n[this._options.dataFields.selected]===!0)}_isParentOf(n,e){return!1}_updateItemList(){}beginLoad(n){this._isLoading=!0,this.update();let e=this.shadowRoot.querySelector(".iui-loading-icon");e&&(this._loadIconPos={top:(this._clientRect.height-e.offsetHeight)/2,left:(this._clientRect.width-e.offsetWidth)/2})}endLoad(n){let e=this;e._isLoading=!1,e._isLoadingEnd=!0,e.update(),e._loadingEndTimeout=setTimeout(function(){e._isLoadingEnd=!1,e.update(),clearTimeout(e._loadingEndTimeout)},400)}_getLastItemIndex(){return this._fullList.length-1}getPrevCurrentItem(n){let e=null;if(n){let t=this._currentList,r=this._getItemCurrentIndex(n);(r=r>0?r-1:-1)>=0&&(e=t[r].data)}return e}getPrevItem(n){return this.getPrevObj(n,this._fullList)}getPrevObj(n,e){let t=null;if(n){let r=e.filter(o=>o.visibleOnDrag!==!1).indexOf(n);(r=r>0?r-1:-1)>=0&&(t=e[r])}return t}getNextCurrentItem(n){let e=null;if(n){let t=this._currentList,r=this._getItemCurrentIndex(n);(r=r>=0&&r<t.length-1?r+1:-1)>=0&&(e=t[r].data)}return e}getNextItem(n){return this.getNextObj(n,this._fullList)}getNextObj(n,e){let t=null;if(n){let r=e.indexOf(n);(r=r<e.length-1?r+1:-1)>=0&&(t=e[r])}return t}moveItem(n,e,t,r){return B(this,null,function*(){if(n){let o=-1;switch(e){case ni.At:o=r;break;case ni.Down:t=this.getNextItem(n);break;case ni.First:o=0;break;case ni.Last:this._fullList.length>0&&(t=this._fullList[this._fullList.length-1]);break;case ni.Up:t=this.getPrevItem(n);break;default:o=-1}let s=Array.isArray(n)?n:[n];yield this._moveItemAt(s,t,e,o)}return Promise.resolve()})}_moveItemAt(n,e,t,r){return B(this,null,function*(){let o=this;if(!e){if(t===ni.Before||t===ni.Up)return Promise.resolve();if(t===ni.After||t===ni.Down||t===ni.Last)return Promise.resolve()}o._isUpdateAllowed=!1;let s=n.filter(a=>o._fullList.indexOf(a)>=0);o._getItemCurrentIndex(s[0])>o._getItemCurrentIndex(s[s.length-1])&&(s=s.toReversed());for(let a=0;a<s.length;a++){let l=s[a];yield o.removeItem(l),t===ni.First||t===ni.Right||t===ni.At?yield this.insertItemAt(l,r,e):t===ni.Before||t===ni.Up?yield this.insertItemBefore(l,e):(t===ni.After||t===ni.Left||t===ni.Down||t===ni.Last)&&(yield this.insertItemAfter(l,e))}return o._isUpdateAllowed=!0,o._internalUpdateLayout(),o._invokeEvent("itemMoved",{item:s}),Promise.resolve()})}_getSelectBlockRect(n){let e={left:0,top:"-9999999px",height:0,width:0};return n<this._blockSelectRect.length&&(e={left:this._blockSelectRect[n].left+"px",top:this._blockSelectRect[n].top+"px",height:this._blockSelectRect[n].height+"px",width:this._blockSelectRect[n].width+"px"}),e}_hoverBlockMouseMove(n){this._isEnabled&&!this._isScrollActive&&!this._hoverItem&&this._itemMouseEnter(n,this._hoverItemObj)}_hoverBlockMouseLeave(n){this._isEnabled&&!this._isScrollActive&&this._itemMouseLeave(n,this._hoverItemObj)}_itemMouseEnter(n,e){this._isEnabled&&!this._isDragActive&&!this._isScrollActive&&!this.isSeparator(e.data)&&(this._hoverItem=e.data,this._hoverItemObj=e,this._updateItemStyle(e),this.update(),this._invokeEvent("itemHover",{item:e.data}))}_itemMouseMove(n,e){if(this._isEnabled&&!this._isDragActive&&!this._isScrollActive){this._hoverItem=e.data,this._updateItemStyle(e);let t=this._getItemScrollIndex(e),r=this._getItemElemList();if(r&&t>=0&&t<r.length){let o=this._commonService.getPageRect(this._elemRef),s=this._commonService.getPageRect(r[t]);this._blockHoverRect.top=s.top-o.top-1,this._blockHoverRect.width=this._clientRect.width-2,this.isVerScrollVisible()&&(this._blockHoverRect.width-=16,this._currentScrollAppearance===Mn.Dynamic&&(this._blockHoverRect.width+=7)),this.update()}this._invokeEvent("itemHover",{item:e.data})}}_itemMouseLeave(n,e){this._isEnabled&&!this._isScrollActive&&(this._hoverItem=null,this._updateItemStyle(e),this.update())}_itemGotFocus(n){this._isEnabled&&!this._isScrollActive&&(this.focusedItem=n.data)}_itemLostFocus(n){this.focusedItem=null,this.refresh()}_itemKeyDown(n,e){if(this._isEnabled){let t={cancel:!1,item:e.data,event:n};switch(this._invokeEvent("keyDown",t),n.keyCode){case 9:break;case 13:this._invokeEvent("beforeEdit",t);break;case 27:break;case 33:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processPageUpKey(e));break;case 34:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processPageDownKey(e));break;case 35:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processEndKey(e));break;case 36:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processHomeKey(e));break;case 37:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processLeftArrowKey(e));break;case 32:break;case 38:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processUpArrowKey(e));break;case 39:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processRightArrowKey(e));break;case 40:!t.cancel&&this._options.allowFocus&&(n.preventDefault(),this._isKeyboardActive=!0,this._processDownArrowKey(e));break;default:this._defaultFunc()}}}_itemKeyPress(n,e){if(this._isEnabled){let t={cancel:!1,item:e.data,event:n};this._invokeEvent("keyPress",t)}}_itemKeyUp(n,e){if(this._isEnabled){let t={cancel:!1,item:e.data,event:n};this._invokeEvent("keyUp",t)}}_refreshFocusedItem(n){let e=this;setTimeout(function(){e._currentFocusObj=n,e._updateFocusItem(),e.refresh()},1)}_updateFocusItem(){if(this._options.allowFocus&&this._currentFocusObj){let n=this._getItemContentElem(this._currentFocusObj.data);n&&n.focus()}}_processDownArrowKey(n,e){let t=this._getDownItem(n);if(t){let r=this,o=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(o)},1);this._isLastItem(t)&&this.scrollPos({x:this._currentScrollPos.x,y:this._currentScrollPos.y+2*this._avgItemHeight}),this.focusedItem=t.data,this.refresh()}return t}_processEndKey(n,e){let t=null;if(this._scrollItemList.length>0){this.scrollPos({x:this._currentScrollPos.x,y:this._maxScrollPos.y});let r=this;setTimeout(function(){t=r._scrollItemList[r._scrollItemList.length-1],r.focusedItem=t.data;let o=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(o)},1)},1)}return t}_processHomeKey(n,e){let t=null;if(this._scrollItemList.length>0){this.scrollPos({x:this._currentScrollPos.x,y:0});let r=this;setTimeout(function(){t=r._scrollItemList[0],r.focusedItem=t.data;let o=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(o)},1)},1)}return t}_processLeftArrowKey(n,e){return null}_processPageDownKey(n,e){let t=null;if(this._scrollItemList.length>0){this.scrollPos({x:this._currentScrollPos.x,y:this._currentScrollPos.y+this._avgItemHeight*(this._scrollItemList.length-1)});let r=this;setTimeout(function(){let o=n.index>=0&&n.index<r._scrollItemList.length?n.index:r._scrollItemList.length-1;r._currentScrollPos.y===r._maxScrollPos.y&&(o=r._scrollItemList.length-1),t=r._scrollItemList[o],r.focusedItem=t.data;let s=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(s)},1)},1)}return t}_processPageUpKey(n,e){let t=null;if(this._scrollItemList.length>0){this.scrollPos({x:this._currentScrollPos.x,y:this._currentScrollPos.y-this._avgItemHeight*(this._scrollItemList.length-1)});let r=this;setTimeout(function(){let o=n.index>=0&&n.index<r._scrollItemList.length?n.index:0;r._currentScrollPos.y===0&&(o=0),t=r._scrollItemList[o],r.focusedItem=t.data;let s=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(s)},1)},1)}return t}_processRightArrowKey(n,e){return null}_processUpArrowKey(n,e){let t=this._getUpItem(n);if(t){let r=this,o=setTimeout(function(){r._processSelection(e,t.data),clearTimeout(o)},1);this._isFirstItem(t)&&this.scrollPos({x:this._currentScrollPos.x,y:this._currentScrollPos.y-this._avgItemHeight}),this.focusedItem=t.data,this.refresh()}return t}_getDownItem(n){let e=n.index>=0&&n.index<this._scrollItemList.length-1?n.index+1:-1;return e>=0?this._scrollItemList[e]:null}_getUpItem(n){let e=n.index>0?n.index-1:-1;return e>=0?this._scrollItemList[e]:null}_isFirstItem(n){return n.index===0}_isLastItem(n){return n.index===this._scrollItemList.length-2}moveFocus(n,e){if(!this._options.allowFocus)return null;let t=null,r=this._getObjFromScrollItem(n);if(r)switch(e){case"down":t=this._processDownArrowKey(r);break;case"end":t=this._processEndKey(r);break;case"home":t=this._processHomeKey(r);break;case"left":t=this._processLeftArrowKey(r);break;case"pagedown":t=this._processPageDownKey(r);break;case"pageup":t=this._processPageUpKey(r);break;case"right":t=this._processRightArrowKey(r);break;case"up":t=this._processUpArrowKey(r);break;default:this._defaultFunc()}return t?t.data:null}_windowKeyDown(n){this._isEnabled&&this._isKeyboardActive&&n.preventDefault()}_windowKeyUp(n){this._isKeyboardActive=!1}_checkForSelectionChange(){if(this._currentSelectedItems.length>0){let n=this.getFullList(),e=[];if(this._currentSelectedItems.forEach(t=>{n.filter(r=>this._commonService.isEqual(r[this._options.dataFields.id],t[this._options.dataFields.id])).length===0&&e.push(t)}),e.length>0){let t=[];e.forEach(r=>{r[this._options.dataFields.selected]=!1,t.push(this._currentSelectedItems.indexOf(r))}),this._currentSelection&&e.filter(r=>this._commonService.isEqual(this._currentSelection[this._options.dataFields.id],r[this._options.dataFields.id])).length>0&&(this._currentSelection=null);for(let r=t.length-1;r>=0;r--)this._currentSelectedItems.splice(t[r],1);this._invokeEvent("selectionChanged",{item:this._currentSelection})}}}_getContentSize(){return{width:0,height:0}}_internalUpdateCurrentLayout(){let n=this;n._resetLayoutTimer(),n._updateTimer=setTimeout(function(){n._updateTimer&&n._processUpdateCurrentLayout(),n._resetLayoutTimer()},100)}_processUpdateCurrentLayout(){let n=this;return new Promise(e=>{if(n._isAnimationAllowed||n._isUpdateAllowed){let t=n._currentFocusObj?n._currentFocusObj.data:null;n._currentCtrlSize={width:n._clientRect.width,height:n._clientRect.height},n._updateClientRect(),n._updateCurrentList(),n.updateFullList(),n._updateScrollItemList(),n.update(),n._updateScrollSize(),n._updateBlockSize(),n._updateItemElems(),n._updateCurrentItemSize(),n._updateVisibleRange(),n._updateScrollItemList(),n._currentItemSize.width=n._contentSize.width,n._isAutoSized&&(n._clientRect.height=n._visibleRange*n._avgItemHeight,n._updateCtrlSize(10)),t&&(n.focusedItem=t),n.update(),n._updateItemElems()}e()})}_updateBlockSize(){this._blockSize={width:0,height:0}}_resetAnimationCheckTimer(){this._animationCheckTimer&&clearInterval(this._animationCheckTimer),this._animationCheckTimer=null}_resetLayoutTimer(){this._updateTimer&&clearTimeout(this._updateTimer),this._updateTimer=null}suspendLayout(){this._isUpdateAllowed=!1}resumeLayout(){return B(this,null,function*(){return this._isUpdateAllowed=!0,this.updateLayout()})}_updateCheckState(){}_updateCurrentLayout(n){}_updateItemElems(){this._itemElems=this.shadowRoot.querySelectorAll("li[data-item]"),this._itemContentElems=this.shadowRoot.querySelectorAll("div[data-item-content]")}_internalUpdateLayout(){let n=this;n._resetLayoutTimer(),n._updateTimer=setTimeout(function(){n._updateTimer&&n._processUpdateLayout(),n._resetLayoutTimer()},100)}updateLayout(n){return B(this,null,function*(){let e=this,t=Promise.resolve();return e._animationCheckTimer||(e._animationCheckTimer=setInterval(function(){return B(this,null,function*(){e._isAnimationInProcess||(e._resetAnimationCheckTimer(),t=yield e._processUpdateLayout())})},100)),t})}_processUpdateLayout(){let n=this;return new Promise(e=>{if(n._isUpdateActive=!0,n._isUpdateAllowed){let t=n._currentFocusObj?n._currentFocusObj.data:null;n._stackAdd.length=0,n._stackRemove.length=0,n._updateCurrentList(),n.updateFullList(),n._ctrlPadding=n._commonService.getPadding(n._elemRef),n._currentCtrlSize={width:n._clientRect.width,height:n._clientRect.height},n._updateClientRect(),n._updateScrollItemList(),n.update(),setTimeout(function(){n._updateItemElems(),n._updateVisibleRange(),setTimeout(function(){n._updateItemElems(),n._updateBlockSize(),n._checkForSelectionChange(),n._updateCurrentItemSize(),n._updateCheckState(),n._updateScrollSize(),n._updateVisibleRange(),n._updateScrollItemList(),n.refresh(),n._currentItemSize={width:n._contentSize.width,height:n._avgItemHeight},n._isAutoSized?(n._clientRect.height=n._visibleRange*n._avgItemHeight,n._updateCtrlSize()):n._currentCtrlSize={width:n._clientRect.width,height:n._clientRect.height},n._updateScrollItemPos(),setTimeout(function(){n._updateBlockSize(),t&&(n.focusedItem=t),n._isUpdateActive=!1,n._updateItemElems(),n._updateHoverContentPos(),n._updateSelectContentPos(),n.refresh(),n._invokeEvent("updateComplete"),e()},1)},1)},1)}else e()})}_updateClientRect(){this._ctrlPadding=this._commonService.getPadding(this._elemRef),this._elemRef.clientWidth>0&&this._elemRef.clientHeight>0&&(this._clientRect={width:this._elemRef.clientWidth-(this._ctrlPadding.left+this._ctrlPadding.right),height:this._elemRef.clientHeight-(this._ctrlPadding.top+this._ctrlPadding.bottom)})}_updateCurrentItemSize(){let n=this;n._avgItemHeight=0;let e=n._getItemElemList();if(e&&e.length>0){let t=0;for(let r=0;r<e.length;r++)t+=e[r].offsetHeight;n._avgItemHeight=Math.floor(t/e.length)}n._currentItemSize.height=n._avgItemHeight}_updateScrollSize(){let n=this;n._contentSize={width:n._clientRect.width-2,height:n._clientRect.height-2},n._scrollSize={width:0,height:n._avgItemHeight*n._currentList.length-n._clientRect.height+n._avgItemHeight},n._isDragActive&&(n._scrollSize.height+=n._scrollSizeAddition),n.isVerScrollVisible()&&(n._contentSize.width-=16,n._currentScrollAppearance===Mn.Dynamic&&(n._contentSize.width+=5),n._scrollSize.width>0&&(n._scrollSize.width+=16)),n.isHorScrollVisible()&&(n._scrollSize.height+=16),n._scrollSize.width=Math.max(0,n._scrollSize.width),n._scrollSize.height=Math.max(0,n._scrollSize.height),n._maxScrollPos={x:n._scrollSize.width,y:n._scrollSize.height},n._currentScrollPos.x>n._maxScrollPos.x&&n._changeHorizontalScrollPos(n._maxScrollPos.x),n._currentScrollPos.y>n._maxScrollPos.y&&n._changeVerticalScrollPos(n._maxScrollPos.y),n._scrollBarSize={width:n.isVerScrollVisible()?n._clientRect.width-14:n._clientRect.width,height:n.isHorScrollVisible()?n._clientRect.height-14:n._clientRect.height},n._currentScrollAppearance===Mn.Static?(n._scrollBarSize.width-=4,n._scrollBarSize.height-=4):(n.isVerScrollVisible()&&(n._scrollBarSize.height+=2),n.isHorScrollVisible()&&(n._scrollBarSize.width+=2),n.isVerScrollVisible()&&n.isHorScrollVisible()&&(n._scrollBarSize.width+=5,n._scrollBarSize.height+=5)),n._scrollLargeChange={x:n._scrollBarSize.width,y:n._scrollBarSize.height},n._blockHoverRect={height:n._avgItemHeight-2,left:0,top:-9999999,width:n._clientRect.width-2};let e={height:n._avgItemHeight-2,left:0,top:-9999999,width:n._clientRect.width-2};n.isVerScrollVisible()&&(n._blockHoverRect.width-=16,e.width-=16,n._currentScrollAppearance===Mn.Dynamic&&(n._blockHoverRect.width+=7,e.width+=7)),n._blockSelectRect.forEach(t=>{t.width=e.width,t.height=e.height})}_updateHoverContentPos(){let n=this;if(n._blockHoverRect={height:n._avgItemHeight-2,left:0,top:-9999999,width:n._clientRect.width-2},n._hoverItem&&n._isHoverTemplatePresent){let e=n._getObjFromScrollItem(n._hoverItem),t=n._getItemScrollIndex(e),r=n._getItemElemList();if(r&&t>=0&&t<r.length){let o=n._commonService.getPageRect(n._elemRef),s=n._commonService.getPageRect(r[t]);n._blockHoverRect.top=s.top-o.top-1,n.isVerScrollVisible()&&(n._blockHoverRect.width-=16,n._currentScrollAppearance===Mn.Dynamic&&(n._blockHoverRect.width+=7)),n.update()}}}_updateSelectContentPos(){let n=this;if(n._blockSelectRect.length=0,n._isSelectedTemplatePresent){let e=n._commonService.getPageRect(n._elemRef),t=n._getItemElemList();n._blockSelectHeight=n._avgItemHeight-2,n._currentSelectedItems.forEach(r=>{let o=n._getObjFromScrollItem(r),s=n._getItemScrollIndex(o),a={height:n._blockSelectHeight,left:0,top:-9999999,width:n._clientRect.width-2};n.isVerScrollVisible()&&(a.width-=16);let l=n._commonService.getPageRect(t[s]);t&&s>=0&&s<t.length?a.top=l.top-e.top-1:a.top=-9999999,n._blockSelectRect.push(a)})}}_updateVisibleRange(){if(this._isAutoSized)this._visibleRange=this._currentList.length;else{this._visibleRange=1;let n=this._getItemElemList();if(n&&n.length>0){let e=0;for(let r=0;r<n.length;r++)e+=n[r].offsetHeight;let t=Math.floor(e/n.length);t>0&&(this._visibleRange=Math.floor(this._clientRect.height/t)+1)}}}updateView(){this._currentIndex=this._avgItemHeight>0?Math.floor(this._currentScrollPos.y/this._avgItemHeight):0,this._currentIndex!==this._prevIndex?(this._updateScrollItemList(),this._updateBlockSize(),this._prevIndex=this._currentIndex,this.update(),this._updateItemElems()):this.update(),this._updateHoverContentPos(),this._updateSelectContentPos()}_updateCloneElemPos(n){n.which===1&&this._cloneElem&&(this._cloneElem.style.top=n.pageY-this._cloneElemStartPos.y+"px",this._cloneElem.style.left=n.pageX-this._cloneElemStartPos.x+"px")}_ctrlMouseEnter(n){this._isEnabled&&(n.which===1&&this._cloneElem&&(this._cloneElem.style.display="block"),this.state|=Zi.Hovered,this._currentScrollAppearance===Mn.Dynamic&&(this._isScrollVisible=!0)),this._ctrlCursor="default",this.update()}_ctrlMouseLeave(n){this._isEnabled&&(n.which===1&&this._cloneElem&&(this._cloneElem.style.display="none"),this.state&=~Zi.Hovered,this._currentScrollAppearance===Mn.Dynamic&&(this._resetScrollAppearanceTimeout(),this._isScrollVisible=!!this._isScrollActive)),this._blockHoverRect.top=-9999999,this.update(),this._stopScrollTimer()}_onCtrlMouseMove(n){this._hoverItem||(this._blockHoverRect.top=-9999999,this.update())}_itemMouseDown(n,e){this._isEnabled&&(this._isItemClicked=!0,this._options.allowFocus&&n.which===1&&(this.focusedItem=e.data),e.data.type==="group"&&n.which===1?this.toggle(e.data):this._processSelection(n,e.data),this._prevClickedObj&&(this._prevClickedObj.isClicked=!1),e.isClicked=!0,e.clickPos=this._commonService.getClientPos(n,this._elemRef),this._prevClickedObj=e),n.stopPropagation()}_itemMouseUp(n,e){this._isEnabled&&this._isItemClicked&&this._updateSelection(n,e.data),this._isItemClicked=!1}_onScroll(n){n.target&&(this.virtualMode?(n.target.scrollTop=0,n.target.scrollLeft=0):this.scrollPos({x:n.target.scrollLeft,y:n.target.scrollTop}))}scrollPos(n){return n&&(this._currentScrollPos={x:Math.max(0,Math.min(n.x,this._maxScrollPos.x)),y:Math.max(0,Math.min(n.y,this._maxScrollPos.y))},this.updateView(),this._invokeEvent("scrollPosChanged",{value:this._currentScrollPos,max:this._maxScrollPos})),{x:Math.floor(this._currentScrollPos.x),y:Math.floor(this._currentScrollPos.y)}}_changeHorizontalScrollPos(n){this._currentScrollPos.x=Math.max(0,Math.min(n,this._maxScrollPos.x)),this._currentScrollPos.x!==this._prevScrollPos.x&&(this._invokeEvent("scrollPosChanged",{value:this.scrollPos(),max:this._maxScrollPos}),this._prevScrollPos.x=this._currentScrollPos.x,this.update())}_changeVerticalScrollPos(n){this._currentScrollPos.y=Math.max(0,Math.min(n,this._maxScrollPos.y)),this._currentScrollPos.y!==this._prevScrollPos.y&&(this.updateView(),this._invokeEvent("scrollPosChanged",{value:this.scrollPos(),max:this._maxScrollPos}),this._prevScrollPos.y=this._currentScrollPos.y)}_processMouseWheel(n,e){if(this._isEnabled){this._hoverItem=null,this._isMouseWheelActive=!0;let t=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail)),r=5;switch(this._mouseWheelSpeed){case us.VerySlow:r=15;break;case us.Slow:r=9;break;case us.Fast:r=3;break;case us.VeryFast:r=1;break;default:r=5}if(n.preventDefault(),this.isVerScrollVisible()){let o=Math.floor(this._clientRect.height/r);this._mouseWheelSpeed===us.VerySlow&&this._avgItemHeight>0&&(o=this._avgItemHeight);let s=this._currentScrollPos.y+o*t*-1;t>0&&s<=this._avgItemHeight&&(s=0),this._changeVerticalScrollPos(s)}else if(e&&this.isHorScrollVisible()){let o=Math.floor(this._clientRect.width/r),s=this._currentScrollPos.x+o*t*-1;this._changeHorizontalScrollPos(s)}n.stopPropagation(),this._isMouseWheelActive=!1}}isVerScrollVisible(){return!!(!this._isAutoSized&&this._options.showScroll.vertical&&this._scrollSize.height>0)}isHorScrollVisible(){return!!(this._options.showScroll.horizontal&&this._scrollSize.width>0)}isScrolling(){return this._isScrollActive}_onVerticalScrollStart(n){this._hoverItem=null,this._isScrollActive=!0}_onVerticalScrollEnd(n){this._isScrollActive=!1,this._updateScrollAppearance(n.detail.event)}_onVerticalScrollChanged(n){this._isMouseWheelActive||this._changeVerticalScrollPos(n.detail.value)}_onHorizontalScrollStart(n){this._hoverItem=null,this._isScrollActive=!0}_onHorizontalScrollEnd(n){this._isScrollActive=!1}_onHorizontalScrollChanged(n){this._currentScrollPos.x=n.detail.value,this._invokeEvent("scrollPosChanged",{value:this.scrollPos(),max:this._maxScrollPos}),this.update()}_scrollMouseEnter(n){this._blockHoverRect.top=-9999999,this.update()}_processScroll(n){if(this.isVerScrollVisible()){let e=this._commonService.getShiftPos(),t=this._commonService.getMousePos(n);t.x-=e.x,t.y-=e.y;let r=this._commonService.getPageRect(this._elemRef),o=r.top+25,s=r.bottom-25;if(this.isHorScrollVisible()&&(s-=16),this._currentDragDropMode===Wr.Static)t.y<o&&this._currentScrollPos.y>0?this._startScrollTimer(!1):t.y>s&&this._currentScrollPos.y<this._maxScrollPos.y?this._startScrollTimer(!0):this._stopScrollTimer();else{let a=this._commonService.getPageRect(this._elemRef);a.y+this._dragListPos.top<o&&this._currentScrollPos.y>0?this._startScrollTimer(!1):a.y+this._dragListPos.top+this._dragListSize.height>s&&this._currentScrollPos.y<this._maxScrollPos.y?this._startScrollTimer(!0):this._stopScrollTimer()}}else this._stopScrollTimer()}_resetScrollAppearanceTimeout(){this._scrollAppearanceTimeout&&clearTimeout(this._scrollAppearanceTimeout),this._scrollAppearanceTimeout=null}_startScrollTimer(n,e){let t=this;if(t._removeDropMark(),!t._isScrollTimerActive){t._accelerator=.5,t._scrollCount=0,t._isScrollTimerActive=!0;let r=e||100;t._scrollTimerID||(t._scrollTimerID=setInterval(function(){t._scrollTimerElapsed(n)},r))}}_stopScrollTimer(){this._scrollTimerID&&(clearInterval(this._scrollTimerID),this._scrollTimerID=null),this._accelerator=.5,this._scrollCount=0,this._isScrollTimerActive=!1}_scrollTimerElapsed(n){let e=this._currentScrollPos;this._scrollCount===0&&(this._scrollCount=5),this._scrollCount+=5,this._accelerator+=.5,this._scrollCount+=Math.floor(this._accelerator);let t=this._scrollCount;n?this._currentScrollPos.y+t>this._maxScrollPos.y?this._currentScrollPos.y=this._maxScrollPos.y:this._currentScrollPos.y+=t:this._currentScrollPos.y-t<0?this._currentScrollPos.y=0:this._currentScrollPos.y-=t,(e.y<=0||this._currentScrollPos.y<e.y)&&this._stopScrollTimer(),this.update()}scrollTo(n,e){if(this.virtualMode!==!1&&n){let t=this._getItemCurrentIndex(n);t>=0&&this.scrollPos({x:this._currentScrollPos.x,y:e!==void 0?this._avgItemHeight*(t-e):this._avgItemHeight*(t+1-Math.floor(this._visibleRange/2))}),this._processUpdateLayout()}}_updateScrollAppearance(n){let e=this;e._resetScrollAppearanceTimeout(),e._scrollAppearanceTimeout=setTimeout(function(){let t=e._commonService.getPageRect(e._elemRef),r=e._commonService.getMousePos(n),o=e._commonService.getShiftPos();r.x-=o.x,r.y-=o.y;let s=r.x<t.left||r.x>t.right||r.y<t.top||r.y>t.bottom;e._isScrollVisible=!s,e.update()},100)}findItemById(n){return this._dataService.findObjectById(n)}findItemByText(n){return this._dataService.findObjectByText(n)}_callAfterSelectEvent(n){let e={item:n};this._invokeEvent("afterSelect",e),this._invokeEvent("selectionChanged",e)}_clearAllSelection(){let n=this._fullList;n&&(n.forEach(e=>e[this._options.dataFields.selected]=!1),this._currentSelection=null,this._currentSelectedItems.length=0)}clearSelection(){this._clearPrevSelection(),this._currentSelection=null,this._updateSelectContentPos(),this.refresh()}_clearComponentSelection(){this._itemList.forEach(n=>n.state&=~Zi.Selected)}_clearPrevSelection(n){for(let e=0;e<this._currentSelectedItems.length;e++)n&&!this._commonService.isEqual(this._currentSelectedItems[e][this._options.dataFields.id],n[this._options.dataFields.id])?this._currentSelectedItems[e][this._options.dataFields.selected]=!1:n||(this._currentSelectedItems[e][this._options.dataFields.selected]=!1);this._currentSelectedItems.length=0,n&&this._isItemEnabled(n)&&this._currentSelectedItems.push(n)}_isItemInSelectionList(n){let e=!1,t=this._currentSelectedItems;if(n&&t){for(let r=0;r<t.length;r++)if(this._commonService.isEqual(t[r][this._options.dataFields.id],n[this._options.dataFields.id])){e=!0;break}}return e}_isCtrlKeyPressed(n){return n&&(n.ctrlKey||n.metaKey)}_isShiftKeyPressed(n){return n&&n.shiftKey}_processSelection(n,e,t){let r=this,o=!0;if(e){if(r.selectionMode===br.None||e.type==="group"||e[r._options.dataFields.canSelect]===!1)return;let s=r._currentSelectedItems.length>0;if(!r._isItemEnabled(e))r._clearPrevSelection(),r.refresh(),s&&this._invokeEvent("selectionChanged",{item:null});else{let a=r._currentSelection,l=!0;a&&(l=this._isCtrlKeyPressed(n)||!this._commonService.isEqual(a[r._options.dataFields.id],e[r._options.dataFields.id])||a[r._options.dataFields.selected]===!1);let c={cancel:!1,item:e};if(r._invokeEvent("beforeSelect",c),o=c.cancel!==!0,c.cancel!==!0){let d=!!(n&&(n.shiftKey||n.ctrlKey||n.metaKey));if(l){if(r.selectionMode===br.MultiExtended&&(l=!r._isItemInSelectionList(e)||!d||this._isShiftKeyPressed(n)),l&&(r.selectionMode===br.One||n&&n.shiftKey||!d&&r.selectionMode!==br.MultiSimple&&(r._currentSelectedItems.length===1||!r._isItemInSelectionList(e)))&&r._clearPrevSelection(),r._currentSelection=e,n&&n.shiftKey&&r.selectionMode!==br.One){r._shiftFirstSelectedItem||(r._shiftFirstSelectedItem=a);let h=r._getItemCurrentIndex(r._shiftFirstSelectedItem),_=r._getItemCurrentIndex(e);if(h>_){let C=h;h=_,_=C}if(r._isIndexInRange(h)&&r._isIndexInRange(_))for(let C=h;C<=_;C++)r._currentList[C].data.type!=="group"&&r._currentList[C].data[r._options.dataFields.canSelect]!==!1&&(r._currentList[C].data[r._options.dataFields.selected]=!0,r._currentSelectedItems.push(r._currentList[C].data))}else if(d||r.selectionMode===br.MultiSimple){let h=e[r._options.dataFields.selected]===null||e[r._options.dataFields.selected]==="undefined"?!1:e[r._options.dataFields.selected];e[r._options.dataFields.selected]=!h,e[r._options.dataFields.selected]?r._isItemInSelectionList(e)||r._currentSelectedItems.push(e):r._currentSelectedItems=r._currentSelectedItems.filter(function(_){return _!==e}),r._shiftFirstSelectedItem=null}else e[r._options.dataFields.selected]=!0,r._isItemInSelectionList(e)||r._currentSelectedItems.push(e),r._shiftFirstSelectedItem=null;r._callAfterSelectEvent(e),r.refresh()}else if(d||r.selectionMode===br.MultiSimple){let h=e[r._options.dataFields.selected]===null||e[r._options.dataFields.selected]==="undefined"?!1:e[r._options.dataFields.selected];t&&t!=="undefined"&&(h=t),e[r._options.dataFields.selected]=!h,e[r._options.dataFields.selected]?r._isItemInSelectionList(e)||r._currentSelectedItems.push(e):r._currentSelectedItems=r._currentSelectedItems.filter(function(_){return _!==e}),r._shiftFirstSelectedItem=null,r._callAfterSelectEvent(e),r.refresh()}else!d&&!(r.selectionMode&br.MultiSimple)&&(r._currentSelectedItems.length===1||!r._isItemInSelectionList(e))&&(r._shiftFirstSelectedItem=null,r._clearPrevSelection(e),r.refresh(),l&&s&&r._invokeEvent("selectionChanged",{item:null}));r._updateSelectContentPos()}}}return o}selectItems(n){if(n&&Array.isArray(n)){this._currentSelectedItems.map(e=>e[this._options.dataFields.selected]=!1),this._currentSelectedItems.length=0;for(let e=0;e<n.length;e++)n[e][this._options.dataFields.selected]=!0,this._currentSelectedItems.push(n[e]);n.length>0?(this._currentSelection=n[n.length-1],this._callAfterSelectEvent(this._currentSelection)):this._currentSelection=null,this.refresh()}}_updateSelection(n,e){let t=!!(n&&(n.shiftKey||n.ctrlKey||n.metaKey));if(this.selectionMode===br.MultiExtended&&e[this._options.dataFields.canSelect]!==!1&&this._currentSelectedItems.length>0&&!n.shiftKey&&!t&&n.which===1){let r=this._currentSelectedItems.length;this._clearPrevSelection(),e[this._options.dataFields.selected]=!0,this._currentSelectedItems.push(e),this._updateSelectContentPos(),r>1&&this._callAfterSelectEvent(e),this.refresh()}}_applySorting(n){let e=this;return Array.isArray(n)&&(n=[...n])&&(e._sortComparer?n.sort(e._sortComparer):e._isSortingAllowed()&&n.sort(function(t,r){let o=null,s=null;switch((o=t[e._options.dataFields.value])||(o=t.type==="group"?t[e._options.dataFields.name]:t[e._options.dataFields.text]),e._commonService.isObject(o)&&(o=o.value?o.value:o.text),(s=r[e._options.dataFields.value])||(s=r.type==="group"?r[e._options.dataFields.name]:r[e._options.dataFields.text]),e._commonService.isObject(s)&&(s=s.value?s.value:s.text),o=o!==void 0?o:null,s=s!==void 0?s:null,e._currentSorting){case ml.Ascending:if(o<s)return-1;if(o>s)return 1;break;case ml.Descending:if(o>s)return-1;if(o<s)return 1;break;default:return 0}return 0})),n}_isSortingAllowed(){return this._currentSorting===ml.Ascending||this._currentSorting===ml.Descending}sort(n,e){this._currentSorting=n,this._sortComparer=e||null,this._processUpdateLayout(),this._invokeEvent("sorted")}_getDragListClass(){return this._dragListClass={"iui-draglist":!0},this._isDragActive&&(this._dragListClass["iui-draglist-active"]=!0),this._dragListClass}_getItemInlineStyle(n){return n?n.data[this._options.dataFields.style]||{}:{}}_getScrollCornerClass(){let n={};return n[this._scrollCornerClassName]=!0,this._currentScrollAppearance===Mn.Dynamic&&(n[this._scrollCornerClassName+"-dynamic"]=!0),this._isEnabled||(n[this._scrollCornerClassName+"-disabled"]=!0),n}refresh(){this._updateControlClass(),this._scrollItemList.forEach(n=>this._updateItemStyle(n)),this.update(),this._updateReferences()}_updateItemStyle(n){if(n){n.style={expandBox:{},general:{},content:{}},n.inlineStyle=this._getItemInlineStyle(n),n.data.type==="group"?(n.style.general[this._groupClassName]=!0,n.style.general[this._options.currentStyle.group.general.normal]=!0,n.style.content[this._groupContentClassName]=!0,n.style.content[this._options.currentStyle.group.content.normal]=!0,this._isItemEnabled(n.data)||(n.style.general[this._options.currentStyle.group.general.disabled]=!0,n.style.content[this._options.currentStyle.group.content.disabled]=!0),this._options.allowFocus&&this._currentFocusObj&&n.data===this._currentFocusObj.data&&(n.style.general[this._options.currentStyle.group.general.focused]=!0,n.style.content[this._options.currentStyle.group.content.focused]=!0),n.style.expandBox[this._options.currentStyle.group.expandBox.general]=!0,n.data[this._options.dataFields.expanded]!==!1?n.style.expandBox[this._options.currentStyle.group.expandBox.expanded]=!0:n.style.expandBox[this._options.currentStyle.group.expandBox.collapsed]=!0):(n.style.general[this._itemClassName]=!0,n.style.general[this._options.currentStyle.item.general.normal]=!0,n.style.content[this._itemContentClassName]=!0,n.style.content[this._options.currentStyle.item.content.normal]=!0,this._isItemEnabled(n.data)?this._isItemSelected(n.data)?(n.style.general[this._options.currentStyle.item.general.selected]=!0,n.style.content[this._options.currentStyle.item.content.selected]=!0):this._isItemHovered(n.data)&&(n.style.general[this._options.currentStyle.item.general.hovered]=!0,n.style.content[this._options.currentStyle.item.content.hovered]=!0):(n.style.general[this._options.currentStyle.item.general.disabled]=!0,n.style.content[this._options.currentStyle.item.content.disabled]=!0),this._options.allowFocus&&this._currentFocusObj&&n.data===this._currentFocusObj.data&&(n.style.general[this._options.currentStyle.item.general.focused]=!0,n.style.content[this._options.currentStyle.item.content.focused]=!0));let e=this._getObjFromItem(n.data);e&&(e.style=n.style,e.inlineStyle=n.inlineStyle)}}_getItemStyle(n){return n?{general:this._getItemGeneralStyle(n.general),content:this._getItemContentStyle(n.content)}:this._getDefaultItemStyle()}_getItemGeneralStyle(n){return this._commonService.isString(n)?n:n?{disabled:this._commonService.isFieldAvailable(n.disabled,this._itemClassName+"-disabled"),focused:this._commonService.isFieldAvailable(n.focused,this._itemClassName+"-focused"),normal:this._commonService.isFieldAvailable(n.normal,this._itemClassName),hovered:this._commonService.isFieldAvailable(n.hovered,this._itemClassName+"-hovered"),selected:this._commonService.isFieldAvailable(n.selected,this._itemClassName+"-selected")}:this._getDefaultItemGeneralStyle()}_getItemContentStyle(n){return this._commonService.isString(n)?n:n?{disabled:this._commonService.isFieldAvailable(n.disabled,this._itemContentClassName+"-disabled"),focused:this._commonService.isFieldAvailable(n.focused,this._itemContentClassName+"-focused"),normal:this._commonService.isFieldAvailable(n.normal,this._itemContentClassName),hovered:this._commonService.isFieldAvailable(n.hovered,this._itemContentClassName+"-hovered"),selected:this._commonService.isFieldAvailable(n.selected,this._itemContentClassName+"-selected")}:this._getDefaultItemContentStyle()}_getDefaultListStyle(){return{general:this._getDefaultGeneralStyle(),group:this._getDefaultGroupStyle(),item:this._getDefaultItemStyle()}}_getDefaultGroupStyle(){return{expandBox:this._getDefaultGroupExpandBoxStyle(),general:this._getDefaultGroupGeneralStyle(),content:this._getDefaultGroupContentStyle()}}_getDefaultGroupExpandBoxStyle(){return{general:this._defaultStyle.group.expandBox.general,expanded:this._defaultStyle.group.expandBox.expanded,collapsed:this._defaultStyle.group.expandBox.collapsed}}_getDefaultGroupGeneralStyle(){return{disabled:this._defaultStyle.group.general.disabled,focused:this._defaultStyle.group.general.focused,normal:this._defaultStyle.group.general.normal,hovered:this._defaultStyle.group.general.hovered,selected:this._defaultStyle.group.general.selected}}_getDefaultGroupContentStyle(){return{disabled:this._defaultStyle.group.content.disabled,focused:this._defaultStyle.group.content.focused,normal:this._defaultStyle.group.content.normal,hovered:this._defaultStyle.group.content.hovered,selected:this._defaultStyle.group.content.selected}}_getDefaultItemStyle(){return{general:this._getDefaultItemGeneralStyle(),content:this._getDefaultItemContentStyle()}}_getDefaultItemGeneralStyle(){return{disabled:this._defaultStyle.item.general.disabled,focused:this._defaultStyle.item.general.focused,normal:this._defaultStyle.item.general.normal,hovered:this._defaultStyle.item.general.hovered,selected:this._defaultStyle.item.general.selected}}_getDefaultItemContentStyle(){return{disabled:this._defaultStyle.item.content.disabled,focused:this._defaultStyle.item.content.focused,normal:this._defaultStyle.item.content.normal,hovered:this._defaultStyle.item.content.hovered,selected:this._defaultStyle.item.content.selected}}_updateStyle(n){this._options.currentStyle=this._getDefaultListStyle()}_getItemTemplate(n,e){let t=null,r=null;if(n.type==="group")t=this.itemTemplate;else switch(e){case"hover":t=this.itemHoverTemplate;break;case"select":t=this.itemSelectTemplate;break;default:t=this.itemTemplate}if(t){let o=t(n,this._getItemCurrentIndex(n));o&&(r=new Hl(o.strings,o.values,"html",Fh))}if(!r){let o={},s=this._commonService.isString(n[this._options.dataFields.icon])?n[this._options.dataFields.icon].split(" "):[];s.map(l=>o[l]=!0);let a=n.type==="group"?n[this._options.dataFields.name]:n[this._options.dataFields.text];return Ke`                 ${s.length>0?Ke`<span class=${Ln(o)}></span>`:Ke``}                 ${n[this._options.dataFields.iconUrl]?Ke`<img style=${sn({verticalAlign:"middle"})} src="${n[this._options.dataFields.iconUrl]} />`:Ke``}                 <span class="iui-item-label">${a}</span>             `}return r}_itemTouchStart(n,e){this._isEnabled&&(this._options.allowFocus&&n.which===1&&(this.focusedItem=e.data),this._processSelection(n,e.data))}_itemTouchMove(n,e){}_itemTouchEnd(n,e){}_ctrlTouchStart(n){if(n.preventDefault(),this._isEnabled){let e=this._commonService.getTouchData(n);e&&e.length>0&&(this._touchStartPos={x:e[0].pageX,y:e[0].pageY})}}_ctrlTouchEnd(n){let e=this;if(e._isEnabled){let t=e._commonService.getTouchData(n);t&&t.length>0&&(e._touchEndPos={x:t[0].pageX,y:t[0].pageY});let r={dx:e._touchEndPos.x-e._touchStartPos.x,dy:e._touchEndPos.y-e._touchStartPos.y},o=!1,s=!1,a=e._touchStartPos,l={x:e._currentScrollPos.x,y:e._currentScrollPos.y},c=setInterval(function(){let d=e._currentScrollPos;r.dx<-20?(a.x-=30,a.x>e._touchEndPos.x?d.x+=30:(d.x=l.x-r.dx,o=!0)):r.dx>20?(a.x+=30,a.x<e._touchEndPos.x?d.x-=30:(d.x=l.x-r.dx,o=!0)):o=!0,r.dy<-20?(a.y-=25,a.y>e._touchEndPos.y?d.y+=25:(d.y=l.y-r.dy,s=!0)):r.dy>20?(a.y+=25,a.y<e._touchEndPos.y?d.y-=25:(d.y=l.y-r.dy,s=!0)):s=!0,e.scrollPos(d),o&&s&&clearInterval(c)},5);e._touchStartPos=e._touchEndPos}}resolve(n){if(this._isProcessAllowed=!0,this._commonService.isString(n))switch(n.toLowerCase()){case"dragdrop":this._drop(this._dragDropService.getData());break;default:this._defaultFunc()}}},$z=pk;var Sg=Be`
    .iui-scrollbar {
        background: var(--iui-scrollbar-background, #f5f5f5);
        border: var(--iui-scrollbar-border, 0);
        border-color:  var(--iui-scrollbar-border-color, #f5f5f5);
        border-radius: var(--iui-scrollbar-border-radius, 1px);
        border-width: var(--iui-scrollbar-border-width, thin);
        cursor: var(--iui-scrollbar-cursor, default);
        display: var(--iui-scrollbar-display, block);
        height: var(--iui-scrollbar-height, auto);
        margin: var(--iui-scrollbar-margin, 0);
        opacity: var(--iui-scrollbar-opacity, 0);
        overflow: hidden;
        padding: var(--iui-scrollbar-padding, 2px);
        position: var(--iui-scrollbar-position, absolute);
        width: var(--iui-scrollbar-width, auto);
        z-index: var(--iui-scrollbar-z-index, 99);

        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .iui-scrollbar-enter {
        opacity: var(--iui-scrollbar-enter-opacity, 1);
        transition: opacity 0.4s ease-in-out;
    }
    .iui-scrollbar-leave {
        opacity: var(--iui-scrollbar-opacity, 0);
        transition: opacity 1s ease-in-out;
    }
    .iui-scrollbar-vertical {
        border-left: var(--iui-scrollbar-vertical-border-left, thin solid #f5f5f5);
        display: var(--iui-scrollbar-vertical-display, block);
        top: 0;
        width: var(--iui-scrollbar-vertical-width, 11px);
    }
    .iui-scrollbar-horizontal {
        border-top: var(--iui-scrollbar-horizontal-border-top, thin solid #f5f5f5);
        bottom: 0;
        display: var(--iui-scrollbar-horizontal-display, block);
        height: var(--iui-scrollbar-horizontal-height, 11px);
    }
    
    /* ScrollBar Thumb */
    .iui-scrollbar-thumb {
        background: var(--iui-scrollbar-thumb-background, #e5e5e5);
        border: var(--iui-scrollbar-thumb-border, thin solid #d5d5d5);
        border-color: var(--iui-scrollbar-thumb-border-color, #d5d5d5);
        border-radius: var(--iui-scrollbar-thumb-border-radius, 2px);
        position: absolute;
        transition: background 0.25s ease-in-out, border 0.25s ease-in-out;
        z-index: var(--iui-scrollbar-thumb-z-index, 99);
    }
    .iui-scrollbar-thumb-hovered {
        background: var(--iui-scrollbar-thumb-hovered-background, #d5d5d5);
        border: var(--iui-scrollbar-thumb-hovered-border, thin solid #c5c5c5);
        border-color: var(--iui-scrollbar-thumb-hovered-border-color, #c5c5c5);
    }
    .iui-scrollbar-thumb-selected {
        background: var(--iui-scrollbar-thumb-selected-background, #c5c5c5);
        border: var(--iui-scrollbar-thumb-selected-border, thin solid #b5b5b5);
        border-color: var(--iui-scrollbar-thumb-selected-border-color, #b5b5b5);
    }
    .iui-scrollbar-thumb-vertical {
        top: 2px;
        width: var(--iui-scrollbar-thumb-vertical-width, 9px);
    }
    .iui-scrollbar-thumb-horizontal {
        left: 2px;
        height: var(--iui-scrollbar-thumb-height, 9px);
    }
    
    /* ScrollBar Dynamic */
    .iui-scrollbar-dynamic {
        background: var(--iui-scrollbar-dynamic-background, transparent);
        border-color:  var(--iui-scrollbar-dynamic-border-color, transparent);
        border-left: var(--iui-scrollbar-dynamic-border-left, 0);
        border-top: var(--iui-scrollbar-dynamic-border-top, 0);
        padding: var(--iui-scrollbar-dynamic-padding, 0);
        opacity: var(--iui-scrollbar-opacity, 0.8);
    }
    .iui-scrollbar-dynamic-enter {
        opacity: var(--iui-scrollbar-enter-opacity, 0.8);
    }
    .iui-scrollbar-dynamic-leave {
        opacity: var(--iui-scrollbar-opacity, 0);
    }
    .iui-scrollbar-dynamic-vertical {
        width: var(--iui-scrollbar-vertical-width, 9px);
    }
    .iui-scrollbar-dynamic-horizontal {
        height: var(--iui-scrollbar-vertical-height, 9px);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-vertical {
        top: 0;
        width: var(--iui-scrollbar-thumb-width, 7px);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-horizontal {
        left: 0;
        height: var(--iui-scrollbar-thumb-height, 7px);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb {
        border-color: var(--iui-scrollbar-thumb-border-color, #e5e5e5);
        border-radius: var(--iui-scrollbar-thumb-border-radius, 0);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-hovered {
        border-color: var(--iui-scrollbar-thumb-hovered-border-color, #d5d5d5);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-selected {
        border-color: var(--iui-scrollbar-thumb-selected-border-color, #c5c5c5);
    }

    /* ScrollBar Corer */
    .iui-scrollbar-corner {
        background: var(--iui-scrollbar-corner-background, #f5f5f5);
        bottom: 0;
        cursor: var(--iui-scrollbar-corner-cursor, default);
        height: var(--iui-scrollbar-corner-height, 16px);
        margin: 0;
        padding: 0;
        position: absolute;
        right: 0;
        width: var(--iui-scrollbar-corner-width, 16px);
        z-index: var(--iui-scrollbar-corner-z-index, 99);

        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .iui-scrollbar-corner-dynamic {
        background: var(--iui-scrollbar-corner-dynamic-background, transparent);
        height: var(--iui-scrollbar-corner-height, 9px);
        width: var(--iui-scrollbar-corner-width, 9px);
    }

    /* Disabled State */
    .iui-scrollbar-disabled div, .iui-scrollbar-thumb-disabled, .iui-scrollbar-corner-disabled {
        opacity: var(--iui-scrollbar-disabled-opacity, 0.75);
        pointer-events: none;
    }
`;var QS=Be`
`;var UC=Be`
    .iui-scrollbar {
        background: var(--iui-scrollbar-background, #1e1e1e);
        border-color: var(--iui-scrollbar-border-color, #151515);
    } 
    .iui-scrollbar-thumb {
        background: var(--iui-scrollbar-thumb-background, #404040);
        border-color: var(--iui-scrollbar-thumb-border-color, #404040);
    }
    .iui-scrollbar-thumb-hovered {
        background: var(--iui-scrollbar-thumb-hovered-background, #515151);
        border-color: var(--iui-scrollbar-thumb-hovered-border-color, #515151);
    }
    .iui-scrollbar-thumb-selected {
        background: var(--iui-scrollbar-thumb-selected-background, #626262);
        border-color: var(--iui-scrollbar-thumb-selected-border-color, #626262);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb {
        border-color: var(--iui-scrollbar-thumb-border-color, #484848);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-hovered {
        border-color: var(--iui-scrollbar-thumb-hovered-border-color, #646464);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-selected {
        border-color: var(--iui-scrollbar-thumb-selected-border-color, #808080);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb {
        background: var(--iui-scrollbar-thumb-background, #484848);
        border-color: var(--iui-scrollbar-thumb-border-color, #484848);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-hovered {
        background: var(--iui-scrollbar-thumb-hovered-background, #646464);
        border-color: var(--iui-scrollbar-thumb-hovered-border-color, #646464);
    }
    .iui-scrollbar-dynamic .iui-scrollbar-thumb-selected {
        background: var(--iui-scrollbar-thumb-selected-background, #808080);
        border-color: var(--iui-scrollbar-thumb-selected-border-color, #808080);
    }

    .iui-scrollbar-corner {
        background: var(--iui-scrollbar-corner-background, #1e1e1e);
    }
`;var ZS=Be`
`;var uk=class extends pu{_init(){super._init(),this._currentMaxValue=0,this._currentMinValue=0,this._currentValue=0,this._currentAppearance=Mn.Static,this._isVisible=!0,this._currentSplitterDistance={x:0,y:0},this._emptySpace=0,this._maxPos={x:0,y:0},this._currentOrientation=Vr.Vertical,this._scrollPos={top:0,right:0,bottom:0,left:0},this._scrollSize={width:0,height:0},this._thumbSize={width:0,height:0},this._thumbPos={x:2,y:2},this._isThumbActive=!1,this._prevPos={x:0,y:0},this._smallChange=0,this._largeChangeValue=0,this._scrollInterval=null,this._scrollTimeout=null,this._thumbStartPos={x:0,y:0},this._generalClassName="iui-scrollbar",this._isThumbHovered=!1,this._thumbClass={},this._thumbClassName=this._generalClassName+"-thumb"}connectedCallback(){super.connectedCallback(),this._windowMouseMove=this._windowMouseMove.bind(this),window.addEventListener("mousemove",this._windowMouseMove),this._windowMouseUp=this._windowMouseUp.bind(this),window.addEventListener("mouseup",this._windowMouseUp)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("mousemove",this._windowMouseMove),window.removeEventListener("mouseup",this._windowMouseUp),this._clearScrollTimers()}static get properties(){return{appearance:{converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="dynamic"?Mn.Dynamic:Mn.Static,toAttribute:(n,e)=>n===Vr.Dynamic?"Dynamic":"Static"},reflect:!0},height:{type:Number},largeChange:{type:Number,attribute:"large-change"},max:{type:Number,reflect:!0},min:{type:Number,reflect:!0},orientation:{converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="horizontal"?Vr.Horizontal:Vr.Vertical,toAttribute:(n,e)=>n===Vr.Horizontal?"Horizontal":"Vertical"},reflect:!0},position:{type:Object},value:{type:Number,reflect:!0},width:{type:Number}}}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}get appearance(){return this._currentAppearance}set appearance(n){if(this._currentAppearance!==n){let e=this._currentAppearance;this._currentAppearance=n,this.visible=this._currentAppearance!==Mn.Dynamic,this.requestUpdate("appearance",e)}}set height(n){if(this._scrollSize.height!==n&&n>=0){let e=this._scrollSize.height;this._scrollSize.height=n,this.requestUpdate("height",e),this.updateLayout()}}set largeChange(n){if(this._largeChangeValue!==n&&n>=0){let e=this._largeChangeValue;this._largeChangeValue=n,this.requestUpdate("largeChange",e)}}get max(){return this._currentMaxValue}set max(n){if(this._currentMaxValue!==n){let e=this._currentMaxValue;n<=0?this._currentMaxValue=1:this._currentMaxValue=n,this._currentValue>this._currentMaxValue&&(this._currentValue=this._currentMaxValue),this.requestUpdate("max",e),this.updateLayout()}}get min(){return this._currentMinValue}set min(n){if(this._currentMinValue!==n&&n>=0){let e=this._currentMinValue;this._currentMinValue=n,this.requestUpdate("min",e),this.updateLayout()}}get orientation(){return this._currentOrientation}set orientation(n){if(this._currentOrientation!==n){let e=this._currentOrientation;this._currentOrientation=n,this.requestUpdate("orientation",e),this.updateLayout()}}set position(n){let e=this._scrollPos;n!==void 0?this._scrollPos={top:this._commonService.isFieldAvailable(n.top,0),right:this._commonService.isFieldAvailable(n.right,0),bottom:this._commonService.isFieldAvailable(n.bottom,0),left:this._commonService.isFieldAvailable(n.left,0)}:this._scrollPos={top:0,right:0,bottom:0,left:0},this.requestUpdate("position",e)}get value(){return this._currentValue}set value(n){if(this._currentValue!==n){let e=this._currentValue;n<this._currentMinValue?this._currentValue=this._currentMinValue:n>this._currentMaxValue?this._currentValue=this._currentMaxValue:this._currentValue=n,this.requestUpdate("value",e),this.updateLayout(),this._invokeEvent("valueChanged",{value:this._currentValue})}}get visible(){return this._isVisible}set visible(n){if(n!==void 0&&this._isVisible!==n){let e=this._isVisible;this._isVisible=this._currentAppearance===Mn.Dynamic?n:!0,this.requestUpdate("visible",e),this._updateVisibility()}}set width(n){this._scrollSize.width!==n&&n>=0&&(this._scrollSize.width=n,this.updateLayout())}_thumbMouseEnter(n){this._isThumbHovered=!0,this.refresh()}_thumbMouseLeave(n){this._isThumbHovered=!1,this.refresh()}_thumbMouseDown(n){if(this._isEnabled){this.state|=Zi.Selected;let e=this._commonService.getShiftPos(),t={x:n.pageX-e.x,y:n.pageY-e.y};this._thumbStartPos=t,this._isThumbActive=!0,this.prevPos={x:this.value,y:this.value},this._invokeEvent("scrollStart",{event:n,value:this._currentValue})}this._invokeEvent("scrollMouseDown"),n.stopPropagation()}_windowMouseMove(n){if(this._isEnabled&&n.which===1&&this._isThumbActive){let e=this._commonService.getShiftPos(),t={x:n.pageX-e.x,y:n.pageY-e.y},r=0;this.orientation===Vr.Horizontal?this._emptySpace>0&&(r=this.prevPos.x+(t.x-this._thumbStartPos.x)*this._currentMaxValue/this._emptySpace):this._emptySpace>0&&(r=this.prevPos.y+(t.y-this._thumbStartPos.y)*this._currentMaxValue/this._emptySpace),this.value=r}}_windowMouseUp(n){this._isEnabled&&(this._isThumbActive=!1,this._prevPos.y=this._currentValue,this.state&=~Zi.Selected,this._clearScrollTimers(),this._invokeEvent("scrollEnd",{event:n,value:this._currentValue}))}isVertical(){return this.orientation===Vr.Vertical}_updateVisibility(){this._isEnabled&&this._currentAppearance===Mn.Dynamic&&(this._isVisible?this.state|=Zi.Hovered:this.state&=~Zi.Hovered)}_changeScrollPos(n){if(this._isEnabled){let e=this;e._processLargeChange(n),e._clearScrollTimers(),e._scrollTimeout=setTimeout(function(){e._scrollInterval=setInterval(function(){e._currentValue>e._currentMinValue&&e._currentValue<e._currentMaxValue?e._processLargeChange(n):e._clearScrollTimers()},100),clearTimeout(e._scrollTimeout)},250)}}_clearScrollTimers(){this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollInterval&&clearInterval(this._scrollInterval),this._scrollTimeout=null,this._scrollInterval=null}_processLargeChange(n){let e=-1;switch(this.isVertical()?e=n.offsetY<this._thumbPos.y?1:n.offsetY>this._thumbPos.y+this._thumbSize.height?2:-1:e=n.offsetX<this._thumbPos.x?1:n.offsetX>this._thumbPos.x+this._thumbSize.width?2:-1,e){case 1:this.value-=this._largeChangeValue;break;case 2:this.value+=this._largeChangeValue;break;default:this._defaultFunc()}}_getControlClass(){return this._ctrlClass}_getThumbClass(){return this._thumbClass}refresh(){this._updateStyle(this.controlStyle),this._updateControlClass(),this._updateThumbClass(),this.update(),this._updateReferences()}_updateColorSchemeSettings(n){switch(this._currentColorSchemeSettings=Be``,n){case ui.Dark:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(UC.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(ZS.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentColorSchemeSettings.cssText=""}}_updateControlClass(){this._ctrlClass={},this._ctrlClass[this._generalClassName]=!0,this._options.currentStyle&&this._options.currentStyle.general&&(this._ctrlClass[this._options.currentStyle.general.normal]=!0,this.orientation===Vr.Horizontal?this._ctrlClass[this._options.currentStyle.general.normal+"-horizontal"]=!0:this._ctrlClass[this._options.currentStyle.general.normal+"-vertical"]=!0,this._currentAppearance===Mn.Dynamic&&(this._ctrlClass[this._options.currentStyle.general.normal+"-dynamic"]=!0,this.orientation===Vr.Horizontal?this._ctrlClass[this._options.currentStyle.general.normal+"-dynamic-horizontal"]=!0:this._ctrlClass[this._options.currentStyle.general.normal+"-dynamic-vertical"]=!0),this.state&Zi.Disabled?this._ctrlClass[this._options.currentStyle.general.disabled]=!0:this.state&Zi.Focused?this._ctrlClass[this._options.currentStyle.general.focused]=!0:this.state&Zi.Selected?this._ctrlClass[this._options.currentStyle.general.selected]=!0:this.state&Zi.Hovered&&(this._ctrlClass[this._options.currentStyle.general.hovered]=!0),this.state&Zi.Hovered||this._isVisible?(this._ctrlClass[this._defaultStyle.general.normal+"-enter"]=!0,this._currentAppearance===Mn.Dynamic&&(this._ctrlClass[this._defaultStyle.general.normal+"-dynamic-enter"]=!0)):(this._ctrlClass[this._defaultStyle.general.normal+"-leave"]=!0,this._currentAppearance===Mn.Dynamic&&(this._ctrlClass[this._defaultStyle.general.normal+"-dynamic-leave"]=!0)))}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(QS.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText=""}}_updateThumbClass(){this._thumbClass={},this._thumbClass[this._thumbClassName]=!0,this.orientation===Vr.Horizontal?this._thumbClass[this._thumbClassName+"-horizontal"]=!0:this._thumbClass[this._thumbClassName+"-vertical"]=!0,this.state&Zi.Disabled?this._thumbClass[this._thumbClassName+"-disabled"]=!0:this.state&Zi.Focused?this._thumbClass[this._thumbClassName+"-focused"]=!0:this.state&Zi.Selected?this._thumbClass[this._thumbClassName+"-selected"]=!0:this._isThumbHovered&&(this._thumbClass[this._thumbClassName+"-hovered"]=!0)}firstUpdated(n){this.updateLayout()}updateLayout(n){return B(this,null,function*(){yield this._processUpdateLayout(),this.refresh()})}_processUpdateLayout(){let n=this;return new Promise(e=>{let t=n._currentAppearance===Mn.Static?2:0;if(n.orientation===Vr.Horizontal){n._largeChangeValue===0&&(n._largeChangeValue=n._scrollSize.width);let r=n._scrollSize.width-t,o=0;n._currentMaxValue+r>0&&(o=r*r/(n._currentMaxValue+r)),o=r/(n._currentMaxValue+n._largeChangeValue)*n._largeChangeValue,n._currentMaxValue<=0?o=r:o<7&&(o=7),n._thumbSize.width=o,n._emptySpace=r-o,n._currentMaxValue>0&&(n._thumbPos.x=t+n._currentValue*n._emptySpace/n._currentMaxValue)}else{n._largeChangeValue===0&&(n._largeChangeValue=n._scrollSize.height);let r=n._scrollSize.height-t,o=0;n._currentMaxValue+r>0&&(o=r*r/(n._currentMaxValue+r)),o=r/(n._currentMaxValue+n._largeChangeValue)*n._largeChangeValue,n._currentMaxValue<=0?o=r:o<7&&(o=7),n._thumbSize.height=o,n._emptySpace=r-o,n._currentMaxValue>0&&(n._thumbPos.y=t+n._currentValue*n._emptySpace/n._currentMaxValue)}e()})}render(){let n=this.isVertical()?{top:this._scrollPos.top+"px",right:0,height:this._scrollSize.height+"px"}:{bottom:this._scrollPos.bottom+"px",left:0,width:this._scrollSize.width+"px"},e=this.isVertical()?{top:this._thumbPos.y+"px",height:this._thumbSize.height+"px"}:{left:this._thumbPos.x+"px",width:this._thumbSize.width+"px"};return Ke`                 <style>                     ${Sg}                     ${this._currentThemeSettings}                     ${this._currentColorSchemeSettings}                 </style>                 <div class=${Ln(this._getControlClass())} style=${sn(n)} @mousedown="${t=>this._changeScrollPos(t)}">                     <div class=${Ln(this._getThumbClass())} style=${sn(e)} @mouseenter="${t=>this._thumbMouseEnter(t)}" @mousedown="${t=>this._thumbMouseDown(t)}" @mouseleave="${t=>this._thumbMouseLeave(t)}"></div>                 </div>         `}updated(n){n.forEach((e,t)=>{})}};window.customElements.define("iui-scrollbar",uk);var hk=Be`
    .iui-base-loading {
        opacity: 1;
        pointer-events: none;

        animation-name: iui-base-loading-animate;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.4s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-base-loading-animate {
        0% { opacity: 1; }
        100% { opacity: 0.4; }
    }
    .iui-base-loading-end {
        opacity: 0.4;
        pointer-events: none;

        animation-name: iui-base-loading-end-animate;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.4s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-base-loading-end-animate {
        0% { opacity: 0.4; }
        100% { opacity: 1; }
    }


    .iui-loading-icon {
        background-image: url(../../icons/circular.png);
        height: 48px;
        left: 0;
        position: absolute;
        top: 0;
        width: 48px;
        z-index: 999;

        animation-name: iui-loading-icon-animate;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 1s;
        animation-fill-mode: forwards;
        animation-iteration-count: infinite;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-loading-icon-animate {
        0% { 
            -ms-transform: rotate(0deg);
            -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
        }
        100% { 
            -ms-transform: rotate(360deg);
            -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    .iui-draglist {
        background: var(--iui-draglist-background, white);
        border: var(--iui-draglist-border, thin solid transparent);
        border-color: var(--iui-draglist-border-color, transparent);
        box-shadow: var(--iui-draglist-box-shadow, 0 0 0 transparent);
        margin: 0;
        opacity: 0.9;
        overflow: hidden;
        padding: 0;
        pointer-events: none;
        position: absolute;
        transition: border-color 0.4s ease-in-out, box-shadow 0.4s ease-in-out;
        z-index: 999;
    }
    .iui-draglist-active {
        border-color: var(--iui-draglist-active-border-color, #e5e5e5);
        box-shadow: var(--iui-draglist-active-box-shadow, 0 0 3px #d5d5d5);
    }
    .iui-draglist-copy {
        background: url(../../icons/copy.ico);
        display: block;
        height: 16px;
        opacity: 0.6;
        position: absolute;
        width: 16px;
        z-index: 999;
    }
    .iui-draglist-corner {
        opacity: 1;
        position: absolute;
        right: -1px;
        bottom: -3px;
        zIndex: 999;
    }
    .iui-draglist-corner-block {
        background: var(--iui-draglist-corner-background, #f5f5f5);
        border: var(--iui-draglist-corner-border, thin solid #e5e5e5);
        border-color: var(--iui-draglist-corner-border-color, #e5e5e5);
        opacity: 1;
        position: absolute;
        top: -35%;
        left: -20%;
        transform: rotate(45deg);
        width: 250%;
        height: 300%;
        zIndex: 0;
    }
    .iui-draglist-num {
        color: var(--iui-draglist-num-color, black);
        padding: 3px;
        position: relative;
        zIndex: 1;
    }
`;var Jz=Be`
    .iui-header-expand-box {
        opacity: 0.75;
    }
    .iui-item {
        color: #cccccc;
    }
    /* Item Hover State */
    .iui-item-hovered {
        background-color: #2a2d2e;
        border: thin solid #2a2d2e;
    }
    /* Item Selected State */
    .iui-item-selected {
        background-color: #37373d;
        border: thin solid #37373d;
        color: white;
    } 

    .iui-list {
        background: #252526;
        border: thin solid #151515;
        color: #cccccc;
    }
    .iui-list li {
        color: #cccccc;
    }
    .iui-list li:hover {
        background-color: #2a2d2e;
        border: 2px solid #2a2d2e;
    }
    .iui-list-item-selected {
        background-color: #37373d;
        color: white;
    }

    .iui-draglist {
        background: var(--iui-draglist-background, #303030);
    }
    .iui-draglist-active {
        border-color: var(--iui-draglist-active-border-color, #151515);
        box-shadow: var(--iui-draglist-active-box-shadow, 0 0 3px #252525);
    }
    .iui-draglist-copy {
        background: url(../../../icons/copy-white.ico);
    }
    .iui-draglist-corner-block {
        background: var(--iui-draglist-corner-background, #151515);
        border-color: var(--iui-draglist-corner-border-color, #050505);
    }
    .iui-draglist-num {
        color: var(--iui-draglist-num-color, #cccccc);
    }
`;var qz=Be`
    .iui-header-enter {
        animation-name: iui-combobox-header-animate-enter;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.25s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-combobox-header-animate-enter {
        0% { box-shadow: 0 0 0 transparent; }
        100% { box-shadow: 2px 3px 3px #e5e5e5; }
    } 
    .iui-header-leave {
        animation-name: iui-combobox-header-animate-leave;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.25s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-combobox-header-animate-leave {
        0% { box-shadow: 2px 3px 3px #e5e5e5; }
        100% { box-shadow: 0 0 0 transparent; }
    } 
`;var fk=Be`
    .iui-treeview {
        background: var(--iui-treeview-background, white);
        border: var(--iui-treeview-border, thin solid #cecece);
        border-color:  var(--iui-treeview-border-color, #cecece);
        border-radius: var(--iui-treeview-border-radius, 1px);
        border-width: var(--iui-treeview-border-width, thin);
        color: var(--iui-treeview-color, black);
        cursor: var(--iui-treeview-cursor, default);
        display: var(--iui-treeview-display, block);
        float: var(--iui-treeview-float, none);
        height: var(--iui-treeview-height, 100%);
        margin: var(--iui-treeview-margin, 0);
        opacity: var(--iui-treeview-opacity, 1);
        overflow: hidden;
        padding: var(--iui-treeview-padding, 0);
        position: var(--iui-treeview-position, relative);
        width: var(--iui-treeview-width, auto);
        z-index: var(--iui-treeview-z-index, auto);

        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -o-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .iui-treeview-item-empty-content {
        background: #f5f5f5;
        margin: 0;
    }

    .iui-treeview-block-hover, .iui-treeview-block-select {
        background: var(--iui-treeview-block-background, transparent);
        border: var(--iui-treeview-block-border, thin solid #cecece);
        box-shadow: var(--iui-treeview-block-box-shadow, 2px 3px 3px #e5e5e5);
        pointer-events: none;
        position: absolute;
        z-index: 99;
    }
    .iui-treeview-block-hover > div, .iui-treeview-block-select > div {
        background: var(--iui-treeview-block-panel-background, #f5f5f5);
        pointer-events: auto;
        position: absolute;
        right: 0;
        top: 0;
        z-index: 98;
    }

    /* Disabled State */
    .iui-treeview-disabled div, .iui-treeview-disabled ul {
        opacity: var(--iui-treeview-disabled-opacity, 0.75);
        pointer-events: none;
    }
`;var Yz=Be`
`;var mk=Be`
    .iui-treeview {
        background: #363636;
        border: #121212;
        color: #c5c5c5;
    }
`;var Xz=Be`
    .iui-treeview {
        background: var(--iui-treeview-background, white);
        border: var(--iui-treeview-border, thin solid #d9d9d9);
        color: var(--iui-treeview-color, black);
    }
`;var gk=Be`
    .iui-treeitem {
        background: var(--iui-treeitem-background, transparent);
        color: var(--iui-treeitem-color, black);
        list-style-type: none;
        overflow: hidden;
        margin: var(--iui-treeitem-margin, 0);
        padding: var(--iui-treeitem-padding, 0);
        font-family: arial, sans-serif !important;
        font-size: 0.9rem !important;
    }
    .iui-treeitem-block {
        border: var(--iui-treeitem-border, 1px solid transparent);
        border-color: var(--iui-treeitem-border-color, transparent);
        border-width: var(--iui-treeitem-border-width, 1px);
    }
    .iui-treeitem-hovered {
        color: var(--iui-treeitem-hovered-color, black);
    }
    .iui-treeitem-selected {
        color: var(--iui-treeitem-selected-color, black);
    }
    .iui-treeitem-content-block {
        border: var(--iui-treeitem-content-border, 1px solid transparent);
        border-color: var(--iui-treeitem-content-border-color, transparent);
        border-width: var(--iui-treeitem-content-border-width, 1px);
        display: inline-flex;
        align-items: center;
    }
    .iui-treeitem-content-hovered {
        color: var(--iui-treeitem-content-hovered-color, black);
    }
    .iui-treeitem-content-selected {
        background: var(--iui-treeitem-content-selected-background, #e5e5e5);
        color: var(--iui-treeitem-content-selected-color, black);
    }
    .iui-treeitem-content-block:focus {
        background: var(--iui-treeitem-content-selected-background, #e5e5e5);
        color: var(--iui-treeitem-content-selected-color, black);
    }
   
    div > div > ul > li.iui-treeitem.iui-treeitem-block.iui-treeitem-selected > div > div > div {
        background-color: var(--lightColor);
        border: var(--iui-treeitem-content-border, 1px solid transparent);
        border-color: var(--fwcGrey7);
    }
    div > div > ul > li.iui-treeitem.iui-treeitem-block.iui-treeitem-selected > div > div > div > div {
        background-color: var(--lightColor);
        max-width: max-content;    
        font-weight: bold !important;
    }
    div > div > ul > li.iui-treeitem.iui-treeitem-block.iui-treeitem-selected > div > div > div > div:hover {
        background-color: var(--lightColor) !important;
        max-width: max-content !important;
    }

    
    .iui-treeitem:focus {
        outline: none !important;
    }
    .iui-treeitem-empty {
        list-style-type: none;
        margin: 0;
        padding: 0;
    }
    .iui-treeitem-content {
        display: block;
        margin: 0;
        padding: var(--iui-treeitem-content-padding, 0px);
        position: relative;
        white-space: nowrap;
        max-width: max-content;
        line-height: 1.25;
    }
    .iui-treeitem-content:hover {
        background-color: var(--lightColor);
    }
    .iui-treeitem-content-focused {
        max-width: max-content;
    }
    .iui-treeitem-content:focus {
        outline: none !important;
    }
    .iui-treeitem-content-template {
        display: var(--iui-treeitem-content-template-display, inline-block);
        vertical-align: var(--iui-treeitem-content-template-vertical-align, middle);
    }
    .iui-treeitem-expand-box {
        background: url(../../icons/expandbox-icons.png) no-repeat 0 -48px;
        display: inline-block;
        overflow: hidden;
        padding: 0;
        margin: var(--iui-treeitem-expand-box-margin, 1px 5px 0 0);
        width: 16px;
        height: 16px;
        vertical-align: top;
        color: #333 !important;
        filter: invert(0%) brightness(0%);
    }      
        .iui-treeview-enter .iui-treeitem-expand-box-general {
        animation-name: iui-treeview-animate-expand-box-enter;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.4s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-treeview-animate-expand-box-enter {
        0% { opacity: 0; }
        100% { opacity: 1; }
    } 
    .iui-treeview-leave .iui-treeitem-expand-box-general {
        animation-name: iui-treeview-animate-expand-box-leave;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 1s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes iui-treeview-animate-expand-box-leave {
        0% { opacity: 1; }
        100% { opacity: 0; }
    } 
    .iui-treeitem-expand-box-open {
        background-position: 0 -16px;
    }
    .iui-treeitem-expand-box-open-animate {
        background-position: 0 0;
    
        animation-name: expand-box-open;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.25s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes expand-box-open {
        0% { 
            -ms-transform: rotate(0deg); /* IE 9 */
            -webkit-transform: rotate(0deg); /* Chrome, Safari, Opera */
            transform: rotate(0deg);
        }
        100% { 
            -ms-transform: rotate(90deg); /* IE 9 */
            -webkit-transform: rotate(90deg); /* Chrome, Safari, Opera */
            transform: rotate(90deg);
        }
    }
    .iui-treeitem-expand-box-close {
        background-position: 0 0;
    }
    .iui-treeitem-expand-box-close-animate {
        background-position: 0 0;

        animation-name: expand-box-close;
        animation-delay: 0s;
        animation-direction: normal;
        animation-duration: 0.25s;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-play-state: running;
        animation-timing-function: linear; 
    }
    @keyframes expand-box-close {
        0% { 
            -ms-transform: rotate(90deg); /* IE 9 */
            -webkit-transform: rotate(90deg); /* Chrome, Safari, Opera */
            transform: rotate(90deg);
        }
        100% { 
            -ms-transform: rotate(0deg); /* IE 9 */
            -webkit-transform: rotate(0deg); /* Chrome, Safari, Opera */
            transform: rotate(0deg);
        }
    }
    .iui-treeitem-expand-box-load {
        background: var(--iui-treeitem-expand-box-load-background-image, url(../../icons/load.gif)) no-repeat 0 0 !important;
    }
    .iui-treeitem-list {
        list-style-type: none;
        margin: 0;
        padding: 0 0 0 20px;
        overflow: hidden;
    }

    /* Disabled State */
    .iui-treeitem-disabled div {
        opacity: var(--iui-treeitem-disabled-opacity, 0.75);
        pointer-events: none;
    }

    /* CheckBox */
    .iui-treeitem-checkbox {
        background-image: var(--iui-treeitem-checkbox-background-image, url(../../icons/checkbox-unchecked.ico));
        background-repeat: no-repeat;
        display: inline-block;
        overflow: hidden;
        padding: var(--iui-treeitem-checkbox-padding, 0);
        margin: var(--iui-treeitem-checkbox-margin, 0 5px 0 0);
        width: 16px;
        height: 16px;
        vertical-align: var(--iui-treeitem-checkbox-vertical-align, middle);
    }
    .iui-treeitem-checkbox-checked {
        background-image: var(--iui-treeitem-checkbox-checked-background-image, url(../../icons/checkbox-checked.ico));
    }
    .iui-treeitem-checkbox-indeterminate {
        background-image: var(--iui-treeitem-checkbox-indeterminate-background-image, url(../../icons/checkbox-indeterminate.ico));
    }

    /* Animations */
    .iui-treeitem-animate {
        border: 0 solid transparent;
        background-color: transparent;
        box-shadow: none;
        list-style-type: none;
        position: relative;
    }
`;var Qz=Be`
    .iui-treeitem {
        transition-duration: var(--iui-treeitem-transition-duration, 0.15s);
        transition-property: var(--iui-treeitem-transition-property, background, border-color, color);
        transition-timing-function: var(--iui-treeitem-transition-timing-function, ease-in-out);
    }
`;var _k=Be`
    .iui-treeitem {
        background: var(--iui-treeitem-background, transparent);
        color: var(--fwcDark)!important;
    }
    .iui-treeitem-hovered {
        color: var(--iui-treeitem-hovered-color, #eeeeee);
        max-width: max-content;
    }
    .iui-treeitem-selected {
        color: var(--iui-treeitem-selected-color, white);
        max-width: max-content;
    }
    .iui-treeitem-content-hovered,
    .iui-treeitem-content-selected {
        color: var(--iui-treeitem-content-selected-color, white);
        max-width: max-content;
    }
    .iui-treeitem-selected .iui-treeitem-expand-box, .iui-treeitem-content-selected .iui-treeitem-expand-box {
    }
    .iui-treeitem-expand-box {
        background: url(../../../icons/expandbox-icons.png) no-repeat -48px -48px;
    }
    .iui-treeitem-expand-box-open {
        background-position: -48px -16px;
    }
    .iui-treeitem-expand-box-open:hover {
    }
    .iui-treeitem-expand-box-close {
        background-position: -48px 0;
    }
    .iui-treeitem-expand-box-close:hover {
    }
    .iui-treeitem-expand-box-open-animate {
        background-position: -48px 0;
    }
    .iui-treeitem-expand-box-close-animate {
        background-position: -48px 0;
    }
    div > div > ul > li:nth-child(1) > div > div > div > div > iui-contextmenu > div > span.fwc-label.fwcDark {
        color: white;
    }
    div > div > ul > li:first-child.iui-treeitem.iui-treeitem-block.iui-treeitem-selected,
    div > div > ul > li.first-selected.iui-treeitem.iui-treeitem-block {
        font-weight: 700; 
        color: white;       
    }
`;var Zz=Be`
    .iui-treeitem {
        background: var(--iui-treeitem-background, white);
        color: var(--iui-treeitem-color, black);
    }
    .iui-treeitem-hovered {
        color: var(--iui-treeitem-hovered-color, #323232);
        max-width: max-content;
    }
    .iui-treeitem-selected {
        color: var(--iui-treeitem-selected-color, black);
        max-width: max-content;
    } 
    .iui-treeitem-content-hovered,
    .iui-treeitem-content-selected {
        color: var(--iui-treeitem-content-hovered-color, #323232);
        max-width: max-content;
    }
    .iui-treeitem-content-selected {
        color: var(--iui-treeitem-content-selected-color, black);
        max-width: max-content;
    }

    .iui-treeitem-expand-box {
        background: url(../../../icons/expandbox-icons.png) no-repeat -80px -48px;
    }
    .iui-treeitem-expand-box-open {
        background-position: -80px -16px;
    }
    .iui-treeitem-expand-box-open:hover {
        background-position: -64px -16px;
    }
    .iui-treeitem-expand-box-close {
        background-position: -80px 0;
    }
    .iui-treeitem-expand-box-close:hover {
        background-position: -64px 0;
    }
    .iui-treeitem-expand-box-open-animate {
        background-position: -64px 0;
    }
    .iui-treeitem-expand-box-close-animate {
        background-position: -64px 0;
    }
    .iui-treeitem.iui-treeitem-block.iui-treeitem-focused {
        font-weight: 700;
        color:black;
    }
    div > div > ul > li:first-child.iui-treeitem.iui-treeitem-block.iui-treeitem-selected,
    div > div > ul > li.first-selected.iui-treeitem.iui-treeitem-block {
        font-weight: 700; 
        color: black;       
    }
    div > div > ul > li:nth-child(1) > div > div > div > div > iui-contextmenu > div > span.fwc-label.fwcDark {
        color: black;
    }
`;var Ck=class extends $z{_init(){super._init(),this._isCheckBoxVisible=!1,this._currentCheckMode=Hd.TwoState,this._isThereChildItems=!1,this._fullMoveList=[],this._currentItemDisplay=wo.Full,this._currentItemSize={width:1999,height:1999},this._isExpandBoxVisible=!0,this._isLongestInProcess=!1,this._longestObj={data:null,width:0},this._currentBaseColorSchemeSettings=Be``,this._currentBaseStyleSettings=hk,this._currentControlStyleSettings=fk,this._currentItemColorSchemeSettings=Be``,this._currentItemStyleSettings=gk,this._currentItemThemeSettings=Be``,this._currentScrollColorSchemeSettings=Be``,this._currentScrollStyleSettings=Sg,this._generalClassName="iui-treeview",this._itemClassName="iui-treeitem",this._itemContentClassName=this._itemClassName+"-content",this._expandBoxClassName=this._itemClassName+"-expand-box",this._isExpandBoxTouched=!1,this._updateOptions(),this._initStyle(),this._updateData(),this._resizeObserver=new ResizeObserver(n=>{let e=this;if(!e._isAnimationInProcess&&n&&n.length>0&&n[0].contentRect){let t=!1;e._elemRef&&e._updateClientRect(),e._clientRect.width!==e._prevClientRect.width&&(e._prevClientRect.width=e._clientRect.width,t=!0),e._clientRect.height!==e._prevClientRect.height&&(e._prevClientRect.height=e._clientRect.height,t=!0),t&&(e._updateScrollLayout(),e._invokeEvent("sizeChanged",{size:e._clientRect}))}})}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect(),this._resizeObserver=null,this._removeDropMark(),this._loadingEndTimeout&&clearTimeout(this._loadingEndTimeout),this._resetLayoutTimer()}_initStyle(){this._defaultStyle={general:{disabled:this._generalClassName+"-disabled",focused:this._generalClassName+"-focused",normal:this._generalClassName,hovered:this._generalClassName+"-hovered",selected:this._generalClassName+"-selected"},item:{general:{disabled:this._itemClassName+"-disabled",focused:this._itemClassName+"-focused",normal:this._itemClassName,hovered:this._itemClassName+"-hovered",selected:this._itemClassName+"-selected"},expandBox:{general:this._expandBoxClassName,load:this._expandBoxClassName+"-load",expanded:this._expandBoxClassName+"-open",collapsed:this._expandBoxClassName+"-close"},content:{disabled:this._itemContentClassName+"-disabled",focused:this._itemContentClassName+"-focused",normal:this._itemContentClassName,hovered:this._itemContentClassName+"-hovered",selected:this._itemContentClassName+"-selected"}}},this._updateStyle(this.controlStyle),this._updateControlClass(),this._updateColorSchemeSettings(this._currentColorScheme),this.refresh()}attributeChangedCallback(n,e,t){super.attributeChangedCallback(n,e,t)}static get properties(){return{autoExpand:{type:Boolean,attribute:"auto-expand",reflect:!0},autoSize:{type:Boolean,attribute:"auto-size",reflect:!0},checkBoxes:{type:Boolean,attribute:"check-boxes",reflect:!1},checkMode:{attribute:"check-mode",converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="twostate"?Hd.TwoState:Hd.ThreeState,toAttribute:(n,e)=>n===Hd.TwoState?"twostate":"threestate"},reflect:!0},compactMode:{type:Boolean,attribute:"compact-mode",reflect:!0},indent:{type:Number,reflect:!0},itemDisplay:{attribute:"item-display",converter:{fromAttribute:n=>(n=n.replace(/"|'/,"").replace(/"|'/,"")).toLowerCase()==="partial"?wo.Partial:wo.Full,toAttribute:(n,e)=>n===wo.Partial?"Partial":"Full"},reflect:!0},showExpandBox:{type:Boolean,attribute:"show-expandbox",reflect:!0}}}get autoExpand(){return this._isAutoExpanded}set autoExpand(n){if(this._isAutoExpanded!==n){let e=this._isAutoExpanded;this._isAutoExpanded=n,this.requestUpdate("autoExpand",e)}}get autoSize(){return this._isAutoSized}set autoSize(n){if(this._isAutoSized!==n){let e=this._isAutoSized;this._isAutoSized=n,this.requestUpdate("autoSize",e),this._internalUpdateLayout()}}get checkBoxes(){return this._isCheckBoxVisible}set checkBoxes(n){if(this._isCheckBoxVisible!==n){let e=this._isCheckBoxVisible;this._isCheckBoxVisible=n,this.requestUpdate("checkBoxes",e),this._internalUpdateLayout()}}get checkMode(){return this._currentCheckMode}set checkMode(n){if(this._currentCheckMode!==n){let e=this._currentCheckMode;this._currentCheckMode=n,this.requestUpdate("checkMode",e),this._internalUpdateLayout()}}get compactMode(){return this._currentCompactMode}set compactMode(n){if(this._currentCompactMode!==n){let e=this._currentCompactMode;this._currentCompactMode=n,this.requestUpdate("compactMode",e),this._internalUpdateLayout()}}get indent(){return this._options.indent}set indent(n){if(this._options.indent!==n){let e=this._options.indent;this._options.indent=n,this.requestUpdate("indent",e),this._internalUpdateLayout()}}get itemDisplay(){return this._currentItemDisplay}set itemDisplay(n){if(this._currentItemDisplay!==n){let e=this._currentItemDisplay;this._currentItemDisplay=n,this.requestUpdate("itemDisplay",e),this._internalUpdateLayout()}}get showExpandBox(){return this._isExpandBoxVisible}set showExpandBox(n){if(this._isExpandBoxVisible!==n){let e=this._isExpandBoxVisible;this._isExpandBoxVisible=n,this.requestUpdate("showExpandBox",e),this._internalUpdateLayout()}}_moveItemAt(n,e,t,r){return B(this,null,function*(){let o=this;return(t===ni.Before||t===ni.After||t===ni.Left||t===ni.Right)&&!e?Promise.resolve():new Promise(s=>{let a=n.filter(l=>o._fullList.indexOf(l)>=0);if(a.length>0){let l=[],c=!0,d=0,h=!1,_=-1,C=null;switch(t){case ni.At:e?(_=o._getItemCurrentIndex(e),o._commonService.isIndexInRange(_,o._currentList)&&o.isItemExpanded(e)&&(l=o._currentList.filter(I=>I.data.type!=="group"&&I.data[o._options.dataFields.pid]===e[o._options.dataFields.id]))):l=o._currentList.filter(I=>I.data.type!=="group"&&!I.data[o._options.dataFields.pid]),o._commonService.isIndexInRange(r,l)?C=l[r].data:(r=-1,(C=l.length>0?l[l.length-1].data:e)&&(t=ni.After,e=C,C=o._getLastChildItemFromExpanded(C)));break;case ni.First:r=0,e?(C=e,d=1):o._currentList.length>0&&(C=o._currentList[0].data);break;case ni.Last:r=-1,e?C=o._getLastChildItemFromExpanded(e):(l=o._currentList.filter(I=>I.data.type!=="group"&&!I.data[o._options.dataFields.pid]),(C=l.length>0?l[l.length-1].data:null)&&(t=ni.After,e=C,C=o._getLastChildItemFromExpanded(C)));break;case ni.Left:e?(t=ni.After,h=!0,C=o._getLastChildItemFromExpanded(e),(!o.isItemExpanded(e)||a.indexOf(C)>=0)&&(C=null)):c=!1;break;case ni.Right:r=-1;break;default:e?(C=e,(t===ni.After||t===ni.Down)&&(t=ni.After,C=o._getLastChildItemFromExpanded(C))):c=!1}if(!h&&c){let I=!1;if(e)for(let b=0;b<a.length&&!(I=e===a[b]?!0:o._isChildOf(e,a[b]));b++);if(!I&&C)for(let b=0;b<a.length&&!(I=C===a[b]?!0:o._isChildOf(C,a[b]));b++);c=!I}if(c){for(let b=0;b<a.length;b++)o._dataService.removeAt(a[b]);let I=t===ni.Before||t===ni.Up?a:a.toReversed();for(let b=0;b<I.length;b++){let E=I[b];t===ni.First||t===ni.Last||t===ni.Right||t===ni.At?o._dataService.insert(E,r,e):t===ni.Before||t===ni.Up?o._dataService.insertByRef(E,e):(t===ni.After||t===ni.Left||t===ni.Down)&&o._dataService.insertByRef(E,e,!0)}setTimeout(function(){return B(this,null,function*(){let b=o._getObjFromScrollItem(C);if(b){let E=o._getItemCurrentIndex(C),R=o._getItemScrollIndex(b);t===ni.After||t===ni.Down||t===ni.Last?R+=1:t===ni.First&&(R+=d),o._fullMoveList.length=0,o._updateMoveList(a);let T=0;for(let A=0;A<o._fullMoveList.length;A++){let U=o._getItemCurrentIndex(o._fullMoveList[A]),z=o._getObjFromScrollItem(o._fullMoveList[A]);U<E&&!z&&T++}if(o._isAnimationAllowed&&(o._isAnimationInProcess=!0,o._scrollItemList.length>0)){let A=o._scrollItemList[0],U=o._scrollItemList.length-1,z=o._scrollItemList[U],ee=[];for(let ae=0;ae<o._fullMoveList.length;ae++){let Ie=o._getObjFromScrollItem(o._fullMoveList[ae]);if(Ie)ee.push(Ie);else{let ye=o._getObjFromItem(o._fullMoveList[ae]),xe=o._getItemCurrentIndex(o._fullMoveList[ae]),Le={clickPos:{x:0,y:0},data:o._fullMoveList[ae],indent:ye?ye.indent:0,index:U+ae+1,inlineStyle:{},position:{x:z.position.x,y:z.position.y+o._currentItemSize.height},showCheckBox:o._isItemCheckBoxAllowed(o._fullMoveList[ae]),showRadioButton:o._isItemRadioButtonAllowed(o._fullMoveList[ae]),size:{width:0,height:o._currentItemSize.height},targetPosition:{x:z.position.x,y:z.position.y+o._currentItemSize.height},style:{},tabIndex:0,zIndex:0};xe<E&&(Le.position.y=A.position.y-o._currentItemSize.height,Le.targetPosition.y=Le.position.y),o._updateItemStyle(Le),ee.push(Le),o._scrollItemList.splice(Le.index,0,Le)}}o.update();let re=o._scrollItemList.filter(ae=>o._fullMoveList.indexOf(ae.data)<0),Z={x:o._ctrlPadding.left,y:o._ctrlPadding.top};for(let ae=0;ae<o._scrollItemList.length&&ae<R+T;ae++){let Ie=o._scrollItemList[ae];ee.indexOf(Ie)<0&&(Ie.targetPosition.y=Z.y,Z.y+=o._currentItemSize.height)}ee.forEach(ae=>{ae.targetPosition.y=Z.y,ae.zIndex=999,Z.y+=o._currentItemSize.height});for(let ae=R+T;ae<o._scrollItemList.length;ae++){let Ie=o._scrollItemList[ae];ee.indexOf(Ie)<0&&(Ie.targetPosition.y=Z.y,Z.y+=o._currentItemSize.height)}o._repositionItems(ee,0,250),yield o._repositionItems(re,0,250)}o._currentIndex=Math.max(0,o._currentIndex-T),o._currentScrollPos.y=Math.max(0,Math.min(o._avgItemHeight*o._currentIndex,o._maxScrollPos.y))}yield o._processUpdateCurrentLayout(),o._invokeEvent("itemMoved",{item:a}),o._isAnimationInProcess=!1,s()})},1)}else s()}else s()})})}_updateMoveList(n){let e=this;n.forEach(t=>{e._getItemCurrentIndex(t)>=0&&e._isItemAllowed(t)&&(e._fullMoveList.push(t),t[e._options.dataFields.items]&&e.isItemExpanded(t)&&e._updateMoveList(t[e._options.dataFields.items]))})}_itemDblClickEvent(n,e){if(this._isEnabled){let t={cancel:!1,event:n,item:e.data};this._invokeEvent("itemDblClick",t),t.cancel!==!0&&this.toggle(e.data)}}_checkItem(n,e){if(e){let t=this._getItemCheckValue(e);t=t===void 0||t===ho.Indeterminate||t===ho.Unchecked?ho.Checked:ho.Unchecked,this._updateCheckValue(e,t),this._updateChildItemCheckValue(e),this._updateParentItemCheckValue(e),this.refresh(),this._invokeEvent("checkStateChanged",{item:e,checked:e[this._options.dataFields.checked],checkState:e[this._options.dataFields.checkState]})}n.stopPropagation()}_getItemCheckValue(n){return n?this._currentCheckMode===Hd.ThreeState?n[this._options.dataFields.checkState]:n[this._options.dataFields.checked]===!0?ho.Checked:ho.Unchecked:ho.Unchecked}_updateCheckValue(n,e){n&&(n[this._options.dataFields.checkState]=e,n[this._options.dataFields.checked]=e===ho.Checked)}_updateChildItemCheckValue(n){if(n&&n[this._options.dataFields.items])for(let e=0;e<n[this._options.dataFields.items].length;e++){let t=this._getItemCheckValue(n);t===ho.Checked?this._updateCheckValue(n.items[e],ho.Checked):t===ho.Unchecked&&this._updateCheckValue(n.items[e],ho.Unchecked),this._updateChildItemCheckValue(n.items[e])}}_updateParentItemCheckValue(n){let e=this.getItemParent(n);for(;e;){let t=e[this._options.dataFields.items];if(t){let r=0,o=0;for(let a=0;a<t.length;a++){let l=this._getItemCheckValue(t[a]);l===ho.Checked?r++:l===ho.Indeterminate&&o++}let s=ho.Unchecked;r===t.length?s=ho.Checked:(r>0||o>0)&&(s=ho.Indeterminate),this._updateCheckValue(e,s)}e=this.getItemParent(e)}}_updateCheckState(){this._currentCheckMode===Hd.ThreeState&&this._updateChildrenCheckState(this._dataService.getList())}_updateChildrenCheckState(n){n&&n.forEach(e=>{this._updateChildItemCheckValue(e),this._updateParentItemCheckValue(e),this._updateChildrenCheckState(e[this._options.dataFields.items])})}_updateData(){this._dataService.init([{data:this.items,fields:this._options.dataFields}]),this._internalUpdateLayout()}_updateOptions(n){n?(this._options={allowDrag:this._commonService.isFieldAvailable(n.allowDrag,!1),allowDrop:this._commonService.isFieldAvailable(n.allowDrop,!1),allowFilter:this._commonService.isFieldAvailable(n.allowFilter,!1),compactMode:this._commonService.isFieldAvailable(n.compactMode,!1),dataFields:null,indent:this._commonService.isFieldAvailable(n.indent,15),loadItems:[],selectedItem:this._commonService.isFieldAvailable(n.selectedItem,this._options.selectedItem?this._options.selectedItem:null)},this._updateShowScroll(n.showScroll)):(this._options={allowDrag:!1,allowDrop:!1,allowFilter:!1,compactMode:!1,dataFields:null,indent:15,loadItems:[],selectedItem:null},this._updateDataFields(),this._updateShowScroll())}_updateDataFields(n){n?this._options.dataFields={allowCheckBox:n.allowCheckBox?n.allowCheckBox:"allowCheckBox",allowDrag:n.allowDrag?n.allowDrag:"allowDrag",allowDrop:n.allowDrop?n.allowDrop:"allowDrop",allowEdit:n.allowEdit?n.allowEdit:"allowEdit",allowFocus:n.allowFocus?n.allowFocus:"allowFocus",allowRadioButton:n.allowRadioButton?n.allowRadioButton:"allowRadioButton",autoCheck:n.autoCheck?n.autoCheck:"autoCheck",canSelect:n.canSelect?n.canSelect:"canSelect",checkBoxSettings:n.checkBoxSettings?n.checkBoxSettings:"checkBoxSettings",checked:n.checked?n.checked:"checked",checkState:n.checkState?n.checkState:"checkState",content:n.content?n.content:"content",contentVisibility:n.contentVisibility?n.contentVisibility:"contentVisibility",contextMenu:n.contextMenu?n.contextMenu:"contextMenu",data:n.data?n.data:"data",enabled:n.enabled?n.enabled:"enabled",expanded:n.expanded?n.expanded:"expanded",hasChildren:n.hasChildren?n.hasChildren:"hasChildren",icon:n.icon?n.icon:"icon",iconUrl:n.iconUrl?n.iconUrl:"iconUrl",id:n.id?n.id:"id",isRoot:n.isRoot?n.id:"isRoot",items:n.items?n.items:"items",objects:n.items?n.items:"items",pid:n.pid?n.pid:"pid",selected:n.selected?n.selected:"selected",showCheckBox:n.showCheckBox?n.showCheckBox:"showCheckBox",statusIcon:n.statusIcon?n.statusIcon:"statusIcon",style:n.style?n.style:"style",templateObj:n.templateObj?n.templateObj:"templateObj",text:n.text?n.text:"text",tooltip:n.tooltip?n.tooltip:"tooltip",value:n.value?n.value:"value",visible:n.value?n.visible:"visible"}:this._options.dataFields={allowCheckBox:"allowCheckBox",allowDrag:"allowDrag",allowDrop:"allowDrop",allowEdit:"allowEdit",allowFocus:"allowFocus",allowRadioButton:"allowRadioButton",autoCheck:"autoCheck",checkBoxSettings:"checkBoxSettings",canSelect:"canSelect",checked:"checked",checkState:"checkState",content:"content",contentVisibility:"contentVisibility",contextMenu:"contextMenu",data:"data",enabled:"enabled",expanded:"expanded",hasChildren:"hasChildren",icon:"icon",iconUrl:"iconUrl",id:"id",isRoot:"isRoot",items:"items",objects:"items",pid:"pid",selected:"selected",showCheckBox:"showCheckBox",statusIcon:"statusIcon",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value",visible:"visible"},this._dataService&&this._dataService.updateDataFields(this._options.dataFields)}_updateCurrentList(){this._currentList.length=0,this._isThereChildItems=!1;let n=this._dataService.getList();this._options.compactMode===!0&&(n=this._createCompactList(n)),n&&(n=this._applySorting(n)).forEach(e=>this._addChildItems(e,0,null,!1))}_addChildItems(n,e,t,r,o){let s=!0;if(!n[this._options.dataFields.items])return s=this._addItemToCurrentList(n,e,t,r,o);if(this._addItemToCurrentList(n,e,t,r,o)){s=!0;let a=0;if(r||this.isItemExpanded(n)){let l=n[this._options.dataFields.items];l&&(l=this._applySorting(l)).forEach(c=>{this._addChildItems(c,e+this._options.indent,n[this._options.dataFields.id],r,n)&&a++})}!r&&!this._isThereChildItems&&(a>0||this._isThereItems(n))&&(this._isThereChildItems=!0)}return s}_addItemToCurrentList(n,e,t,r,o){n.type="item",n[this._options.dataFields.id]||(n[this._options.dataFields.id]=this._commonService.getUniqueId()),t?n[this._options.dataFields.pid]=t:delete n[this._options.dataFields.pid];let s=this._isItemAllowed(n);return s&&(r?this._fullList.push(n):this._currentList.push({data:n,dragIndent:e,indent:e,inlineStyle:{},style:{general:{},expandBox:{},content:{}}})),s}_isThereItems(n){return!this.isItemExpanded(n)&&n[this._options.dataFields.items]&&n[this._options.dataFields.items].length>0&&this._isThereVisibleChildren(n)}_resetVisiblity(n){n&&n.forEach(e=>{e[this._options.dataFields.visible]=!0,this._resetVisiblity(e[this._options.dataFields.items])})}_collapseChildren(n){n&&n.forEach(e=>{e[this._options.dataFields.expanded]=!1,this._collapseChildren(e[this._options.dataFields.items])})}_createCompactList(n){if(this._resetVisiblity(n),this.selectedItem){let e=this.selectedItem,t=this.getItemParent(this.selectedItem),r=t,o=this.selectedItem;if(this._collapseChildren(o[this._options.dataFields.items]),t)for(;t;){this._updateChildren(t,o);let s=this.getItemParent(t);s||(e=t),o=t,t=s}n.forEach(s=>{this._commonService.isEqual(s[this._options.dataFields.id],e[this._options.dataFields.id])||(s[this._options.dataFields.visible]=r&&this.isItemExpanded(e)?!1:!(this.isItemExpanded(o)&&this._isThereVisibleChildren(this.selectedItem)))})}return n}_updateChildren(n,e){n[this._options.dataFields.items].forEach(t=>{this._commonService.isEqual(t[this._options.dataFields.id],e[this._options.dataFields.id])||(t[this._options.dataFields.expanded]=!1,t[this._options.dataFields.visible]=!(this.isItemExpanded(e)&&this._isThereVisibleChildren(e)))})}loadData(n,e,t,r){this._processLoadData(n,e,t,r)}_updateScrollItemList(n){let e=this;e._resetScrollItemList(),e._scrollItemList.length=0,e.update();let t=e._isInitAnimationAllowed(),r=t?{x:-e._clientRect.width,y:0}:{x:0,y:0},o={x:e._ctrlPadding.left+r.x,y:e._ctrlPadding.top+r.y},s=e._currentIndex,a=0;for(;s+a<e._currentList.length&&s<e._currentIndex+e._visibleRange;){let l=e._currentList[s+a];if(e._isItemDragged(l.data))a++;else{n&&l.data===n&&(o.y+=e._dragListSize.height);let c={clickPos:{x:0,y:0},data:l.data,indent:l.indent,index:s-e._currentIndex,inlineStyle:e._getItemInlineStyle(l),position:{x:t?o.x-25*s:o.x,y:o.y},showCheckBox:e._isItemCheckBoxAllowed(l.data),showRadioButton:e._isItemRadioButtonAllowed(l.data),size:{width:0,height:e._currentItemSize.height},style:{},tabIndex:0,targetPosition:{x:e._ctrlPadding.left,y:o.y},zIndex:e._currentIndex+e._visibleRange-s};e._updateItemStyle(c),e._scrollItemList.push(c),o.y+=e._currentItemSize.height,s++}}}_checkForChildren(n){let e=!1,t=n[this._options.dataFields.items];if(t){for(let r=0;r<t.length;r++)if(this._isItemAllowed(t[r])){e=!0;break}}return e}_updateIsThereChildItems(){let n=!1,e=this._dataService.getList();if(e)for(let t=0;t<e.length&&!(n=this._checkForChildren(e[t]));t++);this.isThereChildItems=n}_processItemAdd(n,e){this._isUpdateAllowed&&this._updateIsThereChildItems()}_processItemRemoval(n,e){this._isUpdateAllowed&&this._updateIsThereChildItems()}_itemDragDrop(n,e){this._isEnabled&&this._currentDragDropMode===Wr.Static&&(this._expandItem=null,this._expandTimeout&&clearTimeout(this._expandTimeout),this._processDragDropStatic(n,e.data),n.stopPropagation())}collapse(n){return B(this,null,function*(){return this.toggle(n,!1)})}expand(n){return B(this,null,function*(){return this.toggle(n,!0)})}_expandBoxMouseDown(n,e){this._isEnabled&&(n.which===1&&!this._isExpandBoxTouched&&this.toggle(e),this._isExpandBoxTouched=!1),n.stopPropagation()}_expandBoxMouseUp(n){this._isExpandBoxTouched=!1,n.stopPropagation()}_expandBoxTouchStart(n,e){this._isEnabled&&(this._isExpandBoxTouched=!0,this.toggle(e)),n.stopPropagation()}_expandBoxTouchEnd(n,e){}toggle(n,e){return B(this,null,function*(){let t=this,r=Promise.resolve();if(n){if(!n[t._options.dataFields.hasChildren]&&(!n[t._options.dataFields.items]||n[t._options.dataFields.items].length===0))return;if(e&&n[t._options.dataFields.expanded]!==!1)return;if(e===!1&&n[t._options.dataFields.expanded]===!1)return;let o=e!==void 0?e:n[t._options.dataFields.expanded]!==!1,s=e!==void 0?e:!o,a={cancel:!1,item:n};e!==void 0?e?t._invokeEvent("beforeExpand",a):t._invokeEvent("beforeCollapse",a):o?t._invokeEvent("beforeCollapse",a):t._invokeEvent("beforeExpand",a),a.cancel!==!0&&(s!==n[t._options.dataFields.expanded]&&(n[t._options.dataFields.expanded]=s,t._isAnimationAllowed?t._options.compactMode===!0?t._processSelection(null,n):(t._isAnimationInProcess=!0,t._clearAnimations(),s?r=t._updateItemExpand(n):r=t._updateItemCollapse(n)):t._internalUpdateCurrentLayout()),t.isItemExpanded(n)?t._invokeEvent("afterExpand",{item:n}):t._invokeEvent("afterCollapse",{item:n}))}else t.getFullList().forEach(o=>o[t._options.dataFields.expanded]=e),t._internalUpdateCurrentLayout();return t.update(),r})}exportToJSON(n,e,t,r){t=t||null,n=n||(r===!1?this.items:this.getFullList());let o=e||[this._options.dataFields.allowDrag,this._options.dataFields.allowDrop,this._options.dataFields.allowEdit,this._options.dataFields.allowFocus,this._options.dataFields.autoCheck,this._options.dataFields.canSelect,this._options.dataFields.checkBoxSettings,this._options.dataFields.checked,this._options.dataFields.checkState,this._options.dataFields.content,this._options.dataFields.contextMenu,this._options.dataFields.contentVisibility,this._options.dataFields.enabled,this._options.dataFields.expanded,this._options.dataFields.fixed,this._options.dataFields.fixChildren,this._options.dataFields.hasChildren,this._options.dataFields.icon,this._options.dataFields.id,this._options.dataFields.pid,this._options.dataFields.selected,this._options.dataFields.showCheckBox,this._options.dataFields.statusIcon,this._options.dataFields.style,this._options.dataFields.templateObj,this._options.dataFields.text,this._options.dataFields.tooltip,this._options.dataFields.value,this._options.dataFields.visible];return r===!1&&o.push(this._options.dataFields.items),JSON.stringify(n,o,t)}_getCheckedItems(){return this._fullList.filter(n=>n[this._options.dataFields.checked]===!0)}_getDisplayMode(){return this._currentItemDisplay===wo.Partial&&!this._isHoverTemplatePresent&&!this._isSelectedTemplatePresent?wo.Partial:wo.Full}updateFullList(){this._fullList.length=0;let n=this._dataService.getList();return n&&n.forEach(e=>this._addChildItems(e,0,null,!0)),this._fullList}getItemLevel(n){let e=0,t=this.getItemParent(n);for(;t;)e++,t=this.getItemParent(t);return e}getItemParent(n){return this._dataService.getParent(n)}getList(n,e){let t=[];switch(n){case"checked":t=this._getCheckedItems();break;case"current":t=this._currentList;break;case"selected":t=this._currentSelectedItems;break;case"virtual":t=this._scrollItemList?this._scrollItemList.map(r=>r.data):[];break;default:t=this._dataService.getList(e)}return t}_isChildOf(n,e){let t=!1;if(n&&e){let r=e[this._options.dataFields.items];if(r&&r.length>0)for(let o=0;o<r.length;o++){if(this._commonService.isEqual(n[this._options.dataFields.id],r[o][this._options.dataFields.id])){t=!0;break}else t=this._isChildOf(n,r[o]);if(t)break}}return t}_isItemCheckBoxAllowed(n){return this._isCheckBoxVisible&&n&&this._commonService.isTrue(n[this._options.dataFields.allowCheckBox])}_isParentOf(n,e){let t=this._dataService.getParent(e);return!!(n&&e&&t&&this._commonService.isEqual(n[this._options.dataFields.id],t[this._options.dataFields.id]))}isThereChildren(){return this._isThereChildItems}_isThereVisibleChildren(n){let e=!1;if(n){let t=n[this._options.dataFields.items];if(t){for(let r=0;r<t.length;r++)if(this._isItemAllowed(t[r])){e=!0;break}}}return e}_getFirstItem(n){let e=null,t=this._dataService.getList();return n&&(t=n[this._options.dataFields.items]),t=this._applySorting(t),Array.isArray(t)&&t.length>0&&(e=t[0]),e}_getItemRealIndex(n){let e=this._dataService.getList();return e?e.indexOf(n):-1}getPrevItem(n){let e=null;if(n){let t=this._dataService.getList(),r=this.getItemParent(n);if(r&&(t=r[this._options.dataFields.items]),t=this._applySorting(t),Array.isArray(t)){let o=t.indexOf(n);(o=o>0?o-1:-1)>=0&&(e=t[o])}}return e}getNextItem(n){let e=null;if(n){let t=this._dataService.getList(),r=this.getItemParent(n);if(r&&(t=r[this._options.dataFields.items]),t=this._applySorting(t),Array.isArray(t)){let o=t.indexOf(n);(o=o<t.length-1?o+1:-1)>=0&&(e=t[o])}}return e}_getLastItem(n){let e=null,t=this._dataService.getList();return n&&(t=n[this._options.dataFields.items]),t=this._applySorting(t),Array.isArray(t)&&t.length>0&&(e=t[t.length-1]),e}moveItem(n,e,t,r){return B(this,null,function*(){if(n){let o=-1;switch(e){case ni.At:o=r;break;case ni.Down:t=this.getNextItem(n);break;case ni.Left:t=this.getItemParent(n);break;case ni.Right:case ni.Up:t=this.getPrevItem(n);break;default:o=-1}let s=Array.isArray(n)?n:[n],a=[];for(let l=0;l<s.length;l++){let c=s[l],d=!1,h=this.getItemParent(c);for(;h;){if(s.indexOf(h)>=0){d=!0;break}h=this.getItemParent(h)}d||a.push(c)}a.length>0&&this._getItemCurrentIndex(a[0])>this._getItemCurrentIndex(a[a.length-1])&&(a=a.toReversed()),yield this._moveItemAt(a,t,e,o)}return Promise.resolve()})}_processLeftArrowKey(n,e){return this.collapse(n.data),this._refreshFocusedItem(n),null}_processRightArrowKey(n,e){return this.expand(n.data),this._refreshFocusedItem(n),null}_updateBlockSize(){this._currentItemDisplay===wo.Partial?this.virtualMode!==!1&&this._updateLongestItem():(this._blockSize={width:this._scrollBarSize.width+2,height:this._scrollBarSize.height+2},this._currentScrollAppearance===Mn.Dynamic&&(this._blockSize.width+=5),this._longestItemWidthValue=this._getFullItemWidth())}_isItemInCurrentList(n){let e=!1;if(n){for(let t=0;t<this._currentList.length;t++)if(this._currentList[t].data.id===n.id){e=!0;break}}return e}_getFullItemWidth(){return!this._isLongestInProcess&&this._currentItemDisplay===wo.Partial&&(this._isHoverTemplatePresent||this._isSelectedTemplatePresent)?this._longestItemWidth+"px":this._currentItemSize.width+"px"}_updateLongestItem(){let n=this;n._isLongestInProcess=!0,n._prevLongestItemWidth=n._longestObj&&n._isItemInCurrentList(n._longestObj.data)?n._longestObj.width:0,setTimeout(function(){n._longestObj&&!n._isItemInCurrentList(n._longestObj.data)&&(n._longestObj={data:null,width:0});let e=n._getItemContentElemList();e&&(n._calcLongestItem(e),n._prevLongestItemWidth<n._clientRect.width&&(n._prevLongestItemWidth=n._clientRect.width));let t=n._commonService.getPadding(n._elemRef);n._blockSize.width=n._longestObj.width+(t.left+t.right),n._isLongestInProcess=!1,n._longestItemWidth=n._prevLongestItemWidth,n._longestItemWidthValue=n._getFullItemWidth(),n._updateScrollSize()},1)}_calcLongestItem(n,e){let t=0;for(let r=0;r<n.length;r++)if(r<this._scrollItemList.length){let o=this._scrollItemList[r].data,s=this._getObjFromItem(o);if(s){let a=n[r].offsetWidth+s.indent;if(!e&&this._longestObj.data===s.data){this._calcLongestItem(n,!0);break}t<a&&a>=this._longestObj.width&&(t=a,this._longestObj={data:s.data,width:t},this._prevLongestItemWidth=t)}}}_processUpdateCurrentLayout(){let n=this;return new Promise(e=>{if(n._isAnimationAllowed||n._isUpdateAllowed){let t=n._currentFocusObj?n._currentFocusObj.data:null;n._currentCtrlSize={width:n._clientRect.width,height:n._clientRect.height},n._updateClientRect(),n._updateCurrentList(),n.updateFullList(),n._updateScrollItemList(),n.update(),n._updateScrollSize(),n._updateBlockSize(),n._updateItemElems(),n._updateCurrentItemSize(),n._updateVisibleRange(),n._updateScrollItemList(),n._currentItemDisplay===wo.Partial&&n._virtualMode!==!1?n._updateLongestItem():n._updateScrollSize(),n._currentItemSize.width=n._contentSize.width,n._isAutoSized&&(n._clientRect.height=n._visibleRange*n._avgItemHeight,n._updateCtrlSize(10)),n._updateHoverContentPos(),n._updateSelectContentPos(),t&&(n.focusedItem=t),n.update(),n._updateItemElems()}e()})}_updateCurrentLayout(n){let e=this;e._isUpdateAllowed&&(e._resetLayoutTimer(),e._updateCurrentList(),this._isAutoSized&&this._updateVisibleRange(),n&&e.updateFullList(),e._updateScrollItemList(),this._currentItemDisplay===wo.Partial&&this._virtualMode!==!1?e._updateLongestItem():e._updateScrollSize(),e._updateTimer=setTimeout(function(){e._updateBlockSize(),e.update(),e._updateItemElems(),e._updateHoverContentPos(),e._updateSelectContentPos(),e.update(),clearTimeout(e._updateTimer)},1))}_updateScrollLayout(){this._updateClientRect(),this._updateBlockSize(),this._updateScrollSize(),this._currentItemSize={width:this._contentSize.width,height:this._avgItemHeight},this.refresh(),this._updateItemElems(),this.update()}_updateScrollSize(){let n=this;n._contentSize={width:n._clientRect.width-3,height:n._clientRect.height},n._scrollSize={width:n._currentItemDisplay===wo.Partial?n._blockSize.width-n._clientRect.width-2:0,height:n._avgItemHeight*n._currentList.length-n._clientRect.height+n._avgItemHeight},n._isDragActive&&(n._scrollSize.height+=n._scrollSizeAddition),n.isVerScrollVisible()&&(n._currentScrollAppearance===Mn.Static?n._contentSize.width-=16:(n._isHoverTemplatePresent||n._isSelectedTemplatePresent)&&(n._contentSize.width-=13)),n._currentItemDisplay===wo.Partial&&n._scrollSize.width>=-6&&(n.isVerScrollVisible()&&(n._scrollSize.width+=16),(n._isHoverTemplatePresent||n._isSelectedTemplatePresent)&&(n._scrollSize.width+=4)),n.isHorScrollVisible()&&(n._scrollSize.height+=16),n._scrollSize.width=Math.max(0,n._scrollSize.width),n._scrollSize.height=Math.max(0,n._scrollSize.height),n._maxScrollPos={x:n._scrollSize.width,y:n._scrollSize.height},n._currentScrollPos.x>n._maxScrollPos.x&&n._changeHorizontalScrollPos(n._maxScrollPos.x),n._currentScrollPos.y>n._maxScrollPos.y&&n._changeVerticalScrollPos(n._maxScrollPos.y),n._scrollBarSize={width:n.isVerScrollVisible()?n._clientRect.width-16:n._clientRect.width,height:n.isHorScrollVisible()?n._clientRect.height-16:n._clientRect.height},n._currentScrollAppearance===Mn.Static?(n._scrollBarSize.width-=2,n._scrollBarSize.height-=2):(n.isVerScrollVisible()&&(n._scrollBarSize.height+=2),n.isHorScrollVisible()&&(n._scrollBarSize.width+=2),n.isVerScrollVisible()&&n.isHorScrollVisible()&&(n._scrollBarSize.width+=5,n._scrollBarSize.height+=5)),n._scrollLargeChange={x:n._scrollBarSize.width,y:n._scrollBarSize.height},n._blockHoverRect.width=n._clientRect.width-2;let e={height:n._avgItemHeight-2,left:0,top:-9999999,width:n._clientRect.width-2};n.isVerScrollVisible()&&(n._blockHoverRect.width-=16,e.width-=16,n._currentScrollAppearance===Mn.Dynamic&&(n._blockHoverRect.width+=7,e.width+=7)),n._blockSelectRect.forEach(t=>{t.width=e.width,t.height=e.height})}beginLoad(n){if(n)this._options.loadItems.indexOf(n)<0&&this._options.loadItems.push(n);else{this._isLoading=!0,this.update();let e=this.shadowRoot.querySelector(".iui-loading-icon");e&&(this._loadIconPos={top:(this._clientRect.height-e.offsetHeight)/2,left:(this._clientRect.width-e.offsetWidth)/2})}this.update()}endLoad(n){let e=this;if(n){let t=e._options.loadItems.indexOf(n);t>=0&&e._options.loadItems.splice(t,1),e._updateCurrentLayout(!0)}else e._options.loadItems.length=0,e._isLoading=!1,e._isLoadingEnd=!0,e.refresh(),e._loadingEndTimeout=setTimeout(function(){e._isLoadingEnd=!1,e.update(),clearTimeout(e._loadingEndTimeout)},400)}_isItemLoading(n){return this._options.loadItems.indexOf(n)>=0}_checkedChanged(n,e){if(!this._isAnimationInProcess){let t=n.detail.checked;e.data[this._options.dataFields.checked]!==t&&(e.data[this._options.dataFields.checked]=t,this._updateItemRadioButtonValue(e),this._invokeEvent("checkedChanged",{event:n,item:e.data,checked:e.data[this._options.dataFields.checked]}),this.update())}}_getItemRadioValue(n){return!!(n&&n[this._options.dataFields.checked]===!0)}_isItemRadioButtonAllowed(n){return n&&n[this._options.dataFields.allowRadioButton]===!0}_updateItemRadioButtonValue(n){if(n){let e=this.getItemParent(n.data);(e?e[this._options.dataFields.items]:[]).forEach(t=>{this._isItemRadioButtonAllowed(t)&&t!==n.data&&(t[this._options.dataFields.checked]=!1)})}}scrollTo(n,e){let t=this;if(t.virtualMode!==!1&&n)if(e!==void 0){let r=t._getItemCurrentIndex(n);r>=0&&t.scrollPos({x:t._currentScrollPos.x,y:e!==void 0?t._avgItemHeight*(r-e):t._avgItemHeight*(r+1-Math.floor(t._visibleRange/2))}),t._processUpdateLayout()}else{t.suspendLayout();let r=t.getItemParent(n);for(;r!==null;)t.expand(r),r=t.getItemParent(r);t.resumeLayout();let o=setTimeout(function(){let s=t._getItemCurrentIndex(n);s>=0&&(t.scrollPos({x:t._currentScrollPos.x,y:t._avgItemHeight*(s-Math.floor(t._visibleRange/2))}),t._processUpdateLayout()),clearTimeout(o)},150)}}_callAfterSelectEvent(n){let e={item:n};this._invokeEvent("afterSelect",e),this._invokeEvent("selectionChanged",e),this._options.compactMode===!0&&(this.getItemParent(n)&&(n[this._options.dataFields.expanded]=!0),this._processUpdateLayout())}_getControlStyle(){let n=this._currentInlineStyle||{};if(n.cursor=this._ctrlCursor,n.overflow=this.virtualMode?"hidden":"auto",this._ctrlSize.width>0&&(n.width=this._ctrlSize.width+"px"),this._isAutoSized){let e=this._currentCtrlSize.height;this.isHorScrollVisible()&&(e+=16),n.height=e+"px"}else this._ctrlSize.height>0&&(n.height=this._ctrlSize.height+"px");return n}_getBlockStyle(){let n={};return this._currentItemDisplay===wo.Partial&&(n={width:this._blockSize.width+"px"}),n}_getItemInlineContentStyle(n){let e={};return e["padding-left"]=n.indent+"px",e}_isThereNoItems(n){return n[this._options.dataFields.items]&&n[this._options.dataFields.items].length===0}_itemHasChildren(n){return n[this._options.dataFields.hasChildren]&&(this._isThereVisibleChildren(n)||!n[this._options.dataFields.items]||this._isThereNoItems(n))}_updateItemStyle(n){if(n){n.style={general:{},expandBox:{},content:{}},n.inlineStyle=this._getItemInlineStyle(n),n.style.general[this._itemClassName]=!0,n.style.general[this._options.currentStyle.item.general.normal]=!0,n.style.content[this._itemContentClassName]=!0,n.style.content[this._options.currentStyle.item.content.normal]=!0,this._getDisplayMode()===wo.Partial?(n.style.content["iui-treeitem-content-block"]=!0,this._isItemEnabled(n.data)?this._isItemSelected(n.data)?n.style.content[this._options.currentStyle.item.content.selected]=!0:this._isItemHovered(n.data)&&(n.style.content[this._options.currentStyle.item.content.hovered]=!0):n.style.content[this._options.currentStyle.item.content.disabled]=!0):(n.style.general["iui-treeitem-block"]=!0,this._isItemEnabled(n.data)?this._isItemSelected(n.data)?n.style.general[this._options.currentStyle.item.general.selected]=!0:this._isItemHovered(n.data)&&(n.style.general[this._options.currentStyle.item.general.hovered]=!0):n.style.general[this._options.currentStyle.item.general.disabled]=!0),this._options.allowFocus&&this._currentFocusObj&&n.data===this._currentFocusObj.data&&(n.style.content[this._options.currentStyle.item.content.focused]=!0),(this._isThereChildItems||n.data[this._options.dataFields.hasChildren])&&(n.style.expandBox[this._options.currentStyle.item.expandBox.general]=!0),(this._itemHasChildren(n.data)||this._isThereVisibleChildren(n.data))&&(this._isItemLoading(n.data)?n.style.expandBox[this._options.currentStyle.item.expandBox.load]=!0:n.data[this._options.dataFields.expanded]!==!1?n.style.expandBox[this._options.currentStyle.item.expandBox.expanded]=!0:n.style.expandBox[this._options.currentStyle.item.expandBox.collapsed]=!0);let e=this._getObjFromItem(n.data);e&&(e.style=n.style,e.inlineStyle=n.inlineStyle)}}_getAppliedExpandBoxClass(n){return n.style.expandBox}_getAppliedItemClass(n){return n.style.general}_getAppliedItemStyle(n,e){let t=this._commonService.getStyle(n.inlineStyle),r=oe({},t.normal)||{};return this._isItemEnabled(n.data)?this._isItemSelected(n.data)?r=oe({},t.selected)||{}:this._isItemHovered(n.data)&&(r=oe({},t.hovered)||{}):r=oe({},t.disabled)||{},r.position="absolute",n.position&&(r.top=n.position.y+"px",n.removeStart||(r.left=n.position.x-this._currentScrollPos.x+"px")),n.scale!==void 0&&(r.transform="scale("+n.scale+")"),n.animateLeft!==void 0&&(r.left=n.animateLeft+"%"),r.zIndex=n.zIndex!==void 0?n.zIndex:this._visibleRange-e,r.display=this._currentItemDisplay===wo.Partial?"inline-block":"block",r.width=this._longestItemWidthValue,r}_getAppliedItemExpandBoxStyle(n){return this._commonService.getStyle(n.inlineStyle).expandBox||{}}_getCheckBoxClass(n){let e={"iui-treeitem-checkbox":!0};if(this._currentCheckMode===Hd.ThreeState)switch(n[this._options.dataFields.checkState]){case ho.Indeterminate:e["iui-treeitem-checkbox-indeterminate"]=!0;break;case ho.Checked:e["iui-treeitem-checkbox-checked"]=!0;break;default:this._defaultFunc()}else n[this._options.dataFields.checked]&&(e["iui-treeitem-checkbox-checked"]=!0);return e}_getItemStyle(n){return n?{general:this._getItemGeneralStyle(n.general),expandBox:this._getItemExpandBoxStyle(n.expandBox),content:this._getItemContentStyle(n.content)}:this._getDefaultItemStyle()}_getItemExpandBoxStyle(n){return this._commonService.isString(n)?n:n?{general:this._commonService.isFieldAvailable(n.disabled,this._expandBoxClassName),load:this._commonService.isFieldAvailable(n.focused,this._expandBoxClassName+"-load"),expanded:this._commonService.isFieldAvailable(n.normal,this._expandBoxClassName+"-open"),collapsed:this._commonService.isFieldAvailable(n.hovered,this._expandBoxClassName+"-close")}:this._getDefaultItemExpandBoxStyle()}_getDefaultItemStyle(){return{general:this._getDefaultItemGeneralStyle(),expandBox:this._getDefaultItemExpandBoxStyle(),content:this._getDefaultItemContentStyle()}}_getDefaultItemExpandBoxStyle(){return{general:this._defaultStyle.item.expandBox.general,load:this._defaultStyle.item.expandBox.load,expanded:this._defaultStyle.item.expandBox.expanded,collapsed:this._defaultStyle.item.expandBox.collapsed}}_getDefaultListStyle(){return{general:this._getDefaultGeneralStyle(),item:this._getDefaultItemStyle()}}_updateColorSchemeSettings(n){switch(this._currentBaseColorSchemeSettings=Be``,this._currentColorSchemeSettings=Be``,this._currentItemColorSchemeSettings=Be``,this._currentScrollColorSchemeSettings=Be``,n){case ui.Dark:this._currentBaseColorSchemeSettings.cssText=this._commonService.replaceAll(Jz.cssText,"../../../icons",this._currentResourcePath),this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(mk.cssText,"../../../icons",this._currentResourcePath),this._currentItemColorSchemeSettings.cssText=this._commonService.replaceAll(_k.cssText,"../../../icons",this._currentResourcePath),this._currentScrollColorSchemeSettings.cssText=this._commonService.replaceAll(UC.cssText,"../../../icons",this._currentResourcePath);break;case ui.Light:this._currentBaseColorSchemeSettings.cssText=this._commonService.replaceAll(qz.cssText,"../../../icons",this._currentResourcePath),this._currentColorSchemeSettings.cssText=this._commonService.replaceAll(Xz.cssText,"../../../icons",this._currentResourcePath),this._currentItemColorSchemeSettings.cssText=this._commonService.replaceAll(Zz.cssText,"../../../icons",this._currentResourcePath),this._currentScrollColorSchemeSettings.cssText=this._commonService.replaceAll(ZS.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentBaseColorSchemeSettings.cssText="",this._currentColorSchemeSettings.cssText="",this._currentItemColorSchemeSettings.cssText="",this._currentScrollColorSchemeSettings.cssText=""}}_updateThemeSettings(n){switch(this._currentThemeSettings=Be``,this._currentItemThemeSettings=Be``,this._currentScrollStyleSettings=Be``,n){case Vn.Office:this._currentThemeSettings.cssText=this._commonService.replaceAll(Yz.cssText,"../../icons",this._currentResourcePath),this._currentItemThemeSettings.cssText=this._commonService.replaceAll(Qz.cssText,"../../icons",this._currentResourcePath),this._currentScrollStyleSettings.cssText=this._commonService.replaceAll(QS.cssText,"../../icons",this._currentResourcePath);break;case Vn.Dark:this._currentThemeSettings.cssText=this._commonService.replaceAll(mk.cssText,"../../../icons",this._currentResourcePath),this._currentItemThemeSettings.cssText=this._commonService.replaceAll(_k.cssText,"../../../icons",this._currentResourcePath),this._currentScrollStyleSettings.cssText=this._commonService.replaceAll(UC.cssText,"../../../icons",this._currentResourcePath);break;default:this._currentThemeSettings.cssText="",this._currentItemThemeSettings.cssText="",this._currentScrollStyleSettings.cssText=this._commonService.replaceAll(Sg.cssText,"../../icons",this._currentResourcePath)}}_getItemTemplate(n,e){let t=null,r=null;switch(e){case"hover":t=this.itemHoverTemplate;break;case"select":t=this.itemSelectTemplate;break;default:t=this.itemTemplate}if(t){let o=t(n,this._getItemCurrentIndex(n));o&&(r=new Hl(o.strings,o.values,"html",Fh))}if(!r){let o={},s=this._commonService.isString(n[this._options.dataFields.icon])?n[this._options.dataFields.icon].split(" "):[];s.map(a=>o[a]=!0),r=Ke`                 ${s.length>0?Ke`<span class=${Ln(o)}></span>`:Ke``}                 ${n[this._options.dataFields.iconUrl]?Ke`<img style=${sn({verticalAlign:"middle"})} src="${n[this._options.dataFields.iconUrl]} />`:Ke``}                 <span class="iui-item-label" >${n[this._options.dataFields.text]}</span>             `}return r}_getDragTemplate(n){return Ke`             <div class=${Ln({[this._itemClassName]:!0})}>                 <div style=${sn({"padding-left":n.indent+"px"})}>                     <div class=${Ln({[this._itemContentClassName]:!0})}>                         ${this.showExpandBox?Ke`<span class=${Ln(n.style.expandBox)}></span>`:Ke``}                         ${this._isCheckBoxVisible?Ke`<span class=${Ln(this._getCheckBoxClass(n.data))}></span>`:Ke``}                         <div style="display:inline-block">                             ${this._getItemTemplate(n.data)}                         </div>                     </div>                 </div>             </div>         `}_isExpandBoxPresent(n){return this._isThereChildItems||n[this._options.dataFields.hasChildren]}_getDragItemExpandBoxStyle(n){let e={};return(this._isThereChildItems||n[this._options.dataFields.hasChildren])&&(e[this._expandBoxClassName]=!0),(this._itemHasChildren(n)||this._isThereVisibleChildren(n))&&(e[this._expandBoxClassName+"-close"]=!0),e}_calcDragMoveSpace(){return Math.floor(.25*this._currentItemSize.height)}_getDragDropTarget(n){let e=null,t=this._dragDropService.getData();if(this._currentDragPos.y>this._prevDragPos.y)for(let r=this._scrollItemList.length-1;r>=0;r--){let o=this._scrollItemList[r];if(e=o,this._dragListPos.top+this._dragListSize.height>o.position.y&&this._isDropAllowed(t.source,e.data)){this._dropPos=1,this._dragListPos.top+this._dragListSize.height>o.position.y+this._dragMoveSpace&&(this._dragListIndex=r+1,this._dropPos=0,this._dragListPos.top>o.position.y+o.size.height+this._dragMoveSpace/2?this._dropPos=-1:this._dragListPos.top>o.position.y+o.size.height-this._dragMoveSpace&&(this._dropPos=2)),n=!0,this._dragTargetIndex=r;break}}else if(this._currentDragPos.y<this._prevDragPos.y)for(let r=0;r<this._scrollItemList.length;r++){let o=this._scrollItemList[r];if(e=o,this._dragListPos.top<o.position.y+o.size.height&&this._isDropAllowed(t.source,e.data)){this._dropPos=2,this._dragListPos.top<o.position.y+o.size.height-this._dragMoveSpace&&(this._dropPos=0,this._dragListPos.top<o.position.y+o.size.height/2&&(this._dragListIndex=r,this._dropPos=1)),n=!0,this._dragTargetIndex=r;break}}return{pass:n,target:e}}_updateDragIndent(n){this._activeAnimations.filter(e=>e.getTarget()==="INDENT").length===0&&this._animateIndent(this._dragItemList,this._dropPos===0?n+this._options.indent:n)}_animateIndent(n,e){let t=this._updateIndentAnimation.bind(this),r=new Xo("INDENT");this._activeAnimations.push(r);let o=[];n.forEach(s=>o.push({element:s,current:{paddingLeft:s.indent},values:{paddingLeft:e}})),r.animate(o,0,this._currentAnimationSpeedValue,t)}_updateIndentAnimation(n,e,t){n.length>0&&(n.forEach(r=>{r.element&&(r.element.indent=r.values.paddingLeft,e&&(this._clearTargetAnimation("INDENT"),this._clearInactiveAnimations()))}),this.update())}_getRadioButtonLayout(n){let e=Ke``;if(n.showRadioButton){let t=Be`                 .iui-radio-button {                     margin: var(--iui-radio-button-margin, 0 3px);                     padding: var(--iui-radio-button-padding, 3px 0);                 }                 .iui-radio-button-btn {                     margin: var(--iui-radio-button-btn-margin, 0);                 }                 .iui-radio-button-btn span {                     height: var(--iui-radio-button-btn-content-height, 10px);                     width: var(--iui-radio-button-btn-content-width, 10px);                 }             `;e=Ke`                 <iui-radiobutton                      .checked=${this._getItemRadioValue(n.data)}                     .colorScheme="${this._currentColorScheme}"                     .customStyle="${[t,this.customStyle]}"                     .enabled="${this.enabled}"                      .theme="${this._currentTheme}"                     @checkedChanged="${r=>this._checkedChanged(r,n)}"                 ></iui-radiobutton>`}return e}render(){return Ke`                 <style>                     ${Sg}                     ${this._currentBaseStyleSettings}                     ${this._currentBaseColorSchemeSettings}                     ${this._currentScrollStyleSettings}                     ${this._currentControlStyleSettings}                     ${this._currentItemStyleSettings}                     ${this._currentThemeSettings}                     ${this._currentItemThemeSettings}                     ${this._currentColorSchemeSettings}                     ${this._currentItemColorSchemeSettings}                     ${this._currentScrollColorSchemeSettings}                     ${this._currentCustomStyle}                 </style>                 <div data-ctrl="treeview" class=${Ln(this._getControlClass())} style=${sn(this._getControlStyle())} @DOMMouseScroll="${n=>this._processMouseWheel(n)}" @mousewheel="${n=>this._processMouseWheel(n)}" @mouseenter="${n=>this._ctrlMouseEnter(n)}" @mouseleave="${n=>this._ctrlMouseLeave(n)}" @mousemove="${n=>this._onCtrlMouseMove(n)}" @dragenter="${n=>this._ctrlDragEnter(n)}" @dragleave="${n=>this._ctrlDragLeave(n)}" @dragover="${n=>this._ctrlDragOver(n)}" @drop="${n=>this._ctrlDragDrop(n)}" @dragend="${n=>this._ctrlDragEnd(n)}" @scroll="${n=>this._onScroll(n)}">                     <div class=${Ln({"iui-base-loading":!!this._isLoading,"iui-base-loading-end":!!this._isLoadingEnd})}>                         <ul style=${sn({width:this._currentItemDisplay===wo.Partial?"9999px":this._blockSize.width+"px",height:this._contentSize.height+"px",margin:this._isScrollListInit?"-9999px 0 0 0":0,padding:0})} @touchstart="${n=>this._ctrlTouchStart(n)}" @touchend="${n=>this._ctrlTouchEnd(n)}">                             ${this._scrollItemList.map((n,e)=>Ke`                                 <li data-item class=${Ln(this._getAppliedItemClass(n))} style=${sn(this._getAppliedItemStyle(n,e))} @mouseenter="${t=>this._itemMouseEnter(t,n)}" @mousemove="${t=>this._itemMouseMove(t,n)}" @mouseleave="${t=>this._itemMouseLeave(t,n)}">                                     <div style=${sn({"padding-left":n.indent+"px"})} draggable="true" @mousedown="${t=>this._itemMouseDown(t,n)}" @mouseup="${t=>this._itemMouseUp(t,n)}" @dragstart="${t=>this._itemDragStart(t,n,e)}" @dragover="${t=>this._itemDragOver(t,n,e)}" @drop="${t=>this._itemDragDrop(t,n)}" @dragend="${t=>this._ctrlDragEnd(t)}" @touchstart="${t=>this._itemTouchStart(t,n)}" @touchmove="${t=>this._itemTouchMove(t,n)}" @touchend="${t=>this._itemTouchEnd(t,n)}">                                         <div data-item-content class=${Ln(n.style.content)} style=${sn({display:this._currentItemDisplay===wo.Partial?"inline-block":"block"})} tabindex="${n.tabIndex}" @focus="${()=>this._itemGotFocus(n)}" @blur="${()=>this._itemLostFocus(n)}" @keydown="${t=>this._itemKeyDown(t,n)}" @keypress="${t=>this._itemKeyPress(t,n)}" @keyup="${t=>this._itemKeyUp(t,n)}">                                             <div class="iui-treeitem-content-block">                                                 ${this.showExpandBox?Ke`<span class=${Ln(this._getAppliedExpandBoxClass(n))} style=${sn(this._getAppliedItemExpandBoxStyle(n))} @mousedown="${t=>this._expandBoxMouseDown(t,n.data)}" @mouseup="${t=>this._expandBoxMouseUp(t)}" @touchstart="${t=>this._expandBoxTouchStart(t,n.data)}" @touchend="${t=>this._expandBoxTouchEnd(t,n.data)}"></span>`:Ke``}                                                 ${n.showCheckBox?Ke`<span class=${Ln(this._getCheckBoxClass(n.data))} @mousedown="${t=>this._checkItem(t,n.data)}" @touchstart="${t=>this._checkItem(t,n.data)}"></span>`:Ke``}                                                 ${this._getRadioButtonLayout(n)}                                                 <div class="iui-treeitem-content-template" @click="${t=>this._itemClickEvent(t,n)}" @dblclick="${t=>this._itemDblClickEvent(t,n)}" @contextmenu="${t=>this._itemRightClickEvent(t,n)}">                                                     ${this._getItemTemplate(n.data)}                                                 </div>                                             </div>                                         </div>                                     </div>                                 </li>                             `)}                         </ul>                         ${!this._isDragActive&&!this._isAnimationInProcess&&this._isHoverTemplatePresent&&this._hoverItemObj&&this._isContentAllowed(this._hoverItemObj.data,"hover")?Ke`<div class="iui-treeview-block iui-treeview-block-hover" style=${sn({left:this._blockHoverRect.left+"px",top:this._blockHoverRect.top+"px",height:this._blockHoverRect.height+"px",width:this._blockHoverRect.width+"px"})}>                                     <div style=${sn({height:this._blockHoverRect.height+"px"})} @mousemove="${n=>this._hoverBlockMouseMove(n)}" @mouseleave="${n=>this._hoverBlockMouseLeave(n)}">                                         ${this._getItemTemplate(this._hoverItemObj.data,"hover")}                                     </div>                                 </div>`:Ke``}                         ${!this._isDragActive&&!this._isAnimationInProcess&&this._isSelectedTemplatePresent?this._currentSelectedItems.map((n,e)=>Ke`<span>                                     ${this._isContentAllowed(n,"select")?Ke`<div class="iui-treeview-block iui-treeview-block-select" style=${sn(this._getSelectBlockRect(e))}>                                             <div style=${sn({height:this._blockSelectHeight+"px"})}>                                                 ${this._getItemTemplate(n,"select")}                                             </div>                                         </div>`:Ke``}                                     </span>`):Ke``}                         ${this.isVerScrollVisible()?Ke`<iui-scrollbar id="ver-scroll" .allowAnimation="${this._isAnimationAllowed}" .appearance="${this._currentScrollAppearance}" .colorScheme="${this._currentColorScheme}" .enabled="${this.enabled}" .value="${this._currentScrollPos.y}" .max="${this._maxScrollPos.y}" .largeChange="${this._scrollLargeChange.y}" .height="${this._scrollBarSize.height}" .theme="${this._currentTheme}" .visible="${this._isScrollVisible}" @mouseenter="${n=>this._scrollMouseEnter(n)}" @valueChanged="${n=>this._onVerticalScrollChanged(n)}" @scrollStart="${n=>this._onVerticalScrollStart(n)}" @scrollEnd="${n=>this._onVerticalScrollEnd(n)}"></iui-scrollbar>`:Ke``}                         ${this.isHorScrollVisible()?Ke`<iui-scrollbar id="hor-scroll" .allowAnimation="${this._isAnimationAllowed}" .appearance="${this._currentScrollAppearance}" .colorScheme="${this._currentColorScheme}" .enabled="${this.enabled}" orientation="Horizontal" .value="${this._currentScrollPos.x}" .max="${this._maxScrollPos.x}" .width="${this._scrollBarSize.width}" .theme="${this._currentTheme}" .visible="${this._isScrollVisible}" @mouseenter="${n=>this._scrollMouseEnter(n)}" @valueChanged="${n=>this._onHorizontalScrollChanged(n)}" @scrollStart="${n=>this._onHorizontalScrollStart(n)}" @scrollEnd="${n=>this._onHorizontalScrollEnd(n)}"></iui-scrollbar>`:Ke``}                         ${this.isVerScrollVisible()&&this.isHorScrollVisible()?Ke`<div class=${Ln(this._getScrollCornerClass())}></div>`:Ke``}                     </div>                     ${this._isDragActive&&this._isCtrlDragEntered?Ke`<div id="drag-content" class=${Ln(this._getDragListClass())} style=${sn({top:this._dragListPos.top+"px",width:this._contentSize.width-2+"px"})}>                                 ${this._isDragCopy?Ke`<span class="iui-draglist-copy" style=${sn({top:this._currentDragItems===1?this._dragListSize.height/2-8+"px":"3px",left:this._dragListSize.width/2-8+"px"})}></span>`:Ke``}                                 <ul style=${sn({margin:0,padding:0})}>                                     ${this._dragItemList.filter((n,e)=>e<this._maxDragItems).map((n,e)=>Ke`                                         <li class=${Ln({"iui-listitem-animate":this.allowAnimation})} style=${sn({border:"thin solid gray2"})}>                                             ${this._getDragTemplate(n)}                                         </li>                                     `)}                                 </ul>                                 ${this._totalDragItems>this._currentDragItems?Ke`<div class="iui-draglist-corner">                                             <div class="iui-draglist-corner-block"></div>                                             <div class="iui-draglist-num">+${this._totalDragItems-this._currentDragItems}</div>                                         </div>`:Ke``}                             </div>`:Ke``}                     ${this._isLoading?Ke`<div class="iui-loading-icon" style=${sn({top:this._loadIconPos.top+"px",left:this._loadIconPos.left+"px"})}></div>`:Ke``}                 </div>             `}firstUpdated(n){let e=this;e._updateReferences(),setTimeout(function(){e._isHoverTemplatePresent=!!e.itemHoverTemplate,e._isSelectedTemplatePresent=!!e.itemSelectTemplate,e._internalUpdateLayout()},1)}updated(n){n.forEach((e,t)=>{}),this._updateFocusItem()}_updateControlStyleSettings(n){this._currentBaseStyleSettings=Be``,this._currentBaseStyleSettings.cssText=this._commonService.replaceAll(hk.cssText,"../../icons",n),this._currentControlStyleSettings=Be``,this._currentControlStyleSettings.cssText=this._commonService.replaceAll(fk.cssText,"../../icons",n),this._currentItemStyleSettings=Be``,this._currentItemStyleSettings.cssText=this._commonService.replaceAll(gk.cssText,"../../icons",n)}_updateReferences(){this._elemRef=this.shadowRoot.querySelector("div[data-ctrl=treeview]"),this._resizeObserver&&this._resizeObserver.observe(this._elemRef)}};window.customElements.define("iui-treeview",Ck);var eK=Be`
  .fwcBadge {
    display: inline-block;
    border-radius: 50%;
    color: var(--fwcWhite);
    height: 1.3rem;
    width: 1.3rem;
    line-height: 1.3rem;
    text-align: center;
    margin-bottom: 0.2rem;
  }

  .fwcBadgeFw {
    float: left;
    width: 13px;
    height: 13px;
    display: flex; /* Added for centering content */
    align-items: center; /* Vertically center content */
    justify-content: center; /* Horizontally center content */

    p {
      font-size: 9px;
      font-weight: bold;
      text-align: center;
      color: var(--fwcWhite);
      margin: 0; /* Reset margin to avoid unexpected space */
      line-height: 1; /* Ensure single line height */
    }

    &.fwcBadgeFw-C {
      background-color: var(--fwcPaleOrange);      
      margin-right: 1px;
    }

    &.fwcBadgeFw-I {
      background-color: var(--fwcOrange);     
    }
  }

  .spanInfoPill {
    display: inline-block;
    border: 1px solid var(--fwcDarkBlue);
    border-radius: 3px;

    span:first-child {
      color: var(--fwcWhite);
      display: inline-block;
      background-color: var(--fwcDarkBlue);
      border: 1px solid var(--fwcDarkBlue);
      padding: 0 0.4rem;

      p {
        vertical-align: middle;
        display: inline-block;
        margin: 0;
        padding: 0;
        font-family: monospace;
        font-size: smaller;
        text-transform: uppercase;
      }
    }

    span:last-child {
      padding: 0 3px;
    }

    &.pillSuccess {
      border: 1px solid var(--fwcGreen);
      color: var(--fwcDarkGreen);

      span:first-child {
        background: var(--fwcPaleGreen);
        border: 1px solid var(--fwcPaleGreen);
        border-right: 1px solid var(--fwcGreen);
        color: var(--fwcDark);
      }
    }

    &.pillDanger {
      border: 1px solid var(--fwcRed2);
      color: var(--fwcRed2);

      span:first-child {
        background: var(--fwcPaleRed);
        border: 1px solid var(--fwcPaleRed);
        border-right: 1px solid var(--fwcRed2);
        color: var(--fwcRed2);
      }
    }

    &.pillInfo {
      border: 1px solid var(--fwcBlue);
      color: var(--fwcBlue);

      span:first-child {
        background: var(--fwcPaleBlue);
        border: 1px solid var(--fwcPaleBlue);
        border-right: 1px solid var(--fwcBlue);
        color: var(--fwcDarkBlue);
      }
    }

    &.pillInfoBadge {
      border: 1px solid var(--fwcPaleBlue);

      span:first-child {
        background: var(--fwcPaleBlue);

        p {
          color: var(--fwcWhite);
          font-family: inherit;
          text-transform: none;
        }
      }
    }

    &.pillWarnBadge {
      border: 1px solid var(--fwcGreen);

      span:first-child {
        background: var(--fwcGreen);

        p {
          color: var(--fwcWhite);
          font-family: inherit;
          text-transform: none;
        }
      }
    }

    &.pillSecondaryBadge {
      border: 1px solid var(--fwcPaleDark);

      span:first-child {
        background: var(--fwcPaleDark);

        p {
          color: var(--fwcWhite);
          font-family: inherit;
          text-transform: none;
        }
      }
    }
  }

  .spanSimplePill {
    display: inline-block;
    border: 1px solid var(--fwcDarkBlue);
    border-radius: 3px;
    margin: 0 0.5rem;
    padding-left: 3px;
    padding-right: 0.5rem;
    background-color: var(--fwcWhite);
    cursor: pointer;

    &-select {
      font-weight: normal;
      font-style: normal;
      color: var(--fwcMidDark);
    }
  }
`;var tK=Be`
  .flag-icon {
    display: inline-block;
    width: 1.3em;
    height: 1em;
    background-size: cover;
    background-position: 50%;
    background-repeat: no-repeat;
  }
  .flag-icon-ac { background-image: url('/assets/flags/4x3/ac.svg'); }
.flag-icon-ad { background-image: url('/assets/flags/4x3/ad.svg'); }
.flag-icon-ae { background-image: url('/assets/flags/4x3/ae.svg'); }
.flag-icon-af { background-image: url('/assets/flags/4x3/af.svg'); }
.flag-icon-ag { background-image: url('/assets/flags/4x3/ag.svg'); }
.flag-icon-ai { background-image: url('/assets/flags/4x3/ai.svg'); }
.flag-icon-al { background-image: url('/assets/flags/4x3/al.svg'); }
.flag-icon-am { background-image: url('/assets/flags/4x3/am.svg'); }
.flag-icon-ao { background-image: url('/assets/flags/4x3/ao.svg'); }
.flag-icon-aq { background-image: url('/assets/flags/4x3/aq.svg'); }
.flag-icon-ar { background-image: url('/assets/flags/4x3/ar.svg'); }
.flag-icon-as { background-image: url('/assets/flags/4x3/as.svg'); }
.flag-icon-at { background-image: url('/assets/flags/4x3/at.svg'); }
.flag-icon-au { background-image: url('/assets/flags/4x3/au.svg'); }
.flag-icon-aw { background-image: url('/assets/flags/4x3/aw.svg'); }
.flag-icon-ax { background-image: url('/assets/flags/4x3/ax.svg'); }
.flag-icon-az { background-image: url('/assets/flags/4x3/az.svg'); }
.flag-icon-ba { background-image: url('/assets/flags/4x3/ba.svg'); }
.flag-icon-bb { background-image: url('/assets/flags/4x3/bb.svg'); }
.flag-icon-bd { background-image: url('/assets/flags/4x3/bd.svg'); }
.flag-icon-be { background-image: url('/assets/flags/4x3/be.svg'); }
.flag-icon-bf { background-image: url('/assets/flags/4x3/bf.svg'); }
.flag-icon-bg { background-image: url('/assets/flags/4x3/bg.svg'); }
.flag-icon-bh { background-image: url('/assets/flags/4x3/bh.svg'); }
.flag-icon-bi { background-image: url('/assets/flags/4x3/bi.svg'); }
.flag-icon-bj { background-image: url('/assets/flags/4x3/bj.svg'); }
.flag-icon-bl { background-image: url('/assets/flags/4x3/bl.svg'); }
.flag-icon-bm { background-image: url('/assets/flags/4x3/bm.svg'); }
.flag-icon-bn { background-image: url('/assets/flags/4x3/bn.svg'); }
.flag-icon-bo { background-image: url('/assets/flags/4x3/bo.svg'); }
.flag-icon-bq { background-image: url('/assets/flags/4x3/bq.svg'); }
.flag-icon-br { background-image: url('/assets/flags/4x3/br.svg'); }
.flag-icon-bs { background-image: url('/assets/flags/4x3/bs.svg'); }
.flag-icon-bt { background-image: url('/assets/flags/4x3/bt.svg'); }
.flag-icon-bv { background-image: url('/assets/flags/4x3/bv.svg'); }
.flag-icon-bw { background-image: url('/assets/flags/4x3/bw.svg'); }
.flag-icon-by { background-image: url('/assets/flags/4x3/by.svg'); }
.flag-icon-bz { background-image: url('/assets/flags/4x3/bz.svg'); }
.flag-icon-ca { background-image: url('/assets/flags/4x3/ca.svg'); }
.flag-icon-cc { background-image: url('/assets/flags/4x3/cc.svg'); }
.flag-icon-cd { background-image: url('/assets/flags/4x3/cd.svg'); }
.flag-icon-cf { background-image: url('/assets/flags/4x3/cf.svg'); }
.flag-icon-cg { background-image: url('/assets/flags/4x3/cg.svg'); }
.flag-icon-ch { background-image: url('/assets/flags/4x3/ch.svg'); }
.flag-icon-ci { background-image: url('/assets/flags/4x3/ci.svg'); }
.flag-icon-ck { background-image: url('/assets/flags/4x3/ck.svg'); }
.flag-icon-cl { background-image: url('/assets/flags/4x3/cl.svg'); }
.flag-icon-cm { background-image: url('/assets/flags/4x3/cm.svg'); }
.flag-icon-cn { background-image: url('/assets/flags/4x3/cn.svg'); }
.flag-icon-co { background-image: url('/assets/flags/4x3/co.svg'); }
.flag-icon-cp { background-image: url('/assets/flags/4x3/cp.svg'); }
.flag-icon-cr { background-image: url('/assets/flags/4x3/cr.svg'); }
.flag-icon-cu { background-image: url('/assets/flags/4x3/cu.svg'); }
.flag-icon-cv { background-image: url('/assets/flags/4x3/cv.svg'); }
.flag-icon-cw { background-image: url('/assets/flags/4x3/cw.svg'); }
.flag-icon-cx { background-image: url('/assets/flags/4x3/cx.svg'); }
.flag-icon-cy { background-image: url('/assets/flags/4x3/cy.svg'); }
.flag-icon-cz { background-image: url('/assets/flags/4x3/cz.svg'); }
.flag-icon-de { background-image: url('/assets/flags/4x3/de.svg'); }
.flag-icon-dg { background-image: url('/assets/flags/4x3/dg.svg'); }
.flag-icon-dj { background-image: url('/assets/flags/4x3/dj.svg'); }
.flag-icon-dk { background-image: url('/assets/flags/4x3/dk.svg'); }
.flag-icon-dm { background-image: url('/assets/flags/4x3/dm.svg'); }
.flag-icon-do { background-image: url('/assets/flags/4x3/do.svg'); }
.flag-icon-dz { background-image: url('/assets/flags/4x3/dz.svg'); }
.flag-icon-ea { background-image: url('/assets/flags/4x3/ea.svg'); }
.flag-icon-ec { background-image: url('/assets/flags/4x3/ec.svg'); }
.flag-icon-ee { background-image: url('/assets/flags/4x3/ee.svg'); }
.flag-icon-eg { background-image: url('/assets/flags/4x3/eg.svg'); }
.flag-icon-eh { background-image: url('/assets/flags/4x3/eh.svg'); }
.flag-icon-er { background-image: url('/assets/flags/4x3/er.svg'); }
.flag-icon-es-ct { background-image: url('/assets/flags/4x3/es-ct.svg'); }
.flag-icon-es-ga { background-image: url('/assets/flags/4x3/es-ga.svg'); }
.flag-icon-es { background-image: url('/assets/flags/4x3/es.svg'); }
.flag-icon-et { background-image: url('/assets/flags/4x3/et.svg'); }
.flag-icon-eu { background-image: url('/assets/flags/4x3/eu.svg'); }
.flag-icon-fi { background-image: url('/assets/flags/4x3/fi.svg'); }
.flag-icon-fj { background-image: url('/assets/flags/4x3/fj.svg'); }
.flag-icon-fk { background-image: url('/assets/flags/4x3/fk.svg'); }
.flag-icon-fm { background-image: url('/assets/flags/4x3/fm.svg'); }
.flag-icon-fo { background-image: url('/assets/flags/4x3/fo.svg'); }
.flag-icon-fr { background-image: url('/assets/flags/4x3/fr.svg'); }
.flag-icon-ga { background-image: url('/assets/flags/4x3/ga.svg'); }
.flag-icon-gb-eng { background-image: url('/assets/flags/4x3/gb-eng.svg'); }
.flag-icon-gb-nir { background-image: url('/assets/flags/4x3/gb-nir.svg'); }
.flag-icon-gb-sct { background-image: url('/assets/flags/4x3/gb-sct.svg'); }
.flag-icon-gb-wls { background-image: url('/assets/flags/4x3/gb-wls.svg'); }
.flag-icon-gb { background-image: url('/assets/flags/4x3/gb.svg'); }
.flag-icon-gd { background-image: url('/assets/flags/4x3/gd.svg'); }
.flag-icon-ge { background-image: url('/assets/flags/4x3/ge.svg'); }
.flag-icon-gf { background-image: url('/assets/flags/4x3/gf.svg'); }
.flag-icon-gg { background-image: url('/assets/flags/4x3/gg.svg'); }
.flag-icon-gh { background-image: url('/assets/flags/4x3/gh.svg'); }
.flag-icon-gi { background-image: url('/assets/flags/4x3/gi.svg'); }
.flag-icon-gl { background-image: url('/assets/flags/4x3/gl.svg'); }
.flag-icon-gm { background-image: url('/assets/flags/4x3/gm.svg'); }
.flag-icon-gn { background-image: url('/assets/flags/4x3/gn.svg'); }
.flag-icon-gp { background-image: url('/assets/flags/4x3/gp.svg'); }
.flag-icon-gq { background-image: url('/assets/flags/4x3/gq.svg'); }
.flag-icon-gr { background-image: url('/assets/flags/4x3/gr.svg'); }
.flag-icon-gs { background-image: url('/assets/flags/4x3/gs.svg'); }
.flag-icon-gt { background-image: url('/assets/flags/4x3/gt.svg'); }
.flag-icon-gu { background-image: url('/assets/flags/4x3/gu.svg'); }
.flag-icon-gw { background-image: url('/assets/flags/4x3/gw.svg'); }
.flag-icon-gy { background-image: url('/assets/flags/4x3/gy.svg'); }
.flag-icon-hk { background-image: url('/assets/flags/4x3/hk.svg'); }
.flag-icon-hm { background-image: url('/assets/flags/4x3/hm.svg'); }
.flag-icon-hn { background-image: url('/assets/flags/4x3/hn.svg'); }
.flag-icon-hr { background-image: url('/assets/flags/4x3/hr.svg'); }
.flag-icon-ht { background-image: url('/assets/flags/4x3/ht.svg'); }
.flag-icon-hu { background-image: url('/assets/flags/4x3/hu.svg'); }
.flag-icon-ic { background-image: url('/assets/flags/4x3/ic.svg'); }
.flag-icon-id { background-image: url('/assets/flags/4x3/id.svg'); }
.flag-icon-ie { background-image: url('/assets/flags/4x3/ie.svg'); }
.flag-icon-il { background-image: url('/assets/flags/4x3/il.svg'); }
.flag-icon-im { background-image: url('/assets/flags/4x3/im.svg'); }
.flag-icon-in { background-image: url('/assets/flags/4x3/in.svg'); }
.flag-icon-io { background-image: url('/assets/flags/4x3/io.svg'); }
.flag-icon-iq { background-image: url('/assets/flags/4x3/iq.svg'); }
.flag-icon-ir { background-image: url('/assets/flags/4x3/ir.svg'); }
.flag-icon-is { background-image: url('/assets/flags/4x3/is.svg'); }
.flag-icon-it { background-image: url('/assets/flags/4x3/it.svg'); }
.flag-icon-je { background-image: url('/assets/flags/4x3/je.svg'); }
.flag-icon-jm { background-image: url('/assets/flags/4x3/jm.svg'); }
.flag-icon-jo { background-image: url('/assets/flags/4x3/jo.svg'); }
.flag-icon-jp { background-image: url('/assets/flags/4x3/jp.svg'); }
.flag-icon-ke { background-image: url('/assets/flags/4x3/ke.svg'); }
.flag-icon-kg { background-image: url('/assets/flags/4x3/kg.svg'); }
.flag-icon-kh { background-image: url('/assets/flags/4x3/kh.svg'); }
.flag-icon-ki { background-image: url('/assets/flags/4x3/ki.svg'); }
.flag-icon-km { background-image: url('/assets/flags/4x3/km.svg'); }
.flag-icon-kn { background-image: url('/assets/flags/4x3/kn.svg'); }
.flag-icon-kp { background-image: url('/assets/flags/4x3/kp.svg'); }
.flag-icon-kr { background-image: url('/assets/flags/4x3/kr.svg'); }
.flag-icon-kw { background-image: url('/assets/flags/4x3/kw.svg'); }
.flag-icon-ky { background-image: url('/assets/flags/4x3/ky.svg'); }
.flag-icon-kz { background-image: url('/assets/flags/4x3/kz.svg'); }
.flag-icon-la { background-image: url('/assets/flags/4x3/la.svg'); }
.flag-icon-lb { background-image: url('/assets/flags/4x3/lb.svg'); }
.flag-icon-lc { background-image: url('/assets/flags/4x3/lc.svg'); }
.flag-icon-li { background-image: url('/assets/flags/4x3/li.svg'); }
.flag-icon-lk { background-image: url('/assets/flags/4x3/lk.svg'); }
.flag-icon-lr { background-image: url('/assets/flags/4x3/lr.svg'); }
.flag-icon-ls { background-image: url('/assets/flags/4x3/ls.svg'); }
.flag-icon-lt { background-image: url('/assets/flags/4x3/lt.svg'); }
.flag-icon-lu { background-image: url('/assets/flags/4x3/lu.svg'); }
.flag-icon-lv { background-image: url('/assets/flags/4x3/lv.svg'); }
.flag-icon-ly { background-image: url('/assets/flags/4x3/ly.svg'); }
.flag-icon-ma { background-image: url('/assets/flags/4x3/ma.svg'); }
.flag-icon-mc { background-image: url('/assets/flags/4x3/mc.svg'); }
.flag-icon-md { background-image: url('/assets/flags/4x3/md.svg'); }
.flag-icon-me { background-image: url('/assets/flags/4x3/me.svg'); }
.flag-icon-mf { background-image: url('/assets/flags/4x3/mf.svg'); }
.flag-icon-mg { background-image: url('/assets/flags/4x3/mg.svg'); }
.flag-icon-mh { background-image: url('/assets/flags/4x3/mh.svg'); }
.flag-icon-mk { background-image: url('/assets/flags/4x3/mk.svg'); }
.flag-icon-ml { background-image: url('/assets/flags/4x3/ml.svg'); }
.flag-icon-mm { background-image: url('/assets/flags/4x3/mm.svg'); }
.flag-icon-mn { background-image: url('/assets/flags/4x3/mn.svg'); }
.flag-icon-mo { background-image: url('/assets/flags/4x3/mo.svg'); }
.flag-icon-mp { background-image: url('/assets/flags/4x3/mp.svg'); }
.flag-icon-mq { background-image: url('/assets/flags/4x3/mq.svg'); }
.flag-icon-mr { background-image: url('/assets/flags/4x3/mr.svg'); }
.flag-icon-ms { background-image: url('/assets/flags/4x3/ms.svg'); }
.flag-icon-mt { background-image: url('/assets/flags/4x3/mt.svg'); }
.flag-icon-mu { background-image: url('/assets/flags/4x3/mu.svg'); }
.flag-icon-mv { background-image: url('/assets/flags/4x3/mv.svg'); }
.flag-icon-mw { background-image: url('/assets/flags/4x3/mw.svg'); }
.flag-icon-mx { background-image: url('/assets/flags/4x3/mx.svg'); }
.flag-icon-my { background-image: url('/assets/flags/4x3/my.svg'); }
.flag-icon-mz { background-image: url('/assets/flags/4x3/mz.svg'); }
.flag-icon-na { background-image: url('/assets/flags/4x3/na.svg'); }
.flag-icon-nc { background-image: url('/assets/flags/4x3/nc.svg'); }
.flag-icon-ne { background-image: url('/assets/flags/4x3/ne.svg'); }
.flag-icon-nf { background-image: url('/assets/flags/4x3/nf.svg'); }
.flag-icon-ng { background-image: url('/assets/flags/4x3/ng.svg'); }
.flag-icon-ni { background-image: url('/assets/flags/4x3/ni.svg'); }
.flag-icon-nl { background-image: url('/assets/flags/4x3/nl.svg'); }
.flag-icon-no { background-image: url('/assets/flags/4x3/no.svg'); }
.flag-icon-np { background-image: url('/assets/flags/4x3/np.svg'); }
.flag-icon-nr { background-image: url('/assets/flags/4x3/nr.svg'); }
.flag-icon-nu { background-image: url('/assets/flags/4x3/nu.svg'); }
.flag-icon-nz { background-image: url('/assets/flags/4x3/nz.svg'); }
.flag-icon-om { background-image: url('/assets/flags/4x3/om.svg'); }
.flag-icon-pa { background-image: url('/assets/flags/4x3/pa.svg'); }
.flag-icon-pe { background-image: url('/assets/flags/4x3/pe.svg'); }
.flag-icon-pf { background-image: url('/assets/flags/4x3/pf.svg'); }
.flag-icon-pg { background-image: url('/assets/flags/4x3/pg.svg'); }
.flag-icon-ph { background-image: url('/assets/flags/4x3/ph.svg'); }
.flag-icon-pk { background-image: url('/assets/flags/4x3/pk.svg'); }
.flag-icon-pl { background-image: url('/assets/flags/4x3/pl.svg'); }
.flag-icon-pm { background-image: url('/assets/flags/4x3/pm.svg'); }
.flag-icon-pn { background-image: url('/assets/flags/4x3/pn.svg'); }
.flag-icon-pr { background-image: url('/assets/flags/4x3/pr.svg'); }
.flag-icon-ps { background-image: url('/assets/flags/4x3/ps.svg'); }
.flag-icon-pt { background-image: url('/assets/flags/4x3/pt.svg'); }
.flag-icon-pw { background-image: url('/assets/flags/4x3/pw.svg'); }
.flag-icon-py { background-image: url('/assets/flags/4x3/py.svg'); }
.flag-icon-qa { background-image: url('/assets/flags/4x3/qa.svg'); }
.flag-icon-re { background-image: url('/assets/flags/4x3/re.svg'); }
.flag-icon-ro { background-image: url('/assets/flags/4x3/ro.svg'); }
.flag-icon-rs { background-image: url('/assets/flags/4x3/rs.svg'); }
.flag-icon-ru { background-image: url('/assets/flags/4x3/ru.svg'); }
.flag-icon-rw { background-image: url('/assets/flags/4x3/rw.svg'); }
.flag-icon-sa { background-image: url('/assets/flags/4x3/sa.svg'); }
.flag-icon-sb { background-image: url('/assets/flags/4x3/sb.svg'); }
.flag-icon-sc { background-image: url('/assets/flags/4x3/sc.svg'); }
.flag-icon-sd { background-image: url('/assets/flags/4x3/sd.svg'); }
.flag-icon-se { background-image: url('/assets/flags/4x3/se.svg'); }
.flag-icon-sg { background-image: url('/assets/flags/4x3/sg.svg'); }
.flag-icon-sh { background-image: url('/assets/flags/4x3/sh.svg'); }
.flag-icon-si { background-image: url('/assets/flags/4x3/si.svg'); }
.flag-icon-sj { background-image: url('/assets/flags/4x3/sj.svg'); }
.flag-icon-sk { background-image: url('/assets/flags/4x3/sk.svg'); }
.flag-icon-sl { background-image: url('/assets/flags/4x3/sl.svg'); }
.flag-icon-sm { background-image: url('/assets/flags/4x3/sm.svg'); }
.flag-icon-sn { background-image: url('/assets/flags/4x3/sn.svg'); }
.flag-icon-so { background-image: url('/assets/flags/4x3/so.svg'); }
.flag-icon-sr { background-image: url('/assets/flags/4x3/sr.svg'); }
.flag-icon-ss { background-image: url('/assets/flags/4x3/ss.svg'); }
.flag-icon-st { background-image: url('/assets/flags/4x3/st.svg'); }
.flag-icon-sv { background-image: url('/assets/flags/4x3/sv.svg'); }
.flag-icon-sx { background-image: url('/assets/flags/4x3/sx.svg'); }
.flag-icon-sy { background-image: url('/assets/flags/4x3/sy.svg'); }
.flag-icon-sz { background-image: url('/assets/flags/4x3/sz.svg'); }
.flag-icon-ta { background-image: url('/assets/flags/4x3/ta.svg'); }
.flag-icon-tc { background-image: url('/assets/flags/4x3/tc.svg'); }
.flag-icon-td { background-image: url('/assets/flags/4x3/td.svg'); }
.flag-icon-tf { background-image: url('/assets/flags/4x3/tf.svg'); }
.flag-icon-tg { background-image: url('/assets/flags/4x3/tg.svg'); }
.flag-icon-th { background-image: url('/assets/flags/4x3/th.svg'); }
.flag-icon-tj { background-image: url('/assets/flags/4x3/tj.svg'); }
.flag-icon-tk { background-image: url('/assets/flags/4x3/tk.svg'); }
.flag-icon-tl { background-image: url('/assets/flags/4x3/tl.svg'); }
.flag-icon-tm { background-image: url('/assets/flags/4x3/tm.svg'); }
.flag-icon-tn { background-image: url('/assets/flags/4x3/tn.svg'); }
.flag-icon-to { background-image: url('/assets/flags/4x3/to.svg'); }
.flag-icon-tr { background-image: url('/assets/flags/4x3/tr.svg'); }
.flag-icon-tt { background-image: url('/assets/flags/4x3/tt.svg'); }
.flag-icon-tv { background-image: url('/assets/flags/4x3/tv.svg'); }
.flag-icon-tw { background-image: url('/assets/flags/4x3/tw.svg'); }
.flag-icon-tz { background-image: url('/assets/flags/4x3/tz.svg'); }
.flag-icon-ua { background-image: url('/assets/flags/4x3/ua.svg'); }
.flag-icon-ug { background-image: url('/assets/flags/4x3/ug.svg'); }
.flag-icon-um { background-image: url('/assets/flags/4x3/um.svg'); }
.flag-icon-un { background-image: url('/assets/flags/4x3/un.svg'); }
.flag-icon-us { background-image: url('/assets/flags/4x3/us.svg'); }
.flag-icon-uy { background-image: url('/assets/flags/4x3/uy.svg'); }
.flag-icon-uz { background-image: url('/assets/flags/4x3/uz.svg'); }
.flag-icon-va { background-image: url('/assets/flags/4x3/va.svg'); }
.flag-icon-vc { background-image: url('/assets/flags/4x3/vc.svg'); }
.flag-icon-ve { background-image: url('/assets/flags/4x3/ve.svg'); }
.flag-icon-vg { background-image: url('/assets/flags/4x3/vg.svg'); }
.flag-icon-vi { background-image: url('/assets/flags/4x3/vi.svg'); }
.flag-icon-vn { background-image: url('/assets/flags/4x3/vn.svg'); }
.flag-icon-vu { background-image: url('/assets/flags/4x3/vu.svg'); }
.flag-icon-wf { background-image: url('/assets/flags/4x3/wf.svg'); }
.flag-icon-ws { background-image: url('/assets/flags/4x3/ws.svg'); }
.flag-icon-xk { background-image: url('/assets/flags/4x3/xk.svg'); }
.flag-icon-xx { background-image: url('/assets/flags/4x3/xx.svg'); }
.flag-icon-ye { background-image: url('/assets/flags/4x3/ye.svg'); }
.flag-icon-yt { background-image: url('/assets/flags/4x3/yt.svg'); }
.flag-icon-za { background-image: url('/assets/flags/4x3/za.svg'); }
.flag-icon-zm { background-image: url('/assets/flags/4x3/zm.svg'); }
.flag-icon-zw { background-image: url('/assets/flags/4x3/zw.svg'); }

`;var iK=Be`
  .fwcBlue {
    color: var(--fwcBlue);
  }
  .fwcOrange {
    color: var(--fwcOrange);
  }
  .fwcDarkBlue {
    color: var(--fwcDarkBlue);
  }
  .fwcTree-item {
    display: inline-flex;
    align-items: center;
    margin-left: 0;
    transition: all 0.3s;
    height: 27px !important;
  }
  
  .fwcTree-item * {
    pointer-events: none;
    margin-right: 0.25rem;
  }
  .fwcTree-item .fwcTreeIcon{
    margin-top: 5px;   
  }
  .fwcTree-item.fwcHighlightNode {
    margin-left: 0.2em;
    background-color: var(--fwcPaleGreen) !important;
    padding-right: 8em;
  }
  
  .fwcTree-item.fwcSelectedPolicyNode .fwc-label {
    font-weight: bold !important;
  }
  
  div.fwcTree-item--disabled .fwcTreeIcon::before {
    content: "";    
    position: absolute;
    top: 0.35em;
  }
  
  .fwcTree-item--disabled .fwc-label {
    color: var(--fwcPaleDark) !important;
  }

  .fwcTree-item-highlight{
    margin-left: 0.2em;
    background-color: var(--fwcPaleGreen) !important;
    padding-right: 8em;
  }



  .clickable-area {
    display: block;
    width: 100%;
    height: 100%;
    cursor: pointer;
  }
  div > div > ul > li:nth-child(1) > div > div > div > div > iui-contextmenu > div > span.fwcDark {
    margin-left: -0.5rem;
  }
`;var nK=Be`
    @import url('node_modules/@fortawesome/fontawesome-free/css/all.css');

    .fa-brands {
        display: inline-block;
        font-family: 'Font Awesome 5 Brands';
        font-weight: normal;
        font-style: normal;
        font-size: inherit;
        text-rendering: auto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .fa-windows:before {
        content: "\\f17a";
    }
`;var rK=(()=>{class i{constructor(e,t){this.el=e,this.tr=t}ngAfterViewInit(){}static{this.\u0275fac=function(t){return new(t||i)(S(Ze),S(Ca))}}static{this.\u0275dir=Et({type:i,selectors:[["","appStepContent",""]],inputs:{stepTitle:"stepTitle"}})}}return i})();var oK=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l){super(r,t,e,s,l,a),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.translate=o,this.cd=s,this.router=a,this.store=l,this.onStepDisplay=new X,this.translate.get("CONFIG_PANEL.TITLE").subscribe(c=>{this.createDialog(c,"fa fa-magic")})}ngOnInit(){this.resetState()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){this.stepsTemplates&&this.stepsTemplates.length&&(this.stepsTemplates.forEach((e,t)=>{this.state.steps.push({stepItem:{id:""+t,label:this.translate.instant(e.stepTitle)},stepTemplate:e})}),this.displayStepContent(0))}resetState(){this.state={loadingData:!1,errorMessages:[],selectedStep:0,steps:this.state&&this.state.steps?this.state.steps:[]}}getStepsItems(){let e=[];return this.state&&Array.isArray(this.state.steps)&&this.state.steps.forEach(t=>{e.push(t.stepItem)}),e}getSelectedStep(){let e=null;return this.state&&Array.isArray(this.state.steps)&&this.state.selectedStep>=0&&this.state.selectedStep<=this.state.steps.length&&(e=this.state.steps[this.state.selectedStep]),e}getSelectedStepTemplate(){let e=null,t=this.getSelectedStep();return t&&(e=t.stepTemplate),e}displayStepContent(e){this.state.selectedStep=e,this.recenterDialog(),this.onStepDisplay.emit(e)}handleClose(e){this.hideDialog(),e&&this.reloadCurrentRouteAlt()}reloadCurrentRoute(){let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}reloadCurrentRouteAlt(){let e=this.router.url;this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate([e])}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(Ye),S(we),S(ct),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-wizard-panel"]],viewQuery:function(t,r){if(t&1&&le(rK,5),t&2){let o;te(o=ie())&&(r.stepsTemplates=o)}},outputs:{onStepDisplay:"onStepDisplay"},features:[Se],decls:0,vars:0,template:function(t,r){},encapsulation:2})}}return i})();var jC=class extends _g{constructor(n){super(n),n&&(this.firewall=n.firewall,this.cluster=n.cluster,this.name=n.name,this.comment=n.comment,this.install_user=n.install_user,this.install_pass=n.install_pass,this.save_user_pass=n.save_user_pass,this.install_interface=n.install_interface,this.install_ipobj=n.install_ipobj,this.fwmaster=n.fwmaster,this.install_port=n.install_port,this.options=n.options,this.plugins=n.plugins,this.install_communication=n.install_communication,this.install_protocol=n.install_protocol,this.install_apikey=n.install_apikey)}getValue(){return ke(oe({},super.getValue()),{firewall:this.firewall,cluster:this.cluster,name:this.name,comment:this.comment,install_user:this.install_user,install_pass:this.install_pass,save_user_pass:this.save_user_pass,install_interface:this.install_interface,install_ipobj:this.install_ipobj,fwmaster:this.fwmaster,install_port:this.install_port,options:this.options,plugins:this.plugins,install_communication:this.install_communication,install_protocol:this.install_protocol,install_apikey:this.install_apikey})}};var RHe=["fwcInterfacesEditor"],PHe=["buttonNext"],DHe=["inputObjName"],FHe=["fwcIptablesSaveComponent"],kHe=["inputNode"],NHe=["inputDiscoverNode"],LHe=i=>({visibility:i}),MHe=i=>({error:i}),sK=i=>({objName:i});function VHe(i,n){i&1&&(m(0,"div",16)(1,"h6",17),P(2,"i",18),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"WIZARDS.FIREWALL_IMPORT.TITLE")," "))}function BHe(i,n){if(i&1&&(m(0,"div",19),ue(1,21),g()),i&2){let e=u(3);p(),f("ngTemplateOutlet",e.getSelectedStepTemplate().tr)}}function UHe(i,n){if(i&1){let e=L();m(0,"div",19)(1,"p-steps",20),Oe("activeIndexChange",function(r){y(e);let o=u(2);return Re(o.state.selectedStep,r)||(o.state.selectedStep=r),w(r)}),g(),m(2,"div",9),v(3,BHe,2,1,"div",19),g()()}if(i&2){let e,t=u(2);p(),f("model",t.getStepsItems())("readonly",!0),Te("activeIndex",t.state.selectedStep),p(2),W((e=t.getSelectedStepTemplate())!=null&&e.tr&&!(!(t.state==null||t.state.errorMessages==null)&&t.state.errorMessages.length)?3:-1)}}function jHe(i,n){if(i&1){let e=L();m(0,"div",19)(1,"p-messages",22),Oe("valueChange",function(r){y(e);let o=u(2);return Re(o.state.errorMessages,r)||(o.state.errorMessages=r),w(r)}),g()()}if(i&2){let e=u(2);p(),Te("value",e.state.errorMessages),f("closable",!1)}}function GHe(i,n){if(i&1&&(m(0,"div",9),v(1,UHe,4,4,"div",19)(2,jHe,2,2,"div",19),g()),i&2){let e,t=u();p(),W((e=t.getStepsItems())!=null&&e.length?1:-1),p(),W(t.state.errorMessages!=null&&t.state.errorMessages.length?2:-1)}}function HHe(i,n){if(i&1){let e=L();m(0,"button",26),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.handleClose())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",e.state==null?null:e.state.loadingData)}}function WHe(i,n){if(i&1){let e=L();m(0,"button",30,1),D(2,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handlePrevNextButton(!0))}),g()}if(i&2){let e=u(3);Q("label",N(2,2,"WIZARDS.GLOBALS.BUTTONS.NEXT")),f("disabled",e.state.loadingData||e.isPrevNextButtonDisabled(!0))}}function zHe(i,n){if(i&1){let e=L();m(0,"button",31),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handleClose(!0))}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.FINISH"))}function KHe(i,n){if(i&1){let e=L();m(0,"div",25)(1,"button",27),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.handlePrevNextButton())}),g(),v(3,WHe,3,4,"button",28)(4,zHe,2,3,"button",29),g()}if(i&2){let e=u(2);p(),Q("label",N(2,3,"WIZARDS.GLOBALS.BUTTONS.PREVIOUS")),f("disabled",e.state.loadingData||e.isPrevNextButtonDisabled()),p(2),W(e.state.selectedStep<e.getStepsItems().length-1?3:4)}}function $He(i,n){if(i&1&&(m(0,"div",9)(1,"div",23),v(2,HHe,2,4,"button",24),g(),v(3,KHe,5,5,"div",25),g()),i&2){let e=u();p(2),W(e.state.selectedStep<e.getStepsItems().length-2?2:-1),p(),W(!(e.state==null||e.state.errorMessages==null)&&e.state.errorMessages.length?-1:3)}}function JHe(i,n){i&1&&(m(0,"div",9)(1,"div",32),P(2,"img",33),g(),P(3,"div",34),D(4,"translate"),g()),i&2&&(p(3),Q("innerHTML",N(4,1,"WIZARDS.FIREWALL_IMPORT.STEPS.0.TEXT"),an))}function qHe(i,n){}function YHe(i,n){i&1&&(m(0,"p",55),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"ITEM_PANEL.ERRORS.FIELD_INVALID_NAME")," "))}function XHe(i,n){if(i&1){let e=L();m(0,"button",59),D(1,"translate"),k("click",function(){y(e);let r=u().$index,o=u(3);return w(o.nodeRemove(r))}),g()}if(i&2){let e=u(4);Q("pTooltip",N(1,2,"CLUSTER.MSG_CLUSTER_EDITION.TT_NODE_DELETE")),f("disabled",e.state==null?null:e.state.loadingData)}}function QHe(i,n){if(i&1){let e=L();m(0,"button",60),D(1,"translate"),k("click",function(){y(e);let r=u(4);return w(r.nodeAdd())}),g()}if(i&2){let e=u(4);Q("pTooltip",N(1,2,"CLUSTER.MSG_CLUSTER_EDITION.TT_NODE_ADD")),f("disabled",(e.state==null?null:e.state.loadingData)||!e.formModel.get("fwnodes").valid)}}function ZHe(i,n){if(i&1&&(m(0,"div",53)(1,"div",43)(2,"div",44)(3,"label",45),F(4),D(5,"translate"),g()(),m(6,"div",46),P(7,"input",54,3),D(9,"translate"),v(10,YHe,3,3,"p",55),g(),m(11,"div",56),v(12,XHe,2,4,"button",57)(13,QHe,2,4,"button",58),g()()()),i&2){let e=n.$implicit,t=n.$index,r=u(3);f("formGroupName",t),p(4),J(" ",N(5,8,"FW.MSG_FW_EDITION.NAME")," "),p(3),jy("id","fwName",t,""),Q("placeholder",N(9,10,"CLUSTER.MSG_CLUSTER_EDITION.NODE_NAME")),p(3),W(!e.get("name").valid&&!e.get("name").pristine?10:-1),p(2),W(r.getFormNodes().controls.length>1?12:-1),p(),W(t+1==r.getFormNodes().controls.length?13:-1)}}function eWe(i,n){if(i&1&&(m(0,"div",51)(1,"div",19)(2,"h5",52),F(3),D(4,"translate"),g()(),xr(5,ZHe,14,12,"div",53,Ar),g()),i&2){let e=u(2);p(3),J(" ",N(4,1,"CLUSTER.MSG_CLUSTER_EDITION.NODES")," "),p(2),Tr(e.getFormNodes().controls)}}function tWe(i,n){if(i&1){let e=L();m(0,"div",9)(1,"div",35),F(2),D(3,"translate"),g(),m(4,"div",19)(5,"div",36)(6,"span",37)(7,"p-radioButton",38),D(8,"translate"),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.selectFwCluster,r)||(o.selectFwCluster=r),w(r)}),k("click",function(){y(e);let r=u();return w(r.handleSelectObjType())}),g()(),P(9,"span",39),m(10,"span",37)(11,"p-radioButton",38),D(12,"translate"),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.selectFwCluster,r)||(o.selectFwCluster=r),w(r)}),k("click",function(){y(e);let r=u();return w(r.handleSelectObjType())}),g()()()()(),m(13,"form",40)(14,"fieldset",41),k("keyup.enter",function(){y(e);let r=u();return w(r.handlePrevNextButton(!0))}),m(15,"div",9)(16,"div",42)(17,"div",43)(18,"div",44)(19,"label",45),F(20),D(21,"translate"),g()(),m(22,"div",46),P(23,"input",47,2),D(25,"translate"),g()(),m(26,"p",48),F(27),D(28,"translate"),g()(),m(29,"div",42)(30,"div",43)(31,"div",44)(32,"label",49),F(33),D(34,"translate"),g()(),m(35,"div",46),P(36,"input",50),D(37,"translate"),g()()()(),v(38,qHe,0,0)(39,eWe,7,3,"div",51),g()()}if(i&2){let e=u();p(2),J(" ",N(3,15,"WIZARDS.FIREWALL_IMPORT.STEPS.1.TEXT")," "),p(5),Q("label",N(8,17,"WIZARDS.FIREWALL_IMPORT.STEPS.1.OPTIONS.FW")),f("value",e.ObjectTypes.OBJ_FIREWALL),Te("ngModel",e.selectFwCluster),p(4),Q("label",N(12,19,"WIZARDS.FIREWALL_IMPORT.STEPS.1.OPTIONS.CLUSTER")),f("value",e.ObjectTypes.OBJ_CLUSTER),Te("ngModel",e.selectFwCluster),p(2),f("formGroup",e.formModel),p(7),$(N(21,21,"FW.MSG_FW_EDITION.NAME")),p(3),Q("placeholder",N(25,23,"FW.MSG_FW_EDITION.NAME")),p(3),f("ngStyle",ne(31,LHe,e.formModel.get("name").valid||e.formModel.get("name").pristine?"hidden":"visible")),p(),J(" ",N(28,25,"ITEM_PANEL.ERRORS.FIELD_INVALID_NAME")," "),p(6),$(N(34,27,"FW.MSG_FW_EDITION.DESC")),p(3),Q("placeholder",N(37,29,"FW.MSG_FW_EDITION.DESC")),p(2),W(e.selectFwCluster===e.ObjectTypes.OBJ_FIREWALL?38:39)}}function iWe(i,n){if(i&1){let e=L();m(0,"div",72)(1,"div",68)(2,"select",75),k("change",function(){return y(e),w(!0)}),m(3,"option",76),F(4),D(5,"translate"),g(),m(6,"option",77),F(7,"HTTPS"),g(),m(8,"option",78),F(9,"HTTP"),g()()()(),m(10,"div",79)(11,"div",68),P(12,"input",80),D(13,"translate"),m(14,"button",81),k("mousedown",function(){y(e);let r=u().$index,o=u(4);return w(o.displayApiKey[r]=!0)})("mouseup",function(){y(e);let r=u().$index,o=u(4);return w(o.displayApiKey[r]=!1)})("mouseout",function(){y(e);let r=u().$index,o=u(4);return w(o.displayApiKey[r]=!1)}),g()()()}if(i&2){let e=u().$index,t=u(4);p(3),f("value",null),p(),J(" ",N(5,5,"FW.MSG_FW_EDITION.AGENT_PROTOCOL")," "),p(8),Q("placeholder",N(13,7,"FW.MSG_FW_EDITION.AGENT_APIKEY")),f("showPassword",t.displayApiKey[e])("feedback",!1)}}function nWe(i,n){if(i&1){let e=L();m(0,"div",82),P(1,"input",83),D(2,"translate"),g(),m(3,"div",82)(4,"div",68),P(5,"input",84),D(6,"translate"),D(7,"translate"),m(8,"button",81),k("mousedown",function(){y(e);let r=u().$index,o=u(4);return w(o.displaySSH[r]=!0)})("mouseup",function(){y(e);let r=u().$index,o=u(4);return w(o.displaySSH[r]=!1)})("mouseout",function(){y(e);let r=u().$index,o=u(4);return w(o.displaySSH[r]=!1)}),g()()()}if(i&2){let e=u().$index,t=u(4);p(),Q("placeholder",N(2,5,"CLUSTER.MSG_CLUSTER_EDITION.SSH_USER")),p(4),Q("placeholder",N(6,7,"CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS")),f("showPassword",t.displaySSH[e])("promptLabel",N(7,9,"GLOBALS.MSG_PASSWORD.PASS"))("feedback",!1)}}function rWe(i,n){if(i&1&&(m(0,"div",72),P(1,"p-dropdown",85),g()),i&2){let e=u(5);p(),f("options",e.nodeRoleOptions)}}function oWe(i,n){i&1&&(m(0,"span"),P(1,"i",86),D(2,"translate"),g()),i&2&&(p(),Q("pTooltip",N(2,2,"WIZARDS.FIREWALL_IMPORT.ERRORS.FORM_VALUES")),f("showDelay",300))}function sWe(i,n){i&1&&(m(0,"span"),P(1,"i",87),g())}function aWe(i,n){i&1&&(m(0,"span"),P(1,"i",88),g())}function lWe(i,n){i&1&&(m(0,"span"),P(1,"i",89),g())}function cWe(i,n){if(i&1&&(m(0,"p",55),F(1),D(2,"translate"),g()),i&2){let e=u().$implicit;p(),J(" ",ei(2,1,"WIZARDS.FIREWALL_IMPORT.ERRORS.SSH_ERROR",ne(4,MHe,e.get("statusMsg").value))," ")}}function dWe(i,n){if(i&1){let e=L();m(0,"div",62)(1,"p-fieldset",65)(2,"div",66)(3,"div",67)(4,"div",68)(5,"button",69),D(6,"translate"),D(7,"translate"),k("click",function(){let r=y(e).$implicit,o=u(4);return w(o.onClusterNodeInstallCommChange(r))}),g(),P(8,"input",70,4),D(10,"translate"),g()(),m(11,"div",67),P(12,"input",71),D(13,"translate"),g(),v(14,iWe,15,9)(15,nWe,9,11)(16,rWe,2,1,"div",72),m(17,"div",73),v(18,oWe,3,4,"span")(19,sWe,2,0,"span")(20,aWe,2,0,"span")(21,lWe,2,0,"span"),g(),m(22,"div",74),v(23,cWe,3,6,"p",55),g()()()()}if(i&2){let e,t=n.$implicit,r=n.$index,o=u(4);f("formGroupName",r),p(),f("legend",o.buildNodeHeader(r,t.get("name").value,t.get("install_communication").value)),p(2),f("ngClass",o.selectFwCluster===o.ObjectTypes.OBJ_CLUSTER?"col-2":"col-3"),p(2),f("icon",t.get("install_communication").value==="agent"?"fa fa-user-secret":"fa fa-terminal")("pTooltip",t.get("install_communication").value==="agent"?N(6,13,"CLUSTER.MSG_CLUSTER_EDITION.COMM_FWCAGENT"):N(7,15,"CLUSTER.MSG_CLUSTER_EDITION.COMM_SSH")),p(3),Q("placeholder",N(10,17,"ITEM_PANEL.FIELDS.ADDRESS")),p(3),f("ngClass",o.selectFwCluster===o.ObjectTypes.OBJ_CLUSTER?"col-1":"col-2"),p(),Q("placeholder",N(13,19,"CLUSTER.MSG_CLUSTER_EDITION.PORT")),p(2),W(t.get("install_communication").value==="agent"?14:15),p(2),W(o.selectFwCluster===o.ObjectTypes.OBJ_CLUSTER?16:-1),p(2),W(t.dirty&&t.enabled&&!t.valid?18:-1),p(),W((e=t.get("status").value)===o.ItemBatchOperationStatus.RUNNING?19:e===o.ItemBatchOperationStatus.ERROR?20:e===o.ItemBatchOperationStatus.SUCCESS?21:-1),p(4),W(t.get("status").value===o.ItemBatchOperationStatus.ERROR?23:-1)}}function pWe(i,n){if(i&1){let e=L();m(0,"div",19)(1,"h5",52),F(2),D(3,"translate"),m(4,"strong"),F(5),g()()(),xr(6,dWe,24,21,"div",62,Ar),m(8,"div",63)(9,"button",64),D(10,"translate"),k("click",function(){y(e);let r=u(3);return w(r.handleDiscoverInterfaces())}),g()()}if(i&2){let e=u(3);p(2),J(" ",N(3,4,"GLOBALS.DB_OBJECT_NAMES."+e.selectFwCluster)," "),p(3),$(e.formModel.get("name").value),p(),Tr(e.getSSHFormNodes().controls),p(3),Q("label",N(10,6,"FW.MSG_FW_EDITION.DISCOVER_IF")),f("disabled",(e.state==null?null:e.state.loadingData)||!e.sshFormModel.valid)}}function uWe(i,n){if(i&1){let e=L();m(0,"div",19)(1,"sts-fwc-interfaces-tree-editor",90,5),k("onStartAutodiscover",function(){y(e);let r=u(3);return w(r.handleDiscoverInterfaces())}),g()()}if(i&2){let e=u(3);p(),f("options",e.interfacesEditorOptions)("manualMode",!0)("minimized",!e.autodiscoverFinished)}}function hWe(i,n){if(i&1){let e=L();m(0,"form",61),k("keyup.enter",function(){y(e);let r=u(2);return w(r.handleDiscoverInterfaces())}),m(1,"div",51)(2,"div",35),F(3),D(4,"translate"),g(),v(5,pWe,11,8)(6,uWe,3,3,"div",19),g()()}if(i&2){let e=u(2);f("formGroup",e.sshFormModel),p(3),J(" ",N(4,4,"WIZARDS.FIREWALL_IMPORT.STEPS.2.TEXT")," "),p(2),W(e.autodiscoverFinished?-1:5),p(),W(e.autodiscoverFinished||e.showInterfacesEditor?6:-1)}}function fWe(i,n){if(i&1&&v(0,hWe,7,6,"form",40),i&2){let e=u();W(e.sshFormModel?0:-1)}}function mWe(i,n){if(i&1){let e=L();m(0,"div",9)(1,"div",35),F(2),D(3,"translate"),g()(),m(4,"sts-fwc-iptables-save",91,6),k("onFinish",function(r){y(e);let o=u();return w(o.handleIptablesSaveFinish(r))}),g()}if(i&2){let e=u();p(2),J(" ",N(3,3,"WIZARDS.FIREWALL_IMPORT.STEPS.3.TEXT")," "),p(2),f("hideUI",!0)("importSSHData",e.importSSHData)}}function gWe(i,n){i&1&&(m(0,"div"),P(1,"i",96),m(2,"h6"),F(3),D(4,"translate"),g()()),i&2&&(p(3),$(N(4,1,"WIZARDS.FIREWALL_IMPORT.INFO.IMPORT")))}function _We(i,n){i&1&&(P(0,"i",97),m(1,"h6"),F(2),D(3,"translate"),g()),i&2&&(p(2),$(N(3,1,"WIZARDS.FIREWALL_IMPORT.ERRORS.IMPORT")))}function CWe(i,n){if(i&1&&(m(0,"div",100),P(1,"i",101)(2,"span",99),g()),i&2){let e=n.$implicit;p(2),f("innerHTML",e,an)}}function IWe(i,n){if(i&1&&(m(0,"div",94),P(1,"i",98)(2,"span",99),xr(3,CWe,3,1,"div",100,Ar),g()),i&2){let e=n.$implicit;p(),f("ngClass",e.success?"fa-check-circle fwcGreen":"fa-exclamation-triangle fwcOrange"),p(),f("innerHTML",e.summary,an),p(),Tr(e.details)}}function yWe(i,n){if(i&1&&(m(0,"div"),F(1),D(2,"translate"),D(3,"translate"),D(4,"lowercase"),D(5,"translate"),g()),i&2){let e=u(3);p(),Tf(" ",N(2,3,"WIZARDS.FIREWALL_IMPORT.INFO.SUMMARY1")," ",N(4,7,N(3,5,"GLOBALS.DB_OBJECT_NAMES."+e.selectFwCluster))," ",ei(5,9,"WIZARDS.FIREWALL_IMPORT.INFO.SUMMARY2",ne(12,sK,e.formModel.get("name").value))," ")}}function wWe(i,n){if(i&1&&(F(0),D(1,"translate"),D(2,"translate"),D(3,"lowercase"),D(4,"translate")),i&2){let e=u(3);Tf(" ",N(1,3,"WIZARDS.FIREWALL_IMPORT.ERRORS.SUMMARY1")," ",N(3,7,N(2,5,"GLOBALS.DB_OBJECT_NAMES."+e.selectFwCluster))," ",ei(4,9,"WIZARDS.FIREWALL_IMPORT.ERRORS.SUMMARY2",ne(12,sK,e.formModel.get("name").value))," ")}}function vWe(i,n){if(i&1&&(m(0,"div",92)(1,"div",93),v(2,gWe,5,3,"div")(3,_We,4,3),g(),m(4,"div",19)(5,"h6"),F(6),D(7,"translate"),g()(),xr(8,IWe,5,2,"div",94,Ar),m(10,"div",19),P(11,"hr"),g(),m(12,"div",95),v(13,yWe,6,14,"div")(14,wWe,5,14),g()()),i&2){let e=u(2);p(2),W(e.areAllOperationsSuccessful()?2:3),p(4),$(N(7,3,"WIZARDS.FIREWALL_IMPORT.INFO.OPERATIONS")),p(2),Tr(e.operationResults),p(5),W(e.areAllOperationsSuccessful()?13:14)}}function bWe(i,n){if(i&1&&v(0,vWe,15,5,"div",92),i&2){let e=u();W(e.operationResults?0:-1)}}var aK=(()=>{class i extends oK{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b){super(a,r,l,d,_,C,b),this.fwcUserService=e,this.utilService=t,this.appOptionsService=r,this.fwcFirewallService=o,this.fwcObjectTreeService=s,this.itemSelectedService=a,this.appDialogPanelsService=l,this.fwcErrorPipe=c,this.translate=d,this.formBuilder=h,this.cd=_,this.router=C,this.confirmationService=I,this.store=b,this.operationResults=[],this.selectFwCluster=O.OBJ_FIREWALL,this.displaySSH=[],this.displayApiKey=[],this.showInterfacesEditor=!1,this.autodiscoverFinished=!1,this.ObjectTypes=O,this.ItemBatchOperationStatus=gr,this.iptablesSaveFinished=!1,this.createDialog(d.instant("WIZARDS.FIREWALL_IMPORT.TITLE"),"fa fa-magic",ri.FIREWALL_IMPORT_WIZARD)}ngOnInit(){super.ngOnInit(),this.utilService.fwcAPICall(this.fwcObjectTreeService.getNodes.bind(this.fwcObjectTreeService),M.FOLDER_FW,this.fwcUserService.getActualFwSelectedCloud()).then(e=>{Array.isArray(e.data)&&e.data.length===1&&(this.parentNodeId=e.data[0].id,this.createForm(),this.nodeRoleOptions=[{value:null,label:this.translate.instant("CLUSTER.CLUSTER_NODE_ROLES.NO_ROLE")},{value:"M",label:this.translate.instant("CLUSTER.CLUSTER_NODE_ROLES.MASTER")},{value:"S",label:this.translate.instant("CLUSTER.CLUSTER_NODE_ROLES.SLAVE")},{value:"N",label:this.translate.instant("CLUSTER.CLUSTER_NODE_ROLES.NODE")}])}).catch(e=>{this.state.errorMessages=[{severity:"error",summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.GETTING_TREE.0"),detail:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.GETTING_TREE.1")}]}),this.onStepDisplay.subscribe(e=>{switch(e){case 0:this.buttonNext&&this.buttonNext.nativeElement.focus();break;case 1:this.inputObjName&&this.inputObjName.nativeElement.focus();break;case 2:this.inputDiscoverNodes&&this.inputDiscoverNodes.first.nativeElement.focus();break}})}ngAfterViewInit(){super.ngAfterViewInit()}ngOnDestroy(){super.ngOnDestroy()}createForm(){let e=$r();this.formModel=this.formBuilder.group({id:new ve(void 0),name:new ve("",[Pe.required]),comment:new ve(""),firewallUUID:new ve(e),fwnodes:new Hr([this.createNode()],Pt.distinctNameValidator.bind(this))})}onHideDialog(){if(this.state.selectedStep>=3){let e={_fwcObjType:this.selectFwCluster,container:qe.C_FIREWALLS,_fwcTreeAction:mi.NEW_ITEM,_fwcObjId:this.formModel.get("id").value};this.itemSelectedService.setModifiedItem(e)}this.dynamicComponentRef&&this.dynamicComponentRef.destroy()}isPrevNextButtonDisabled(e){let t=!1;if(e)switch(this.state.selectedStep){case 1:t=this.selectFwCluster===O.OBJ_FIREWALL&&this.formModel.get("name").invalid||this.selectFwCluster===O.OBJ_CLUSTER&&this.formModel.invalid;break;case 2:t=!this.autodiscoverFinished;break;case 3:t=!this.iptablesSaveFinished;break;case this.state.steps.length-1:t=!0}else switch(this.state.selectedStep){case 0:t=!0;break;case 3:t=!0;break;case 4:t=!0;break}return t}handlePrevNextButton(e){return B(this,null,function*(){if(e)switch(this.state.selectedStep){case 1:if(this.state.loadingData||this.selectFwCluster===O.OBJ_FIREWALL&&this.formModel.get("name").invalid||this.selectFwCluster===O.OBJ_CLUSTER&&this.formModel.invalid)return;this.buildSSHFormModel(),this.displayStepContent(this.state.selectedStep+1);break;case 2:let t,r;this.selectFwCluster===O.OBJ_FIREWALL?(t=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.FIREWALL"),r=this.doCreateFirewall):(t=this.translate.instant("GLOBALS.MSG_OBJ_TYPES.CLUSTER"),r=this.doCreateCluster),this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("WIZARDS.FIREWALL_IMPORT.STEPS.2.CONFIRM_NEXT",{objType:t.toLowerCase()}),accept:()=>{r.call(this)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")});break;default:this.state.selectedStep<this.state.steps.length&&this.displayStepContent(this.state.selectedStep+1)}else switch(this.state.selectedStep){case 2:this.autodiscoverFinished?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("WIZARDS.FIREWALL_IMPORT.STEPS.2.CONFIRM_PREV"),accept:()=>{this.fwcInterfacesEditor.resetProperties(),this.interfacesEditorOptions=null,this.autodiscoverFinished=!1,this.showInterfacesEditor=!1,this.displayStepContent(1)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):this.displayStepContent(this.state.selectedStep-1);break;default:this.state.selectedStep&&this.displayStepContent(this.state.selectedStep-1)}})}createNode(){return new rr({name:new ve("",[Pe.required,Pe.pattern(Pt.nameRegExp)])})}getFormNodes(){return this.formModel.get("fwnodes")}getSSHFormNodes(){return this.sshFormModel.get("fwnodes")}nodeAdd(){let e=this.formModel.get("fwnodes");if(e){let t=this.createNode();e.push(t)}this.recenterDialog();try{this.inputNodes.last.nativeElement.focus()}catch{}}nodeRemove(e){let t=this.formModel.get("fwnodes"),r=t.length;!t||t.length<2||e<0||e>=t.length||t.at(e).value.id&&r<2||(t.removeAt(e),this.recenterDialog())}handleSelectObjType(){this.inputObjName&&this.inputObjName.nativeElement.focus(),this.recenterDialog()}buildSSHFormModel(){let e;if(this.selectFwCluster===O.OBJ_FIREWALL?this.formModel.get("name").valid&&(e=new Hr([new rr({name:new ve(this.formModel.get("name").value,[Pe.required,Pe.pattern(Pt.nameRegExp)]),firewallUUID:new ve(this.formModel.get("firewallUUID").value)})])):this.formModel.get("fwnodes").valid&&(e=this.formModel.get("fwnodes")),e){this.sshFormModel=this.formBuilder.group({fwnodes:new Hr([])});let t=this.sshFormModel.get("fwnodes");for(let r=0;r<e.length;r++){let o=e.at(r),s;o.get("firewallUUID")?s=o.get("firewallUUID").value:s=$r(),t.push(new rr({name:new ve(o.get("name").value),address:new ve("",[Pe.required,Pe.pattern(Pt.ipV4Regexp)]),install_port:new ve(22,[Pe.required,Pe.pattern(Pt.portRegexp)]),install_user:new ve("",[Pe.required,Pe.pattern(Pt.linuxUsername)]),install_pass:new ve("",[Pe.required,Pe.pattern(Pt.linuxPassword)]),role:new ve(null),firewallUUID:new ve(s),install_communication:new ve("ssh",[Pe.required]),install_protocol:new ve("https"),install_apikey:new ve(""),status:new ve(gr.PENDING),statusMsg:new ve("")}))}}}onClusterNodeInstallCommChange(e){if(e){let r=e.get("install_communication").value==="agent"?"ssh":"agent";e.get("install_communication").setValue(r),r==="agent"?(e.get("install_protocol").setValidators([Pe.required]),e.get("install_apikey").setValidators([Pe.required]),e.get("install_port").setValue(33033),e.get("install_user").clearValidators(),e.get("install_pass").clearValidators()):(e.get("install_protocol").clearValidators(),e.get("install_apikey").clearValidators(),e.get("install_port").setValue(22),e.get("install_user").setValidators([Pe.required,Pe.pattern(Pt.linuxUsername)]),e.get("install_pass").setValidators([Pe.required,Pe.pattern(Pt.linuxPassword)])),e.get("install_protocol").updateValueAndValidity(),e.get("install_apikey").updateValueAndValidity(),e.get("install_user").updateValueAndValidity(),e.get("install_pass").updateValueAndValidity()}}buildNodeHeader(e,t,r){let o="";return this.selectFwCluster===O.OBJ_CLUSTER?o=this.translate.instant("CLUSTER.CLUSTER_NODE_ROLES.NODE")+" '"+t+"'":o=this.translate.instant("FW.MSG_FW_EDITION.ACCESS"),o+=` (${r==="ssh"?"SSH":"FWCloud-Agent"})`,o}handleDiscoverInterfaces(){this.sshFormModel.valid&&(this.interfacesEditorOptions=null,this.sshFormModel.disable(),this.autodiscoverFinished=!1,this.autodiscoverOpIndex=0,this.showInterfacesEditor=!0,this.doDiscoverInterfaces())}doDiscoverInterfaces(){return B(this,null,function*(){let e=this.sshFormModel.get("fwnodes");if(e){if(this.autodiscoverOpIndex>=0&&this.autodiscoverOpIndex<e.length){let t=e.at(this.autodiscoverOpIndex);if(t.get("status").value===gr.SUCCESS)this.autodiscoverOpIndex++,this.doDiscoverInterfaces();else{t.get("status").setValue(gr.RUNNING),t.get("statusMsg").setValue("");let r=this.translate.instant("GLOBALS.DB_OBJECT_NAMES."+this.selectFwCluster),o=this.formModel.get("name").value;this.autodiscoverHeader=this.translate.instant("FW.MSG_AUTODISCOVER.LOADING_CUSTOM.HEADER",{objType:r.toLowerCase(),objName:o}),this.selectFwCluster===O.OBJ_FIREWALL?this.autodiscoverText=this.translate.instant("FW.MSG_AUTODISCOVER.LOADING_CUSTOM.TEXT_FW"):this.autodiscoverText=this.translate.instant("FW.MSG_AUTODISCOVER.LOADING_CUSTOM.TEXT_CLUSTER",{objName:t.get("name").value});let s=this.fwcUserService.getActualFwcUser().publicKey,a=t.get("install_communication").value,l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ip:t.get("address").value,port:+t.get("install_port").value,communication:a};if(a==="ssh"){let c=t.get("install_user").value,d=t.get("install_pass").value;c&&(c=yield this.utilService.openPGPEncrypt(c,s)),d&&(d=yield this.utilService.openPGPEncrypt(d,s)),l.sshuser=c,l.sshpass=d}else{let c=t.get("install_apikey").value;c&&(c=yield this.utilService.openPGPEncrypt(c,s)),l.apikey=c,l.protocol=t.get("install_protocol").value}this.state.loadingData=!0,this.recenterDialog(),this.utilService.fwcAPICall(this.fwcFirewallService.autoDiscoverInterfaces.bind(this.fwcFirewallService),l).then(c=>{if(Array.isArray(c.data)){let d=c.data;if(t.get("status").setValue(gr.SUCCESS),t.get("statusMsg").setValue(""),t.disable(),this.selectFwCluster===O.OBJ_CLUSTER){let C=t.get("role").value;C==="N"&&(C=t.get("name").value),C&&(d=d.map(I=>(I.suffixToAdd=C,I)))}let h=t.get("firewallUUID").value,_={isCluster:this.selectFwCluster===O.OBJ_CLUSTER,firewalls:[],discoveredFirewallUUID:h,discoveredAddress:t.get("address").value,discoveredIfs:[],existingIfs:[],hideActionButtons:!0};_.discoveredIfs=[..._.discoveredIfs,...d];for(let C=0;C<e.length;C++){let I=e.at(C),b=I.get("firewallUUID").value,E;this.fwcInterfacesEditor&&(E=this.fwcInterfacesEditor.getInstallationData(b)),_.firewalls.push({firewallUUID:b,firewall_name:I.get("name").value,firewall:void 0,cluster:void 0,installOptions:{firewallUUID:b,interface:E&&E.interface,ipobj:E&&E.address}})}this.fwcInterfacesEditor.processOptions(_),this.autodiscoverOpIndex++,this.doDiscoverInterfaces()}this.refreshDialog()}).catch(c=>{this.state.loadingData=!1;let d=this.utilService.isCommunicationError(c.error);t.get("status").setValue(gr.ERROR),d?t.get("statusMsg").setValue("("+d+")"):t.get("statusMsg").setValue("("+this.fwcErrorPipe.transform(c)+")"),t.enable(),this.refreshDialog()})}}else if(this.autodiscoverOpIndex===e.length){this.autodiscoverFinished=!0,this.fwcInterfacesEditor.selectAllNodes(!0);let t,r=[];if(this.selectFwCluster===O.OBJ_FIREWALL)t=this.translate.instant("WIZARDS.FIREWALL_IMPORT.INFO.AUTODISCOVER_FW",{ip:e.at(0).get("address").value});else{t=this.translate.instant("WIZARDS.FIREWALL_IMPORT.INFO.AUTODISCOVER_CLUSTER");for(let s=0;s<e.length;s++){let a=e.at(s);r.push(this.translate.instant("WIZARDS.FIREWALL_IMPORT.INFO.AUTODISCOVER_NODE",{name:a.get("name").value,ip:a.get("address").value}))}}let o={success:!0,summary:t,details:r};this.state.loadingData=!1,this.operationResults.push(o),this.refreshDialog()}}})}doCreateFirewall(){return B(this,null,function*(){if(this.sshFormModel.enable(),this.sshFormModel.valid){let e,r=this.sshFormModel.get("fwnodes").at(0),o=this.fwcUserService.getActualFwcUser().publicKey,s=yield this.utilService.openPGPEncrypt(r.get("install_user").value,o),a=yield this.utilService.openPGPEncrypt(r.get("install_pass").value,o),l=yield this.utilService.openPGPEncrypt(r.get("install_apikey").value,o);e={name:this.formModel.get("name").value,comment:this.formModel.get("comment").value,install_user:s,install_pass:"",install_port:r.get("install_port").value,save_user_pass:1,fwmaster:1,options:3,plugins:0,install_communication:r.get("install_communication").value,install_protocol:r.get("install_protocol").value,install_apikey:l,fwcloud:this.fwcUserService.getActualFwSelectedCloud(),node_id:this.parentNodeId},this.state.loadingData=!0,this.refreshDialog(),this.utilService.fwcAPICall(this.fwcFirewallService.newFirewall.bind(this.fwcFirewallService),e).then(c=>{let d=c.data.insertId;this.formModel.get("id").setValue(d),this.processFwInterfacesOperations(e,c.data).then(()=>{this.operationResults.push({success:!0,summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.INFO.CREATE_FW",{name:this.formModel.get("name").value})}),this.importSSHData=this.buildSSHApiObject(d),this.displayStepContent(3)}).catch(h=>{this.state.errorMessages=[{severity:"error",summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.PROCESS_FW_IFS.ERR_GEN"),detail:h.message}],this.recenterDialog()}).finally(()=>{this.state.loadingData=!1,this.refreshDialog()})}).catch(c=>{let d=this.translate.instant("GLOBALS.DB_OBJECT_NAMES."+this.selectFwCluster);this.state.errorMessages=[{severity:"error",summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.CREATING_FW_CLUSTER.0",{objType:d.toLowerCase()}),detail:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.CREATING_FW_CLUSTER.1",{objType:d.toLowerCase()})}],this.state.loadingData=!1,this.recenterDialog()})}})}processFwInterfacesOperations(e,t){return new Promise((r,o)=>B(this,null,function*(){try{if(this.fwcInterfacesEditor&&this.fwcInterfacesEditor.areTherePendingOperations()){let s=this.fwcInterfacesEditor.getSelectedTreeNodes(),a=t.insertId;this.fwcInterfacesEditor.setNewLoIds(t);let c=(yield this.utilService.fwcAPICall(this.fwcObjectTreeService.getTree.bind(this.fwcObjectTreeService),this.appOptionsService.optionsTreeFw,this.fwcUserService.getActualFwSelectedCloud())).data,d=[];d.push(c);let h=this.fwcObjectTreeService.getNodesFull(d,M.OBJ_FIREWALL,a);if(h&&Array.isArray(h.items)){let _=h.items.find(C=>C.node_type===M.FOLDER_INTERFACES);if(_){let C={parentObject:{fwcloud:this.fwcUserService.getActualFwSelectedCloud(),name:h.text,type:O.OBJ_FIREWALL,id:a,id_node:_.id},objectTreeNodes:s,onClose:b=>B(this,null,function*(){let E,R,T=!1;if(b.forEach(A=>{A.operationStatus===gr.SUCCESS&&A.operationResult&&A.object.installFirewallUUIDs&&A.object.installFirewallUUIDs.has(this.formModel.get("firewallUUID").value)&&(A.object.type===O.OBJ_INTERFACE_FIREWALL?E=A.operationResult.insertId:A.object.type===O.OBJ_ADDRESS&&(R=A.operationResult.insertId)),A.operationStatus===gr.ERROR&&(T=!0)}),T)return o(new Error(this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.PROCESS_FW_IFS.ERR_IFS_OPERATIONS")));if(E&&R){let A=new jC(e);A.firewall=a,A.install_interface=E,A.install_ipobj=R,A.install_pass="";try{let U=A.getValue(),z=yield this.utilService.fwcAPICall(this.fwcFirewallService.updateFirewall.bind(this.fwcFirewallService),U)}catch{return o(new Error(this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.PROCESS_FW_IFS.ERR_UPDATING_INST")))}}r()})},I={uuid:ri.ITEM_BATCH_MANAGER,data:C};this.appDialogPanelsService.searchAndShowDialog(I)}}else return o(new Error(this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.PROCESS_FW_IFS.ERR_MISSING_FIREWALL_NODE")))}else r()}catch{o(new Error(this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.PROCESS_FW_IFS.ERR_UNKNOWN")))}}))}doCreateCluster(){return B(this,null,function*(){if(this.sshFormModel.enable(),this.sshFormModel.valid){let e,t=this.fwcUserService.getActualFwcUser().publicKey,r=this.sshFormModel.get("fwnodes"),o=[];for(let s=0;s<r.length;s++){let a=r.at(s),l=yield this.utilService.openPGPEncrypt(a.get("install_user").value,t),c=yield this.utilService.openPGPEncrypt(a.get("install_pass").value,t),d=yield this.utilService.openPGPEncrypt(a.get("install_apikey").value,t);o.push({name:a.get("name").value,comment:null,install_user:l,install_pass:"",install_port:a.get("install_port").value,save_user_pass:1,fwmaster:s?0:1,install_communication:a.get("install_communication").value,install_protocol:a.get("install_protocol").value,install_apikey:d})}e={name:this.formModel.get("name").value,comment:this.formModel.get("comment").value,options:3,plugins:0,fwnodes:o},this.state.loadingData=!0,this.refreshDialog(),this.utilService.fwcAPICall(this.fwcFirewallService.newCluster.bind(this.fwcFirewallService),e,this.fwcUserService.getActualFwSelectedCloud(),this.parentNodeId).then(s=>{let a=s.data.insertId;this.formModel.get("id").setValue(a),this.processClusterInterfacesOperations(a,s.data).then(l=>{let c={success:!0,summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.INFO.CREATE_CLUSTER",{name:this.formModel.get("name").value}),details:[]},d=this.sshFormModel.get("fwnodes"),h=[];for(let _=0;_<d.length;_++){let C=d.at(_);h.push(C.get("name").value)}c.details.push(h.join(", ")),this.operationResults.push(c),this.importSSHData=this.buildSSHApiObject(l),this.displayStepContent(3)}).catch(l=>{this.state.errorMessages=[{severity:"error",summary:this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_CREATING_IFS"),detail:l.message}],this.recenterDialog()}).finally(()=>{this.state.loadingData=!1,this.refreshDialog()})}).catch(s=>{let a=this.translate.instant("GLOBALS.DB_OBJECT_NAMES."+this.selectFwCluster);this.state.errorMessages=[{severity:"error",summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.CREATING_FW_CLUSTER.0",{objType:a.toLowerCase()}),detail:this.translate.instant("WIZARDS.FIREWALL_IMPORT.ERRORS.CREATING_FW_CLUSTER.1",{objType:a.toLowerCase()})}],this.state.loadingData=!1,this.recenterDialog()})}})}processClusterInterfacesOperations(e,t){return new Promise((r,o)=>B(this,null,function*(){try{if(this.fwcInterfacesEditor&&this.fwcInterfacesEditor.areTherePendingOperations()){let s=this.fwcInterfacesEditor.getSelectedTreeNodes();t&&t.loData&&this.fwcInterfacesEditor.setNewLoIds(t);let[a,l]=yield Promise.all([this.utilService.fwcAPICall(this.fwcFirewallService.getCluster.bind(this.fwcFirewallService),e,this.fwcUserService.getActualFwSelectedCloud()),this.utilService.fwcAPICall(this.fwcObjectTreeService.getTree.bind(this.fwcObjectTreeService),this.appOptionsService.optionsTreeFw,this.fwcUserService.getActualFwSelectedCloud())]),c=a.data,d;if(c&&Array.isArray(c.nodes)&&(d=c.nodes),!d||!d.length)return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_EMPTY_CLUSTER")));let h=this.sshFormModel.get("fwnodes").value,_,C=this.fwcUserService.getActualFwcUser().publicKey;for(let R=0;R<d.length;R++){let T=d[R],A=h.find(U=>U.name===T.name);if(A){T.firewallUUID=A.firewallUUID;let U=A.install_user,z=A.install_pass,ee=A.install_apikey;U&&(T.install_user=yield this.utilService.openPGPEncrypt(U,C)),z&&(T.install_pass=yield this.utilService.openPGPEncrypt(z,C)),ee&&(T.install_apikey=yield this.utilService.openPGPEncrypt(ee,C))}else return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_MISSING_NODE")));T.fwmaster&&(_=T.id)}let I=l.data,b=[];b.push(I);let E=this.fwcObjectTreeService.getNodesFull(b,M.OBJ_CLUSTER,e);if(E&&Array.isArray(E.items)){let R=E.items.find(T=>T.node_type===M.FOLDER_INTERFACES);if(R){let T={parentObject:{fwcloud:this.fwcUserService.getActualFwSelectedCloud(),name:E.text,type:O.OBJ_FIREWALL,id:_,id_node:R.id},objectTreeNodes:s,onClose:U=>B(this,null,function*(){let z=!1,ee=new Map;if(U.forEach(re=>{if(re.operationStatus===gr.SUCCESS&&re.operationResult&&re.object.installFirewallUUIDs){let Z;re.object.type===O.OBJ_INTERFACE_FIREWALL?Z={install_interface:re.operationResult.insertId}:re.object.type===O.OBJ_ADDRESS&&(Z={install_ipobj:re.operationResult.insertId}),re.object.installFirewallUUIDs&&re.object.installFirewallUUIDs.forEach(ae=>{let Ie=ee.get(ae);Z=oe(oe({},Ie),Z),ee.set(ae,Z)})}re.operationStatus===gr.ERROR&&(z=!0)}),z)return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_IFS_OPERATIONS")));{let re;if(ee.size)for(let[Z,ae]of ee){let Ie=d.find(ye=>ye.firewallUUID===Z);if(Ie){re=new jC(Ie),re.fwcloud=this.fwcUserService.getActualFwSelectedCloud(),re.firewall=Ie.id,re.install_interface=ae.install_interface,re.install_ipobj=ae.install_ipobj,re.install_pass="",re.plugins=0;try{let ye=re.getValue(),xe=yield this.utilService.fwcAPICall(this.fwcFirewallService.updateFirewall.bind(this.fwcFirewallService),ye)}catch{return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_UPDATING_INST",{name:Ie.name})))}}else return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_UPDATING_INST_MISSING")))}}r(_)})},A={uuid:ri.ITEM_BATCH_MANAGER,data:T};this.appDialogPanelsService.searchAndShowDialog(A)}else return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_NO_IFS_NODE")))}else return o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_MISSING_CLUSTER_NODE")))}else r(null)}catch{o(new Error(this.translate.instant("CLUSTER.MSG_CLUSTER_BATCH.ERR_UNKNOWN")))}}))}handleIptablesSaveFinish(e){let t=e.success?"INFO":"ERRORS";this.operationResults.push({success:e.success,summary:this.translate.instant("WIZARDS.FIREWALL_IMPORT."+t+".IPTABLES_SAVE",{ip:this.sshFormModel.get("fwnodes").at(0).get("address").value})}),this.iptablesSaveFinished=!0,this.state.loadingData=!1,this.recenterDialog()}buildSSHApiObject(e){let t;if(this.sshFormModel){let r=this.sshFormModel.get("fwnodes").at(0);t={firewall:e,fwcloud:this.fwcUserService.getActualFwSelectedCloud(),type:"remote",ip_version:4,ip:r.get("address").value,port:r.get("install_port").value,sshuser:r.get("install_user").value,sshpass:r.get("install_pass").value,communication:r.get("install_communication").value,protocol:r.get("install_protocol").value,apikey:r.get("install_apikey").value}}return t}areAllOperationsSuccessful(){let e=!1;return this.operationResults&&(e=this.operationResults.every(t=>t.success)),e}static{this.\u0275fac=function(t){return new(t||i)(S(at),S(ft),S(wt),S(Dt),S(En),S(ht),S(St),S(Ei),S(Ye),S(qr),S(we),S(ct),S(Jt),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-wizard-firewall-import"]],viewQuery:function(t,r){if(t&1&&(le(RHe,5),le(PHe,5),le(DHe,5),le(FHe,5),le(kHe,5),le(NHe,5)),t&2){let o;te(o=ie())&&(r.fwcInterfacesEditor=o.first),te(o=ie())&&(r.buttonNext=o.first),te(o=ie())&&(r.inputObjName=o.first),te(o=ie())&&(r.fwcIptablesSaveComponent=o.first),te(o=ie())&&(r.inputNodes=o),te(o=ie())&&(r.inputDiscoverNodes=o)}},features:[et([Dt,En]),Se],decls:10,vars:5,consts:[["dlgWizardDialog",""],["buttonNext",""],["inputObjName",""],["inputNode",""],["inputDiscoverNode",""],["fwcInterfacesEditor",""],["fwcIptablesSaveComponent",""],["styleClass","dlgFwcDialog dlgFwcDialog--medium",3,"visibleChange","onHide","visible","modal","closable","resizable"],["pTemplate","header"],[1,"grid"],["pTemplate","footer"],["appStepContent","","stepTitle","WIZARDS.FIREWALL_IMPORT.STEPS.0.TITLE"],["appStepContent","","stepTitle","WIZARDS.FIREWALL_IMPORT.STEPS.1.TITLE"],["appStepContent","","stepTitle","WIZARDS.FIREWALL_IMPORT.STEPS.2.TITLE"],["appStepContent","","stepTitle","WIZARDS.FIREWALL_IMPORT.STEPS.3.TITLE"],["appStepContent","","stepTitle","WIZARDS.FIREWALL_IMPORT.STEPS.4.TITLE"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fa","fa-magic","fwcOrange"],[1,"col-12"],[3,"activeIndexChange","model","readonly","activeIndex"],[3,"ngTemplateOutlet"],[3,"valueChange","value","closable"],[1,"col-6","fwc-left"],["type","button","pButton","","icon","fa fa-close",1,"p-button-warning",3,"disabled","label"],[1,"col-6"],["type","button","pButton","","icon","fa fa-close",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-arrow-left",1,"p-button-primary",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-arrow-right",1,"p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-check",1,"p-button-success",3,"label"],["type","button","pButton","","icon","fa fa-arrow-right",1,"p-button-primary",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-check",1,"p-button-success",3,"click","label"],[1,"col-3",2,"padding","2.1875rem"],["src","assets/img/import_wizard.png","height","200px","width","auto"],[1,"col-9",2,"padding-left","0.5rem","padding-top","2.1875rem","font-family","Montserrat, Arial, sans-serif",3,"innerHTML"],[1,"col-12",2,"padding-left","0.5rem","padding-top","2.1875rem","font-family","Montserrat, Arial, sans-serif","font-size",".9rem"],[1,"divInlineInput"],[1,"spanField"],["name","selectFwCluster",3,"ngModelChange","click","value","label","ngModel"],[1,"fwcSepShort"],[2,"width","100%",3,"formGroup"],[3,"keyup.enter"],[1,"col-12","md:col-6"],[1,"divFlexInput"],[1,"divFlexInput-label"],["for","name"],[1,"divFlexInput-control"],["type","text","maxlength","64","pInputText","","formControlName","name","name","name",3,"placeholder"],[1,"fwc-error",3,"ngStyle"],["for","comment"],["type","text","maxlength","255","pInputText","","formControlName","comment","name","comment",3,"placeholder"],["formArrayName","fwnodes",1,"grid"],[1,"fwcBlue"],[1,"col-12","md:col-6",3,"formGroupName"],["formControlName","name","maxlength","64","type","text","pInputText","",3,"id","placeholder"],[1,"fwc-error"],[1,"divFlexInput-buttons"],["tooltipPosition","bottom","showDelay","500","pButton","","type","button","icon","pi pi-minus",1,"p-button-danger","fwcButtonHeight",3,"disabled","pTooltip"],["pButton","","type","button","icon","fa fa-plus","tooltipPosition","bottom","showDelay","500",1,"p-button-primary","fwcButtonHeight",3,"disabled","pTooltip"],["tooltipPosition","bottom","showDelay","500","pButton","","type","button","icon","pi pi-minus",1,"p-button-danger","fwcButtonHeight",3,"click","disabled","pTooltip"],["pButton","","type","button","icon","fa fa-plus","tooltipPosition","bottom","showDelay","500",1,"p-button-primary","fwcButtonHeight",3,"click","disabled","pTooltip"],[2,"width","100%",3,"keyup.enter","formGroup"],[1,"col-12",3,"formGroupName"],[1,"col-12","fwc-centered"],["type","button","pButton","","icon","fa fa-search-plus",1,"p-button-primary",3,"click","disabled","label"],[3,"legend"],[1,"grid",2,"width","100%"],[3,"ngClass"],[1,"p-inputgroup"],["pButton","","type","button","tooltipPosition","top","showDelay","500",1,"p-button-primary","fwcButtonHeight",3,"click","icon","pTooltip"],["maxlength","64","type","text","formControlName","address","pInputText","",3,"placeholder"],["maxlength","64","type","number","formControlName","install_port","pInputText","",3,"placeholder"],[1,"col-2"],[1,"col",2,"line-height","2.4rem"],[1,"col-12","grid","grid-nogutter",2,"width","auto"],["formControlName","install_protocol","name","install_protocol",1,"selNoMargin",3,"change"],["disabled","",3,"value"],["value","https"],["value","http"],[1,"col-4"],["formControlName","install_apikey","name","install_apikey","pPassword","","maxlength","64",3,"showPassword","placeholder","feedback"],["pButton","","type","button","icon","fa fa-eye",1,"p-button-secondary",3,"mousedown","mouseup","mouseout"],[1,"col-3"],["maxlength","64","type","text","formControlName","install_user","pInputText","",3,"placeholder"],["maxlength","64","type","password","formControlName","install_pass","pPassword","",3,"showPassword","placeholder","promptLabel","feedback"],["formControlName","role","styleClass","dropDownForm","appendTo","body",3,"options"],["tooltipPosition","top",1,"fa","fa-lg","fa-exclamation-triangle","fwcRed",3,"pTooltip","showDelay"],[1,"fa","fa-lg","fa-cog","fa-spin","fwcBlue"],[1,"fa","fa-lg","fa-exclamation-circle","fwcRed"],[1,"fa","fa-lg","fa-check-circle","fwcGreen"],[3,"onStartAutodiscover","options","manualMode","minimized"],[3,"onFinish","hideUI","importSSHData"],[1,"grid","divSummary"],[1,"col-12","divSummary-header"],[1,"col-12","divSummary-result"],[1,"col-12","divSummary-footer"],[1,"fa","fa-4x","fa-check-circle","fwcGreen"],[1,"fa","fa-4x","fa-exclamation-triangle","fwcOrange"],[1,"fa","fa-lg","fa-fw",3,"ngClass"],[3,"innerHTML"],[1,"divSummary-details"],[1,"fa","fa-check","fwcGreen"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",7,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onHide",function(){return y(o),w(r.onHideDialog())}),v(2,VHe,5,3,"ng-template",8)(3,GHe,3,2,"div",9)(4,$He,4,2,"ng-template",10),g(),v(5,JHe,5,3,"ng-template",11)(6,tWe,40,33,"ng-template",12)(7,fWe,1,1,"ng-template",13)(8,mWe,6,5,"ng-template",14)(9,bWe,1,1,"ng-template",15)}t&2&&(Te("visible",r.displayDialog),f("modal",!0)("closable",!1)("resizable",!0),p(3),W(r.state?3:-1))},styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.divFlexInput{display:flex}.divFlexInput-label{flex:0;line-height:2.4rem;margin-right:1rem}.divFlexInput-control{flex:1}.divFlexInput-buttons{display:flex;margin-left:.5rem}.divSummary-header{text-align:center}.divSummary-header i{margin-bottom:.3rem}.divSummary-result{padding-left:2.5rem}.divSummary-result i{padding-right:.3rem}.divSummary-details{font-size:.9rem;color:var(--fwcMidDark);padding:.3rem 0 .3rem 2.5rem}.divSummary-details i{padding-right:.3rem}.divSummary hr{border:0;height:1px;background-image:linear-gradient(to right,#0000,#0000004d,#0000)}.divSummary-footer{margin-top:.5rem}.p-steps{padding-top:1.5625rem}.p-toggleable-content{width:100%}.p-fieldset-content{display:flex;flex-direction:row;width:100%}body .p-fieldset{border:1px solid #c8c8c8;background-color:transparent;color:#333}body .p-corner-all{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.p-fieldset .p-fieldset-legend{border:1px solid transparent;background:none;font-weight:400}.p-fieldset .p-fieldset-legend-text{margin-left:15px;font-family:Montserrat,Arial,sans-serif}
`],encapsulation:2,changeDetection:0})}}return i})();var GC=function(i){return i.OBJECT_NAME="POLICY.TREE_SEARCH_OPTIONS.OBJECT_NAME",i.TCP_UDP_PORT="POLICY.TREE_SEARCH_OPTIONS.TCP_UDP_PORT",i.IP_ADDRESS="POLICY.TREE_SEARCH_OPTIONS.IP_ADDRESS",i.IP_OPENVPN="POLICY.TREE_SEARCH_OPTIONS.IP_OPENVPN",i}(GC||{});var lK=No(_c());var SWe=()=>({width:"100%","max-height":"20em",overflow:"auto"}),EWe=i=>({"font-weight":i});function AWe(i,n){i&1&&(m(0,"div",7)(1,"h6",8),P(2,"i",9),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"VPN.STATUS.NODE_SELECT_DIALOG.TITLE")," "))}function xWe(i,n){if(i&1){let e=L();m(0,"span",10),k("dblclick",function(){let r=y(e).$implicit,o=u();return w(o.onNodeSelect(r))}),P(1,"i",11),D(2,"fwcIcon"),m(3,"span",12),F(4),g()()}if(i&2){let e=n.$implicit;p(),va("fwcTreeIcon ",N(2,5,e.data==null?null:e.data.object_type),""),p(2),f("ngStyle",ne(7,EWe,e.selectable?"normal":"bold")),p(),J(" ",e.label," ")}}function TWe(i,n){if(i&1){let e=L();m(0,"button",13),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.onNodeSelect(r.selectedNode))}),g(),m(2,"button",14),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.onSelectCancel())}),g()}if(i&2){let e=u();Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.SELECT")),f("disabled",!e.selectedNode),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.CANCEL"))}}var eE=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b){super(e,t,r,o,_,c),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.cd=o,this.translate=s,this.fwcUserService=a,this.utilService=l,this.router=c,this.fwcFirewallService=d,this.fwcVpnService=h,this.store=_,this.inputDataService=C,this.confirmationService=I,this.fwcEventService=b,this.displayNodeSelectDialog=!1,this.serviceMap={OSR:Qo.openvpn,S01:Qo.dhcp,S02:Qo.keepalived,S03:Qo.HAProxy,WGS:Qo.wireGuard,ISS:Qo.IPSec},this.createDialog(s.instant("VPN.STATUS.NODE_SELECT_DIALOG.TITLE"),"fwcMenuIcon fwci-firewalls fwcOrange")}onNodeSelect(e){return B(this,null,function*(){if(!e||!e.selectable)return;let t=this.clusterNodes.find(r=>r.id===e.data.firewall_id);if(t){this.displayNodeSelectDialog=!1;let r=this.utilService.createDynamicComponentRef(vg),o=r.instance;o.setDynamicComponentRef(r);let s={fwcloud:this.selectedItem.fwcloud,firewall:t.id,service:this.serviceMap[this.selectedItem.node_type]==="openvpn"?this.serviceMap[this.selectedItem.node_type]+"@"+this.selectedItem._fwcObjName:this.serviceMap[this.selectedItem.node_type]};o.systemCtlSelectorDialog(s)}})}selectNodes(e){this.selectedItem=e,this.utilService.fwcAPICall(this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),this.selectedItem.cluster_id,this.fwcUserService.getActualFwSelectedCloud()).then(t=>{this.clusterNodes=t.data,this.clusterNodes&&(this.clusterTreeNodes=this.buildNodesTree(this.clusterNodes,this.selectedItem.cluster_name),this.displayNodeSelectDialog=!0)}).catch(t=>{console.error(t)})}buildNodesTree(e,t){let r=[],o={label:t,data:{object_type:O.OBJ_CLUSTER},selectable:!1,expanded:!0,children:[]};return e.forEach(s=>{o.children.push({label:s.name,data:{object_type:O.OBJ_FIREWALL,firewall_id:s.id},selectable:!0})}),r.push(o),r}onSelectHide(e){}onSelectCancel(){this.displayNodeSelectDialog=!1,super.hideDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(we),S(Ye),S(at),S(ft),S(ct),S(Dt),S(er),S(nt),S(Cr),S(Jt),S(dn))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-systemctl-nodes-selector-panel"]],features:[Se],decls:11,vars:12,consts:[["styleClass","dlgFwcDialog dlgFwcDialog--small",3,"visibleChange","onHide","visible","resizable","closable","modal"],["pTemplate","header"],[1,"grid"],[1,"col-12"],["selectionMode","single","styleClass","treeSelector",3,"selectionChange","value","selection"],["pTemplate","default"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci-firewalls","fwcOrange"],[1,"nodeselect",3,"dblclick"],["aria-hidden","true"],[3,"ngStyle"],["pButton","","icon","pi pi-check",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayNodeSelectDialog,s)||(r.displayNodeSelectDialog=s),s}),k("onHide",function(s){return r.onSelectHide(s)}),v(1,AWe,5,3,"ng-template",1),m(2,"div",2)(3,"div",3)(4,"p"),F(5),D(6,"translate"),g()(),m(7,"div",3)(8,"p-tree",4),Oe("selectionChange",function(s){return Re(r.selectedNode,s)||(r.selectedNode=s),s}),v(9,xWe,5,9,"ng-template",5),g()()(),v(10,TWe,4,7,"ng-template",6),g()),t&2&&(Te("visible",r.displayNodeSelectDialog),f("resizable",!1)("closable",!1)("modal",!0),p(5),$(N(6,9,"VPN.STATUS.NODE_SELECT_DIALOG.TEXT")),p(3),st(Ae(11,SWe)),f("value",r.clusterTreeNodes),Te("selection",r.selectedNode))}})}}return i})();var OWe=["treeview"],RWe=["hintFirstTreeElement"],PWe=yd.concat([M.FOLDER_POLICY,M.FOLDER_INTERFACES,M.POLICY_ROUTING,M.FOLDER_VPN,M.OPENVPN_ROOT,M.WIREGUARD_ROOT,M.IPSEC_ROOT,M.OPENVPN_PREFIX_FOLDER]).filter(i=>i!==M.ROUTING_TABLE),W$t=(()=>{class i{onContextMenuEvent(e,t){e.preventDefault(),this.contextMenuReference&&this.clearObjectInfo()}fwcIcon(e,t){return Sn.prototype.transform(e,t)}set treeOptions(e){this.options=Object.assign({},e),this.treeExpandedNodes=new Set,this.selectedPolicyNode=void 0,this.treeLoad(),this.cd.detectChanges()}set searchString(e){this._searchString=e,this.treeFilter()}get searchString(){return this._searchString}set treeSearchOptions(e){this._treeSearchOptions=e,this.treeFilterByOptions()}constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A,U,z,ee,re,Z,ae,Ie,ye,xe,Le,gi){this.refService=e,this.fwcObjectTreeService=t,this.itemSelectedService=r,this.fwcPolicyService=o,this.fwcRoutingTableService=s,this.fwcUserService=a,this.fwcFirewallService=l,this.fwcObjectService=c,this.fwcInterfaceService=d,this.fwcContextMenuService=h,this.fwcDhcpPolicyService=_,this.fwcHAProxyPolicyService=C,this.fwcKeepalivedPolicyService=I,this.fwcErrorPipe=b,this.fwcPolicyGridRoutingTableFunctionalityService=E,this.confirmationService=R,this.messageService=T,this.inputDataService=A,this.utilService=U,this.fwcVpnService=z,this.appHintService=ee,this.appDialogPanelsService=re,this.dialogService=Z,this.cd=ae,this.translate=Ie,this.store=ye,this.parentFwcTreePanelComponent=xe,this.fwcTreePanelMenuService=Le,this.fwcAiAssistantService=gi,this.currentResourcePath="app/integralui/icons",this.treeIntegralUIStyle=[iK,hs,eK,ms,fs,tK],this.currentDragDrop=Wr.Static,this.currentItemTemplate=be=>Ke`
      <iui-contextmenu
        .allowAnimation="${!1}"
        .customStyle="${[hs,nK,ms,fs]}"
        .colorScheme="${this.currentColorScheme}"
        .settings=${this.treeContextMenu[be.node_type]?this.treeContextMenu[be.node_type]:this.treeContextMenu.NO_MENU}
        @menuOpening=${$e=>this.onContextMenuLoad($e)}
        @menuClick=${$e=>this.onContextMenuHandler($e)}>
        <div class="fwcTree-item
          ${this.selectedPolicyNode&&be.id==this.selectedPolicyNode.id?"fwcSelectedPolicyNode":""}
          ${be.id==this.highlightNodeId?"fwcTree-item-highlight":""}
          ${be.obj_type===this.ObjectTypes?.OBJ_OPENVPN_CONFIG_CLI&&be.openvpn_disabled&&!be._fwcOpenvpnStatus?"fwcTree-item--disabled":""}
          ${be.obj_type===this.ObjectTypes?.OBJ_WGC_CONFIG_CLI&&be.wireguard_disabled&&!be._fwcWireGuardStatus?"fwcTree-item--disabled":""}
          ${be.obj_type===this.ObjectTypes?.OBJ_ISC_CONFIG_CLI&&be.ipsec_disabled&&!be._fwcIPSecStatus?"fwcTree-item--disabled":""}"
        @mouseenter=${$e=>this.showObjectInfo(be,$e)}
        @mouseleave=${$e=>this.clearObjectInfo($e)}
        @click=${$e=>this.onItemClickEvent($e)}
        @dblclick=${$e=>this.onItemDblClickEvent($e)}
        .draggable=${be.allowDrag}
        @dragstart=${$e=>this.onItemDragStart(be,$e)}
        @wheel="${()=>this.clearObjectInfo()}"
        @contextmenu=${$e=>this.onContextMenuEvent($e,be)}
      }}
      >
      ${be.obj_type==this.ObjectTypes.OBJ_CA&&be._fwcCaStatus?Ke`
      <span>
        <i class="fa fa-spin fa-spinner fwcBlue"></i>
      </span>`:""}

    ${be.obj_type==this.ObjectTypes.OBJ_COUNTRIE?Ke`
      <span>
        <i class="flag-icon flag-icon-${be.parent_name.toLowerCase()}"></i>
      </span>`:""}
      ${be.obj_type==this.ObjectTypes.OBJ_CONTINENT?Ke`
          <span>
            <i class="fwcTreeIcon ${this.fwcIcon(be.obj_type,be.parent_name)}"></i>
          </span>`:""}
      ${be.obj_type!=this.ObjectTypes.OBJ_COUNTRIE&&be.obj_type!=this.ObjectTypes.OBJ_CONTINENT&&!(be.node_type==="OPN"||be.node_type==="WG"||be.node_type==="IS")?Ke`
          <i class="fwcTreeIcon ${this.fwcIcon(be.obj_type,be.node_type)}" aria-hidden="true"></i>
        `:""}
      ${be.obj_type==this.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI&&be.openvpn_disabled&&!be._fwcOpenvpnStatus?Ke`
        <span class="fwcTree-item--disabled" style="margin-left: -0.15em; margin-top:0.3125em;">
          <img width="17.5" height="17.5" src="assets/img/openvpn-disabled.png" />
        </span>`:""}
      ${be.obj_type==this.ObjectTypes.OBJ_WGC_CONFIG_CLI&&be.wireguard_disabled&&!be._fwcWireGuardStatus?Ke`
        <span class="fwcTree-item--disabled" style="margin-left: -0.15em; margin-top:0.3125em;">
          <img width="17.5" height="17.5" src="assets/img/wireguard-disabled.png" />
        </span>`:""}
        ${be.obj_type==this.ObjectTypes.OBJ_ISC_CONFIG_CLI&&be.ipsec_disabled&&!be._fwcIPSecStatus?Ke`
          <span class="fwcTree-item--disabled" style="margin-left: -0.15em; margin-top:0.3125em;">
            <img width="17.5" height="17.5" src="assets/img/ipsec-disabled.png" />
          </span>`:""}
      ${!this.loadedIcons.has(be.id)&&be.node_type=="VPN"?Ke`
        <span style="font-size: 16px; margin-left: -0.14rem; margin-right: -0.09em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-tunel_icon"></use>
          </svg>
        </span>`:""}
      
      ${!this.loadedIcons.has(be.id)&&be.node_type=="OPN"?Ke`
        <span style="font-size: 16px; margin-left: -0.14rem; margin-right: -0.09em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-openvpn"></use>
          </svg>  
        </span>`:""}
      
      ${!this.loadedIcons.has(be.id)&&be.node_type=="WG"?Ke`
        <span style="font-size: 16px; margin-left: -0.14rem; margin-right: -0.09em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-wireguard"></use>
          </svg>             
        </span>`:""}
              
      ${!this.loadedIcons.has(be.id)&&be.node_type=="IS"?Ke`
        <span style="font-size: 16px; margin-left: -0.14rem; margin-right: -0.09em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-ipsec"></use>
          </svg>
        </span>`:""}
      
      ${!this.loadedIcons.has(be.id)&&be.node_type=="SYS"?Ke`
        <span style="font-size: 16px; margin-left: -0.15rem; margin-right: -0.09em;">
          <i class="fa fa-gear fwcBlue"></i>
        </span>`:""}
      
      ${!this.loadedIcons.has(be.id)&&["S01","S04"].includes(be.node_type)?Ke`
        <span style="margin-right: -0.09em; margin-top: 0.3125em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-isc-dhcp"></use>
          </svg>
        </span>`:""} 
      
      ${!this.loadedIcons.has(be.id)&&be.node_type=="S02"?Ke`
        <span style="margin-right: -0.09em; margin-top:0.3125em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-keepalived"></use>
          </svg> 
        </span>`:""}    
      
      ${!this.loadedIcons.has(be.id)&&be.node_type=="S03"?Ke`
        <span style="margin-right: -0.09em; margin-top:0.3125em;">
          <svg class="icon" width="20" height="20" onload=${()=>this.loadedIcons.add(be.id)}>
            <use xlink:href="assets/img/fwcIcons-symbol-defs.svg#fwci2-ha-proxy"></use>
          </svg>
        </span>`:""}

    ${be.node_type=="FDF"?Ke`
      <span>
        <i class="fwcTreeIcon fwci-clusters fwcDarkBlue" aria-hidden="true"></i>
      </span>`:""}

      ${(be.obj_type==this.ObjectTypes.OBJ_CLUSTER||be.obj_type==this.ObjectTypes.OBJ_FIREWALL)&&be.status_compiled?Ke`
      <span class="fwcBadgeFw fwcBadgeFw-C">
        <p>C</p>
      </span>`:""}

    ${(be.obj_type==this.ObjectTypes.OBJ_CLUSTER||be.obj_type==this.ObjectTypes.OBJ_FIREWALL)&&be.status_compiled||(be.obj_type==this.ObjectTypes.OBJ_CLUSTER||be.obj_type==this.ObjectTypes.OBJ_FIREWALL)&&!be.status_compiled&&be.status_installed?Ke`
      <span class="fwcBadgeFw fwcBadgeFw-I">
        <p>I</p>
      </span>`:""}

    ${(be.obj_type==this.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI||be.obj_type==this.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||be.obj_type==this.ObjectTypes.OBJ_WGS_CONFIG_SER||be.obj_type==this.ObjectTypes.OBJ_WGC_CONFIG_CLI||be.obj_type==this.ObjectTypes.OBJ_ISS_CONFIG_SER||be.obj_type==this.ObjectTypes.OBJ_ISC_CONFIG_CLI)&&be._fwcOpenvpnStatus||be._fwcWireGuardStatus||be._fwcIPSecStatus?Ke`
      <span class="fwcBadgeFw fwcBadgeFw-I">
        <p>I</p>
      </span>`:""}
      <span class="fwc-label ${be.fwcloud===null&&be.id_obj!==null?"fwcBlue":"fwcDark"}"
      style="font-weight: ${be._fwcObjId===null?"bold":"normal"};
      margin-left: ${be.obj_type==this.ObjectTypes.OBJ_CLUSTER||be.obj_type==this.ObjectTypes.OBJ_FIREWALL?"3px":"1px"}">

      ${be.text}
      ${be.labelName&&be.labelName!==""?Ke`<span>[${be.labelName}]</span>`:""}
      ${(be.parent_type===this.ObjectTypes.OBJ_HOST||be.parent_type===this.ObjectTypes.OBJ_FIREWALL||be.if_id)&&(be.obj_type==this.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI||be.obj_type==this.ObjectTypes.OBJ_OPENVPN_CONFIG_SER)&&(be.obj_type==this.ObjectTypes.OBJ_WGC_CONFIG_CLI||be.obj_type==this.ObjectTypes.OBJ_WGS_CONFIG_SER)&&(be.obj_type==this.ObjectTypes.OBJ_ISC_CONFIG_CLI||be.obj_type==this.ObjectTypes.OBJ_ISS_CONFIG_SER)&&be.address&&be.address!==""?Ke`<span>(${be.address})</span>`:""}
      ${be.obj_type==this.ObjectTypes.OBJ_CA&&be._fwcCaStatus?Ke`
        <span style="margin-left: 0.3em">
          <i class="fa fa-question-circle fwcOrange" @mouseenter="${$e=>this.appHintService.showRegisteredHint(hh.HINT_CA_CREATING,void 0,$e)}" aria-hidden="true"></i>
        </span>`:""}
    </span>
    </div>
    </iui-contextmenu>
    `,this.applicationRef=null,this.contextMenuReference=null,this.treeExpandedNodes=new Set,this.isKeepalivedPolicy=!1,this.searchOptions={allowParent:!0,caseSensitive:!1,conditions:{value:"",operation:"[]",negative:!1}},this.isHAProxyPolicy=!1,this.customSearchOptions={callback:(be,$e)=>{}},this._searchString="",this.alive=!0,this.ObjectTypes=O,this.NodeTypes=M,this.infoTooltipShown=!1,this.loadedIcons=new Set,this.CACertTypes=pm,this.HintsIds=hh,this.serviceMap={OSR:Qo.openvpn,S01:Qo.dhcp,S02:Qo.keepalived,S03:Qo.HAProxy,WGS:Qo.wireGuard,ISS:Qo.IPSec},this.askAssitant=!1,this.items=[],this.fwcTreePanelMenuService.forwardSelection.subscribe(be=>{this.onContextMenuHandler(be.e,be.panel_type)})}ngOnInit(){return B(this,null,function*(){this.treeContextMenu=this.fwcContextMenuService.getTreeMenus(),this.nodeTranslations=this.translate.instant("NODE_TYPES"),this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.store.pipe(yt(()=>this.alive),Cn(c0.selectItemToSelect),Ao(e=>!!e)).subscribe(e=>{this.treeFindItem(e._fwcObjId,e._fwcObjType,!0,e._fwcSubObjId,e._fwcSubObjType)}),this.options&&(this.options.container===qe.C_FIREWALLS||this.options.container===qe.C_FIREWALLS_CONDENSED)&&this.store.pipe(yt(()=>this.alive),Cn(c0.selectItemUpdateFwStatus),Ao(e=>!!e)).subscribe(e=>{this.treeUpdateFwStatus(this.items,e),this.treeview?.nativeElement&&this.treeview.nativeElement.refresh(),this.cd.detectChanges()}),this.itemSelectedService.getItem().pipe(yt(()=>this.alive)).subscribe(e=>{e.container||this.treeFindItem(e._fwcObjId,e._fwcObjType,!1,e._fwcSubObjId,e._fwcSubObjType)}),this.fwcPolicyService.getSelectedPolicy().pipe(yt(()=>this.alive)).subscribe(e=>{if(this.options.container==qe.C_FIREWALLS&&e._fwcFwId!==null&&e._fwcFwId!==void 0&&!e._dontLocateInTree){let t=this.treeFindPolicyItem(this.items,e._fwcFwId,e._fwcPolicyType,e._fwcObjId);t&&(this.selectedPolicyNode=t,t!=this.treeview.nativeElement.selectedItem&&(this.treeview.nativeElement.clearSelection(),this.treeview.nativeElement.scrollTo(t),this.treeview.nativeElement.selectItems([t])))}}),this.itemSelectedService.getModifiedItem().pipe(yt(()=>this.alive)).subscribe(e=>{if(!(e.deleteFromList||e.addToList||e.selectItemInPosition)){switch(e._fwcTreeAction){case mi.NEW_ITEM:this.treeNewItem(e);break;case mi.DELETE_ITEM:this.treeDeleteItem(e);break;case mi.NEW_GROUP_ITEM:this.treeNewItem(e,!0);break;case mi.DELETE_GROUP_ITEM:this.treeDeleteItem(e,!0);break;case mi.RELOAD_TREE:(e.containerToReload===this.options.container||Array.isArray(this.items)&&this.items.length&&this.items[0].node_type===e.treeNodeToReload)&&this.treeLoad(e);break;case mi.MODIFY_ITEM:default:this.treeModifyItem(e);break}this.cd.detectChanges()}}),this.fwcUserService.getFwcUser().pipe(yt(()=>this.alive)).subscribe(e=>{this.fwcUser&&this.fwcUser.selectedLanguage!=e.selectedLanguage&&this.translate.use(e.selectedLanguage),this.fwcUser=e}),this.fwcObjectTreeService.getTreeChildTypes().subscribe(e=>{this.fwcChildTypes=e}),this.appHintService.registerHint({id:hh.HINT_NO_FW,caption:"HINTS.HINT_NO_FW.CAPTION",description:"HINTS.HINT_NO_FW.DESC",imageURL:"assets/img/cloud.png",target:this.hintFirstTreeElement}),this.appHintService.registerHint({id:hh.HINT_CA_CREATING,caption:"HINTS.HINT_CA_CREATING.CAPTION",description:"HINTS.HINT_CA_CREATING.DESC",imageURL:"assets/img/cloud.png",target:this.hintFirstTreeElement})})}ngAfterViewInit(){let e=this;setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t}.bind(this),1)}ngOnDestroy(){this.alive=!1}setExpandedNodes(e,t){let r;e.detail&&(r=e.detail.item,t?this.treeExpandedNodes.add(r.id):this.treeExpandedNodes.delete(r.id))}treeLoad(e,t){let r=this.fwcUserService.getActualFwSelectedCloud();this.items.length=0,this.options.container==qe.C_FIREWALLS||this.options.container==qe.C_FIREWALLS_CONDENSED?(this.store.dispatch(Bi.requestBlockUI()),Promise.all([this.getTree(this.options),this.getAllFirewalls()]).then(([o,s])=>{let a,l,c=o.data;c.text=" ",c.expanded=!0,this.items.push(c),this.treeview.nativeElement.updateLayout(),this.treeClusters=[],a=Array.isArray(s.data)?s.data:[];for(let d=0;d<a.length;d++)if(a[d].cluster!==void 0&&a[d].cluster!==null){l=!1;for(let h=0;h<this.treeClusters.length;h++)a[d].cluster==this.treeClusters[h].clusterId&&(this.treeClusters[h].fwnodes.push(a[d]),a[d].fwmaster&&(this.treeClusters[h].fwMasterId=a[d].id),l=!0);if(!l){let h=this.treeClusters.push({clusterId:a[d].cluster,fwnodes:[]});a[d].fwmaster&&(this.treeClusters[h-1].fwMasterId=a[d].id),this.treeClusters[h-1].fwnodes.push(a[d])}}this.buildTree(e,t),this.cd.detectChanges(),this.store.dispatch(Bi.requestUnblockUI()),setTimeout(()=>{this.options.container==qe.C_FIREWALLS&&Array.isArray(this.items)&&this.items.length&&Array.isArray(this.items[0].items)&&!this.items[0].items.length&&(this.appHintService.showRegisteredHint(hh.HINT_NO_FW,this.hintFirstTreeElement),this.hintFirstTreeElement&&this.appHintService.setHintElement(this.hintFirstTreeElement))},500)}).catch(o=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)}),this.store.dispatch(Bi.requestUnblockUI())}),this.cd.detectChanges()):this.options.container==qe.C_CA?(this.store.dispatch(Bi.requestBlockUI()),this.fwcObjectTreeService.getTree(this.options,r).subscribe({next:o=>{let s=o.data;s.text=" ",s.expanded=!0,this.items.push(s),this.treeview.nativeElement.updateLayout(),this.buildTree(e,t),this.store.dispatch(Bi.requestUnblockUI())},error:o=>{this.errorMessage=o,this.store.dispatch(Bi.requestUnblockUI())}}),this.cd.detectChanges()):(this.store.dispatch(Bi.requestBlockUI()),this.fwcObjectTreeService.getTree(this.options,r).subscribe({next:o=>{let s;if(o.data.length>1){s=o.data;for(let a=0;a<s.length;a++)s[a].text=this.nodeTranslations+"."+s[a].node_type,s[a].expanded=!0,this.reorderTreeStdNodes(s[a]),this.items.push(s[a]),this.treeview.nativeElement.updateLayout()}else s=o.data,s.text=" ",s.expanded=!0,this.reorderTreeStdNodes(s),this.items.push(s),this.treeview.nativeElement.updateLayout();this.buildTree(e,t),this.store.dispatch(Bi.requestUnblockUI())},error:o=>{this.errorMessage=o,this.store.dispatch(Bi.requestUnblockUI())}}),this.cd.detectChanges())}getTree(e){return new Promise((r,o)=>{let s=this.fwcUserService.getActualFwcUser(),a=-1;s.selectedFwCloud!==null&&s.selectedFwCloud!==void 0&&(a=s.selectedFwCloud),this.fwcObjectTreeService.getTree(e,a).subscribe({next:l=>{r(l)},error:l=>{o(l)}})})}getAllFirewalls(){return new Promise((t,r)=>{let o=this.fwcUserService.getActualFwSelectedCloud();this.fwcFirewallService.getFirewallsByCloud(o).subscribe(s=>{t(s)},s=>{r(s)})})}reorderTreeStdNodes(e){}buildTree(e,t){if(this.treePrepare(this.items),this.treeview.nativeElement.updateLayout(),this.selectedPolicyNode&&(this.selectedPolicyNode=this.findItemByIdType(this.items,this.selectedPolicyNode._fwcObjId,this.selectedPolicyNode._fwcObjType),e||(e=this.selectedPolicyNode)),e){let r=this.items[0];this.options.container==e.container&&(t?e._fwcObjTreeParentId!==void 0?r=this.treeview.nativeElement.findItemById(e._fwcObjTreeParentId):e.pid!==void 0&&(r=this.treeview.nativeElement.findItemById(e.pid)):e._fwcObjTreeId!==void 0?r=this.treeview.nativeElement.findItemById(e._fwcObjTreeId):e._fwcObjId!==void 0&&e._fwcObjType!==void 0&&(r=this.findItemByIdType(this.items,e._fwcObjId,e._fwcObjType))),r&&(this.treeview.nativeElement.scrollTo(r),this.treeview.nativeElement.expand(r),this.treeview.nativeElement.selectItems([r]),yd.findIndex(o=>r.node_type==o)!=-1&&(this.selectedPolicyNode=r),this.treeview.nativeElement.updateView(),this.itemSelectedService.setSelectedTreeNode(r))}this.treeview.nativeElement.updateLayout()}treePrepare(e,t){let r=t||{};for(let o=0;o<e.length;o++){let s=e[o],a,l,c,d,h=[],_=[],C=[],I=[],b=[],E=[],R=[],T=[],A,U,z,ee,re,Z;if(s.node_type==M.CONTINENT&&(l=s.text,s.text=this.nodeTranslations[s.text]),s.node_type==M.COUNTRIE&&(l=s.text,s.text=this.translate.instant("COUNTRIES."+s.text)),this.nodeTranslations[s.node_type]&&!s.id_obj&&(s.text=this.nodeTranslations[s.node_type]),this.options.container===qe.C_FIREWALLS_CONDENSED&&(s.node_type===M.OBJ_FIREWALL||s.node_type===M.OBJ_CLUSTER))for(let ae=0;ae<s.items.length;ae++){let Ie=s.items[ae];if(Ie.node_type===M.FOLDER_VPN){let ye=Ie.items.filter(xe=>xe.node_type===M.OPENVPN_ROOT||xe.node_type===M.WIREGUARD_ROOT||xe.node_type===M.IPSEC_ROOT);s.items.splice(ae,1,...ye),ae=ae+ye.length-1}else Ie.node_type!==M.OPENVPN_ROOT&&Ie.node_type!==M.WIREGUARD_ROOT&&Ie.node_type!==M.IPSEC_ROOT&&(s.items.splice(ae,1),ae--)}if(yd.findIndex(ae=>ae==s.node_type)!=-1&&(s.obj_type=+ki[s.node_type]),dB.findIndex(ae=>ae===s.node_type)!=-1&&(s.show_action=!0),h=r.fw_status,_=r.ca_status,C=r.openvpn_status,I=r.openvpn_info,b=r.wireguard_status,E=r.wireguard_info,R=r.ipsec_status,T=r.ipsec_info,this.treeExpandedNodes.has(s.id)&&(s.expanded=!0),s.container=this.options.container,s.containerReadOnly=this.options.containerReadOnly,s.obj_type==O.OBJ_INTERFACE_FIREWALL||s.obj_type==O.OBJ_INTERFACE_HOST){let ae=/(.+)\s+\[(.+)\]$/.exec(s.text);s.labelName="",ae&&(s.text=ae[1],s.labelName=ae[2])}if(s.obj_type==O.OBJ_ADDRESS){let ae=/^(.+)\s+\((.+)\)$/.exec(s.text);ae&&s.address&&s.address===ae[2]&&(s.text=ae[1])}if(s._fwcObjName=s.text,s._fwcObjType=s.obj_type,s._fwcObjId=s.id_obj,r.prefix_name!==void 0&&r.prefix_name!==null&&(s._fwcObjName=r.prefix_name+s.text),(s.obj_type==O.OBJ_PREFIX_FOLDER||s.obj_type==O.OBJ_OPENVPN_PREFIX||s.obj_type==O.OBJ_WIREGUARD_PREFIX||s.obj_type==O.OBJ_IPSEC_PREFIX)&&(Z=s.text,re=r.parent_cert_name),r.parent_cert_name!==void 0&&r.parent_cert_name!==null&&(s._fwcParentConfigName=r.parent_cert_name),(s.obj_type==O.OBJ_OPENVPN_CONFIG_SER||s.obj_type==O.OBJ_WGS_CONFIG_SER||s.obj_type==O.OBJ_ISS_CONFIG_SER)&&(re=s._fwcObjName),s.container===qe.C_FIREWALLS||s.container===qe.C_OBJECTS||s.container===qe.C_FIREWALLS_CONDENSED?(r.parent_id&&(a=r.parent_id,l=r.parent_name,c=r.parent_type,d=r.fw_master,r.parent_type===O.OBJ_FIREWALL&&(s._fwcFwId=a,s._fwcFwName=l,s.firewall_id=a,s.firewall_name=l),r.parent_type===O.OBJ_CLUSTER&&(s._fwcClusterId=a,s._fwcClusterName=l,s.cluster_id=a,s.cluster_name=l),r.parent_type===O.OBJ_HOST&&(s._fwcHostId=a,s._fwcHostName=l,s.host_id=a,s.host_name=l)),r.openvpn_id&&(s._fwcOpenVPNId=r.openvpn_id),r.wireguard_id&&(s._fwcWireGuardId=r.wireguard_id),r.ipsec_id&&(s._fwcIPSecId=r.ipsec_id),s.fw_status&&s.fw_status.length&&(h=s.fw_status),s.openvpn_status&&s.openvpn_status.length&&(C=s.openvpn_status),s.openvpn_info&&s.openvpn_info.length&&(I=s.openvpn_info),s.wireGuard_status&&s.wireGuard_status.length&&(b=s.wireGuard_status),s.wireguard_info&&s.wireguard_info.length&&(E=s.wireguard_info),s.ipsec_status&&s.ipsec_status.length&&(R=s.ipsec_status),s.ipsec_info&&s.ipsec_info.length&&(T=s.ipsec_info),(s.node_type===M.OBJ_FIREWALL||s.node_type===M.OBJ_CLUSTER||s.node_type===M.OBJ_HOST)&&(a=s.id_obj,l=s.text,c=s.obj_type,s.node_type==M.OBJ_FIREWALL&&(s._fwcFwId=a,s._fwcFwName=l,this.updateFwNodeStatus(s,h)),s.node_type==M.OBJ_CLUSTER&&this.updateClusterNodeStatus(s,h)),s.obj_type===O.OBJ_OPENVPN_CONFIG_CLI||s.obj_type===O.OBJ_OPENVPN_CONFIG_SER?this.updateOPVNStatus(s,C):s.obj_type===O.OBJ_WGC_CONFIG_CLI||s.obj_type===O.OBJ_WGS_CONFIG_SER?this.updateWireGuardStatus(s,b):(s.obj_type===O.OBJ_ISC_CONFIG_CLI||s.obj_type===O.OBJ_ISS_CONFIG_SER)&&this.updateIPSecStatus(s,R),s.obj_type===O.OBJ_OPENVPN_CONFIG_CLI?this.updateOPVNInfo(s,I):s.obj_type===O.OBJ_WGC_CONFIG_CLI?this.updateWireGuardInfo(s,E):s.obj_type===O.OBJ_ISC_CONFIG_CLI&&this.updateIPSecInfo(s,T),(s.node_type===M.FOLDER_INTERFACES||s.node_type===M.FOLDER_CLUSTER_FW||s.node_type===M.FOLDER_ROUTING)&&s._fwcClusterId&&(d=s.id_obj),s.parent_id=a,s.parent_name=l,s.parent_type=c,d&&(s._fwcFwId=d),s.node_type===M.OPENVPN_CONFIG_SER?(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),U=s.id_obj):s.node_type===M.WIREGUARD_CONFIG_SER?(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),z=s.id_obj):s.node_type===M.IPSEC_CONFIG_SER&&(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),ee=s.id_obj),s.node_type===M.OPENVPN_PREFIX?(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),U=s._fwcOpenVPNId):s.node_type===M.WIREGUARD_PREFIX?(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),z=s._fwcWireGuardId):s.node_type===M.IPSEC_PREFIX&&(s.items=s.items.sort((ae,Ie)=>ae.text>Ie.text?1:-1),ee=s._fwcIPSecId)):s.container===qe.C_CA&&(s.ca_status&&s.ca_status.length&&(_=s.ca_status),s.obj_type==O.OBJ_CA&&(A=s.id_obj),s.obj_type==O.OBJ_PREFIX_FOLDER&&(A=r.ca_id),r.ca_id&&(s._fwcParentCA=r.ca_id),s.obj_type==O.OBJ_CA&&this.updateCAStatus(s,_)),s.expanded=!!s.expanded,s.allowDrag=this.checkItemDraggable(s),yd.findIndex(ae=>s.node_type==ae)!=-1&&(s._fwcPolicyFwId=s.id_obj),s.items&&s.items.length){let ae={fw_status:h,parent_id:a,parent_name:l,parent_type:c,fw_master:d,ca_status:_,openvpn_status:C,openvpn_info:I,wireguard_status:b,wireguard_info:E,ipsec_status:R,ipsec_info:T,ca_id:A,openvpn_id:U,wireguard_id:z,ipsec_id:ee,prefix_name:Z,parent_cert_name:re};this.treePrepare(s.items,ae)}}this.isKeepalivedPolicy&&e.filter(s=>s.parent_type===O.OBJ_FIREWALL&&s.cluster_id&&s.node_type===M.OBJ_FIREWALL).forEach(s=>{s.allowDrag=!0})}checkItemDraggable(e){let t;if(e)return e._fwcObjId===null||e._fwcObjType===null||cB.findIndex(r=>e.node_type==r)!=-1||e.obj_type===O.OBJ_FIREWALL&&e._fwcClusterId!==null&&e._fwcClusterId!==void 0?t=!1:t=!0,t}updateFwNodeStatus(e,t){let r,o;if(Array.isArray(t))for(let s=0;s<t.length;s++){let a=t[s];a&&(a.id==e.id_obj&&(r=a),e._fwcClusterId!==null&&e._fwcClusterId!==void 0&&a.cluster==e._fwcClusterId&&(o={clusterId:a.cluster,status_compiled:0,status_installed:a.status&2?1:0}))}r&&(e.status_compiled=r.status&1?1:0,e.status_installed=r.status&2?1:0),o&&e._fwcClusterId!==null&&e._fwcClusterId!==void 0&&e._fwcClusterId==o.clusterId&&(e.status_compiled=0,e.status_installed=o.status_installed)}updateClusterNodeStatus(e,t){let r,o,s=0;if(e){for(let a=0;a<this.treeClusters.length;a++)if(this.treeClusters[a].clusterId==e.id_obj){o=this.treeClusters[a];break}if(Array.isArray(t))for(let a=0;a<t.length;a++){let l=t[a];l&&l.cluster==e.id_obj&&(r=l,o&&o.clusterId==r.cluster&&(o.fwMasterId==r.id&&(e.status_compiled=r.status&1?1:0),r.status&2&&(s=1)))}e.status_installed=s}}updateCAStatus(e,t){let r;if(e){if(Array.isArray(t)){for(let o=0;o<t.length;o++)if(t[o]&&e.id_obj==t[o].id&&t[o].status){r=1;break}}e._fwcCaStatus=r}}updateOPVNInfo(e,t){if(!(!e||!Array.isArray(t)))for(let r=0;r<t.length;r++)t[r]&&e.id_obj==t[r].openvpn&&(e.openvpn_disabled=!!t[r].openvpn_disabled)}updateOPVNStatus(e,t){let r;if(!(!e||!Array.isArray(t))){for(let o=0;o<t.length;o++)if(t[o]&&e.id_obj==t[o].id&&t[o].status){r=1;break}e._fwcOpenvpnStatus=r}}updateWireGuardInfo(e,t){if(!(!e||!Array.isArray(t)))for(let r=0;r<t.length;r++)t[r]&&e.id_obj==t[r].wireguard&&(e.wireguard_disabled=!!t[r].wireguard_disabled)}updateWireGuardStatus(e,t){let r;if(!(!e||!Array.isArray(t))){for(let o=0;o<t.length;o++)if(t[o]&&e.id_obj==t[o].id&&t[o].status){r=1;break}e._fwcWireGuardStatus=r}}updateIPSecInfo(e,t){if(!(!e||!Array.isArray(t)))for(let r=0;r<t.length;r++)t[r]&&e.id_obj==t[r].ipsec&&(e.ipsec_disabled=!!t[r].ipsec_disabled)}updateIPSecStatus(e,t){let r;if(!(!e||!Array.isArray(t))){for(let o=0;o<t.length;o++)if(t[o]&&e.id_obj==t[o].id&&t[o].status){r=1;break}e._fwcIPSecStatus=r}}treeFindItem(e,t,r,o,s){return B(this,null,function*(){let a=this.findItemByIdType(this.items,e,t,o,s);a&&(r&&this.parentFwcTreePanelComponent&&!this.parentFwcTreePanelComponent.expanded&&(yield this.parentFwcTreePanelComponent.togglePanel()),this.treeview.nativeElement.clearSelection(),this.treeview.nativeElement.scrollTo(a),this.treeview.nativeElement.selectItems([a]),this.treeview.nativeElement.updateLayout())})}treeFindPolicyItem(e,t,r,o){let s=null;for(let a=0;a<e.length&&!s;a++){let l=e[a];r!==Zr.ROUTING_TABLE&&l._fwcPolicyFwId==t&&l._fwcObjType==r||l.node_type===M.ROUTING_TABLE&&l._fwcFwId===t&&l._fwcObjId===o?s=l:r===ki[M.DHCP]||r===ki[M.DHCP_FIXED_IP]||r===ki[M.KEEPALIVED]||r===ki[M.HAPROXY]?(o=void 0,s=this.treeFindPolicyItem(l.items,t,r,o)):l.items&&l.items.length&&(s=this.treeFindPolicyItem(l.items,t,r,o))}return s}findItemsByIdType(e,t,r,o,s){let a=[],l;for(let c=0;c<e.length;c++)if(e[c]._fwcObjId==t&&e[c]._fwcObjType==r&&e[c].node_type!=M.FOLDER_INTERFACES)if(l=e[c],o&&l.items){let d=this.findItemsByIdType(l.items,o,s);d&&d.length&&(a=a.concat(d))}else a=a.concat(l);else e[c].items&&e[c].items.length&&(a=a.concat(this.findItemsByIdType(e[c].items,t,r,o,s)));return a}findItemByIdType(e,t,r,o,s){let a=null;for(let l=0;l<e.length&&!a;l++)if(e[l]._fwcObjId==t&&e[l]._fwcObjType==r){if(a=e[l],o&&a.items){let c=this.findItemByIdType(a.items,o,s);c&&(a=c)}}else e[l].items&&e[l].items.length&&(a=this.findItemByIdType(e[l].items,t,r,o,s));return a}treeFindNode(e,t,r){let o;return e==this.options.container&&(o=this.findItemByIdType(this.items,t,r)),o}treeModifyItem(e){if(this.items&&this.items.length&&e.id!==null&&e.id!==void 0&&e.type!==null&&e.type!==void 0||e.node_id!==null&&e.node_id!==void 0){let t=[];if(e.node_id){let r=this.treeview.nativeElement.findItemById(e.node_id);r&&t.push(r)}else t=this.findItemsByIdType(this.items,e.id,+e.type);if(t&&t.length)for(let r of t){let o=""+r.type,s=r.id;for(let a of Object.keys(r))e[a]!==void 0&&(r[a]=e[a]);r.type=o,r.id=s,e.address&&e.if_id?(r.if_id=e.if_id,r.address=e.address,r.text=e.name,r._fwcObjName=`${e.name} (${e.address})`,r.text=r._fwcObjName):r._fwcObjName=r.text=e.name,this.treeview.nativeElement.updateLayout()}}}treeNewItem(e,t){if(e.container==this.options.container)if(t){let r=this.treeview.nativeElement.findItemById(e._fwcObjTreeParentId);if(r){let o=r.items?r.items:[];e.items=[],this.treeview.nativeElement.insertItemAt(e,o.length,r),this.treeview.nativeElement.expand(r),this.treeview.nativeElement.updateLayout()}}else this.treeLoad(e,t);else this.options.container==qe.C_FIREWALLS&&e.fw_status&&e.fw_status.length&&this.treeLoad(e,t)}treeDeleteItem(e,t){e.container==this.options.container?t?(this.treeLoad(e,!0),setTimeout(()=>{let r=this.treeview.nativeElement.findItemById(e._fwcObjTreeParentId);r&&this.treeview.nativeElement.selectItems([r])},500)):this.treeLoad(e,t):this.options.container==qe.C_FIREWALLS&&e.fw_status&&e.fw_status.length&&this.treeLoad(e,!0)}treeFilter(){this._searchString&&this._searchString.length?(this.searchOptions.conditions.value=this._searchString,this.treeview.nativeElement.filter(this.searchOptions)):this.treeview.nativeElement.filter()}treeFilterByOptions(){let e,t,r=s=>Number(s.split(".").map(a=>("000"+a).substr(-3)).join("")),o={callback:(s,a)=>{let l=!1,c=this._treeSearchOptions.searchFields,d=[a];for(;d&&d.length&&!l;){let h=d.shift();if(c.find(_=>_===GC.OBJECT_NAME)&&h.text&&(l=h.text.toLowerCase().includes(this._treeSearchOptions.keyword.toLowerCase())),!l&&c.find(_=>_===GC.TCP_UDP_PORT)&&(h.source_port_start||h.source_port_end||h.destination_port_start||h.destination_port_end)){let _=parseInt(this._treeSearchOptions.keyword);_!=null&&(l=_>=h.source_port_start&&_<=h.source_port_end||_>=h.destination_port_start&&_<=h.destination_port_end)}if(!l&&c.find(_=>_===GC.IP_ADDRESS)&&(h.address||h.range_start||h.range_end)&&(h.address?l=h.address.includes(this._treeSearchOptions.keyword):h.range_start&&h.range_end&&(l=lK.isValid(this._treeSearchOptions.keyword)&&r(this._treeSearchOptions.keyword)>=r(h.range_start)&&r(this._treeSearchOptions.keyword)<=r(h.range_end))),l){let _=this.treeview.nativeElement.getItemParent(h);for(;_;)_.expanded=!0,_=this.treeview.nativeElement.getItemParent(_)}Array.isArray(h.items)&&d.push(...h.items)}return l}};if(this.treeview.nativeElement.suspendLayout(),this._treeSearchOptions&&this._treeSearchOptions.keyword)this.treeview.nativeElement.filter(o);else if(this.treeview.nativeElement.filter(),Array.isArray(this.treeview.nativeElement.items)&&this.treeview.nativeElement.items.length){this.treeview.nativeElement.collapse();let s=this.treeview.nativeElement.getFullList();for(let a=0;a<s.length;a++){let l=s[a];l.expanded=a===0||this.treeExpandedNodes.has(l.id)}}this.treeview.nativeElement.resumeLayout(),Array.isArray(this.treeview.nativeElement.items)&&this.treeview.nativeElement.items.length&&this.treeview.nativeElement.scrollTo(this.treeview.nativeElement.items[0])}treeUpdateFwStatus(e,t){let r=null;for(let o=0;o<e.length;o++){let s=e[o];s.node_type==M.OBJ_FIREWALL&&this.updateFwNodeStatus(s,t),s.node_type==M.OBJ_CLUSTER&&this.updateClusterNodeStatus(s,t),s.items&&s.items.length&&(r=this.treeUpdateFwStatus(s.items,t))}return r}onContextMenuLoad(e){let t=this.treeview.nativeElement.selectedItem;if(!t||this.options.container==qe.C_FIREWALLS_CONDENSED&&t.node_type!=M.OPENVPN_CONFIG_SER&&t.node_type!=M.OPENVPN_CONFIG_CLI&&t.node_type!=M.OPENVPN_PREFIX&&t.node_type!=M.WIREGUARD_CONFIG_SER&&t.node_type!=M.WIREGUARD_CONFIG_CLI&&t.node_type!=M.WIREGUARD_PREFIX&&t.node_type!=M.IPSEC_CONFIG_SER&&t.node_type!=M.IPSEC_CONFIG_CLI&&t.node_type!=M.IPSEC_PREFIX||t.node_type==M.OBJ_FIREWALL&&t._fwcClusterId){e.detail.cancel=!0;return}let r=t._fwcObjId!==null&&t._fwcObjId!==void 0,o=t.fwcloud!==null&&t.fwcloud!==void 0,s,a,l=t.items.length,c=!t._fwcOpenvpnStatus,d=!t._fwcWireGuardStatus,h=!t._fwcIPSecStatus,_=t.obj_type==O.OBJ_OPENVPN_CONFIG_CLI&&t.openvpn_disabled&&c||t.obj_type==O.OBJ_WGC_CONFIG_CLI&&t.wireguard_disabled&&d||t.obj_type==O.OBJ_ISC_CONFIG_CLI&&t.ipsec_disabled&&h;a=this.treeview.nativeElement.getItemParent(t),s=!!(a&&(a.obj_type==O.OBJ_GROUP||a.obj_type==O.OBJ_SERVICE_GROUP)&&a.id_obj);let C=this.treeContextMenu[t.node_type],I=this.fwcUserService.getActualFwcUser(),b=[V.SEPARATOR,V.FOLDER_EXPAND,V.POLICY_PANEL_SHOW,V.POLICY_PANEL_DOWNLOAD,V.FOLDER_COLLAPSE,V.CA_VIEW,V.CA_CRT_VIEW,V.TREE_RELOAD,V.WHERE_USED,V.SYSTEM_SHOW_CONFIG,V.SYSTEM_DOWNLOAD_CONFIG,V.VPN_CONFIG_STATUS,V.VPN_CONFIG_HISTORIC,V.VPN_CONFIG_FILE];C&&C.items?C.items.forEach(E=>B(this,null,function*(){E.type!=="separator"&&(E.id==V.FOLDER_EXPAND?E.visible=!!(!t.expanded&&l):E.id==V.FOLDER_COLLAPSE?E.visible=!!(t.expanded&&l):E.id==V.VPN_CONFIG_BLOCK&&_||E.id==V.VPN_CONFIG_UNBLOCK&&!_||E.userObject&&!o||E.objectInGroup&&!s||E.objectInGroup===!1&&s||E.clusterNode&&!t._fwcClusterId||E.clusterNode===!1&&t._fwcClusterId||E.onlyOnNodeType&&E.onlyOnNodeType!=t.node_type||E.onlyIfConfigInstalled&&!c||E.onlyIfConfigInstalled&&!d||E.onlyIfConfigInstalled&&!h?E.visible=!1:E.visible=!!(E.finalObject&&r||!E.finalObject&&!r),E.disableOnCACreation&&t._fwcCaStatus==1?E.enabled=!1:E.enabled=!0,I.lockInfo.result||(E.enabled=b.includes(E.id)))})):e.detail.cancel=!0}onContextMenuHandler(e,t){return B(this,null,function*(){if(e.detail.item){let r=this.treeview.nativeElement.selectedItem;if(t&&(e.detail.item.id==V.TREE_RELOAD||e.detail.item.id==V.TREE_REPAIR)){if(this.parentFwcTreePanelComponent.panel_type!=t)return}else{if(!r)return;r._fwcUserId=this.fwcUser.user_id}switch(e.detail.item.id){case V.WHERE_USED:let o=Object.assign({},r);o._fwcUserId=this.fwcUser.user_id,o._fwcCloud=this.fwcUser.selectedFwCloud,o.whereUsedAction=!0,this.itemSelectedService.setItem(o);break;case V.FOLDER_EXPAND:this.treeview.nativeElement.expand(r);break;case V.FOLDER_COLLAPSE:this.treeview.nativeElement.collapse(r);break;case V.TREE_RELOAD:this.treeLoad(),this.cd.detectChanges();break;case V.TREE_REPAIR:{let ze=t||r.node_type,Ge={tree_name:this.translate.instant("NODE_TYPES."+ze).toLowerCase()},Fe=$r(),ot={channelId:Fe,headerIcon:"fa fa-3x fa-wrench fwcBlue",textHeader:this.translate.instant("TREE_REPAIR_PANEL.HEADER",Ge),textMessage:this.translate.instant("TREE_REPAIR_PANEL.TEXT"),apiCall:this.fwcObjectTreeService.repairTree.bind(this.fwcObjectTreeService),apiParams:[ze,this.fwcUserService.getActualFwSelectedCloud(),Fe],onClose:Ft=>{Ft&&!Ft.error?(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("TREE_REPAIR_PANEL.REPAIR_OK")}),this.treeLoad()):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("TREE_REPAIR_PANEL.REPAIR_ERRORS")})}},Vt=this.utilService.createDynamicComponentRef(fo),zt=Vt.instance;zt.setDynamicComponentRef(Vt),this.communicationSubscription=zt.socketEventEmitter.subscribe(Ft=>{Ft=="connected"&&this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:ot}),this.communicationSubscription.unsubscribe()}),zt.checkConnection();break}case V.FIREWALL_IMPORT:{let ze=this.utilService.createDynamicComponentRef(aK),Ge=ze.instance;Ge.setDynamicComponentRef(ze),Ge.displayDialog=!0;break}case V.NGFW:r.ngfw=!0,this.itemSelectedService.setItem(r);break;case V.PLUGINS:r.plugins=!0,this.itemSelectedService.setItem(r);break;case V.FIREWALL_EDIT:r.ngfw=!1,this.itemSelectedService.setItem(r);break;case V.NODE_EDIT:this.itemSelectedService.setItem(r);break;case V.POLICY_LOAD:this.actionLoadPolicy(r);break;case V.FIREWALL_NEW:let s={id_obj:null,obj_type:O.OBJ_FIREWALL,_fwcObjType:O.OBJ_FIREWALL,node_id:r.id};this.itemSelectedService.setItem(s);break;case V.FIREWALL_DELETE:let a=Object.assign({},r);a.deleteAction=!0,this.itemSelectedService.setItem(a);break;case V.NODE_DELETE:let l=Object.assign({},r);l.deleteAction=!0,this.itemSelectedService.setItem(l);break;case V.FIREWALL_COMPILE:case V.FIREWALL_INSTALL:let c;c={compileAction:e.detail.item.id===V.FIREWALL_INSTALL?ao.COMP_INSTALL:ao.COMP_COMPILE,compileWhat:r._fwcObjType===O.OBJ_FIREWALL?ao.COMP_FIREWALL:ao.COMP_CLUSTER,compileId:r._fwcObjId,compileType:r._fwcObjType},this.itemSelectedService.setCloudToCompile(c);break;case V.POLICY_PANEL_SHOW:let d=this.utilService.createDynamicComponentRef(JF),h=d.instance;h.setDynamicComponentRef(d),h.show(r._fwcObjId);break;case V.POLICY_PANEL_DOWNLOAD:let _=this.utilService.createDynamicComponentRef(JF),C=_.instance;C.setDynamicComponentRef(_),C.downloadPolicyScript(r._fwcObjId);break;case V.FIREWALL_COMPILE_ALL:this.itemSelectedService.setCloudToCompile({compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_CLOUD,compileId:this.fwcUserService.getActualFwSelectedCloud()});break;case V.FIREWALL_INSTALL_ALL:this.itemSelectedService.setCloudToCompile({compileAction:ao.COMP_INSTALL,compileWhat:ao.COMP_CLOUD,compileId:this.fwcUserService.getActualFwSelectedCloud()});break;case V.FIREWALL_CLONE:let I={header:this.translate.instant("TREE.FW_CLONE.HEADER",{name:r._fwcObjName}),helpText:this.translate.instant("TREE.FW_CLONE.TEXT"),formControls:[{name:"firewall",type:"hidden",value:r._fwcObjId},{name:"type",type:"hidden",value:r._fwcObjType},{name:"fwcloud",type:"hidden",value:this.fwcUserService.getActualFwSelectedCloud()},{name:"node_id",type:"hidden",value:r.pid},{name:"name",label:this.translate.instant("TREE.FW_CLONE.NAME"),type:"text",required:!0,value:`${r._fwcObjName}_CLONE`},{name:"comment",label:this.translate.instant("TREE.FW_CLONE.COMMENT"),type:"textarea",value:""}],onAccept:this.processInputDialogData.bind(this)};this.inputDataService.setInputData(I);break;case V.FIREWALL_TO_CLUSTER:this.confirmationService.confirm({header:this.translate.instant("TREE.MSG_CONFIRM_OP"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("TREE.MSG_FW_TO_CLUSTER_1",{name:r._fwcObjName}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{let ze={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:r._fwcObjId,node_id:r.pid};this.utilService.fwcAPICall(this.fwcFirewallService.convertFwToCluster.bind(this.fwcFirewallService),ze).then(Ge=>{let Fe={},ot=Ge.data.insertId;Fe.id=Fe.id_obj=Fe._fwcObjId=ot,Fe._fwcObjType=O.OBJ_CLUSTER,Fe._fwcTreeAction=mi.NEW_ITEM,Fe.container=qe.C_FIREWALLS,this.treeNewItem(Fe);let Vt={_fwcFwId:null},zt=this.fwcPolicyService.getActualSelectedPolicy();this.fwcPolicyService.setSelectedPolicy(Vt),this.itemSelectedService.hideObjectPanel(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("TREE.MSG_FW_TO_CLUSTER_OK_1",{name:r._fwcObjName})})}).catch(Ge=>{Ge.error.fwcErr==8001||Ge.error.fwcErr==8002?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR."+Ge.error.fwcErr),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK"),accept:()=>{}}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(Ge)})})}});break;case V.FIREWALL_IPTABLES_IMPORT:case V.FIREWALL_IPTABLES_EXPORT:let b=this.translate.instant("PANELS.IPTABLES_SAVE.TITLE_IMPORT"),E={operation:Ds.IMPORT,objId:r._fwcObjId,objType:r._fwcObjType,objName:r._fwcObjName};e.detail.item.id===V.FIREWALL_IPTABLES_EXPORT&&(E.operation=Ds.EXPORT,b=this.translate.instant("PANELS.IPTABLES_SAVE.TITLE_EXPORT")),this.dialogService.open(KS,{showHeader:!0,header:b,closable:!1,closeOnEscape:!1,data:E,styleClass:"custom-dialog"}).onClose.pipe(yt(()=>this.alive)).subscribe(ze=>{});break;case V.FOLDER_NEW:let T={header:this.translate.instant("TREE.FOLDER.HEADER_NEW"),helpText:this.translate.instant("TREE.FOLDER.TEXT_NEW"),formControls:[{name:"id_parent",type:"hidden",value:r.id},{name:"fwcloud",type:"hidden",value:this.fwcUserService.getActualFwSelectedCloud()},{name:"folder_name",label:this.translate.instant("TREE.FOLDER.NAME"),type:"text",required:!0,value:""}],onAccept:this.processInputDialogData.bind(this)};this.inputDataService.setInputData(T);break;case V.FOLDER_DELETE:if(r.node_type==M.FOLDER)if(r.items&&r.items.length)this.confirmationService.confirm({header:"Error",icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("TREE.MSG_FOLDER_NOT_EMPTY_ERROR")});else{let ze={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),id:r.id};this.utilService.fwcAPICall(this.fwcObjectTreeService.deleteFolder.bind(this.fwcObjectTreeService),ze).then(Ge=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("TREE.FOLDER.SUCCESS_DELETE")}),this.treeLoad()}).catch(Ge=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(Ge)})})}break;case V.FOLDER_RENAME:let A={header:this.translate.instant("TREE.FOLDER.HEADER_RENAME",{name:r._fwcObjName}),helpText:this.translate.instant("TREE.FOLDER.TEXT_RENAME"),formControls:[{name:"id",type:"hidden",value:r.id},{name:"old_name",type:"hidden",value:r._fwcObjName},{name:"fwcloud",type:"hidden",value:this.fwcUserService.getActualFwSelectedCloud()},{name:"folder_newname",label:this.translate.instant("TREE.FOLDER.NAME"),type:"text",required:!0,value:""}],onAccept:this.processInputDialogData.bind(this)};this.inputDataService.setInputData(A);break;case V.CLUSTER_NEW:let U={id_obj:null,obj_type:O.OBJ_CLUSTER,_fwcObjType:O.OBJ_CLUSTER,node_id:r.id};this.itemSelectedService.setItem(U);break;case V.NGFW:r.ngfw=!0,this.itemSelectedService.setItem(r);break;case V.PLUGINS:r.plugins=!0,this.itemSelectedService.setItem(r);break;case V.CLUSTER_EDIT:r.ngfw=!1,this.itemSelectedService.setItem(r);break;case V.CLUSTER_DELETE:let z=Object.assign({},r);z.deleteAction=!0,this.itemSelectedService.setItem(z);break;case V.CLUSTER_COMPILE_ALL:this.itemSelectedService.setCloudToCompile({compileAction:ao.COMP_COMPILE,compileWhat:ao.COMP_CLUSTERS_ALL,compileId:void 0});break;case V.CLUSTER_CLONE:let ee={header:this.translate.instant("TREE.CL_CLONE.HEADER",{name:r._fwcObjName}),helpText:this.translate.instant("TREE.CL_CLONE.TEXT"),formControls:[{name:"cluster",type:"hidden",value:r._fwcObjId},{name:"type",type:"hidden",value:r._fwcObjType},{name:"fwcloud",type:"hidden",value:this.fwcUserService.getActualFwSelectedCloud()},{name:"node_id",type:"hidden",value:r.pid},{name:"name",label:this.translate.instant("TREE.CL_CLONE.NAME"),type:"text",required:!0,value:`${r._fwcObjName}_CLONE`},{name:"comment",label:this.translate.instant("TREE.CL_CLONE.COMMENT"),type:"textarea",value:""}],onAccept:this.processInputDialogData.bind(this)};this.inputDataService.setInputData(ee);break;case V.CLUSTER_TO_FIREWALL:this.confirmationService.confirm({header:this.translate.instant("TREE.MSG_CONFIRM_OP"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("TREE.MSG_CLUSTER_TO_FW_1",{name:r._fwcObjName}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{let ze={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),cluster:r._fwcObjId,node_id:r.pid};this.utilService.fwcAPICall(this.fwcFirewallService.convertClusterToFw.bind(this.fwcFirewallService),ze).then(Ge=>{let Fe={},ot=Ge.data.insertId;Fe.id=Fe.id_obj=Fe._fwcObjId=ot,Fe._fwcObjType=O.OBJ_FIREWALL,Fe._fwcTreeAction=mi.NEW_ITEM,Fe.container=qe.C_FIREWALLS,this.treeNewItem(Fe);let Vt={_fwcFwId:null},zt=this.fwcPolicyService.getActualSelectedPolicy();this.fwcPolicyService.setSelectedPolicy(Vt),this.itemSelectedService.hideObjectPanel(),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("TREE.MSG_CLUSTER_TO_FW_OK_1",{name:r._fwcObjName})})}).catch(Ge=>{Ge.error.fwcErr==8001||Ge.error.fwcErr==8002?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR."+Ge.error.fwcErr),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK"),accept:()=>{}}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(Ge)})})}});break;case V.NEW_INTERFACE:if(r._fwcFwId&&r._fwcObjType==O.OBJ_INTERFACE_FIREWALL||r._fwcClusterId&&r._fwcObjType==O.OBJ_INTERFACE_FIREWALL||r._fwcObjId&&!r._fwcFwId&&r._fwcObjType==O.OBJ_HOST){let ze,Ge;r._fwcObjType==O.OBJ_INTERFACE_FIREWALL?Ge=O.OBJ_INTERFACE_FIREWALL:Ge=O.OBJ_INTERFACE_HOST;let Fe=this.fwcChildTypes.data.filter(function(vi){return vi.id_node==r.node_type}),ot,Vt=r._fwcObjId!==null&&r._fwcObjId!==void 0;if(Fe.forEach(vi=>{(vi.is_object&&Vt||!vi.is_object&&!Vt)&&(ot=vi)}),!ot){this.confirmationService.confirm({header:"Error",icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("TREE.MSG_ADD_IF_ERROR")});return}let zt,Ft,wi;r.parent_type===O.OBJ_FIREWALL&&(zt=r.parent_id),r.parent_type===O.OBJ_CLUSTER&&(zt=r._fwcFwId,Ft=r.parent_id),r.parent_type===O.OBJ_HOST&&(wi=r.parent_id);let Wi;Ft&&zt?Wi="CLUSTER "+Ft+", MASTER FIREWALL: "+zt:wi?Wi="HOST "+wi:Wi="FIREWALL "+zt,ze={node_parent:r.id,node_order:1,node_type:ot.node_type,host:wi,firewall:zt,cluster:Ft,interface_type:Ge,_fwcObjId:void 0,_fwcObjType:Ge,fwcloud:this.fwcUser.selectedFwCloud,_fwcUserId:this.fwcUser.user_id,container:this.options.container,containerReadOnly:!0,parent_id:r.parent_id,parent_name:r.parent_name,parent_type:r.parent_type},this.itemSelectedService.setItem(ze)}else this.confirmationService.confirm({header:"Error",icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("TREE.MSG_ADD_IF_ERROR")});break;case V.NEW_ADDRESS:case V.NEW_GROUP:case V.NEW_NETWORK:case V.NEW_IP_RANGE:case V.NEW_HOST:case V.NEW_IP_SERVICE:case V.NEW_ICMP_SERVICE:case V.NEW_TCP_SERVICE:case V.NEW_UDP_SERVICE:case V.NEW_SERVICE_GROUP:case V.NEW_DNS:let re,Z="",ae=this.fwcChildTypes.data.filter(ze=>ze.id_node==r.node_type),Ie,ye=r._fwcObjId!==null&&r._fwcObjId!==void 0;if(ae.forEach(ze=>{(ze.is_object&&ye||!ze.is_object&&!ye)&&(Ie=ze)}),!Ie){this.confirmationService.confirm({header:"Error",icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("TREE.MSG_ADD_OBJ_ERROR")});return}let xe=r._fwcObjType,Le,gi;if(e.detail.item.id==V.NEW_ADDRESS&&(r._fwcObjType==O.OBJ_INTERFACE_FIREWALL||r._fwcObjType==O.OBJ_INTERFACE_HOST)){xe=O.OBJ_ADDRESS,Le=r._fwcObjId,gi=r._fwcObjType;let ze=-1,Ge=r._fwcFwName,Fe=r._fwcObjName,ot=`^${Fe}$`,Vt=new RegExp(ot,"g"),zt=`^${Fe}:(\\d+)$`,Ft=new RegExp(zt,"g");if(r._fwcClusterName&&r._fwcClusterName.length&&(Ge=r._fwcClusterName),r._fwcHostName&&r._fwcHostName.length&&(Ge=r._fwcHostName),r.items&&r.items.constructor===Array)for(let wi=0;wi<r.items.length;wi++){let Wi=r.items[wi]._fwcObjName,vi,wn;vi=Vt.exec(Wi),vi&&ze==-1&&(ze=0),vi=Ft.exec(Wi),vi&&(wn=+vi[1],ze=wn+1)}ze==-1?Z=`${Fe}`:Z=`${Fe}:${ze}`}let be;switch(e.detail.item.id){case V.NEW_TCP_SERVICE:be=6;break;case V.NEW_ICMP_SERVICE:be=1;break;case V.NEW_UDP_SERVICE:be=17;break}re={_fwcObjId:void 0,_fwcObjType:xe,_fwcObjName:Z,fwcloud:this.fwcUser.selectedFwCloud,_fwcUserId:this.fwcUser.user_id,interface:Le,_fwcParentInterfaceType:gi,_fwcParentObjName:r._fwcObjName,container:this.options.container,containerReadOnly:!0,node_parent:r.id,node_order:1,node_type:Ie.node_type,protocol:be},this.itemSelectedService.setItem(re);break;case V.DUPLICATE:this.onItemDblClickEvent(void 0,!0);break;case V.EDIT:this.onItemDblClickEvent(void 0);break;case V.DELETE:if(r.fwcloud==null||r.fwcloud==null){this.confirmationService.confirm({header:"Error",icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant("TREE.MSG_DELETE_OBJ_ERROR_1",{name:r._fwcObjName})});return}let $e=Object.assign({},r);$e.deleteAction=!0,this.itemSelectedService.setItem($e);break;case V.DELETE_FROM_GROUP:let oi=this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_1",{name:r._fwcObjName});this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:oi,rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{let ze=this.treeview.nativeElement.getItemParent(r),Ge={fwcloud:this.fwcUser.selectedFwCloud,ipobj_g:ze.id_obj,ipobj:r._fwcObjId,obj_type:r._fwcObjType};this.utilService.fwcAPICall(this.fwcObjectService.deleteObjectGroupObject.bind(this.fwcObjectService),Ge).then(Fe=>{let ot=Object.assign({},r);Fe.data&&Fe.data.length&&(ot.fw_status=Fe.data),ot._fwcObjTreeParentId=ot.pid,this.treeDeleteItem(ot,!0);let Vt=this.itemSelectedService.getActualItem();this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]})),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_SUCCESS")})}).catch(Fe=>{Fe.error&&(Fe.error.restrictions?this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("TREE.RESTR_ERROR.HEADER"),detail:this.translate.instant("TREE.RESTR_ERROR.TEXT",{name:r._fwcObjName})}):Fe.error.fwcErr==5001?setTimeout(()=>{this.confirmationService.confirm({header:this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_EMPTY",{name:r._fwcObjName}),rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})},500):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(Fe)}))})}});break;case V.CA_NEW:case V.CA_CRT_NEW:let Hi={_fwcObjId:void 0,container:this.options.container,node_id:r.id,node_type:r.node_type,obj_type:O.OBJ_CA};if(e.detail.item.id==V.CA_CRT_NEW){if(Hi.type=pm.client,Hi.obj_type=O.OBJ_CERT_CLI,r.obj_type==O.OBJ_CA)Hi.ca=r.id_obj,Hi.ca_name=r.text;else if(r.obj_type==O.OBJ_PREFIX_FOLDER){let ze=this.treeview.nativeElement.getItemParent(r);Hi.ca=ze.id_obj,Hi.ca_name=ze.text,Hi.folder_prefix=r.text}}this.itemSelectedService.setItem(Hi);break;case V.CA_VIEW:case V.CA_CRT_VIEW:r.containerReadOnly=!0,this.itemSelectedService.setItem(r);break;case V.CA_EDIT:case V.CA_CRT_EDIT:r.containerReadOnly=!1,this.itemSelectedService.setItem(r);break;case V.CA_DELETE:case V.CA_CRT_DELETE:let Ui,fi,ji,pi={fwcloud:this.fwcUserService.getActualFwSelectedCloud()};e.detail.item.id==V.CA_DELETE?(fi=this.fwcVpnService.deleteCA.bind(this.fwcVpnService),Ui=this.fwcVpnService.checkCARestrictions.bind(this.fwcVpnService),ji=this.translate.instant("TREE.VPN.CA_DELETE_CONF",{ca_name:r.text}),pi.ca=r.id_obj):(fi=this.fwcVpnService.deleteCertificate.bind(this.fwcVpnService),Ui=this.fwcVpnService.checkCertificateRestrictions.bind(this.fwcVpnService),ji=this.translate.instant("TREE.VPN.CERT_DELETE_CONF",{cert_name:r.text}),pi.crt=r.id_obj),Ui(pi).subscribe(ze=>{this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),rejectLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.NO"),rejectVisible:!0,message:ji,accept:()=>{this.utilService.fwcAPICall(fi,pi).then(Ge=>{let Fe=Object.assign({},r);Fe._fwcTreeAction=mi.DELETE_ITEM,this.treeDeleteItem(Fe),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("TREE.VPN.DELETE_OK")}),this.fwcUserService.setConfirmationToken(void 0)}).catch(Ge=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(Ge)})})},reject:()=>{}})},ze=>{if(ze.error&&ze.error.restrictions){let Ge=ze.error.restrictions,Fe,ot;Ge&&(Ge.caHasCertificates?(Fe=this.translate.instant("TREE.VPN.CA_DELETE_RESTR"),ot=this.translate.instant("TREE.VPN.CA_DELETE_RESTR_MSG",{ca_name:r.text})):Ge.crtUsedInOpenvpn?(Fe=this.translate.instant("TREE.VPN.CERT_DELETE_RESTR"),ot=this.translate.instant("TREE.VPN.CERT_DELETE_RESTR_MSG",{cert_name:r.text})):Ge.crtUsedInWireguard?(Fe=this.translate.instant("TREE.VPN.CERT_DELETE_RESTR"),ot=this.translate.instant("TREE.VPN.CERT_DELETE_RESTR_MSG",{cert_name:r.text})):Ge.caHasPrefixes&&(Fe=this.translate.instant("TREE.VPN.CA_DELETE_RESTR"),ot=this.translate.instant("TREE.VPN.CA_DELETE_PREFIXES_MSG",{ca_name:r.text}))),this.confirmationService.confirm({header:Fe,icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:ot})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(ze)})});break;case V.CA_CRT_NEW_PREFIX:case V.VPN_CONFIG_NEW_PREFIX:let Ti=Object.assign({},r);Ti._fwcObjType=Ti.obj_type=r._fwcObjType==O.OBJ_OPENVPN_CONFIG_SER?O.OBJ_OPENVPN_PREFIX:r._fwcObjType===O.OBJ_WGS_CONFIG_SER?O.OBJ_WIREGUARD_PREFIX:r._fwcObjType===O.OBJ_ISS_CONFIG_SER?O.OBJ_IPSEC_PREFIX:O.OBJ_PREFIX_FOLDER,Ti.newPrefixAction=!0,this.itemSelectedService.setItem(Ti);break;case V.CA_CRT_EDIT_PREFIX:case V.CA_CRT_DELETE_PREFIX:case V.VPN_CONFIG_EDIT_PREFIX:case V.VPN_CONFIG_DELETE_PREFIX:let Ut=Object.assign({},r);Ut.editPrefixAction=e.detail.item.id==V.CA_CRT_EDIT_PREFIX||e.detail.item.id==V.VPN_CONFIG_EDIT_PREFIX,Ut.deletePrefixFolderAction=e.detail.item.id==V.CA_CRT_DELETE_PREFIX,Ut.deleteAction=e.detail.item.id==V.VPN_CONFIG_DELETE_PREFIX,this.itemSelectedService.setItem(Ut);break;case V.VPN_CONFIG_FILE:case V.VPN_CONFIG_DELETE:case V.VPN_CONFIG_INSTALL:case V.VPN_CONFIG_SYNC_CCD:case V.VPN_CONFIG_SYNC_PENDING_CCD:case V.VPN_CONFIG_UNINSTALL:case V.VPN_CONFIG_BLOCK:case V.VPN_CONFIG_UNBLOCK:case V.VPN_CONFIG_SYSTEMCTL:let Ot=Object.assign({},r),_i=ze=>{let Ge=!0,Fe=[];for(Fe.push(...r.items);Fe.length;){let ot=Fe.pop();if(ot._fwcObjType==O.OBJ_OPENVPN_CONFIG_CLI||ot._fwcObjType==O.OBJ_WGC_CONFIG_CLI||ot._fwcObjType==O.OBJ_ISC_CONFIG_CLI){this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_NOT_POSSIBLE"),icon:"pi pi-exclamation-triangle fwcRed iconBig",message:ze,rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK")}),Ge=!1;break}else ot.items&&ot.items.length&&Fe.push(...ot.items)}return Ge};e.detail.item.id==V.VPN_CONFIG_UNINSTALL?_i(this.translate.instant("TREE.VPN.CONF_UNINSTALL.RESTR",{name:r._fwcObjName}))&&(Ot.uninstallAction=!0,this.itemSelectedService.setItem(Ot)):(Ot.deleteAction=e.detail.item.id==V.VPN_CONFIG_DELETE,Ot.configFileAction=e.detail.item.id==V.VPN_CONFIG_FILE,Ot.installAction=e.detail.item.id==V.VPN_CONFIG_INSTALL,Ot.syncCCDAction=e.detail.item.id==V.VPN_CONFIG_SYNC_CCD,Ot.syncPendingCCDAction=e.detail.item.id==V.VPN_CONFIG_SYNC_PENDING_CCD,Ot.blockVPNAction=e.detail.item.id==V.VPN_CONFIG_BLOCK,Ot.unblockVPNAction=e.detail.item.id==V.VPN_CONFIG_UNBLOCK,Ot.systemctlAction=e.detail.item.id==V.VPN_CONFIG_SYSTEMCTL,this.itemSelectedService.setItem(Ot)),Ot.node_type===M.OPENVPN_CONFIG_SER?Ot.blockVPNAction?r.openvpn_disabled=!0:Ot.unblockVPNAction&&(r.openvpn_disabled=!1):Ot.node_type===M.WIREGUARD_CONFIG_SER?Ot.blockVPNAction?r.wireguard_disabled=!0:Ot.unblockVPNAction&&(r.wireguard_disabled=!1):Ot.node_type===M.IPSEC_CONFIG_SER&&(Ot.blockVPNAction?r.ipsec_disabled=!0:Ot.unblockVPNAction&&(r.ipsec_disabled=!1));break;case V.VPN_CONFIG_INST_WINDOWS:{let ze=this.utilService.createDynamicComponentRef(pz),Ge=ze.instance;Ge.setDynamicComponentRef(ze);let Fe;if(r._fwcObjType===311)Fe={openvpn:r._fwcObjId};else if(r._fwcObjType===321)Fe={wireguard:r._fwcObjId};else if(r._fwcObjType===331)Fe={ipsec:r._fwcObjId};else throw new Error(`VPN type not supported for objId ${r._fwcObjId}`);let ot={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),fwcloudName:this.fwcUserService.getActualFwcUser().selectedFwCloudName,cluster:r._fwcClusterId,clusterName:r._fwcClusterName,firewall:r._fwcFwId,firewallName:r._fwcFwName,vpn:Fe,parentConfigName:r._fwcObjName};Ge.showDialog(ot);break}case V.VPN_CONFIG_STATUS:let Hn=Object.assign({},r);Hn.statusAction=!0,this.itemSelectedService.setItem(Hn);break;case V.VPN_CONFIG_HISTORIC:if(r._fwcObjType===O.OBJ_OPENVPN_CONFIG_SER){let ze={cloudId:this.fwcUserService.getActualFwSelectedCloud(),openVpnConfigId:r._fwcOpenVPNId||r._fwcObjId,openVpnConfigType:r._fwcObjType,openVpnConfigName:r._fwcObjName,firewallId:r._fwcFwId,clusterId:r._fwcClusterId},Ge=this.utilService.createDynamicComponentRef($S),Fe=Ge.instance;Fe.setDynamicComponentRef(Ge),Fe.updateAndShow(ze);break}else if(r._fwcObjType===O.OBJ_WGS_CONFIG_SER){let ze={cloudId:this.fwcUserService.getActualFwSelectedCloud(),wireGuardConfigId:r._fwcWireGuardId||r._fwcObjId,wireGuardConfigType:r._fwcObjType,wireGuardConfigName:r._fwcObjName,firewallId:r._fwcFwId,clusterId:r._fwcClusterId},Ge=this.utilService.createDynamicComponentRef($S),Fe=Ge.instance;Fe.setDynamicComponentRef(Ge),Fe.updateAndShow(ze);break}else if(r._fwcObjType===O.OBJ_ISS_CONFIG_SER){let ze={cloudId:this.fwcUserService.getActualFwSelectedCloud(),ipsecConfigId:r._fwcIPSecId||r._fwcObjId,ipsecConfigType:r._fwcObjType,ipsecConfigName:r._fwcObjName,firewallId:r._fwcFwId,clusterId:r._fwcClusterId},Ge=this.utilService.createDynamicComponentRef($S),Fe=Ge.instance;Fe.setDynamicComponentRef(Ge),Fe.updateAndShow(ze);break}case V.SYSTEMCTL:{let ze=this.utilService.createDynamicComponentRef(vg),Ge=ze.instance;Ge.setDynamicComponentRef(ze);let Fe=r.firewall_id;if(r.cluster_id){let ot=this.utilService.createDynamicComponentRef(eE),Vt=ot.instance;Vt.setDynamicComponentRef(ot),Vt.selectNodes(r)}else{let ot={fwcloud:r.fwcloud,firewall:Fe,service:this.serviceMap[r.node_type]===Qo.openvpn?this.serviceMap[r.node_type]+"@"+r._fwcObjName:this.serviceMap[r.node_type]===Qo.wireGuard?this.serviceMap[r.node_type]+"@"+(yield this.utilService.fwcAPICall(this.fwcVpnService.getWireGuardConfigInfo.bind(this.fwcVpnService),{fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:r._fwcObjId})).data.data[0].install_name.split(".")[0]:this.serviceMap[r.node_type]===Qo.IPSec?this.serviceMap[r.node_type]:this.serviceMap[r.node_type]};Ge.systemCtlSelectorDialog(ot)}break}case V.SYSTEM_SHOW_CONFIG:case V.SYSTEM_COMPILE:{let ze=r.firewall_id,Ge=this.fwcUserService.getActualFwSelectedCloud(),Fe,ot,Vt,zt,Ft;if(r.parent_type==O.OBJ_CLUSTER)this.fwcFirewallService.getClusterMasterNode(r.cluster_id,this.fwcUserService.getActualFwSelectedCloud()).subscribe(wi=>B(this,null,function*(){ze=wi.data.id,r.obj_type===ki[M.DHCP]?(Fe=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),ze,this.fwcUserService.getActualFwSelectedCloud())).data,Fe.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):(ot=yield this.fwcDhcpPolicyService.compileDhcpPolicyRules.bind(this.fwcFirewallService),Vt=this.translate.instant("DHCP.POLICY.COMPILE_DIALOG_TITLE"),zt=this.translate.instant("DHCP.POLICY.RULE"),Ft="dhcp",yield this.utilService.fwcAPICall(ot,ze,Ge).then(Wi=>{let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.showCompilationData(Wi.data,Fe,zt,Vt,void 0,Ft)}))):r.obj_type===ki[M.KEEPALIVED]?(ot=yield this.fwcKeepalivedPolicyService.compileKeepalivedPolicyRules.bind(this.fwcFirewallService),Vt=this.translate.instant("KEEPALIVED.POLICY.COMPILE_DIALOG_TITLE"),zt=this.translate.instant("KEEPALIVED.POLICY.RULE"),Ft="keepalived",Fe=(yield this.utilService.fwcAPICall(this.fwcKeepalivedPolicyService.getKeepalivedPolicy.bind(this.fwcKeepalivedPolicyService),ze,this.fwcUserService.getActualFwSelectedCloud())).data,Fe.length===0&&this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}),yield this.utilService.fwcAPICall(ot,ze,Ge).then(Wi=>{let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.showCompilationData(Wi.data,Fe,zt,Vt,void 0,Ft)})):r.obj_type===ki[M.HAPROXY]&&(ot=yield this.fwcHAProxyPolicyService.compileHAProxyPolicyRules.bind(this.fwcFirewallService),Vt=this.translate.instant("HAPROXY.POLICY.COMPILE_DIALOG_TITLE"),zt=this.translate.instant("HAPROXY.POLICY.RULE"),Ft="haproxy",Fe=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),ze,this.fwcUserService.getActualFwSelectedCloud())).data,Fe.length===0&&this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}),yield this.utilService.fwcAPICall(ot,ze,Ge).then(Wi=>{let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.showCompilationData(Wi.data,Fe,zt,Vt,void 0,Ft)}))}));else if(r.parent_type==O.OBJ_FIREWALL){if(r.obj_type===ki[M.DHCP])Fe=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),ze,Ge)).data,Fe.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):(ot=yield this.fwcDhcpPolicyService.compileDhcpPolicyRules.bind(this.fwcFirewallService),Vt=this.translate.instant("DHCP.POLICY.COMPILE_DIALOG_TITLE"),zt=this.translate.instant("DHCP.POLICY.RULE"),Ft="dhcp",yield this.utilService.fwcAPICall(ot,ze,this.fwcUserService.getActualFwSelectedCloud(),Fe.map(wi=>wi.id)).then(wi=>{let Wi=this.utilService.createDynamicComponentRef(Wa),vi=Wi.instance;vi.setDynamicComponentRef(Wi),vi.showCompilationData(wi.data,Fe,zt,Vt,void 0,Ft)}));else if(r.obj_type===ki[M.HAPROXY])Fe=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),ze,Ge)).data,Fe.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):(ot=yield this.fwcHAProxyPolicyService.compileHAProxyPolicyRules.bind(this.fwcFirewallService),Vt=this.translate.instant("HAPROXY.POLICY.COMPILE_DIALOG_TITLE"),zt=this.translate.instant("HAPROXY.POLICY.RULE"),Ft="haproxy",yield this.utilService.fwcAPICall(ot,ze,this.fwcUserService.getActualFwSelectedCloud(),Fe.map(wi=>wi.id)).then(wi=>{let Wi=this.utilService.createDynamicComponentRef(Wa),vi=Wi.instance;vi.setDynamicComponentRef(Wi),vi.showCompilationData(wi.data,Fe,zt,Vt,void 0,Ft)}));else if(r.obj_type===ki[M.KEEPALIVED]){this.confirmationService.confirm({header:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});return}}break}case V.SYSTEM_DOWNLOAD_CONFIG:{let ze=this.fwcUserService.getActualFwSelectedCloud(),Ge=r.firewall_id,Fe,ot,Vt;if(r.parent_type===O.OBJ_CLUSTER)this.fwcFirewallService.getClusterMasterNode(r.cluster_id,ze).subscribe(zt=>B(this,null,function*(){Ge=zt.data.id,r.obj_type===ki[M.DHCP]?(Fe=yield this.fwcDhcpPolicyService.compileDhcpPolicyRules.bind(this.fwcFirewallService),ot=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),Ge,ze)).data,Vt="dhcp",ot.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):yield this.utilService.fwcAPICall(Fe,Ge,ze).then(Ft=>{let wi="",Wi=Ft.data;if(Array.isArray(Wi))for(let zc of Wi)wi+=zc.cs,wi+=`
`;let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.onDownloadConfigFile(wi,Vt)})):r.obj_type===ki[M.KEEPALIVED]?(Fe=yield this.fwcKeepalivedPolicyService.compileKeepalivedPolicyRules.bind(this.fwcFirewallService),ot=(yield this.utilService.fwcAPICall(this.fwcKeepalivedPolicyService.getKeepalivedPolicy.bind(this.fwcKeepalivedPolicyService),Ge,ze)).data,Vt="keepalived",ot.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):yield this.utilService.fwcAPICall(Fe,Ge,ze).then(Ft=>{let wi="",Wi=Ft.data;if(Array.isArray(Wi))for(let zc of Wi)wi+=zc.cs,wi+=`
`;let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.onDownloadConfigFile(wi,Vt)})):r.obj_type===ki[M.HAPROXY]&&(Fe=yield this.fwcHAProxyPolicyService.compileHAProxyPolicyRules.bind(this.fwcFirewallService),ot=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),Ge,ze)).data,Vt="haproxy",ot.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT")}):yield this.utilService.fwcAPICall(Fe,Ge,ze).then(Ft=>{let wi="",Wi=Ft.data;if(Array.isArray(Wi))for(let zc of Wi)wi+=zc.cs,wi+=`
`;let vi=this.utilService.createDynamicComponentRef(Wa),wn=vi.instance;wn.setDynamicComponentRef(vi),wn.onDownloadConfigFile(wi,Vt)}))}));else if(r.parent_type===O.OBJ_FIREWALL){if(r.obj_type===ki[M.DHCP])Fe=yield this.fwcDhcpPolicyService.compileDhcpPolicyRules.bind(this.fwcFirewallService),ot=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),Ge,ze)).data,Vt="dhcp",ot.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):yield this.utilService.fwcAPICall(Fe,Ge,ze).then(zt=>{let Ft="",wi=zt.data;if(Array.isArray(wi))for(let wn of wi)Ft+=wn.cs,Ft+=`
`;let Wi=this.utilService.createDynamicComponentRef(Wa),vi=Wi.instance;vi.setDynamicComponentRef(Wi),vi.onDownloadConfigFile(Ft,Vt)});else if(r.obj_type===ki[M.HAPROXY])Fe=yield this.fwcHAProxyPolicyService.compileHAProxyPolicyRules.bind(this.fwcFirewallService),ot=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),Ge,ze)).data,Vt="haproxy",ot.length===0?this.confirmationService.confirm({header:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"}):yield this.utilService.fwcAPICall(Fe,Ge,ze).then(zt=>{let Ft="",wi=zt.data;if(Array.isArray(wi))for(let wn of wi)Ft+=wn.cs,Ft+=`
`;let Wi=this.utilService.createDynamicComponentRef(Wa),vi=Wi.instance;vi.setDynamicComponentRef(Wi),vi.onDownloadConfigFile(Ft,Vt)});else if(r.obj_type===ki[M.KEEPALIVED]){this.confirmationService.confirm({header:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});return}}break}case V.SYSTEM_INSTALL:{let ze=r.firewall_id,Ge=this.fwcUserService.getActualFwSelectedCloud(),Fe;if(r.parent_type===O.OBJ_CLUSTER){let ot,Vt=[];this.fwcFirewallService.getCluster(r.cluster_id,Ge).subscribe(zt=>B(this,null,function*(){let Ft=zt.data.nodes;ot=!0;for(let wi=0;wi<Ft.length;wi++){let Wi=Ft[wi];Wi.install_communication==="agent"&&Vt.push(Wi)}if(Vt.length===0){this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.COMMUNICATION_INSTALL_ERROR.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.COMMUNICATION_INSTALL_ERROR.CLUSTER_TEXT"),rejectVisible:!1,acceptLabel:"Ok"}),ot=!1;return}else if(ot){r.obj_type===(ki[M.DHCP]||ki[M.DHCP_FIXED_IP])?this.fwcFirewallService.getClusterMasterNode(r.cluster_id,Ge).subscribe(wn=>B(this,null,function*(){ze=wn.data.id,Fe=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),ze,Ge)).data,Fe.length===0&&this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"})})):r.obj_type===ki[M.KEEPALIVED]?this.fwcFirewallService.getClusterMasterNode(r.cluster_id,Ge).subscribe(wn=>B(this,null,function*(){ze=wn.data.id,Fe=yield this.utilService.fwcAPICall(this.fwcKeepalivedPolicyService.getKeepalivedPolicy.bind(this.fwcKeepalivedPolicyService),ze,Ge),Fe.length===0&&this.confirmationService.confirm({header:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"})})):r.obj_type===ki[M.HAPROXY]&&this.fwcFirewallService.getClusterMasterNode(r.cluster_id,Ge).subscribe(wn=>B(this,null,function*(){ze=wn.data.id,Fe=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),ze,Ge)).data,Fe.length===0&&this.confirmationService.confirm({header:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT")})}));let wi=Object.assign({},r),Wi=this.utilService.createDynamicComponentRef(bg),vi=Wi.instance;vi.setDynamicComponentRef(Wi),yield vi.onItemManage(wi)}}))}else this.fwcFirewallService.getFirewall(r.firewall_id,Ge).subscribe(ot=>B(this,null,function*(){if(ot.data.install_communication!=="agent"){this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.COMMUNICATION_INSTALL_ERROR.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.COMMUNICATION_INSTALL_ERROR.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});return}if(r.obj_type===(ki[M.DHCP]||ki[M.DHCP_FIXED_IP]))if(Fe=(yield this.utilService.fwcAPICall(this.fwcDhcpPolicyService.getDhcpPolicy.bind(this.fwcDhcpPolicyService),ze,Ge)).data,Fe.length===0)this.confirmationService.confirm({header:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.DHCP_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});else{let Vt=Object.assign({},r),zt=this.utilService.createDynamicComponentRef(bg),Ft=zt.instance;Ft.setDynamicComponentRef(zt),yield Ft.onItemManage(Vt)}else if(r.obj_type===ki[M.KEEPALIVED]){this.confirmationService.confirm({header:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.KEEPALIVED_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});return}else if(r.obj_type===ki[M.HAPROXY])if(Fe=(yield this.utilService.fwcAPICall(this.fwcHAProxyPolicyService.getHAProxyPolicy.bind(this.fwcHAProxyPolicyService),ze,Ge)).data,Fe.length===0)this.confirmationService.confirm({header:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.SUMMARY"),icon:"fa fa-exclamation-triangle fwcOrange iconBig",message:this.translate.instant("PANELS.HAPROXY_RULE_PANEL.ERRORS.NO_RULES_TO_COMPILE.TEXT"),rejectVisible:!1,acceptLabel:"Ok"});else{let Vt=Object.assign({},r),zt=this.utilService.createDynamicComponentRef(bg),Ft=zt.instance;Ft.setDynamicComponentRef(zt),yield Ft.onItemManage(Vt)}}));break}case V.NO_MENU:break;case V.MARK_NEW:let yi=Object.assign({},r);yi._fwcObjName="",yi.node_parent=r.id,this.itemSelectedService.setItem(yi);break;case V.ROUTING_TABLE_NEW:{this.fwcPolicyGridRoutingTableFunctionalityService.showNewRoutingTableDialog(r._fwcClusterId,r._fwcClusterName,r._fwcFwId,r._fwcFwName,this.fwcUserService.getActualFwSelectedCloud());break}case V.ROUTING_TABLE_EDIT:{this.fwcPolicyGridRoutingTableFunctionalityService.showNewRoutingTableDialog(r._fwcClusterId,r._fwcClusterName,r._fwcFwId,r._fwcFwName,this.fwcUserService.getActualFwSelectedCloud(),r._fwcObjId);break}case V.ROUTING_TABLE_DELETE:{this.deleteRoutingTable(r._fwcFwId,r.id_obj,r._fwcObjName);break}case V.ROUTING_TABLE_NEW_ROUTE:{this.fwcPolicyGridRoutingTableFunctionalityService.showNewRouteDialog(r._fwcClusterId,r._fwcFwId,r.id_obj,r._fwcObjName);break}}}})}onItemClickEvent(e){let t=this.treeview.nativeElement.selectedItem,r=yd;this.clearObjectInfo(void 0),r.findIndex(o=>t.node_type==o)!=-1&&this.actionLoadPolicy(t)}onItemDblClickEvent(e,t){return B(this,null,function*(){if(this.clearObjectInfo(void 0),!this.fwcUser.lockInfo.result||!this.treeview||!this.treeview.nativeElement.selectedItem)return;let r=Object.assign({},this.treeview.nativeElement.selectedItem);switch(r.node_type){case M.FOLDER_POLICY:case M.POLICY_INPUT:case M.POLICY_OUTPUT:case M.POLICY_FORWARD:case M.FOLDER_NAT:case M.POLICY_SNAT:case M.POLICY_DNAT:case M.POLICY_ROUTING:case M.FOLDER_VPN:case M.OPENVPN_ROOT:case M.WIREGUARD_ROOT:case M.IPSEC_ROOT:case M.FOLDER_SYSTEM:case M.DHCP:case M.DHCP_FIXED_IP:case M.KEEPALIVED:case M.HAPROXY:break;case M.FOLDER_POLICY6:case M.POLICY_INPUT6:case M.POLICY_OUTPUT6:case M.POLICY_FORWARD6:case M.POLICY_SNAT6:case M.POLICY_DNAT6:case M.POLICY_ROUTING6:break;case M.OPENVPN_CA:case M.OPENVPN_CERT:case M.WIREGUARD_CA:case M.WIREGUARD_CERT:case M.IPSEC_CA:case M.IPSEC_CERT:r.containerReadOnly=!1,this.itemSelectedService.setItem(r);case M.FOLDER_ROUTING:case M.ROUTING_TABLES:case M.FOLDER_INTERFACES:case M.FOLDER_CLUSTER_FW:break;case M.OPENVPN_PREFIX_FOLDER:case M.OPENVPN_PREFIX:case M.WIREGUARD_PREFIX_FOLDER:case M.WIREGUARD_PREFIX:case M.IPSEC_PREFIX_FOLDER:case M.IPSEC_PREFIX:r.editPrefixAction=!0,this.itemSelectedService.setItem(r);break;case M.ROUTING_TABLE:this.fwcPolicyGridRoutingTableFunctionalityService.showNewRoutingTableDialog(r._fwcClusterId,r._fwcClusterName,r._fwcFwId,r._fwcFwName,this.fwcUserService.getActualFwSelectedCloud(),r._fwcObjId);break;default:if(r._fwcObjId!==null){let o=this.treeview.nativeElement.getItemParent(r);if(!o)return;if(r.node_type==M.OBJ_FIREWALL&&r._fwcClusterId&&this.onContextMenuHandler(e,r.node_type),r.obj_type==O.OBJ_ADDRESS&&(o._fwcObjType==O.OBJ_INTERFACE_FIREWALL||o._fwcObjType==O.OBJ_INTERFACE_HOST)&&(r._fwcParentInterfaceType=o._fwcObjType,r._fwcParentObjName=o._fwcObjName),t){let s=this.treeview.nativeElement.getItemParent(r);if(s.node_type==M.STANDARD)if(s.pid)r.node_parent=s.pid;else return;else r.node_parent=r.pid;r.duplicateObjectAction=!0}this.itemSelectedService.setItem(r)}break}e&&e.stopPropagation()})}actionLoadPolicy(e){if(yd.findIndex(s=>e.node_type==s)==-1)return;let r={},o=e.id_obj;switch(e.node_type===M.ROUTING_TABLE&&(o=e._fwcFwId),r._fwcUserId=this.fwcUser.user_id,r._fwcFwId=o,r._fwcFwName=e._fwcFwName,r.fwcloud=e.fwcloud,r._fwcObjId=e._fwcObjId,this.isHAProxyPolicy=!1,this.fwcHAProxyPolicyService.setIsHAProxyPolicy(!1),this.isKeepalivedPolicy=!1,this.fwcKeepalivedPolicyService.setIsKeepalivedPolicy(!1),e.node_type){case M.POLICY_ROUTING:r._fwcPolicyType=Zr.POLICY_ROUTING;break;case M.ROUTING_TABLE:r._fwcPolicyType=Zr.ROUTING_TABLE,r._fwcPolicyName=e._fwcObjName;break;case M.DHCP:r._fwcPolicyType=ki[M.DHCP],r._fwcPolicyName=e._fwcObjName;break;case M.DHCP_FIXED_IP:r._fwcPolicyType=ki[M.DHCP_FIXED_IP],r._fwcPolicyName=e._fwcObjName;break;case M.KEEPALIVED:e.cluster_id?(r._fwcPolicyType=ki[M.KEEPALIVED],r._fwcPolicyName=e._fwcObjName,this.isKeepalivedPolicy=!0,this.fwcKeepalivedPolicyService.setIsKeepalivedPolicy(!0),this.fwcKeepalivedPolicyService.setKeepalivedClusterId(e.cluster_id),this.buildTree()):this.confirmationService.confirm({header:"Keepalived Policy Error",icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("KEEPALIVED.POLICY.ERROR_POLICY_FIREWALL"),rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}});break;case M.HAPROXY:r._fwcPolicyType=ki[M.HAPROXY],r._fwcPolicyName=e._fwcObjName,this.isHAProxyPolicy=!0,this.fwcHAProxyPolicyService.setIsHAProxyPolicy(!0),this.buildTree();break;default:r._fwcPolicyType=e.obj_type}e._fwcClusterId&&(r._fwcClusterId=e._fwcClusterId,r._fwcFwName=e._fwcClusterName),r._fwcFwId&&r._fwcPolicyType&&this.fwcPolicyService.setSelectedPolicy(r)}onItemDragStart(e,t){this.clearObjectInfo(void 0);let r;r=Object.assign({},e),r.obj_type==O.OBJ_CONTINENT&&(r.name=r.parent_name),r.obj_type==O.OBJ_COUNTRIE&&(r.name=r.parent_name),this.itemSelectedService.setDragItem(r),t.dataTransfer.setData("dragItemId",r.id),t.dataTransfer.dropEffect="copy",t.dataTransfer.effectAllowed="copyMove",this.clearObjectInfo(void 0)}checkDnDAllowance(e,t){return this.clearObjectInfo(void 0),!!(e&&t&&((e.node_type==M.FOLDER||e.node_type==M.FOLDER_FW)&&(t.node_type==M.FOLDER||t.node_type==M.OBJ_CLUSTER||t.node_type==M.OBJ_FIREWALL)||(e.node_type==M.OPENVPN_ROOT||e.node_type==M.WIREGUARD_ROOT||e.node_type==M.IPSEC_ROOT)&&t.obj_type==O.OBJ_CERT_SER||(e.node_type==M.OPENVPN_CONFIG_SER||e.node_type==M.WIREGUARD_CONFIG_SER||e.node_type==M.IPSEC_CONFIG_SER)&&t.obj_type==O.OBJ_CERT_CLI)&&e.id!=t.id&&e.id!=t.pid&&(t.items&&t.items.length&&!t.items.find(function(r){return r.id==e.id})||t.items&&!t.items.length))}onDragOver(e){if(e){let t=e.detail;if(t){let r=t.targetObj,o=t.dragObj;this.checkDnDAllowance(r,o)?this.highlightNodeId=r.id:this.highlightNodeId=void 0}}this.treeview.nativeElement.refresh()}onDragLeave(e){this.highlightNodeId=void 0}onDragDrop(e){let t=e.detail;if(t){let r=t.targetObj,o=t.dragObj;if(this.clearObjectInfo(void 0),this.checkDnDAllowance(r,o)){let s=this.fwcUserService.getActualFwSelectedCloud(),a={fwcloud:s,src:o.id,dst:r.id};if(o&&o.node_type==M.OPENVPN_CERT||o.node_type==M.WIREGUARD_CERT||o.node_type==M.IPSEC_CERT){let l,c=o,d=r,h,_,C;if(d.node_type==M.OPENVPN_ROOT?(l=d,C=O.OBJ_OPENVPN_CONFIG_SER):d.node_type==M.WIREGUARD_ROOT?(l=d,C=O.OBJ_WGS_CONFIG_SER):d.node_type==M.IPSEC_ROOT?(l=d,C=O.OBJ_ISS_CONFIG_SER):d.node_type==M.OPENVPN_CONFIG_SER?(l=d,C=O.OBJ_OPENVPN_CONFIG_CLI,h=l._fwcObjId,_=l._fwcObjName):d.node_type==M.WIREGUARD_CONFIG_SER?(l=d,C=O.OBJ_WGC_CONFIG_CLI,h=l._fwcObjId,_=l._fwcObjName):d.node_type==M.IPSEC_CONFIG_SER&&(l=d,C=O.OBJ_ISC_CONFIG_CLI,h=l._fwcObjId,_=l._fwcObjName),l){let I=[];Array.isArray(l.items)&&l.items.forEach(E=>{E.node_type===M.OPENVPN_CONFIG_CLI||E.node_type===M.WIREGUARD_CONFIG_CLI||E.node_type===M.IPSEC_CONFIG_CLI?I.push({id_obj:E.id_obj,obj_type:E.obj_type,name:E._fwcObjName}):(E.node_type===M.OPENVPN_PREFIX||E.node_type===M.WIREGUARD_PREFIX||E.node_type===M.IPSEC_PREFIX)&&Array.isArray(E.items)&&E.items.forEach(R=>{I.push({id_obj:R.id_obj,obj_type:R.obj_type,name:R._fwcObjName})})});let b={fwcloud:s,obj_type:C,crt:c.id_obj,node_id:l.id,vpn:h,parent_id:d.parent_id,parent_type:d.parent_type,parent_name:d.parent_name,_fwcObjId:void 0,_fwcCrtType:c.obj_type,_fwcCrtName:c._fwcObjName,_fwcParentConfigName:_,_fwcParentCA:c._fwcParentCA,_fwcChildClientNodes:I};if(d.node_type==M.OPENVPN_ROOT){let E=this.checkVpnOperationErrors(l,d,b,"openvpn");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else if(d.node_type==M.WIREGUARD_ROOT){let E=this.checkVpnOperationErrors(l,d,b,"wireguard");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else if(d.node_type==M.IPSEC_ROOT){let E=this.checkVpnOperationErrors(l,d,b,"ipsec");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else if(d.node_type==M.OPENVPN_CONFIG_SER){let E=this.checkVpnOperationErrors(l,d,b,"openvpn");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else if(d.node_type==M.WIREGUARD_CONFIG_SER){let E=this.checkVpnOperationErrors(l,d,b,"wireguard");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else if(d.node_type==M.IPSEC_CONFIG_SER){let E=this.checkVpnOperationErrors(l,d,b,"ipsec");E?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(E)}):this.itemSelectedService.setItem(b)}else this.itemSelectedService.setItem(b)}}else this.utilService.fwcAPICall(this.fwcObjectTreeService.dropInFolder.bind(this.fwcObjectTreeService),a).then(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("TREE.FOLDER.SUCCESS_DROP")}),this.treeLoad()}).catch(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)})})}}this.highlightNodeId=void 0,e.detail.cancel=!0}checkVpnOperationErrors(e,t,r,o){let s,a;if(!e||!r)return"BAD PARAMETERS";this.items&&Array.isArray(this.items)&&this.items.length&&(a=this.items[0][`${o}_info`]);let l=r.crt,c=r[o],d=r._fwcParentCA,h=t?._fwcFwId,_=t?._fwcClusterId;if((t.node_type===M.OPENVPN_ROOT&&r.obj_type===O.OBJ_OPENVPN_CONFIG_SER||t.node_type===M.WIREGUARD_ROOT&&r.obj_type===O.OBJ_WGS_CONFIG_SER||t.node_type===M.IPSEC_ROOT&&r.obj_type===O.OBJ_ISS_CONFIG_SER)&&(r.vpn=o),a)for(let C of a){if((r.obj_type===O.OBJ_OPENVPN_CONFIG_SER||r.obj_type===O.OBJ_WGS_CONFIG_SER||r.obj_type===O.OBJ_ISS_CONFIG_SER)&&C.crt===l&&(C[`${o}_parent`]===void 0||C[`${o}_parent`]===null))return this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.SERVER_SAME_CERT");if(o==="ipsec"&&r.obj_type===O.OBJ_ISS_CONFIG_SER&&!C.ipsec_parent){let I=this.findItemByIdType(this.items,C.ipsec,O.OBJ_ISS_CONFIG_SER);if(I&&(h&&I._fwcFwId===h||_&&I._fwcClusterId===_))return this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.IPSEC_SERVER_CONFIG_ALREADY_EXISTS")}if(r[o]!==void 0&&C[`${o}_parent`]===c&&C.crt===l)return this.translate.instant(`VPN.CONFIG.ERRORS.RESTRICTIONS.CERT_ALREADY_EXISTS_ON_${o.toUpperCase()}_CONFIG`);if((o==="ipsec"&&r.obj_type===O.OBJ_ISC_CONFIG_CLI||o==="openvpn"&&r.obj_type===O.OBJ_OPENVPN_CONFIG_CLI||o==="wireguard"&&r.obj_type===O.OBJ_WGC_CONFIG_CLI)&&C.crt===l&&C[`${o}_parent`]!==c)return this.translate.instant(`VPN.CONFIG.ERRORS.RESTRICTIONS.CERT_ALREADY_EXISTS_ON_${o.toUpperCase()}_CONFIG`);if(r[o]!==void 0&&C[o]===c&&C.ca!==d)return this.translate.instant("VPN.CONFIG.ERRORS.RESTRICTIONS.DIFFERENT_CA")}return s}deleteRoutingTable(e,t,r){let o={deleteAction:!0,_fwcObjId:t,_fwcObjName:r,_fwcObjType:O.OBJ_ROUTING_TABLE,_fwcFwId:e};this.itemSelectedService.setItem(o)}processInputDialogData(e){return B(this,null,function*(){let t;if(e)if(e.folder_name)e.name=e.folder_name,delete e.folder_name,this.utilService.fwcAPICall(this.fwcObjectTreeService.newFolder.bind(this.fwcObjectTreeService),e).then(r=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("TREE.FOLDER.SUCCESS")}),this.treeLoad()}).catch(r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)})});else if(e.folder_newname)e.new_name=e.folder_newname,delete e.folder_newname,this.utilService.fwcAPICall(this.fwcObjectTreeService.updateFolder.bind(this.fwcObjectTreeService),e).then(r=>{let o;this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("TREE.FOLDER.SUCCESS_RENAME")}),o={node_id:e.id,name:e.new_name,_fwcTreeAction:mi.MODIFY_ITEM},this.treeModifyItem(o)}).catch(r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)})});else{let r;if(e.firewall!==void 0&&e.firewall!==null)r=this.fwcFirewallService.cloneFirewall.bind(this.fwcFirewallService);else if(e.cluster!==void 0&&e.cluster!=null)r=this.fwcFirewallService.cloneCluster.bind(this.fwcFirewallService);else return;t=Object.assign({},e),delete t.type;let o={channelId:void 0,headerIcon:"fa fa-3x fa-vault fwcBlue",textHeader:this.translate.instant("FW.MSG_FW_CLONE.TITLE"),textMessage:this.translate.instant("FW.MSG_FW_CLONE.TEXT"),apiCall:r,apiParams:[t],onClose:s=>{if(s&&!s.error){let a=s.data.insertId,l={};l.container=qe.C_FIREWALLS,l.id=l.id_obj=l._fwcObjId=a,l._fwcObjType=e.type,l._fwcTreeAction=mi.NEW_ITEM,this.treeNewItem(l),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("TREE.FW_CLONE.SUCCESS")})}else s.error&&(s.data.fwcErr==8001||s.data.fwcErr==8002?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR."+s.data.fwcErr),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK"),accept:()=>{}}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s.data)}))}};this.appDialogPanelsService.searchAndShowDialog({uuid:ri.BLOCK_UI_PANEL,data:o})}})}handleClickNodeAction(e){switch(e.node_type){case M.ROUTING_TABLES:{this.fwcPolicyGridRoutingTableFunctionalityService.showNewRoutingTableDialog(e._fwcClusterId,e._fwcClusterName,e._fwcFwId,e._fwcFwName,this.fwcUserService.getActualFwSelectedCloud());break}}}showObjectInfo(e,t){if(!e)return;t&&t.preventDefault();let r=t.target||t.currentTarget;if(!r&&t.composedPath&&t.composedPath().length>0&&(r=t.composedPath()[0]),!r){console.error("No target element found for the event.");return}let o=e.node_type;if(!this.infoTooltipTimer&&!this.infoTooltipShown&&e._fwcObjId!==null&&e._fwcObjType!==null&&PWe.findIndex(s=>o===s)===-1){let s={objId:e._fwcObjId,objType:e._fwcObjType,fwId:e._fwcFwId,clusterId:e._fwcClusterId,objParentId:e.parent_id};this.infoTooltipTimer=setTimeout(()=>{this.infoTooltipShown=!0,this.itemSelectedService.setObjectInfo(s,{event:t,targetElement:r})},1e3)}}clearObjectInfo(e){e&&e.preventDefault(),this.infoTooltipTimer&&(clearTimeout(this.infoTooltipTimer),this.infoTooltipTimer=void 0),this.infoTooltipShown&&(setTimeout(()=>this.itemSelectedService.setObjectInfo(void 0,e),500),this.infoTooltipShown=!1)}static{this.\u0275fac=function(t){return new(t||i)(S(Ts),S(En),S(ht),S(Un),S(Os),S(at),S(Dt),S(Vi),S(Io),S(Am),S(Eu),S(Ru),S(Ou),S(Ei),S(xu),S(Jt),S(Kt),S(Cr),S(ft),S(er),S(yv),S(St),S(Su),S(we),S(Ye),S(nt),S(Q9,8),S(I1),S(Np))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-tree"]],viewQuery:function(t,r){if(t&1&&(le(OWe,7),le(RWe,5)),t&2){let o;te(o=ie())&&(r.treeview=o.first),te(o=ie())&&(r.hintFirstTreeElement=o.first)}},inputs:{treeOptions:"treeOptions",treeStyle:"treeStyle",searchString:"searchString",treeSearchOptions:"treeSearchOptions"},features:[et([En,Vi,Dt,Io,xu,Su,Sn])],decls:2,vars:14,consts:[["treeview",""],[3,"afterExpand","afterCollapse","dragOver","dragLeave","dragDrop","items","itemTemplate","allowDrag","allowDrop","allowFocus","virtualMode","itemDisplay","autoExpand","resourcePath","customStyle","allowAnimation","allowFilter","colorScheme","dragDropMode"]],template:function(t,r){if(t&1){let o=L();m(0,"iui-treeview",1,0),k("afterExpand",function(a){return y(o),w(r.setExpandedNodes(a,!0))})("afterCollapse",function(a){return y(o),w(r.setExpandedNodes(a,!1))})("dragOver",function(a){return y(o),w(r.onDragOver(a))})("dragLeave",function(a){return y(o),w(r.onDragLeave(a))})("dragDrop",function(a){return y(o),w(r.onDragDrop(a))}),g()}t&2&&f("items",r.items)("itemTemplate",r.currentItemTemplate)("allowDrag",!0)("allowDrop",!0)("allowFocus",!0)("virtualMode",!0)("itemDisplay",0)("autoExpand",!(r.options!=null&&r.options.containerReadOnly))("resourcePath",r.currentResourcePath)("customStyle",r.treeIntegralUIStyle)("allowAnimation",!1)("allowFilter",!0)("colorScheme",r.currentColorScheme)("dragDropMode",r.currentDragDrop)},styles:[`:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}fwcTree-item{display:inline-block;margin-left:0;transition:all .3s}fwcTree-item *{pointer-events:none}fwcTree-item.fwcHighlightNode{margin-left:.2em;background-color:var(--fwcPaleGreen)!important;padding-right:8em}fwcTree-item.fwcSelectedPolicyNode span.fwc-label{font-weight:700!important}fwcTree-item--disabled .fwcTreeIcon:after{content:"\\\\";font-weight:700;color:var(--fwcRed);position:absolute;left:.9em;top:-.4em;font-size:1.7em;font-style:normal}fwcTree-item--disabled .fwc-label{color:var(--fwcPaleDark)!important}
`],encapsulation:2})}}return i})();var DWe=["fwcGroup"];function FWe(i,n){if(i&1){let e=L();m(0,"div",4),k("contextmenu",function(){let r=y(e).$implicit,o=u();return w(o.selectedItem=r)})("mouseenter",function(r){let o=y(e).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u();return w(o.clearObjectInfo(r))})("dblclick",function(){let r=y(e).$implicit,o=u();return w(o.onItemDblClick(r))}),m(1,"div"),P(2,"i",5),D(3,"fwcIcon"),m(4,"span",6),F(5),g()()()}if(i&2){let e=n.$implicit;Dn("item-rightclicked",e.rightclicked==!0),G("data-obj_id",e.id),p(2),va("fwcIcon ",N(3,7,e._fwcObjType),""),p(3),J(" ",e._fwcObjName,"")}}var Wh=(()=>{class i{set ipobjs(e){this._ipobjs=e}constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E){this.refService=e,this.store=t,this.renderer=r,this.fwcObjectService=o,this.itemSelectedService=s,this.fwcInterfaceService=a,this.fwcContextMenuService=l,this.fwcKeepalivedPolicyService=c,this.fwcHAProxyPolicyService=d,this.fwcErrorPipe=h,this.fwcUserService=_,this.confirmationService=C,this.utilService=I,this.messageService=b,this.translate=E,this._ipobjs=[],this.groupChanged=new X,this.onVirtualIpChange=new X,this.onHAProxyIpChange=new X,this.applicationRef=null,this.contextMenuReference=null,this.contextMenuStyle=[hs,ms,fs],this.groupAllowedTypes=[],this.infoTooltipShown=!1,this.alive=!0,this.customFormMode=!1,this.isDisabled=!1,this.isKeepalived=!1,this.keepalivedClusterId=0,this.isHAProxy=!1,this.onChange=R=>{},this.onTouch=()=>{}}writeValue(e){this.customFormMode=!0,this.formValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){this.isDisabled=e}ngOnInit(){this.contextMenu=this.fwcContextMenuService.getGroupObjectMenus(),this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.fwcObjectService.getObjectGroupAllowedTypes().subscribe(e=>{this.groupAllowedTypes=e}),this.fwcUserService.getFwcUser().pipe(yt(()=>this.alive)).subscribe(e=>{this.fwcUser=e}),this.fwcKeepalivedPolicyService.isKeepalivedPolicy$.subscribe(e=>{this.isKeepalived=e}),this.fwcHAProxyPolicyService.isHAProxyPolicy$.subscribe(e=>{this.isHAProxy=e})}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){let e=this;setTimeout(()=>{let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t},1)}listDragOver(e){e.preventDefault()}listDragEnter(e){let t;if(this.renderer.addClass(this.fwcGroup.nativeElement,"draggedOver"),e.target==this.fwcGroup.nativeElement&&(t=this.itemSelectedService.getDragItem(),t)){let r=+t._fwcObjType;!t.container||this.groupAllowedTypes[this.groupType].indexOf(r)==-1||this._ipobjs&&this._ipobjs.length&&this._ipobjs.some(function(o){return t._fwcObjId==o._fwcObjId&&t._fwcObjType==o._fwcObjType})||this.readOnly?this.renderer.addClass(this.fwcGroup.nativeElement,"fwcObjectForbidden"):this.renderer.addClass(this.fwcGroup.nativeElement,"fwcObjectAllowed")}}listDragDrop(e){return B(this,null,function*(){let t,r;e.preventDefault(),this.renderer.removeClass(this.fwcGroup.nativeElement,"draggedOver"),this.renderer.removeClass(this.fwcGroup.nativeElement,"fwcObjectForbidden"),this.renderer.removeClass(this.fwcGroup.nativeElement,"fwcObjectAllowed"),r=this.itemSelectedService.getDragItem(),this.itemSelectedService.clearDragItem(),r&&(!r.container||this.readOnly||(t=yield this.checkOperation(r),t?setTimeout(()=>{this.confirmationService.confirm({header:"Error",icon:"fa fa-exclamation-circle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:t})},500):(r._fwcObjTreeParentId=r.pid,this.addObject(r))))})}listDragLeave(e){e.target==this.fwcGroup.nativeElement&&(this.renderer.removeClass(this.fwcGroup.nativeElement,"draggedOver"),this.renderer.removeClass(this.fwcGroup.nativeElement,"fwcObjectForbidden"),this.renderer.removeClass(this.fwcGroup.nativeElement,"fwcObjectAllowed"))}checkOperation(e){return B(this,null,function*(){let t,r=+e._fwcObjType;if(this.groupAllowedTypes[this.groupType].indexOf(r)==-1)t=this.msgNotAllowed?this.msgNotAllowed:this.translate.instant("GROUP.ERROR_NOTALLOWED");else if(this._ipobjs&&this._ipobjs.length&&this._ipobjs.some(o=>e._fwcObjId==o._fwcObjId&&e._fwcObjType==o._fwcObjType))t=this.msgAlreadyExisting?this.msgAlreadyExisting:this.translate.instant("GROUP.ERR_EXISTS",{name:e._fwcObjName});else if((e._fwcObjType===O.OBJ_GROUP||e._fwcObjType===O.OBJ_SERVICE_GROUP)&&(!e.items||!e.items.length))t=this.translate.instant("GROUP.ERROR_EMPTY_GROUP",{name:e._fwcObjName});else if(e._fwcObjType===O.OBJ_INTERFACE_FIREWALL||e._fwcObjType===O.OBJ_INTERFACE_HOST){let o,s;r==O.OBJ_INTERFACE_HOST?(s=this.fwcInterfaceService.getInterfaceHost.bind(this.fwcInterfaceService),o=e.host_id):(s=this.fwcInterfaceService.getInterface.bind(this.fwcInterfaceService),e.cluster_id?o=e._fwcFwId:o=e.firewall_id||e._fwcFwId);let l=(yield s(o,e.id_obj,e.fwcloud).toPromise()).data;(l.mac==null||l.mac==null)&&(t=this.translate.instant("DHCP.POLICY.ERROR_EMPTY_MAC"))}else if(e._fwcObjType===O.OBJ_HOST){let o=!1;if(Array.isArray(e.items)&&e.items.length){for(let s of e.items)if(Array.isArray(s.items)&&s.items.length){o=!!s.items.find(a=>a._fwcObjType===O.OBJ_ADDRESS);break}}o||(t=this.translate.instant("GROUP.ERROR_EMPTY_HOST",{name:e._fwcObjName}))}return t})}addObject(e){if(e){let t=Object.assign({},e);if(this.isHAProxy&&(this.customFormMode=!0),this.isKeepalived&&(this.customFormMode=!0),this.customFormMode){this.formValue=t._fwcObjId;try{if(this.isKeepalived&&(t._fwcObjType===O.OBJ_FIREWALL||t._fwcObjType===O.OBJ_ADDRESS||t._fwcObjType===O.OBJ_INTERFACE_FIREWALL)){let r=this.fwcKeepalivedPolicyService.getKeepalivedClusterId();if(this.keepalivedClusterId=r,t.cluster_id!==r)throw new Error("Invalid cluster")}if(t._fwcObjType===O.OBJ_ADDRESS&&this.isKeepalived)Array.isArray(this.formValue)||(this.formValueArray=[]),this.formValueArray.push(t._fwcObjId),this._ipobjs.push(t),this.onVirtualIpChange.emit({id:t._fwcObjId,type:t._fwcObjType});else try{this.groupType===O.OBJ_HAPROXY_RULE_FRONTEND_IP&&this.isHAProxy?(this._ipobjs=[t],this.onHAProxyIpChange.emit({id:t._fwcObjId,type:t._fwcObjType})):t._fwcObjType===O.OBJ_ADDRESS&&this.isHAProxy?(Array.isArray(this.formValue)||(this.formValueArray=[]),this.formValueArray.push(t._fwcObjId),this._ipobjs.push(t),this.onHAProxyIpChange.emit({id:t._fwcObjId,type:t._fwcObjType})):(this._ipobjs=[t],this.onChange({id:t._fwcObjId,type:t._fwcObjType}))}catch(r){r.message==="Invalid cluster"?setTimeout(()=>{this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("KEEPALIVED.POLICY.ERROR_CLUSTER_NODES"),rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})},500):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)});return}}catch(r){r.message==="Invalid cluster"?setTimeout(()=>{this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("KEEPALIVED.POLICY.ERROR_CLUSTER_NODES"),rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})},500):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)});return}}else{t.selected=!1,t.fwcloud=this.fwcUserService.getActualFwSelectedCloud();let r;r={fwcloud:this.fwcUser.selectedFwCloud,node_parent:this.groupTreeId,node_order:1,node_type:t.node_type,ipobj_g:this.groupId,ipobj:t._fwcObjId},this.utilService.fwcAPICall(this.fwcObjectService.newObjectGroupObject.bind(this.fwcObjectService),r).then(o=>{t._fwcTreeAction=mi.NEW_GROUP_ITEM,this.groupType==O.OBJ_SERVICE_GROUP?t.container=qe.C_SERVICES:this.groupType==O.OBJ_GROUP&&(t.container=qe.C_OBJECTS),o.data&&o.data.length&&(t.fw_status=o.data),t._fwcObjTreeParentId=this.groupTreeId,t.text=t._fwcObjName,this.itemSelectedService.setModifiedItem(t),(!this._ipobjs||!Array.isArray(this._ipobjs))&&(this._ipobjs=[]),this._ipobjs.push(t),this.groupChanged.emit(!0),setTimeout(()=>{this.fwcGroup.nativeElement.scrollTop=this.fwcGroup.nativeElement.scrollHeight-this.fwcGroup.nativeElement.clientHeight},1),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("GROUP.OBJ_ADDED")})}).catch(o=>{o.error&&o.error.fwcErr==5001?setTimeout(()=>{this.confirmationService.confirm({header:this.translate.instant("POSITION.ERROR_HEADER"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("GROUP.ERROR_EMPTY_CONTAINER",{name:t._fwcObjName}),rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})},500):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)})})}}}onItemRightClick(e){this.selectedItem=e,this.clearObjectInfo()}onItemDblClick(e){let t=Object.assign({},e);this.store.dispatch(eo.selectTreeItem({item:t}))}onContextMenuLoad(e){let t=!1,r=!1,o=this.contextMenu.OBJECT;this.customFormMode&&(o=this.contextMenu.OBJECT_CUSTOMFORM),e.detail.event&&e.detail.event.target&&!e.detail.event.target.getAttribute("data-obj_id")&&(t=!0,this.selectedItem=void 0),this.selectedItem&&(this.selectedItem.rightclicked=!0),(this.selectedItem&&this.selectedItem._fwcObjType==O.OBJ_ANY||!this._ipobjs.length||t)&&(r=!0),o&&o.items&&o.items.forEach(s=>{s.userObject&&this.readOnly?s.visible=!1:s.visible=!r&&s.id!=V.NO_MENU||r&&s.id==V.NO_MENU})}onContextMenuClose(e){this.selectedItem&&(this.selectedItem.rightclicked=!1)}onContextMenuHandler(e){let t=this.selectedItem;if(t&&e.detail.item)switch(e.detail.item.id){case V.FIND_IN_TREE:this.onItemDblClick(t);break;case V.WHERE_USED:let r=Object.assign({},t);r.whereUsedAction=!0,this.itemSelectedService.setItem(r);break;case V.DELETE_FROM_GROUP:this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),message:this.translate.instant("GROUP.DEL_OBJ",{name:t._fwcObjName}),icon:"fa fa-question-circle fwcBlue iconBig",rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{let o={fwcloud:this.fwcUser.selectedFwCloud,ipobj_g:this.groupId,ipobj:t._fwcObjId,obj_type:t._fwcObjType};this.utilService.fwcAPICall(this.fwcObjectService.deleteObjectGroupObject.bind(this.fwcObjectService),o).then(s=>{let a=Object.assign({},t);this.removeItem(t),this.groupChanged.emit(!0),this.groupType==O.OBJ_SERVICE_GROUP?a.container=qe.C_SERVICES:this.groupType==O.OBJ_GROUP&&(a.container=qe.C_OBJECTS),a._fwcObjTreeParentId=this.groupTreeId,a._fwcTreeAction=mi.DELETE_GROUP_ITEM,s.data&&s.data.length&&(a.fw_status=s.data),this.itemSelectedService.setModifiedItem(a),this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]})),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("GROUP.OBJ_DELETED")})}).catch(s=>{s.error&&s.error.fwcErr==5001?setTimeout(()=>{this.confirmationService.confirm({header:this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("TREE.MSG_DELETE_OBJ_GROUP_EMPTY",{name:t._fwcObjName}),rejectVisible:!1,closeOnEscape:!1,acceptLabel:"Ok",accept:()=>{}})},500):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("GROUP.ERR_DELETING")})})}});break;case V.DELETE:{this._ipobjs=[],this.formValue=void 0,this.onChange(void 0);break}}}removeItem(e){let t=-1;if(!this._ipobjs)return-1;for(let r=0;r<this._ipobjs.length;r++)if(this._ipobjs[r]._fwcObjId!=O.OBJ_ANY&&this._ipobjs[r]._fwcObjId==e._fwcObjId){t=r;break}return t>=0&&this._ipobjs.splice(t,1),t}showObjectInfo(e,t){if(t&&t.preventDefault(),e&&!this.infoTooltipTimer&&!this.infoTooltipShown){let r={objId:e._fwcObjId,objType:e._fwcObjType,objParentId:e.parent_id,fwId:e._fwcFwId,clusterId:e.cluster_id};e.highlighted&&delete e.highlighted,r.objId!==null&&r.objType!==null&&r.objType!=O.OBJ_ANY&&(this.infoTooltipTimer=setTimeout(()=>{this.infoTooltipShown=!0,this.itemSelectedService.setObjectInfo(r,t)},1e3))}}clearObjectInfo(e){e&&e.preventDefault(),this.infoTooltipTimer&&(clearTimeout(this.infoTooltipTimer),this.infoTooltipTimer=void 0),this.itemSelectedService.setObjectInfo(void 0,e),this.infoTooltipShown=!1}static{this.\u0275fac=function(t){return new(t||i)(S(Ts),S(nt),S(jt),S(Vi),S(ht),S(Io),S(Am),S(Ou),S(Ru),S(Ei),S(at),S(Jt),S(ft),S(Kt),S(Ye))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-object-group"]],viewQuery:function(t,r){if(t&1&&le(DWe,5),t&2){let o;te(o=ie())&&(r.fwcGroup=o.first)}},inputs:{groupId:"groupId",groupType:"groupType",groupTreeId:"groupTreeId",readOnly:"readOnly",ipobjs:"ipobjs",msgNotAllowed:"msgNotAllowed",msgAlreadyExisting:"msgAlreadyExisting"},outputs:{groupChanged:"groupChanged",onVirtualIpChange:"onVirtualIpChange",onHAProxyIpChange:"onHAProxyIpChange"},features:[et([Vi,Io,{provide:fn,useExisting:Zt(()=>i),multi:!0}])],decls:5,vars:5,consts:[["fwcGroup",""],[3,"menuClick","menuOpening","menuClosed","settings","allowAnimation","customStyle","colorScheme","contextMenuRef"],[1,"divFwcPosition","divFwcGroup",3,"dragover","dragenter","dragleave","drop","mouseenter"],[1,"divFwcPosition-item","item-general-default","noselect",3,"item-rightclicked"],[1,"divFwcPosition-item","item-general-default","noselect",3,"contextmenu","mouseenter","mouseleave","dblclick"],["aria-hidden","true"],[1,"fwc-label"]],template:function(t,r){if(t&1){let o=L();m(0,"iui-contextmenu",1),k("menuClick",function(a){return y(o),w(r.onContextMenuHandler(a))})("menuOpening",function(a){return y(o),w(r.onContextMenuLoad(a))})("menuClosed",function(a){return y(o),w(r.onContextMenuClose(a))}),m(1,"div",2,0),k("dragover",function(a){return y(o),w(r.listDragOver(a))})("dragenter",function(a){return y(o),w(r.listDragEnter(a))})("dragleave",function(a){return y(o),w(r.listDragLeave(a))})("drop",function(a){return y(o),w(r.listDragDrop(a))})("mouseenter",function(a){return y(o),w(r.clearObjectInfo(a))}),xr(3,FWe,6,9,"div",3,Ar),g()()}t&2&&(f("settings",r.customFormMode?r.contextMenu.OBJECT_CUSTOMFORM:r.contextMenu.OBJECT)("allowAnimation",!1)("customStyle",r.contextMenuStyle)("colorScheme",r.currentColorScheme)("contextMenuRef",r.contextMenuReference),p(3),Tr(r._ipobjs))},encapsulation:2})}}return i})();var kWe=["treePanel"],NWe=()=>({"max-height":"20em",overflow:"auto"}),LWe=i=>({"font-weight":i});function MWe(i,n){if(i&1){let e=L();m(0,"div",1)(1,"span",11)(2,"input",12),Oe("ngModelChange",function(r){y(e);let o=u();return Re(o.selectedObjectName,r)||(o.selectedObjectName=r),w(r)}),g(),m(3,"label",13),F(4),D(5,"translate"),g()(),m(6,"button",14),k("click",function(r){y(e),u();let o=He(2);return w(o.toggle(r))}),g()()}if(i&2){let e=u();p(2),Te("ngModel",e.selectedObjectName),p(2),$(N(5,2,"ITEM_PANEL.FIELDS.NAME"))}}function VWe(i,n){if(i&1){let e=L();m(0,"span",15),k("dblclick",function(){let r=y(e).$implicit,o=u();return w(o.onSelectObjectNode(r))}),P(1,"i",16),D(2,"fwcIcon"),m(3,"span",17),F(4),g()()}if(i&2){let e=n.$implicit;p(),va("fwcTreeIcon ",ei(2,5,e.data==null?null:e.data.obj_type,e.data==null?null:e.data.node_type),""),p(2),f("ngStyle",ne(8,LWe,e.selectable||e.data!=null&&e.data.alreadySelected?"normal":"bold")),p(),J(" ",e.label," ")}}var Zo=(()=>{class i{set disabledObjects(e){this._disabledObjects=e,this.manageOptions(e)}set fwcloudId(e){this._fwcloudId=e}constructor(e,t,r,o,s,a,l){this.appOptionsService=e,this.fwcObjectTreeService=t,this.fwcErrorPipe=r,this.messageService=o,this.translate=s,this.fwcUserService=a,this.cd=l,this.objectSelected=new X}ngOnInit(){}ngOnChanges(e){e.fwcloudId&&this.reloadData(this._fwcloudId)}reloadData(e){let t=this.fwcUserService.getActualFwcUser();this.nodeTranslations=this.translate.instant("NODE_TYPES");let r=Object.assign({},this.appOptionsService.optionsTreeFw),o=Object.assign({},this.appOptionsService.optionsTreeObj);r.user_id=o.user_id=t.user_id,r.fwcloud=o.fwcloud=e!==null?e:t.selectedFwCloud,r.objStandard=o.objStandard=0,r.objCloud=o.objCloud=1,Promise.all([this.getTree(r,this.fwTreeNodes),this.getTree(o,this.objectTreeNodes)]).then(([s,a])=>{this.treeData=s.concat(a),this.manageOptions(this._disabledObjects)}).catch(s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)})})}getTree(e,t){let r;return r=new Promise((o,s)=>{let a=[];Array.isArray(t)&&t.length?this.fwcObjectTreeService.getTree(e,e.fwcloud).subscribe(l=>{let c;if(l.data.length?c=l.data[0]:c=l.data,Array.isArray(c.items)&&c.items.length)for(let d=0;d<c.items.length;d++){let h=c.items[d];t.findIndex(_=>h.node_type==_)==-1&&(c.items.splice(d,1),d=d-1)}a=this.convertTree([c],t),o(a)},l=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)}),s(l)}):o([])}),this.cd.detectChanges(),r}convertTree(e,t,r){let o=[];return Array.isArray(t)||(t=[]),Array.isArray(this.selectableObjects)||(this.selectableObjects=[]),e.forEach(s=>{this.nodeTranslations[s.node_type]&&!s.id_obj&&(s.text=this.nodeTranslations[s.node_type]);let a=t.findIndex(c=>s.node_type==c)!=-1,l=this.selectableObjects.findIndex(c=>s.obj_type==c)!=-1&&s.id_obj!==null;if(s.node_type!=M.STANDARD&&a||!r){let c={label:s.text,data:{name:s.text,id_obj:s.id_obj,obj_type:s.obj_type,node_type:s.node_type,parent_id:r?r.id_obj:void 0},selectable:l,expanded:!r,children:[]};s.items&&s.items.length&&(c.children=this.convertTree(s.items,t,s)),o.push(c)}}),o}showTree(e,t,r){this.treeMetadata=t,r&&(this.selectedObjectNode=null,this.selectedObjectName=""),this.treePanel.toggle(e)}setOptionSelectable(e,t){let r=this.treeData.slice(0);if(e!=null){for(;r.length;){let o=r.shift();o.data&&o.data.id_obj==e&&(o.data.alreadySelected=!t,o.selectable=t),o.children&&o.children.length&&r.push(...o.children)}this.selectedObjectNode=null,this.selectedObjectName=""}}manageOptions(e){if(!this.treeData)return;let t=this.treeData.slice(0);for(Array.isArray(e)||(e=[]);t.length;){let r=t.shift(),o=e.findIndex(s=>s.ipobj==r.data.id_obj);o!=-1&&(r.data.alreadySelected=!0,e.splice(o,1)),r.children&&r.children.length&&t.push(...r.children)}this.selectedObjectNode=null,this.selectedObjectName=""}onSelectObjectNode(e){if(!e||!e.selectable)return;let t=oe({},e.data);this.selectedObjectName=e.label,this.treePanel&&this.treePanel.hide(),this.treeMetadata&&(t._metadata=this.treeMetadata),this.objectSelected.emit(t)}static{this.\u0275fac=function(t){return new(t||i)(S(wt),S(En),S(Ei),S(Kt),S(Ye),S(at),S(we))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-tree-selector"]],viewQuery:function(t,r){if(t&1&&le(kWe,5),t&2){let o;te(o=ie())&&(r.treePanel=o.first)}},inputs:{fwTreeNodes:"fwTreeNodes",objectTreeNodes:"objectTreeNodes",selectableObjects:"selectableObjects",hideObjectName:"hideObjectName",disabledObjects:"disabledObjects",fwcloudId:"fwcloudId"},outputs:{objectSelected:"objectSelected"},features:[et([En]),Yi],decls:11,vars:8,consts:[["treePanel",""],[1,"p-inputgroup"],["appendTo","body",3,"dismissable"],["selectionMode","single","styleClass","treeSelector",3,"selectionChange","value","selection"],["pTemplate","default"],[1,"grid"],[1,"col-12"],[1,"fwc-right-float"],["pButton","","type","button","icon","fa fa-times",1,"p-button-warning",3,"click"],[1,"fwcSepShort"],["pButton","","type","button","icon","fa fa-check",1,"p-button-success",3,"click","disabled"],[1,"p-float-label"],["type","text","pInputText","","maxlength","64","name","_object_name","disabled","true",3,"ngModelChange","ngModel"],["for","_object_name"],["pButton","","type","button","icon","fa fa-search",1,"p-button-secondary",2,"width","2rem","height","2.5rem","max-height","100%",3,"click"],[1,"noselect",3,"dblclick"],["aria-hidden","true"],[3,"ngStyle"]],template:function(t,r){if(t&1){let o=L();v(0,MWe,7,4,"div",1),m(1,"p-overlayPanel",2,0)(3,"p-tree",3),Oe("selectionChange",function(a){return y(o),Re(r.selectedObjectNode,a)||(r.selectedObjectNode=a),w(a)}),v(4,VWe,5,10,"ng-template",4),g(),m(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),k("click",function(){y(o);let a=He(2);return w(a.hide())}),g(),P(9,"span",9),m(10,"button",10),k("click",function(){return y(o),w(r.onSelectObjectNode(r.selectedObjectNode))}),g()()()()()}t&2&&(W(r.hideObjectName?-1:0),p(),f("dismissable",!1),p(2),st(Ae(7,NWe)),f("value",r.treeData),Te("selection",r.selectedObjectNode),p(7),f("disabled",!r.selectedObjectNode))},dependencies:[De,Li,Pi,Jn,mn,Ee,pt,rh,gl,Xi,gt,Sn],encapsulation:2})}}return i})();var cK=No(_c());var BWe=["optionsTable"],UWe=["routesTreeSelector"],jWe=()=>({width:"40rem",height:"28rem"}),GWe=(i,n,e,t,r,o)=>[i,n,e,t,r,o],HWe=(i,n,e,t)=>[i,n,e,t],WWe=(i,n)=>[i,n];function zWe(i,n){i&1&&(m(0,"tr"),P(1,"th",8),m(2,"th",9),F(3),D(4,"translate"),P(5,"p-sortIcon",10),g(),m(6,"th"),F(7),D(8,"translate"),g(),m(9,"th"),F(10),D(11,"translate"),g()()),i&2&&(p(3),J(" ",N(4,3,"VPN.CONFIG.GRID_HEADER.0")," "),p(4),$(N(8,5,"VPN.CONFIG.GRID_HEADER.1")),p(3),$(N(11,7,"VPN.CONFIG.GRID_HEADER.2")))}function KWe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function $We(i,n){if(i&1&&(m(0,"div")(1,"div"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e.label)}}function JWe(i,n){if(i&1){let e=L();m(0,"p-dropdown",19),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(2).$implicit;return Re(o.name,r)||(o.name=r),w(r)}),k("onChange",function(r){y(e);let o=u(3);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,KWe,2,1,"ng-template",20)(3,$We,3,1,"ng-template",21),g()}if(i&2){let e=u(2).$implicit,t=u();f("options",t.availableKeywords),Te("ngModel",e.name),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,4,"VPN.CONFIG.NO_OPS"))}}function qWe(i,n){if(i&1&&F(0),i&2){let e=u(2).$implicit;J(" ",e.name," ")}}function YWe(i,n){i&1&&(m(0,"div",24)(1,"h6",25),P(2,"i",26),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"VPN.CONFIG.DATA_CIPHERS.HEADER")," "))}function XWe(i,n){if(i&1){let e=L();m(0,"div",27)(1,"div",28)(2,"label",29),F(3),D(4,"translate"),g(),m(5,"p-listbox",30),Oe("ngModelChange",function(r){y(e);let o=u(4);return Re(o.selectedItems,r)||(o.selectedItems=r),w(r)}),g()(),m(6,"div",31)(7,"button",32),k("click",function(){y(e);let r=u(4);return w(r.addSelected())}),g(),m(8,"button",33),k("click",function(){y(e);let r=u(4);return w(r.removeSelected())}),g()(),m(9,"div",34)(10,"label",29),F(11),D(12,"translate"),g(),m(13,"p-listbox",30),Oe("ngModelChange",function(r){y(e);let o=u(4);return Re(o.removedItems,r)||(o.removedItems=r),w(r)}),g()()()}if(i&2){let e=u(4);p(3),$(N(4,8,"VPN.CONFIG.DATA_CIPHERS.AVAILABLE_CIPHERS")),p(2),f("options",e.unselectedOptions),Te("ngModel",e.selectedItems),f("multiple",!0),p(6),$(N(12,10,"VPN.CONFIG.DATA_CIPHERS.SELECTED_CIPHERS")),p(2),f("options",e.selectedOptions),Te("ngModel",e.removedItems),f("multiple",!0)}}function QWe(i,n){if(i&1){let e=L();m(0,"button",35),D(1,"translate"),k("click",function(){y(e);let r=u(3).$implicit,o=u();return w(o.confirmSelection(r))}),g(),m(2,"button",36),D(3,"translate"),k("click",function(){y(e);let r=u(4);return w(r.onCloseDialog())}),g()}if(i&2){let e=u(4);Q("label",N(1,3,"GLOBALS.MSG_BUTTONS.ACCEPT")),f("disabled",e.selectedOptions.length===0),p(2),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.CANCEL"))}}function ZWe(i,n){if(i&1){let e=L();m(0,"td",15),k("click",function(){y(e);let r=u(2).$implicit,o=u();return w(o.openDialog(r))}),m(1,"p-dialog",22),Oe("visibleChange",function(r){y(e);let o=u(3);return Re(o.displayDialog,r)||(o.displayDialog=r),w(r)}),k("onHide",function(){y(e);let r=u(3);return w(r.onCloseDialog())}),v(2,YWe,5,3,"ng-template",4)(3,XWe,14,12,"ng-template",16)(4,QWe,4,7,"ng-template",23),g(),m(5,"p"),F(6),g()()}if(i&2){let e=u(2).$implicit,t=u();p(),st(Ae(6,jWe)),Te("visible",t.displayDialog),f("modal",!0)("closable",!0),p(5),J(" ",t.getOptionArgsWithDefault(e)," ")}}function eze(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function tze(i,n){if(i&1&&(m(0,"div"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function ize(i,n){if(i&1){let e=L();m(0,"p-dropdown",19),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(4).$implicit;return Re(o.arg,r)||(o.arg=r),w(r)}),k("onChange",function(r){y(e);let o=u(5);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,eze,2,1,"ng-template",20)(3,tze,2,1,"ng-template",21),g()}if(i&2){let e=u(4).$implicit,t=u();f("options",t.availableCiphers),Te("ngModel",e.arg),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,4,"VPN.CONFIG.NO_OPS"))}}function nze(i,n){if(i&1&&(m(0,"p"),F(1),g()),i&2){let e=u(4).$implicit,t=u();p(),$(t.getOptionArgsWithDefault(e))}}function rze(i,n){i&1&&(m(0,"p-cellEditor"),v(1,ize,4,6,"ng-template",16)(2,nze,2,1,"ng-template",17),g())}function oze(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function sze(i,n){if(i&1&&(m(0,"div"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function aze(i,n){if(i&1){let e=L();m(0,"p-dropdown",19),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(4).$implicit;return Re(o.arg,r)||(o.arg=r),w(r)}),k("onChange",function(r){y(e);let o=u(5);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,oze,2,1,"ng-template",20)(3,sze,2,1,"ng-template",21),g()}if(i&2){let e=u(4).$implicit,t=u();f("options",t.complzoOptions),Te("ngModel",e.arg),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,4,"VPN.CONFIG.NO_OPS"))}}function lze(i,n){if(i&1&&(m(0,"p"),F(1),g()),i&2){let e=u(4).$implicit,t=u();p(),J(" ",t.getOptionArgsWithDefault(e),"")}}function cze(i,n){i&1&&(m(0,"p-cellEditor"),v(1,aze,4,6,"ng-template",16)(2,lze,2,1,"ng-template",17),g())}function dze(i,n){if(i&1){let e=L();m(0,"input",38),Oe("ngModelChange",function(r){y(e);let o=u(5).$implicit;return Re(o.arg,r)||(o.arg=r),w(r)}),k("change",function(r){y(e);let o=u(6);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(5).$implicit;Te("ngModel",e.arg)}}function pze(i,n){if(i&1&&v(0,dze,1,1,"input",37),i&2){let e=u(4).$implicit,t=u();W(t.checkFlagOption(e)?-1:0)}}function uze(i,n){if(i&1&&F(0),i&2){let e=u(4).$implicit;J(" ",e.arg," ")}}function hze(i,n){i&1&&(m(0,"p-cellEditor"),v(1,pze,1,1,"ng-template",16)(2,uze,1,1,"ng-template",17),g())}function fze(i,n){if(i&1){let e=L();m(0,"td",15),k("click",function(r){y(e);let o=u(3);return w(o.scrollToEditorCell(r))}),v(1,rze,3,0,"p-cellEditor")(2,cze,3,0,"p-cellEditor")(3,hze,3,0,"p-cellEditor"),g()}if(i&2){let e=u(2).$implicit;p(),W(e.name==="cipher"||e.name==="data-ciphers-fallback"?1:e.name==="comp-lzo"?2:3)}}function mze(i,n){if(i&1){let e=L();m(0,"input",38),Oe("ngModelChange",function(r){y(e);let o=u(2).$implicit;return Re(o.comment,r)||(o.comment=r),w(r)}),k("change",function(r){y(e);let o=u(3);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(2).$implicit;Te("ngModel",e.comment)}}function gze(i,n){if(i&1&&(m(0,"div",39),F(1),g()),i&2){let e=u(2).$implicit;p(),J(" ",e.comment," ")}}function _ze(i,n){if(i&1){let e=L();m(0,"td",15),k("click",function(r){y(e);let o=u(2);return w(o.scrollToEditorCell(r))}),m(1,"p-cellEditor"),v(2,JWe,4,6,"ng-template",16)(3,qWe,1,1,"ng-template",17),g()(),v(4,ZWe,7,7,"td",18)(5,fze,4,1,"td",18),m(6,"td",18)(7,"p-cellEditor"),v(8,mze,1,1,"ng-template",16)(9,gze,2,1,"ng-template",17),g()()}if(i&2){let e=u().$implicit;p(4),W(e.name==="data-ciphers"?4:5)}}function Cze(i,n){if(i&1&&(P(0,"i",40),D(1,"translate")),i&2){let e=u(2).$implicit;Q("pTooltip",N(1,1,e.emptyMessageKey))}}function Ize(i,n){if(i&1){let e=L();m(0,"span"),F(1," \xA0 "),m(2,"i",41),k("mouseenter",function(r){y(e);let o=u(2).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u(3);return w(o.clearObjectInfo(r))})("wheel",function(r){y(e);let o=u(3);return w(o.clearObjectInfo(r))}),g()()}}function yze(i,n){if(i&1&&(m(0,"td")(1,"strong"),F(2),g()(),m(3,"td"),v(4,Cze,2,3,"i",40),m(5,"strong"),F(6),g(),v(7,Ize,3,0,"span"),g(),m(8,"td")(9,"strong"),F(10),g()()),i&2){let e=u().$implicit;p(2),$(e.name),p(2),W(e.arg?-1:4),p(2),$(e.arg),p(),W(e.ipobj&&e.arg?7:-1),p(3),$(e.comment)}}function wze(i,n){if(i&1){let e=L();m(0,"tr",11,1)(2,"td",12)(3,"iui-contextmenu",13),k("menuOpening",function(r){let o=y(e),s=o.$implicit,a=o.rowIndex,l=u();return w(l.contextMenuLoad(r,s,a))})("menuClick",function(r){let o=y(e),s=o.$implicit,a=o.rowIndex,l=u();return w(l.contextMenuHandler(r,s,a))}),P(4,"i",14),g()(),v(5,_ze,10,1)(6,yze,11,5),g()}if(i&2){let e=n.$implicit,t=n.rowIndex,r=u();f("pReorderableRow",t),p(3),f("settings",r.contextMenu)("allowAnimation",!1)("customStyle",r.contextMenuStyle)("colorScheme",r.currentColorScheme),p(2),W(e.readonly?6:5)}}function vze(i,n){if(i&1){let e=L();m(0,"button",42),D(1,"translate"),k("click",function(r){y(e);let o=u();return w(o.onAddRouteOrIRoute(r))}),g(),m(2,"button",42),D(3,"translate"),k("click",function(r){y(e);let o=u();return w(o.onAddRouteOrIRoute(r,!0))}),g(),m(4,"sts-fwc-tree-selector",43,2),k("objectSelected",function(r){y(e);let o=u();return w(o.onRouteObjectSelected(r))}),g()}if(i&2){let e=u();Q("label",N(1,7,"VPN.CONFIG.ADD_ROUTE")),p(2),Q("label",N(3,9,"VPN.CONFIG.ADD_IROUTE")),p(2),f("fwcloudId",null)("hideObjectName",!0)("fwTreeNodes",Po(11,GWe,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(18,HWe,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_NETWORK,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(23,WWe,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_NETWORK))}}var tE=(()=>{class i{set options(e){this.buildKeywords(),this.buildOptions(e)}constructor(e,t,r,o,s,a,l,c,d,h){this.refService=e,this.itemSelectedService=t,this.confirmationService=r,this.utilService=o,this.fwcObjectService=s,this.fwcUserService=a,this.fwcInterfaceService=l,this.cd=c,this.translate=d,this.store=h,this.dataChanges=new X,this.optionDeleted=new X,this.contextMenuReference=null,this.contextMenuStyle=[hs,ms,fs],this.applicationRef=null,this.initialized=!1,this.OptionScope=pe,this.NodeTypes=M,this.ObjectTypes=O,this.alive=!0,this.isClosing=!1,this.infoTooltipShown=!1,this.displayDialog=!1,this.selectedItems=[],this.removedItems=[],this.openVPNDefaultServerOVPOptions=y2,this.isEditing=!1,this.gridOptions=[],this.availableKeywords=[],this.availableCiphers=_2,this.defaultCipher=_2[0].value,this.defaultDataCiphersValue=[51,4,0].map(_=>({label:this.availableCiphers[_].label,value:this.availableCiphers[_].value})),this.unselectedOptions=this.availableCiphers.filter(_=>!this.defaultDataCiphersValue.some(C=>C.value===_.value)),this.selectedOptions=[],this.selectedOptionsDisplay=this.defaultDataCiphersValue.map(_=>_.value).join(":"),this.complzoOptions=C2,this.complzoDefaultOption=C2[0].value}ngOnInit(){this.contextMenu={items:[{id:V.VPN_OPTION_DELETE,text:this.translate.instant("VPN.CONFIG.DELETE_OPTION"),icon:"fwcMenuIcon fwci-delete fwcRed"},{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),visible:!1}]},this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.selectedOptions=this.defaultDataCiphersValue,this.initialSelectedOptions=[...this.selectedOptions],this.initialUnselectedOptions=[...this.unselectedOptions]}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){let e=this;setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t},1)}ngOnChanges(e){if(e.options){let r=e.options.currentValue;this.gridOptions=r.filter(o=>o.scope===this.scope)}this.dataChanges.emit(0),this.optionsTable&&!this.initialized&&(setTimeout(()=>{this.optionsTable.el.nativeElement.querySelector("table").scrollIntoView({behavior:"smooth",block:"start"})},100),this.initialized=!0,this.cd.detectChanges())}buildKeywords(e){let t=this.scope===pe.ccd?mB:y2;this.availableKeywords=[];let r=e?e.map(o=>o.name):pv.map(o=>o.name);t.forEach(o=>{let s=r.includes(o),a=I2.includes(o);this.availableKeywords.push({label:o,value:o,disabled:s&&!a})})}buildOptions(e){if(!(!e||this.scope!=pe.ccd&&this.scope!=pe.ovp)){this.requiredOptions=[],this.genericOptions=[],this.gridOptions=[];for(let t=0;t<e.length;t++)e[t].scope==this.scope&&this.gridOptions.push(Object.assign({},e[t]))}}onDeleteOption(e,t){this.checkOptionIsMandatory(e)||this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",rejectVisible:!0,rejectLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.NO"),acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),message:this.translate.instant("VPN.CONFIG.ASK_DELETE_OPTION",{name:e.name}),accept:()=>{let r=Object.assign({},e);if(this.checkOptionIsDeletable(e)?(this.gridOptions.splice(t,1),this.optionDeleted.emit(r)):e.arg&&e.arg.length&&(e.arg=void 0,e.ipobj=void 0,e.comment=void 0,this.optionDeleted.emit(r)),!I2.includes(e.name)){let o=this.availableKeywords.find(s=>s.value===e.name);o&&(o.disabled=!1)}}})}onAddOption(){let e=document.activeElement;e&&e.blur(),this.buildKeywords(this.gridOptions),setTimeout(()=>{this.addIPOption("",this.scope)},50)}onAddRouteOrIRoute(e,t){this.routesTreeSelector&&this.routesTreeSelector.showTree(e,{iroute:!!t},!0)}onRouteObjectSelected(e){if(!e||!e._metadata)return;let t,r;switch(e.obj_type){case O.OBJ_ADDRESS:case O.OBJ_NETWORK:t=this.fwcObjectService.getObject.bind(this.fwcObjectService),r=[e.id_obj,this.fwcUserService.getActualFwSelectedCloud()];break}t&&e.id_obj&&this.utilService.fwcAPICall(t,...r).then(o=>{let s=o.data.address,a=o.data.netmask,l,c;if(e.obj_type===O.OBJ_ADDRESS)a="255.255.255.255";else{let d=Pt.netmaskCIDRRegexp.exec(a);if(d){let h=parseInt(d[1]);a=cK.IPv4.subnetMaskFromPrefixLength(h).toString()}}e._metadata.iroute?(l="iroute",c=`${s} ${a}`):(l="push",c=`"route ${s} ${a}"`),this.addIPOption(l,this.scope,c)}).catch(o=>{})}onDataChanged(e){this.dataChanges.emit(1)}contextMenuLoad(e,t,r){let o=!1,s=!1;if(o=this.checkOptionIsMandatory(t),s=o,s){e.detail.cancel=!0;return}this.contextMenu&&this.contextMenu.items&&this.contextMenu.items.forEach(function(a){a.id==V.VPN_OPTION_DELETE&&(a.visible=!o)})}checkOptionIsMandatory(e){let t=!1;for(let r in zo)if(e.name==zo[r]){t=!0;break}return t}checkOptionIsDeletable(e){let t=!0;return e.required&&this.gridOptions.filter(o=>o.name==e.name).length<=1&&(t=!1),t}contextMenuHandler(e,t,r){if(e.detail.item)switch(e.detail.item.id){case V.VPN_OPTION_DELETE:this.onDeleteOption(t,r);break}}getOptions(){return this.gridOptions=this.gridOptions.filter(e=>!!e.name),this.gridOptions}getScope(){return this.scope}updateOrCreateIPOption(e,t){if(!e)return;let r=!0,o=this.gridOptions.filter(s=>s.name==e.name);if(o.length==1){let s=o[0];if(!s.ipobj&&s.required||t)for(let a of Object.keys(e))e[a]!==void 0&&e[a]!==null&&(s[a]=e[a]),r=!1}if(r){for(let s=this.gridOptions.length-1;s>=0;s--)if(this.gridOptions[s].name==e.name){this.gridOptions.splice(s+1,0,Object.assign({},e));break}}this.dataChanges.emit(1)}addIPOption(e,t,r,o,s){if(this.gridOptions.length&&!this.gridOptions[this.gridOptions.length-1].name&&this.gridOptions.pop(),this.gridOptions.push({name:e,scope:t,arg:r,ipobj:o,comment:s}),this.selectedOption=this.gridOptions[this.gridOptions.length-1],this.cd.detectChanges(),this.optionsTable&&setTimeout(()=>{this.optionsTable.el.nativeElement.querySelector("table").scrollIntoView({behavior:"instant",block:"end"})},0),e)this.dataChanges.emit(1);else{let a=this.optionsTable.el.nativeElement.querySelector("table tbody tr:last-child");if(a){let l=a.querySelector("td:nth-child(2)");l&&setTimeout(()=>{l.click()},0)}}}modifyIPOption(e,t,r,o){let s=this.gridOptions.find(a=>a.name==e);s&&t===this.scope&&(s.arg=r,this.onDataChanged(1),o!=null&&(s.ipobj=o))}checkFlagOption(e){return uB.includes(e.name)}clearOptions(){this.options=[],this.gridOptions=[],this.initialized=!1}showObjectInfo(e,t){if(e){let r={objId:e.ipobj};r.objId!==null&&(this.infoTooltipTimer=setTimeout(()=>{this.infoTooltipShown=!0,this.itemSelectedService.setObjectInfo(r,t)},1e3))}}clearObjectInfo(e){this.infoTooltipTimer&&(clearTimeout(this.infoTooltipTimer),this.infoTooltipTimer=void 0),this.infoTooltipShown&&(this.itemSelectedService.setObjectInfo(void 0,e),this.infoTooltipShown=!1)}addSelected(){let e=this.selectedItems.filter(t=>!this.selectedOptions.some(r=>r.value===t.value));this.selectedOptions.push(...e),this.unselectedOptions=this.unselectedOptions.filter(t=>!this.selectedItems.includes(t)),this.unselectedOptions.sort((t,r)=>t.label.localeCompare(r.label)),this.selectedItems=[],this.removedItems=[],this.cd.detectChanges()}removeSelected(){let e=this.removedItems.filter(t=>!this.unselectedOptions.some(r=>r.value===t.value));this.unselectedOptions.push(...e),this.unselectedOptions.sort((t,r)=>t.label.localeCompare(r.label)),this.selectedOptions=this.selectedOptions.filter(t=>!this.removedItems.includes(t)),this.removedItems=[],this.selectedItems=[],this.cd.detectChanges()}confirmSelection(e){this.initialSelectedOptions=[...this.selectedOptions],this.initialUnselectedOptions=[...this.unselectedOptions],this.selectedOptionsDisplay=this.selectedOptions.map(t=>t.label).join(":"),e.arg=this.selectedOptionsDisplay,this.displayDialog=!1,this.cd.detectChanges(),this.dataChanges.emit(1)}openDialog(e){if(!this.displayDialog){let t=e?.arg&&e.arg.trim()!==""?e.arg:this.defaultDataCiphersValue.map(o=>o.value).join(":"),r=t.split(":");this.selectedOptions=r.map(o=>this.availableCiphers.find(s=>s.value===o)).filter(o=>o!==void 0),this.unselectedOptions=this.availableCiphers.filter(o=>!t.includes(o.value)).sort((o,s)=>o.label.localeCompare(s.label)),setTimeout(()=>{this.displayDialog=!0,this.cd.detectChanges()},0)}}onCloseDialog(){this.isClosing||(this.isClosing=!0,this.selectedOptions=[...this.initialSelectedOptions],this.unselectedOptions=[...this.initialUnselectedOptions],setTimeout(()=>{this.displayDialog=!1,this.isClosing=!1,this.dataChanges.emit(0),this.cd.detectChanges()},300))}scrollToEditorCell(e){let t=e.currentTarget;t&&setTimeout(()=>{t.scrollIntoView({behavior:"instant",block:"center"}),this.dropdown.show()},0)}getOptionArgsWithDefault(e){return(!e.arg||e.arg===""||e.arg.trim()==="")&&(e.name==="data-ciphers"?e.arg=this.defaultDataCiphersValue.map(t=>t.value).join(":"):e.name==="cipher"||e.name==="data-ciphers-fallback"?e.arg=this.defaultCipher:e.name==="comp-lzo"&&(e.arg=this.complzoDefaultOption)),e.arg}onEditStart(){this.isEditing=!0}onEditEnd(){this.isEditing=!1}static{this.\u0275fac=function(t){return new(t||i)(S(Ts),S(ht),S(Jt),S(ft),S(Vi),S(at),S(Io),S(we),S(Ye),S(nt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ovoptions-grid"]],viewQuery:function(t,r){if(t&1&&(le(mr,5),le(BWe,5),le(UWe,5)),t&2){let o;te(o=ie())&&(r.dropdown=o.first),te(o=ie())&&(r.optionsTable=o.first),te(o=ie())&&(r.routesTreeSelector=o.first)}},inputs:{scope:"scope",options:"options"},outputs:{dataChanges:"dataChanges",optionDeleted:"optionDeleted"},features:[et([Io,Vi]),Yi],decls:8,vars:7,consts:[["optionsTable",""],["dropwdown",""],["routesTreeSelector",""],["scrollHeight","13em","selectionMode","single","styleClass","optionsTable",3,"selectionChange","onEditComplete","onRowReorder","onEditInit","onEditCancel","value","scrollable","selection"],["pTemplate","header"],["pTemplate","body"],[1,"divGridFooter"],["pButton","","icon","fa fa-plus",3,"click","label"],[1,"tdActionColumn"],["pSortableColumn","name"],["field","name"],[1,"trOptionsGridRow",3,"pReorderableRow"],["pReorderableRowHandle","",1,"tdActionColumn"],["contextMenuRef","contextMenuReference",3,"menuOpening","menuClick","settings","allowAnimation","customStyle","colorScheme"],["pReorderableRowHandle","",1,"fa","fa-bars","fwcBlue"],["pEditableColumn","",3,"click"],["pTemplate","input"],["pTemplate","output"],["pEditableColumn",""],["styleClass","fwcGridDropDown","appendTo","body","filter","true",3,"ngModelChange","onChange","keydown","keydown.arrowUp","keydown.arrowDown","options","ngModel","autoDisplayFirst","emptyFilterMessage"],["pTemplate","selectedItem"],["pTemplate","item"],["id","data-ciphers","styleClass","dlgFwcDialog",3,"visibleChange","onHide","visible","modal","closable"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwci-edit","fwcOrange"],[1,"dual-list"],[1,"ciphersList"],[1,"fwcBlue"],["optionLabel","label",3,"ngModelChange","options","ngModel","multiple"],[1,"button-group"],["pButton","","icon","pi pi-arrow-right",1,"p-button-primary",3,"click"],["pButton","","icon","pi pi-arrow-left",1,"p-button-danger",3,"click"],[1,"selectedOptions"],["pButton","","icon","pi pi-check",3,"click","label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"click","label"],["pInputText","","type","text","maxlength","255",3,"ngModel"],["pInputText","","type","text","maxlength","255",3,"ngModelChange","change","keydown","keydown.arrowUp","keydown.arrowDown","ngModel"],[1,"divWrapper"],[1,"fa","fa-question-circle","fa-lg","fwcOrange",3,"pTooltip"],[1,"fa","fa-lg","fa-info-circle","fwcBlue",3,"mouseenter","mouseleave","wheel"],["pButton","",3,"click","label"],[3,"objectSelected","fwcloudId","hideObjectName","fwTreeNodes","objectTreeNodes","selectableObjects"]],template:function(t,r){if(t&1){let o=L();m(0,"p-table",3,0),Oe("selectionChange",function(a){return y(o),Re(r.selectedOption,a)||(r.selectedOption=a),w(a)}),k("onEditComplete",function(a){return y(o),w(r.onDataChanged(a))})("onRowReorder",function(a){return y(o),w(r.onDataChanged(a))})("onRowReorder",function(a){return y(o),w(r.onDataChanged(a))})("onEditInit",function(){return y(o),w(r.onEditStart())})("onEditCancel",function(){return y(o),w(r.onEditEnd())})("onEditComplete",function(){return y(o),w(r.onEditEnd())}),v(2,zWe,12,9,"ng-template",4)(3,wze,7,6,"ng-template",5),g(),m(4,"div",6)(5,"button",7),D(6,"translate"),k("click",function(){return y(o),w(r.onAddOption())}),g(),v(7,vze,6,26),g()}t&2&&(f("value",r.gridOptions)("scrollable",!0),Te("selection",r.selectedOption),p(5),Q("label",N(6,5,"VPN.CONFIG.ADD_OPTION")),p(2),W(r.scope===r.OptionScope.ccd?7:-1))},dependencies:[Li,Pi,Jn,mn,Yt,Ee,pt,cn,Xi,sr,Oa,lh,qf,Ra,Yf,Xf,mr,tD,Zo,gt],styles:[`@charset "UTF-8";:root{--lightColor: #eee;--darkColor: #222;--inputBackgroundColor: #eee;--inputBorderColor: #cacaca;--inputColor: #222;--surfaceBackgroundColor: white;--fixedWhiteColor: #eee;--fixedDarkColor: #333;--translucidColor: transparent;--menuBackground: url(/assets/img/fwc-fondo-menu.jpg);--mainBackground: url(/assets/img/fwc-fondo-home.jpg);--fwcBlue: #0069a7;--fwcBlueDarkened: #005e96;--fwcDarkBlue: #003351;--fwcDarkBlue2: #014071;--fwcLightBlue: #1779ba;--fwcPaleBlue: #689fe1;--fwcPaleBlue2: #cce2f8;--fwcPaleBlue3: #e6f1fd;--fwcBlueGradient1: #386ea0;--fwcBlueGradient2: #21517e;--fwcLightGreyGradient1: #f6f7f9;--fwcLightGreyGradient2: #ebedf0;--fwcOrange: #eb6400;--fwcPaleOrange: #e67e22;--fwcPaleOrange2: #ffcfa4;--fwcPaleOrange3: #fe7815;--fwcOrangeRed: #e74c3c;--fwcRed: #f00;--fwcRed2: #b40b00;--fwcPaleRed: #f77676;--fwcPaleRed2: #ffe1e1;--fwcTranslucidRed: rgba(255, 0, 0, .15);--fwcDarkGreen: #023008;--fwcGreen: #009900;--fwcLightGreen: #28ff28;--fwcPaleGreen: #c7e6c8;--fwcLime: #baf649;--fwcWhite: #eee;--fwcPaleWhite: #f5f5f5;--fwcPaleWhite2: #f4f4f4;--fwcDark: #222;--fwcLightDark: #1e1e1e;--fwcMidDark: #555;--fwcMidDark2: #333;--fwcPaleDark: #888;--fwcPaleDark2: #383838;--fwcGrey: #cacaca;--fwcGrey2: #cecece;--fwcGrey3: #eee;--fwcGrey4: #e5e5e5;--fwcGrey5: #c8c8c8;--fwcGrey6: #efefef;--fwcGrey7: #dedede;--fwcAccent: #ff4081;--fwcShadow: #bbb;--fwcSelected: #ddd;--fwcSelectedB: #0069a7;--fwcRulePink: #ef9a9a;--fwcRulePurple: #ce93d8;--fwcRuleBlue: #90caf9;--fwcRuleTeal: #80cbc4;--fwcRuleGreen: #a5d6a7;--fwcRuleYellow: #fff59d;--fwcRuleOrange: #ffcc80}.p-dropdown.fwcGridDropDown{width:100%!important}.tdActionColumn{width:2.5em}tr.trOptionsGridRow td{overflow:hidden;font-family:Montserrat,Arial,sans-serif;padding:.3rem}tr.trOptionsGridRow td .divWrapper{position:relative;height:100%;width:100%}tr.trOptionsGridRow td .divWrapper:before{content:"\\a0"}tr.trOptionsGridRow td .divWrapper .divColButtons{cursor:pointer;position:absolute;right:-2.5rem;top:0;transition:all .3s ease-in-out}tr.trOptionsGridRow td .divWrapper .divColButtons i{color:var(--fwcWhite);background:var(--fwcRed);display:inline-block;width:1.5rem;height:1.5rem;text-align:center;line-height:1.5rem;border-radius:50%;margin-top:-.2rem}tr.trOptionsGridRow td .divWrapper .divColButtons i:active{transform:scale(.95)}tr.trOptionsGridRow:hover .divColButtons{right:0!important}.trOptionsGridRow input.p-inputtext{height:20px!important}td p-celleditor p-dropdown .fwcGridDropDown span.p-dropdown-label{padding:.1rem!important}div.divGridFooter{text-align:center;padding:.2rem}div.divGridFooter button{font-size:.8rem!important;margin-left:.5rem}.dual-list{display:flex;width:100%;justify-content:space-between}.dual-list .p-listbox{width:200px;height:300px}.dual-list .p-listbox-list-wrapper{max-height:300px!important}.button-group{display:flex;flex-direction:column;align-items:center;margin-top:20%}.button-group>button{height:3rem;width:4rem;max-height:3rem!important;max-width:4rem!important}.button-group p{margin:10px}.p-datatable-reorderablerow-handle{margin-left:5px!important;margin-top:5px!important}
`],encapsulation:2})}}return i})();var uK=No(Gc()),Ks=No(_c());var Ag=(()=>{class i{constructor(e){this.el=e}ngAfterViewInit(){this.focusElement()}focusElement(){setTimeout(()=>{this.el&&this.el.nativeElement&&this.el.nativeElement.focus()},400)}static{this.\u0275fac=function(t){return new(t||i)(S(Ze))}}static{this.\u0275dir=Et({type:i,selectors:[["","appAutofocus",""]]})}}return i})();var Sze=["txtConfigFile"],Eze=()=>({width:"80vw"}),Aze=(i,n)=>({obj_type:i,name:n}),yk=i=>({name:i}),xze=()=>({visibility:"visible"}),iE=i=>({visibility:i}),Tze=(i,n,e,t,r,o)=>[i,n,e,t,r,o],Oze=(i,n,e,t)=>[i,n,e,t],Rze=(i,n)=>[i,n],Pze=()=>({width:"1.7rem",height:"1.7rem"}),Dze=i=>({obj_type:i});function Fze(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i"),D(3,"fwcIcon"),F(4),D(5,"translate"),D(6,"translate"),g()()),i&2){let e=u(2);p(2),ce(Ms(3,4,e.objectToDelete._fwcObjType,null,"fwcOrange")),p(2),J(" ",ei(6,10,"VPN.CONFIG.HEADER_DELETE_2",Qe(13,Aze,N(5,8,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR"),e.objectToDelete._fwcObjName))," ")}}function kze(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.HEADER_FILE",ne(4,yk,e.objectToRetrieve._fwcObjName))," ")}}function Nze(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,e.configManageTranslateKey+".FORM_HEADER",ne(4,yk,e.objectToManage._fwcObjName))," ")}}function Lze(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",14),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.HEADER_WU",ne(4,yk,e.objectToSearchWU._fwcObjName))," ")}}function Mze(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),g()()),i&2){let e=u(2);p(3),J(" ",e.headerTitle," ")}}function Vze(i,n){if(i&1){let e=L();m(0,"div",11)(1,"button",15),k("click",function(){y(e);let r=u(2);return w(r.minimizeDialog())}),g()()}}function Bze(i,n){if(i&1&&v(0,Fze,7,16,"div",10)(1,kze,5,6,"div",10)(2,Nze,5,6,"div",10)(3,Lze,5,6,"div",10)(4,Mze,4,1,"div",10)(5,Vze,2,0,"div",11),i&2){let e=u();W(e.objectToDelete?0:-1),p(),W(e.objectToRetrieve?1:-1),p(),W(e.objectToManage?2:-1),p(),W(e.objectToSearchWU?3:-1),p(),W(!e.objectToDelete&&!e.objectToRetrieve&&!e.objectToManage&&!e.objectToSearchWU?4:-1),p(),W(e.disableButtons?-1:5)}}function Uze(i,n){i&1&&(m(0,"div",5)(1,"div",16),P(2,"p-progressSpinner"),g()())}function jze(i,n){if(i&1&&(m(0,"div",5)(1,"div",17),P(2,"sts-fwc-message",18),g()()),i&2){let e=u();p(2),f("message",e.errorMsg)}}function Gze(i,n){if(i&1){let e=L();m(0,"div",19),P(1,"sts-fwc-message",18),m(2,"sts-fwc-object-restrictions",20),k("onHideParent",function(){y(e);let r=u(3);return w(r.minimizeDialog(!0))})("onRefreshRestrictions",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()()}if(i&2){let e=u(3);p(),f("message",e.deleteMsg),p(),f("dependencies",e.dependencies)("readOnly",e.restrictionsReadOnly)}}function Hze(i,n){if(i&1&&v(0,Gze,3,3,"div",19),i&2){let e=u(2);W(e.dependencies.restrictionsError?-1:0)}}function Wze(i,n){if(i&1){let e=L();m(0,"div",21)(1,"p-checkbox",22),D(2,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.alsoUninstallConfig,r)||(o.alsoUninstallConfig=r),w(r)}),g()()}if(i&2){let e=u(3);p(),Q("label",N(2,2,"VPN.CONFIG.UNINSTALL_STRINGS.UNINSTALL_FIRST")),Te("ngModel",e.alsoUninstallConfig)}}function zze(i,n){if(i&1&&(P(0,"sts-fwc-message",18),v(1,Wze,3,4,"div",21)),i&2){let e=u(2);f("message",e.deleteMsg),p(),W(e.objectToDelete.obj_type==e.ObjectTypes.OBJ_OPENVPN_CONFIG_SER||e.objectToDelete.obj_type==e.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI?1:-1)}}function Kze(i,n){if(i&1&&v(0,Hze,1,1)(1,zze,2,2),i&2){let e=u();W(e.dependencies?0:1)}}function $ze(i,n){if(i&1&&(m(0,"div",6)(1,"div",23)(2,"textarea",24,1),F(4),g()()()),i&2){let e=u();p(4),$(e.configFile)}}function Jze(i,n){if(i&1&&(m(0,"span"),P(1,"i",31),F(2,"\xA0"),m(3,"strong"),F(4),g()()),i&2){let e=u(2).$implicit;p(4),$(e.firewallName)}}function qze(i,n){if(i&1&&(m(0,"span"),P(1,"span",32)(2,"i",33),F(3),g()),i&2){let e=u(2).$implicit;p(3),J("\xA0",e.firewallName,"")}}function Yze(i,n){if(i&1&&(m(0,"td"),v(1,Jze,5,1,"span")(2,qze,4,1,"span"),g()),i&2){let e=u().$implicit;p(),W(e.isNode?-1:1),p(),W(e.isNode?2:-1)}}function Xze(i,n){if(i&1&&(m(0,"td"),P(1,"i",33),F(2),g()),i&2){let e=u().$implicit;p(2),J("\xA0",e.firewallName," ")}}function Qze(i,n){if(i&1&&(m(0,"tr",29),v(1,Yze,3,2,"td")(2,Xze,3,1,"td"),m(3,"td",28),P(4,"i"),g()()),i&2){let e=n.$implicit,t=u(2);f("ngClass",e.coloredBg?"bgColored":"bgNormal"),p(),W(e.clusterId!==null&&e.clusterId!==void 0?1:-1),p(),W(e.clusterId===null||e.clusterId===void 0?2:-1),p(2),ce(t.FirewallOpsIcons[e.installState])}}function Zze(i,n){if(i&1&&(m(0,"div",6)(1,"div",25)(2,"div",26)(3,"table",27)(4,"thead")(5,"tr")(6,"th"),F(7),D(8,"translate"),g(),m(9,"th",28),F(10),D(11,"translate"),g()()(),m(12,"tbody"),xr(13,Qze,5,6,"tr",29,Ar),g()()()(),m(15,"div",30),P(16,"sts-fwc-log"),g()()),i&2){let e=u();p(7),$(N(8,2,"COMPILE.FORM.NAME")),p(3),J(" ",N(11,4,e.configManageTranslateKey+".OPERATION")," "),p(3),Tr(e.operationQueue)}}function eKe(i,n){if(i&1){let e=L();m(0,"sts-fwc-object-wu",34),k("onHideParent",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()}if(i&2){let e=u();f("objectInfo",e.objectToSearchWU._fwcObjectInfo)("readOnly",e.restrictionsReadOnly)}}function tKe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,e.object.parent_type==e.ObjectTypes.OBJ_FIREWALL?"GLOBALS.MSG_OBJ_TYPES.FIREWALL":"GLOBALS.MSG_OBJ_TYPES.CLUSTER")),p(2),Q("value",e.object.parent_name)}}function iKe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,"VPN.CONFIG.SER.OPENVPN")),p(2),Q("value",e.object._fwcParentConfigName)}}function nKe(i,n){if(i&1&&(m(0,"div",65),P(1,"i",66),D(2,"translate"),g()),i&2){let e=u(2);p(),Q("pTooltip",N(2,2,e.ipNetmaskErrorMsg)),f("ngStyle",Ae(4,xze))}}function rKe(i,n){if(i&1&&(m(0,"p",75),F(1),D(2,"translate"),g()),i&2){let e,t=u(3);f("ngStyle",ne(4,iE,(e=t.formModel.get("install_dir"))!=null&&e.valid||(e=t.formModel.get("install_dir"))!=null&&e.pristine&&((e=t.formModel.get("install_dir"))!=null&&e.untouched)?"hidden":"visible")),p(),J(" ",N(2,2,"VPN.PANEL.ERRORS.INVALID_INSTALL_PATH")," ")}}function oKe(i,n){if(i&1&&(m(0,"div",17)(1,"p",75),F(2),D(3,"translate"),g()()),i&2){let e,t=u(3);p(),f("ngStyle",ne(4,iE,(e=t.formModel.get("install_name"))!=null&&e.valid?"hidden":"visible")),p(),J(" ",N(3,2,"VPN.CONFIG.ERRORS.INVALID_CONFIG_FILENAME_ERROR.TEXT")," ")}}function sKe(i,n){if(i&1){let e=L();m(0,"div",56)(1,"p-fieldset",46),D(2,"translate"),m(3,"div",67)(4,"div",68)(5,"div",42)(6,"span",62)(7,"input",69),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(8,"label",70),F(9),D(10,"translate"),g()()(),v(11,rKe,3,6,"p",71),g(),m(12,"div",68)(13,"div",42)(14,"span",62)(15,"input",72),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(16,"label",73),F(17),D(18,"translate"),g()()(),v(19,oKe,4,6,"div",74),g()()()()}if(i&2){let e,t,r=u(2);p(),f("legend",N(2,5,"VPN.PANEL.FIELDS.INST_OPTIONS")),p(8),$(N(10,7,"VPN.PANEL.FIELDS.CONFIG_DIR")),p(2),f("ngIf",!((e=r.formModel.get("install_dir"))!=null&&e.valid||(e=r.formModel.get("install_dir"))!=null&&e.pristine&&((e=r.formModel.get("install_dir"))!=null&&e.untouched))),p(6),$(N(18,9,"VPN.PANEL.FIELDS.CONFIG_FILE")),p(2),f("ngIf",!((t=r.formModel.get("install_name"))!=null&&t.valid))}}function aKe(i,n){if(i&1&&(m(0,"div",86)(1,"p",75),F(2),D(3,"translate"),g()()),i&2){let e=u(3);p(),f("ngStyle",ne(4,iE,e.formModelRemote!=null&&e.formModelRemote.invalid&&(e.formModelRemote!=null&&e.formModelRemote.touched)&&(e.formModelRemote!=null&&e.formModelRemote.dirty)?"visible":"hidden")),p(),J(" ",N(3,2,"VPN.PANEL.ERRORS.INVALID_REMOTE")," ")}}function lKe(i,n){if(i&1){let e=L();m(0,"div",57)(1,"form",37)(2,"p-fieldset",76)(3,"div",77)(4,"div",78)(5,"sts-fwc-tree-selector",79,2),k("objectSelected",function(r){y(e);let o=u(2);return w(o.onRemoteIPObjectChange(r))}),g()(),m(7,"div",80)(8,"span",62)(9,"input",81),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(10,"label",82),F(11),D(12,"translate"),g()()(),m(13,"div",83)(14,"button",84),k("click",function(){y(e);let r=u(2);return w(r.onAddRemoteOption())}),g()(),v(15,aKe,4,6,"div",85),g()()()()}if(i&2){let e=u(2);p(),f("formGroup",e.formModelRemote),p(4),f("fwcloudId",null)("fwTreeNodes",Po(11,Tze,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(18,Oze,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_DNS,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(23,Rze,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_DNS))("disabledObjects",e.disabledTreeRemoteOptions),p(6),$(N(12,9,"CLUSTER.MSG_CLUSTER_EDITION.PORT")),p(3),f("disabled",!(e.formModelRemote!=null&&e.formModelRemote.valid)),p(),f("ngIf",(e.formModelRemote==null?null:e.formModelRemote.invalid)&&(e.formModelRemote==null?null:e.formModelRemote.touched)&&(e.formModelRemote==null?null:e.formModelRemote.dirty))}}function cKe(i,n){if(i&1){let e=L();m(0,"div",58)(1,"h5",59),F(2),D(3,"translate"),g(),m(4,"sts-fwc-ovoptions-grid",60),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("dataChanges",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))}),g()()}if(i&2){let e=u(2);p(2),J(" ",N(3,3,"VPN.CONFIG.CCD")," "),p(2),f("options",e.object.options)("scope",e.OptionScope.ccd)}}function dKe(i,n){if(i&1){let e=L();m(0,"p-tabView",8)(1,"p-tabPanel",35),D(2,"translate"),m(3,"div",36)(4,"form",37)(5,"fieldset",38),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.onCancel())}),m(6,"div",39)(7,"div",40)(8,"div",39)(9,"div",41),v(10,tKe,5,4,"div",42)(11,iKe,5,4,"div",42),g(),m(12,"div",41)(13,"div",42)(14,"label",43),F(15),D(16,"translate"),g(),P(17,"input",44),g()()()(),m(18,"div",45)(19,"p-fieldset",46)(20,"div",5)(21,"div",25)(22,"div",42)(23,"span",47)(24,"input",48),k("drop",function(){y(e);let r=u();return w(r.preventDrop())}),g(),m(25,"label",49),F(26),D(27,"translate"),g()()()(),m(28,"div",50)(29,"div",42)(30,"span",47)(31,"input",51),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowOnlyNumbersAndDot(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(32,"label",52),F(33),D(34,"translate"),g()()()(),m(35,"div",25)(36,"div",42)(37,"span",47)(38,"input",53),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowNumbersDotAndSlash(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(39,"label",54),F(40),D(41,"translate"),g()()()(),v(42,nKe,3,5,"div",55),g()()(),v(43,sKe,20,11,"div",56)(44,lKe,16,26,"div",57)(45,cKe,5,5,"div",58),m(46,"div",29)(47,"h5",59),F(48),D(49,"translate"),g(),m(50,"sts-fwc-ovoptions-grid",60),k("optionDeleted",function(r){y(e);let o=u();return w(o.onOptionsDelete(r))})("dataChanges",function(r){y(e);let o=u();return w(o.onOptionsChange(r))}),g()(),m(51,"div",61)(52,"div",42)(53,"span",62)(54,"input",63),k("drop",function(){y(e);let r=u();return w(r.preventDrop())}),g(),m(55,"label",64),F(56),D(57,"translate"),g()()()()()()()()()()}if(i&2){let e,t=u();p(),Q("header",N(2,19,"VPN.PANEL.DATA")),p(3),f("formGroup",t.formModel),p(6),W(t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_SER?10:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI?11:-1),p(4),$(N(16,21,"VPN.CONFIG.CN")),p(2),Q("value",t.object._fwcCrtName),p(2),Q("legend",t.fieldsetTitle),p(7),$(N(27,23,"ITEM_PANEL.FIELDS.NAME")),p(7),$(N(34,25,"ITEM_PANEL.FIELDS.ADDRESS")),p(7),$(N(41,27,"ITEM_PANEL.FIELDS.MASK")),p(2),f("ngIf",((e=t.formModel.get("_ipobj_address"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_address"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_netmask"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_netmask"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_name"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_name"))==null?null:e.invalid)),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_SER?43:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI?44:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI?45:-1),p(),f("ngClass",t.object.obj_type==t.ObjectTypes.OBJ_OPENVPN_CONFIG_CLI?"col-6":"col-12"),p(2),J(" ",N(49,29,"VPN.CONFIG.OVP")," "),p(2),f("options",t.object.options)("scope",t.OptionScope.ovp),p(6),$(N(57,31,"ITEM_PANEL.FIELDS.COMMENTS"))}}function pKe(i,n){if(i&1){let e=L();m(0,"button",92),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"POLICY_GRID.RELOAD")),f("disabled",e.loadingData)}}function uKe(i,n){if(i&1){let e=L();v(0,pKe,2,4,"button",90),m(1,"button",91),D(2,"translate"),D(3,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onProcessDeleteAction())}),g()}if(i&2){let e=u(2);W(e.dependencies?0:-1),p(),Q("label",ei(3,5,"CONTEXT.VPN_CONFIG.DELETE_2",ne(8,Dze,N(2,3,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR")))),f("disabled",!e.okToDelete||e.loadingData||e.savingData)}}function hKe(i,n){if(i&1){let e=L();m(0,"button",95),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCopyConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.CLIPBOARD.BUTTON")),f("disabled",e.loadingData)}}function fKe(i,n){if(i&1){let e=L();m(0,"button",96),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onDownloadConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.DOWNLOAD.BUTTON")),f("disabled",e.loadingData)}}function mKe(i,n){if(i&1&&v(0,hKe,2,4,"button",93)(1,fKe,2,4,"button",94),i&2){let e=u(2);W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?0:-1),p(),W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?1:-1)}}function gKe(i,n){if(i&1){let e=L();m(0,"button",100),D(1,"translate"),k("click",function(){y(e);let r=u(4);return w(r.doPauseProcess(!0))}),g()}if(i&2){let e=u(4);Q("label",N(1,2,"COMPILE.PAUSE")),f("disabled",e.disableButtons)}}function _Ke(i,n){if(i&1){let e=L();m(0,"button",101),k("click",function(){y(e);let r=u(4);return w(r.doContinueProcess())}),g()}if(i&2){let e=u(4);f("disabled",e.disableButtons)("label",e.continueButtonText)}}function CKe(i,n){if(i&1){let e=L();m(0,"button",97),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.doStopProcess())}),g(),v(2,gKe,2,4,"button",98)(3,_Ke,1,2,"button",99)}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.STOP")),p(2),W(e.pauseProcess?3:2)}}function IKe(i,n){if(i&1&&v(0,CKe,4,4),i&2){let e=u(2);W(e.operationInProcessId<e.operationQueue.length&&!e.stopProcess?0:-1)}}function yKe(i,n){if(i&1){let e=L();m(0,"button",104),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCancel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",!e.object||e.loadingData||e.savingData)}}function wKe(i,n){if(i&1){let e=L();m(0,"button",105),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onSave())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData||e.savingData)}}function vKe(i,n){if(i&1&&v(0,yKe,2,4,"button",102)(1,wKe,2,4,"button",103),i&2){let e=u(2);W(e.formModel.pristine?-1:0),p(),W(e.formModel.pristine?-1:1)}}function bKe(i,n){if(i&1){let e=L();m(0,"button",106),D(1,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancel())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function SKe(i,n){if(i&1&&(m(0,"div",87),P(1,"p-progressSpinner"),g(),v(2,uKe,4,10,"button",88)(3,mKe,2,2)(4,IKe,1,1)(5,vKe,2,2)(6,bKe,2,4,"button",89)),i&2){let e=u();f("ngStyle",ne(8,iE,e.savingData?"visible":"hidden")),p(),st(Ae(10,Pze)),p(),W(e.objectToDelete?2:-1),p(),W(e.objectToRetrieve?3:-1),p(),W(e.objectToManage?4:-1),p(),W(e.object&&e.formModel?5:-1),p(),W(!e.object||!e.formModel||e.object&&e.formModel&&e.formModel.pristine?6:-1)}}var dK=6e4,pK=["server","ifconfig-push","remote"],Yqt=(()=>{class i extends Gt{ipNetmaskValidator(e){if(!this.formModel||!this.object||!this.formModel.controls._ipobj_address)return{ipNetmaskValidator:!0};let t=!1,r="",o="",s,a,l;this.formModel.controls._ipobj_address&&(r=this.formModel.controls._ipobj_address.value||""),r&&this.formModel.controls._ipobj_address.markAsTouched(),this.formModel.controls._ipobj_netmask&&(o=this.formModel.controls._ipobj_netmask.value||""),o&&this.formModel.controls._ipobj_netmask.markAsTouched();let c=Pt.netmaskCIDRRegexp.exec(o);if(c){let d=parseInt(c[1]);try{o=Ks.IPv4.subnetMaskFromPrefixLength(d).toString()}catch{t=!1}}return r.match(Pt.ipV4Regexp)&&o.match(Pt.netmaskRegexp)&&(l=r.trim()+" "+o.trim(),this.formModel.controls._ipobj_address.setErrors(null),t=!0),this.object.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(s=pe.ccd,a=zo.O_CLIENT):this.object.obj_type==O.OBJ_OPENVPN_CONFIG_SER&&(s=pe.ovp,a=zo.O_SERVER),this.optionsGrids.forEach(d=>{d.getScope()===s&&d.modifyIPOption(a,s,l)}),t?null:{ipNetmaskValidator:!0}}constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,T,A),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.fwcUserService=s,this.fwcFirewallService=a,this.fwcObjectService=l,this.fwcObjectTreeService=c,this.fwcVpnService=d,this.inputDataService=h,this.fwcErrorPipe=_,this.translate=C,this.confirmationService=I,this.utilService=b,this.fwcEventService=E,this.messageService=R,this.store=T,this.router=A,this.restrictionsReadOnly=!1,this.ObjectTypes=O,this.CACertTypes=pm,this.OptionScope=pe,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.dependencies=null,this.FirewallOpsIcons=Cc,this.operationQueue=[],this.operationStatus={},this.pauseProcess=!1,this.disableButtons=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.NodeTypes=M,this.alive=!0,this.lastValidGridValue=null,this.originalAddress="",this.originalNetmask="",this.allowBlurValidation=!1,this.isClient=!1,this.createDialog(this.translate.instant("VPN.PANEL.TITLE"),"fwci2-openvpn",ri.OVCONFIG_PANEL)}ngOnInit(){this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.store.pipe(yt(()=>this.alive),Cn(na.selectDialogUuidsToReload)).subscribe(e=>{e&&e.find(t=>t===this.dialogUUID)&&this.reloadPanel()}),this.initialFormValue=this.formModel?.getRawValue(),this.itemSelectedService.getItem().pipe(yt(()=>this.alive)).subscribe(e=>B(this,null,function*(){if(!(e.obj_type!=O.OBJ_OPENVPN_CONFIG_SER&&e.obj_type!=O.OBJ_OPENVPN_CONFIG_CLI&&e.obj_type!=O.OBJ_PREFIX_FOLDER&&e.obj_type!=O.OBJ_OPENVPN_PREFIX||e.statusAction||e._onlySelectInTree)){if(this.resetProperties(),e.parent_type==O.OBJ_CLUSTER){let t;if(t=yield this.getClusterMasterFirewall(e.parent_id),t)e.firewall=t.id;else{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CLUSTER.ERROR_MASTER_TEXT",{name:e.parent_name})});return}}else e.firewall=e.parent_id;if(e.deleteAction)this.onItemDelete(e);else if(e.configFileAction)this.onItemGetFile(e);else if(e.installAction||e.syncCCDAction||e.uninstallAction||e.syncPendingCCDAction){let t=this.utilService.createDynamicComponentRef(fo),r=t.instance;r.setDynamicComponentRef(t),this.communicationSubscription=r.socketEventEmitter.subscribe(o=>{o=="connected"&&this.onItemManage(e),this.communicationSubscription.unsubscribe()}),r.checkConnection()}else if(e.newPrefixAction||e.editPrefixAction||e.deletePrefixFolderAction)this.managePrefix(e);else if(e.whereUsedAction)this.showWhereUsed(e);else if(e.blockVPNAction||e.unblockVPNAction)this.blockUnblockVPNConnection(e);else if(Array.isArray(e._fwcChildClientNodes)&&e._fwcChildClientNodes.length){let t=[];e._fwcChildClientNodes.forEach(o=>{t.find(s=>s.id===o.id_obj)||t.push({id:o.id_obj,text:o.name})});let r={header:this.translate.instant("VPN.CONFIG.CLI_CLONE.HEADER"),helpText:this.translate.instant("VPN.CONFIG.CLI_CLONE.TEXT"),modal:!0,formControls:[{name:"clientConfId",label:this.translate.instant("VPN.CONFIG.HEADER_CLI"),type:"select",options:t,placeholder:this.translate.instant("VPN.CONFIG.CLI_CLONE.NO_CLONE"),required:!1}],onAccept:o=>{if(o)if(o.clientConfId)e._fwcObjId=o.clientConfId,this.onItemSelect(e,!0);else{let s=oe({},e);delete s._fwcChildClientNodes,this.onItemSelect(s)}}};this.inputDataService.setInputData(r)}else this.onItemSelect(e)}}))}ngOnDestroy(){super.ngOnDestroy()}startTimeoutHandler(){this.timeoutTimer=setTimeout(()=>{this.eventsSubscription.unsubscribe(),this.doTimeoutOp()},dK)}refreshTimeoutHandler(){clearTimeout(this.timeoutTimer),this.startTimeoutHandler()}reloadPanel(){if(this.objectToDelete||this.objectToSearchWU){if(this.displayDialog||this.dialogMinified){if(this.objectToDelete){let e=Object.assign({},this.objectToDelete),t=this.itemSelectedService.getActualLastMinifiedDialogId();this.resetProperties(),this.onItemDelete(e),this.dialogId==t&&(this.showDialog(),this.itemSelectedService.setLastMinifiedDialogId(void 0))}else if(this.objectToSearchWU){let e=Object.assign({},this.objectToSearchWU);this.resetProperties(),this.showWhereUsed(e)}}this.store.dispatch(on.reloadDialogFinished({dialogUuid:this.dialogUUID}))}}resetProperties(){this.formModel&&this.formModel.reset(),this.savingData=!1,this.loadingData=!1,this.disableButtons=!1,this.object=this.objectToDelete=this.objectToRetrieve=this.objectToManage=this.objectToSearchWU=this.configOrPrefixToDelete=null,this.remoteOptions=[],this.errorMsg=null,this.dependencies=null,this.deleteMsg=null}getFirstAvailableIP(e,t){if(!Ks.isValid(e))throw new Error("IP address is invalid");let r,o,s=t.match(Pt.netmaskCIDRRegexp);if(s){if(r=parseInt(s[1],10),r<0||r>32)throw new Error("Netmask is invalid");o=Ks.IPv4.subnetMaskFromPrefixLength(r).toString()}else{if(!Pt.netmaskRegexp.test(t))throw new Error("Netmask is invalid");let _=Ks.IPv4.parse(t).prefixLengthFromSubnetMask();if(_===null||_<0||_>32)throw new Error("Netmask is invalid");r=_,o=t}let a=`${e}/${r}`,l=Ks.IPv4.networkAddressFromCIDR(a);if(r>=32)throw new Error("Netmask is invalid");let c=l.octets.slice();return c[3]+=1,`${Ks.fromByteArray(c).toString()} ${o}`}updateAddressOptionFromInputs(){let e=this.formModel?.get("_ipobj_address"),t=this.formModel?.get("_ipobj_netmask"),r=e?.value?.trim()||"",o=t?.value?.trim()||"";if(this.object?.obj_type===O.OBJ_OPENVPN_CONFIG_CLI){if(!r){this.clearIPFromGrid(),this.lastValidGridValue=null,this.formModel?.updateValueAndValidity();return}if(!(r?this.appOptionsService.isValidIP(r):!1)){this.appOptionsService.setControlError(e,"invalidIP"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_INVALID"),this.formModel?.updateValueAndValidity();return}this.appOptionsService.clearControlErrors(e),(!this.lastValidGridValue||this.lastValidGridValue.ip!==r)&&(this.optionsGrids.forEach(C=>{C.getScope()===pe.ccd&&C.modifyIPOption(zo.O_CLIENT,pe.ccd,r)}),this.lastValidGridValue={ip:r,mask:""}),this.formModel?.updateValueAndValidity();return}let a=e?.touched,l=t?.touched;if((e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&!a&&e?.markAsTouched(),(t?.value!==this.originalNetmask||e?.value!==this.originalAddress)&&!l&&t?.markAsTouched(),!r&&!o){this.clearIPFromGrid(),this.lastValidGridValue=null,this.formModel?.updateValueAndValidity();return}let c=r?this.appOptionsService.isValidIP(r):!1,d=o?this.appOptionsService.isValidMask(o):!1;if(!c||!d){!c&&!d?(this.appOptionsService.setControlError(e,"bothInvalid"),this.appOptionsService.setControlError(t,"bothInvalid"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK_INVALID")):c?(this.appOptionsService.setControlError(t,"invalidMask"),this.appOptionsService.clearControlErrors(e),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.NETMASK_INVALID")):(this.appOptionsService.setControlError(e,"invalidIP"),this.appOptionsService.clearControlErrors(t),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_INVALID")),this.formModel?.updateValueAndValidity();return}try{let h=Ks.parse(r),_;if(/^\/\d{1,2}$/.test(o))_=`${r}${o}`;else{let z=Ks.IPv4.parse(o).prefixLengthFromSubnetMask();if(z===null||z<0||z>32)throw new Error("Invalid netmask");_=`${r}/${z}`}let[C,I]=Ks.parseCIDR(_),b=Ks.IPv4.networkAddressFromCIDR(`${C.toString()}/${I}`);if(h.toString()!==b.toString()){this.appOptionsService.setControlError(e,"notNetworkAddress"),this.appOptionsService.setControlError(t,"notNetworkAddress"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NOT_IN_NETWORK",{network:b.toString()}),this.formModel?.updateValueAndValidity();return}this.appOptionsService.clearControlErrors(e),this.appOptionsService.clearControlErrors(t);let E=this.getFirstAvailableIP(r,o);if((!this.lastValidGridValue||this.lastValidGridValue.ip!==r||this.lastValidGridValue.mask!==o)&&(this.optionsGrids.forEach(U=>{U.getScope()===pe.ovp&&U.modifyIPOption(zo.O_SERVER,pe.ovp,E)}),this.lastValidGridValue={ip:r,mask:o}),!a&&!l)return;(e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&(a||e?.markAsTouched(),l||t?.markAsTouched()),e?.value===this.originalAddress&&t?.value===this.originalNetmask&&!e?.errors&&!t?.errors&&(this.formModel?.markAsPristine(),e?.markAsPristine(),t?.markAsPristine())}catch(h){console.error("Error validating network address:",h)}this.formModel?.updateValueAndValidity()}clearIPFromGrid(){let e=this.object?.obj_type,t=null;e===O.OBJ_OPENVPN_CONFIG_CLI?t=pe.ccd:e===O.OBJ_OPENVPN_CONFIG_SER&&(t=pe.ovp),t&&this.optionsGrids.forEach(r=>{r.getScope()===t&&r.modifyIPOption(zo.O_SERVER,pe.ovp,"")})}checkOVPNConfigCanBeDeleted(e){return new Promise((r,o)=>{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e._fwcObjId};this.fwcVpnService.checkConfigRestrictions(s).subscribe({next:a=>{r(!0)},error:a=>{a.error&&a.error.restrictions?r(!1):o(a)}})})}onItemDelete(e,t){if(!e)return;let r,o,s;this.objectToDelete=e,this.loadingData=!0,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.deleteMsg=null,e.obj_type==O.OBJ_OPENVPN_CONFIG_SER||e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(r=this.fwcVpnService.checkConfigRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e._fwcObjId},s="VPN.CONFIG"):e.obj_type==O.OBJ_OPENVPN_PREFIX&&(r=this.fwcVpnService.checkOpenVPNPrefixRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj},s="VPN.OPENVPN_PREFIX"),r&&(this.showDialog(),t&&this.recenterDialog(),r(o).subscribe(a=>{this.okToDelete=!0,this.configOrPrefixToDelete=Object.assign({},e),this.deleteMsg={type:"warning",title:this.translate.instant(s+".DELETE_WARN.SUMMARY"),text:this.translate.instant(s+".DELETE_WARN.TEXT",{name:e._fwcObjName})},this.dependencies=null,this.okToDelete=!0,this.loadingData=!1},a=>{a.error&&a.error.restrictions?(this.dependencies=a.error.restrictions,this.deleteMsg={type:"error",title:this.translate.instant(s+".ERRORS.RESTR_ERROR.SUMMARY"),text:this.translate.instant(s+".ERRORS.RESTR_ERROR.TEXT",{name:e._fwcObjName})}):(this.errorMsg={type:"error",title:this.translate.instant(s+".ERRORS.DELETE_ERROR.SUMMARY"),text:this.fwcErrorPipe.transform(a)},this.dependencies={restrictionsError:!0}),this.loadingData=!1,this.recenterDialog()}))}onItemGetFile(e){if(!e)return;this.objectToRetrieve=e,this.loadingData=!0,this.showDialog();let t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e._fwcObjId};this.fwcVpnService.getConfigFile(t).subscribe({next:r=>{r.data?this.configFile=r.data.cfg:(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:r.error})},r.error&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r.error)})),this.loadingData=!1,this.recenterDialog()},error:r=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(r)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),this.loadingData=!1}})}onItemManage(e,t){if(!e)return;let r=e.id_obj,o,s,a,l=[],c=this.fwcUserService.getActualFwSelectedCloud();this.objectToManage=e,e.installAction?(this.configManageTranslateKey="VPN.CONFIG.INSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.installConfig.bind(this.fwcVpnService)):e.uninstallAction?(this.configManageTranslateKey="VPN.CONFIG.UNINSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.uninstallConfig.bind(this.fwcVpnService)):e.syncCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_STRINGS",this.configManageAPICall=this.fwcVpnService.syncConfigCCD.bind(this.fwcVpnService)):e.syncPendingCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_PENDING_STRINGS",this.configManageAPICall=this.fwcVpnService.syncConfigPendingCCD.bind(this.fwcVpnService)):this.configManageAPICall=null,this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.showDialog(),t&&this.recenterDialog(),this.channel_id=$r(),this.utilService.ioListenOnLogEvent(this.channel_id),this.startTimeoutHandler(),this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(d=>{this.refreshTimeoutHandler();let h=new bo(d),_;h.payload.type===Ne.MSG_ERROR&&(_=this.utilService.isCommunicationErrorStr(h.payload.message),this.pauseProcess=!0,this.operationWithErrors=!0,this.doTimeoutOp()),_?(this.continueButtonText=this.translate.instant("COMPILE.RETRY"),this.doTimeoutOp()):(this.log.addNewMessage(h),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"))}),e.parent_type==O.OBJ_CLUSTER?(a=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),s=e.parent_id,o=!0):e.parent_type==O.OBJ_FIREWALL&&(a=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),s=e.firewall,o=!1),a&&a(s,c).subscribe(d=>B(this,null,function*(){d.data&&d.data instanceof Array?l=d.data:d.data?(l=[],l.push(d.data)):l=[],this.operationQueue=[];let h;o&&(h={openvpn:r,clusterId:s,firewallId:s,firewallName:e._fwcClusterName,installState:Xt.FW_DISABLED,opInstalled:!1},this.operationQueue.push(Object.assign({},h)));let _=this.fwcUserService.getActualFwcUser().privateKey;for(let C=0;C<l.length;C++){let I=l[C],b=I.install_user,E=I.install_pass;try{b&&(b=yield this.utilService.openPGPDecrypt(b,_)),E&&(E=yield this.utilService.openPGPDecrypt(E,_))}catch{}h={clusterId:I.cluster,clusterName:e._fwcClusterName,isNode:!!I.cluster,openvpn:r,firewallId:l[C].id,firewallName:l[C].name,installState:Xt.FW_PENDING,opInstalled:!1,sshUser:b,sshPassword:E,installInterface:l[C].install_interface,installInterfaceName:l[C].interface_name,installIpobj:l[C].install_ipobj,installIpobjName:l[C].ip_name,installIpobjIP:l[C].ip,installCommunication:l[C].install_communication,installProtocol:l[C].install_protocol,installApikey:l[C].install_apikey,deleteAction:e.deleteAction},this.operationQueue.push(Object.assign({},h))}this.operationInProcessId=0,this.actualFirewallCompileSSHInputData=null,this.processOVPNOperation(!0)}),d=>{d.error&&d.error.fwcErr==1002||this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)}),this.loadingData=!1})}processOVPNOperation(e){let t;if(!this.pauseProcess&&(clearTimeout(this.timeoutTimer),this.operationQueue&&this.operationInProcessId<this.operationQueue.length)){let r=this.operationQueue[this.operationInProcessId];if(!r)return;if(this.operationWithErrors=!1,r.clusterId!==null&&r.clusterId!==void 0?t=this.translate.instant("COMPILE.INST_CLUSTER_NODE",{clusterName:r.clusterName,firewallName:r.firewallName}):t=this.translate.instant("COMPILE.INST_FW",{firewallName:r.firewallName}),r.installState==Xt.FW_PENDING)if(r.installState=Xt.FW_PROCESSING,e||this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".START",{name:t}),Ne.MSG_INFO),r.installInterface&&r.installIpobj)if(r.installCommunication==="ssh"){let o={header:this.translate.instant("COMPILE.INST_SSH",{name:t}),helpText:this.translate.instant("COMPILE.INST_SSH_TEXT"),modal:!1,formControls:[{name:"openvpn",type:"hidden",value:r.openvpn},{name:"firewall_id",type:"hidden",value:r.firewallId},{name:"interface_name",label:this.translate.instant("COMPILE.FIELDS.INST_IF"),icon:"fwci-interface fwcGreen",type:"text",value:r.installInterfaceName,readonly:!0,halfSized:!0},{name:"ip_name",label:this.translate.instant("COMPILE.FIELDS.INST_IP"),icon:"fwci-address fwcBlue",type:"text",value:r.installIpobjName+" ("+r.installIpobjIP+")",readonly:!0,halfSized:!0},{name:"",label:"",type:"separator"},{name:"ssh_user",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_USER"),type:"text",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_user:r.sshUser,setFocus:!0},{name:"",label:"",type:"separator"},{name:"ssh_password",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS"),type:"password",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_password:r.sshPassword},{name:"deleteAction",type:"hidden",value:r.deleteAction},{name:"btnPauseProcess",label:this.translate.instant("COMPILE.PAUSE"),type:"button",icon:"fa fa-pause",class:"p-button-warning",value:0,readonly:!this.operationInProcessId}],onAccept:this.manageConfig.bind(this)};this.disableButtons=!0,this.inputDataService.setInputData(o);return}else{let o={openvpn:r.openvpn,firewall_id:r.firewallId,interface_name:r.installInterfaceName,deleteAction:r.deleteAction,ip_name:void 0,ssh_user:void 0,ssh_password:void 0};this.disableButtons=!0,this.manageConfig(o)}else r.installState=Xt.FW_ERROR,setTimeout(()=>{this.confirmationService.confirm({key:"cdErrorFw",header:this.translate.instant("COMPILE.INST_SSH_ERROR"),message:this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName}),reject:()=>{this.doPauseProcess()},accept:()=>{let o=this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName});this.operationWithErrors=!0,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:t,error:o}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processOVPNOperation()}})},1);else this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processOVPNOperation(e)}}manageConfig(e){return B(this,null,function*(){let t,r,o;if(this.operationQueue&&this.operationInProcessId<this.operationQueue.length&&(r=this.operationQueue[this.operationInProcessId]),!(!r||!this.configManageAPICall))if(r.clusterId!==null&&r.clusterId!==void 0?t=`cluster ${r.clusterId} - firewall ${r.firewallId} (${r.firewallName})`:t=`firewall ${r.firewallId} (${r.firewallName})`,this.disableButtons=!1,e){if(this.actualFirewallCompileSSHInputData=e,e.btnPauseProcess){r.installState=Xt.FW_PENDING,this.doPauseProcess(!0);return}this.timeoutTimer&&clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(()=>{this.doTimeoutOp()},dK),this.log.startDataLoad();let s=this.fwcUserService.getActualFwcUser().publicKey,a=e.ssh_user,l=e.ssh_password;a&&(a=yield this.utilService.openPGPEncrypt(a,s)),l&&(l=yield this.utilService.openPGPEncrypt(l,s)),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e.openvpn,firewall:e.firewall_id,sshuser:a,sshpass:l},this.disableButtons=!0,this.communicationAPISubscription=this.utilService.fwcAPICallObservable(this.configManageAPICall,this.channel_id,o).subscribe({next:()=>{this.disableButtons=!1,r.installState=Xt.FW_OK,this.log&&this.log.stopDataLoad(),this.operationWithErrors?this.addMessageToLog(this.translate.instant("VPN.CONFIG.ERRORS.OPERATION_ERRORS"),Ne.MSG_ERROR):this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".COMPLETED"),Ne.MSG_OK),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.operationQueue&&this.operationInProcessId<this.operationQueue.length?this.processOVPNOperation():e.deleteAction&&(this.operationWithErrors?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ERROR_HEADER"),message:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ASK_DELETE"),acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),rejectLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.NO"),rejectVisible:!0,accept:()=>{this.onDeleteConfigurationOrPrefix()}}):this.onDeleteConfigurationOrPrefix()),clearTimeout(this.timeoutTimer)},error:c=>{this.disableButtons=!1;let d=this.utilService.isCommunicationError(c.error);d?(r.installState=Xt.FW_PENDING,this.addMessageToLog(d,Ne.MSG_ERROR),this.continueButtonText=this.translate.instant("COMPILE.RETRY")):(c.error.fwcErr==9e3?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR.SSH_FORBIDDEN"),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK")}):(r.installState=Xt.FW_ERROR,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:t,error:c.error}),Ne.MSG_ERROR)),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.actualFirewallCompileSSHInputData=null),this.log.stopDataLoad(),this.operationInProcessId<this.operationQueue.length-1?this.doPauseProcess():clearTimeout(this.timeoutTimer)}})}else r.installState=Xt.FW_WARNING,this.addMessageToLog(this.translate.instant("COMPILE.INST_WARNING",{name:t}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processOVPNOperation()})}doTimeoutOp(){clearTimeout(this.timeoutTimer),this.pauseProcess=!0,this.loadingData=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_TIMEOUT"),Ne.MSG_WARNING))}doPauseProcess(e){this.pauseProcess=!0,this.loadingData=!1,clearTimeout(this.timeoutTimer),e&&this.addMessageToLog(this.translate.instant("COMPILE.WARN_PAUSE"),Ne.MSG_WARNING)}doContinueProcess(){this.pauseProcess=!1,this.processOVPNOperation()}onItemSelect(e,t){return B(this,null,function*(){if(!e)return;this.loadingData=!0,this.showDialog();let r=e._fwcObjId,o=e.obj_type;if(e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI){this.headerTitle=this.translate.instant("VPN.CONFIG.HEADER_CLI"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.IP_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP");let s=yield this.loadIPObjects(),a=yield this.loadDNSObjects();if(!s||!a)return;this.remoteOptions=[],this.remoteOptions.push(s),this.remoteOptions.push(a)}else this.headerTitle=this.translate.instant("VPN.CONFIG.HEADER_SER"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.NETMASK_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK");if(r===void 0&&o!==void 0){let s=Object.assign({},e);if(s.obj_type==O.OBJ_OPENVPN_CONFIG_CLI){s.options=Wt(hB).concat(Wt(fB));let a={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e.vpn},l=yield this.getFirstFreeIP(a),c="",d="";l&&(c=l.ip,d=l.netmask);let h=this.getOption(s.options,zo.O_CLIENT);s._ipobj_address=c,s._ipobj_netmask=d,h.arg=c+" "+d,s.openvpn=e.vpn}else s.options=Wt(pv);this.createForm(s,!0),s.obj_type==O.OBJ_OPENVPN_CONFIG_CLI&&!t&&setTimeout(()=>{let a=document.querySelector("button .fa-search")?.parentElement;a&&a.click()},300),this.loadingData=!1}else{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:r},a;e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?a=zo.O_CLIENT:a=zo.O_SERVER,this.fwcVpnService.getConfig(s).subscribe({next:l=>B(this,null,function*(){if(l.data){let c=Object.assign({},l.data);c.fwcloud=s.fwcloud,c.obj_type=e.obj_type,c.parent_type=e.parent_type,c.parent_name=e.parent_name,c._fwcParentConfigName=e._fwcParentConfigName,t?(c.crt=e.crt,c._fwcCrtName=e._fwcCrtName,c._fwcObjId=void 0,c.node_id=e.node_id):(c._fwcCrtName=e._fwcObjName,c._fwcObjId=r);let d=this.getOption(c.options,a);d?this.fwcVpnService.getConfigIPObjects(s).subscribe(h=>B(this,null,function*(){let _=h.data,C=_.filter(I=>I.id==d.ipobj);if(C.length){if(e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI&&t){let b={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:e.vpn};this.isClient=!0;let E=yield this.getFirstFreeIP(b),R="",T="";E&&(R=E.ip,T=E.netmask);let A=this.getOption(c.options,zo.O_CLIENT);c._ipobj_address=R,c._ipobj_netmask=T,A.arg=R+" "+T}else{let b=C[0];c._ipobj_name=b.name,c._ipobj_address=b.address,c._ipobj_netmask=b.netmask,c._ipobj_id=b.id}let I=this.appOptionsService.convertToStandardNetmask(c._ipobj_netmask);d.arg=c._ipobj_address+" "+I,d.readonly=!0}if(e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI){let I=c.options.filter(b=>b.name=="remote");I.length&&(I.forEach(b=>{for(let E=0;E<_.length;E++){let R=_[E];if(b.ipobj==R.id){let T;R.type==O.OBJ_ADDRESS?T=R.address:R.type==O.OBJ_DNS&&(T=R.name),T&&(b.arg=T+" "+b.arg);break}}}),this.disabledTreeRemoteOptions=I)}this.createForm(c,t),this.loadingData=!1,this.recenterDialog(),this.showDialog()}),h=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.TEXT",{error:this.fwcErrorPipe.transform(h)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(h)}),this.loadingData=!1}):(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.TEXT")},this.loadingData=!1)}else l.error&&(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(l.error)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l.error)})),this.loadingData=!1}),error:l=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(l)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)}),this.loadingData=!1}})}})}loadIPObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-ipobjects fwcBlue",value:this.translate.instant("NODE_TYPES.OIA"),items:[]},t(o)}),e}loadDNSObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-firewall fwcBlue",value:"DNS",items:[]},t(o)}),e}createForm(e,t){if(!e)return;e.options.forEach(a=>{pK.findIndex(l=>a.name==l)!=-1&&(a.required=!0,a.readonly=!0)}),this.formModel=new rr({fwcloud:new ve(e.fwcloud),openvpn:new ve(e.openvpn),firewall:new ve(e.firewall,Pe.required),crt:new ve(e.crt,Pe.required),node_id:new ve(e.node_id),comment:new ve(e.comment),options:new Hr(this.createOVPNOptions(e.options))});let r=`VPN-${e.parent_name}-${e._fwcCrtName}`;if(e.obj_type==O.OBJ_OPENVPN_CONFIG_SER){r=`LAN-VPN-${e._fwcCrtName}`;let a;e.install_name?a=e.install_name:(a=e._fwcCrtName,a=a.substr(0,59)+".conf"),this.formModel.addControl("install_dir",new ve(e.install_dir||"/etc/openvpn",[Pe.required,Pe.pattern(Pt.posixPathRegexp)])),this.formModel.addControl("install_name",new ve(a,[Pe.required,Pe.pattern(Pt.posixFilenameRegexp)]))}else e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI&&(this.formModel.controls.openvpn.setValue(e.openvpn),this.formModel.addControl("_remote_options",new Hr(this.createOVPNOptions(e.options,"remote"))));let o=e._ipobj_name||r;o=o.substr(0,64),this.formModel.addControl("_ipobj_id",new ve(e._ipobj_id)),this.formModel.addControl("_ipobj_name",new ve(o,[Pe.required,Pe.pattern(Pt.nameRegExp)])),this.formModel.addControl("_ipobj_address",new ve(e._ipobj_address,[Pe.required]));let s=this.appOptionsService.convertToStandardNetmask(e._ipobj_netmask);this.formModel.addControl("_ipobj_netmask",new ve({value:s,disabled:e.obj_type===O.OBJ_OPENVPN_CONFIG_CLI},{validators:[Pe.required],updateOn:"blur"})),t&&this.formModel.markAsDirty(),this.formModelRemote=new rr({id_obj:new ve(void 0,[Pe.required]),obj_type:new ve(void 0,[Pe.required]),remote_port:new ve(1194,[Pe.required,Pe.min(0),Pe.max(65535)])}),this.object=e}requiresArgValidation(e,t){return!!t&&pK.includes(e)}createOVPNOptions(e,t){let r=[];for(let o of e)if(!t||o.name===t){let s=new rr({name:new ve(o.name,Pe.required),arg:new ve(o.arg),ipobj:new ve(o.ipobj),scope:new ve(o.scope),comment:new ve(o.comment)});this.requiresArgValidation(o.name,t)&&s.controls.arg.setValidators(Pe.required),r.push(s)}return r}revalidateForm(e){for(let t in this.formModel.controls)(!e||e==t)&&(this.formModel.controls[t].updateValueAndValidity(),this.formModel.controls[t].markAsTouched())}onCancel(e){!e&&this.formModel&&!this.formModel.pristine&&this.formModel.valid?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("VPN.PANEL.MSG_EXIT"),accept:()=>{this.onCancel(!0)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):(this.hideDialog(),this.optionsGrids.forEach(t=>{t.clearOptions()}),this.log&&this.log.clearMessages(),this.operationQueue=[],this.operationInProcessId=void 0,this.actualFirewallCompileSSHInputData=null,this.pauseProcess=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.objectToManage&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:this.objectToManage.container}),this.resetProperties())}checkForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModel.valid&&(e.target.blur(),this.onSave())}onSave(e=0){return B(this,null,function*(){if(!this.object)return;let t=[];this.optionsGrids.forEach(_=>{let C=_.getOptions();t=t.concat(C)});for(let _=0;_<t.length;_++)t[_].name&&!t[_].name.length&&delete t[_];t=Wt(t),t.forEach(_=>{if(_.name=="remote"){let C=/\s*(\d+)$/.exec(_.arg),I;C&&(I=C[1],_.arg=I)}}),this.formModel.removeControl("options"),this.formModel.addControl("options",new Hr(this.createOVPNOptions(t)));let r={},o={};for(let _ in this.formModel.controls)r[_]=this.formModel.controls[_].value!==null&&this.formModel.controls[_].value!==void 0?this.formModel.controls[_].value:void 0;let s=this.appOptionsService.convertToStandardNetmask(r._ipobj_netmask);o={id:r._ipobj_id,type:void 0,fwcloud:r.fwcloud,name:r._ipobj_name,address:r._ipobj_address,netmask:s,ip_version:4,node_parent:void 0,node_order:1,node_type:void 0,force:e};let a,l,c;this.object.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(o.type=O.OBJ_ADDRESS,o.node_type=M.OBJ_ADDRESS,a=M.FOLDER_ADDRESSES,l=pe.ccd,c=zo.O_CLIENT):this.object.obj_type==O.OBJ_OPENVPN_CONFIG_SER&&(o.type=O.OBJ_NETWORK,o.node_type=M.OBJ_NETWORK,a=M.FOLDER_NETWORKS,l=pe.ovp,c=zo.O_SERVER),delete r._ipobj_id,delete r._ipobj_address,delete r._ipobj_name,delete r._ipobj_netmask,delete r._remote_options;let d,h;if(this.object._fwcObjId===void 0){d=this.fwcVpnService.newConfig.bind(this.fwcVpnService);let _=yield this.getParentId(a);if(_==-1){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK"),detail:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK_PARENT_NODE")}),this.loadingData=!1;return}this.object.obj_type==O.OBJ_OPENVPN_CONFIG_SER?(h=this.translate.instant("VPN.CONFIG.NEW_SERVER_CFG_OK"),o.node_parent=_):h=this.translate.instant("VPN.CONFIG.NEW_CLIENT_CFG_OK")}else r.openvpn=this.object._fwcObjId,delete o.node_order,delete o.node_type,delete r.firewall,delete r.crt,d=this.fwcVpnService.updateConfig.bind(this.fwcVpnService),this.object.obj_type==O.OBJ_OPENVPN_CONFIG_SER?h=this.translate.instant("VPN.CONFIG.UPDATE_SERVER_CFG_OK"):h=this.translate.instant("VPN.CONFIG.UPDATE_CLIENT_CFG_OK");this.savingData=!0,this.manageNetworkIPObject(o).then(_=>{let C;_.data&&(C=_.data.insertId),this.modifyOption(r.options,c,void 0,C),this.clearOptionsArgs(r.options),this.utilService.fwcAPICall(d,r).then(I=>{let b=I.data&&I.data.insertId?I.data.insertId:r.openvpn,E={container:qe.C_FIREWALLS_CONDENSED,_fwcObjId:b,_fwcObjType:this.object.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(E),E.container=qe.C_FIREWALLS,this.itemSelectedService.setModifiedItem(E),I.data&&I.data.fw_status&&this.store.dispatch(eo.updateFwStatus({item:I.data.fw_status})),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:h}),this.savingData=!1,this.hideDialog(),this.resetProperties()}).catch(I=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)}),this.savingData=!1})},_=>{_.error&&_.error.fwcErr!=1003&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(_)}),this.savingData=!1})})}getParentId(e){let t;return t=new Promise((r,o)=>{this.fwcObjectTreeService.getNodes(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a=-1;s.data&&s.data.length&&(a=s.data[0].id),r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(-1)})}),t}getClusterMasterFirewall(e){let t;return t=new Promise((r,o)=>{this.fwcFirewallService.getClusterMasterNode(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a;a=s.data,r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(void 0)})}),t}getFirstFreeIP(e){return new Promise(t=>{this.fwcVpnService.getVPNLanNextFreeIP(e).subscribe({next:r=>{t(r.data)},error:r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),t(void 0)}})})}modifyOption(e,t,r,o){let s=e.find(a=>a.name==t);s&&(r&&(s.arg=r),o!=null&&(s.ipobj=o))}getOption(e,t){return e.find(r=>r.name==t)}clearOptionsArgs(e){e.forEach(t=>{t.ipobj!==void 0&&t.ipobj!==null&&t.name!="remote"&&(t.arg="")})}manageNetworkIPObject(e){let t;return t=new Promise((r,o)=>{let s;if(e.id===void 0)s=this.fwcObjectService.newObject.bind(this.fwcObjectService);else{if(this.formModel.controls._ipobj_address.pristine&&this.formModel.controls._ipobj_netmask.pristine){r({data:void 0});return}s=this.fwcObjectService.updateObject.bind(this.fwcObjectService)}this.utilService.fwcAPICall(s,e).then(a=>{r(a)}).catch(a=>{a.error.fwcErr==1003&&this.confirmDuplicateOVPNOperation(a),o(a)})}),t}updateIPOnGrid(e){let t=this.formModel.controls._ipobj_address.value,r="",o,s,a;this.object.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(t.match(Pt.ipV4Regexp)&&(a=t),o=pe.ccd,s=zo.O_CLIENT):this.object.obj_type==O.OBJ_OPENVPN_CONFIG_SER&&(this.formModel.controls._ipobj_netmask&&(r=this.formModel.controls._ipobj_netmask.value),t.match(Pt.ipV4Regexp)&&r.match(Pt.netmaskRegexp)&&(a=t.trim()+" "+r.trim()),o=pe.ovp,s=zo.O_SERVER),a&&this.optionsGrids.forEach(l=>{l.getScope()===o&&l.modifyIPOption(s,o,a)})}confirmDuplicateOVPNOperation(e){let t="",r=[];if(e.data&&e.data.length){r=e.data,t="<ul>";for(let o=0;o<r.length;o++)t+="<li><strong>"+r[o].name+"</strong> ("+r[o].id+") </li>";t+="</ul>"}this.confirmationService.confirm({header:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.SUMMARY"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.TEXT",{objects:t}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.onSave(1)}})}onDownloadConfigFile(){let e="";if(!this.objectToRetrieve)return;if(this.objectToRetrieve._fwcObjType==O.OBJ_OPENVPN_CONFIG_SER)e=this.objectToRetrieve._fwcObjName?this.objectToRetrieve._fwcObjName.replace(/[^a-z0-9]/gi,"_"):"OpenVPN_Server",e+=".conf";else if(this.objectToRetrieve._fwcObjType==O.OBJ_OPENVPN_CONFIG_CLI){let r=[];r.push(this.fwcUserService.getActualFwcUser().selectedFwCloudName||"FWCLOUD"),r.push(this.objectToRetrieve._fwcFwName||"FW"),r.push(this.objectToRetrieve._fwcObjName||"OpenVPN_Client"),r=r.map(o=>o.replace(/[^a-z0-9\-]/gi,"_")),e=r.join("-"),e+=".ovpn"}let t=new Blob([this.configFile],{type:"text/plain;charset=utf-8"});(0,uK.saveAs)(t,e)}onCopyConfigFile(){this.txtConfigFile&&(this.txtConfigFile.nativeElement.select(),document.execCommand("copy"),this.txtConfigFile.nativeElement.setSelectionRange(0,0),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("VPN.CONFIG.CLIPBOARD.COPIED_OK")}))}onProcessDeleteAction(){if(this.configOrPrefixToDelete)if(this.configOrPrefixToDelete.obj_type==O.OBJ_OPENVPN_CONFIG_SER||this.configOrPrefixToDelete.obj_type==O.OBJ_OPENVPN_CONFIG_CLI)if(this.alsoUninstallConfig){this.objectToDelete=null,this.configOrPrefixToDelete.uninstallAction=!0;let e=this.utilService.createDynamicComponentRef(fo),t=e.instance;t.setDynamicComponentRef(e),this.communicationSubscription=t.socketEventEmitter.subscribe(r=>{r=="connected"&&this.onItemManage(this.configOrPrefixToDelete,!0),this.communicationSubscription.unsubscribe()}),t.checkConnection()}else this.onDeleteConfigurationOrPrefix();else this.onDeleteConfigurationOrPrefix()}onDeleteConfigurationOrPrefix(){if(!this.configOrPrefixToDelete)return;let e,t,r,o=this.configOrPrefixToDelete;o.obj_type==O.OBJ_OPENVPN_CONFIG_SER||o.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(e=this.fwcVpnService.deleteConfig.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:this.configOrPrefixToDelete._fwcObjId},r="VPN.CONFIG"):o.obj_type==O.OBJ_OPENVPN_PREFIX&&(e=this.fwcVpnService.deleteOpenVPNPrefix.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:o.id_obj},r="VPN.OPENVPN_PREFIX"),e&&(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(r+".DELETING",{name:"OpenVPN"}),Ne.MSG_INFO),this.utilService.fwcAPICall(e,t).then(s=>{let a=Object.assign({},this.configOrPrefixToDelete);a._fwcTreeAction=mi.DELETE_ITEM,s.data&&s.data.length&&(a.fw_status=s.data),this.itemSelectedService.setModifiedItem(a),this.log||(this.hideDialog(),this.resetProperties()),o.obj_type==O.OBJ_OPENVPN_CONFIG_SER||o.obj_type==O.OBJ_OPENVPN_CONFIG_CLI?(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.CONFIG.DELETE_SUCCESS")}),this.addMessageToLog(this.translate.instant("VPN.CONFIG.DELETE_SUCCESS"),Ne.MSG_OK)):this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.OPENVPN_PREFIX.DELETE.OK")})}).catch(s=>{let a;a=this.translate.instant(r+".ERRORS.DELETE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(s)}),this.errorMsg={type:"error",title:this.translate.instant(r+".ERRORS.DELETE_ERROR.SUMMARY"),text:a},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),this.log&&this.addMessageToLog(a,Ne.MSG_ERROR)}))}showRestrictions(e,t){}hideRestrictions(e){}managePrefix(e){let t,r,o,s,a,l,c,d;if(e)if(e.deletePrefixFolderAction){let h={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj};if(e.obj_type==O.OBJ_PREFIX_FOLDER)l=this.fwcVpnService.checkPrefixFolderRestrictions.bind(this.fwcVpnService),c=this.fwcVpnService.deletePrefixFolder.bind(this.fwcVpnService),a="VPN.PREFIX_FOLDER";else return;l(h).subscribe(_=>{this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant(a+".DELETE.ASK",{name:e._fwcObjName}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.utilService.fwcAPICall(c,h).then(C=>{if(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant(a+".DELETE.OK")}),e._fwcTreeAction=mi.DELETE_ITEM,this.itemSelectedService.setModifiedItem(e),e.container!=qe.C_FIREWALLS_CONDENSED){let I={_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED};this.itemSelectedService.setModifiedItem(I)}}).catch(C=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(C)})})}})},_=>{_.error&&_.error.restrictions?(this.dependencies=_.error.restrictions,this.confirmationService.confirm({header:this.translate.instant(a+".DELETE.RESTR_HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(a+".DELETE.RESTR_TEXT",{name:e._fwcObjName})})):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(_)})})}else{let h,_,C={[O.OBJ_PREFIX_FOLDER]:[this.fwcVpnService.editPrefixFolder.bind(this.fwcVpnService),this.fwcVpnService.newPrefixFolder.bind(this.fwcVpnService)],[O.OBJ_OPENVPN_PREFIX]:[this.fwcVpnService.editOpenVPNPrefix.bind(this.fwcVpnService),this.fwcVpnService.newOpenVPNPrefix.bind(this.fwcVpnService)]};if(e.obj_type==O.OBJ_PREFIX_FOLDER)h=e.id_obj,a="VPN.PREFIX_FOLDER";else if(e.obj_type==O.OBJ_OPENVPN_PREFIX)_=e.id_obj,a="VPN.OPENVPN_PREFIX";else return;if(e.editPrefixAction)t=e._fwcObjName,r=e.id_obj,o=this.translate.instant(a+".EDIT.HEADER"),s=this.translate.instant(a+".EDIT.TEXT"),C[e.obj_type]&&C[e.obj_type][0]&&(d=C[e.obj_type][0]);else if(e.newPrefixAction)o=this.translate.instant(a+".NEW.HEADER"),s=this.translate.instant(a+".NEW.TEXT"),C[e.obj_type]&&C[e.obj_type][1]&&(d=C[e.obj_type][1]);else return;let I={header:o,helpText:s,formControls:[{name:"container",type:"hidden",value:e.container},{name:"id",type:"hidden",value:r},{name:"obj_type",type:"hidden",value:e.obj_type},{name:"ca",type:"hidden",value:h},{name:"orig_name",type:"hidden",value:t},{name:"name",label:this.translate.instant(a+".NAME"),type:"text",required:!0,value:t},{name:"openvpn",type:"hidden",value:_},{name:"translateKey",type:"hidden",value:a},{name:"apiCall",type:"hidden",value:d}],onAccept:this.onManagePrefix.bind(this)};this.inputDataService.setInputData(I)}}onManagePrefix(e){if(e){if(e.name==e.orig_name)return;let t,r,o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),name:e.name},s;t=e.translateKey,r=e.apiCall,e.id?(o.prefix=e.id,s=this.translate.instant(t+".EDIT.OK")):(o.ca=e.ca,o.openvpn=e.openvpn,s=this.translate.instant(t+".NEW.OK")),this.utilService.fwcAPICall(r,o).then(a=>{let l=a.data&&a.data.insertId?a.data.insertId:e.id;this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:s});let c={container:e.container,_fwcObjName:e.name,_fwcObjId:l,_fwcObjType:e.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(c),e.container!=qe.C_FIREWALLS_CONDENSED&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED}),this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_OBJECTS}),this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]}))}).catch(a=>{let l,c;a.error&&(a.error.fwcErr==1003?(l=this.translate.instant(t+".ERRORS.ERROR_DUP.SUMMARY"),c=this.translate.instant(t+".ERRORS.ERROR_DUP.TEXT")):a.error.fwcErr==5001?(l=this.translate.instant("VPN.OPENVPN_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.SUMMARY"),c=this.translate.instant("VPN.OPENVPN_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.TEXT")):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)})),c&&this.confirmationService.confirm({header:l,icon:"fa fa-exclamation-circle fwcRed iconBig",message:c,rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})})}}showWhereUsed(e){if(!e)return;this.objectToSearchWU=e;let t,r;r={fwcloud:this.fwcUserService.getActualFwSelectedCloud()},e.obj_type==O.OBJ_OPENVPN_PREFIX?(t=this.fwcVpnService.getOpenVPNWhereUsed.bind(this.fwcVpnService),r.prefix=e._fwcObjId):e.obj_type==O.OBJ_OPENVPN_CONFIG_CLI&&(t=this.fwcVpnService.getConfigWhereUsed.bind(this.fwcVpnService),r.openvpn=e._fwcObjId),this.showDialog(),t&&t(r).subscribe(o=>{let s=Object.assign({},o.data);s._fwcObjType=e.obj_type,this.objectToSearchWU._fwcObjectInfo=s,this.recenterDialog()},o=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.WHERE_USED.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(o)})}})}blockUnblockVPNConnection(e){let t=e._fwcObjId,r={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:t},o;this.fwcVpnService.getConfig(r).pipe(Yn(s=>{let a=s.data;Array.isArray(a.options)||(a.options=[]);let l,c=[];if(a.options.forEach(d=>{c.push({arg:d.arg,comment:d.comment,ipobj:d.ipobj,name:d.name,scope:d.scope})}),e.blockVPNAction){if(o="VPN.CONFIG.INFO.BLOCK_VPN",c.find(d=>d.name==="disable"))return vt(null);c.push({arg:"",comment:"",ipobj:null,name:"disable",scope:pe.ccd})}else if(o="VPN.CONFIG.INFO.UNBLOCK_VPN",c.find(d=>d.name==="disable"))c=c.filter(d=>d.name!=="disable");else return vt(null);return c=c.sort((d,h)=>d.scope-h.scope),l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),openvpn:a.id,options:c},bn(this.utilService.fwcAPICall(this.fwcVpnService.updateConfig.bind(this.fwcVpnService),l))})).subscribe({next:s=>{s===null||this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant(o+".SUMMARY"),detail:this.translate.instant(o+".TEXT")});let a=this.utilService.createDynamicComponentRef(fo),l=a.instance;l.setDynamicComponentRef(a),this.communicationSubscription=l.socketEventEmitter.subscribe(c=>{c=="connected"&&(e.installAction=!0,this.onItemManage(e)),this.communicationSubscription.unsubscribe()}),l.checkConnection()},error:s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.SUMMARY"),detail:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.TEXT")})}})}onAddRemoteOption(){if(!this.formModelRemote||!this.formModelRemote.valid)return;let e=this.formModelRemote.value,t=this.optionsGrids.find(o=>o.getScope()===pe.ovp);if(!t)return;let r=t.getOptions();for(let o=0;o<r.length;o++){let s=r[o];if(s.name==="remote"&&s.ipobj===e.id_obj){let a=/\s*(\d+)$/.exec(s.arg),l;if(a&&(l=a[1],e.remote_port===+l)){this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.ERRORS.EXISTING_REMOTE_ERROR.SUMMARY"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("VPN.CONFIG.ERRORS.EXISTING_REMOTE_ERROR.TEXT"),acceptLabel:"Ok",rejectVisible:!1});return}}}this.fwcObjectService.getObject(e.id_obj,this.fwcUserService.getActualFwSelectedCloud()).subscribe({next:o=>{if(!o.data)return;let s=o.data,a="",l="";e.obj_type==O.OBJ_ADDRESS&&(a=s.address),e.obj_type==O.OBJ_DNS&&(a=s.name),a+=" "+e.remote_port,s.if_name?(s.cluster_name?l+=`Cluster '${s.cluster_name}'`:s.firewall_name?l+=`Firewall '${s.firewall_name}'`:s.host_name&&(l+=`Host '${s.host_name}'`),l+=` - IF '${s.if_name}'`):l+=s.name;let c={name:"remote",scope:pe.ovp,arg:a,ipobj:e.id_obj,required:!0,readonly:!0},d=[];t.updateOrCreateIPOption(c),d=d.concat(t.getOptions()),this.formModel.controls._remote_options=new Hr(this.createOVPNOptions(d,"remote")),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity()},error:o=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(o)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)})}})}onRemoteIPObjectChange(e){!e||e.obj_type!=O.OBJ_ADDRESS&&e.obj_type!=O.OBJ_DNS||(this.formModelRemote.get("id_obj").setValue(e.id_obj),this.formModelRemote.get("obj_type").setValue(e.obj_type))}updateOptions(e){let t=[],r=[...this.formModel.get("options").value];if(this.optionsGrids.forEach(o=>{(!e||o.getScope()==e)&&(t=t.concat(o.getOptions()))}),t.length===r.length){let o=new Set(r.map(l=>l.name)),s=new Set(t.map(l=>l.name));if(!(o.size===s.size&&[...o].every(l=>s.has(l))))for(let l=0;l<t.length;l++){let c=t[l],d=r[l];d&&d.name!==c.name&&(c.name==="cipher"||c.name==="data-ciphers-fallback"?c.arg=this.optionsGrids.first.defaultCipher:c.name==="data-ciphers"?c.arg=this.optionsGrids.first.selectedOptionsDisplay:c.arg="")}}t.length&&(this.formModel.removeControl("options"),this.formModel.addControl("options",new Hr(this.createOVPNOptions(t))),this.formModel.controls._remote_options&&(this.formModel.removeControl("_remote_options"),this.formModel.addControl("_remote_options",new Hr(this.createOVPNOptions(t,"remote")))),this.formModel.updateValueAndValidity())}onOptionsChange(e){this.updateOptions(),e&&this.formModel.markAsDirty(),this.recenterDialog()}onOptionsDelete(e){e&&e.name=="remote"&&e.ipobj&&this.updateOptions(),this.formModel.markAsDirty()}onShowDialog(e){this.recenterDialog()}onHideDialog(e){}doStopProcess(){this.pauseProcess=!0,this.stopProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_STOP"),Ne.MSG_ERROR)),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.eventsSubscription&&(this.eventsSubscription.unsubscribe(),this.eventsSubscription=null)}allowOnlyNumbersAndDot(e){let t=/[0-9.]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}allowNumbersDotAndSlash(e){let t=/[0-9.\/]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(at),S(Dt),S(Vi),S(En),S(er),S(Cr),S(Ei),S(Ye),S(Jt),S(ft),S(dn),S(Kt),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ovconfig-panel"]],viewQuery:function(t,r){if(t&1&&(le(Zo,5),le(Sze,5),le(pr,5),le(tE,5)),t&2){let o;te(o=ie())&&(r.treeSelector=o.first),te(o=ie())&&(r.txtConfigFile=o.first),te(o=ie())&&(r.log=o.first),te(o=ie())&&(r.optionsGrids=o)}},inputs:{restrictionsReadOnly:"restrictionsReadOnly"},features:[et([Vi,En,Dt]),Se],decls:11,vars:14,consts:[["dlgOVConfigPanel",""],["txtConfigFile",""],["treeSelector",""],["styleClass","dlgFwcDialog fwcObjectDialog",3,"visibleChange","onShow","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[1,"grid"],[1,"grid","grid","grid-nogutter"],[3,"objectInfo","readOnly"],["styleClass","objectInfoTab"],["pTemplate","footer"],[1,"divFormHeader"],[1,"divHeaderButtons"],[1,"fwcWhite","fwcIconLeft"],[1,"fwci-edit","fwcOrange"],[1,"fwci-whereused","fwcOrange"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],[1,"col-12","divCentered"],[1,"col-12"],[3,"message"],[1,"fwcRestrictionsContainer"],[3,"onHideParent","onRefreshRestrictions","dependencies","readOnly"],[1,"col-12",2,"text-align","center"],["name","chkUninstallConfig","binary","true",3,"ngModelChange","ngModel","label"],[1,"col-12","divConfigFile"],["pInputTextarea","","rows","15","readonly",""],[1,"col-4"],[1,"divTableScroll"],[1,"tableFw","unstriped"],[1,"fwc-centered"],[3,"ngClass"],[1,"col-8"],[1,"fwcMenuIcon","fwci-cluster","fwcOrange"],[1,"fwcSepShort"],[1,"fwcMenuIcon","fwci-firewall","fwcBlue"],[3,"onHideParent","objectInfo","readOnly"],["leftIcon","fa fa-pencil",3,"header"],[1,"fwcObjectPanel"],[3,"formGroup"],[3,"keyup.enter","keyup.esc"],[1,"grid","grid-nogutter"],[1,"col-12","divOPHeader",2,"margin-bottom","10px"],[1,"col-6","grid","grid-nogutter"],[1,"p-inputgroup"],[1,"fwcBlue"],["pInputText","","type","text","readonly","",3,"value"],[1,"col-12","lg:col-6","padding-right",2,"padding-right","10px"],[3,"legend"],[1,"p-float-label",2,"margin-top","10px"],["pInputText","","maxlength","64","type","text","formControlName","_ipobj_name","name","_ipobj_name",3,"drop"],["for","_ipobj_name"],[1,"col-3"],["pInputText","","appAutofocus","","maxlength","45","type","text","formControlName","_ipobj_address","name","_ipobj_address",3,"drop","keypress","blur"],["for","_ipobj_address"],["pInputText","","maxlength","17","type","text","formControlName","_ipobj_netmask","name","_ipobj_netmask",3,"drop","keypress","blur"],["for","_ipobj_netmask"],["class","col-1 grid-nogutter","style","padding:0; width: 8%;",4,"ngIf"],[1,"col-12","lg:col-6",2,"padding-left","10px"],[1,"col-12","lg:col-6"],[1,"col-6",2,"padding-right","10px"],[1,"noVertPad","fwcBlue"],[3,"optionDeleted","dataChanges","options","scope"],[1,"col-12",2,"margin-top","1rem"],[1,"p-float-label"],["pInputText","","type","text","maxlength","255","formControlName","comment","name","comment",3,"drop"],["for","comment"],[1,"col-1","grid-nogutter",2,"padding","0","width","8%"],[1,"pi","pi-exclamation-circle","fwcOrange",3,"pTooltip","ngStyle"],[1,"grid",2,"max-height","fit-content","width","100%"],[1,"col-6",2,"margin-top","10px"],["pInputText","","type","text","formControlName","install_dir","name","install_dir",2,"font-family","monospace !important",3,"drop"],["for","install_dir"],["class","fwc-error err-no-margin",3,"ngStyle",4,"ngIf"],["pInputText","","type","text","maxlength","64","formControlName","install_name","name","install_name",2,"font-family","monospace !important",3,"drop"],["for","install_name"],["class","col-12",4,"ngIf"],[1,"fwc-error","err-no-margin",3,"ngStyle"],["legend","Remote"],[1,"grid",2,"width","100%"],[1,"col-6"],[3,"objectSelected","fwcloudId","fwTreeNodes","objectTreeNodes","selectableObjects","disabledObjects"],[1,"col-5"],["pInputText","","type","number","formControlName","remote_port","name","remote_port",3,"drop"],["for","remote_port"],[1,"col"],["pButton","","type","button","icon","fa fa-plus",1,"p-button-primary","fwcButtonHeight",2,"height","2.5rem",3,"click","disabled"],["class","col-12 grid grid-nogutter",4,"ngIf"],[1,"col-12","grid","grid-nogutter"],[1,"divLoadTemp",3,"ngStyle"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"click","disabled","label"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label","disabled"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"click","label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"click","label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",3,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(a){return y(o),w(r.onShowDialog(a))})("onHide",function(a){return y(o),w(r.onHideDialog(a))}),v(2,Bze,6,6,"ng-template",4)(3,Uze,3,0,"div",5)(4,jze,3,1,"div",5)(5,Kze,2,1)(6,$ze,5,1,"div",6)(7,Zze,17,6,"div",6)(8,eKe,1,2,"sts-fwc-object-wu",7)(9,dKe,58,33,"p-tabView",8)(10,SKe,7,11,"ng-template",9),g()}t&2&&(st(Ae(13,Eze)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(3),W(r.loadingData?3:-1),p(),W(r.errorMsg?4:-1),p(),W(r.objectToDelete&&!r.loadingData&&!r.errorMsg?5:-1),p(),W(r.objectToRetrieve&&!r.loadingData&&!r.errorMsg?6:-1),p(),W(r.objectToManage&&!r.loadingData&&!r.errorMsg?7:-1),p(),W(r.objectToSearchWU&&!r.loadingData&&!r.errorMsg?8:-1),p(),W(r.object&&r.formModel&&!r.loadingData&&!r.errorMsg?9:-1))},dependencies:[je,rt,De,Kn,Li,ud,Pi,zn,Jn,mn,$n,Qn,Yt,Ee,pt,or,cn,Xi,Qr,fd,hd,uu,Pa,pr,mg,gg,Fn,tE,Zo,Ag,gt,Sn],styles:[`.divConfigFile textarea{font-family:monospace!important;font-size:.8rem!important;min-height:18rem}.divOPHeader h6,.divOPHeader label{white-space:nowrap;font-family:Montserrat,sans-serif}.p-fieldset-content{display:flex;flex-direction:row;width:100%}body .p-fieldset{border:1px solid #c8c8c8;background-color:transparent;color:#333}body .p-corner-all{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.p-fieldset .p-fieldset-legend{border:1px solid transparent;background:none;font-weight:400}.p-fieldset .p-fieldset-legend-text{margin-left:15px;font-family:Montserrat,Arial,sans-serif}p-fieldset[legend=Remote] .p-fieldset-content{margin-top:10px}
`],encapsulation:2,data:{animation:[jc]}})}}return i})();var mK=No(Gc()),Fs=No(_c());var EKe=()=>({width:"70vw",maxHeight:"42rem"}),wk=i=>({display:i}),AKe=()=>["cn","allowedips"],xKe=i=>({visibility:i}),TKe=()=>({width:"1.7rem",height:"1.7rem"}),OKe=()=>({width:"60vw",maxHeight:"24rem"});function RKe(i,n){i&1&&(m(0,"span",19),P(1,"i",20),m(2,"span"),F(3),D(4,"translate"),g()()),i&2&&(p(3),$(N(4,1,"VPN.CONFIG.PEER_LIST")))}function PKe(i,n){i&1&&(m(0,"tr")(1,"th",21),F(2),D(3,"translate"),P(4,"p-sortIcon",22),g(),m(5,"th",23),F(6),D(7,"translate"),g()()),i&2&&(p(2),J(" ",N(3,2,"VPN.PANEL.FIELDS.CN")," "),p(4),J(" ",N(7,4,"VPN.PANEL.FIELDS.ALLOWED_IPS")," "))}function DKe(i,n){if(i&1){let e=L();m(0,"tr",24),k("click",function(r){let o=y(e).$implicit;return u().showClientOptionsDialog(o.id),w(r.stopPropagation())}),m(1,"td"),F(2),g(),m(3,"td",25),F(4),g()()}if(i&2){let e=n.$implicit,t=u();p(2),$(e.cn),p(2),J(" ",t.formatAllowedIps(e.allowedips)," ")}}function FKe(i,n){if(i&1){let e=L();m(0,"div",26),P(1,"p-progressSpinner"),g(),m(2,"button",27),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel(!0))}),g()}if(i&2){let e=u();f("ngStyle",ne(7,xKe,e.savingData?"visible":"hidden")),p(),st(Ae(9,TKe)),p(),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function kKe(i,n){if(i&1&&(m(0,"div",29),P(1,"i",20),m(2,"span"),F(3),g()()),i&2){let e=u(2);p(3),J("Peer: ",e.selectedClient==null?null:e.selectedClient.cn,"")}}function NKe(i,n){if(i&1){let e=L();m(0,"div",28)(1,"sts-fwc-wireguard-options-grid",30),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))}),g()()}if(i&2){let e=u(2);p(),f("options",e.selectedClientOptions)("scope",e.scope)}}function LKe(i,n){if(i&1){let e=L();m(0,"button",33),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onSave())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.selectedClient||!(e.clientOptions!=null&&e.clientOptions.length)||!e.allOptionsValid())}}function MKe(i,n){if(i&1){let e=L();v(0,LKe,2,4,"button",31),m(1,"button",32),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancel(!1))}),g()}if(i&2){let e=u(2);W(e.hasChanges?0:-1),p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CLOSE"))}}function VKe(i,n){if(i&1){let e=L();m(0,"p-dialog",2),Oe("visibleChange",function(r){y(e);let o=u();return Re(o.displayOptionsDialog,r)||(o.displayOptionsDialog=r),w(r)}),v(1,kKe,4,1,"ng-template",3)(2,NKe,2,2,"div",28)(3,MKe,3,4,"ng-template",17),g()}if(i&2){let e=u();st(Ae(5,OKe)),Te("visible",e.displayOptionsDialog),f("modal",!0),p(2),W(e.selectedClientOptions&&!e.isLoading?2:-1)}}var nE=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,T,A),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.fwcUserService=s,this.fwcFirewallService=a,this.fwcObjectService=l,this.fwcObjectTreeService=c,this.fwcVpnService=d,this.inputDataService=h,this.fwcErrorPipe=_,this.translate=C,this.confirmationService=I,this.utilService=b,this.fwcEventService=E,this.messageService=R,this.store=T,this.router=A,this.options=[],this.clientsUpdated=new X,this.optionDeleted=new X,this.optionsChanged=new X,this.validationStatus=new X,this.contextMenuStyle=[hs,ms,fs],this.wireguardClients=[],this.scope=3,this.showPeerDialog=!1,this.selectedServerId=null,this.isExpanded=[],this.clientOptions=[],this.displayOptionsDialog=!1,this.hasChanges=!1,this.createDialog(this.translate.instant("VPN.PANEL.WG_TITLE"),"fwci2-wireguard",ri.WIREGUARD_CONFIG_PANEL)}showDialog(e,t){this.serverId=t||null,this.wireguardClients=(e||[]).map((r,o)=>{let s=r.allowedips;return!s&&this.clientOptions[o]&&(s=this.clientOptions[o].find(l=>l.name==="AllowedIPs")?.arg||"-"),s||(s=this.wireguardClients.find(c=>c.id===r.id)?.find(c=>c.name==="AllowedIPs")?.arg||"-"),s=this.appOptionsService.getNormalizedAllowedIps({allowedips:s}),ke(oe({},r),{allowedips:s})}),this.wireguardClients.length>0&&(this.displayDialog=!0)}showClientOptionsDialog(e){return B(this,null,function*(){let t=this.wireguardClients.find(r=>r.id===e);this.selectedClient=ke(oe({},t),{allowedips:this.appOptionsService.getNormalizedAllowedIps(t)}),this.displayOptionsDialog=!1;try{yield this.loadClientOptions(this.serverId,t.id);let r=this.wireguardClients.findIndex(s=>s.id===t.id);this.selectedClientOptions=JSON.parse(JSON.stringify(this.clientOptions[r]||[]));let o=this.selectedClientOptions.find(s=>s.name==="AllowedIPs");o&&(o.arg=this.appOptionsService.normalizeFirstTo32(o.arg)),this.displayOptionsDialog=!0}catch(r){console.error("Error loading options:",r)}})}loadClientOptions(e,t){return B(this,null,function*(){let r={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e,wireguard_cli:t};try{let s=(yield this.utilService.fwcAPICall(this.fwcVpnService.getWireGuardClientOptions.bind(this.fwcVpnService),r)).data.data,a=this.fwcUserService.getActualFwcUser().privateKey,l="";if(s.publicKey)try{l=yield this.utilService.openPGPDecrypt(s.publicKey,a)}catch(A){console.error("Error decrypting PublicKey:",A),l=s.publicKey}let c=(s?.options||[]).filter(A=>A.name!=="Address").map(A=>oe({},A)),h=s?.options?.find(A=>A.name==="Address")?.arg?.trim().split("/")[0]||"",_=c.find(A=>A.name==="AllowedIPs"),C=_?.arg||"";!_&&h&&(C=`${h}/32`);let I=A=>A.trim(),b=C.split(",").map(I).filter(A=>A.length>0);b.length===0&&h&&b.push(`${h}/32`);let E=this.appOptionsService.normalizeFirstTo32(Array.from(new Set(b)).join(", ")),R=c.findIndex(A=>A.name==="AllowedIPs");c.unshift({name:"PublicKey",arg:l,scope:4,comment:null}),R>=0?c[R+1]=ke(oe({},c[R+1]),{arg:E}):c.push({name:"AllowedIPs",arg:E,scope:43,comment:null});let T=this.wireguardClients.findIndex(A=>A.id===t);return T!==-1&&(this.clientOptions[T]=[...c],this.wireguardClients[T]=ke(oe({},this.wireguardClients[T]),{allowedips:E})),c}catch(o){throw console.error("Error loading client options:",o),o}})}reloadWireGuardClients(e){return B(this,null,function*(){let t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e};try{let o=(yield Jc(this.fwcVpnService.getWireGuardClients(t))).data.data,s=yield Promise.all(o.map(a=>B(this,null,function*(){let c=(yield this.loadClientOptions(e,a.id)).find(d=>d.name==="AllowedIPs");return ke(oe({},a),{allowedips:c?.arg||a.allowedips})})));this.wireguardClients=s,this.clientsUpdated.emit(this.wireguardClients)}catch(r){console.error("Error reloading wireguardClients:",r)}})}onOptionsChange(e){if(!this.selectedClient)return;let t=this.wireguardClients.findIndex(r=>r.id===this.selectedClient.id);t>=0&&(this.clientOptions[t]=[...e]),this.selectedClientOptions=[...e],this.hasChanges=!0}onOptionsDelete(e){if(!this.selectedClient)return;let t=this.wireguardClients.findIndex(r=>r.id===this.selectedClient.id);t>=0&&(this.clientOptions[t]=this.clientOptions[t].filter(r=>!this.isSameOption(r,e)),this.selectedClientOptions=[...this.clientOptions[t]]),this.formModel?.markAsDirty()}isSameOption(e,t){return e.id===t.id&&e.name===t.name&&e.value===t.value}updateOptions(){this.optionsChanged.emit([...this.clientOptions])}onSave(){return B(this,null,function*(){if(!this.selectedClient||!this.wireguardClients||!this.clientOptions){this.savingData=!1;return}let e=this.wireguardClients.findIndex(_=>_.id===this.selectedClient.id);if(e===-1||!this.clientOptions[e]){this.savingData=!1;return}this.savingData=!0;let t=this.selectedClientOptions||[],o=(yield Promise.all(t.map(_=>B(this,null,function*(){return oe({name:_.name,arg:_.arg,scope:_.scope,comment:_.comment||null},Number.isInteger(Number(_.ipobj))&&{ipobj:Number(_.ipobj)})})))).filter(_=>_.name!=="PublicKey"&&_.name!=="PrivateKey"),s=o.find(_=>_.name==="AllowedIPs"),l=o.find(_=>_.name==="Address")?.arg?.trim()||"";if(s&&typeof s.arg=="string"){let _=s.arg.split(",").map(T=>T.trim()).filter(Boolean),C=T=>T.split("/")[0],I=C(l),b=_.filter(T=>C(T)!==I),E=Array.from(new Set(b)),R=[];l&&l.trim()!==""&&R.push(l.trim()),R.push(...E.filter(T=>T&&T.trim()!=="")),s.arg=R.join(", ")}let c=this.appOptionsService.getNormalizedAllowedIps({allowedips:s?.arg||""});this.wireguardClients[e]=ke(oe({},this.wireguardClients[e]),{allowedips:c});let d={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:this.serverId,wireguard_cli:this.selectedClient.id,options:o},h=this.fwcVpnService.updateWireGuardClientOptions.bind(this.fwcVpnService);try{this.savingData=!0;let _=yield this.updateClientOptions(h,d,e);return this.hasChanges=!1,_}catch(_){_.error&&_.error.fwcErr!=1003&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(_)})}finally{this.savingData=!1,this.hasChanges=!1,this.cd.detectChanges(),this.refreshDialog(),this.reloadWireGuardClients(this.serverId)}})}formatAllowedIps(e){if(!e)return"";let t=a=>a.trim(),r=a=>a.split("/")[0];return e.split(",").map(t).filter(a=>a.length>0).reduce((a,l)=>{let c=r(l);return a.some(d=>r(d)===c)||a.push(l),a},[]).join(", ")}updateClientOptions(e,t,r){return B(this,null,function*(){return new Promise((s,a)=>{this.utilService.fwcAPICall(e,t).then(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.CONFIG.UPDATE_CLIENT_CFG_OK")}),this.savingData=!1,this.hasChanges=!1,this.displayOptionsDialog=!1,this.reloadWireGuardClients(this.serverId),this.clientsUpdated.emit(this.wireguardClients),this.resetProperties(),s(l)}).catch(l=>{if(l.error){let c=JSON.parse(l.error.msg);if(c.errors){let h=Object.values(c.errors).flat().join(", <br>");this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(h)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c.message)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)});a(l),this.savingData=!1,this.hasChanges=!1})})})}resetProperties(){this.savingData=!1,this.loadingData=!1,this.object=null,this.formModel&&this.formModel.reset()}onCancel(e=!1,t){this.displayOptionsDialog=!1,e&&(this.displayDialog=!1),e&&(this.hideDialog(),this.log&&this.log.clearMessages(),this.hasChanges=!1,this.resetProperties())}validateOption(e){if(!e.arg&&e.name!=="Table")return{valid:!1,message:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.REQUIRED")};let t=Dp.wireGuardOptionValidator(e.name),r=new Vo(e.arg),o=t(r);if(!o)return{valid:!0};let s={invalidPresharedKey:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRESHARED_KEY"),invalidAddress:d=>this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ADDRESS",{ip:d}),invalidAllowedIPs:d=>this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ALLOWED_IPS",{ip:d}),invalidDNS:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_DNS"),invalidListenPort:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_LISTEN_PORT"),invalidMTU:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_MTU"),invalidTable:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_TABLE"),invalidEndpoint:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ENDPOINT"),invalidPersistentKeepalive:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PERSISTENT_KEEPALIVE"),invalidPreUp:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRE_UP"),invalidPostUp:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_POST_UP"),invalidPreDown:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRE_DOWN"),invalidPostDown:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_POST_DOWN"),invalidIpAddress:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_IP_ADDRESS"),invalidPort:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PORT"),invalidHostname:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_HOSTNAME"),invalidBase64:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_BASE64"),invalidCidr:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_CIDR")},a=Object.keys(o)[0],l=o[a]?.invalidIp,c=s[a];return{valid:!1,message:typeof c=="function"?c(l):c||this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_OPTION",{option:e.name})}}allOptionsValid(){return this.selectedClientOptions?this.selectedClientOptions.every(e=>this.validateOption(e).valid):!1}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(at),S(Dt),S(Vi),S(En),S(er),S(Cr),S(Ei),S(Ye),S(Jt),S(ft),S(dn),S(Kt),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-wireguard-peer-list"]],inputs:{options:"options"},outputs:{clientsUpdated:"clientsUpdated",optionDeleted:"optionDeleted",optionsChanged:"optionsChanged",validationStatus:"validationStatus"},features:[et([Vi,En,Dt]),Se],decls:25,vars:33,consts:[["inputSearch",""],["tabVpnStatusTable",""],["appendTo","body",3,"visibleChange","visible","modal"],["pTemplate","header"],[1,"col-12","divVpnStatusMain-table"],["styleClass","tbrHighlighted"],[1,"p-toolbar-group-left"],[1,"fwcBlue"],[1,"fa","fa-fw","fa-desktop","fwcOrange"],[1,"p-toolbar-group-right"],[1,"divVpnStatusMain-buttons"],["pButton","","type","button","icon","fa fa-search","tooltipPosition","bottom","showDelay","700",1,"p-button-success",2,"height","1.5rem",3,"click","pTooltip","ngStyle"],["type","text","pInputText","",3,"ngModelChange","input","placeholder","ngStyle","ngModel"],["pButton","","type","button","icon","fa fa-close","tooltipPosition","bottom","showDelay","700",1,"p-button-warning",3,"click","pTooltip","ngStyle"],[1,"col-12",2,"overflow","auto"],["columnResizeMode","expand","selectionMode","single","styleClass","optionsTable",3,"selectionChange","value","resizableColumns","selection","globalFilterFields"],["pTemplate","body"],["pTemplate","footer"],["appendTo","body",3,"visible","modal","style"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-share-alt","text-primary",2,"margin-left","10px"],["pSortableColumn","cn","pResizableColumn","",2,"width","10rem"],["field","cn"],["pResizableColumn",""],[3,"click"],[2,"max-width","60vw","overflow-wrap","break-word","word-break","break-all","white-space","normal","display","table-cell","vertical-align","top"],[1,"divLoadTemp",3,"ngStyle"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled","label"],[1,"gridContainer"],[1,"flex","items-center","gap-2"],[3,"optionDeleted","optionsChanged","options","scope"],["pButton","","type","button","icon","fa fa-save",1,"p-button-success",3,"label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"],["pButton","","type","button","icon","fa fa-save",1,"p-button-success",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),v(1,RKe,5,3,"ng-template",3),m(2,"div",4)(3,"p-toolbar",5)(4,"div",6)(5,"span",7),P(6,"i",8),F(7),D(8,"translate"),g()(),m(9,"div",9)(10,"div",10)(11,"button",11),D(12,"translate"),k("click",function(){y(o);let a=He(14);return r.vpnClientsDataShowFilter=!0,w(a.focus())}),g(),m(13,"input",12,0),D(15,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.vpnClientsDataFilter,a)||(r.vpnClientsDataFilter=a),w(a)}),k("input",function(){y(o);let a=He(20);return w(a.filterGlobal(r.vpnClientsDataFilter,"contains"))}),g(),m(16,"button",13),D(17,"translate"),k("click",function(){y(o);let a=He(20);return r.vpnClientsDataShowFilter=!1,r.vpnClientsDataFilter="",w(a.reset())}),g()()()(),m(18,"div",14)(19,"p-table",15,1),Oe("selectionChange",function(a){return y(o),Re(r.vpnClientSelected,a)||(r.vpnClientSelected=a),w(a)}),v(21,PKe,8,6,"ng-template",3)(22,DKe,5,2,"ng-template",16),g()()(),v(23,FKe,4,10,"ng-template",17)(24,VKe,4,6,"p-dialog",18),g()}t&2&&(st(Ae(25,EKe)),Te("visible",r.displayDialog),f("modal",!0),p(7),J(" ",N(8,17,"VPN.STATUS.FIELDS.CLIENTS"),""),p(4),Q("pTooltip",N(12,19,"VPN.STATUS.BUTTONS.SEARCH")),f("ngStyle",ne(26,wk,r.vpnClientsDataShowFilter?"none":"inline")),p(2),Q("placeholder",N(15,21,"VPN.STATUS.SEARCH")),f("ngStyle",ne(28,wk,r.vpnClientsDataShowFilter?"inline":"none")),Te("ngModel",r.vpnClientsDataFilter),p(3),Q("pTooltip",N(17,23,"VPN.STATUS.BUTTONS.CLEAR_SEARCH")),f("ngStyle",ne(30,wk,r.vpnClientsDataShowFilter?"inline":"none")),p(3),f("value",r.wireguardClients)("resizableColumns",!0),Te("selection",r.vpnClientSelected),f("globalFilterFields",Ae(32,AKe)),p(5),W(r.displayOptionsDialog?24:-1))},styles:[`.p-dialog-content{max-width:none}.divVpnStatusMain-buttons{display:flex;max-height:1.5rem;align-items:center;margin-top:5px}.gridContainer{max-width:60vw}
`],encapsulation:2,data:{animation:[jc]}})}}return i})();var vk=No(_c());var BKe=["routesTreeSelector"],UKe=["nameCell"],jKe=i=>({"max-width":i}),GKe=i=>({"background-color":i}),HKe=()=>({"align-content":"center"}),WKe=()=>({}),zKe=i=>({"non-interactive-dropdown":i}),hK=i=>({"p-invalid":i}),KKe=(i,n)=>({"p-invalid":i,"expandable-input":n}),$Ke=i=>({"expandable-output":i}),JKe=(i,n,e,t,r,o)=>[i,n,e,t,r,o],qKe=(i,n,e,t)=>[i,n,e,t],YKe=(i,n)=>[i,n];function XKe(i,n){i&1&&(m(0,"h5",5),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"VPN.CONFIG.PEER_OPTIONS")," "))}function QKe(i,n){i&1&&(m(0,"h5",5),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"VPN.CONFIG.INTERFACE_OPTIONS")," "))}function ZKe(i,n){if(i&1&&(m(0,"tr"),P(1,"th",11),m(2,"th",12),F(3),D(4,"translate"),P(5,"p-sortIcon",13),g(),m(6,"th",14),F(7),D(8,"translate"),g(),m(9,"th",14),F(10),D(11,"translate"),g()()),i&2){let e=u();p(2),f("ngStyle",ne(10,jKe,e.scope===e.OptionScope.wg_server_peer?"3rem":null)),p(),J(" ",N(4,4,"VPN.CONFIG.GRID_HEADER.0")," "),p(4),$(N(8,6,"VPN.CONFIG.GRID_HEADER.1")),p(3),$(N(11,8,"VPN.CONFIG.GRID_HEADER.2"))}}function e$e(i,n){if(i&1){let e=L();m(0,"td",16)(1,"iui-contextmenu",23),k("menuOpening",function(r){y(e);let o=u(2).$implicit,s=u();return w(s.contextMenuLoad(r,o))})("menuClick",function(r){y(e);let o=u(2).rowIndex,s=u();return w(s.contextMenuHandler(r,o))}),P(2,"i",24),g()()}if(i&2){let e=u(3);p(),f("settings",e.contextMenu)("allowAnimation",!1)("customStyle",e.contextMenuStyle)("colorScheme",e.currentColorScheme)}}function t$e(i,n){if(i&1){let e=L();m(0,"td",17)(1,"div",25)(2,"iui-contextmenu",23),k("menuOpening",function(r){y(e);let o=u(2).$implicit,s=u();return w(s.contextMenuLoad(r,o))})("menuClick",function(r){y(e);let o=u(2).rowIndex,s=u();return w(s.contextMenuHandler(r,o))}),m(3,"div",26),P(4,"i",27),g()()()()}if(i&2){let e=u(3);p(2),f("settings",e.contextMenu)("allowAnimation",!1)("customStyle",e.contextMenuStyle)("colorScheme",e.currentColorScheme)}}function i$e(i,n){if(i&1&&F(0),i&2){let e=u(3).$implicit;J(" ",e.name," ")}}function n$e(i,n){if(i&1&&F(0),i&2){let e=u(3).$implicit;J(" ",e.name," ")}}function r$e(i,n){i&1&&v(0,i$e,1,1,"ng-template",21)(1,n$e,1,1,"ng-template",22)}function o$e(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function s$e(i,n){if(i&1&&(m(0,"div")(1,"div"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e.label)}}function a$e(i,n){if(i&1){let e=L();m(0,"p-dropdown",28),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3).$implicit;return Re(o.name,r)||(o.name=r),w(r)}),k("onChange",function(r){y(e);let o=u(4);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,o$e,2,1,"ng-template",29)(3,s$e,3,1,"ng-template",30),g()}if(i&2){let e=u(3).$implicit,t=u();f("options",t.availablePeerKeywords),Te("ngModel",e.name),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,6,"VPN.CONFIG.NO_OPS"))("ngClass",ne(8,zKe,t.isDefaultOption(e.name)))("disabled",e.disabled||t.isDefaultOption(e.name)||e.name==="PrivateKey"||e.name==="PublicKey")}}function l$e(i,n){if(i&1&&F(0),i&2){let e=u(3).$implicit;J(" ",e.name," ")}}function c$e(i,n){i&1&&v(0,a$e,4,10,"ng-template",21)(1,l$e,1,1,"ng-template",22)}function d$e(i,n){if(i&1){let e=L();m(0,"button",34),k("click",function(){y(e);let r=u(5);return w(r.togglePasswordVisibility())}),g()}if(i&2){let e=u(5);Q("icon",e.showPassword?"fa fa-eye-slash":"fa fa-eye")}}function p$e(i,n){if(i&1&&(m(0,"div",31),P(1,"input",32),v(2,d$e,1,1,"button",33),g()),i&2){let e=u(3).$implicit,t=u();p(),f("type",t.showPassword?"text":"password")("value",e.arg),p(),W((e.name==="PrivateKey"||e.name==="PublicKey")&&e.arg!==t.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY")?2:-1)}}function u$e(i,n){if(i&1){let e=L();m(0,"button",34),k("click",function(){y(e);let r=u(5);return w(r.togglePasswordVisibility())}),g()}if(i&2){let e=u(5);Q("icon",e.showPassword?"fa fa-eye-slash":"fa fa-eye")}}function h$e(i,n){if(i&1&&(m(0,"div",35),P(1,"span",36),v(2,u$e,1,1,"button",33),g()),i&2){let e=u(3).$implicit,t=u();p(),Q("pTooltip",e.arg),f("innerText",t.getPasswordDisplay(e)),p(),W((e.name==="PrivateKey"||e.name==="PublicKey")&&e.arg!==t.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY")?2:-1)}}function f$e(i,n){i&1&&(m(0,"td",19)(1,"p-cellEditor"),v(2,p$e,3,3,"ng-template",21)(3,h$e,3,3,"ng-template",22),g()())}function m$e(i,n){if(i&1&&(P(0,"i",38),D(1,"translate")),i&2){let e=u(4).$implicit;Q("pTooltip",N(1,1,e.emptyMessageKey))}}function g$e(i,n){if(i&1){let e=L();m(0,"span"),F(1," \xA0 "),m(2,"i",39),k("mouseenter",function(r){y(e);let o=u(5).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))})("wheel",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))}),g()()}}function _$e(i,n){if(i&1&&(m(0,"strong"),F(1),g(),v(2,g$e,3,0,"span")),i&2){let e=u(4).$implicit;p(),$(e.arg),p(),W(e.ipobj?2:-1)}}function C$e(i,n){if(i&1&&(m(0,"td")(1,"div",31),v(2,m$e,2,3,"i",38)(3,_$e,3,2),g()()),i&2){let e=u(3).$implicit;p(2),W(e.arg?3:2)}}function I$e(i,n){if(i&1){let e=L();m(0,"strong"),F(1),g(),m(2,"input",42),Oe("ngModelChange",function(r){y(e);let o=u(6);return Re(o.editableAllowedIPsText,r)||(o.editableAllowedIPsText=r),w(r)}),k("keydown.enter",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onAllowedIPsCombinedChange(r))})("blur",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onAllowedIPsCombinedChange(r))})("focus",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onCellEditInit(r))})("keypress",function(r){y(e);let o=u(6);return w(o.allowNumbersDotAndSlash(r))})("keydown.arrowUp",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(5).$implicit,t=u();p(),$(t.getAllowedIPsFirstValue(e)),p(),Te("ngModel",t.editableAllowedIPsText),f("ngClass",ne(3,hK,t.validateOption(e).valid===!1))}}function y$e(i,n){if(i&1){let e=L();m(0,"input",42),Oe("ngModelChange",function(r){y(e);let o=u(6);return Re(o.editableAllowedIPsText,r)||(o.editableAllowedIPsText=r),w(r)}),k("keydown.enter",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onAllowedIPsCombinedChange(r))})("blur",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onAllowedIPsCombinedChange(r))})("focus",function(){y(e);let r=u(5).$implicit,o=u();return w(o.onCellEditInit(r))})("keypress",function(r){y(e);let o=u(6);return w(o.allowNumbersDotAndSlash(r))})("keydown.arrowUp",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(6);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(5).$implicit,t=u();Te("ngModel",t.editableAllowedIPsText),f("ngClass",ne(2,hK,t.validateOption(e).valid===!1))}}function w$e(i,n){if(i&1&&(m(0,"div",40),v(1,I$e,3,5)(2,y$e,1,4,"input",41),g()),i&2){let e=u(5);p(),W(e.scope===e.OptionScope.wg_server_peer?1:2)}}function v$e(i,n){if(i&1&&P(0,"i",46),i&2){let e=u(5).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function b$e(i,n){if(i&1){let e=L();m(0,"i",47),k("mouseenter",function(r){y(e);let o=u(5).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))})("wheel",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))}),g()}if(i&2){let e=u(5).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function S$e(i,n){if(i&1&&(m(0,"div",43)(1,"strong"),F(2),g(),v(3,v$e,1,1,"i",44)(4,b$e,1,1,"i",45),g()),i&2){let e=u(4).$implicit,t=u();p(2),$(e.arg),p(),f("ngIf",!t.isOptionValid(e)&&e.name!==""),p(),f("ngIf",e.ipobj)}}function E$e(i,n){i&1&&(m(0,"td",37)(1,"p-cellEditor"),v(2,w$e,3,1,"ng-template",21)(3,S$e,5,3,"ng-template",22),g()())}function A$e(i,n){if(i&1&&(m(0,"div",50)(1,"small",51),P(2,"i",52),g()()),i&2){let e=u(5).$implicit,t=u();p(2),Q("pTooltip",t.getValidationMessage(e))}}function x$e(i,n){if(i&1){let e=L();m(0,"div",48)(1,"input",49),Oe("ngModelChange",function(r){y(e);let o=u(4).$implicit;return Re(o.arg,r)||(o.arg=r),w(r)}),k("ngModelChange",function(){y(e);let r=u(4).$implicit,o=u();return w(o.onArgChanged(r))})("keydown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())}),g(),v(2,A$e,3,1,"div",50),g()}if(i&2){let e=u(4).$implicit,t=u();p(),f("type",e.name==="ListenPort"?"number":"text"),Te("ngModel",e.arg),f("ngClass",Qe(4,KKe,t.validateOption(e).valid===!1,e.name==="AllowedIPs")),p(),W(t.isOptionValid(e)?-1:2)}}function T$e(i,n){if(i&1&&P(0,"i",46),i&2){let e=u(5).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function O$e(i,n){if(i&1){let e=L();m(0,"i",47),k("mouseenter",function(r){y(e);let o=u(5).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))})("wheel",function(r){y(e);let o=u(6);return w(o.clearObjectInfo(r))}),g()}if(i&2){let e=u(5).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function R$e(i,n){if(i&1&&(m(0,"div",53)(1,"strong"),F(2),g(),v(3,T$e,1,1,"i",46)(4,O$e,1,1,"i",54),g()),i&2){let e=u(4).$implicit,t=u();f("ngClass",ne(4,$Ke,e.name==="AllowedIPs")),p(2),$(e.arg),p(),W(!t.isOptionValid(e)&&e.name!==""?3:-1),p(),W(e.ipobj?4:-1)}}function P$e(i,n){i&1&&(m(0,"td",37)(1,"p-cellEditor"),v(2,x$e,3,7,"ng-template",21)(3,R$e,5,6,"ng-template",22),g()())}function D$e(i,n){if(i&1&&v(0,C$e,4,1,"td")(1,E$e,4,0,"td",37)(2,P$e,4,0,"td",37),i&2){let e=u(2).$implicit,t=u();W(e.name==="Address"&&e.name!=="AllowedIPs"||e.name==="Endpoint"?0:e.name==="AllowedIPs"&&e.name!=="Address"&&(t.scope===t.OptionScope.wg_server_peer||t.scope===t.OptionScope.wg_client_peer)?1:e.name!=="Address"?2:-1)}}function F$e(i,n){if(i&1){let e=L();m(0,"input",55),Oe("ngModelChange",function(r){y(e);let o=u(2).$implicit;return Re(o.comment,r)||(o.comment=r),w(r)}),k("ngModelChange",function(){y(e);let r=u(2).$implicit,o=u();return w(o.onArgChanged(r))})("keydown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(2).$implicit;Te("ngModel",e.comment),f("disabled",e.name==="PrivateKey"||e.name==="PublicKey")}}function k$e(i,n){if(i&1&&(m(0,"div",56),F(1),g()),i&2){let e=u(2).$implicit;p(),J(" ",e.comment," ")}}function N$e(i,n){if(i&1){let e=L();m(0,"tr",15),v(1,e$e,3,4,"td",16)(2,t$e,5,4,"td",17),m(3,"td",18,1),k("click",function(r){y(e);let o=u(2);return w(o.scrollToEditorCell(r))}),m(5,"p-cellEditor"),v(6,r$e,2,0)(7,c$e,2,0),g()(),v(8,f$e,4,0,"td",19)(9,D$e,3,1),m(10,"td",20)(11,"p-cellEditor"),v(12,F$e,1,2,"ng-template",21)(13,k$e,2,1,"ng-template",22),g()()()}if(i&2){let e=u(),t=e.$implicit,r=e.rowIndex;f("pReorderableRow",t.name==="PrivateKey"||t.name==="PublicKey"?null:r)("ngStyle",ne(7,GKe,t.name==="PrivateKey"||t.name==="PublicKey"?"var(--fwcPaleBlue2)":"auto")),p(),W(t.name==="PrivateKey"||t.name==="PublicKey"?1:2),p(2),f("ngStyle",t.name==="AllowedIPs"?Ae(9,HKe):Ae(10,WKe)),p(3),W(t.name==="PrivateKey"||t.name==="PublicKey"?6:7),p(2),W(t.name==="PrivateKey"||t.name==="PublicKey"?8:9),p(2),f("pEditableColumnDisabled",t.name==="PrivateKey"||t.name==="PublicKey")}}function L$e(i,n){if(i&1&&v(0,N$e,14,11,"tr",15),i&2){let e=n.$implicit,t=u();W(t.isSpecialOption(e.name)?-1:0)}}function M$e(i,n){if(i&1){let e=L();m(0,"sts-fwc-tree-selector",59,2),k("objectSelected",function(r){y(e);let o=u(2);return w(o.onRouteObjectSelected(r))}),g()}if(i&2){let e=u(2);f("fwcloudId",null)("hideObjectName",!0)("fwTreeNodes",Po(5,JKe,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(12,qKe,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_NETWORK,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(17,YKe,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_NETWORK))}}function V$e(i,n){if(i&1){let e=L();m(0,"button",57),D(1,"translate"),k("click",function(r){y(e);let o=u();return w(o.onAddRoute(r))}),g(),v(2,M$e,2,20,"sts-fwc-tree-selector",58)}if(i&2){let e=u();Q("label",N(1,2,"VPN.CONFIG.ADD_ROUTE")),p(2),W(e.scope===e.OptionScope.wg_client_peer||e.scope===e.OptionScope.wg_server_peer?2:-1)}}function B$e(i,n){if(i&1){let e=L();m(0,"button",61),D(1,"translate"),k("click",function(r){y(e);let o=u(2);return w(o.onShowPeerList(r))}),g()}i&2&&Q("label",N(1,1,"VPN.CONFIG.SHOW_PEERS"))}function U$e(i,n){if(i&1&&v(0,B$e,2,3,"button",60),i&2){let e=u();W(e.wireguardClients.length>0?0:-1)}}var xg=(()=>{class i{constructor(e,t,r,o,s,a,l,c,d,h){this.refService=e,this.itemSelectedService=t,this.store=r,this.translate=o,this.utilService=s,this.fwcObjectService=a,this.fwcUserService=l,this.messageService=c,this.fwcVpnService=d,this.appOptionService=h,this.wireguardClients=[],this.optionsChanged=new X,this.validationStatus=new X,this.showPeerListDialog=new X,this.clientsUpdated=new X,this.modified=new X,this.gridOptions=[],this.selectedOption=null,this.alive=!0,this.infoTooltipShown=!1,this.contextMenuReference=null,this.contextMenuStyle=[hs,ms,fs],this.applicationRef=null,this.NodeTypes=M,this.ObjectTypes=O,this.OptionScope=pe,this.showPassword=!1,this.isEditing=!1,this.defaultOptionsSet=new Set(["PrivateKey","Address","ListenPort","Endpoint","PublicKey","AllowedIPs"]),this.allowedIPsValues=[],this.editableAllowedIPsText="",this.availablePeerKeywords=[]}ngOnInit(){this.contextMenu={items:[{id:V.VPN_OPTION_DELETE,text:this.translate.instant("VPN.CONFIG.DELETE_OPTION"),icon:"fwcMenuIcon fwci-delete fwcRed"},{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),visible:!1}]},this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.buildKeywords(this.gridOptions)}ngOnChanges(e){if(e.options&&e.options.currentValue&&(this.gridOptions=e.options.currentValue),e.vpnNetwork){this.vpnNetwork=e.vpnNetwork.currentValue;let t=this.gridOptions.find(r=>r.name==="AllowedIPs");t&&t.arg.split(",").map(o=>o.trim()).filter(o=>o&&o!==this.vpnNetwork).length===0&&(t.arg=this.vpnNetwork)}}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){let e=this;setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t},1)}updateOptions(){this.optionsChanged.emit([...this.gridOptions]),this.buildKeywords(this.gridOptions)}onDataChanged(e){if(e.dragIndex!==void 0&&e.dropIndex!==void 0){this.updateOptions();return}let t=e.value;if(this.defaultOptionsSet.has(t)){console.warn("A default option cannot be replaced: ",t);return}let r=this.gridOptions.findIndex(o=>o.name===t);r!==-1&&(this.gridOptions[r].arg="",this.updateOptions())}onArgChanged(e){let t=this.validateOption(e);t.valid||this.messageService.add({key:"gridValidation",severity:"error",summary:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.ARG_ERROR",{optionName:e.name}),detail:t.message,life:3e3}),this.validationStatus.emit({valid:t.valid,option:e,value:e.arg}),this.modified.emit(),this.updateOptions()}onAddOption(){let e={name:"",arg:"",comment:"",scope:this.scope};this.scope===pe.wg_server_peer&&(e.wireguard_cli=this.gridOptions.every(t=>t.wireguard_cli===this.gridOptions[0].wireguard_cli)?this.gridOptions[0].wireguard_cli:null),this.gridOptions.push(e),this.updateOptions(),setTimeout(()=>{let t=this.nameCells.last?.nativeElement;t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{t.click()},50))},100)}onAddRoute(e,t){this.routesTreeSelector&&this.routesTreeSelector.showTree(e,{peer:t},!0)}onRouteObjectSelected(e){this.utilService.fwcAPICall(this.fwcObjectService.getObject.bind(this.fwcObjectService),e.id_obj,this.fwcUserService.getActualFwSelectedCloud()).then(t=>{let r=t.data.address,o;if(t.data.obj_type!==7)o=`${r}/32`;else{let a=t.data.netmask;try{let l=vk.parse(r),c;a.includes("/")?c=parseInt(a.replace("/",""),10):c=vk.parse(a).prefixLengthFromSubnetMask(),o=`${l.toString()}/${c}`}catch{o=r}}let s=this.gridOptions.find(a=>a.name==="AllowedIPs");if(s){let a=s.arg.split(",").map(l=>l.trim());a.includes(o)||(a.push(o),s.arg=a.join(", "))}else{let a={name:"AllowedIPs",arg:o,comment:"",scope:this.scope};this.scope===pe.wg_server_peer&&(a.wireguard_cli=this.gridOptions.every(l=>l.wireguard_cli===this.gridOptions[0].wireguard_cli)?this.gridOptions[0].wireguard_cli:null),this.gridOptions.push(a)}this.updateOptions()})}getScope(){return this.scope}getOptions(){return this.gridOptions}clearOptions(){this.gridOptions=[],this.updateOptions()}modifyIPOption(e,t){let r=this.gridOptions.find(o=>o.name===e);r&&(r.arg=t,this.updateOptions())}updateOrCreateIPOption(e,t){let r=this.gridOptions.find(o=>o.name===e.name);r?(r.arg=e.arg,r.comment=e.comment):t&&this.gridOptions.push(e),this.updateOptions()}contextMenuLoad(e,t){let r=!1,o;if(this.scope===pe.wg_client_interface||this.scope===pe.wg_client_peer?r=Object.values(v2).includes(t.name):r=Object.values(w2).includes(t.name),o=r,o){e.detail.cancel=!0;return}this.contextMenu&&this.contextMenu.items&&this.contextMenu.items.forEach(function(s){s.id==V.VPN_OPTION_DELETE&&(s.visible=!r)})}contextMenuHandler(e,t){switch(e.detail.item.id){case V.VPN_OPTION_DELETE:this.gridOptions.splice(t,1),this.updateOptions();break}}buildKeywords(e){let t,r;switch(this.scope){case pe.wg_client_peer:t=fv,r=yB;break;case pe.wg_server_peer:t=_B,r=CB;break;case pe.wg_server_interface:t=uv,r=gB;break;case pe.wg_client_interface:t=hv,r=IB;break;default:t=[],r=[];break}let o=[];Array.isArray(e)?o=e:e&&Array.isArray(e.options)&&(o=e.options);let s=[...t,...r.filter(l=>!t.some(c=>c.name===l.name))].map(l=>l.name),a=o.map(l=>l.name).filter(l=>!!l);this.availablePeerKeywords=s.map(l=>({label:l,value:l,disabled:a.includes(l)||this.defaultOptionsSet.has(l)}))}scrollToEditorCell(e){let t=e.currentTarget;t&&setTimeout(()=>{t.scrollIntoView({behavior:"instant",block:"center"}),this.dropdown.show()},0)}isDefaultOption(e){return!!this.defaultOptionsSet[e]}togglePasswordVisibility(){this.showPassword=!this.showPassword}replaceDots(e){return e.replace(/./g,"\u2022")}isOptionValid(e){return this.validateOption(e).valid}getValidationMessage(e){return this.validateOption(e).message||""}validateOption(e){if(!e.arg&&e.name!=="Table")return{valid:!1,message:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.REQUIRED")};let t=Dp.wireGuardOptionValidator(e.name),r=new Vo(e.arg),o=t(r);if(!o)return{valid:!0};let s={invalidPresharedKey:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRESHARED_KEY"),invalidAddress:d=>this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ADDRESS",{ip:d}),invalidAllowedIPs:d=>this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ALLOWED_IPS",{ip:d}),invalidDNS:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_DNS"),invalidListenPort:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_LISTEN_PORT"),invalidMTU:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_MTU"),invalidTable:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_TABLE"),invalidEndpoint:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_ENDPOINT"),invalidPersistentKeepalive:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PERSISTENT_KEEPALIVE"),invalidPreUp:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRE_UP"),invalidPostUp:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_POST_UP"),invalidPreDown:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PRE_DOWN"),invalidPostDown:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_POST_DOWN"),invalidIpAddress:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_IP_ADDRESS"),invalidPort:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_PORT"),invalidHostname:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_HOSTNAME"),invalidBase64:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_BASE64"),invalidCidr:this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_CIDR")},a=Object.keys(o)[0],l=o[a]?.invalidIp,c=s[a];return{valid:!1,message:typeof c=="function"?c(l):c||this.translate.instant("GLOBALS.MSG_WIREGUARD_VALIDATION.INVALID_OPTION",{option:e.name})}}getPasswordDisplay(e){return(e.name==="PrivateKey"||e.name==="PublicKey")&&e.arg!==this.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY")?this.showPassword?e.arg:this.replaceDots(e.arg):e.arg}isSpecialOption(e){return!!e&&/^<<.*>>$/.test(e)}onEditStart(){this.isEditing=!0}onEditEnd(){this.isEditing=!1}showObjectInfo(e,t){if(e){let r={objId:e.ipobj};r.objId!==null&&(this.infoTooltipTimer=setTimeout(()=>{this.infoTooltipShown=!0,this.itemSelectedService.setObjectInfo(r,t)},1e3))}}clearObjectInfo(e){this.infoTooltipTimer&&(clearTimeout(this.infoTooltipTimer),this.infoTooltipTimer=void 0),this.infoTooltipShown&&(this.itemSelectedService.setObjectInfo(void 0,e),this.infoTooltipShown=!1)}allowNumbersDotAndSlash(e){let t=/[0-9.,\/ ]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}onShowPeerList(e){this.showPeerListDialog.emit();let t=this.utilService.createDynamicComponentRef(nE),r=t.instance;r.setDynamicComponentRef(t),r.clientsUpdated.subscribe(o=>{this.clientsUpdated.emit(this.wireguardClients);let s=this.fwcUserService.getActualFwSelectedCloud();this.fwcVpnService.getWireGuardClients({fwcloud:s,wireguard:this.gridOptions[0].wireguard}).subscribe(a=>{this.wireguardClients=a.data.data})}),r.showDialog(this.wireguardClients,this.gridOptions[0].wireguard)}normalizeIP(e){return e.trim()}normalizeIPBase(e){return e.trim().split("/")[0]}getAllowedIPsFirstValue(e){let t=String(e?.arg||"").split(",").map(o=>this.normalizeIP(o).trim()).filter(Boolean);return Array.from(new Set(t))[0]||""}onCellEditInit(e){if(!this.editableAllowedIPsText?.trim()){let t=(e.arg||"").split(",").map(r=>this.normalizeIP(r));this.scope===pe.wg_server_peer?this.editableAllowedIPsText=t.slice(1).join(", "):this.editableAllowedIPsText=t.join(", ")}}onAllowedIPsCombinedChange(e){let t=this.editableAllowedIPsText.split(/[, ]+/).map(r=>this.normalizeIP(r)).filter(r=>r.length>0);if(this.scope===pe.wg_server_peer){let r=this.getAllowedIPsFirstValue(e),o=this.normalizeIPBase(r),s=t.filter(l=>this.normalizeIPBase(l)!==o),a=[r,...s];e.arg=a.filter((l,c,d)=>d.indexOf(l)===c).join(", ")}else e.arg=t.filter((r,o,s)=>s.indexOf(r)===o).join(", ");this.onArgChanged(e),setTimeout(()=>{this.editableAllowedIPsText=""})}static{this.\u0275fac=function(t){return new(t||i)(S(Ts),S(ht),S(nt),S(Ye),S(ft),S(Vi),S(at),S(Kt),S(er),S(wt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-wireguard-options-grid"]],viewQuery:function(t,r){if(t&1&&(le(BKe,5),le(mr,5),le(UKe,5)),t&2){let o;te(o=ie())&&(r.routesTreeSelector=o.first),te(o=ie())&&(r.dropdown=o.first),te(o=ie())&&(r.nameCells=o)}},inputs:{scope:"scope",options:"options",vpnNetwork:"vpnNetwork",wireguardClients:"wireguardClients"},outputs:{optionsChanged:"optionsChanged",validationStatus:"validationStatus",showPeerListDialog:"showPeerListDialog",clientsUpdated:"clientsUpdated",modified:"modified"},features:[Yi],decls:13,vars:9,consts:[["optionsTable",""],["nameCell",""],["routesTreeSelector",""],[1,"container"],[1,"col-12"],[1,"noVertPad","fwcBlue"],["scrollHeight","18em","selectionMode","single","styleClass","optionsTable",3,"selectionChange","onEditComplete","onRowReorder","onEditInit","onEditCancel","value","scrollable","selection"],["pTemplate","header"],["pTemplate","body"],[1,"divGridFooter"],["pButton","","type","button","icon","fa fa-plus",3,"click","label"],[1,"tdActionColumn",2,"width","1rem"],["pSortableColumn","name",2,"width","17rem",3,"ngStyle"],["field","name"],[2,"width","17rem"],[1,"trOptionsGridRow",2,"max-height","25px",3,"pReorderableRow","ngStyle"],[1,"tdActionColumn"],["pReorderableRowHandle","",1,"tdActionColumn",2,"text-align","center","vertical-align","middle !important"],["pEditableColumn","","id","name",3,"click","ngStyle"],[2,"max-width","16rem"],["pEditableColumn","",3,"pEditableColumnDisabled"],["pTemplate","input"],["pTemplate","output"],["contextMenuRef","contextMenuReference",3,"menuOpening","menuClick","settings","allowAnimation","customStyle","colorScheme"],[1,"fa","fa-bars","fwcBlue","hidden-cell"],[1,"context-menu-wrapper"],[1,"clickable-area"],["pReorderableRowHandle","",1,"fa","fa-bars","fwcBlue"],["styleClass","fwcGridDropDown","appendTo","body","filter","true",3,"ngModelChange","onChange","keydown","keydown.arrowUp","keydown.arrowDown","keydown.arrowLeft","keydown.arrowRight","options","ngModel","autoDisplayFirst","emptyFilterMessage","ngClass","disabled"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"output-with-error"],["pInputText","","readonly","",1,"p-inputtext","readonly-password",3,"type","value"],["type","button","pButton","",1,"toggle-visibility",3,"icon"],["type","button","pButton","",1,"toggle-visibility",3,"click","icon"],[1,"output-with-error",2,"width","100%"],[1,"fake-input-text",3,"innerText","pTooltip"],["pEditableColumn",""],[1,"fa","fa-question-circle","fa-lg","fwcOrange",2,"margin-top","8px",3,"pTooltip"],[1,"fa","fa-lg","fa-info-circle","fwcBlue",3,"mouseenter","mouseleave","wheel"],[1,"allowedips-edit-container"],["pInputText","",3,"ngModel","ngClass"],["pInputText","",3,"ngModelChange","keydown.enter","blur","focus","keypress","keydown.arrowUp","keydown.arrowDown","keydown.arrowLeft","keydown.arrowRight","ngModel","ngClass"],[1,"allowedips-output","expandable-output"],["class","pi pi-exclamation-circle p-error","style","margin-left: 5px","tooltipPosition","left",3,"pTooltip",4,"ngIf"],["class","fa fa-lg fa-info-circle fwcBlue","style","margin-left: 5px","tooltipPosition","left",3,"pTooltip","mouseenter","mouseleave","wheel",4,"ngIf"],["tooltipPosition","left",1,"pi","pi-exclamation-circle","p-error",2,"margin-left","5px",3,"pTooltip"],["tooltipPosition","left",1,"fa","fa-lg","fa-info-circle","fwcBlue",2,"margin-left","5px",3,"mouseenter","mouseleave","wheel","pTooltip"],[1,"input-with-error"],["pInputText","","maxlength","255",3,"ngModelChange","keydown","keydown.arrowUp","keydown.arrowDown","keydown.arrowLeft","keydown.arrowRight","type","ngModel","ngClass"],[1,"error-message"],[1,"p-error"],[1,"pi","pi-exclamation-circle",3,"pTooltip"],[1,"output-with-error",3,"ngClass"],["tooltipPosition","left",1,"fa","fa-lg","fa-info-circle","fwcBlue",2,"margin-left","5px",3,"pTooltip"],["pInputText","","type","text","maxlength","255",3,"ngModelChange","keydown","keydown.arrowUp","keydown.arrowDown","keydown.arrowLeft","keydown.arrowRight","ngModel","disabled"],[1,"divWrapper"],["pButton","","type","button","icon","fa fa-plus",2,"margin-left","5px",3,"click","label"],[3,"fwcloudId","hideObjectName","fwTreeNodes","objectTreeNodes","selectableObjects"],[3,"objectSelected","fwcloudId","hideObjectName","fwTreeNodes","objectTreeNodes","selectableObjects"],["pButton","","type","button",2,"margin-left","5px",3,"label"],["pButton","","type","button",2,"margin-left","5px",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"div",3)(1,"div",4),v(2,XKe,3,3,"h5",5)(3,QKe,3,3,"h5",5),m(4,"p-table",6,0),Oe("selectionChange",function(a){return y(o),Re(r.selectedOption,a)||(r.selectedOption=a),w(a)}),k("onEditComplete",function(a){return y(o),w(r.onDataChanged(a))})("onRowReorder",function(a){return y(o),w(r.onDataChanged(a))})("onEditInit",function(){return y(o),w(r.onEditStart())})("onEditCancel",function(){return y(o),w(r.onEditEnd())})("onEditComplete",function(){return y(o),w(r.onEditEnd())}),v(6,ZKe,12,12,"ng-template",7)(7,L$e,1,1,"ng-template",8),g(),m(8,"div",9)(9,"button",10),D(10,"translate"),k("click",function(){return y(o),w(r.onAddOption())}),g(),v(11,V$e,3,4)(12,U$e,1,1),g()()()}t&2&&(p(2),W(r.scope===r.OptionScope.wg_client_peer?2:-1),p(),W(r.scope===r.OptionScope.wg_server_interface||r.scope===r.OptionScope.wg_client_interface?3:-1),p(),f("value",r.gridOptions)("scrollable",!0),Te("selection",r.selectedOption),p(5),Q("label",N(10,7,"VPN.CONFIG.ADD_OPTION")),p(2),W(r.scope==r.OptionScope.wg_client_peer||r.scope==r.OptionScope.wg_server_peer?11:r.scope==r.OptionScope.wg_server_interface?12:-1))},dependencies:[je,rt,De,Li,Pi,Jn,mn,Ee,pt,cn,Xi,sr,Oa,lh,qf,Ra,Yf,Xf,mr,Zo,gt],styles:[".container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-wrap:wrap}.divGridFooter[_ngcontent-%COMP%]{margin:15px auto 10px;text-align:center}.input-button-wrapper[_ngcontent-%COMP%]{width:100%;min-width:var(--min-width, 38rem)}.input-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap, 18px);width:100%}.input-button-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0;max-width:100%}.non-interactive-dropdown[_ngcontent-%COMP%]{pointer-events:none!important;opacity:.7!important;cursor:not-allowed!important}.password-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:5px}.toggle-visibility[_ngcontent-%COMP%]{border:none;padding:1px;background:transparent;color:var(--primary-color);cursor:pointer}.hidden-cell[_ngcontent-%COMP%]{visibility:hidden;pointer-events:none;cursor:default!important}.fake-input-text[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.context-menu-wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.clickable-area[_ngcontent-%COMP%]{display:block;width:100%;height:100%;pointer-events:auto;align-content:center}.input-with-error[_ngcontent-%COMP%]{display:flex;gap:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.output-with-error[_ngcontent-%COMP%]{display:flex;align-items:center}.p-invalid[_ngcontent-%COMP%]{border-color:#f44336!important}.trOptionsGridRow[_ngcontent-%COMP%]{height:auto!important}.p-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem}tr.trOptionsGridRow[_ngcontent-%COMP%]:not(:first-child):hover{background:#eaeaea!important;color:#333}tr.trOptionsGridRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;font-family:Montserrat,Arial,sans-serif;padding:.3rem}.allowedips-edit-container[_ngcontent-%COMP%]{display:flex}.trOptionsGridRow[_ngcontent-%COMP%]   input.p-inputtext[_ngcontent-%COMP%]{height:18px!important;max-height:18px!important;width:100%}[_nghost-%COMP%]     .fwcGridDropDown .p-dropdown-label{padding:.1rem!important}.output-with-error.expandable-output[_ngcontent-%COMP%], .input-with-error[_ngcontent-%COMP%]   input.expandable-input[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;width:100%;max-width:48rem;overflow-wrap:break-word}td.p-editable-column[_ngcontent-%COMP%]   .p-cell-editor[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}}return i})();var G$e=["txtConfigFile"],H$e=["gridComponent"],W$e=()=>({width:"80vw"}),z$e=(i,n)=>({obj_type:i,name:n}),bk=i=>({name:i}),K$e=()=>({visibility:"visible"}),Sk=i=>({visibility:i}),$$e=(i,n,e,t,r,o)=>[i,n,e,t,r,o],J$e=(i,n,e,t)=>[i,n,e,t],q$e=(i,n)=>[i,n],Y$e=()=>({width:"1.7rem",height:"1.7rem"}),X$e=i=>({obj_type:i});function Q$e(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i"),D(3,"fwcIcon"),F(4),D(5,"translate"),D(6,"translate"),g()()),i&2){let e=u(2);p(2),ce(Ms(3,4,e.objectToDelete._fwcObjType,null,"fwcOrange")),p(2),J(" ",ei(6,10,"VPN.CONFIG.HEADER_DELETE_2",Qe(13,z$e,N(5,8,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR"),e.objectToDelete._fwcObjName))," ")}}function Z$e(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.WG_HEADER_FILE",ne(4,bk,e.objectToRetrieve._fwcObjName))," ")}}function eJe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,e.configManageTranslateKey+".FORM_HEADER",ne(4,bk,e.objectToManage._fwcObjName))," ")}}function tJe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",14),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.HEADER_WU",ne(4,bk,e.objectToSearchWU._fwcObjName))," ")}}function iJe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),g()()),i&2){let e=u(2);p(3),J(" ",e.headerTitle," ")}}function nJe(i,n){if(i&1){let e=L();m(0,"div",11)(1,"button",15),k("click",function(){y(e);let r=u(2);return w(r.minimizeDialog())}),g()()}}function rJe(i,n){if(i&1&&v(0,Q$e,7,16,"div",10)(1,Z$e,5,6,"div",10)(2,eJe,5,6,"div",10)(3,tJe,5,6,"div",10)(4,iJe,4,1,"div",10)(5,nJe,2,0,"div",11),i&2){let e=u();W(e.objectToDelete?0:-1),p(),W(e.objectToRetrieve?1:-1),p(),W(e.objectToManage?2:-1),p(),W(e.objectToSearchWU?3:-1),p(),W(!e.objectToDelete&&!e.objectToRetrieve&&!e.objectToManage&&!e.objectToSearchWU?4:-1),p(),W(e.disableButtons?-1:5)}}function oJe(i,n){i&1&&(m(0,"div",5)(1,"div",16),P(2,"p-progressSpinner"),g()())}function sJe(i,n){if(i&1&&(m(0,"div",5)(1,"div",17),P(2,"sts-fwc-message",18),g()()),i&2){let e=u();p(2),f("message",e.errorMsg)}}function aJe(i,n){if(i&1){let e=L();m(0,"div",19),P(1,"sts-fwc-message",18),m(2,"sts-fwc-object-restrictions",20),k("onHideParent",function(){y(e);let r=u(3);return w(r.minimizeDialog(!0))})("onRefreshRestrictions",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()()}if(i&2){let e=u(3);p(),f("message",e.deleteMsg),p(),f("dependencies",e.dependencies)("readOnly",e.restrictionsReadOnly)}}function lJe(i,n){if(i&1&&v(0,aJe,3,3,"div",19),i&2){let e=u(2);W(e.dependencies.restrictionsError?-1:0)}}function cJe(i,n){if(i&1){let e=L();m(0,"div",21)(1,"p-checkbox",22),D(2,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.alsoUninstallConfig,r)||(o.alsoUninstallConfig=r),w(r)}),g()()}if(i&2){let e=u(3);p(),Q("label",N(2,2,"VPN.CONFIG.UNINSTALL_STRINGS.UNINSTALL_FIRST")),Te("ngModel",e.alsoUninstallConfig)}}function dJe(i,n){if(i&1&&(P(0,"sts-fwc-message",18),v(1,cJe,3,4,"div",21)),i&2){let e=u(2);f("message",e.deleteMsg),p(),W(e.objectToDelete.obj_type==e.ObjectTypes.OBJ_WGS_CONFIG_SER?1:-1)}}function pJe(i,n){if(i&1&&v(0,lJe,1,1)(1,dJe,2,2),i&2){let e=u();W(e.dependencies?0:1)}}function uJe(i,n){if(i&1&&(m(0,"div",6)(1,"div",23)(2,"textarea",24,1),F(4),g()()()),i&2){let e=u();p(4),$(e.configFile)}}function hJe(i,n){if(i&1&&(m(0,"span"),P(1,"i",31),F(2,"\xA0"),m(3,"strong"),F(4),g()()),i&2){let e=u(2).$implicit;p(4),$(e.firewallName)}}function fJe(i,n){if(i&1&&(m(0,"span"),P(1,"span",32)(2,"i",33),F(3),g()),i&2){let e=u(2).$implicit;p(3),J("\xA0",e.firewallName,"")}}function mJe(i,n){if(i&1&&(m(0,"td"),v(1,hJe,5,1,"span")(2,fJe,4,1,"span"),g()),i&2){let e=u().$implicit;p(),W(e.isNode?-1:1),p(),W(e.isNode?2:-1)}}function gJe(i,n){if(i&1&&(m(0,"td"),P(1,"i",33),F(2),g()),i&2){let e=u().$implicit;p(2),J("\xA0",e.firewallName," ")}}function _Je(i,n){if(i&1&&(m(0,"tr",29),v(1,mJe,3,2,"td")(2,gJe,3,1,"td"),m(3,"td",28),P(4,"i"),g()()),i&2){let e=n.$implicit,t=u(2);f("ngClass",e.coloredBg?"bgColored":"bgNormal"),p(),W(e.clusterId!==null&&e.clusterId!==void 0?1:-1),p(),W(e.clusterId===null||e.clusterId===void 0?2:-1),p(2),ce(t.FirewallOpsIcons[e.installState])}}function CJe(i,n){if(i&1&&(m(0,"div",6)(1,"div",25)(2,"div",26)(3,"table",27)(4,"thead")(5,"tr")(6,"th"),F(7),D(8,"translate"),g(),m(9,"th",28),F(10),D(11,"translate"),g()()(),m(12,"tbody"),xr(13,_Je,5,6,"tr",29,Ar),g()()()(),m(15,"div",30),P(16,"sts-fwc-log"),g()()),i&2){let e=u();p(7),$(N(8,2,"COMPILE.FORM.NAME")),p(3),J(" ",N(11,4,e.configManageTranslateKey+".OPERATION")," "),p(3),Tr(e.operationQueue)}}function IJe(i,n){if(i&1){let e=L();m(0,"sts-fwc-object-wu",34),k("onHideParent",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()}if(i&2){let e=u();f("objectInfo",e.objectToSearchWU._fwcObjectInfo)("readOnly",e.restrictionsReadOnly)}}function yJe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,e.object.parent_type==e.ObjectTypes.OBJ_FIREWALL?"GLOBALS.MSG_OBJ_TYPES.FIREWALL":"GLOBALS.MSG_OBJ_TYPES.CLUSTER")),p(2),Q("value",e.object.parent_name)}}function wJe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,"VPN.CONFIG.SER.WIREGUARD")),p(2),Q("value",e.object._fwcParentConfigName)}}function vJe(i,n){if(i&1&&(m(0,"div",58),P(1,"i",59),D(2,"translate"),g()),i&2){let e=u(2);p(),Q("pTooltip",N(2,2,e.ipNetmaskErrorMsg)),f("ngStyle",Ae(4,K$e))}}function bJe(i,n){if(i&1&&(m(0,"p",70),F(1),D(2,"translate"),g()),i&2){let e,t=u(3);f("ngStyle",ne(4,Sk,(e=t.formModel.get("install_dir"))!=null&&e.valid||(e=t.formModel.get("install_dir"))!=null&&e.pristine&&((e=t.formModel.get("install_dir"))!=null&&e.untouched)?"hidden":"visible")),p(),J(" ",N(2,2,"VPN.PANEL.ERRORS.INVALID_INSTALL_PATH")," ")}}function SJe(i,n){if(i&1&&(m(0,"div",17)(1,"p",70),F(2),D(3,"translate"),g()()),i&2){let e,t=u(3);p(),f("ngStyle",ne(4,Sk,(e=t.formModel.get("install_name"))!=null&&e.valid?"hidden":"visible")),p(),J(" ",N(3,2,"VPN.CONFIG.ERRORS.INVALID_CONFIG_FILENAME_ERROR.TEXT")," ")}}function EJe(i,n){if(i&1){let e=L();m(0,"div",56)(1,"p-fieldset",60),D(2,"translate"),m(3,"div",61)(4,"div",62)(5,"div",42)(6,"span",63)(7,"input",64),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(8,"label",65),F(9),D(10,"translate"),g()()(),v(11,bJe,3,6,"p",66),g(),m(12,"div",62)(13,"div",42)(14,"span",63)(15,"input",67),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(16,"label",68),F(17),D(18,"translate"),g()()(),v(19,SJe,4,6,"div",69),g()()()()}if(i&2){let e,t,r=u(2);p(),f("legend",N(2,5,"VPN.PANEL.FIELDS.INST_OPTIONS")),p(8),$(N(10,7,"VPN.PANEL.FIELDS.CONFIG_DIR")),p(2),f("ngIf",!((e=r.formModel.get("install_dir"))!=null&&e.valid||(e=r.formModel.get("install_dir"))!=null&&e.pristine&&((e=r.formModel.get("install_dir"))!=null&&e.untouched))),p(6),$(N(18,9,"VPN.PANEL.FIELDS.CONFIG_FILE")),p(2),f("ngIf",!((t=r.formModel.get("install_name"))!=null&&t.valid))}}function AJe(i,n){i&1&&(P(0,"p",81),D(1,"translate")),i&2&&Q("pTooltip",N(1,1,"VPN.PANEL.ERRORS.INVALID_REMOTE"))}function xJe(i,n){if(i&1){let e=L();m(0,"div",57)(1,"form",37)(2,"p-fieldset",71)(3,"div",72)(4,"div",73)(5,"sts-fwc-tree-selector",74,2),k("objectSelected",function(r){y(e);let o=u(2);return w(o.onRemoteIPObjectChange(r))}),g()(),m(7,"div",25)(8,"span",63)(9,"input",75),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(10,"label",76),F(11),D(12,"translate"),g()()(),m(13,"div",77)(14,"div",78)(15,"button",79),k("click",function(){y(e);let r=u(2);return w(r.onAddRemoteOption())}),g(),v(16,AJe,2,3,"p",80),g()()()()()()}if(i&2){let e=u(2);p(),f("formGroup",e.formModelRemote),p(4),f("fwcloudId",null)("fwTreeNodes",Po(11,$$e,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(18,J$e,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_DNS,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(23,q$e,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_DNS))("disabledObjects",e.disabledTreeRemoteOptions),p(6),$(N(12,9,"CLUSTER.MSG_CLUSTER_EDITION.PORT")),p(4),f("disabled",!(e.formModelRemote!=null&&e.formModelRemote.valid)),p(),f("ngIf",(e.formModelRemote==null?null:e.formModelRemote.invalid)&&(e.formModelRemote==null?null:e.formModelRemote.touched)&&(e.formModelRemote==null?null:e.formModelRemote.dirty))}}function TJe(i,n){if(i&1){let e=L();m(0,"div",82)(1,"sts-fwc-wireguard-options-grid",83),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))})("validationStatus",function(r){y(e);let o=u(2);return w(o.handleValidationStatus(r))}),g(),m(2,"sts-fwc-wireguard-options-grid",84),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))})("validationStatus",function(r){y(e);let o=u(2);return w(o.handleValidationStatus(r))})("modified",function(){y(e);let r=u(2);return w(r.markFormAsDirty())}),g()(),m(3,"div",85)(4,"div",42)(5,"span",63)(6,"input",86),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(7,"label",87),F(8),D(9,"translate"),g()()()()}if(i&2){let e=u(2);p(),f("options",e.getClientInterfaceOptions())("scope",e.OptionScope.wg_client_interface),p(),f("options",e.getClientPeerOptions())("vpnNetwork",e.vpnNetwork)("scope",e.OptionScope.wg_client_peer),p(6),$(N(9,6,"ITEM_PANEL.FIELDS.COMMENTS"))}}function OJe(i,n){if(i&1){let e=L();m(0,"div",82)(1,"div",88)(2,"sts-fwc-wireguard-options-grid",89),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))})("validationStatus",function(r){y(e);let o=u(2);return w(o.handleValidationStatus(r))})("clientsUpdated",function(r){y(e);let o=u(2);return w(o.onClientsChanged(r))}),g()()(),m(3,"div",85)(4,"div",42)(5,"span",63)(6,"input",86),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(7,"label",87),F(8),D(9,"translate"),g()()()()}if(i&2){let e=u(2);p(2),f("options",e.object.options||e.object.data.options)("scope",e.OptionScope.wg_server_interface)("wireguardClients",e.wireguardClients),p(6),$(N(9,4,"ITEM_PANEL.FIELDS.COMMENTS"))}}function RJe(i,n){if(i&1){let e=L();m(0,"p-tabView",8)(1,"p-tabPanel",35),D(2,"translate"),m(3,"div",36)(4,"form",37)(5,"fieldset",38),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.onCancel())}),m(6,"div",39)(7,"div",40)(8,"div",39)(9,"div",41),v(10,yJe,5,4,"div",42)(11,wJe,5,4,"div",42),g(),m(12,"div",41)(13,"div",42)(14,"label",43),F(15),D(16,"translate"),g(),P(17,"input",44),g()()()(),m(18,"div",45)(19,"p-fieldset",46)(20,"div",5)(21,"div",25)(22,"div",42)(23,"span",47)(24,"input",48),k("drop",function(){y(e);let r=u();return w(r.preventDrop())}),g(),m(25,"label",49),F(26),D(27,"translate"),g()()()(),m(28,"div",50)(29,"div",42)(30,"span",47)(31,"input",51),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowOnlyNumbersAndDot(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(32,"label",52),F(33),D(34,"translate"),g()()()(),m(35,"div",25)(36,"div",42)(37,"span",47)(38,"input",53),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowNumbersDotAndSlash(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(39,"label",54),F(40),D(41,"translate"),g()()()(),v(42,vJe,3,5,"div",55),g()()(),v(43,EJe,20,11,"div",56)(44,xJe,17,26,"div",57)(45,TJe,10,8)(46,OJe,10,6),g()()()()()()}if(i&2){let e,t=u();p(),Q("header",N(2,14,"VPN.PANEL.DATA")),p(3),f("formGroup",t.formModel),p(6),W(t.object.obj_type==t.ObjectTypes.OBJ_WGS_CONFIG_SER?10:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_WGC_CONFIG_CLI?11:-1),p(4),$(N(16,16,"VPN.CONFIG.CN")),p(2),Q("value",t.object._fwcCrtName),p(2),Q("legend",t.fieldsetTitle),p(7),$(N(27,18,"ITEM_PANEL.FIELDS.NAME")),p(7),$(N(34,20,"ITEM_PANEL.FIELDS.ADDRESS")),p(7),$(N(41,22,"ITEM_PANEL.FIELDS.MASK")),p(2),f("ngIf",((e=t.formModel.get("_ipobj_address"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_address"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_netmask"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_netmask"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_name"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_name"))==null?null:e.invalid)),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_WGS_CONFIG_SER?43:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_WGC_CONFIG_CLI?44:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_WGC_CONFIG_CLI?45:t.object.obj_type==t.ObjectTypes.OBJ_WGS_CONFIG_SER?46:-1)}}function PJe(i,n){if(i&1){let e=L();m(0,"button",95),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"POLICY_GRID.RELOAD")),f("disabled",e.loadingData)}}function DJe(i,n){if(i&1){let e=L();v(0,PJe,2,4,"button",93),m(1,"button",94),D(2,"translate"),D(3,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onProcessDeleteAction())}),g()}if(i&2){let e=u(2);W(e.dependencies?0:-1),p(),Q("label",ei(3,5,"CONTEXT.VPN_CONFIG.DELETE_2",ne(8,X$e,N(2,3,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR")))),f("disabled",!e.okToDelete||e.loadingData||e.savingData)}}function FJe(i,n){if(i&1){let e=L();m(0,"button",98),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCopyConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.CLIPBOARD.BUTTON")),f("disabled",e.loadingData)}}function kJe(i,n){if(i&1){let e=L();m(0,"button",99),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onDownloadConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.DOWNLOAD.BUTTON")),f("disabled",e.loadingData)}}function NJe(i,n){if(i&1&&v(0,FJe,2,4,"button",96)(1,kJe,2,4,"button",97),i&2){let e=u(2);W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?0:-1),p(),W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?1:-1)}}function LJe(i,n){if(i&1){let e=L();m(0,"button",103),D(1,"translate"),k("click",function(){y(e);let r=u(4);return w(r.doPauseProcess(!0))}),g()}if(i&2){let e=u(4);Q("label",N(1,2,"COMPILE.PAUSE")),f("disabled",e.disableButtons)}}function MJe(i,n){if(i&1){let e=L();m(0,"button",104),k("click",function(){y(e);let r=u(4);return w(r.doContinueProcess())}),g()}if(i&2){let e=u(4);f("disabled",e.disableButtons)("label",e.continueButtonText)}}function VJe(i,n){if(i&1){let e=L();m(0,"button",100),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.doStopProcess())}),g(),v(2,LJe,2,4,"button",101)(3,MJe,1,2,"button",102)}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.STOP")),p(2),W(e.pauseProcess?3:2)}}function BJe(i,n){if(i&1&&v(0,VJe,4,4),i&2){let e=u(2);W(e.operationInProcessId<e.operationQueue.length&&!e.stopProcess?0:-1)}}function UJe(i,n){if(i&1){let e=L();m(0,"button",107),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCancel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",!e.object||e.loadingData||e.savingData)}}function jJe(i,n){if(i&1){let e=L();m(0,"button",108),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onSave())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData||e.savingData)}}function GJe(i,n){if(i&1&&v(0,UJe,2,4,"button",105)(1,jJe,2,4,"button",106),i&2){let e=u(2);W(e.formModel.pristine?-1:0),p(),W(e.formModel.pristine?-1:1)}}function HJe(i,n){if(i&1){let e=L();m(0,"button",109),D(1,"translate"),k("mousedown",function(){y(e);let r=u(2);return w(r.onCancel())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function WJe(i,n){if(i&1&&(m(0,"div",90),P(1,"p-progressSpinner"),g(),v(2,DJe,4,10,"button",91)(3,NJe,2,2)(4,BJe,1,1)(5,GJe,2,2)(6,HJe,2,4,"button",92)),i&2){let e=u();f("ngStyle",ne(8,Sk,e.savingData?"visible":"hidden")),p(),st(Ae(10,Y$e)),p(),W(e.objectToDelete?2:-1),p(),W(e.objectToRetrieve?3:-1),p(),W(e.objectToManage?4:-1),p(),W(e.object&&e.formModel?5:-1),p(),W(!e.object||!e.formModel||e.object&&e.formModel&&e.formModel.pristine?6:-1)}}var fK=6e4,zJe=["Address","ListenPort","AllowedIPs","Endpoint"],BXt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,T,A),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.fwcUserService=s,this.fwcFirewallService=a,this.fwcObjectService=l,this.fwcObjectTreeService=c,this.fwcVpnService=d,this.inputDataService=h,this.fwcErrorPipe=_,this.translate=C,this.confirmationService=I,this.utilService=b,this.fwcEventService=E,this.messageService=R,this.store=T,this.router=A,this.restrictionsReadOnly=!1,this.showPeerListDialog=new X,this.ObjectTypes=O,this.OptionScope=pe,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.dependencies=null,this.FirewallOpsIcons=Cc,this.operationQueue=[],this.pauseProcess=!1,this.disableButtons=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.NodeTypes=M,this.alive=!0,this.wireguardClients=[],this.wireguardClientsOptions=[],this.wireguardClientPeerOptions=[],this.wireguardClientInterfaceOptions=[],this.isExpanded=[],this.showPeerDialog=!1,this.selectedServerId=null,this.showPeerComponent=!1,this.clientOptions=[],this.lastValidGridValue=null,this.vpnNetwork="",this.originalAddress="",this.originalNetmask="",this.allowBlurValidation=!1,this.createDialog(this.translate.instant("VPN.PANEL.WG_TITLE"),"fwci2-wireguard",ri.WIREGUARD_CONFIG_PANEL)}ngOnInit(){this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.store.pipe(yt(()=>this.alive),Cn(na.selectDialogUuidsToReload)).subscribe(e=>{e&&e.find(t=>t===this.dialogUUID)&&this.reloadPanel()}),this.initialFormValue=this.formModel?.getRawValue(),this.itemSelectedService.getItem().pipe(yt(()=>this.alive)).subscribe(e=>B(this,null,function*(){if(!(e.obj_type!=O.OBJ_WGS_CONFIG_SER&&e.obj_type!=O.OBJ_WGC_CONFIG_CLI&&e.obj_type!=O.OBJ_PREFIX_FOLDER&&e.obj_type!=O.OBJ_WIREGUARD_PREFIX||e.statusAction||e._onlySelectInTree)){if(this.resetProperties(),e.parent_type==O.OBJ_CLUSTER){let t;if(t=yield this.getClusterMasterFirewall(e.parent_id),t)e.firewall=t.id;else{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CLUSTER.ERROR_MASTER_TEXT",{name:e.parent_name})});return}}else e.firewall=e.parent_id;if(e.deleteAction)this.onItemDelete(e);else if(e.configFileAction)this.onItemGetFile(e);else if(e.installAction||e.syncCCDAction||e.uninstallAction||e.syncPendingCCDAction){let t=this.utilService.createDynamicComponentRef(fo),r=t.instance;r.setDynamicComponentRef(t),this.communicationSubscription=r.socketEventEmitter.subscribe(o=>{o=="connected"&&this.onItemManage(e),this.communicationSubscription.unsubscribe()}),yield r.checkConnection()}else if(e.newPrefixAction||e.editPrefixAction||e.deletePrefixFolderAction)this.managePrefix(e);else if(e.whereUsedAction)this.showWhereUsed(e);else if(e.blockVPNAction||e.unblockVPNAction)this.blockUnblockVPNConnection(e);else if(Array.isArray(e._fwcChildClientNodes)&&e._fwcChildClientNodes.length){let t=[];e._fwcChildClientNodes.forEach(o=>{t.find(s=>s.id===o.id_obj)||t.push({id:o.id_obj,text:o.name})});let r={header:this.translate.instant("VPN.CONFIG.CLI_CLONE.HEADER"),helpText:this.translate.instant("VPN.CONFIG.CLI_CLONE.TEXT"),modal:!0,formControls:[{name:"clientConfId",label:this.translate.instant("VPN.CONFIG.WG_HEADER_CLI"),type:"select",options:t,placeholder:this.translate.instant("VPN.CONFIG.CLI_CLONE.NO_CLONE"),required:!1}],onAccept:o=>{if(o)if(o.clientConfId)e._fwcObjId=o.clientConfId,this.onItemSelect(e,!0);else{let s=oe({},e);delete s._fwcChildClientNodes,this.onItemSelect(s)}}};this.inputDataService.setInputData(r)}else yield this.onItemSelect(e)}}))}ngOnDestroy(){super.ngOnDestroy()}getFirstAvailableIP(e,t){if(!Fs.isValid(e))throw new Error("IP address is invalid");let r,o;if(Pt.netmaskCIDRRegexp.test(t)){let _=t.match(Pt.netmaskCIDRRegexp);if(r=parseInt(_[1],10),r<0||r>32)throw new Error("Netmask CIDR is invalid");o=this.appOptionsService.convertToStandardNetmask(r.toString())}else{if(!new RegExp(Pt.netmaskRegexp).test(t))throw new Error("Netmask decimal is invalid");r=this.appOptionsService.netmaskToCIDR(t),o=t}let a=`${e}/${r}`,c=Fs.IPv4.networkAddressFromCIDR(a).octets.slice();return c[3]+=1,`${Fs.fromByteArray(c).toString()}/${r}`}updateAddressOptionFromInputs(){let e=this.formModel?.get("_ipobj_address"),t=this.formModel?.get("_ipobj_netmask"),r=e?.value?.trim()||"",o=t?.value?.trim()||"",s=e?.touched,a=t?.touched;if((e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&!s&&e?.markAsTouched(),(t?.value!==this.originalNetmask||e?.value!==this.originalAddress)&&!a&&t?.markAsTouched(),!r&&!o){this.clearIPFromGrid(),this.lastValidGridValue=null,this.formModel?.updateValueAndValidity();return}let l=r?this.appOptionsService.isValidIP(r):!1,c=o?this.appOptionsService.isValidMask(o):!1;if(!l||!c){!l&&!c?(this.appOptionsService.setControlError(e,"bothInvalid"),this.appOptionsService.setControlError(t,"bothInvalid"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK_INVALID")):l?(this.appOptionsService.setControlError(t,"invalidMask"),this.appOptionsService.clearControlErrors(e),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.NETMASK_INVALID")):(this.appOptionsService.setControlError(e,"invalidIP"),this.appOptionsService.clearControlErrors(t),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_INVALID")),this.formModel?.updateValueAndValidity();return}try{let d=Fs.parse(r),h;if(/^\/\d{1,2}$/.test(o))h=`${r}${o}`;else{let A=Fs.IPv4.parse(o).prefixLengthFromSubnetMask();if(A===null||A<0||A>32)throw new Error("Invalid netmask");h=`${r}/${A}`}let[_,C]=Fs.parseCIDR(h),I=Fs.IPv4.networkAddressFromCIDR(`${_.toString()}/${C}`);if(d.toString()!==I.toString()){this.appOptionsService.setControlError(e,"notNetworkAddress"),this.appOptionsService.setControlError(t,"notNetworkAddress"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NOT_IN_NETWORK",{network:I.toString()}),this.formModel?.updateValueAndValidity();return}if(this.appOptionsService.clearControlErrors(e),this.appOptionsService.clearControlErrors(t),!this.lastValidGridValue||this.lastValidGridValue.ip!==r||this.lastValidGridValue.mask!==o){let T=this.getFirstAvailableIP(r,o),A=this.object?.obj_type,U;if(A===O.OBJ_WGC_CONFIG_CLI)U=pe.wg_client_interface;else if(A===O.OBJ_WGS_CONFIG_SER)U=pe.wg_server_interface;else return;this.optionsGrids.forEach(z=>{z.getScope()===U&&z.modifyIPOption(Ic.O_ADDRESS,T)}),this.lastValidGridValue={ip:r,mask:o}}if(!s&&!a)return;(e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&(s||e?.markAsTouched(),a||t?.markAsTouched()),e?.value===this.originalAddress&&t?.value===this.originalNetmask&&!e?.errors&&!t?.errors&&(this.formModel?.markAsPristine(),e?.markAsPristine(),t?.markAsPristine())}catch(d){console.error("Error validating network address:",d),this.formModel?.updateValueAndValidity()}this.formModel?.updateValueAndValidity()}clearIPFromGrid(){let e=this.object?.obj_type,t=null;e===O.OBJ_WGC_CONFIG_CLI?t=pe.wg_client_interface:e===O.OBJ_WGS_CONFIG_SER&&(t=pe.wg_server_interface),t&&this.optionsGrids.forEach(r=>{r.getScope()===t&&r.modifyIPOption(Ic.O_ADDRESS,"")})}startTimeoutHandler(){this.timeoutTimer=setTimeout(()=>{this.eventsSubscription.unsubscribe(),this.doTimeoutOp()},fK)}refreshTimeoutHandler(){clearTimeout(this.timeoutTimer),this.startTimeoutHandler()}reloadPanel(){if(this.objectToDelete||this.objectToSearchWU){if(this.displayDialog||this.dialogMinified){if(this.objectToDelete){let e=Object.assign({},this.objectToDelete),t=this.itemSelectedService.getActualLastMinifiedDialogId();this.resetProperties(),this.onItemDelete(e),this.dialogId==t&&(this.showDialog(),this.itemSelectedService.setLastMinifiedDialogId(void 0))}else if(this.objectToSearchWU){let e=Object.assign({},this.objectToSearchWU);this.resetProperties(),this.showWhereUsed(e)}}this.store.dispatch(on.reloadDialogFinished({dialogUuid:this.dialogUUID}))}}resetProperties(){this.savingData=!1,this.loadingData=!1,this.disableButtons=!1,this.object=this.objectToDelete=this.objectToRetrieve=this.objectToManage=this.objectToSearchWU=this.configOrPrefixToDelete=null,this.remoteOptions=[],this.errorMsg=null,this.dependencies=null,this.deleteMsg=null,this.formModel&&this.formModel.reset()}checkWireGuardConfigCanBeDeleted(e){return new Promise((r,o)=>{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e._fwcObjId};this.fwcVpnService.checkWireGuardConfigRestrictions(s).subscribe({next:a=>{r(!0)},error:a=>{a.error&&a.error.restrictions?r(!1):o(a)}})})}onItemDelete(e,t){if(!e)return;let r,o,s;this.objectToDelete=e,this.loadingData=!0,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.deleteMsg=null,e.obj_type==O.OBJ_WGS_CONFIG_SER||e.obj_type==O.OBJ_WGC_CONFIG_CLI?(r=this.fwcVpnService.checkWireGuardConfigRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e._fwcObjId},s="VPN.CONFIG"):e.obj_type==O.OBJ_WIREGUARD_PREFIX&&(r=this.fwcVpnService.checkWireGuardPrefixRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj},s="VPN.WIREGUARD_PREFIX"),r&&(this.showDialog(),t&&this.recenterDialog(),r(o).subscribe(a=>{this.okToDelete=!0,this.configOrPrefixToDelete=Object.assign({},e),this.deleteMsg={type:"warning",title:this.translate.instant(s+".DELETE_WARN.SUMMARY"),text:this.translate.instant(s+".DELETE_WARN.TEXT",{name:e._fwcObjName})},this.dependencies=null,this.okToDelete=!0,this.loadingData=!1},a=>{a.error&&a.error.restrictions?(this.dependencies=a.error.restrictions,this.deleteMsg={type:"error",title:this.translate.instant(s+".ERRORS.RESTR_ERROR.SUMMARY"),text:this.translate.instant(s+".ERRORS.RESTR_ERROR.TEXT",{name:e._fwcObjName})}):(this.errorMsg={type:"error",title:this.translate.instant(s+".ERRORS.DELETE_ERROR.SUMMARY"),text:this.fwcErrorPipe.transform(a)},this.dependencies={restrictionsError:!0}),this.loadingData=!1,this.recenterDialog()}))}onItemGetFile(e){if(!e)return;this.objectToRetrieve=e,this.loadingData=!0,this.showDialog();let t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e._fwcObjId};this.fwcVpnService.getWireGuardConfigFile(t).subscribe({next:r=>{r.data?this.configFile=r.data.data?r.data.data.cfg:r.data.cfg:(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:r.error})},r.error&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r.error)})),this.loadingData=!1,this.recenterDialog()},error:r=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(r)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),this.loadingData=!1}})}getInstallFileName(e,t,r="wg"){return B(this,null,function*(){let o;this.operationQueue&&this.operationInProcessId<this.operationQueue.length&&(o=this.operationQueue[this.operationInProcessId]);let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:t,wireguard:o?.wireguard};try{let l=(yield this.utilService.fwcAPICall(this.fwcVpnService.getWireguardConfigFilename.bind(this.fwcVpnService),s))?.data?.data;if(l)return l}catch(a){console.error("Error fetching WireGuard config file",a)}})}onItemManage(e,t){if(!e)return;let r=e.id_obj,o,s,a,l=[],c=this.fwcUserService.getActualFwSelectedCloud();this.objectToManage=e,e.installAction?(this.configManageTranslateKey="VPN.CONFIG.INSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.installWireGuardConfig.bind(this.fwcVpnService)):e.uninstallAction?(this.configManageTranslateKey="VPN.CONFIG.UNINSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.uninstallWireGuardConfig.bind(this.fwcVpnService)):e.syncCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_STRINGS",this.configManageAPICall=this.fwcVpnService.syncWireGuardConfigCCD.bind(this.fwcVpnService)):e.syncPendingCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_PENDING_STRINGS",this.configManageAPICall=this.fwcVpnService.syncWireGuardConfigPendingCCD.bind(this.fwcVpnService)):this.configManageAPICall=null,this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.showDialog(),t&&this.recenterDialog(),this.channel_id=$r(),this.utilService.ioListenOnLogEvent(this.channel_id),this.startTimeoutHandler(),this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(d=>{this.refreshTimeoutHandler();let h=new bo(d),_;h.payload.type===Ne.MSG_ERROR&&(_=this.utilService.isCommunicationErrorStr(h.payload.message),this.pauseProcess=!0,this.operationWithErrors=!0,this.doTimeoutOp()),_?(this.continueButtonText=this.translate.instant("COMPILE.RETRY"),this.doTimeoutOp()):(this.log.addNewMessage(h),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"))}),e.parent_type==O.OBJ_CLUSTER?(a=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),s=e.parent_id,o=!0):e.parent_type==O.OBJ_FIREWALL&&(a=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),s=e.firewall,o=!1),a&&a(s,c).subscribe(d=>B(this,null,function*(){d.data&&d.data instanceof Array?l=d.data:d.data?(l=[],l.push(d.data)):l=[],this.operationQueue=[];let h;o&&(h={wireguard:r,clusterId:s,firewallId:s,firewallName:e._fwcClusterName,installState:Xt.FW_DISABLED,opInstalled:!1},this.operationQueue.push(Object.assign({},h)));let _=this.fwcUserService.getActualFwcUser().privateKey;for(let C=0;C<l.length;C++){let I=l[C],b=I.install_user,E=I.install_pass;try{b&&(b=yield this.utilService.openPGPDecrypt(b,_)),E&&(E=yield this.utilService.openPGPDecrypt(E,_))}catch{}h={clusterId:I.cluster,clusterName:e._fwcClusterName,isNode:!!I.cluster,wireguard:r,firewallId:l[C].id,firewallName:l[C].name,installState:Xt.FW_PENDING,opInstalled:!1,sshUser:b,sshPassword:E,installInterface:l[C].install_interface,installInterfaceName:l[C].interface_name,installIpobj:l[C].install_ipobj,installIpobjName:l[C].ip_name,installIpobjIP:l[C].ip,installCommunication:l[C].install_communication,installProtocol:l[C].install_protocol,installApikey:l[C].install_apikey,deleteAction:e.deleteAction},this.operationQueue.push(Object.assign({},h))}this.operationInProcessId=0,this.actualFirewallCompileSSHInputData=null,this.processWireGuardOperation(!0)}),d=>{d.error&&d.error.fwcErr==1002||this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)}),this.loadingData=!1})}processWireGuardOperation(e){let t;if(!this.pauseProcess&&(clearTimeout(this.timeoutTimer),this.operationQueue&&this.operationInProcessId<this.operationQueue.length)){let r=this.operationQueue[this.operationInProcessId];if(!r)return;if(this.operationWithErrors=!1,r.clusterId!==null&&r.clusterId!==void 0?t=this.translate.instant("COMPILE.INST_CLUSTER_NODE",{clusterName:r.clusterName,firewallName:r.firewallName}):t=this.translate.instant("COMPILE.INST_FW",{firewallName:r.firewallName}),r.installState==Xt.FW_PENDING)if(r.installState=Xt.FW_PROCESSING,e||this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".START",{name:t}),Ne.MSG_INFO),r.installInterface&&r.installIpobj)if(r.installCommunication==="ssh"){let o={header:this.translate.instant("COMPILE.INST_SSH",{name:t}),helpText:this.translate.instant("COMPILE.INST_SSH_TEXT"),modal:!1,formControls:[{name:"wireguard",type:"hidden",value:r.wireguard},{name:"firewall_id",type:"hidden",value:r.firewallId},{name:"interface_name",label:this.translate.instant("COMPILE.FIELDS.INST_IF"),icon:"fwci-interface fwcGreen",type:"text",value:r.installInterfaceName,readonly:!0,halfSized:!0},{name:"ip_name",label:this.translate.instant("COMPILE.FIELDS.INST_IP"),icon:"fwci-address fwcBlue",type:"text",value:r.installIpobjName+" ("+r.installIpobjIP+")",readonly:!0,halfSized:!0},{name:"",label:"",type:"separator"},{name:"ssh_user",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_USER"),type:"text",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_user:r.sshUser,setFocus:!0},{name:"",label:"",type:"separator"},{name:"ssh_password",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS"),type:"password",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_password:r.sshPassword},{name:"deleteAction",type:"hidden",value:r.deleteAction},{name:"btnPauseProcess",label:this.translate.instant("COMPILE.PAUSE"),type:"button",icon:"fa fa-pause",class:"p-button-warning",value:0,readonly:!this.operationInProcessId}],onAccept:this.manageConfig.bind(this)};this.disableButtons=!0,this.inputDataService.setInputData(o);return}else{let o={wireguard:r.wireguard,firewall_id:r.firewallId,interface_name:r.installInterfaceName,deleteAction:r.deleteAction,ip_name:void 0,ssh_user:void 0,ssh_password:void 0};this.disableButtons=!0,this.manageConfig(o)}else r.installState=Xt.FW_ERROR,setTimeout(()=>{this.confirmationService.confirm({key:"cdErrorFw",header:this.translate.instant("COMPILE.INST_SSH_ERROR"),message:this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName}),reject:()=>{this.doPauseProcess()},accept:()=>{let o=this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName});this.operationWithErrors=!0,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:t,error:o}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processWireGuardOperation()}})},1);else this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processWireGuardOperation(e)}}manageConfig(e){return B(this,null,function*(){if(!this.operationQueue||this.operationInProcessId>=this.operationQueue.length||!this.configManageAPICall)return;let t=this.operationQueue[this.operationInProcessId],r=t.clusterId!==null&&t.clusterId!==void 0?`cluster ${t.clusterId} - firewall ${t.firewallId} (${t.firewallName})`:`firewall ${t.firewallId} (${t.firewallName})`;if(this.disableButtons=!1,!e){t.installState=Xt.FW_WARNING,this.addMessageToLog(this.translate.instant("COMPILE.INST_WARNING",{name:r}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processWireGuardOperation();return}if(this.actualFirewallCompileSSHInputData=e,e.btnPauseProcess){t.installState=Xt.FW_PENDING,this.doPauseProcess(!0);return}clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(()=>this.doTimeoutOp(),fK),this.log.startDataLoad();let o=this.fwcUserService.getActualFwcUser().publicKey,s=e.ssh_user?yield this.utilService.openPGPEncrypt(e.ssh_user,o):null,a=e.ssh_password?yield this.utilService.openPGPEncrypt(e.ssh_password,o):null,l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e.wireguard,firewall:e.firewall_id,sshuser:s,sshpass:a};this.disableButtons=!0,this.communicationAPISubscription=this.utilService.fwcAPICallObservable(this.configManageAPICall,this.channel_id,l).subscribe({next:c=>{if(this.disableButtons=!1,t.installState=Xt.FW_OK,this.log&&this.log.stopDataLoad(),c.data?.data?.installName){let h=`wg-quick@${c.data.data.installName.split(".")[0]}`;this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".RELOAD"),Ne.MSG_INFO),this.utilService.fwcAPICall(this.fwcFirewallService.getSystemctlInformation.bind(this.fwcFirewallService),{fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:e.firewall_id,service:h,command:"reload"}).then(()=>{}).catch(()=>{this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".RELOAD_ERROR"),Ne.MSG_ERROR)})}let d=this.operationWithErrors?this.translate.instant(this.configManageTranslateKey+".COMPLETED_WITH_ERRORS"):this.translate.instant(this.configManageTranslateKey+".COMPLETED");this.addMessageToLog(d,Ne.MSG_OK),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.operationQueue&&this.operationInProcessId<this.operationQueue.length?this.processWireGuardOperation():e.deleteAction&&(this.operationWithErrors?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ERROR_HEADER"),message:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ASK_DELETE"),acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),rejectLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.NO"),rejectVisible:!0,accept:()=>this.onDeleteConfigurationOrPrefix()}):this.onDeleteConfigurationOrPrefix()),clearTimeout(this.timeoutTimer)},error:c=>{this.disableButtons=!1;let d=this.utilService.isCommunicationError(c.error);d?(t.installState=Xt.FW_PENDING,this.addMessageToLog(d,Ne.MSG_ERROR),this.continueButtonText=this.translate.instant("COMPILE.RETRY")):(c.error.fwcErr===9e3?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR.SSH_FORBIDDEN"),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK")}):(t.installState=Xt.FW_ERROR,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:r,error:c.error}),Ne.MSG_ERROR)),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.actualFirewallCompileSSHInputData=null),this.log.stopDataLoad(),this.operationInProcessId<this.operationQueue.length-1?this.doPauseProcess():clearTimeout(this.timeoutTimer)}})})}doTimeoutOp(){clearTimeout(this.timeoutTimer),this.pauseProcess=!0,this.loadingData=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_TIMEOUT"),Ne.MSG_WARNING))}doPauseProcess(e){this.pauseProcess=!0,this.loadingData=!1,clearTimeout(this.timeoutTimer),e&&this.addMessageToLog(this.translate.instant("COMPILE.WARN_PAUSE"),Ne.MSG_WARNING)}doContinueProcess(){this.pauseProcess=!1,this.processWireGuardOperation()}onItemSelect(e,t){return B(this,null,function*(){if(!e)return;this.loadingData=!0,this.showDialog();let r=e._fwcObjId,o=e.obj_type;if(e.obj_type==O.OBJ_WGC_CONFIG_CLI){this.headerTitle=this.translate.instant("VPN.CONFIG.WG_HEADER_CLI"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.IP_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP");let[s,a]=yield Promise.all([this.loadIPObjects(),this.loadDNSObjects()]);if(!s||!a)return;this.remoteOptions=[],this.remoteOptions.push(s),this.remoteOptions.push(a)}else this.headerTitle=this.translate.instant("VPN.CONFIG.WG_HEADER_SER"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.NETMASK_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK");if(r===void 0&&o!==void 0){let s=Object.assign({},e),a;if(s.obj_type==O.OBJ_WGC_CONFIG_CLI){s.options=Wt(hv).concat(Wt(fv));let l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e.vpn},c=yield this.getFirstFreeIP(l),d="",h="",_;c.data?(d=c.data.ip,h=c.data.netmask,_=c.data.id):(d=c.ip,h=c.netmask,_=c.id);let C=this.getOption(s.options,Ic.O_ADDRESS);s._ipobj_address=d,s._ipobj_netmask=h,s._ipobj_id=_,C.arg=d+h,s.wireguard=e.vpn;let I=this.getOption(s.options,"PrivateKey");I&&(I.arg=this.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY"));let b=this.getOption(s.options,"PublicKey");if(b){b.arg=this.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY");try{let E={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e.vpn},R=yield Jc(this.fwcVpnService.getWireGuardConfig(E));a=R.data.data||R.data;let T=a.public_key||"",A=this.fwcUserService.getActualFwcUser().privateKey;b.arg=yield this.utilService.openPGPDecrypt(T,A)}catch(E){console.error("Error retrieving configuration:",E)}}}else{s.options=Wt(uv);let l=this.getOption(s.options,"PrivateKey");l&&(l.arg=this.translate.instant("ITEM_PANEL.FIELDS.WGS_PRIVATE_KEY"))}this.createForm(s,!0,a),this.wireguardClientInterfaceOptions=this.formModel.controls.options.value.filter(l=>l.scope===pe.wg_client_interface),this.wireguardClientPeerOptions=this.formModel.controls.options.value.filter(l=>l.scope===pe.wg_client_peer),s.obj_type==O.OBJ_WGC_CONFIG_CLI&&!t&&setTimeout(()=>{let l=document.querySelector("button .fa-search")?.parentElement;l&&l.click()},300),this.loadingData=!1}else{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:r};this.fwcVpnService.getWireGuardConfig(s).subscribe({next:a=>B(this,null,function*(){if(a.data){let l=a.data.data?Object.assign({},a.data.data):Object.assign({},a.data);if(l.fwcloud=s.fwcloud,l.obj_type=e.obj_type,l.parent_type=e.parent_type,l.parent_name=e.parent_name,l._fwcParentConfigName=e._fwcParentConfigName,t){l.crt=e.crt,l._fwcCrtName=e._fwcCrtName,l._fwcObjId=void 0,l.node_id=e.node_id;let d=this.fwcUserService.getActualFwcUser().privateKey,h=yield this.utilService.openPGPDecrypt(l.private_key,d);if(e.obj_type==O.OBJ_WGC_CONFIG_CLI){let C=yield this.utilService.openPGPDecrypt(l.server_public_key,d),I={wireguard:s.wireguard,name:"PublicKey",arg:C,scope:pe.wg_client_peer};l.options.unshift(I)}let _={wireguard:s.wireguard,name:"PrivateKey",arg:h,scope:e.obj_type==O.OBJ_WGC_CONFIG_CLI?pe.wg_client_interface:pe.wg_server_interface};l.options.unshift(_),t&&(l.comment=null,l.options=l.options.map(C=>ke(oe({},C),{comment:null})))}else{l._fwcCrtName=e._fwcObjName,l._fwcObjId=r;let d=this.fwcUserService.getActualFwcUser().privateKey,h=yield this.utilService.openPGPDecrypt(l.private_key,d);if(e.obj_type==O.OBJ_WGC_CONFIG_CLI){let C=yield this.utilService.openPGPDecrypt(l.server_public_key,d),I={wireguard:s.wireguard,name:"PublicKey",arg:C,scope:pe.wg_client_peer};l.options.unshift(I)}let _={wireguard:s.wireguard,name:"PrivateKey",arg:h,scope:e.obj_type==O.OBJ_WGC_CONFIG_CLI?pe.wg_client_interface:pe.wg_server_interface};l.options.unshift(_)}let c=this.getOption(l.options,Ic.O_ADDRESS);c?this.fwcVpnService.getWireGuardConfigIPObjects(s).subscribe({next:d=>B(this,null,function*(){let h=d.data.data,_=h.find(C=>C.id==c.ipobj);if(_&&Object.keys(_).length!==0){let C=(I,b,E=!0)=>{let R=I.options.find(T=>T.name==="<<vpn_network>>");if(R&&R.arg){let T,A;R.arg.includes("/")?([T,A]=R.arg.trim().split("/"),I._ipobj_address=T,I._ipobj_netmask=`/${A}`):([T,A]=R.arg.trim().split(/\s+/),I._ipobj_address=T,I._ipobj_netmask=A),t&&(c.ipobj=null)}else I._ipobj_name=b.name||"",I._ipobj_address=b.address||"",I._ipobj_netmask=b.netmask||"",I._ipobj_id=t?null:b.id||"",t?(c.arg=`${b.address}${b.netmask}`,c.ipobj=null):c.arg=`${_.address}${_.netmask}`,c.readonly=E};if(e.obj_type==O.OBJ_WGC_CONFIG_CLI)if(t){let I={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e.vpn},b=yield this.getFirstFreeIP(I),E=b?.data||b||{};C(l,{address:E.ip||"",netmask:E.netmask||""})}else C(l,_||{});else{let I=h.find(b=>b.id==this.getOption(l.options,"<<vpn_network>>").ipobj);C(l,I||{})}if(e.obj_type==O.OBJ_WGS_CONFIG_SER&&this.fwcVpnService.getWireGuardClients(s).subscribe(I=>{if(this.wireguardClients=I.data.data,this.wireguardClients&&this.wireguardClients.length>0){let b=new Map;l.options=l.options?.filter(E=>E.wireguard_cli?(b.has(E.wireguard_cli)||b.set(E.wireguard_cli,[]),b.get(E.wireguard_cli)?.push(oe({},E)),!1):!0),Promise.all(this.wireguardClients.map(E=>B(this,null,function*(){try{return[{name:"AllowedIPs",arg:E.allowedips||"",wireguard:s.wireguard,wireguard_cli:E.id,scope:pe.wg_server_peer,readonly:!0}]}catch(R){return console.error(`Error processing client ${E.id}:`,R),[]}}))).then(E=>{this.wireguardClientsOptions=E.flat()}).catch(E=>{console.error("Error in Promise.all:",E)})}}),e.obj_type==O.OBJ_WGC_CONFIG_CLI){let I=l.options.filter(b=>b.name=="remote");I.length&&(I.forEach(b=>{for(let E=0;E<h.length;E++){let R=h[E];if(b.ipobj==R.id){let T;R.type==O.OBJ_ADDRESS?T=R.address:R.type==O.OBJ_DNS&&(T=R.name),T&&(b.arg=T+" "+b.arg);break}}}),this.disabledTreeRemoteOptions=I)}this.createForm(l,t),this.wireguardClientInterfaceOptions=this.formModel.controls.options.value.filter(I=>I.scope===pe.wg_client_interface),this.wireguardClientPeerOptions=this.formModel.controls.options.value.filter(I=>I.scope===pe.wg_client_peer),this.loadingData=!1,this.recenterDialog(),this.showDialog()}}),error:d=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.TEXT",{error:this.fwcErrorPipe.transform(d)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)}),this.loadingData=!1}}):(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.TEXT")},this.loadingData=!1)}else a.error&&(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(a.error)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a.error)})),this.loadingData=!1}),error:a=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(a)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),this.loadingData=!1}})}})}loadIPObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-ipobjects fwcBlue",value:this.translate.instant("NODE_TYPES.OIA"),items:[]},t(o)}),e}loadDNSObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-firewall fwcBlue",value:"DNS",items:[]},t(o)}),e}createForm(e,t,r){return B(this,null,function*(){if(!e)return;let o=e.data?e.data.options:e.options;o.forEach(_=>{zJe.findIndex(C=>_.name==C)!=-1&&(_.required=!0,_.readonly=!0)}),this.formModel=new rr({fwcloud:new ve(e.fwcloud),wireguard:new ve(e.wireguard),firewall:new ve(e.firewall,Pe.required),crt:new ve(e.crt,Pe.required),node_id:new ve(e.node_id),comment:new ve(e.comment),options:new Hr(this.createWireGuardOptions(o))});let s=`VPN-${e.parent_name}-${e._fwcCrtName}`;if(e.obj_type==O.OBJ_WGS_CONFIG_SER){s=`LAN-VPN-${e._fwcCrtName}`;let _=e.firewall,C;e.install_name?C=e.install_name:C=yield this.getInstallFileName(e.install_dir||"/etc/wireguard",_),this.formModel.addControl("install_dir",new ve(e.install_dir||"/etc/wireguard",[Pe.required,Pe.pattern(Pt.posixPathRegexp)])),this.formModel.addControl("install_name",new ve(C,[Pe.required,Pe.pattern(Pt.wireGuardInstallName)]));let I=o.find(b=>b.name==="PrivateKey");if(I&&e.private_key){let b=this.fwcUserService.getActualFwcUser().privateKey;I.arg=yield this.utilService.openPGPDecrypt(e.private_key,b)}}else e.obj_type==O.OBJ_WGC_CONFIG_CLI&&(this.formModel.controls.wireguard.setValue(e.wireguard),this.formModel.addControl("_remote_options",new Hr(this.createWireGuardOptions(o))));let a=e.obj_type===O.OBJ_WGC_CONFIG_CLI?e._fwcCrtName:s;a=a.substring(0,64);let l,c,d;e.obj_type===O.OBJ_WGC_CONFIG_CLI?(l=o.find(_=>_.name==="address")?.arg.split("/")||[],c=e._ipobj_address||l[0],d=e._ipobj_netmask||(l[1]?`/${l[1]}`:"")):(c=e._ipobj_address,d=e._ipobj_netmask),this.formModel.addControl("_ipobj_id",new ve(o[0].ipobj)),this.formModel.addControl("_ipobj_name",new ve(a,[Pe.required,Pe.pattern(Pt.nameRegExp)])),this.formModel.addControl("_ipobj_address",new ve({value:c,disabled:e.obj_type==O.OBJ_WGC_CONFIG_CLI})),this.formModel.addControl("_ipobj_netmask",new ve({value:d,disabled:e.obj_type==O.OBJ_WGC_CONFIG_CLI})),t&&this.formModel.markAsDirty();let h={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:e.wireguard};this.formModelRemote=new rr({id_obj:new ve(void 0,[Pe.required]),obj_type:new ve(void 0,[Pe.required]),remote_port:new ve(void 0,[Pe.required,Pe.min(0),Pe.max(65535)])}),this.formModelRemote&&e.obj_type==O.OBJ_WGC_CONFIG_CLI&&this.fwcVpnService.getWireGuardConfig(h).subscribe(_=>{if(_.data){let C=_.data.data;if(C?.options){let I=C.options.find(E=>E.name==="ListenPort");I&&this.formModelRemote.controls.remote_port.setValue(I.arg);let b=C.options.find(E=>E.name==="<<vpn_network>>");if(b){let E=b.arg?.trim();if(E){let[R,T]=E.split(" ").map(A=>A.trim());if(E.includes("/"))this.vpnNetwork=E;else if(R&&T){let A=this.appOptionsService.netmaskToCIDR(T);this.vpnNetwork=`${R}/${A}`}this.cd.detectChanges()}}}}},_=>{console.error("Error getting getWireGuardConfig:",_)}),this.object=e})}createWireGuardOptions(e){let t=[];for(let r of e){let o=r.ipobj??null,s=r.arg;r.name==="Address"&&r.ipobj&&(o=r.ipobj);let a=[];(r.name==="Endpoint"||r.name==="Address")&&a.push(Pe.required),a.push(c=>Dp.wireGuardOptionValidator(r.name)(c));let l=new rr({name:new ve(r.name,Pe.required),arg:new ve(s,a),ipobj:new ve(o),scope:new ve(r.scope,Pe.required),comment:new ve(r.comment),wireguard_cli:new ve(r.wireguard_cli,r.wireguard_cli?[Pe.required]:[])});r.emptyMessageKey&&l.addControl("emptyMessageKey",new ve(r.emptyMessageKey)),t.push(l)}return t}handleValidationStatus(e){if(!e?.option?.name)return;let t=this.formModel.get("_remote_options");if(!t||!Array.isArray(t.controls))return;let r=t.controls.find(s=>s.get("name")?.value===e.option.name);if(!r)return;let o=r.get("arg");o&&(o.value!==e.value&&o.setValue(e.value,{emitEvent:!1}),o.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e.valid?o.setErrors(null):o.setErrors({invalid:!0}),o.markAsDirty(),o.markAsTouched(),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity())}findOptionGroup(e){let t=this.formModel.get("options");return t&&(t instanceof yp?t.controls:t instanceof xa?Object.values(t.controls):[]).find(o=>o.get("name")?.value===e)||null}onCancel(e){!e&&this.formModel&&!this.formModel.pristine&&this.formModel.valid?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("VPN.PANEL.MSG_EXIT"),accept:()=>{this.onCancel(!0)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):(this.hideDialog(),this.optionsGrids.forEach(t=>{t.clearOptions()}),this.log&&this.log.clearMessages(),this.operationQueue=[],this.wireguardClients=[],this.operationInProcessId=void 0,this.actualFirewallCompileSSHInputData=null,this.pauseProcess=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.objectToManage&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:this.objectToManage.container}),this.resetProperties())}checkForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModel.valid&&(e.target.blur(),this.onSave(0))}onSave(e=0){return B(this,null,function*(){if(!this.object)return;let t=[];this.optionsGrids.forEach(I=>{let b=I.getOptions();t=t.concat(b)});for(let I=0;I<t.length;I++)t[I].name&&!t[I].name.length&&delete t[I];let r={},o;for(let I in this.formModel.controls)r[I]=this.formModel.controls[I].value!==null&&this.formModel.controls[I].value!==void 0?this.formModel.controls[I].value:void 0;let s=t.filter(I=>I.name&&I.name.trim().length>0);r.options=s.map(I=>({name:I.name,arg:I.arg,scope:I.scope,comment:I.comment,ipobj:I.ipobj,wireguard_cli:I.wireguard_cli})),r.options.some(I=>I.name==="PublicKey"||I.name==="PrivateKey")&&(r.options=r.options.filter(I=>I.name!=="PublicKey"&&I.name!=="PrivateKey")),r.options.forEach(I=>{if(I.wireguard_cli&&I.name==="AllowedIPs"&&I.wireguard_cli&&I.name==="AllowedIPs"&&I.arg.includes(",")){let b=I.arg.indexOf(",");I.arg=I.arg.substring(b+1).trim()}});let l=this.object.obj_type===O.OBJ_WGC_CONFIG_CLI?"Address":"<<vpn_network>>",c=r.options.find(I=>I.name===l);o={id:c&&c.ipobj?c.ipobj:void 0,type:void 0,fwcloud:r.fwcloud,name:r._ipobj_name,address:r._ipobj_address,netmask:r._ipobj_netmask,ip_version:4,node_parent:void 0,node_order:1,node_type:void 0,force:e};let d,h;if(this.object.obj_type==O.OBJ_WGC_CONFIG_CLI)o.type=O.OBJ_ADDRESS,o.node_type=M.OBJ_ADDRESS,d=M.FOLDER_ADDRESSES,h=Ic.O_ADDRESS;else if(this.object.obj_type==O.OBJ_WGS_CONFIG_SER){o.type=O.OBJ_NETWORK,o.node_type=M.OBJ_NETWORK,d=M.FOLDER_NETWORKS,h=Ic.O_VPN_NETWORK;let I=r.options.find(U=>U.name==="<<vpn_network>>"),b=this.formModel.controls._ipobj_address.value,E=this.formModel.controls._ipobj_netmask.value,T=/^\/?\d{1,2}$/.test(E)?E.startsWith("/")?E:"/"+E:" "+E,A=b+T;I?I.arg=A:r.options.push({name:"<<vpn_network>>",arg:A,ipobj:void 0,scope:pe.wg_server_interface})}delete r._ipobj_id,delete r._ipobj_address,delete r._ipobj_name,delete r._ipobj_netmask,delete r._remote_options;let _,C;if(this.object._fwcObjId===void 0){_=this.fwcVpnService.newWireGuardConfig.bind(this.fwcVpnService);let I=yield this.getParentId(d);if(I==-1){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK"),detail:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK_PARENT_NODE")}),this.loadingData=!1;return}this.object.obj_type==O.OBJ_WGS_CONFIG_SER?(C=this.translate.instant("VPN.CONFIG.NEW_SERVER_CFG_OK"),o.node_parent=I):this.object.obj_type==O.OBJ_WGC_CONFIG_CLI&&(C=this.translate.instant("VPN.CONFIG.NEW_CLIENT_CFG_OK"))}else r.wireguard=this.object._fwcObjId,delete o.node_order,delete o.node_type,delete r.crt,_=this.fwcVpnService.updateWireGuardConfig.bind(this.fwcVpnService),this.object.obj_type==O.OBJ_WGS_CONFIG_SER?C=this.translate.instant("VPN.CONFIG.UPDATE_SERVER_CFG_OK"):C=this.translate.instant("VPN.CONFIG.UPDATE_CLIENT_CFG_OK");this.savingData=!0,this.manageNetworkIPObject(o).then(I=>{let b;I.data&&(b=I.data.insertId),this.modifyOption(r.options,h,void 0,b),this.proceedWithWireGuardConfig(r,C,_)},I=>{I.error&&I.error.fwcErr!=1003&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)}),this.savingData=!1})})}proceedWithWireGuardConfig(e,t,r){this.clearOptionsArgs(e.options),this.utilService.fwcAPICall(r,e).then(o=>{let s=o.data&&o.data.data&&o.data.data.insertId?o.data.data.insertId:e.wireguard,a={container:qe.C_FIREWALLS_CONDENSED,_fwcObjId:s,_fwcObjType:this.object.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(a),a.container=qe.C_FIREWALLS,this.itemSelectedService.setModifiedItem(a),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:t}),this.savingData=!1,this.hideDialog(),this.resetProperties()}).catch(o=>{if(o.error){let s=JSON.parse(o.error.msg);if(s.errors){let l=Object.values(s.errors).flat().join(", <br>");this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)})}else s.data.code==="ER_DUP_ENTRY"?this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.CONFIG.ERRORS.CLONE_CONFIG_ERROR.SUMMARY"),detail:this.translate.instant("VPN.CONFIG.ERRORS.CLONE_CONFIG_ERROR.TEXT")}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s.message)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)});this.savingData=!1})}getParentId(e){let t;return t=new Promise((r,o)=>{this.fwcObjectTreeService.getNodes(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a=-1;s.data&&s.data.length&&(a=s.data[0].id),r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(-1)})}),t}getClusterMasterFirewall(e){let t;return t=new Promise((r,o)=>{this.fwcFirewallService.getClusterMasterNode(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a;a=s.data,r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(void 0)})}),t}getFirstFreeIP(e){return new Promise(t=>{this.fwcVpnService.getWireGuardVPNLanNextFreeIP(e).subscribe({next:r=>{t(r.data)},error:r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),t(void 0)}})})}modifyOption(e,t,r,o){let s=e.find(a=>a.name==t);s&&(r&&(s.arg=r),o!=null&&(s.ipobj=o))}getOption(e,t){return e.find(r=>r.name==t)}clearOptionsArgs(e){e.forEach(t=>{t.ipobj!==void 0&&t.ipobj!==null&&t.name!=="Endpoint"&&t.name!=="Address"&&t.name!=="<<vpn_network>>"&&(t.arg="")})}manageNetworkIPObject(e){return new Promise((t,r)=>B(this,null,function*(){let o,a=this.formModel.get("options").controls.find(l=>l.value.name==="<<vpn_network>>");if(e.id===void 0)o=this.fwcObjectService.newObject.bind(this.fwcObjectService);else{if(this.formModel.controls._ipobj_address.pristine&&this.formModel.controls._ipobj_netmask.pristine&&(!a||a.pristine)){t({data:void 0});return}o=this.fwcObjectService.updateObject.bind(this.fwcObjectService)}if(e.netmask&&!e.netmask.startsWith("/"))try{let l=this.appOptionsService.netmaskToCIDR(e.netmask);e.netmask=`/${l}`}catch(l){console.error("Error converting netmask into CIDR:",l)}try{let l=yield this.utilService.fwcAPICall(o,e);t(l)}catch(l){l.error?.fwcErr===1003&&this.confirmDuplicateWireGuardOperation(l),r(l)}}))}updateIPOnGrid(e){let t=this.formModel.controls._ipobj_address.value,r="",o,s,a;if(this.object.obj_type==O.OBJ_WGC_CONFIG_CLI)t.match(Pt.ipV4Regexp)&&(a=t),o=pe.wg_client_interface,s=Ic.O_ADDRESS;else if(this.object.obj_type==O.OBJ_WGS_CONFIG_SER){let l=this.formModel.controls._ipobj_address?.value?.trim(),c=this.formModel.controls._ipobj_netmask?.value?.trim(),d=!1,h=!1;if(Fs.isValid(l)&&(d=Fs.parse(l).kind()==="ipv4"),c)if(/^\d{1,2}$/.test(c)){let _=parseInt(c,10);h=_>=0&&_<=32,c="/"+_}else if(c.startsWith("/")&&/^\d{1,2}$/.test(c.slice(1))){let _=parseInt(c.slice(1),10);h=_>=0&&_<=32}else try{h=Fs.parse(c).kind()==="ipv4"&&Fs.IPv4.parse(c).prefixLengthFromSubnetMask()!==null}catch{h=!1}d&&h&&(a=c.startsWith("/")?`${l}${c}`:`${l} ${c}`,o=pe.wg_server_interface,s=Ic.O_ADDRESS)}a&&this.optionsGrids.forEach(l=>{l.getScope()===o&&l.modifyIPOption(s,a)})}confirmDuplicateWireGuardOperation(e){let t="",r=[];if(e.data&&e.data.length){r=e.data,t="<ul>";for(let o=0;o<r.length;o++)t+="<li><strong>"+r[o].name+"</strong> ("+r[o].id+") </li>";t+="</ul>"}this.confirmationService.confirm({header:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.SUMMARY"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.TEXT",{objects:t}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.onSave(1)}})}onDownloadConfigFile(){let e="";if(!this.objectToRetrieve)return;if(this.objectToRetrieve._fwcObjType==O.OBJ_WGS_CONFIG_SER)e=this.objectToRetrieve._fwcObjName?this.objectToRetrieve._fwcObjName.replace(/[^a-z0-9]/gi,"_"):"WireGuard_Server",e+=".conf";else if(this.objectToRetrieve._fwcObjType==O.OBJ_WGC_CONFIG_CLI){let r=[];r.push(this.fwcUserService.getActualFwcUser().selectedFwCloudName||"FWCLOUD"),r.push(this.objectToRetrieve._fwcFwName||"FW"),r.push(this.objectToRetrieve._fwcObjName||"WireGuard_Client"),r=r.map(o=>o.replace(/[^a-z0-9\-]/gi,"_")),e=r.join("-"),e+=".WireGuard"}let t=new Blob([this.configFile],{type:"text/plain;charset=utf-8"});(0,mK.saveAs)(t,e)}onCopyConfigFile(){this.txtConfigFile&&(this.txtConfigFile.nativeElement.select(),document.execCommand("copy"),this.txtConfigFile.nativeElement.setSelectionRange(0,0),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("VPN.CONFIG.CLIPBOARD.COPIED_OK")}))}onProcessDeleteAction(){if(this.configOrPrefixToDelete)if(this.configOrPrefixToDelete.obj_type==O.OBJ_WGS_CONFIG_SER||this.configOrPrefixToDelete.obj_type==O.OBJ_WGC_CONFIG_CLI)if(this.alsoUninstallConfig){this.objectToDelete=null,this.configOrPrefixToDelete.uninstallAction=!0;let e=this.utilService.createDynamicComponentRef(fo),t=e.instance;t.setDynamicComponentRef(e),this.communicationSubscription=t.socketEventEmitter.subscribe(r=>{r=="connected"&&this.onItemManage(this.configOrPrefixToDelete,!0),this.communicationSubscription.unsubscribe()}),t.checkConnection()}else this.onDeleteConfigurationOrPrefix();else this.onDeleteConfigurationOrPrefix()}onDeleteConfigurationOrPrefix(){if(!this.configOrPrefixToDelete)return;let e,t,r,o=this.configOrPrefixToDelete;o.obj_type==O.OBJ_WGS_CONFIG_SER||o.obj_type==O.OBJ_WGC_CONFIG_CLI?(e=this.fwcVpnService.deleteWireGuardConfig.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:this.configOrPrefixToDelete._fwcObjId},r="VPN.CONFIG"):o.obj_type==O.OBJ_WIREGUARD_PREFIX&&(e=this.fwcVpnService.deleteWireGuardPrefix.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:o.id_obj},r="VPN.WIREGUARD_PREFIX"),e&&(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(r+".DELETING",{name:"WireGuard client"}),Ne.MSG_INFO),this.utilService.fwcAPICall(e,t).then(s=>{let a=Object.assign({},this.configOrPrefixToDelete);a._fwcTreeAction=mi.DELETE_ITEM,s.data&&s.data.length&&(a.fw_status=s.data),this.itemSelectedService.setModifiedItem(a),this.log||(this.hideDialog(),this.resetProperties()),o.obj_type==O.OBJ_WGS_CONFIG_SER||o.obj_type==O.OBJ_WGC_CONFIG_CLI?(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.CONFIG.WG_DELETE_SUCCESS")}),this.addMessageToLog(this.translate.instant("VPN.CONFIG.WG_DELETE_SUCCESS"),Ne.MSG_OK)):this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.WIREGUARD_PREFIX.DELETE.OK")})}).catch(s=>{let a;a=this.translate.instant(r+".ERRORS.DELETE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(s)}),this.errorMsg={type:"error",title:this.translate.instant(r+".ERRORS.DELETE_ERROR.SUMMARY"),text:a},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),this.log&&this.addMessageToLog(a,Ne.MSG_ERROR)}))}showRestrictions(e,t){}hideRestrictions(e){}managePrefix(e){let t,r,o,s,a,l,c,d;if(e)if(e.deletePrefixFolderAction){let h={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj};if(e.obj_type==O.OBJ_PREFIX_FOLDER)l=this.fwcVpnService.checkPrefixFolderRestrictions.bind(this.fwcVpnService),c=this.fwcVpnService.deletePrefixFolder.bind(this.fwcVpnService),a="VPN.PREFIX_FOLDER";else return;l(h).subscribe(_=>{this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant(a+".DELETE.ASK",{name:e._fwcObjName}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.utilService.fwcAPICall(c,h).then(C=>{if(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant(a+".DELETE.OK")}),e._fwcTreeAction=mi.DELETE_ITEM,this.itemSelectedService.setModifiedItem(e),e.container!=qe.C_FIREWALLS_CONDENSED){let I={_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED};this.itemSelectedService.setModifiedItem(I)}}).catch(C=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(C)})})}})},_=>{_.error&&_.error.restrictions?(this.dependencies=_.error.restrictions,this.confirmationService.confirm({header:this.translate.instant(a+".DELETE.RESTR_HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(a+".DELETE.RESTR_TEXT",{name:e._fwcObjName})})):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(_)})})}else{let h,_,C={[O.OBJ_PREFIX_FOLDER]:[this.fwcVpnService.editPrefixFolder.bind(this.fwcVpnService),this.fwcVpnService.newPrefixFolder.bind(this.fwcVpnService)],[O.OBJ_WIREGUARD_PREFIX]:[this.fwcVpnService.editWireGuardPrefix.bind(this.fwcVpnService),this.fwcVpnService.newWireGuardPrefix.bind(this.fwcVpnService)]};if(e.obj_type==O.OBJ_PREFIX_FOLDER)h=e.id_obj,a="VPN.PREFIX_FOLDER";else if(e.obj_type==O.OBJ_WIREGUARD_PREFIX)_=e.id_obj,a="VPN.WIREGUARD_PREFIX";else return;if(e.editPrefixAction)t=e._fwcObjName,r=e.id_obj,o=this.translate.instant(a+".EDIT.HEADER"),s=this.translate.instant(a+".EDIT.TEXT"),C[e.obj_type]&&C[e.obj_type][0]&&(d=C[e.obj_type][0]);else if(e.newPrefixAction)o=this.translate.instant(a+".NEW.HEADER"),s=this.translate.instant(a+".NEW.TEXT"),C[e.obj_type]&&C[e.obj_type][1]&&(d=C[e.obj_type][1]);else return;let I={header:o,helpText:s,formControls:[{name:"container",type:"hidden",value:e.container},{name:"id",type:"hidden",value:r},{name:"obj_type",type:"hidden",value:e.obj_type},{name:"ca",type:"hidden",value:h},{name:"orig_name",type:"hidden",value:t},{name:"name",label:this.translate.instant(a+".NAME"),type:"text",required:!0,value:t},{name:"wireguard",type:"hidden",value:_},{name:"translateKey",type:"hidden",value:a},{name:"apiCall",type:"hidden",value:d}],onAccept:this.onManagePrefix.bind(this)};this.inputDataService.setInputData(I)}}onManagePrefix(e){if(e){if(e.name==e.orig_name)return;let t,r,o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),name:e.name},s;t=e.translateKey,r=e.apiCall,e.id?(o.prefix=e.id,s=this.translate.instant(t+".EDIT.OK")):(o.ca=e.ca,o.wireguard=e.wireguard,s=this.translate.instant(t+".NEW.OK")),this.utilService.fwcAPICall(r,o).then(a=>{let l=a.data&&a.data.insertId?a.data.insertId:e.id;this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:s});let c={container:e.container,_fwcObjName:e.name,_fwcObjId:l,_fwcObjType:e.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(c),e.container!=qe.C_FIREWALLS_CONDENSED&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED}),this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_OBJECTS}),this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]}))}).catch(a=>{let l,c;a.data&&(a.data.fwcErr==1003?(l=this.translate.instant(t+".ERRORS.ERROR_DUP.SUMMARY"),c=this.translate.instant(t+".ERRORS.ERROR_DUP.TEXT")):a.data.fwcErr==5001?(l=this.translate.instant("VPN.WIREGUARD_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.SUMMARY"),c=this.translate.instant("VPN.WIREGUARD_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.TEXT")):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)})),c&&this.confirmationService.confirm({header:l,icon:"fa fa-exclamation-circle fwcRed iconBig",message:c,rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})})}}showWhereUsed(e){if(!e)return;this.objectToSearchWU=e;let t,r;r={fwcloud:this.fwcUserService.getActualFwSelectedCloud()},e.obj_type==O.OBJ_WIREGUARD_PREFIX?(t=this.fwcVpnService.getWireGuardWhereUsed.bind(this.fwcVpnService),r.prefix=e._fwcObjId):e.obj_type==O.OBJ_WGC_CONFIG_CLI&&(t=this.fwcVpnService.getWireGuardConfigWhereUsed.bind(this.fwcVpnService),r.wireguard=e._fwcObjId),this.showDialog(),t&&t(r).subscribe(o=>{let s=o.data.data?Object.assign({},o.data.data):Object.assign({},o.data);s._fwcObjType=e.obj_type,this.objectToSearchWU._fwcObjectInfo=s,this.recenterDialog()},o=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.WHERE_USED.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(o)})}})}blockUnblockVPNConnection(e){let t=e._fwcObjId,r={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),wireguard:t},o;this.fwcVpnService.getWireGuardConfig(r).pipe(Yn(s=>{let a=s.data.data;Array.isArray(a.options)||(a.options=[]);let l,c=[];if(a.options.forEach(d=>{c.push({arg:d.arg,comment:d.comment,ipobj:d.ipobj,name:d.name,scope:d.scope})}),e.blockVPNAction){if(o="VPN.CONFIG.INFO.BLOCK_VPN",c.find(d=>d.name==="<<disable>>"))return vt(null);c.push({arg:"",comment:"",ipobj:null,name:"<<disable>>",scope:pe.wg_client_interface})}else if(o="VPN.CONFIG.INFO.UNBLOCK_VPN",c.find(d=>d.name==="<<disable>>"))c=c.filter(d=>d.name!=="<<disable>>");else return vt(null);return c=c.sort((d,h)=>d.scope-h.scope),l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:a.firewall,wireguard:a.id,options:c},bn(this.utilService.fwcAPICall(this.fwcVpnService.updateWireGuardConfig.bind(this.fwcVpnService),l))})).subscribe({next:s=>{s===null||this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant(o+".SUMMARY"),detail:this.translate.instant(o+".TEXT")});let a=this.utilService.createDynamicComponentRef(fo),l=a.instance;l.setDynamicComponentRef(a),this.communicationSubscription=l.socketEventEmitter.subscribe(c=>{c=="connected"&&(e.installAction=!0,this.onItemManage(e)),this.communicationSubscription.unsubscribe()}),l.checkConnection()},error:s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.SUMMARY"),detail:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.TEXT")})}})}onAddRemoteOption(){if(!this.formModelRemote||!this.formModelRemote.valid)return;let e=this.formModelRemote.value,t=this.optionsGrids.find(o=>o.getScope()===pe.wg_client_peer);if(!t)return;let r=[...t.getOptions()];r.forEach(o=>{t.updateOrCreateIPOption(o,!0)}),this.fwcObjectService.getObject(e.id_obj,this.fwcUserService.getActualFwSelectedCloud()).subscribe({next:o=>{if(!o.data)return;let s=o.data,a="",l="";e.obj_type===O.OBJ_ADDRESS&&(a=s.address),e.obj_type===O.OBJ_DNS&&(a=s.name),a+=":"+e.remote_port,s.if_name?(s.cluster_name?l+=`Cluster '${s.cluster_name}'`:s.firewall_name?l+=`Firewall '${s.firewall_name}'`:s.host_name&&(l+=`Host '${s.host_name}'`),l+=` - IF '${s.if_name}'`):l+=s.name;let c={name:"Endpoint",scope:pe.wg_client_peer,arg:a,ipobj:e.id_obj,required:!0,readonly:!0},d=r.findIndex(h=>h.name==="Endpoint");d>=0?r[d]=c:r.push(c),r.forEach(h=>{t.updateOrCreateIPOption(h,!0)}),this.formModel.controls._remote_options=new Hr(this.createWireGuardOptions(r)),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity()},error:o=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(o)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)})}})}onRemoteIPObjectChange(e){!e||e.obj_type!=O.OBJ_ADDRESS&&e.obj_type!=O.OBJ_DNS||(this.formModelRemote.get("id_obj").setValue(e.id_obj),this.formModelRemote.get("obj_type").setValue(e.obj_type))}updateOptions(e){let t=[],r=[...this.formModel.get("options")?.value];if(this.optionsGrids.forEach(o=>{(!e||o.getScope()==e)&&(t=t.concat(o.getOptions()))}),t.length===r.length){let o=new Set(r.map(l=>l.name)),s=new Set(t.map(l=>l.name));if(!(o.size===s.size&&[...o].every(l=>s.has(l))))for(let l=0;l<t.length;l++){let c=t[l],d=r[l];d&&(d.name,c.name)}}t.length&&(this.formModel.removeControl("options"),this.formModel.addControl("options",new Hr(this.createWireGuardOptions(t))),this.formModel.controls._remote_options&&(this.formModel.removeControl("_remote_options"),this.formModel.addControl("_remote_options",new Hr(this.createWireGuardOptions(t)))),this.formModel.updateValueAndValidity())}onOptionsChange(e){if(!Array.isArray(e)){this.formModel.markAsDirty();return}let t=this.formModel.get("options"),r=this.createWireGuardOptions(e),o=t.controls.map(a=>a.value),s=r.map(a=>a.value);JSON.stringify(o)!==JSON.stringify(s)&&(t.clear(),r.forEach(a=>{t.push(a),a.markAsDirty(),a.updateValueAndValidity()}),e.some(a=>a.wireguard_cli)&&(this.wireguardClientsOptions=e.filter(a=>a.wireguard_cli)),e.some(a=>a.scope===pe.wg_client_interface)&&(this.wireguardClientInterfaceOptions=e.filter(a=>a.scope===pe.wg_client_interface)),e.some(a=>a.scope===pe.wg_client_peer)&&(this.wireguardClientPeerOptions=e.filter(a=>a.scope===pe.wg_client_peer)),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity(),this.cd.detectChanges()),setTimeout(()=>{this.recenterDialog()},0)}onOptionsDelete(e,t){e&&e.name=="remote"&&e.ipobj&&this.updateOptions(t),this.formModel.markAsDirty()}getServerPeerOptions(e){return this.wireguardClientsOptions.filter(t=>t.wireguard_cli===e||t.wireguard===e)}getClientInterfaceOptions(){return this.wireguardClientInterfaceOptions.filter(e=>e.scope===pe.wg_client_interface)}getClientPeerOptions(){return this.wireguardClientPeerOptions.filter(e=>e.scope===pe.wg_client_peer)}onShowDialog(e){this.recenterDialog()}onHideDialog(e){}doStopProcess(){this.pauseProcess=!0,this.stopProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_STOP"),Ne.MSG_ERROR)),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.eventsSubscription&&(this.eventsSubscription.unsubscribe(),this.eventsSubscription=null)}onClientsChanged(e){this.wireguardClients=e}allowOnlyNumbersAndDot(e){let t=/[0-9.]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}allowNumbersDotAndSlash(e){let t=/[0-9.\/]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}markFormAsDirty(){this.formModel?.pristine&&this.formModel.markAsDirty()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(at),S(Dt),S(Vi),S(En),S(er),S(Cr),S(Ei),S(Ye),S(Jt),S(ft),S(dn),S(Kt),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-wireguard-config-panel"]],viewQuery:function(t,r){if(t&1&&(le(Zo,5),le(G$e,5),le(pr,5),le(H$e,5),le(xg,5)),t&2){let o;te(o=ie())&&(r.treeSelector=o.first),te(o=ie())&&(r.txtConfigFile=o.first),te(o=ie())&&(r.log=o.first),te(o=ie())&&(r.gridComponent=o.first),te(o=ie())&&(r.optionsGrids=o)}},inputs:{restrictionsReadOnly:"restrictionsReadOnly"},outputs:{showPeerListDialog:"showPeerListDialog"},features:[et([Vi,En,Dt]),Se],decls:11,vars:14,consts:[["dlgOVConfigPanel",""],["txtConfigFile",""],["treeSelector",""],["styleClass","dlgFwcDialog fwcObjectDialog",3,"visibleChange","onShow","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[1,"grid"],[1,"grid","grid","grid-nogutter"],[3,"objectInfo","readOnly"],["styleClass","objectInfoTab"],["pTemplate","footer"],[1,"divFormHeader"],[1,"divHeaderButtons"],[1,"fwcWhite","fwcIconLeft"],[1,"fwci-edit","fwcOrange"],[1,"fwci-whereused","fwcOrange"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],[1,"col-12","divCentered"],[1,"col-12"],[3,"message"],[1,"fwcRestrictionsContainer"],[3,"onHideParent","onRefreshRestrictions","dependencies","readOnly"],[1,"col-12",2,"text-align","center"],["name","chkUninstallConfig","binary","true",3,"ngModelChange","ngModel","label"],[1,"col-12","divConfigFile"],["pInputTextarea","","rows","15","readonly",""],[1,"col-4"],[1,"divTableScroll"],[1,"tableFw","unstriped"],[1,"fwc-centered"],[3,"ngClass"],[1,"col-8"],[1,"fwcMenuIcon","fwci-cluster","fwcOrange"],[1,"fwcSepShort"],[1,"fwcMenuIcon","fwci-firewall","fwcBlue"],[3,"onHideParent","objectInfo","readOnly"],["leftIcon","fa fa-pencil",3,"header"],[1,"fwcObjectPanel"],[3,"formGroup"],[3,"keyup.enter","keyup.esc"],[1,"grid","grid-nogutter"],[1,"col-12","divOPHeader",2,"margin-bottom","10px"],[1,"col-6","grid","grid-nogutter"],[1,"p-inputgroup"],[1,"fwcBlue"],["pInputText","","type","text","readonly","",3,"value"],[1,"col-12","lg:col-6","padding-right",2,"padding-right","10px"],["id","networkData",3,"legend"],[1,"p-float-label",2,"margin-top","10px"],["pInputText","","maxlength","64","type","text","formControlName","_ipobj_name","name","_ipobj_name",3,"drop"],["for","_ipobj_name"],[1,"col-3"],["pInputText","","appAutofocus","","maxlength","45","type","text","formControlName","_ipobj_address","name","_ipobj_address",3,"drop","keypress","blur"],["for","_ipobj_address"],["pInputText","","maxlength","17","type","text","formControlName","_ipobj_netmask","name","_ipobj_netmask",3,"drop","keypress","blur"],["for","_ipobj_netmask"],["class","col-1 grid-nogutter","style","padding:0; width: 8%;",4,"ngIf"],[1,"col-12","lg:col-6",2,"padding-left","10px"],[1,"col-12","lg:col-6"],[1,"col-1","grid-nogutter",2,"padding","0","width","8%"],[1,"pi","pi-exclamation-circle","fwcOrange",3,"pTooltip","ngStyle"],[3,"legend"],[1,"grid",2,"max-height","fit-content","width","100%"],[1,"col-6",2,"margin-top","10px"],[1,"p-float-label"],["pInputText","","type","text","formControlName","install_dir","name","install_dir",2,"font-family","monospace !important",3,"drop"],["for","install_dir"],["class","fwc-error err-no-margin",3,"ngStyle",4,"ngIf"],["pInputText","","type","text","maxlength","64","formControlName","install_name","name","install_name",2,"font-family","monospace !important",3,"drop"],["for","install_name"],["class","col-12",4,"ngIf"],[1,"fwc-error","err-no-margin",3,"ngStyle"],["legend","Endpoint"],[1,"grid",2,"width","100%","padding-top","10px"],[1,"col-5"],[3,"objectSelected","fwcloudId","fwTreeNodes","objectTreeNodes","selectableObjects","disabledObjects"],["pInputText","","type","number","formControlName","remote_port","name","remote_port",3,"drop"],["for","remote_port"],[1,"col-1",2,"padding-top",".5rem"],[2,"display","flex","align-items","center","gap",".5rem"],["pButton","","type","button","icon","fa fa-plus",1,"p-button-primary","fwcButtonHeight",2,"height","2.5rem","flex-shrink","0",3,"click","disabled"],["class","fwc-error err-no-margin","style","margin: 0; white-space: nowrap; flex-shrink: 0;",3,"pTooltip",4,"ngIf"],[1,"fwc-error","err-no-margin",2,"margin","0","white-space","nowrap","flex-shrink","0",3,"pTooltip"],[1,"col-12","container"],[3,"optionDeleted","optionsChanged","validationStatus","options","scope"],[3,"optionDeleted","optionsChanged","validationStatus","modified","options","vpnNetwork","scope"],[1,"col-12",2,"margin-top","1rem"],["pInputText","","type","text","maxlength","255","formControlName","comment","name","comment",3,"drop"],["for","comment"],[1,"grids-container"],[3,"optionDeleted","optionsChanged","validationStatus","clientsUpdated","options","scope","wireguardClients"],[1,"divLoadTemp",3,"ngStyle"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"click","disabled","label"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label","disabled"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"click","label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"click","label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"mousedown","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",3,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(a){return y(o),w(r.onShowDialog(a))})("onHide",function(a){return y(o),w(r.onHideDialog(a))}),v(2,rJe,6,6,"ng-template",4)(3,oJe,3,0,"div",5)(4,sJe,3,1,"div",5)(5,pJe,2,1)(6,uJe,5,1,"div",6)(7,CJe,17,6,"div",6)(8,IJe,1,2,"sts-fwc-object-wu",7)(9,RJe,47,24,"p-tabView",8)(10,WJe,7,11,"ng-template",9),g()}t&2&&(st(Ae(13,W$e)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(3),W(r.loadingData?3:-1),p(),W(r.errorMsg?4:-1),p(),W(r.objectToDelete&&!r.loadingData&&!r.errorMsg?5:-1),p(),W(r.objectToRetrieve&&!r.loadingData&&!r.errorMsg?6:-1),p(),W(r.objectToManage&&!r.loadingData&&!r.errorMsg?7:-1),p(),W(r.objectToSearchWU&&!r.loadingData&&!r.errorMsg?8:-1),p(),W(r.object&&r.formModel&&!r.loadingData&&!r.errorMsg?9:-1))},dependencies:[je,rt,De,Kn,Li,ud,Pi,zn,Jn,mn,$n,Qn,Yt,Ee,pt,or,cn,Xi,Qr,fd,hd,uu,Pa,pr,mg,gg,Fn,xg,Zo,Ag,gt,Sn],styles:[`.container{max-width:100%}.grids-container{display:flex;flex-direction:column;flex-wrap:nowrap;width:100%}.peerList{margin-top:10px}@media (max-width: 992px){sts-fwc-wireguard-options-grid,.peerList{min-width:100%;max-width:100%}}.p-tabview .p-tabview-panels{max-width:100%;width:100%;overflow:hidden;box-sizing:border-box;display:flex;flex-direction:column}.p-tabview .p-tabview-panels *{max-width:100%!important;box-sizing:border-box;flex-shrink:1;overflow-wrap:break-word}.p-tabview .p-tabview-panels table{width:100%!important;table-layout:fixed}.p-tabview .p-tabview-panels input,.p-tabview .p-tabview-panels select,.p-tabview .p-tabview-panels button{max-width:100%;min-width:0}#networkData .p-fieldset .p-fieldset-content{padding-bottom:0!important;height:5.8rem}.p-button-icon.pi-chevron-down{margin-right:4px!important}
`],encapsulation:2,data:{animation:[jc]}})}}return i})();var Ak=No(_c());var KJe=()=>({width:"70vw",maxHeight:"42rem"}),Ek=i=>({display:i}),$Je=()=>["cn","rightsubnet"],JJe=i=>({visibility:i}),qJe=()=>({width:"1.7rem",height:"1.7rem"}),YJe=()=>({width:"60vw",maxHeight:"27rem"});function XJe(i,n){i&1&&(m(0,"span",19),P(1,"i",20),m(2,"span"),F(3),D(4,"translate"),g()()),i&2&&(p(3),$(N(4,1,"VPN.CONFIG.CLIENT_LIST")))}function QJe(i,n){i&1&&(m(0,"tr")(1,"th",21),F(2),D(3,"translate"),P(4,"p-sortIcon",22),g(),m(5,"th",23),F(6),D(7,"translate"),g(),m(8,"th",23),F(9),D(10,"translate"),g()()),i&2&&(p(2),J(" ",N(3,3,"VPN.PANEL.FIELDS.CN")," "),p(4),J(" ",N(7,5,"VPN.PANEL.FIELDS.RIGHTSOURCEIP")," "),p(3),J(" ",N(10,7,"VPN.PANEL.FIELDS.RIGHTSUBNET")," "))}function ZJe(i,n){if(i&1){let e=L();m(0,"tr",24),k("click",function(r){let o=y(e).$implicit;return u().showClientOptionsDialog(o.id),w(r.stopPropagation())}),m(1,"td"),F(2),g(),m(3,"td"),F(4),g(),m(5,"td",25),F(6),g()()}if(i&2){let e=n.$implicit,t=u();p(2),J(" ",e.cn," "),p(2),J(" ",e.rightsourceip," "),p(2),J(" ",t.formatRightSubnets(e.rightsubnet)," ")}}function eqe(i,n){if(i&1){let e=L();m(0,"div",26),P(1,"p-progressSpinner"),g(),m(2,"button",27),D(3,"translate"),k("click",function(){y(e);let r=u();return w(r.onCancel(!0))}),g()}if(i&2){let e=u();f("ngStyle",ne(7,JJe,e.savingData?"visible":"hidden")),p(),st(Ae(9,qJe)),p(),Q("label",N(3,5,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function tqe(i,n){if(i&1&&(m(0,"div",30),P(1,"i",20),m(2,"span"),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),Es("",N(4,2,"VPN.CONFIG.IPSEC_CLIENT_HEADER")," ",e.selectedClient==null?null:e.selectedClient.cn,"")}}function iqe(i,n){if(i&1){let e=L();m(0,"div",29)(1,"sts-fwc-ipsec-options-grid",31),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))}),g()()}if(i&2){let e=u(2);p(),f("options",e.selectedClientOptions)("scope",e.scope)}}function nqe(i,n){if(i&1){let e=L();m(0,"button",34),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onSave())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.selectedClient||!(e.clientOptions!=null&&e.clientOptions.length)||!e.allOptionsValid())}}function rqe(i,n){if(i&1){let e=L();v(0,nqe,2,4,"button",32),m(1,"button",33),D(2,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onCancel(!1))}),g()}if(i&2){let e=u(2);W(e.hasChanges?0:-1),p(),Q("label",N(2,2,"GLOBALS.MSG_BUTTONS.CLOSE"))}}function oqe(i,n){if(i&1){let e=L();m(0,"p-dialog",28),Oe("visibleChange",function(r){y(e);let o=u();return Re(o.displayOptionsDialog,r)||(o.displayOptionsDialog=r),w(r)}),v(1,tqe,5,4,"ng-template",3)(2,iqe,2,2,"div",29)(3,rqe,3,4,"ng-template",17),g()}if(i&2){let e=u();st(Ae(5,YJe)),Te("visible",e.displayOptionsDialog),f("modal",!0),p(2),W(e.selectedClientOptions&&!e.isLoading?2:-1)}}var rE=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,T,A),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.fwcUserService=s,this.fwcFirewallService=a,this.fwcObjectService=l,this.fwcObjectTreeService=c,this.fwcVpnService=d,this.inputDataService=h,this.fwcErrorPipe=_,this.translate=C,this.confirmationService=I,this.utilService=b,this.fwcEventService=E,this.messageService=R,this.store=T,this.router=A,this.options=[],this.clientsUpdated=new X,this.optionDeleted=new X,this.optionsChanged=new X,this.validationStatus=new X,this.contextMenuStyle=[hs,ms,fs],this.ipsecClients=[],this.scope=8,this.showPeerDialog=!1,this.selectedServerId=null,this.isExpanded=[],this.clientOptions=[],this.displayOptionsDialog=!1,this.hasChanges=!1,this.rightSourceIpCache={},this.rightSourceIpValues=[],this.originalSubnets={},this.createDialog(this.translate.instant("VPN.PANEL.IPS_TITLE"),"fwci2-ipsec",ri.IPSEC_CONFIG_PANEL)}showDialog(e,t){this.ipsecClients=e||[],this.serverId=t||null,this.ipsecClients.length>0&&(this.loadAllRightSourceIps(),this.displayDialog=!0)}showClientOptionsDialog(e){return B(this,null,function*(){let t=this.ipsecClients.find(r=>r.id===e);this.selectedClient=oe({},t),this.displayOptionsDialog=!1;try{yield this.loadClientOptions(this.serverId,t.id);let r=this.ipsecClients.findIndex(o=>o.id===t.id);if(r===-1){console.error("Client not found in ipsecClients:",t.id);return}this.selectedClientOptions=JSON.parse(JSON.stringify(this.clientOptions[r]||[])),this.displayOptionsDialog=!0}catch(r){console.error("Error loading options:",r)}})}getServerPeerOptions(e){return this.ipsecClients.find(r=>r.id===e)?.options||[]}loadClientOptions(e,t){return B(this,null,function*(){let r={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e,ipsec_cli:t};try{let a=((yield this.utilService.fwcAPICall(this.fwcVpnService.getIPSecClientOptions.bind(this.fwcVpnService),r)).data?.data?.options||[]).map(h=>oe({},h)),l=a.find(h=>h.name==="rightsourceip"),c=a.find(h=>h.name==="rightsubnet"),d=this.ipsecClients.findIndex(h=>h.id===t);if(d===-1){console.error("Client not found in ipsecClients:",t);return}c&&c.arg!==""&&(this.ipsecClients[d].rightsubnet=c.arg),l&&l.arg!==""?(this.ipsecClients[d].rightsourceip=l.arg,this.rightSourceIpCache[t]=l.arg):this.ipsecClients[d].rightsourceip=this.rightSourceIpCache[t]||"",this.clientOptions[d]=a.filter(h=>h.name!=="rightsubnet"||h.arg!==""),this.displayOptionsDialog&&this.selectedClient?.id===t&&(this.selectedClientOptions=[...this.clientOptions[d]])}catch(o){throw console.error("Error loading client options:",o),o}})}reloadIPSecClients(e){return B(this,null,function*(){let t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e};try{let o=(yield Jc(this.fwcVpnService.getIPSecClients(t))).data.data;this.ipsecClients=yield Promise.all(o.map(s=>B(this,null,function*(){let a=this.ipsecClients.find(l=>l.id===s.id);return yield this.loadClientOptions(e,s.id),ke(oe({},s),{rightsourceip:a?.rightsourceip??s.rightsourceip})}))),this.clientsUpdated.emit()}catch(r){console.error("Error reloading ipsecClients:",r)}})}formatRightSubnets(e){return e?e.split(",").map(r=>r.trim()).filter(Boolean).map(r=>`${r}, `).join("").slice(0,-2):""}loadAllRightSourceIps(){return B(this,null,function*(){this.rightSourceIpValues=yield Promise.all(this.ipsecClients.map((e,t)=>this.fetchRightSourceIp(t)))})}fetchRightSourceIp(e){return B(this,null,function*(){try{let t=this.ipsecClients[e],{rightsourceip:r}=t??{};if(r)return t.rightsourceip=r,r}catch(t){return console.error(`Error getting rightsourceip for index ${e}:`,t),""}})}onOptionsChange(e){if(!this.selectedClient)return;let t=this.ipsecClients.findIndex(r=>r.id===this.selectedClient);t!==-1&&(this.clientOptions[t]=[...e]),this.selectedClientOptions=[...e],this.hasChanges=!0}onOptionsDelete(e){if(!this.selectedClient)return;let t=this.ipsecClients.findIndex(r=>r.id===this.selectedClient);t!==-1&&(this.clientOptions[t]=this.clientOptions[t].filter(r=>!this.isSameOption(r,e)),this.selectedClientOptions=[...this.clientOptions[t]]),this.formModel&&this.formModel.markAsDirty()}isSameOption(e,t){return e.id===t.id&&e.name===t.name&&e.value===t.value}updateOptions(){this.optionsChanged.emit([...this.clientOptions])}onSave(){return B(this,null,function*(){if(!this.selectedClient||!this.ipsecClients||!this.clientOptions){this.savingData=!1;return}let e=this.ipsecClients.findIndex(l=>l.id===this.selectedClient.id);if(e===-1||!this.clientOptions[e]){this.savingData=!1;return}this.savingData=!0;let t=this.selectedClientOptions||[],r=yield Promise.all(t.filter(l=>l.name!=="rightid"&&l.name!=="rightcert").map(l=>B(this,null,function*(){return oe({name:l.name,arg:l.arg,scope:8,comment:l.comment||null},Number.isInteger(Number(l.ipobj))&&{ipobj:Number(l.ipobj)})}))),o=r.find(l=>l.name==="rightsubnet");o&&typeof o.arg=="string"&&(o.arg=o.arg.split(",").map(l=>l.trim()).filter(Boolean).join(", "));let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:this.serverId,ipsec_cli:this.selectedClient.id,options:r},a=this.fwcVpnService.updateIPSecClientOptions.bind(this.fwcVpnService);try{this.savingData=!0;let l=yield this.updateClientOptions(a,s,e);return this.hasChanges=!1,l}catch(l){l.error&&l.error.fwcErr!=1003&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)})}finally{this.savingData=!1,this.hasChanges=!1}})}updateClientOptions(e,t,r){return B(this,null,function*(){return new Promise((s,a)=>{this.utilService.fwcAPICall(e,t).then(l=>{this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.CONFIG.UPDATE_CLIENT_CFG_OK")}),this.savingData=!1,this.hasChanges=!1,this.displayOptionsDialog=!1,this.reloadIPSecClients(this.serverId),this.clientsUpdated.emit(this.ipsecClients),this.resetProperties(),s(l)}).catch(l=>{if(l.error){let c=JSON.parse(l.error.msg);if(c.errors){let h=Object.values(c.errors).flat().join(", <br>");this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(h)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(c.message)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)});a(l),this.savingData=!1,this.hasChanges=!1})})})}resetProperties(){this.savingData=!1,this.loadingData=!1,this.object=null,this.formModel&&this.formModel.reset()}clearOptions(){this.gridOptions=[],this.updateOptions()}onCancel(e=!1,t){this.displayOptionsDialog=!1,e&&(this.displayDialog=!1),e&&(this.hideDialog(),this.clientOptions.forEach(r=>{this.clearOptions()}),this.log&&this.log.clearMessages(),this.hasChanges=!1,this.resetProperties())}validateOption(e){if(!e.arg&&e.name!=="Table")return{valid:!1,message:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.REQUIRED")};let t=Fp.IPSecOptionValidator(e.name),r=new Vo(e.arg),o=t(r);if(!o)return{valid:!0};let s={invalidIPAddress:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_IP_ADDRESS"),invalidDNS:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_DNS"),invalidEndpoint:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_ENDPOINT"),invalidID:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_ID"),invalidProposal:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_PROPOSAL"),invalidKeyExchange:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_KEY_EXCHANGE"),invalidCertPolicy:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_CERT_POLICY"),invalidDPDAction:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_DPD_ACTION"),invalidDuration:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_DURATION"),invalidBoolean:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_BOOLEAN"),invalidAutoOption:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_AUTO"),invalidCertFile:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_CERT_FILE"),invalidPSK:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_PRESHARED_KEY"),invalidSubnet:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_SUBNET"),invalidSourceIP:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_SOURCE_IP"),invalidAuthMethod:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_AUTH_METHOD"),invalidCharonDebug:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_CHARON_DEBUG"),invalidYesNo:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_YES_NO")},a=Object.keys(o)[0];return{valid:!1,message:s[a]||this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_OPTION",{option:e.name})}}allOptionsValid(){return this.selectedClientOptions?this.selectedClientOptions.every(e=>this.validateOption(e).valid):!1}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(at),S(Dt),S(Vi),S(En),S(er),S(Cr),S(Ei),S(Ye),S(Jt),S(ft),S(dn),S(Kt),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ipsec-client-list"]],inputs:{options:"options"},outputs:{clientsUpdated:"clientsUpdated",optionDeleted:"optionDeleted",optionsChanged:"optionsChanged",validationStatus:"validationStatus"},features:[et([Vi,En,Dt]),Se],decls:25,vars:33,consts:[["inputSearch",""],["tabVpnStatusTable",""],[3,"visibleChange","visible","modal"],["pTemplate","header"],[1,"col-12","divVpnStatusMain-table"],["styleClass","tbrHighlighted"],[1,"p-toolbar-group-left"],[1,"fwcBlue"],[1,"fa","fa-fw","fa-desktop","fwcOrange"],[1,"p-toolbar-group-right"],[1,"divVpnStatusMain-buttons"],["pButton","","type","button","icon","fa fa-search","tooltipPosition","bottom","showDelay","700",1,"p-button-success",2,"height","1.5rem",3,"click","pTooltip","ngStyle"],["type","text","pInputText","",3,"ngModelChange","input","placeholder","ngStyle","ngModel"],["pButton","","type","button","icon","fa fa-close","tooltipPosition","bottom","showDelay","700",1,"p-button-warning",3,"click","pTooltip","ngStyle"],[1,"col-12",2,"overflow","auto"],["columnResizeMode","expand","selectionMode","single","styleClass","optionsTable",3,"selectionChange","value","resizableColumns","selection","globalFilterFields"],["pTemplate","body"],["pTemplate","footer"],["appendTo","body",3,"visible","modal","style"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-share-alt","text-primary",2,"margin-left","10px"],["pSortableColumn","cn","pResizableColumn","",2,"width","33.33%"],["field","cn"],["pResizableColumn","",2,"width","33.33%"],[3,"click"],[2,"max-width","60vw","overflow-wrap","break-word","word-break","break-all","white-space","normal","display","table-cell","vertical-align","top"],[1,"divLoadTemp",3,"ngStyle"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled","label"],["appendTo","body",3,"visibleChange","visible","modal"],[1,"gridContainer"],[1,"flex","items-center","gap-2"],[3,"optionDeleted","optionsChanged","options","scope"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","label"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"click","label","disabled"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",2),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),v(1,XJe,5,3,"ng-template",3),m(2,"div",4)(3,"p-toolbar",5)(4,"div",6)(5,"span",7),P(6,"i",8),F(7),D(8,"translate"),g()(),m(9,"div",9)(10,"div",10)(11,"button",11),D(12,"translate"),k("click",function(){y(o);let a=He(14);return r.vpnClientsDataShowFilter=!0,w(a.focus())}),g(),m(13,"input",12,0),D(15,"translate"),Oe("ngModelChange",function(a){return y(o),Re(r.vpnClientsDataFilter,a)||(r.vpnClientsDataFilter=a),w(a)}),k("input",function(){y(o);let a=He(20);return w(a.filterGlobal(r.vpnClientsDataFilter,"contains"))}),g(),m(16,"button",13),D(17,"translate"),k("click",function(){y(o);let a=He(20);return r.vpnClientsDataShowFilter=!1,r.vpnClientsDataFilter="",w(a.reset())}),g()()()(),m(18,"div",14)(19,"p-table",15,1),Oe("selectionChange",function(a){return y(o),Re(r.vpnClientSelected,a)||(r.vpnClientSelected=a),w(a)}),v(21,QJe,11,9,"ng-template",3)(22,ZJe,7,3,"ng-template",16),g()()(),v(23,eqe,4,10,"ng-template",17)(24,oqe,4,6,"p-dialog",18),g()}t&2&&(st(Ae(25,KJe)),Te("visible",r.displayDialog),f("modal",!0),p(7),J(" ",N(8,17,"VPN.STATUS.FIELDS.CLIENTS"),""),p(4),Q("pTooltip",N(12,19,"VPN.STATUS.BUTTONS.SEARCH")),f("ngStyle",ne(26,Ek,r.vpnClientsDataShowFilter?"none":"inline")),p(2),Q("placeholder",N(15,21,"VPN.STATUS.SEARCH")),f("ngStyle",ne(28,Ek,r.vpnClientsDataShowFilter?"inline":"none")),Te("ngModel",r.vpnClientsDataFilter),p(3),Q("pTooltip",N(17,23,"VPN.STATUS.BUTTONS.CLEAR_SEARCH")),f("ngStyle",ne(30,Ek,r.vpnClientsDataShowFilter?"inline":"none")),p(3),f("value",r.ipsecClients)("resizableColumns",!0),Te("selection",r.vpnClientSelected),f("globalFilterFields",Ae(32,$Je)),p(5),W(r.displayOptionsDialog?24:-1))},styles:[`.p-dialog-content{max-width:none}.divVpnStatusMain-buttons{display:flex;max-height:1.5rem;align-items:center;margin-top:5px}.gridContainer{max-width:60vw}
`],encapsulation:2,data:{animation:[jc]}})}}return i})();var sqe=["routesTreeSelector"],aqe=["optionsTable"],lqe=["nameCell"],gK=i=>({"non-interactive-dropdown":i}),_K=i=>({"p-error":i}),CK=i=>({"p-invalid":i}),cqe=(i,n,e,t,r,o)=>[i,n,e,t,r,o],dqe=(i,n,e,t)=>[i,n,e,t],pqe=(i,n)=>[i,n];function uqe(i,n){i&1&&(m(0,"h5",5),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"VPN.CONFIG.IPSEC_CLIENT")," "))}function hqe(i,n){i&1&&(m(0,"h5",5),F(1),D(2,"translate"),g()),i&2&&(p(),J(" ",N(2,1,"VPN.CONFIG.IPSEC_SERVER")," "))}function fqe(i,n){i&1&&(m(0,"tr"),P(1,"th",12),m(2,"th",13),F(3),D(4,"translate"),P(5,"p-sortIcon",14),g(),m(6,"th",15),F(7),D(8,"translate"),g(),m(9,"th",15),F(10),D(11,"translate"),g()()),i&2&&(p(3),J(" ",N(4,3,"VPN.CONFIG.GRID_HEADER.0")," "),p(4),$(N(8,5,"VPN.CONFIG.GRID_HEADER.1")),p(3),$(N(11,7,"VPN.CONFIG.GRID_HEADER.2")))}function mqe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function gqe(i,n){if(i&1&&(m(0,"div")(1,"div"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e.label)}}function _qe(i,n){if(i&1){let e=L();m(0,"p-dropdown",28),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3).$implicit;return Re(o.name,r)||(o.name=r),w(r)}),k("onChange",function(r){y(e);let o=u(4);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,mqe,2,1,"ng-template",29)(3,gqe,3,1,"ng-template",30),g()}if(i&2){let e=u(3).$implicit,t=u();f("options",t.availableKeywords),Te("ngModel",e.name),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,6,"VPN.CONFIG.NO_OPS"))("ngClass",ne(8,gK,t.isDefaultOption(e.name)))("disabled",e.disabled||t.isDefaultOption(e.name))}}function Cqe(i,n){if(i&1&&F(0),i&2){let e=u(3).$implicit;J(" ",e.name," ")}}function Iqe(i,n){if(i&1){let e=L();m(0,"td",27,1),k("click",function(r){y(e);let o=u(3);return w(o.scrollToEditorCell(r))}),m(2,"p-cellEditor"),v(3,_qe,4,10,"ng-template",25)(4,Cqe,1,1,"ng-template",26),g()()}}function yqe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function wqe(i,n){if(i&1&&(m(0,"div")(1,"div"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e.label)}}function vqe(i,n){if(i&1){let e=L();m(0,"p-dropdown",28),D(1,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3).$implicit;return Re(o.name,r)||(o.name=r),w(r)}),k("onChange",function(r){y(e);let o=u(4);return w(o.onDataChanged(r))})("keydown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(4);return w(o.isEditing&&r.stopImmediatePropagation())}),v(2,yqe,2,1,"ng-template",29)(3,wqe,3,1,"ng-template",30),g()}if(i&2){let e=u(3).$implicit,t=u();f("options",t.availableKeywords),Te("ngModel",e.name),f("autoDisplayFirst",!1)("emptyFilterMessage",N(1,6,"VPN.CONFIG.NO_OPS"))("ngClass",ne(8,gK,t.isDefaultOption(e.name)))("disabled",e.disabled||t.isDefaultOption(e.name))}}function bqe(i,n){if(i&1&&F(0),i&2){let e=u(3).$implicit;J(" ",e.name," ")}}function Sqe(i,n){if(i&1){let e=L();m(0,"td",27,1),k("click",function(r){y(e);let o=u(3);return w(o.scrollToEditorCell(r))}),m(2,"p-cellEditor"),v(3,vqe,4,10,"ng-template",25)(4,bqe,1,1,"ng-template",26),g()()}}function Eqe(i,n){if(i&1&&(m(0,"div",31)(1,"strong"),F(2),g()()),i&2){let e=u(4).$implicit;p(2),$(e.arg)}}function Aqe(i,n){if(i&1&&(m(0,"div",34)(1,"small",35),P(2,"i",36),g()()),i&2){let e=u(5).$implicit,t=u();p(2),Q("pTooltip",t.getValidationMessage(e))}}function xqe(i,n){if(i&1){let e=L();m(0,"div",32)(1,"input",33),Oe("ngModelChange",function(r){y(e);let o=u(5);return Re(o.editableLeftRightSubnetText,r)||(o.editableLeftRightSubnetText=r),w(r)}),k("keydown.enter",function(){y(e);let r=u(4).$implicit,o=u();return w(o.onLeftRightSubnetCombinedChange(r))})("blur",function(){y(e);let r=u(4).$implicit,o=u();return w(o.onLeftRightSubnetCombinedChange(r))})("focus",function(){y(e);let r=u(4).$implicit,o=u();return w(o.onCellEditInit(r))})("keypress",function(r){y(e);let o=u(5);return w(o.allowNumbersDotAndSlash(r))})("keydown.arrowUp",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowLeft",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowRight",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())}),g(),v(2,Aqe,3,1,"div",34),g()}if(i&2){let e=u(4).$implicit,t=u();p(),Te("ngModel",t.editableLeftRightSubnetText),f("disabled",e.name==="rightsourceip")("ngClass",ne(4,CK,t.validateOption(e).valid===!1)),p(),W(t.isOptionValid(e)?-1:2)}}function Tqe(i,n){if(i&1&&v(0,Eqe,3,1,"div",31)(1,xqe,3,6,"div",32),i&2){let e=u(3).$implicit;W(e.name==="rightsourceip"?0:1)}}function Oqe(i,n){if(i&1&&(m(0,"div",31),F(1),g()),i&2){let e=u(4).$implicit;p(),J(" ",e.arg," ")}}function Rqe(i,n){if(i&1&&F(0),i&2){let e=u(4).$implicit;J(" ",e.arg," ")}}function Pqe(i,n){if(i&1&&(P(0,"i",38),D(1,"translate")),i&2){let e=u(4).$implicit;Q("pTooltip",N(1,1,e.emptyMessageKey))}}function Dqe(i,n){if(i&1&&P(0,"i",39),i&2){let e=u(4).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function Fqe(i,n){if(i&1&&P(0,"i",39),i&2){let e=u(4).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function kqe(i,n){if(i&1){let e=L();m(0,"i",41),k("mouseenter",function(r){y(e);let o=u(4).$implicit,s=u();return w(s.showObjectInfo(o,r))})("mouseleave",function(r){y(e);let o=u(5);return w(o.clearObjectInfo(r))})("wheel",function(r){y(e);let o=u(5);return w(o.clearObjectInfo(r))}),g()}if(i&2){let e=u(4).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function Nqe(i,n){if(i&1&&(m(0,"div",37),v(1,Oqe,2,1,"div",31)(2,Rqe,1,1)(3,Pqe,2,3,"i",38)(4,Dqe,1,1,"i",39)(5,Fqe,1,1,"i",39)(6,kqe,1,1,"i",40),g()),i&2){let e=u(3).$implicit,t=u();p(),W(e.name==="rightsourceip"?1:2),p(2),W(!e.arg&&e.name==="leftsubnet"?3:!t.isOptionValid(e)&&e.name==="leftsubnet"&&e.arg?4:t.isOptionValid(e)?-1:5),p(3),W(e.ipobj?6:-1)}}function Lqe(i,n){if(i&1&&(m(0,"td",23)(1,"p-cellEditor"),v(2,Tqe,2,1,"ng-template",25)(3,Nqe,7,3,"ng-template",26),g()()),i&2){let e=u(2).$implicit,t=u();f("tooltipDisabled",t.isOptionValid(e))("ngClass",ne(2,_K,!t.isOptionValid(e)))}}function Mqe(i,n){if(i&1&&(m(0,"div",31),F(1),g()),i&2){let e=u(4).$implicit;p(),J(" ",e.arg," ")}}function Vqe(i,n){if(i&1&&(m(0,"div",34)(1,"small",35),P(2,"i",36),g()()),i&2){let e=u(5).$implicit,t=u();p(2),Q("pTooltip",t.getValidationMessage(e))}}function Bqe(i,n){if(i&1){let e=L();m(0,"div",42)(1,"input",43),Oe("ngModelChange",function(r){y(e);let o=u(4).$implicit;return Re(o.arg,r)||(o.arg=r),w(r)}),k("ngModelChange",function(){y(e);let r=u(4).$implicit,o=u();return w(o.onArgChanged(r))})("keydown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(5);return w(o.isEditing&&r.stopImmediatePropagation())}),g(),v(2,Vqe,3,1,"div",34),g()}if(i&2){let e=u(4).$implicit,t=u();p(),f("type",t.text),Te("ngModel",e.arg),f("ngClass",ne(4,CK,t.validateOption(e).valid===!1)),p(),W(t.isOptionValid(e)?-1:2)}}function Uqe(i,n){if(i&1&&v(0,Mqe,2,1,"div",31)(1,Bqe,3,6,"div",42),i&2){let e=u(3).$implicit,t=u();W((e.name==="rightid"||e.name==="rightcert")&&t.scope===t.OptionScope.ipsec_server_client?0:1)}}function jqe(i,n){if(i&1&&(m(0,"strong"),F(1),g()),i&2){let e=u(4).$implicit;p(),$(e.arg)}}function Gqe(i,n){if(i&1&&F(0),i&2){let e=u(4).$implicit;J(" ",e.arg," ")}}function Hqe(i,n){if(i&1&&(P(0,"i",38),D(1,"translate")),i&2){let e=u(4).$implicit;Q("pTooltip",N(1,1,e.emptyMessageKey))}}function Wqe(i,n){if(i&1&&P(0,"i",39),i&2){let e=u(4).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function zqe(i,n){if(i&1&&P(0,"i",39),i&2){let e=u(4).$implicit,t=u();Q("pTooltip",t.getValidationMessage(e))}}function Kqe(i,n){if(i&1&&(m(0,"div",44),v(1,jqe,2,1,"strong")(2,Gqe,1,1)(3,Hqe,2,3,"i",38)(4,Wqe,1,1,"i",39)(5,zqe,1,1,"i",39),g()),i&2){let e=u(3).$implicit,t=u();p(),W(e.name==="left"||e.name==="right"?1:2),p(2),W(!e.arg&&e.name==="right"?3:e.arg&&e.name==="right"&&!t.isOptionValid(e)?4:t.isOptionValid(e)?-1:5)}}function $qe(i,n){if(i&1&&(m(0,"td",23)(1,"p-cellEditor"),v(2,Uqe,2,1,"ng-template",25)(3,Kqe,6,2,"ng-template",26),g()()),i&2){let e=u(2).$implicit,t=u();f("tooltipDisabled",t.isOptionValid(e))("ngClass",ne(2,_K,!t.isOptionValid(e)))}}function Jqe(i,n){if(i&1){let e=L();m(0,"input",45),Oe("ngModelChange",function(r){y(e);let o=u(2).$implicit;return Re(o.comment,r)||(o.comment=r),w(r)}),k("ngModelChange",function(){y(e);let r=u(2).$implicit,o=u();return w(o.onArgChanged(r))})("keydown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowUp",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())})("keydown.arrowDown",function(r){y(e);let o=u(3);return w(o.isEditing&&r.stopImmediatePropagation())}),g()}if(i&2){let e=u(2).$implicit;Te("ngModel",e.comment)}}function qqe(i,n){if(i&1&&(m(0,"div",46),F(1),g()),i&2){let e=u(2).$implicit;p(),J(" ",e.comment," ")}}function Yqe(i,n){if(i&1){let e=L();m(0,"tr",16)(1,"td",17)(2,"div",18)(3,"iui-contextmenu",19),k("menuOpening",function(r){y(e);let o=u().$implicit,s=u();return w(s.contextMenuLoad(r,o))})("menuClick",function(r){y(e);let o=u().rowIndex,s=u();return w(s.contextMenuHandler(r,o))}),m(4,"div",20),P(5,"i",21),g()()()(),v(6,Iqe,5,0,"td",22)(7,Sqe,5,0,"td",22)(8,Lqe,4,4,"td",23)(9,$qe,4,4,"td",23),m(10,"td",24)(11,"p-cellEditor"),v(12,Jqe,1,1,"ng-template",25)(13,qqe,2,1,"ng-template",26),g()()()}if(i&2){let e=u(),t=e.$implicit,r=e.rowIndex,o=u();f("pReorderableRow",r),p(3),f("settings",o.contextMenu)("allowAnimation",!1)("customStyle",o.contextMenuStyle)("colorScheme",o.currentColorScheme),p(3),W(t.name==="leftsubnet"||t.name==="rightsubnet"||t.name==="rightsourceip"||t.name==="leftsourceip"&&o.scope===o.OptionScope.ipsec_server_client?6:7),p(2),W((t.name==="leftsubnet"||t.name==="rightsubnet"||t.name==="rightsourceip")&&(o.scope===o.OptionScope.ipsec_server||o.scope===o.OptionScope.ipsec_server_client||o.scope===o.OptionScope.ipsec_client)?8:9)}}function Xqe(i,n){if(i&1&&v(0,Yqe,14,7,"tr",16),i&2){let e=n.$implicit,t=u();W(t.isSpecialOption(e.name)?-1:0)}}function Qqe(i,n){if(i&1){let e=L();m(0,"sts-fwc-tree-selector",49,2),k("objectSelected",function(r){y(e);let o=u(2);return w(o.onRouteObjectSelected(r))}),g()}if(i&2){let e=u(2);f("fwcloudId",null)("hideObjectName",!0)("fwTreeNodes",Po(5,cqe,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(12,dqe,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_NETWORK,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(17,pqe,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_NETWORK))}}function Zqe(i,n){if(i&1){let e=L();m(0,"button",47),D(1,"translate"),k("click",function(r){y(e);let o=u();return w(o.onAddRoute(r))}),g(),v(2,Qqe,2,20,"sts-fwc-tree-selector",48)}if(i&2){let e=u();Q("label",N(1,2,"VPN.CONFIG.ADD_ROUTE")),p(2),W(e.scope===e.OptionScope.ipsec_client||e.scope===e.OptionScope.ipsec_server_client?2:-1)}}function eYe(i,n){if(i&1){let e=L();m(0,"button",47),D(1,"translate"),k("click",function(r){y(e);let o=u();return w(o.onShowPeerList(r))}),g()}i&2&&Q("label",N(1,1,"VPN.CONFIG.SHOW_CLIENTS"))}var Tg=(()=>{class i{setDynamicComponentRef(e){throw new Error("Method not implemented.")}constructor(e,t,r,o,s,a,l,c,d,h){this.refService=e,this.itemSelectedService=t,this.store=r,this.translate=o,this.utilService=s,this.fwcObjectService=a,this.fwcUserService=l,this.messageService=c,this.fwcVpnService=d,this.appOptionsService=h,this.ipsecClients=[],this.optionsChanged=new X,this.validationStatus=new X,this.showPeerListDialog=new X,this.clientsUpdated=new X,this.gridOptions=[],this.selectedOption=null,this.alive=!0,this.infoTooltipShown=!1,this.contextMenuReference=null,this.contextMenuStyle=[hs,ms,fs],this.applicationRef=null,this.NodeTypes=M,this.ObjectTypes=O,this.OptionScope=pe,this.showPassword=!1,this.isEditing=!1,this.defaultServerOptionsSet=new Set([...Object.values(mv)]),this.defaultClientOptionsSet=new Set([...Object.values(gv)]),this.allowedIPsValues=[],this.editableLeftRightSubnetText="",this.availableKeywords=[]}ngOnInit(){this.contextMenu={items:[{id:V.VPN_OPTION_DELETE,text:this.translate.instant("VPN.CONFIG.DELETE_OPTION"),icon:"fwcMenuIcon fwci-delete fwcRed"},{id:V.NO_MENU,text:this.translate.instant("CONTEXT.NO_OPTIONS"),visible:!1}]},this.store.pipe(yt(()=>this.alive),Cn(Ko)).subscribe(e=>{e==="dark"?this.currentColorScheme=ui.Dark:this.currentColorScheme=ui.Light}),this.buildKeywords(this.gridOptions)}ngOnChanges(e){e.options?.currentValue&&(this.gridOptions=[...e.options.currentValue])}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){let e=this;if(setTimeout(function(){let t=e.refService.getAppRef();e.contextMenuReference=t,e.applicationRef=t},1),this.optionsTable){let t=-1;this.scope===pe.ipsec_client?t=this.gridOptions.findIndex(r=>r.name==="right"&&r.arg===""):this.scope===pe.ipsec_server&&(t=this.gridOptions.findIndex(r=>r.name==="leftsubnet"&&r.arg==="")),t!==-1&&setTimeout(()=>{let r=this.nameCells.get(t);r&&r.nativeElement&&r.nativeElement.scrollIntoView({behavior:"smooth",block:"center"})},100)}}updateOptions(){this.optionsChanged.emit([...this.gridOptions]),this.buildKeywords(this.gridOptions)}onDataChanged(e){if(e.dragIndex!==void 0&&e.dropIndex!==void 0){this.updateOptions();return}let t=e.value;if(this.defaultServerOptionsSet.has(t)||this.defaultClientOptionsSet.has(t)){console.warn("Is not possible to substitute a default option:",t);return}let r=this.gridOptions.findIndex(o=>o.name===t);r!==-1&&(this.gridOptions[r].arg="",this.updateOptions())}onArgChanged(e){let t=this.validateOption(e);t.valid||this.messageService.add({key:"gridValidation",severity:"error",summary:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.ARG_ERROR",{optionName:e.name}),detail:t.message,life:3e3}),this.validationStatus.emit({valid:t.valid,option:e}),this.updateOptions()}validateAllOptions(){let e=!0;return this.gridOptions.forEach(t=>{this.isOptionValid(t)||(e=!1)}),e}onAddOption(){let e={name:"",arg:"",comment:"",scope:this.scope};this.scope===pe.ipsec_server&&(e.ipsec_cli=this.gridOptions.every(t=>t.ipsec_cli===this.gridOptions[0].ipsec_cli)?this.gridOptions[0].ipsec_cli:null),this.gridOptions.push(e),this.updateOptions(),setTimeout(()=>{let t=this.nameCells.last?.nativeElement;t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{t.click()},50))},100)}onAddRoute(e,t){this.routesTreeSelector&&this.routesTreeSelector.showTree(e,{peer:t},!0)}onRouteObjectSelected(e){this.utilService.fwcAPICall(this.fwcObjectService.getObject.bind(this.fwcObjectService),e.id_obj,this.fwcUserService.getActualFwSelectedCloud()).then(t=>{let r=t.data.address,o;if(t.data.obj_type!==7)o=`${r}/32`;else{let a=t.data.netmask;try{let l=Ak.parse(r),c;a.includes("/")?c=parseInt(a.replace("/",""),10):c=Ak.parse(a).prefixLengthFromSubnetMask(),o=`${l.toString()}/${c}`}catch{o=r}}let s=this.gridOptions.find(a=>a.name==="rightsubnet");if(s){let a=s.arg.split(",").map(l=>l.trim());a.includes(o)||(a.push(`${o}`),s.arg=a.join(", "))}else{let a={name:"rightsubnet",arg:o,comment:"",scope:this.scope};this.scope===pe.ipsec_server&&(a.ipsec_cli=this.gridOptions.every(l=>l.ipsec_cli===this.gridOptions[0].ipsec_cli)?this.gridOptions[0].ipsec_cli:null),this.gridOptions.push(a)}this.updateOptions()})}getScope(){return this.scope}getOptions(){return this.gridOptions}clearOptions(){this.gridOptions=[],this.updateOptions()}modifyIPOption(e,t){let r=this.gridOptions.find(o=>o.name===e);r&&(r.arg=t,this.updateOptions())}updateOrCreateIPOption(e,t){let r=this.gridOptions.find(o=>o.name===e.name);r?(r.arg=e.arg,r.comment=e.comment):t&&this.gridOptions.push(e),this.updateOptions()}contextMenuLoad(e,t){let r=!1,o;if(this.scope===pe.ipsec_client?r=Object.values(gv).includes(t.name):r=Object.values(mv).includes(t.name),o=r,o){e.detail.cancel=!0;return}this.contextMenu&&this.contextMenu.items&&this.contextMenu.items.forEach(function(s){s.id==V.VPN_OPTION_DELETE&&(s.visible=!r)})}contextMenuHandler(e,t){switch(e.detail.item.id){case V.VPN_OPTION_DELETE:this.gridOptions.splice(t,1),this.updateOptions();break}}buildKeywords(e){let t,r;switch(this.scope){case pe.ipsec_server:t=_v,r=wB;break;case pe.ipsec_client:t=Cv,r=[];break;case pe.ipsec_server_client:t=vB,r=bB;break;default:t=[],r=[];break}let o=[];Array.isArray(e)?o=e:e&&Array.isArray(e.options)&&(o=e.options);let s=[...t,...r.filter(l=>!t.some(c=>c.name===l.name))].map(l=>l.name),a=o.map(l=>l.name).filter(l=>!!l);this.availableKeywords=s.map(l=>({label:l,value:l,disabled:a.includes(l)}))}scrollToEditorCell(e){let t=e.currentTarget;t&&setTimeout(()=>{t.scrollIntoView({behavior:"instant",block:"center"}),this.dropdown.show()},0)}isDefaultOption(e){return!!this.defaultServerOptionsSet[e]||!!this.defaultClientOptionsSet[e]}togglePasswordVisibility(){this.showPassword=!this.showPassword}replaceDots(e){return e.replace(/./g,"\u2022")}isOptionValid(e){return this.validateOption(e).valid}getValidationMessage(e){return this.validateOption(e).message||""}validateOption(e){if(!e.arg&&e.name!=="Table")return{valid:!1,message:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.REQUIRED")};let t=Fp.IPSecOptionValidator(e.name),r=new Vo(e.arg),o=t(r);if(!o)return{valid:!0};let s={invalidIPAddress:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_IP_ADDRESS"),invalidIPPool:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_IP_POOL"),invalidDNS:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_DNS"),invalidIKEVersion:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_IKE_VERSION"),invalidAuthMethod:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_AUTH_METHOD"),invalidEncryptionAlgorithm:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_ENCRYPTION_ALGORITHM"),invalidHashAlgorithm:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_HASH_ALGORITHM"),invalidDHGroup:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_DH_GROUP"),invalidLifetime:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_LIFETIME"),invalidProtocol:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_PROTOCOL"),invalidPFSGroup:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_PFS_GROUP"),invalidYesNoOption:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_YES_NO_OPTION"),invalidPort:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_PORT"),invalidHostname:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_HOSTNAME"),invalidCidr:this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_CIDR")},a=Object.keys(o)[0];return{valid:!1,message:s[a]||this.translate.instant("GLOBALS.MSG_IPSEC_VALIDATION.INVALID_VALUE")}}isSpecialOption(e){return!!e&&/^<<.*>>$/.test(e)}onEditStart(){this.isEditing=!0}onEditEnd(){this.isEditing=!1}showObjectInfo(e,t){if(e){let r={objId:e.ipobj};r.objId!==null&&(this.infoTooltipTimer=setTimeout(()=>{this.infoTooltipShown=!0,this.itemSelectedService.setObjectInfo(r,t)},1e3))}}clearObjectInfo(e){this.infoTooltipTimer&&(clearTimeout(this.infoTooltipTimer),this.infoTooltipTimer=void 0),this.infoTooltipShown&&(this.itemSelectedService.setObjectInfo(void 0,e),this.infoTooltipShown=!1)}onShowPeerList(e){this.showPeerListDialog.emit();let t=this.utilService.createDynamicComponentRef(rE),r=t.instance;r.setDynamicComponentRef(t),r.clientsUpdated.subscribe(o=>{this.clientsUpdated.emit(o);let s=this.fwcUserService.getActualFwSelectedCloud();this.fwcVpnService.getIPSecClients({fwcloud:s,ipsec:this.gridOptions[0].ipsec}).subscribe(a=>{this.ipsecClients=a.data.data})}),r.showDialog(this.ipsecClients,this.gridOptions[0].ipsec)}normalizeIP(e){return e.trim()}normalizeIPWithCIDR(e){if(e=e.trim(),e.includes("/")){let[t,r]=e.split("/");if(t&&!t.trim().endsWith(".0")&&r)return`${t}/32`}return e}normalizeIPBase(e){return e.trim().split("/")[0]}getLeftRightSubnetFirstValue(e){let t=String(e?.arg||"").split(",").map(o=>this.normalizeIP(o).trim()).filter(Boolean);return Array.from(new Set(t))[0]||""}onCellEditInit(e){this.editableLeftRightSubnetText?.trim()||(this.editableLeftRightSubnetText=(e.arg||"").split(",").map(t=>this.normalizeIP(t)).join(", "))}onLeftRightSubnetCombinedChange(e){let s=this.editableLeftRightSubnetText.split(",").map(a=>this.normalizeIPWithCIDR(a.trim())).filter((a,l,c)=>c.indexOf(a)===l).join(", ").replace(/[\s,]+$/,"");e.arg=s,this.onArgChanged(e),setTimeout(()=>{this.editableLeftRightSubnetText=""})}allowOnlyNumbersAndDot(e){let t=/[0-9.]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}allowNumbersDotAndSlash(e){let t=/[0-9.\/, ]/,r=["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"],o=String.fromCharCode(e.keyCode||e.which);return!t.test(o)&&!r.includes(e.key)?(e.preventDefault(),!1):!0}static{this.\u0275fac=function(t){return new(t||i)(S(Ts),S(ht),S(nt),S(Ye),S(ft),S(Vi),S(at),S(Kt),S(er),S(wt))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ipsec-options-grid"]],viewQuery:function(t,r){if(t&1&&(le(sqe,5),le(mr,5),le(aqe,5),le(lqe,5)),t&2){let o;te(o=ie())&&(r.routesTreeSelector=o.first),te(o=ie())&&(r.dropdown=o.first),te(o=ie())&&(r.optionsTable=o.first),te(o=ie())&&(r.nameCells=o)}},inputs:{scope:"scope",options:"options",leftSubnet:"leftSubnet",ipsecClients:"ipsecClients"},outputs:{optionsChanged:"optionsChanged",validationStatus:"validationStatus",showPeerListDialog:"showPeerListDialog",clientsUpdated:"clientsUpdated"},features:[Yi],decls:13,vars:9,consts:[["optionsTable",""],["nameCell",""],["routesTreeSelector",""],[1,"container"],[1,"col-12"],[1,"noVertPad","fwcBlue"],["scrollHeight","18em","selectionMode","single","styleClass","optionsTable",3,"selectionChange","onEditComplete","onRowReorder","onEditInit","onEditCancel","value","scrollable","selection"],["pTemplate","header"],["pTemplate","body"],[1,"divGridFooter"],["pButton","","icon","fa fa-plus",3,"click","label"],["pButton","","icon","fa fa-plus",2,"margin-left","5px",3,"label"],[1,"tdActionColumn",2,"width","1rem"],["pSortableColumn","name",2,"width","17rem"],["field","name"],[2,"width","17rem"],[1,"trOptionsGridRow",2,"max-height","25px",3,"pReorderableRow"],["pReorderableRowHandle","",1,"tdActionColumn",2,"text-align","center","vertical-align","middle !important"],[1,"context-menu-wrapper"],["contextMenuRef","contextMenuReference",3,"menuOpening","menuClick","settings","allowAnimation","customStyle","colorScheme"],[1,"clickable-area"],["pReorderableRowHandle","",1,"fa","fa-bars","fwcBlue"],["pEditableColumn","","id","name"],["pEditableColumn","","tooltipPosition","left",3,"tooltipDisabled","ngClass"],["pEditableColumn",""],["pTemplate","input"],["pTemplate","output"],["pEditableColumn","","id","name",3,"click"],["styleClass","fwcGridDropDown","appendTo","body","filter","true",3,"ngModelChange","onChange","keydown","keydown.arrowUp","keydown.arrowDown","options","ngModel","autoDisplayFirst","emptyFilterMessage","ngClass","disabled"],["pTemplate","selectedItem"],["pTemplate","item"],[2,"cursor","default"],[1,"leftRightSubnet-edit-container"],["pInputText","",3,"ngModelChange","keydown.enter","blur","focus","keypress","keydown.arrowUp","keydown.arrowDown","keydown.arrowLeft","keydown.arrowRight","ngModel","disabled","ngClass"],[1,"error-message"],[1,"p-error"],[1,"pi","pi-exclamation-circle",3,"pTooltip"],[1,"expandable-output"],[1,"fa","fa-question-circle","fa-lg","fwcOrange",2,"margin-top","8px",3,"pTooltip"],["tooltipPosition","left",1,"pi","pi-exclamation-circle","p-error",2,"margin-left","5px",3,"pTooltip"],["tooltipPosition","left",1,"fa","fa-lg","fa-info-circle","fwcBlue",2,"margin-left","5px",3,"pTooltip"],["tooltipPosition","left",1,"fa","fa-lg","fa-info-circle","fwcBlue",2,"margin-left","5px",3,"mouseenter","mouseleave","wheel","pTooltip"],[1,"input-with-error"],["pInputText","","maxlength","255",3,"ngModelChange","keydown","keydown.arrowUp","keydown.arrowDown","type","ngModel","ngClass"],[1,"output-with-error"],["pInputText","","type","text","maxlength","255",3,"ngModelChange","keydown","keydown.arrowUp","keydown.arrowDown","ngModel"],[1,"divWrapper"],["pButton","","icon","fa fa-plus",2,"margin-left","5px",3,"click","label"],[3,"fwcloudId","hideObjectName","fwTreeNodes","objectTreeNodes","selectableObjects"],[3,"objectSelected","fwcloudId","hideObjectName","fwTreeNodes","objectTreeNodes","selectableObjects"]],template:function(t,r){if(t&1){let o=L();m(0,"div",3)(1,"div",4),v(2,uqe,3,3,"h5",5)(3,hqe,3,3,"h5",5),m(4,"p-table",6,0),Oe("selectionChange",function(a){return y(o),Re(r.selectedOption,a)||(r.selectedOption=a),w(a)}),k("onEditComplete",function(a){return y(o),w(r.onDataChanged(a))})("onRowReorder",function(a){return y(o),w(r.onDataChanged(a))})("onEditInit",function(){return y(o),w(r.onEditStart())})("onEditCancel",function(){return y(o),w(r.onEditEnd())})("onEditComplete",function(){return y(o),w(r.onEditEnd())}),v(6,fqe,12,9,"ng-template",7)(7,Xqe,1,1,"ng-template",8),g(),m(8,"div",9)(9,"button",10),D(10,"translate"),k("click",function(){return y(o),w(r.onAddOption())}),g(),v(11,Zqe,3,4)(12,eYe,2,3,"button",11),g()()()}t&2&&(p(2),W(r.scope===r.OptionScope.ipsec_client||r.scope===r.OptionScope.ipsec_server_client?2:-1),p(),W(r.scope===r.OptionScope.ipsec_server?3:-1),p(),f("value",r.gridOptions)("scrollable",!0),Te("selection",r.selectedOption),p(5),Q("label",N(10,7,"VPN.CONFIG.ADD_OPTION")),p(2),W(r.scope==r.OptionScope.ipsec_client||r.scope==r.OptionScope.ipsec_server_client?11:r.scope===r.OptionScope.ipsec_server?12:-1))},dependencies:[je,Li,Pi,Jn,mn,Ee,pt,cn,Xi,sr,Oa,lh,qf,Ra,Yf,Xf,mr,Zo,gt],styles:[".container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-wrap:wrap}.divGridFooter[_ngcontent-%COMP%]{margin:15px auto 10px;text-align:center}.input-button-wrapper[_ngcontent-%COMP%]{width:100%;min-width:var(--min-width, 38rem)}.input-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gap, 18px);width:100%}.input-button-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0;max-width:100%}.non-interactive-dropdown[_ngcontent-%COMP%]{pointer-events:none!important;opacity:.7!important;cursor:not-allowed!important}.password-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:5px}.toggle-visibility[_ngcontent-%COMP%]{border:none;padding:1px;background:transparent;color:var(--primary-color);cursor:pointer}.hidden-cell[_ngcontent-%COMP%]{visibility:hidden;pointer-events:none;cursor:default!important}.fake-input-text[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.context-menu-wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.clickable-area[_ngcontent-%COMP%]{display:block;width:100%;height:100%;pointer-events:auto;align-content:center}.input-with-error[_ngcontent-%COMP%]{display:flex;gap:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.05rem}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.output-with-error[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:14px}.p-invalid[_ngcontent-%COMP%]{border-color:#f44336!important}.trOptionsGridRow[_ngcontent-%COMP%]{height:auto!important}.p-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem}tr.trOptionsGridRow[_ngcontent-%COMP%]:not(:first-child):hover{background:#eaeaea!important;color:#333}tr.trOptionsGridRow[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{overflow:hidden;font-family:Montserrat,Arial,sans-serif;padding:.3rem}.leftRightSubnet-edit-container[_ngcontent-%COMP%]{display:flex}.trOptionsGridRow[_ngcontent-%COMP%]   input.p-inputtext[_ngcontent-%COMP%]{height:18px!important;max-height:18px!important;width:100%;font-size:14px}[_nghost-%COMP%]     .fwcGridDropDown .p-dropdown-label{padding:.1rem!important}.output-with-error.expandable-output[_ngcontent-%COMP%], .input-with-error[_ngcontent-%COMP%]   input.expandable-input[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;width:100%;max-width:48rem;overflow-wrap:break-word}td.p-editable-column[_ngcontent-%COMP%]   .p-cell-editor[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})}}return i})();var yK=No(Gc()),Ka=No(_c());var iYe=["txtConfigFile"],nYe=["gridComponent"],rYe=()=>({width:"80vw"}),oYe=(i,n)=>({obj_type:i,name:n}),xk=i=>({name:i}),sYe=()=>({visibility:"visible"}),Tk=i=>({visibility:i}),aYe=(i,n,e,t,r,o)=>[i,n,e,t,r,o],lYe=(i,n,e,t)=>[i,n,e,t],cYe=(i,n)=>[i,n],dYe=()=>({width:"1.7rem",height:"1.7rem"}),pYe=i=>({obj_type:i});function uYe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i"),D(3,"fwcIcon"),F(4),D(5,"translate"),D(6,"translate"),g()()),i&2){let e=u(2);p(2),ce(Ms(3,4,e.objectToDelete._fwcObjType,null,"fwcOrange")),p(2),J(" ",ei(6,10,"VPN.CONFIG.HEADER_DELETE_2",Qe(13,oYe,N(5,8,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR"),e.objectToDelete._fwcObjName))," ")}}function hYe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.IPS_HEADER_FILE",ne(4,xk,e.objectToRetrieve._fwcObjName))," ")}}function fYe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,e.configManageTranslateKey+".FORM_HEADER",ne(4,xk,e.objectToManage._fwcObjName))," ")}}function mYe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",14),F(3),D(4,"translate"),g()()),i&2){let e=u(2);p(3),J(" ",ei(4,1,"VPN.CONFIG.HEADER_WU",ne(4,xk,e.objectToSearchWU._fwcObjName))," ")}}function gYe(i,n){if(i&1&&(m(0,"div",10)(1,"h6",12),P(2,"i",13),F(3),g()()),i&2){let e=u(2);p(3),J(" ",e.headerTitle," ")}}function _Ye(i,n){if(i&1){let e=L();m(0,"div",11)(1,"button",15),k("click",function(){y(e);let r=u(2);return w(r.minimizeDialog())}),g()()}}function CYe(i,n){if(i&1&&v(0,uYe,7,16,"div",10)(1,hYe,5,6,"div",10)(2,fYe,5,6,"div",10)(3,mYe,5,6,"div",10)(4,gYe,4,1,"div",10)(5,_Ye,2,0,"div",11),i&2){let e=u();W(e.objectToDelete?0:-1),p(),W(e.objectToRetrieve?1:-1),p(),W(e.objectToManage?2:-1),p(),W(e.objectToSearchWU?3:-1),p(),W(!e.objectToDelete&&!e.objectToRetrieve&&!e.objectToManage&&!e.objectToSearchWU?4:-1),p(),W(e.disableButtons?-1:5)}}function IYe(i,n){i&1&&(m(0,"div",5)(1,"div",16),P(2,"p-progressSpinner"),g()())}function yYe(i,n){if(i&1&&(m(0,"div",5)(1,"div",17),P(2,"sts-fwc-message",18),g()()),i&2){let e=u();p(2),f("message",e.errorMsg)}}function wYe(i,n){if(i&1){let e=L();m(0,"div",19),P(1,"sts-fwc-message",18),m(2,"sts-fwc-object-restrictions",20),k("onHideParent",function(){y(e);let r=u(3);return w(r.minimizeDialog(!0))})("onRefreshRestrictions",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()()}if(i&2){let e=u(3);p(),f("message",e.deleteMsg),p(),f("dependencies",e.dependencies)("readOnly",e.restrictionsReadOnly)}}function vYe(i,n){if(i&1&&v(0,wYe,3,3,"div",19),i&2){let e=u(2);W(e.dependencies.restrictionsError?-1:0)}}function bYe(i,n){if(i&1){let e=L();m(0,"div",21)(1,"p-checkbox",22),D(2,"translate"),Oe("ngModelChange",function(r){y(e);let o=u(3);return Re(o.alsoUninstallConfig,r)||(o.alsoUninstallConfig=r),w(r)}),g()()}if(i&2){let e=u(3);p(),Q("label",N(2,2,"VPN.CONFIG.UNINSTALL_STRINGS.UNINSTALL_FIRST")),Te("ngModel",e.alsoUninstallConfig)}}function SYe(i,n){if(i&1&&(P(0,"sts-fwc-message",18),v(1,bYe,3,4,"div",21)),i&2){let e=u(2);f("message",e.deleteMsg),p(),W(e.objectToDelete.obj_type==e.ObjectTypes.OBJ_ISS_CONFIG_SER||e.objectToDelete.obj_type==e.ObjectTypes.OBJ_ISC_CONFIG_CLI?1:-1)}}function EYe(i,n){if(i&1&&v(0,vYe,1,1)(1,SYe,2,2),i&2){let e=u();W(e.dependencies?0:1)}}function AYe(i,n){if(i&1&&(m(0,"div",6)(1,"div",23)(2,"textarea",24,1),F(4),g()()()),i&2){let e=u();p(4),$(e.configFile)}}function xYe(i,n){if(i&1&&(m(0,"span"),P(1,"i",31),F(2,"\xA0"),m(3,"strong"),F(4),g()()),i&2){let e=u(2).$implicit;p(4),$(e.firewallName)}}function TYe(i,n){if(i&1&&(m(0,"span"),P(1,"span",32)(2,"i",33),F(3),g()),i&2){let e=u(2).$implicit;p(3),J("\xA0",e.firewallName,"")}}function OYe(i,n){if(i&1&&(m(0,"td"),v(1,xYe,5,1,"span")(2,TYe,4,1,"span"),g()),i&2){let e=u().$implicit;p(),W(e.isNode?-1:1),p(),W(e.isNode?2:-1)}}function RYe(i,n){if(i&1&&(m(0,"td"),P(1,"i",33),F(2),g()),i&2){let e=u().$implicit;p(2),J("\xA0",e.firewallName," ")}}function PYe(i,n){if(i&1&&(m(0,"tr",29),v(1,OYe,3,2,"td")(2,RYe,3,1,"td"),m(3,"td",28),P(4,"i"),g()()),i&2){let e=n.$implicit,t=u(2);f("ngClass",e.coloredBg?"bgColored":"bgNormal"),p(),W(e.clusterId!==null&&e.clusterId!==void 0?1:-1),p(),W(e.clusterId===null||e.clusterId===void 0?2:-1),p(2),ce(t.FirewallOpsIcons[e.installState])}}function DYe(i,n){if(i&1&&(m(0,"div",6)(1,"div",25)(2,"div",26)(3,"table",27)(4,"thead")(5,"tr")(6,"th"),F(7),D(8,"translate"),g(),m(9,"th",28),F(10),D(11,"translate"),g()()(),m(12,"tbody"),xr(13,PYe,5,6,"tr",29,Ar),g()()()(),m(15,"div",30),P(16,"sts-fwc-log"),g()()),i&2){let e=u();p(7),$(N(8,2,"COMPILE.FORM.NAME")),p(3),J(" ",N(11,4,e.configManageTranslateKey+".OPERATION")," "),p(3),Tr(e.operationQueue)}}function FYe(i,n){if(i&1){let e=L();m(0,"sts-fwc-object-wu",34),k("onHideParent",function(){y(e);let r=u();return w(r.minimizeDialog())}),g()}if(i&2){let e=u();f("objectInfo",e.objectToSearchWU._fwcObjectInfo)("readOnly",e.restrictionsReadOnly)}}function kYe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,e.object.parent_type==e.ObjectTypes.OBJ_FIREWALL?"GLOBALS.MSG_OBJ_TYPES.FIREWALL":"GLOBALS.MSG_OBJ_TYPES.CLUSTER")),p(2),Q("value",e.object.parent_name)}}function NYe(i,n){if(i&1&&(m(0,"div",42)(1,"label",43),F(2),D(3,"translate"),g(),P(4,"input",44),g()),i&2){let e=u(2);p(2),$(N(3,2,"VPN.CONFIG.SER.IPSEC")),p(2),Q("value",e.object._fwcParentConfigName)}}function LYe(i,n){if(i&1&&(m(0,"div",58),P(1,"i",59),D(2,"translate"),g()),i&2){let e=u(2);p(),Q("pTooltip",N(2,2,e.ipNetmaskErrorMsg)),f("ngStyle",Ae(4,sYe))}}function MYe(i,n){if(i&1&&(m(0,"p",70),F(1),D(2,"translate"),g()),i&2){let e,t=u(3);f("ngStyle",ne(4,Tk,(e=t.formModel.get("install_dir"))!=null&&e.valid||(e=t.formModel.get("install_dir"))!=null&&e.pristine&&((e=t.formModel.get("install_dir"))!=null&&e.untouched)?"hidden":"visible")),p(),J(" ",N(2,2,"VPN.PANEL.ERRORS.INVALID_INSTALL_PATH")," ")}}function VYe(i,n){if(i&1&&(m(0,"div",17)(1,"p",70),F(2),D(3,"translate"),g()()),i&2){let e,t=u(3);p(),f("ngStyle",ne(4,Tk,(e=t.formModel.get("install_name"))!=null&&e.valid?"hidden":"visible")),p(),J(" ",N(3,2,"VPN.CONFIG.ERRORS.INVALID_CONFIG_FILENAME_ERROR.TEXT")," ")}}function BYe(i,n){if(i&1){let e=L();m(0,"div",56)(1,"p-fieldset",60),D(2,"translate"),m(3,"div",61)(4,"div",62)(5,"div",42)(6,"span",63)(7,"input",64),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(8,"label",65),F(9),D(10,"translate"),g()()(),v(11,MYe,3,6,"p",66),g(),m(12,"div",62)(13,"div",42)(14,"span",63)(15,"input",67),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(16,"label",68),F(17),D(18,"translate"),g()()(),v(19,VYe,4,6,"div",69),g()()()()}if(i&2){let e,t,r=u(2);p(),f("legend",N(2,5,"VPN.PANEL.FIELDS.INST_OPTIONS")),p(8),$(N(10,7,"VPN.PANEL.FIELDS.CONFIG_DIR")),p(2),f("ngIf",!((e=r.formModel.get("install_dir"))!=null&&e.valid||(e=r.formModel.get("install_dir"))!=null&&e.pristine&&((e=r.formModel.get("install_dir"))!=null&&e.untouched))),p(6),$(N(18,9,"VPN.PANEL.FIELDS.CONFIG_FILE")),p(2),f("ngIf",!((t=r.formModel.get("install_name"))!=null&&t.valid))}}function UYe(i,n){i&1&&(P(0,"p",79),D(1,"translate")),i&2&&Q("pTooltip",N(1,1,"VPN.PANEL.ERRORS.INVALID_REMOTE"))}function jYe(i,n){if(i&1){let e=L();m(0,"div",57)(1,"form",37)(2,"p-fieldset",71)(3,"div",72)(4,"div",73)(5,"sts-fwc-tree-selector",74,2),k("objectSelected",function(r){y(e);let o=u(2);return w(o.onRemoteIPObjectChange(r))}),g()(),m(7,"div",75)(8,"div",76)(9,"button",77),k("click",function(){y(e);let r=u(2);return w(r.onAddRemoteOption())}),g(),v(10,UYe,2,3,"p",78),g()()()()()()}if(i&2){let e=u(2);p(),f("formGroup",e.formModelRemote),p(4),f("fwcloudId",null)("fwTreeNodes",Po(8,aYe,e.NodeTypes.FOLDER,e.NodeTypes.OBJ_FIREWALL,e.NodeTypes.OBJ_CLUSTER,e.NodeTypes.FOLDER_INTERFACES,e.NodeTypes.OBJ_IF_FW,e.NodeTypes.OBJ_ADDRESS))("objectTreeNodes",xn(15,lYe,e.NodeTypes.OBJ_ADDRESS,e.NodeTypes.OBJ_DNS,e.NodeTypes.OBJ_HOST,e.NodeTypes.OBJ_IF_HOST))("selectableObjects",Qe(20,cYe,e.ObjectTypes.OBJ_ADDRESS,e.ObjectTypes.OBJ_DNS))("disabledObjects",e.disabledTreeRemoteOptions),p(4),f("disabled",!(e.formModelRemote!=null&&e.formModelRemote.valid)),p(),f("ngIf",(e.formModelRemote==null?null:e.formModelRemote.invalid)&&(e.formModelRemote==null?null:e.formModelRemote.touched)&&(e.formModelRemote==null?null:e.formModelRemote.dirty))}}function GYe(i,n){if(i&1){let e=L();m(0,"div",80)(1,"sts-fwc-ipsec-options-grid",81),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))})("validationStatus",function(r){y(e);let o=u(2);return w(o.handleValidationStatus(r))}),g()(),m(2,"div",82)(3,"div",42)(4,"span",63)(5,"input",83),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(6,"label",84),F(7),D(8,"translate"),g()()()()}if(i&2){let e=u(2);p(),f("options",e.getClientOptions())("leftSubnet",e.leftSubnet)("scope",e.OptionScope.ipsec_client),p(6),$(N(8,4,"ITEM_PANEL.FIELDS.COMMENTS"))}}function HYe(i,n){if(i&1){let e=L();m(0,"div",80)(1,"div",85)(2,"sts-fwc-ipsec-options-grid",86),k("optionDeleted",function(r){y(e);let o=u(2);return w(o.onOptionsDelete(r))})("optionsChanged",function(r){y(e);let o=u(2);return w(o.onOptionsChange(r))})("validationStatus",function(r){y(e);let o=u(2);return w(o.handleValidationStatus(r))})("clientsUpdated",function(r){y(e);let o=u(2);return w(o.onClientsChanged(r))}),g()()(),m(3,"div",82)(4,"div",42)(5,"span",63)(6,"input",83),k("drop",function(){y(e);let r=u(2);return w(r.preventDrop())}),g(),m(7,"label",84),F(8),D(9,"translate"),g()()()()}if(i&2){let e=u(2);p(2),f("options",e.object.options||e.object.data.options)("scope",e.OptionScope.ipsec_server)("ipsecClients",e.ipsecClients),p(6),$(N(9,4,"ITEM_PANEL.FIELDS.COMMENTS"))}}function WYe(i,n){if(i&1){let e=L();m(0,"p-tabView",8)(1,"p-tabPanel",35),D(2,"translate"),m(3,"div",36)(4,"form",37)(5,"fieldset",38),k("keyup.enter",function(r){y(e);let o=u();return w(o.checkForm(r))})("keyup.esc",function(){y(e);let r=u();return w(r.onCancel())}),m(6,"div",39)(7,"div",40)(8,"div",39)(9,"div",41),v(10,kYe,5,4,"div",42)(11,NYe,5,4,"div",42),g(),m(12,"div",41)(13,"div",42)(14,"label",43),F(15),D(16,"translate"),g(),P(17,"input",44),g()()()(),m(18,"div",45)(19,"p-fieldset",46)(20,"div",5)(21,"div",25)(22,"div",42)(23,"span",47)(24,"input",48),k("drop",function(){y(e);let r=u();return w(r.preventDrop())}),g(),m(25,"label",49),F(26),D(27,"translate"),g()()()(),m(28,"div",50)(29,"div",42)(30,"span",47)(31,"input",51),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowOnlyNumbersAndDot(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(32,"label",52),F(33),D(34,"translate"),g()()()(),m(35,"div",25)(36,"div",42)(37,"span",47)(38,"input",53),k("drop",function(){y(e);let r=u();return w(r.preventDrop())})("keypress",function(r){y(e);let o=u();return w(o.allowNumbersDotAndSlash(r))})("blur",function(){y(e);let r=u();return w(r.updateAddressOptionFromInputs())}),g(),m(39,"label",54),F(40),D(41,"translate"),g()()()(),v(42,LYe,3,5,"div",55),g()()(),v(43,BYe,20,11,"div",56)(44,jYe,11,23,"div",57)(45,GYe,9,6)(46,HYe,10,6),g()()()()()()}if(i&2){let e,t=u();p(),Q("header",N(2,14,"VPN.PANEL.DATA")),p(3),f("formGroup",t.formModel),p(6),W(t.object.obj_type==t.ObjectTypes.OBJ_ISS_CONFIG_SER?10:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_ISC_CONFIG_CLI?11:-1),p(4),$(N(16,16,"VPN.CONFIG.CN")),p(2),Q("value",t.object._fwcCrtName),p(2),Q("legend",t.fieldsetTitle),p(7),$(N(27,18,"ITEM_PANEL.FIELDS.NAME")),p(7),$(N(34,20,"ITEM_PANEL.FIELDS.ADDRESS")),p(7),$(N(41,22,"ITEM_PANEL.FIELDS.MASK")),p(2),f("ngIf",((e=t.formModel.get("_ipobj_address"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_address"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_netmask"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_netmask"))==null?null:e.invalid)||((e=t.formModel.get("_ipobj_name"))==null?null:e.touched)&&((e=t.formModel.get("_ipobj_name"))==null?null:e.invalid)),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_ISS_CONFIG_SER?43:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_ISC_CONFIG_CLI?44:-1),p(),W(t.object.obj_type==t.ObjectTypes.OBJ_ISC_CONFIG_CLI?45:t.object.obj_type==t.ObjectTypes.OBJ_ISS_CONFIG_SER?46:-1)}}function zYe(i,n){if(i&1){let e=L();m(0,"button",92),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.reloadPanel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"POLICY_GRID.RELOAD")),f("disabled",e.loadingData)}}function KYe(i,n){if(i&1){let e=L();v(0,zYe,2,4,"button",90),m(1,"button",91),D(2,"translate"),D(3,"translate"),k("click",function(){y(e);let r=u(2);return w(r.onProcessDeleteAction())}),g()}if(i&2){let e=u(2);W(e.dependencies?0:-1),p(),Q("label",ei(3,5,"CONTEXT.VPN_CONFIG.DELETE_2",ne(8,pYe,N(2,3,"GLOBALS.DB_OBJECT_NAMES."+e.objectToDelete._fwcObjType+"_ABBR")))),f("disabled",!e.okToDelete||e.loadingData||e.savingData)}}function $Ye(i,n){if(i&1){let e=L();m(0,"button",95),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCopyConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.CLIPBOARD.BUTTON")),f("disabled",e.loadingData)}}function JYe(i,n){if(i&1){let e=L();m(0,"button",96),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onDownloadConfigFile())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"VPN.CONFIG.DOWNLOAD.BUTTON")),f("disabled",e.loadingData)}}function qYe(i,n){if(i&1&&v(0,$Ye,2,4,"button",93)(1,JYe,2,4,"button",94),i&2){let e=u(2);W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?0:-1),p(),W(!e.errorMsg&&(e.configFile!=null&&e.configFile.length)?1:-1)}}function YYe(i,n){if(i&1){let e=L();m(0,"button",100),D(1,"translate"),k("click",function(){y(e);let r=u(4);return w(r.doPauseProcess(!0))}),g()}if(i&2){let e=u(4);Q("label",N(1,2,"COMPILE.PAUSE")),f("disabled",e.disableButtons)}}function XYe(i,n){if(i&1){let e=L();m(0,"button",101),k("click",function(){y(e);let r=u(4);return w(r.doContinueProcess())}),g()}if(i&2){let e=u(4);f("disabled",e.disableButtons)("label",e.continueButtonText)}}function QYe(i,n){if(i&1){let e=L();m(0,"button",97),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.doStopProcess())}),g(),v(2,YYe,2,4,"button",98)(3,XYe,1,2,"button",99)}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.STOP")),p(2),W(e.pauseProcess?3:2)}}function ZYe(i,n){if(i&1&&v(0,QYe,4,4),i&2){let e=u(2);W(e.operationInProcessId<e.operationQueue.length&&!e.stopProcess?0:-1)}}function eXe(i,n){if(i&1){let e=L();m(0,"button",104),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onCancel())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CANCEL")),f("disabled",!e.object||e.loadingData||e.savingData)}}function tXe(i,n){if(i&1){let e=L();m(0,"button",105),D(1,"translate"),k("click",function(){y(e);let r=u(3);return w(r.onSave())}),g()}if(i&2){let e=u(3);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.SAVE")),f("disabled",!e.formModel.valid||e.formModel.pristine||e.loadingData||e.savingData)}}function iXe(i,n){if(i&1&&v(0,eXe,2,4,"button",102)(1,tXe,2,4,"button",103),i&2){let e=u(2);W(e.formModel.pristine?-1:0),p(),W(e.formModel.pristine?-1:1)}}function nXe(i,n){if(i&1){let e=L();m(0,"button",106),D(1,"translate"),k("mousedown",function(){y(e);let r=u(2);return w(r.onCancel())}),g()}if(i&2){let e=u(2);Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.savingData||e.disableButtons)}}function rXe(i,n){if(i&1&&(m(0,"div",87),P(1,"p-progressSpinner"),g(),v(2,KYe,4,10,"button",88)(3,qYe,2,2)(4,ZYe,1,1)(5,iXe,2,2)(6,nXe,2,4,"button",89)),i&2){let e=u();f("ngStyle",ne(8,Tk,e.savingData?"visible":"hidden")),p(),st(Ae(10,dYe)),p(),W(e.objectToDelete?2:-1),p(),W(e.objectToRetrieve?3:-1),p(),W(e.objectToManage?4:-1),p(),W(e.object&&e.formModel?5:-1),p(),W(!e.object||!e.formModel||e.object&&e.formModel&&e.formModel.pristine?6:-1)}}var IK=6e4,oXe=["left","right"],OZt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C,I,b,E,R,T,A){super(r,t,e,o,T,A),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.cd=o,this.fwcUserService=s,this.fwcFirewallService=a,this.fwcObjectService=l,this.fwcObjectTreeService=c,this.fwcVpnService=d,this.inputDataService=h,this.fwcErrorPipe=_,this.translate=C,this.confirmationService=I,this.utilService=b,this.fwcEventService=E,this.messageService=R,this.store=T,this.router=A,this.restrictionsReadOnly=!1,this.showPeerListDialog=new X,this.loadingData=!1,this.savingData=!1,this.ObjectTypes=O,this.OptionScope=pe,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.dependencies=null,this.FirewallOpsIcons=Cc,this.operationQueue=[],this.pauseProcess=!1,this.disableButtons=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.NodeTypes=M,this.alive=!0,this.ipsecClients=[],this.ipsecClientsOptions=[],this.ipsecClientOptions=[],this.isExpanded=[],this.showPeerDialog=!1,this.selectedServerId=null,this.showPeerComponent=!1,this.clientOptions=[],this.lastValidGridValue=null,this.leftSubnet="",this.originalAddress="",this.originalNetmask="",this.allowBlurValidation=!1,this.cloneFromId=null,this.createDialog(this.translate.instant("VPN.PANEL.IPS_TITLE"),"fwci2-ipsec",ri.IPSEC_CONFIG_PANEL)}ngOnInit(){this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.store.pipe(yt(()=>this.alive),Cn(na.selectDialogUuidsToReload)).subscribe(e=>{e&&e.find(t=>t===this.dialogUUID)&&this.reloadPanel()}),this.itemSelectedService.getItem().pipe(yt(()=>this.alive)).subscribe(e=>B(this,null,function*(){if(!(e.obj_type!=O.OBJ_ISS_CONFIG_SER&&e.obj_type!=O.OBJ_ISC_CONFIG_CLI&&e.obj_type!=O.OBJ_PREFIX_FOLDER&&e.obj_type!=O.OBJ_IPSEC_PREFIX||e.statusAction||e._onlySelectInTree)){if(this.resetProperties(),e.parent_type==O.OBJ_CLUSTER){let t;if(t=yield this.getClusterMasterFirewall(e.parent_id),t)e.firewall=t.id;else{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.translate.instant("CLUSTER.ERROR_MASTER_TEXT",{name:e.parent_name})});return}}else e.firewall=e.parent_id;if(e.deleteAction)this.onItemDelete(e);else if(e.configFileAction)this.onItemGetFile(e);else if(e.installAction||e.syncCCDAction||e.uninstallAction||e.syncPendingCCDAction){let t=this.utilService.createDynamicComponentRef(fo),r=t.instance;r.setDynamicComponentRef(t),this.communicationSubscription=r.socketEventEmitter.subscribe(o=>{o=="connected"&&this.onItemManage(e),this.communicationSubscription.unsubscribe()}),yield r.checkConnection()}else if(e.newPrefixAction||e.editPrefixAction||e.deletePrefixFolderAction)this.managePrefix(e);else if(e.whereUsedAction)this.showWhereUsed(e);else if(e.blockVPNAction||e.unblockVPNAction)this.blockUnblockVPNConnection(e);else if(Array.isArray(e._fwcChildClientNodes)&&e._fwcChildClientNodes.length){let t=[];e._fwcChildClientNodes.forEach(o=>{t.find(s=>s.id===o.id_obj)||t.push({id:o.id_obj,text:o.name})});let r={header:this.translate.instant("VPN.CONFIG.CLI_CLONE.HEADER"),helpText:this.translate.instant("VPN.CONFIG.CLI_CLONE.TEXT"),modal:!0,formControls:[{name:"clientConfId",label:this.translate.instant("VPN.CONFIG.IPS_HEADER_CLI"),type:"select",options:t,placeholder:this.translate.instant("VPN.CONFIG.CLI_CLONE.NO_CLONE"),required:!1}],onAccept:o=>{if(o)if(o.clientConfId)e._fwcObjId=o.clientConfId,this.onItemSelect(e,!0);else{let s=oe({},e);delete s._fwcChildClientNodes,this.onItemSelect(s)}}};this.inputDataService.setInputData(r)}else yield this.onItemSelect(e)}}))}ngOnDestroy(){super.ngOnDestroy()}getFirstAvailableIP(e,t){if(!Ka.isValid(e))throw new Error("IP address is invalid");let r,o;if(Pt.netmaskCIDRRegexp.test(t)){let _=t.match(Pt.netmaskCIDRRegexp);if(r=parseInt(_[1],10),r<0||r>32)throw new Error("Netmask CIDR is invalid");o=this.appOptionsService.convertToStandardNetmask(r.toString())}else{if(!new RegExp(Pt.netmaskRegexp).test(t))throw new Error("Netmask decimal is invalid");r=this.appOptionsService.netmaskToCIDR(t),o=t}let a=`${e}/${r}`,c=Ka.IPv4.networkAddressFromCIDR(a).octets.slice();return c[3]+=1,`${Ka.fromByteArray(c).toString()}/${r}`}updateAddressOptionFromInputs(){let e=this.formModel?.get("_ipobj_address"),t=this.formModel?.get("_ipobj_netmask"),r=e?.value?.trim()||"",o=t?.value?.trim()||"",s=e?.touched,a=t?.touched;if((e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&!s&&e?.markAsTouched(),(t?.value!==this.originalNetmask||e?.value!==this.originalAddress)&&!a&&t?.markAsTouched(),!r&&!o){this.clearIPFromGrid(),this.lastValidGridValue=null,this.formModel?.updateValueAndValidity();return}let l=r?this.appOptionsService.isValidIP(r):!1,c=o?this.appOptionsService.isValidMask(o):!1;if(!l||!c){!l&&!c?(this.appOptionsService.setControlError(e,"bothInvalid"),this.appOptionsService.setControlError(t,"bothInvalid"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK_INVALID")):l?(this.appOptionsService.setControlError(t,"invalidMask"),this.appOptionsService.clearControlErrors(e),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.NETMASK_INVALID")):(this.appOptionsService.setControlError(e,"invalidIP"),this.appOptionsService.clearControlErrors(t),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_INVALID")),this.formModel?.updateValueAndValidity();return}try{let d=Ka.parse(r),h;if(/^\/\d{1,2}$/.test(o))h=`${r}${o}`;else{let A=Ka.IPv4.parse(o).prefixLengthFromSubnetMask();if(A===null||A<0||A>32)throw new Error("Invalid netmask");h=`${r}/${A}`}let[_,C]=Ka.parseCIDR(h),I=Ka.IPv4.networkAddressFromCIDR(`${_.toString()}/${C}`);if(d.toString()!==I.toString()){this.appOptionsService.setControlError(e,"notNetworkAddress"),this.appOptionsService.setControlError(t,"notNetworkAddress"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NOT_IN_NETWORK",{network:I.toString()}),this.formModel?.updateValueAndValidity();return}if(this.appOptionsService.clearControlErrors(e),this.appOptionsService.clearControlErrors(t),!this.lastValidGridValue||this.lastValidGridValue.ip!==r||this.lastValidGridValue.mask!==o){let T=this.getFirstAvailableIP(r,o),A=this.object?.obj_type,U=A===O.OBJ_ISC_CONFIG_CLI?pe.ipsec_client:A===O.OBJ_ISS_CONFIG_SER?pe.ipsec_server:null;if(!U)return;this.optionsGrids.forEach(z=>{z.getScope()===U&&z.modifyIPOption(Gs.O_LEFT,T.split("/")[0]),z.getScope()===pe.ipsec_server&&(z.modifyIPOption(Gs.O_LEFTSUBNET,r+o),z.getOptions().find(re=>re.name===Gs.O_RIGHTSUBNET&&re.scope===pe.ipsec_server)&&z.modifyIPOption(Gs.O_RIGHTSUBNET,r+o))}),this.lastValidGridValue={ip:r,mask:o}}if(!s&&!a)return;(e?.value!==this.originalAddress||t?.value!==this.originalNetmask)&&(s||e?.markAsTouched(),a||t?.markAsTouched()),e?.value===this.originalAddress&&t?.value===this.originalNetmask&&!e?.errors&&!t?.errors&&(this.formModel?.markAsPristine(),e?.markAsPristine(),t?.markAsPristine())}catch(d){console.error("Error validating network address:",d)}this.formModel?.updateValueAndValidity()}clearIPFromGrid(){let e=this.object?.obj_type,t=null;e===O.OBJ_ISC_CONFIG_CLI?t=pe.ipsec_client:e===O.OBJ_ISS_CONFIG_SER&&(t=pe.ipsec_server),t&&this.optionsGrids.forEach(r=>{r.getScope()===t&&r.modifyIPOption(Gs.O_LEFT,"")})}startTimeoutHandler(){this.timeoutTimer=setTimeout(()=>{this.eventsSubscription.unsubscribe(),this.doTimeoutOp()},IK)}refreshTimeoutHandler(){clearTimeout(this.timeoutTimer),this.startTimeoutHandler()}reloadPanel(){if(this.objectToDelete||this.objectToSearchWU){if(this.displayDialog||this.dialogMinified){if(this.objectToDelete){let e=Object.assign({},this.objectToDelete),t=this.itemSelectedService.getActualLastMinifiedDialogId();this.resetProperties(),this.onItemDelete(e),this.dialogId==t&&(this.showDialog(),this.itemSelectedService.setLastMinifiedDialogId(void 0))}else if(this.objectToSearchWU){let e=Object.assign({},this.objectToSearchWU);this.resetProperties(),this.showWhereUsed(e)}}this.store.dispatch(on.reloadDialogFinished({dialogUuid:this.dialogUUID}))}}resetProperties(){this.savingData=!1,this.loadingData=!1,this.disableButtons=!1,this.object=this.objectToDelete=this.objectToRetrieve=this.objectToManage=this.objectToSearchWU=this.configOrPrefixToDelete=null,this.remoteOptions=[],this.errorMsg=null,this.dependencies=null,this.deleteMsg=null,this.formModel&&this.formModel.reset()}checkIPSecConfigCanBeDeleted(e){return new Promise((r,o)=>{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e._fwcObjId};this.fwcVpnService.checkIPSecConfigRestrictions(s).subscribe({next:a=>{r(!0)},error:a=>{a.error&&a.error.restrictions?r(!1):o(a)}})})}onItemDelete(e,t){if(!e)return;let r,o,s;this.objectToDelete=e,this.loadingData=!0,this.okToDelete=!1,this.alsoUninstallConfig=!1,this.deleteMsg=null,e.obj_type==O.OBJ_ISS_CONFIG_SER||e.obj_type==O.OBJ_ISC_CONFIG_CLI?(r=this.fwcVpnService.checkIPSecConfigRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e._fwcObjId},s="VPN.CONFIG"):e.obj_type==O.OBJ_IPSEC_PREFIX&&(r=this.fwcVpnService.checkIPSecPrefixRestrictions.bind(this.fwcVpnService),o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj},s="VPN.IPSEC_PREFIX"),r&&(this.showDialog(),t&&this.recenterDialog(),r(o).subscribe(a=>{this.okToDelete=!0,this.configOrPrefixToDelete=Object.assign({},e),this.deleteMsg={type:"warning",title:this.translate.instant(s+".DELETE_WARN.SUMMARY"),text:this.translate.instant(s+".DELETE_WARN.TEXT",{name:e._fwcObjName})},this.dependencies=null,this.okToDelete=!0,this.loadingData=!1},a=>{a.error&&a.error.restrictions?(this.dependencies=a.error.restrictions,this.deleteMsg={type:"error",title:this.translate.instant(s+".ERRORS.RESTR_ERROR.SUMMARY"),text:this.translate.instant(s+".ERRORS.RESTR_ERROR.TEXT",{name:e._fwcObjName})}):(this.errorMsg={type:"error",title:this.translate.instant(s+".ERRORS.DELETE_ERROR.SUMMARY"),text:this.fwcErrorPipe.transform(a)},this.dependencies={restrictionsError:!0}),this.loadingData=!1,this.recenterDialog()}))}onItemGetFile(e){if(!e)return;this.objectToRetrieve=e,this.loadingData=!0,this.showDialog();let t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e._fwcObjId};this.fwcVpnService.getIPSecConfigFile(t).subscribe({next:r=>{r.data?this.configFile=r.data.data?r.data.data.cfg:r.data.cfg:(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:r.error})},r.error&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r.error)})),this.loadingData=!1,this.recenterDialog()},error:r=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETFILE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(r)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),this.loadingData=!1}})}onItemManage(e,t){if(!e)return;let r=e.id_obj,o,s,a,l=[],c=this.fwcUserService.getActualFwSelectedCloud();this.objectToManage=e,e.installAction?(this.configManageTranslateKey="VPN.CONFIG.INSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.installIPSecConfig.bind(this.fwcVpnService)):e.uninstallAction?(this.configManageTranslateKey="VPN.CONFIG.UNINSTALL_STRINGS",this.configManageAPICall=this.fwcVpnService.uninstallIPSecConfig.bind(this.fwcVpnService)):e.syncCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_STRINGS",this.configManageAPICall=this.fwcVpnService.syncIPSecConfigCCD.bind(this.fwcVpnService)):e.syncPendingCCDAction?(this.configManageTranslateKey="VPN.CONFIG.SYNC_PENDING_STRINGS",this.configManageAPICall=this.fwcVpnService.syncIPSecConfigPendingCCD.bind(this.fwcVpnService)):this.configManageAPICall=null,this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.showDialog(),t&&this.recenterDialog(),this.channel_id=$r(),this.utilService.ioListenOnLogEvent(this.channel_id),this.startTimeoutHandler(),this.eventsSubscription=this.fwcEventService.getEvent().pipe(yt(()=>this.displayDialog)).subscribe(d=>{this.refreshTimeoutHandler();let h=new bo(d),_;h.payload.type===Ne.MSG_ERROR&&(_=this.utilService.isCommunicationErrorStr(h.payload.message),this.pauseProcess=!0,this.operationWithErrors=!0,this.doTimeoutOp()),_?(this.continueButtonText=this.translate.instant("COMPILE.RETRY"),this.doTimeoutOp()):(this.log.addNewMessage(h),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"))}),e.parent_type==O.OBJ_CLUSTER?(a=this.fwcFirewallService.getClusterNodes.bind(this.fwcFirewallService),s=e.parent_id,o=!0):e.parent_type==O.OBJ_FIREWALL&&(a=this.fwcFirewallService.getFirewall.bind(this.fwcFirewallService),s=e.firewall,o=!1),a&&a(s,c).subscribe(d=>B(this,null,function*(){d.data&&d.data instanceof Array?l=d.data:d.data?(l=[],l.push(d.data)):l=[],this.operationQueue=[];let h;o&&(h={ipsec:r,clusterId:s,firewallId:s,firewallName:e._fwcClusterName,installState:Xt.FW_DISABLED,opInstalled:!1},this.operationQueue.push(Object.assign({},h)));let _=this.fwcUserService.getActualFwcUser().privateKey;for(let C=0;C<l.length;C++){let I=l[C],b=I.install_user,E=I.install_pass;try{b&&(b=yield this.utilService.openPGPDecrypt(b,_)),E&&(E=yield this.utilService.openPGPDecrypt(E,_))}catch{}h={clusterId:I.cluster,clusterName:e._fwcClusterName,isNode:!!I.cluster,ipsec:r,firewallId:l[C].id,firewallName:l[C].name,installState:Xt.FW_PENDING,opInstalled:!1,sshUser:b,sshPassword:E,installInterface:l[C].install_interface,installInterfaceName:l[C].interface_name,installIpobj:l[C].install_ipobj,installIpobjName:l[C].ip_name,installIpobjIP:l[C].ip,installCommunication:l[C].install_communication,installProtocol:l[C].install_protocol,installApikey:l[C].install_apikey,deleteAction:e.deleteAction},this.operationQueue.push(Object.assign({},h))}this.operationInProcessId=0,this.actualFirewallCompileSSHInputData=null,this.processIPSecOperation(!0)}),d=>{d.error&&d.error.fwcErr==1002||this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)}),this.loadingData=!1})}processIPSecOperation(e){let t;if(!this.pauseProcess&&(clearTimeout(this.timeoutTimer),this.operationQueue&&this.operationInProcessId<this.operationQueue.length)){let r=this.operationQueue[this.operationInProcessId];if(!r)return;if(this.operationWithErrors=!1,r.clusterId!==null&&r.clusterId!==void 0?t=this.translate.instant("COMPILE.INST_CLUSTER_NODE",{clusterName:r.clusterName,firewallName:r.firewallName}):t=this.translate.instant("COMPILE.INST_FW",{firewallName:r.firewallName}),r.installState==Xt.FW_PENDING)if(r.installState=Xt.FW_PROCESSING,e||this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".START",{name:t}),Ne.MSG_INFO),r.installInterface&&r.installIpobj)if(r.installCommunication==="ssh"){let o={header:this.translate.instant("COMPILE.INST_SSH",{name:t}),helpText:this.translate.instant("COMPILE.INST_SSH_TEXT"),modal:!1,formControls:[{name:"ipsec",type:"hidden",value:r.ipsec},{name:"firewall_id",type:"hidden",value:r.firewallId},{name:"interface_name",label:this.translate.instant("COMPILE.FIELDS.INST_IF"),icon:"fwci-interface fwcGreen",type:"text",value:r.installInterfaceName,readonly:!0,halfSized:!0},{name:"ip_name",label:this.translate.instant("COMPILE.FIELDS.INST_IP"),icon:"fwci-address fwcBlue",type:"text",value:r.installIpobjName+" ("+r.installIpobjIP+")",readonly:!0,halfSized:!0},{name:"",label:"",type:"separator"},{name:"ssh_user",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_USER"),type:"text",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_user:r.sshUser,setFocus:!0},{name:"",label:"",type:"separator"},{name:"ssh_password",label:this.translate.instant("CLUSTER.MSG_CLUSTER_EDITION.SSH_PASS"),type:"password",required:!0,value:this.actualFirewallCompileSSHInputData?this.actualFirewallCompileSSHInputData.ssh_password:r.sshPassword},{name:"deleteAction",type:"hidden",value:r.deleteAction},{name:"btnPauseProcess",label:this.translate.instant("COMPILE.PAUSE"),type:"button",icon:"fa fa-pause",class:"p-button-warning",value:0,readonly:!this.operationInProcessId}],onAccept:this.manageConfig.bind(this)};this.disableButtons=!0,this.inputDataService.setInputData(o);return}else{let o={ipsec:r.ipsec,firewall_id:r.firewallId,interface_name:r.installInterfaceName,deleteAction:r.deleteAction,ip_name:void 0,ssh_user:void 0,ssh_password:void 0};this.disableButtons=!0,this.manageConfig(o)}else r.installState=Xt.FW_ERROR,setTimeout(()=>{this.confirmationService.confirm({key:"cdErrorFw",header:this.translate.instant("COMPILE.INST_SSH_ERROR"),message:this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName}),reject:()=>{this.doPauseProcess()},accept:()=>{let o=this.translate.instant("COMPILE.INST_SSH_ERROR_TEXT",{name:r.firewallName||r.clusterName});this.operationWithErrors=!0,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:t,error:o}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processIPSecOperation()}})},1);else this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processIPSecOperation(e)}}manageConfig(e){return B(this,null,function*(){if(!this.operationQueue||this.operationInProcessId>=this.operationQueue.length||!this.configManageAPICall)return;let t=this.operationQueue[this.operationInProcessId],r=t.clusterId!==null&&t.clusterId!==void 0?`cluster ${t.clusterId} - firewall ${t.firewallId} (${t.firewallName})`:`firewall ${t.firewallId} (${t.firewallName})`;if(this.disableButtons=!1,!e){t.installState=Xt.FW_WARNING,this.addMessageToLog(this.translate.instant("COMPILE.INST_WARNING",{name:r}),Ne.MSG_ERROR),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.processIPSecOperation();return}if(this.actualFirewallCompileSSHInputData=e,e.btnPauseProcess){t.installState=Xt.FW_PENDING,this.doPauseProcess(!0);return}clearTimeout(this.timeoutTimer),this.timeoutTimer=setTimeout(()=>this.doTimeoutOp(),IK),this.log.startDataLoad();let o=this.fwcUserService.getActualFwcUser().publicKey,s=e.ssh_user?yield this.utilService.openPGPEncrypt(e.ssh_user,o):null,a=e.ssh_password?yield this.utilService.openPGPEncrypt(e.ssh_password,o):null,l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e.ipsec,firewall:e.firewall_id,sshuser:s,sshpass:a};(this.objectToManage?.blockVPNAction||this.objectToManage?.unblockVPNAction)&&(l.configOnly=1),this.disableButtons=!0,this.communicationAPISubscription=this.utilService.fwcAPICallObservable(this.configManageAPICall,this.channel_id,l).subscribe({next:c=>{if(this.disableButtons=!1,t.installState=Xt.FW_OK,this.log&&this.log.stopDataLoad(),c.data?.data?.installName){let h="strongswan-starter";this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".RELOAD"),Ne.MSG_INFO),this.utilService.fwcAPICall(this.fwcFirewallService.getSystemctlInformation.bind(this.fwcFirewallService),{fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:e.firewall_id,service:h,command:"reload"}).then(()=>{}).catch(()=>{this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".RELOAD_ERROR"),Ne.MSG_ERROR)})}let d=this.operationWithErrors?this.translate.instant(this.configManageTranslateKey+".COMPLETED_WITH_ERRORS"):this.translate.instant(this.configManageTranslateKey+".COMPLETED");this.addMessageToLog(d,Ne.MSG_OK),this.operationInProcessId++,this.actualFirewallCompileSSHInputData=null,this.operationQueue&&this.operationInProcessId<this.operationQueue.length?this.processIPSecOperation():e.deleteAction&&(this.operationWithErrors?this.confirmationService.confirm({header:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ERROR_HEADER"),message:this.translate.instant("VPN.CONFIG.UNINSTALL_STRINGS.ASK_DELETE"),acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),rejectLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.NO"),rejectVisible:!0,accept:()=>this.onDeleteConfigurationOrPrefix()}):this.onDeleteConfigurationOrPrefix()),clearTimeout(this.timeoutTimer)},error:c=>{this.disableButtons=!1;let d=this.utilService.isCommunicationError(c.error);d?(t.installState=Xt.FW_PENDING,this.addMessageToLog(d,Ne.MSG_ERROR),this.continueButtonText=this.translate.instant("COMPILE.RETRY")):(c.error.fwcErr===9e3?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),icon:"fa fa-exclamation-circle fwcRed iconBig",message:this.translate.instant("API_ERROR.SSH_FORBIDDEN"),rejectVisible:!1,acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.OK")}):(t.installState=Xt.FW_ERROR,this.addMessageToLog(this.translate.instant(this.configManageTranslateKey+".ERROR",{name:r,error:c.error}),Ne.MSG_ERROR)),this.continueButtonText=this.translate.instant("COMPILE.CONTINUE"),this.actualFirewallCompileSSHInputData=null),this.log.stopDataLoad(),this.operationInProcessId<this.operationQueue.length-1?this.doPauseProcess():clearTimeout(this.timeoutTimer)}})})}doTimeoutOp(){clearTimeout(this.timeoutTimer),this.pauseProcess=!0,this.loadingData=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_TIMEOUT"),Ne.MSG_WARNING))}doPauseProcess(e){this.pauseProcess=!0,this.loadingData=!1,clearTimeout(this.timeoutTimer),e&&this.addMessageToLog(this.translate.instant("COMPILE.WARN_PAUSE"),Ne.MSG_WARNING)}doContinueProcess(){this.pauseProcess=!1,this.processIPSecOperation()}onItemSelect(e,t){return B(this,null,function*(){if(!e)return;this.loadingData=!0,this.showDialog();let r=e._fwcObjId,o=e.obj_type;if(e.obj_type==O.OBJ_ISC_CONFIG_CLI){this.headerTitle=this.translate.instant("VPN.CONFIG.IPS_HEADER_CLI"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.IP_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP");let s=yield this.loadIPObjects(),a=yield this.loadDNSObjects();if(!s||!a)return;this.remoteOptions=[],this.remoteOptions.push(s),this.remoteOptions.push(a)}else this.headerTitle=this.translate.instant("VPN.CONFIG.IPS_HEADER_SER"),this.fieldsetTitle=this.translate.instant("VPN.CONFIG.NETMASK_VPN"),this.ipNetmaskErrorMsg=this.translate.instant("VPN.PANEL.ERRORS.IP_NETMASK");if(r===void 0&&o!==void 0){let s=Object.assign({},e);if(s.obj_type==O.OBJ_ISC_CONFIG_CLI){s.options=Wt(Cv);let a={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e.vpn},l=yield this.getFirstFreeIP(a),c="",d="",h;l.data?(c=l.data.ip,d=l.data.netmask,h=l.data.id):(c=l.ip,d=l.netmask,h=l.id);let _=this.getOption(s.options,Gs.O_LEFTSOURCEIP);s._ipobj_address=c,s._ipobj_netmask=d,s._ipobj_id=h,_.arg=c,s.ipsec=e.vpn}else s.options=Wt(_v);this.createForm(s,!0),this.ipsecClientOptions=this.formModel.controls.options.value.filter(a=>a.scope===pe.ipsec_client),s.obj_type==O.OBJ_ISC_CONFIG_CLI&&!t&&setTimeout(()=>{let a=document.querySelector("button .fa-search")?.parentElement;a&&a.click()},300),this.loadingData=!1}else{let s={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:r};this.fwcVpnService.getIPSecConfig(s).subscribe({next:a=>B(this,null,function*(){if(a.data){let l=a.data.data?Object.assign({},a.data.data):Object.assign({},a.data);l.fwcloud=s.fwcloud,l.obj_type=e.obj_type,l.parent_type=e.parent_type,l.parent_name=e.parent_name,l._fwcParentConfigName=e._fwcParentConfigName,t?(l.crt=e.crt,l._fwcCrtName=e._fwcCrtName,l._fwcObjId=void 0,l.node_id=e.node_id,this.cloneFromId=e._fwcObjId,t&&(l.comment=null,l.options=l.options.map(d=>ke(oe({},d),{comment:null})))):(l._fwcCrtName=e._fwcObjName,l._fwcObjId=r);let c;e.obj_type==O.OBJ_ISC_CONFIG_CLI?c=this.getOption(l.options,Gs.O_LEFTSOURCEIP):c=this.getOption(l.options,Gs.O_LEFT),c?this.fwcVpnService.getIPSecConfigIPObjects(s).subscribe({next:d=>B(this,null,function*(){let h=d.data.data,_=h.find(C=>C.id==c.ipobj);if(_&&Object.keys(_).length!==0){let C=(I,b,E=!0)=>{let R=I.options.find(T=>T.name==="leftsubnet");if(R&&R.arg){let T,A;R.arg.includes("/")?([T,A]=R.arg.trim().split("/"),I._ipobj_address=T,I._ipobj_netmask=`/${A}`):([T,A]=R.arg.trim().split(/\s+/),I._ipobj_address=T,I._ipobj_netmask=A),t&&(c.ipobj=null)}else I._ipobj_name=b.name||"",I._ipobj_address=b.address||"",I._ipobj_netmask=b.netmask||"",I._ipobj_id=t?null:b.id||"",t?(c.arg=`${b.address}`,c.ipobj=null):c.arg=`${_.address}`,c.readonly=E};if(e.obj_type==O.OBJ_ISC_CONFIG_CLI)if(t){let I={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e.vpn},b=yield this.getFirstFreeIP(I),E=b?.data||b||{};C(l,{address:E.ip||"",netmask:E.netmask||""})}else C(l,_||{});else{let I=h.find(b=>b.id==this.getOption(l.options,"left").ipobj);C(l,I||{})}if(e.obj_type==O.OBJ_ISS_CONFIG_SER&&this.fwcVpnService.getIPSecClients(s).subscribe(I=>{if(this.ipsecClients=I.data.data,this.ipsecClients&&this.ipsecClients.length>0){let b=new Map;l.options=l.options?.filter(E=>E.ipsec_cli?(b.has(E.ipsec_cli)||b.set(E.ipsec_cli,[]),b.get(E.ipsec_cli)?.push(oe({},E)),!1):!0),Promise.all(this.ipsecClients.map(E=>B(this,null,function*(){try{let R={name:"rightsubnet",arg:E.rightsubnet||"",ipsec:s.ipsec,ipsec_cli:E.id,scope:pe.ipsec_server_client,readonly:!0};return[{name:"rightsourceip",arg:E.rightSourceIp||"",ipsec:s.ipsec,ipsec_cli:E.id,scope:pe.ipsec_server_client,readonly:!0},R]}catch(R){return console.error(`Error processing client ${E.id}:`,R),[]}}))).then(E=>{this.ipsecClientsOptions=E.flat()}).catch(E=>{console.error("Error in Promise.all:",E)})}}),e.obj_type==O.OBJ_ISC_CONFIG_CLI){let I=l.options.filter(b=>b.name=="remote");I.length&&(I.forEach(b=>{for(let E=0;E<h.length;E++){let R=h[E];if(b.ipobj==R.id){let T;R.type==O.OBJ_ADDRESS?T=R.address:R.type==O.OBJ_DNS&&(T=R.name),T&&(b.arg=T+" "+b.arg);break}}}),this.disabledTreeRemoteOptions=I)}this.createForm(l,t),this.ipsecClientOptions=this.formModel.controls.options.value.filter(I=>I.scope===pe.ipsec_client),this.loadingData=!1,this.recenterDialog(),this.showDialog()}}),error:d=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.IPOPTIONLOAD_ERROR.TEXT",{error:this.fwcErrorPipe.transform(d)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(d)}),this.loadingData=!1}}):(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.NOIPOPTION_ERROR.TEXT")},this.loadingData=!1)}else a.error&&(this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(a.error)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a.error)})),this.loadingData=!1}),error:a=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.GETCONFIG_ERROR.TEXT",{error:this.fwcErrorPipe.transform(a)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)}),this.loadingData=!1}})}})}loadIPObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-ipobjects fwcBlue",value:this.translate.instant("NODE_TYPES.OIA"),items:[]},t(o)}),e}loadDNSObjects(){let e;return e=new Promise((t,r)=>{let o;o={label:"fwci-firewall fwcBlue",value:"DNS",items:[]},t(o)}),e}createForm(e,t){return B(this,null,function*(){if(!e)return;let r=e.data?e.data.options:e.options;r.forEach(h=>{oXe.findIndex(_=>h.name==_)!=-1&&(h.required=!0,h.readonly=!0)}),this.formModel=new rr({fwcloud:new ve(e.fwcloud),ipsec:new ve(e.ipsec),firewall:new ve(e.firewall,Pe.required),crt:new ve(e.crt,Pe.required),node_id:new ve(e.node_id),comment:new ve(e.comment),options:new Hr(this.createIPSecOptions(r))});let o=`VPN-${e.parent_name}-${e._fwcCrtName}`;if(e.obj_type==O.OBJ_ISS_CONFIG_SER){o=`LAN-VPN-${e._fwcCrtName}`,this.formModel.addControl("install_dir",new ve(e.install_dir||"/etc",[Pe.required,Pe.pattern(Pt.posixPathRegexp)])),this.formModel.addControl("install_name",new ve(e.install_name?e.install_name:"ipsec.conf",[Pe.required,Pe.pattern(Pt.IPSecInstallName)]));let h=r.find(C=>C.name==="leftid");h&&(h.arg=`"CN=${e._fwcCrtName}"`);let _=r.find(C=>C.name==="leftcert");_&&(_.arg=`${e._fwcCrtName}.crt`)}else if(e.obj_type==O.OBJ_ISC_CONFIG_CLI){this.formModel.controls.ipsec.setValue(e.ipsec),this.setOptionArgValue("leftid",()=>`"CN=${e._fwcCrtName}"`),this.setOptionArgValue("leftcert",()=>`${e._fwcCrtName}.crt`),this.setOptionArgValue("rightid",()=>`"CN=${e._fwcParentConfigName}"`);let h=e._ipobj_address,_=e._ipobj_netmask,C;_&&_.startsWith("/")?C=parseInt(_.replace("/",""),10):_&&(C=this.appOptionsService.netmaskToCIDR(_));let I="";if(h&&C!==void 0)try{let b=`${h}/${C}`;I=Ka.IPv4.networkAddressFromCIDR(b).toString(),this.setOptionArgValue("rightsubnet",()=>I+`/${C}`)}catch{I=""}this.formModel.addControl("_remote_options",new Hr(this.createIPSecOptions(r)))}let s=e.obj_type===O.OBJ_ISC_CONFIG_CLI?e._fwcCrtName:o;s=s.substring(0,64);let a,l,c;e.obj_type===O.OBJ_ISC_CONFIG_CLI?(a=r.find(h=>h.name==="leftsourceip")?.arg.split("/")||[],l=e._ipobj_address||a[0],c=e._ipobj_netmask||(a[1]?`/${a[1]}`:"")):(l=e._ipobj_address,c=e._ipobj_netmask),this.formModel.addControl("_ipobj_id",new ve(r[0].ipobj)),this.formModel.addControl("_ipobj_name",new ve(s,[Pe.required,Pe.pattern(Pt.nameRegExp)])),this.formModel.addControl("_ipobj_address",new ve({value:l,disabled:e.obj_type==O.OBJ_ISC_CONFIG_CLI})),this.formModel.addControl("_ipobj_netmask",new ve({value:c,disabled:e.obj_type===O.OBJ_ISC_CONFIG_CLI})),t&&this.formModel.markAsDirty();let d={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:e.ipsec};this.formModelRemote=new rr({id_obj:new ve(void 0,[Pe.required]),obj_type:new ve(void 0,[Pe.required])}),this.object=e})}setOptionArgValue(e,t){let o=this.formModel.controls.options.controls.find(s=>s.get("name")?.value===e);if(o){let s=o.get("arg")?.value??"";o.get("arg")?.setValue(t(s))}}createIPSecOptions(e){let t=[];for(let r of e){let o=r.ipobj??null,s=r.arg;(r.name==="leftsourceip"||r.name==="left")&&r.ipobj&&(o=r.ipobj);let a=[];(r.name==="leftsourceip"||r.name==="left")&&a.push(Pe.required),a.push(c=>Fp.IPSecOptionValidator(r.name)(c));let l=new rr({name:new ve(r.name,Pe.required),arg:new ve(s,a),ipobj:new ve(o),scope:new ve(r.scope,Pe.required),comment:new ve(r.comment),ipsec_cli:new ve(r.ipsec_cli,r.ipsec_cli?[Pe.required]:[])});r.emptyMessageKey&&l.addControl("emptyMessageKey",new ve(r.emptyMessageKey)),t.push(l)}return t}handleValidationStatus(e){if(!e.valid&&e.option){let t=this.findOptionGroup(e.option.name);if(t){let r=t.get("arg");r&&r.setErrors({invalid:!0})}}}findOptionGroup(e){let t=this.formModel.get("options");return t&&(t instanceof yp?t.controls:t instanceof xa?Object.values(t.controls):[]).find(o=>o.get("name")?.value===e)||null}onCancel(e){!e&&this.formModel&&!this.formModel.pristine&&this.formModel.valid?this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("VPN.PANEL.MSG_EXIT"),accept:()=>{this.onCancel(!0)},rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES")}):(this.hideDialog(),this.optionsGrids.forEach(t=>{t.clearOptions()}),this.log&&this.log.clearMessages(),this.operationQueue=[],this.ipsecClients=[],this.operationInProcessId=void 0,this.actualFirewallCompileSSHInputData=null,this.pauseProcess=!1,this.stopProcess=!1,this.disabledTreeRemoteOptions=[],this.eventsSubscription&&this.eventsSubscription.unsubscribe(),this.objectToManage&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:this.objectToManage.container}),this.resetProperties())}checkForm(e){e&&e.target&&e.target.type!="textarea"&&this.formModel.valid&&(e.target.blur(),this.onSave(0))}onSave(e=0){return B(this,null,function*(){if(!this.object)return;let t=[];this.optionsGrids.forEach(I=>{let b=I.getOptions();t=t.concat(b)});for(let I=0;I<t.length;I++)t[I].name&&!t[I].name.length&&delete t[I];let r={},o;for(let I in this.formModel.controls)r[I]=this.formModel.controls[I].value!==null&&this.formModel.controls[I].value!==void 0?this.formModel.controls[I].value:void 0;let s=t.filter(I=>I.name&&I.name.trim().length>0);r.options=s.map(I=>({name:I.name,arg:I.arg,scope:I.scope,comment:I.comment,ipobj:I.ipobj,ipsec_cli:I.ipsec_cli})),r.options.forEach(I=>{if(I.ipsec_cli&&I.name==="rightsubnet"&&I.arg.includes(",")){let b=I.arg.indexOf(",");I.arg=I.arg.substring(b+1).trim()}});let l=this.object.obj_type===O.OBJ_ISC_CONFIG_CLI?"leftsourceip":"leftsubnet",c=r.options.find(I=>I.name===l);o={id:c&&c.ipobj?c.ipobj:void 0,type:void 0,fwcloud:r.fwcloud,name:r._ipobj_name,address:r._ipobj_address,netmask:r._ipobj_netmask,ip_version:4,node_parent:void 0,node_order:1,node_type:void 0,force:e};let d,h;this.object.obj_type==O.OBJ_ISC_CONFIG_CLI?(o.type=O.OBJ_ADDRESS,o.node_type=M.OBJ_ADDRESS,d=M.FOLDER_ADDRESSES,h=Gs.O_LEFTSOURCEIP):this.object.obj_type==O.OBJ_ISS_CONFIG_SER&&(o.type=O.OBJ_NETWORK,o.node_type=M.OBJ_NETWORK,d=M.FOLDER_NETWORKS,h=Gs.O_LEFTSUBNET),delete r._ipobj_id,delete r._ipobj_address,delete r._ipobj_name,delete r._ipobj_netmask,delete r._remote_options;let _,C;if(this.object._fwcObjId===void 0){_=this.fwcVpnService.newIPSecConfig.bind(this.fwcVpnService),this.object.obj_type===O.OBJ_ISC_CONFIG_CLI&&this.cloneFromId&&(r.clone_id=this.cloneFromId);let I=yield this.getParentId(d);if(I==-1){this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK"),detail:this.translate.instant("VPN.PANEL.NEW.ERRORS.NETWORK_PARENT_NODE")}),this.loadingData=!1;return}this.object.obj_type==O.OBJ_ISS_CONFIG_SER?(C=this.translate.instant("VPN.CONFIG.NEW_SERVER_CFG_OK"),o.node_parent=I):this.object.obj_type==O.OBJ_ISC_CONFIG_CLI&&(C=this.translate.instant("VPN.CONFIG.NEW_CLIENT_CFG_OK"))}else r.ipsec=this.object._fwcObjId,delete o.node_order,delete o.node_type,delete r.crt,_=this.fwcVpnService.updateIPSecConfig.bind(this.fwcVpnService),this.object.obj_type==O.OBJ_ISS_CONFIG_SER?C=this.translate.instant("VPN.CONFIG.UPDATE_SERVER_CFG_OK"):C=this.translate.instant("VPN.CONFIG.UPDATE_CLIENT_CFG_OK");this.savingData=!0,this.manageNetworkIPObject(o).then(I=>{let b;I.data&&(b=I.data.insertId),this.modifyOption(r.options,h,void 0,b),this.proceedWithIPSecConfig(r,C,_)},I=>{I.error&&I.error.fwcErr!=1003&&this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(I)}),this.savingData=!1})})}proceedWithIPSecConfig(e,t,r){this.clearOptionsArgs(e.options),this.utilService.fwcAPICall(r,e).then(o=>{let s=o.data&&o.data.data&&o.data.data.insertId?o.data.data.insertId:e.ipsec,a={container:qe.C_FIREWALLS_CONDENSED,_fwcObjId:s,_fwcObjType:this.object.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(a),a.container=qe.C_FIREWALLS,this.itemSelectedService.setModifiedItem(a),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:t}),this.savingData=!1,this.hideDialog(),this.resetProperties()}).catch(o=>{if(o.error){let s=JSON.parse(o.error.msg);if(s.errors){let l=Object.values(s.errors).flat().join(", <br>");this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(l)})}else s.data.code==="ER_DUP_ENTRY"?this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.CONFIG.ERRORS.CLONE_CONFIG_ERROR.SUMMARY"),detail:this.translate.instant("VPN.CONFIG.ERRORS.CLONE_CONFIG_ERROR.TEXT")}):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s.message)})}else this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(o)});this.savingData=!1})}getParentId(e){let t;return t=new Promise((r,o)=>{this.fwcObjectTreeService.getNodes(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a=-1;s.data&&s.data.length&&(a=s.data[0].id),r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(-1)})}),t}getClusterMasterFirewall(e){let t;return t=new Promise((r,o)=>{this.fwcFirewallService.getClusterMasterNode(e,this.fwcUserService.getActualFwSelectedCloud()).subscribe(s=>{let a;a=s.data,r(a)},s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),r(void 0)})}),t}getFirstFreeIP(e){return new Promise(t=>{this.fwcVpnService.getIPSecVPNLanNextFreeIP(e).subscribe({next:r=>{t(r.data)},error:r=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(r)}),t(void 0)}})})}modifyOption(e,t,r,o){let s=e.find(a=>a.name==t);s&&(r&&(s.arg=r),o!=null&&(s.ipobj=o))}getOption(e,t){return e.find(r=>r.name==t)}clearOptionsArgs(e){e.forEach(t=>{t.ipobj!==void 0&&t.ipobj!==null&&t.name!=="leftsourceip"&&t.name!=="right"&&t.name!=="left"&&t.name!=="leftsubnet"&&(t.arg="")})}manageNetworkIPObject(e){return new Promise((t,r)=>B(this,null,function*(){let o,a=this.formModel.get("options").controls.find(l=>l.value.name===Gs.O_LEFTSUBNET);if(e.id===void 0)o=this.fwcObjectService.newObject.bind(this.fwcObjectService);else{if(this.formModel.controls._ipobj_address.pristine&&this.formModel.controls._ipobj_netmask.pristine&&(!a||a.pristine)){t({data:void 0});return}o=this.fwcObjectService.updateObject.bind(this.fwcObjectService)}if(e.netmask&&!e.netmask.startsWith("/"))try{let l=this.appOptionsService.netmaskToCIDR(e.netmask);e.netmask=`/${l}`}catch(l){console.error("Error converting netmask into CIDR:",l)}try{let l=yield this.utilService.fwcAPICall(o,e);t(l)}catch(l){l.error?.fwcErr===1003&&this.confirmDuplicateIPSecOperation(l),r(l)}}))}updateIPOnGrid(e){let t=this.formModel.controls._ipobj_address.value,r="",o,s,a;this.object.obj_type==O.OBJ_ISC_CONFIG_CLI?(t.match(Pt.ipV4Regexp)&&(a=t),o=pe.ipsec_client,s=Gs.O_LEFTSOURCEIP):this.object.obj_type==O.OBJ_ISS_CONFIG_SER&&(this.formModel.controls._ipobj_netmask&&(r=this.formModel.controls._ipobj_netmask.value),t.match(Pt.ipV4Regexp)&&(r.match(Pt.netmaskRegexp)||r.match(Pt.netmaskCIDRRegexp))&&(a=t.trim()+r.trim()),o=pe.ipsec_server,s=Gs.O_LEFT),a&&this.optionsGrids.forEach(l=>{l.getScope()===o&&l.modifyIPOption(s,a)})}confirmDuplicateIPSecOperation(e){let t="",r=[];if(e.data&&e.data.length){r=e.data,t="<ul>";for(let o=0;o<r.length;o++)t+="<li><strong>"+r[o].name+"</strong> ("+r[o].id+") </li>";t+="</ul>"}this.confirmationService.confirm({header:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.SUMMARY"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant("ITEM_PANEL.ERRORS.DUP_WARNING.TEXT",{objects:t}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.onSave(1)}})}onDownloadConfigFile(){let e="";if(!this.objectToRetrieve)return;if(this.objectToRetrieve._fwcObjType==O.OBJ_ISS_CONFIG_SER)e=this.objectToRetrieve._fwcObjName?this.objectToRetrieve._fwcObjName.replace(/[^a-z0-9]/gi,"_"):"IPSec_Server",e+=".conf";else if(this.objectToRetrieve._fwcObjType==O.OBJ_ISC_CONFIG_CLI){let r=[];r.push(this.fwcUserService.getActualFwcUser().selectedFwCloudName||"FWCLOUD"),r.push(this.objectToRetrieve._fwcFwName||"FW"),r.push(this.objectToRetrieve._fwcObjName||"IPSec_Client"),r=r.map(o=>o.replace(/[^a-z0-9\-]/gi,"_")),e=r.join("-"),e+=".IPSec"}let t=new Blob([this.configFile],{type:"text/plain;charset=utf-8"});(0,yK.saveAs)(t,e)}onCopyConfigFile(){this.txtConfigFile&&(this.txtConfigFile.nativeElement.select(),document.execCommand("copy"),this.txtConfigFile.nativeElement.setSelectionRange(0,0),this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant("VPN.CONFIG.CLIPBOARD.COPIED_OK")}))}onProcessDeleteAction(){if(this.configOrPrefixToDelete)if(this.configOrPrefixToDelete.obj_type==O.OBJ_ISS_CONFIG_SER||this.configOrPrefixToDelete.obj_type==O.OBJ_ISC_CONFIG_CLI)if(this.alsoUninstallConfig){this.objectToDelete=null,this.configOrPrefixToDelete.uninstallAction=!0;let e=this.utilService.createDynamicComponentRef(fo),t=e.instance;t.setDynamicComponentRef(e),this.communicationSubscription=t.socketEventEmitter.subscribe(r=>{r=="connected"&&this.onItemManage(this.configOrPrefixToDelete,!0),this.communicationSubscription.unsubscribe()}),t.checkConnection()}else this.onDeleteConfigurationOrPrefix();else this.onDeleteConfigurationOrPrefix()}onDeleteConfigurationOrPrefix(){if(!this.configOrPrefixToDelete)return;let e,t,r,o=this.configOrPrefixToDelete;o.obj_type==O.OBJ_ISS_CONFIG_SER||o.obj_type==O.OBJ_ISC_CONFIG_CLI?(e=this.fwcVpnService.deleteIPSecConfig.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:this.configOrPrefixToDelete._fwcObjId},r="VPN.CONFIG"):o.obj_type==O.OBJ_IPSEC_PREFIX&&(e=this.fwcVpnService.deleteIPSecPrefix.bind(this.fwcVpnService),t={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:o.id_obj},r="VPN.IPSEC_PREFIX"),e&&(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.addMessageToLog(this.translate.instant(r+".DELETING",{name:"IPSec client"}),Ne.MSG_INFO),this.utilService.fwcAPICall(e,t).then(s=>{let a=Object.assign({},this.configOrPrefixToDelete);if(a._fwcTreeAction=mi.DELETE_ITEM,s.data&&s.data.length&&(a.fw_status=s.data),this.itemSelectedService.setModifiedItem(a),this.log||(this.hideDialog(),this.resetProperties()),o.obj_type==O.OBJ_ISC_CONFIG_CLI||o.obj_type==O.OBJ_ISS_CONFIG_SER){if(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.CONFIG.IPS_DELETE_SUCCESS")}),o.obj_type==O.OBJ_ISC_CONFIG_CLI&&o.firewall){let l="strongswan-starter";this.addMessageToLog(this.translate.instant("VPN.CONFIG.INSTALL_STRINGS.RELOAD"),Ne.MSG_INFO),this.fwcFirewallService.getSystemctlInformation({fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:o.firewall,service:l,command:sk.reload}).subscribe({next:()=>{},error:()=>{this.addMessageToLog(this.translate.instant("VPN.CONFIG.INSTALL_STRINGS.RELOAD_ERROR"),Ne.MSG_ERROR)}})}this.addMessageToLog(this.translate.instant("VPN.CONFIG.IPS_DELETE_SUCCESS"),Ne.MSG_OK)}else this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.OK"),detail:this.translate.instant("VPN.IPSEC_PREFIX.DELETE.OK")})}).catch(s=>{let a;a=this.translate.instant(r+".ERRORS.DELETE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(s)}),this.errorMsg={type:"error",title:this.translate.instant(r+".ERRORS.DELETE_ERROR.SUMMARY"),text:a},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)}),this.log&&this.addMessageToLog(a,Ne.MSG_ERROR)}))}showRestrictions(e,t){}hideRestrictions(e){}managePrefix(e){let t,r,o,s,a,l,c,d;if(e)if(e.deletePrefixFolderAction){let h={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),prefix:e.id_obj};if(e.obj_type==O.OBJ_PREFIX_FOLDER)l=this.fwcVpnService.checkPrefixFolderRestrictions.bind(this.fwcVpnService),c=this.fwcVpnService.deletePrefixFolder.bind(this.fwcVpnService),a="VPN.PREFIX_FOLDER";else return;l(h).subscribe(_=>{this.confirmationService.confirm({header:this.translate.instant("GLOBALS.MSG_CONFIRM"),icon:"fa fa-question-circle fwcBlue iconBig",message:this.translate.instant(a+".DELETE.ASK",{name:e._fwcObjName}),rejectVisible:!0,rejectLabel:"No",acceptLabel:this.translate.instant("GLOBALS.MSG_OP_ASK.YES"),accept:()=>{this.utilService.fwcAPICall(c,h).then(C=>{if(this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:this.translate.instant(a+".DELETE.OK")}),e._fwcTreeAction=mi.DELETE_ITEM,this.itemSelectedService.setModifiedItem(e),e.container!=qe.C_FIREWALLS_CONDENSED){let I={_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED};this.itemSelectedService.setModifiedItem(I)}}).catch(C=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(C)})})}})},_=>{_.error&&_.error.restrictions?(this.dependencies=_.error.restrictions,this.confirmationService.confirm({header:this.translate.instant(a+".DELETE.RESTR_HEADER"),icon:"pi pi-exclamation-triangle fwcRed iconBig",acceptLabel:"Ok",rejectVisible:!1,message:this.translate.instant(a+".DELETE.RESTR_TEXT",{name:e._fwcObjName})})):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(_)})})}else{let h,_,C={[O.OBJ_PREFIX_FOLDER]:[this.fwcVpnService.editPrefixFolder.bind(this.fwcVpnService),this.fwcVpnService.newPrefixFolder.bind(this.fwcVpnService)],[O.OBJ_IPSEC_PREFIX]:[this.fwcVpnService.editIPSecPrefix.bind(this.fwcVpnService),this.fwcVpnService.newIPSecPrefix.bind(this.fwcVpnService)]};if(e.obj_type==O.OBJ_PREFIX_FOLDER)h=e.id_obj,a="VPN.PREFIX_FOLDER";else if(e.obj_type==O.OBJ_IPSEC_PREFIX)_=e.id_obj,a="VPN.IPSEC_PREFIX";else return;if(e.editPrefixAction)t=e._fwcObjName,r=e.id_obj,o=this.translate.instant(a+".EDIT.HEADER"),s=this.translate.instant(a+".EDIT.TEXT"),C[e.obj_type]&&C[e.obj_type][0]&&(d=C[e.obj_type][0]);else if(e.newPrefixAction)o=this.translate.instant(a+".NEW.HEADER"),s=this.translate.instant(a+".NEW.TEXT"),C[e.obj_type]&&C[e.obj_type][1]&&(d=C[e.obj_type][1]);else return;let I={header:o,helpText:s,formControls:[{name:"container",type:"hidden",value:e.container},{name:"id",type:"hidden",value:r},{name:"obj_type",type:"hidden",value:e.obj_type},{name:"ca",type:"hidden",value:h},{name:"orig_name",type:"hidden",value:t},{name:"name",label:this.translate.instant(a+".NAME"),type:"text",required:!0,value:t},{name:"ipsec",type:"hidden",value:_},{name:"translateKey",type:"hidden",value:a},{name:"apiCall",type:"hidden",value:d}],onAccept:this.onManagePrefix.bind(this)};this.inputDataService.setInputData(I)}}onManagePrefix(e){if(e){if(e.name==e.orig_name)return;let t,r,o={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),name:e.name},s;t=e.translateKey,r=e.apiCall,e.id?(o.prefix=e.id,s=this.translate.instant(t+".EDIT.OK")):(o.ca=e.ca,o.ipsec=e.ipsec,s=this.translate.instant(t+".NEW.OK")),this.utilService.fwcAPICall(r,o).then(a=>{let l=a.data&&a.data.insertId?a.data.insertId:e.id;this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.SUCCESS"),detail:s});let c={container:e.container,_fwcObjName:e.name,_fwcObjId:l,_fwcObjType:e.obj_type,_fwcTreeAction:mi.NEW_ITEM};this.itemSelectedService.setModifiedItem(c),e.container!=qe.C_FIREWALLS_CONDENSED&&this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_FIREWALLS_CONDENSED}),this.itemSelectedService.setModifiedItem({_fwcTreeAction:mi.RELOAD_TREE,containerToReload:qe.C_OBJECTS}),this.store.dispatch(on.reloadDialog({dialogUuids:[ri.ITEM_PANEL]}))}).catch(a=>{let l,c;a.data&&(a.data.fwcErr==1003?(l=this.translate.instant(t+".ERRORS.ERROR_DUP.SUMMARY"),c=this.translate.instant(t+".ERRORS.ERROR_DUP.TEXT")):a.data.fwcErr==5001?(l=this.translate.instant("VPN.IPSEC_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.SUMMARY"),c=this.translate.instant("VPN.IPSEC_PREFIX.ERRORS.ERROR_EMPTY_CONTAINER.TEXT")):this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(a)})),c&&this.confirmationService.confirm({header:l,icon:"fa fa-exclamation-circle fwcRed iconBig",message:c,rejectVisible:!1,acceptLabel:"Ok",accept:()=>{}})})}}showWhereUsed(e){if(!e)return;this.objectToSearchWU=e;let t,r;r={fwcloud:this.fwcUserService.getActualFwSelectedCloud()},e.obj_type==O.OBJ_IPSEC_PREFIX?(t=this.fwcVpnService.getIPSecWhereUsed.bind(this.fwcVpnService),r.prefix=e._fwcObjId):e.obj_type==O.OBJ_ISC_CONFIG_CLI&&(t=this.fwcVpnService.getIPSecConfigWhereUsed.bind(this.fwcVpnService),r.ipsec=e._fwcObjId),this.showDialog(),t&&t(r).subscribe(o=>{let s=o.data.data?Object.assign({},o.data.data):Object.assign({},o.data);s._fwcObjType=e.obj_type,this.objectToSearchWU._fwcObjectInfo=s,this.recenterDialog()},o=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.WHERE_USED.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(o)})}})}blockUnblockVPNConnection(e){let t=e._fwcObjId,r={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),ipsec:t},o;this.fwcVpnService.getIPSecConfig(r).pipe(Yn(s=>{let a=s.data.data;Array.isArray(a.options)||(a.options=[]);let l,c=[];if(a.options.forEach(d=>{c.push({arg:d.arg,comment:d.comment,ipobj:d.ipobj,name:d.name,scope:d.scope})}),e.blockVPNAction){if(o="VPN.CONFIG.INFO.BLOCK_VPN",c.find(d=>d.name==="<<disable>>"))return vt(null);c.push({arg:"",comment:"",ipobj:null,name:"<<disable>>",scope:pe.ipsec_client})}else if(o="VPN.CONFIG.INFO.UNBLOCK_VPN",c.find(d=>d.name==="<<disable>>"))c=c.filter(d=>d.name!=="<<disable>>");else return vt(null);return c=c.sort((d,h)=>d.scope-h.scope),l={fwcloud:this.fwcUserService.getActualFwSelectedCloud(),firewall:a.firewall,ipsec:a.id,options:c},bn(this.utilService.fwcAPICall(this.fwcVpnService.updateIPSecConfig.bind(this.fwcVpnService),l))})).subscribe({next:s=>{s===null||this.messageService.add({key:"fwcToastMsgs",severity:"success",summary:this.translate.instant(o+".SUMMARY"),detail:this.translate.instant(o+".TEXT")});let a=this.utilService.createDynamicComponentRef(fo),l=a.instance;l.setDynamicComponentRef(a),this.communicationSubscription=l.socketEventEmitter.subscribe(c=>{c=="connected"&&(e.installAction=!0,this.onItemManage(e)),this.communicationSubscription.unsubscribe()}),l.checkConnection()},error:s=>{this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.SUMMARY"),detail:this.translate.instant("VPN.CONFIG.ERRORS.BLOCK_VPN.TEXT")})}})}onAddRemoteOption(){if(!this.formModelRemote||!this.formModelRemote.valid)return;let e=this.formModelRemote.value,t=this.optionsGrids.find(s=>s.getScope()===pe.ipsec_client);if(!t)return;let r=[...t.getOptions()],o=r.find(s=>s.name==="right");o?o.ipobj=e.id_obj:r.push({name:"right",arg:"",ipobj:e.id_obj}),r.forEach(s=>{t.updateOrCreateIPOption(s,!0)}),this.fwcObjectService.getObject(e.id_obj,this.fwcUserService.getActualFwSelectedCloud()).subscribe({next:s=>{if(!s.data)return;let a=s.data,l="",c="";e.obj_type===O.OBJ_ADDRESS&&(l=a.address),e.obj_type===O.OBJ_DNS&&(l=a.name),a.if_name?(a.cluster_name?c+=`Cluster '${a.cluster_name}'`:a.firewall_name?c+=`Firewall '${a.firewall_name}'`:a.host_name&&(c+=`Host '${a.host_name}'`),c+=` - IF '${a.if_name}'`):c+=a.name;let d={name:"right",scope:pe.ipsec_client,arg:l,ipobj:e.id_obj,required:!0,readonly:!0};r=r.map(h=>h.name==="right"?d:h),r.forEach(h=>{t.updateOrCreateIPOption(h,!0)}),this.formModel.controls._remote_options=new Hr(this.createIPSecOptions(r)),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity()},error:s=>{this.errorMsg={type:"error",title:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.SUMMARY"),text:this.translate.instant("VPN.CONFIG.ERRORS.ADD_REMOTE_ERROR.TEXT",{error:this.fwcErrorPipe.transform(s)})},this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:"Error",detail:this.fwcErrorPipe.transform(s)})}})}onRemoteIPObjectChange(e){!e||e.obj_type!=O.OBJ_ADDRESS&&e.obj_type!=O.OBJ_DNS||(this.formModelRemote.get("id_obj").setValue(e.id_obj),this.formModelRemote.get("obj_type").setValue(e.obj_type))}updateOptions(e){let t=[],r=[...this.formModel.get("options")?.value];if(this.optionsGrids.forEach(o=>{(!e||o.getScope()==e)&&(t=t.concat(o.getOptions()))}),t.length===r.length){let o=new Set(r.map(l=>l.name)),s=new Set(t.map(l=>l.name)),a=o.size===s.size&&[...o].every(l=>s.has(l))}t.length&&(this.formModel.removeControl("options"),this.formModel.addControl("options",new Hr(this.createIPSecOptions(t))),this.formModel.controls._remote_options&&(this.formModel.removeControl("_remote_options"),this.formModel.addControl("_remote_options",new Hr(this.createIPSecOptions(t)))),this.formModel.updateValueAndValidity())}onOptionsChange(e){if(!Array.isArray(e)){this.formModel.markAsDirty();return}let t=this.formModel.get("options"),r=this.createIPSecOptions(e),o=t.controls.map(a=>a.value),s=r.map(a=>a.value);JSON.stringify(o)!==JSON.stringify(s)&&(t.clear(),r.forEach(a=>{t.push(a),a.markAsDirty(),a.updateValueAndValidity()}),e.some(a=>a.ipsec_cli)&&(this.ipsecClientsOptions=e.filter(a=>a.ipsec_cli)),e.some(a=>a.scope===pe.ipsec_client)&&(this.ipsecClientOptions=e.filter(a=>a.scope===pe.ipsec_client)),this.formModel.markAsDirty(),this.formModel.updateValueAndValidity(),this.cd.detectChanges()),setTimeout(()=>{this.recenterDialog()},0)}onOptionsDelete(e,t){e&&e.name=="remote"&&e.ipobj&&this.updateOptions(t),this.formModel.markAsDirty()}getServerPeerOptions(e){return this.ipsecClientsOptions.filter(t=>t.ipsec_cli===e||t.ipsec===e)}getClientOptions(){return this.ipsecClientOptions.filter(e=>e.scope===pe.ipsec_client)}onShowDialog(e){this.recenterDialog()}onHideDialog(e){}doStopProcess(){this.pauseProcess=!0,this.stopProcess=!0,this.loadingData=!1,this.disableButtons=!1,this.log&&(this.log.stopDataLoad(),this.addMessageToLog(this.translate.instant("COMPILE.WARN_STOP"),Ne.MSG_ERROR)),this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null),this.communicationAPISubscription&&(this.communicationAPISubscription.unsubscribe(),this.communicationAPISubscription=null),this.eventsSubscription&&(this.eventsSubscription.unsubscribe(),this.eventsSubscription=null)}onClientsChanged(e){this.ipsecClients=e}allowOnlyNumbersAndDot(e){let t=/[0-9.]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}allowNumbersDotAndSlash(e){let t=/[0-9.\/]/,r=String.fromCharCode(e.keyCode||e.which);return t.test(r)?!0:(e.preventDefault(),!1)}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(we),S(at),S(Dt),S(Vi),S(En),S(er),S(Cr),S(Ei),S(Ye),S(Jt),S(ft),S(dn),S(Kt),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ipsec-config-panel"]],viewQuery:function(t,r){if(t&1&&(le(Zo,5),le(iYe,5),le(pr,5),le(nYe,5),le(Tg,5)),t&2){let o;te(o=ie())&&(r.treeSelector=o.first),te(o=ie())&&(r.txtConfigFile=o.first),te(o=ie())&&(r.log=o.first),te(o=ie())&&(r.gridComponent=o.first),te(o=ie())&&(r.optionsGrids=o)}},inputs:{restrictionsReadOnly:"restrictionsReadOnly"},outputs:{showPeerListDialog:"showPeerListDialog"},features:[et([Vi,En,Dt]),Se],decls:11,vars:14,consts:[["dlgOVConfigPanel",""],["txtConfigFile",""],["treeSelector",""],["styleClass","dlgFwcDialog fwcObjectDialog",3,"visibleChange","onShow","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[1,"grid"],[1,"grid","grid","grid-nogutter"],[3,"objectInfo","readOnly"],["styleClass","objectInfoTab"],["pTemplate","footer"],[1,"divFormHeader"],[1,"divHeaderButtons"],[1,"fwcWhite","fwcIconLeft"],[1,"fwci-edit","fwcOrange"],[1,"fwci-whereused","fwcOrange"],["pButton","","type","button","icon","fa fa-window-minimize",1,"p-button-secondary",3,"click"],[1,"col-12","divCentered"],[1,"col-12"],[3,"message"],[1,"fwcRestrictionsContainer"],[3,"onHideParent","onRefreshRestrictions","dependencies","readOnly"],[1,"col-12",2,"text-align","center"],["name","chkUninstallConfig","binary","true",3,"ngModelChange","ngModel","label"],[1,"col-12","divConfigFile"],["pInputTextarea","","rows","15","readonly",""],[1,"col-4"],[1,"divTableScroll"],[1,"tableFw","unstriped"],[1,"fwc-centered"],[3,"ngClass"],[1,"col-8"],[1,"fwcMenuIcon","fwci-cluster","fwcOrange"],[1,"fwcSepShort"],[1,"fwcMenuIcon","fwci-firewall","fwcBlue"],[3,"onHideParent","objectInfo","readOnly"],["leftIcon","fa fa-pencil",3,"header"],[1,"fwcObjectPanel"],[3,"formGroup"],[3,"keyup.enter","keyup.esc"],[1,"grid","grid-nogutter"],[1,"col-12","divOPHeader",2,"margin-bottom","10px"],[1,"col-6","grid","grid-nogutter"],[1,"p-inputgroup"],[1,"fwcBlue"],["pInputText","","type","text","readonly","",3,"value"],[1,"col-12","lg:col-6","padding-right",2,"padding-right","10px"],["id","networkData",3,"legend"],[1,"p-float-label",2,"margin-top","10px"],["pInputText","","maxlength","64","type","text","formControlName","_ipobj_name","name","_ipobj_name",3,"drop"],["for","_ipobj_name"],[1,"col-3"],["pInputText","","appAutofocus","","maxlength","45","type","text","formControlName","_ipobj_address","name","_ipobj_address",3,"drop","keypress","blur"],["for","_ipobj_address"],["pInputText","","maxlength","17","type","text","formControlName","_ipobj_netmask","name","_ipobj_netmask",3,"drop","keypress","blur"],["for","_ipobj_netmask"],["class","col-1 grid-nogutter","style","padding:0; width: 8%;",4,"ngIf"],[1,"col-12","lg:col-6",2,"padding-left","10px"],[1,"col-12","lg:col-6"],[1,"col-1","grid-nogutter",2,"padding","0","width","8%"],[1,"pi","pi-exclamation-circle","fwcOrange",3,"pTooltip","ngStyle"],[3,"legend"],[1,"grid",2,"max-height","fit-content","width","100%"],[1,"col-6",2,"margin-top","10px"],[1,"p-float-label"],["pInputText","","type","text","formControlName","install_dir","name","install_dir",2,"font-family","monospace !important",3,"drop"],["for","install_dir"],["class","fwc-error err-no-margin",3,"ngStyle",4,"ngIf"],["pInputText","","type","text","maxlength","64","formControlName","install_name","name","install_name",2,"font-family","monospace !important",3,"drop"],["for","install_name"],["class","col-12",4,"ngIf"],[1,"fwc-error","err-no-margin",3,"ngStyle"],["legend","Right"],[1,"grid",2,"width","100%","padding-top","10px"],[1,"col-9"],[3,"objectSelected","fwcloudId","fwTreeNodes","objectTreeNodes","selectableObjects","disabledObjects"],[1,"col-1",2,"padding-top",".5rem"],[2,"display","flex","align-items","center","gap",".5rem"],["pButton","","type","button","icon","fa fa-plus",1,"p-button-primary","fwcButtonHeight",2,"height","2.5rem","flex-shrink","0",3,"click","disabled"],["class","fwc-error err-no-margin","style","margin: 0; white-space: nowrap; flex-shrink: 0;",3,"pTooltip",4,"ngIf"],[1,"fwc-error","err-no-margin",2,"margin","0","white-space","nowrap","flex-shrink","0",3,"pTooltip"],[1,"col-12","container"],[3,"optionDeleted","optionsChanged","validationStatus","options","leftSubnet","scope"],[1,"col-12",2,"margin-top","1rem"],["pInputText","","type","text","maxlength","255","formControlName","comment","name","comment",3,"drop"],["for","comment"],[1,"grids-container"],[3,"optionDeleted","optionsChanged","validationStatus","clientsUpdated","options","scope","ipsecClients"],[1,"divLoadTemp",3,"ngStyle"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"disabled","label"],["type","button","pButton","","icon","fa fa-trash",1,"p-button-danger",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-refresh",1,"fwc-left-float","p-button-primary",3,"click","disabled","label"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"label","disabled"],["pButton","","icon","fa fa-clipboard",1,"p-button-secondary",3,"click","label","disabled"],["pButton","","icon","fa fa-download",1,"p-button-secondary",3,"click","label","disabled"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"click","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"disabled","label"],["type","button","pButton","","icon","fa fa-pause",1,"p-button-warning",3,"click","disabled","label"],["type","button","pButton","","icon","fa fa-play",1,"p-button-success",3,"click","disabled","label"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-danger",3,"click","label","disabled"],["pButton","","icon","fa fa-save",1,"p-button-success",3,"click","label","disabled"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"mousedown","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",3,0),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onShow",function(a){return y(o),w(r.onShowDialog(a))})("onHide",function(a){return y(o),w(r.onHideDialog(a))}),v(2,CYe,6,6,"ng-template",4)(3,IYe,3,0,"div",5)(4,yYe,3,1,"div",5)(5,EYe,2,1)(6,AYe,5,1,"div",6)(7,DYe,17,6,"div",6)(8,FYe,1,2,"sts-fwc-object-wu",7)(9,WYe,47,24,"p-tabView",8)(10,rXe,7,11,"ng-template",9),g()}t&2&&(st(Ae(13,rYe)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(3),W(r.loadingData?3:-1),p(),W(r.errorMsg?4:-1),p(),W(r.objectToDelete&&!r.loadingData&&!r.errorMsg?5:-1),p(),W(r.objectToRetrieve&&!r.loadingData&&!r.errorMsg?6:-1),p(),W(r.objectToManage&&!r.loadingData&&!r.errorMsg?7:-1),p(),W(r.objectToSearchWU&&!r.loadingData&&!r.errorMsg?8:-1),p(),W(r.object&&r.formModel&&!r.loadingData&&!r.errorMsg?9:-1))},dependencies:[je,rt,De,Kn,Li,Pi,zn,Jn,mn,$n,Qn,Yt,Ee,pt,or,cn,Xi,Qr,fd,hd,uu,Pa,pr,mg,gg,Fn,Tg,Zo,Ag,gt,Sn],styles:[`.container{max-width:100%}.grids-container{display:flex;flex-direction:column;flex-wrap:nowrap;width:100%}.peerList{margin-top:10px}@media (max-width: 992px){sts-fwc-wireguard-options-grid,.peerList{min-width:100%;max-width:100%}}.p-tabview .p-tabview-panels{max-width:100%;width:100%;overflow:hidden;box-sizing:border-box;display:flex;flex-direction:column}.p-tabview .p-tabview-panels *{max-width:100%!important;box-sizing:border-box;flex-shrink:1;overflow-wrap:break-word}.p-tabview .p-tabview-panels table{width:100%!important;table-layout:fixed}.p-tabview .p-tabview-panels input,.p-tabview .p-tabview-panels select,.p-tabview .p-tabview-panels button{max-width:100%;min-width:0}#networkData .p-fieldset .p-fieldset-content{padding-bottom:0!important;height:5.8rem}.p-button-icon.pi-chevron-down{margin-right:4px!important}
`],encapsulation:2,data:{animation:[jc]}})}}return i})();var sXe=["fwcVpnStatusComponent"],aXe=()=>({width:"90vw"});function lXe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=u(2);p(),J(" (",e.configObj==null?null:e.configObj.cluster_name,") ")}}function cXe(i,n){if(i&1&&F(0),i&2){let e=u(2);J(" (",e.configObj==null?null:e.configObj.firewall_name,") ")}}function dXe(i,n){if(i&1&&(m(0,"div",5)(1,"h6",6),P(2,"i",7),F(3),D(4,"translate"),m(5,"strong"),F(6),g(),v(7,lXe,2,1,"span")(8,cXe,1,1),g()()),i&2){let e=u();p(3),J(" ",N(4,3,"VPN.STATUS.PANEL_TITLE_FULL")," "),p(3),J("'",e.configObj==null?null:e.configObj._fwcObjName,"'"),p(),W(e.configObj!=null&&e.configObj.cluster_id?7:8)}}function pXe(i,n){if(i&1){let e=L();m(0,"button",8),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.closeDialog())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var GZt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l){super(r,t,e,s,a,l),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.translate=o,this.cd=s,this.store=a,this.router=l,this.alive=!0,this.createDialog(this.translate.instant("VPN.STATUS.PANEL_TITLE"),"fwci2-openvpn",ri.VPN_STATUS_PANEL)}ngOnInit(){this.itemSelectedService.getItem().pipe(yt(()=>this.alive)).subscribe(e=>{[O.OBJ_OPENVPN_CONFIG_SER,O.OBJ_WGS_CONFIG_SER,O.OBJ_ISS_CONFIG_SER].includes(e.obj_type)&&e.statusAction&&(this.loadingData=!0,this.showDialog(),this.configObj=e,this.recenterDialog())})}ngOnDestroy(){super.ngOnDestroy()}closeDialog(){this.fwcVpnStatusComponent&&this.fwcVpnStatusComponent.resetProperties(),this.hideDialog()}onDialogHide(e){this.loadingData=!1}onVpnStatusLoaded(e){this.loadingData=!1,this.recenterDialog()}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(Ye),S(we),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-vpn-status-panel"]],viewQuery:function(t,r){if(t&1&&le(sXe,5),t&2){let o;te(o=ie())&&(r.fwcVpnStatusComponent=o.first)}},features:[Se],decls:5,vars:8,consts:[["fwcVpnStatusComponent",""],["styleClass","dlgFwcDialog",3,"visibleChange","onHide","visible","modal","resizable","closable"],["pTemplate","header"],[3,"statusLoaded","statusError","configObj"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fwcMenuIcon","fwci2-vpn-config","fwcOrange"],["pButton","","icon","pi pi-times",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),k("onHide",function(a){return y(o),w(r.onDialogHide(a))}),v(1,dXe,9,5,"ng-template",2),m(2,"sts-fwc-vpn-status",3,0),k("statusLoaded",function(a){return y(o),w(r.onVpnStatusLoaded(a))})("statusError",function(){return y(o),w(r.hideDialog())}),g(),v(4,pXe,2,4,"ng-template",4),g()}t&2&&(st(Ae(7,aXe)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(2),f("configObj",r.configObj))},dependencies:[Yt,Ee,pt,KW,gt]})}}return i})();var uXe=()=>({width:"40rem",height:"20rem"});function hXe(i,n){i&1&&(m(0,"div",6)(1,"h6",7),P(2,"i",8),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"FW.FW_MORE_INFO.MORE_INFO")," "))}function fXe(i,n){if(i&1){let e=L();m(0,"button",9),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.hideDialog())}),g()}if(i&2){let e=u();Q("label",N(1,2,"GLOBALS.MSG_BUTTONS.CLOSE")),f("disabled",e.loadingData)}}var QZt=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_,C){super(r,t,e,h,_,C),this.itemSelectedService=e,this.appOptionsService=t,this.appDialogPanelsService=r,this.utilService=o,this.fwcUserService=s,this.fwcEventService=a,this.translate=l,this.confirmationService=c,this.fwcFirewallService=d,this.cd=h,this.store=_,this.router=C,this.loadingData=!1,this.createDialog("panel","")}ngOnInit(){}ngOnDestroy(){super.ngOnDestroy()}showFirewallPanel(e,t,r,o,s,a){this.showDialog(),this.fwc_agent_version=e,this.host_name=t,this.system_name=r,this.os_version=s,this.kernel_version=a}static{this.\u0275fac=function(t){return new(t||i)(S(ht),S(wt),S(St),S(ft),S(at),S(dn),S(Ye),S(Jt),S(Dt),S(we),S(nt),S(ct))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-info-firewall"]],features:[et([Dt]),Se],decls:38,vars:30,consts:[["styleClass","dlgFwcDialog",3,"visibleChange","visible","modal","resizable","closable"],["pTemplate","header"],[2,"justify-content","center"],[2,"margin","0 auto","text-align","center","align-items","center","padding","10px"],[1,"col-8","infoTable"],["pTemplate","footer"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"pi","pi-info","fwcOrange"],["type","button","pButton","","icon","pi pi-check",1,"p-button-primary",3,"click","disabled","label"]],template:function(t,r){t&1&&(m(0,"p-dialog",0),Oe("visibleChange",function(s){return Re(r.displayDialog,s)||(r.displayDialog=s),s}),v(1,hXe,5,3,"ng-template",1),m(2,"div",2)(3,"h3",3),F(4),D(5,"translate"),g(),m(6,"table",4)(7,"tr")(8,"th"),F(9),D(10,"translate"),g(),m(11,"td"),F(12),g()(),m(13,"tr")(14,"th"),F(15),D(16,"translate"),g(),m(17,"td"),F(18),g()(),m(19,"tr")(20,"th"),F(21),D(22,"translate"),g(),m(23,"td"),F(24),g()(),m(25,"tr")(26,"th"),F(27),D(28,"translate"),g(),m(29,"td"),F(30),g()(),m(31,"tr")(32,"th"),F(33),D(34,"translate"),g(),m(35,"td"),F(36),g()()()(),v(37,fXe,2,4,"ng-template",5),g()),t&2&&(st(Ae(29,uXe)),Te("visible",r.displayDialog),f("modal",!0)("resizable",!0)("closable",!1),p(4),$(N(5,17,"FW.FW_MORE_INFO.FIREWALL_INFO")),p(5),$(N(10,19,"FW.FW_MORE_INFO.AGENT_VERSION")),p(3),$(r.fwc_agent_version),p(3),$(N(16,21,"FW.FW_MORE_INFO.HOST_NAME")),p(3),$(r.host_name),p(3),$(N(22,23,"FW.FW_MORE_INFO.SYSTEM_NAME")),p(3),$(r.system_name),p(3),$(N(28,25,"FW.FW_MORE_INFO.OS_VERSION")),p(3),$(r.os_version),p(3),$(N(34,27,"FW.FW_MORE_INFO.KERNEL_VERSION")),p(3),$(r.kernel_version))},dependencies:[Yt,Ee,pt,gt],styles:[`.infoTable{justify-content:center;align-items:center;width:100%;margin:0 auto;max-width:25vw}@media (max-width: 1300px){.infoTable{max-width:37vw}}@media (max-width: 960px){.infoTable{max-width:45vw}}@media (max-width: 780px){.infoTable{max-width:55vw}}
`],encapsulation:2})}}return i})();var mXe=["lastResponse"],gXe=()=>({width:"60vw"}),_Xe=i=>({visibility:i,"margin-left":"1rem"}),CXe=()=>({width:"1.7rem",height:"1.7rem"});function IXe(i,n){i&1&&(m(0,"div",23)(1,"h6",24),P(2,"i",25),F(3),D(4,"translate"),g()()),i&2&&(p(3),J(" ",N(4,1,"CONTEXT.AI_ASSISTANT.AI_HEADER.AI_ASSISTANT")," "))}function yXe(i,n){if(i&1&&(m(0,"span"),F(1),g()),i&2){let e=n.$implicit;p(),$(e.label)}}function wXe(i,n){if(i&1&&(m(0,"div")(1,"div"),F(2),g()()),i&2){let e=n.$implicit;p(2),$(e.label)}}function vXe(i,n){if(i&1){let e=L();m(0,"button",26),k("click",function(){y(e);let r=u();return w(r.checkCompiledRules())}),g()}if(i&2){let e=u();f("disabled",!e.isPromptSelected)}}function bXe(i,n){if(i&1){let e=L();m(0,"button",27),k("click",function(){y(e);let r=u();return w(r.checkPolicyScript())}),g()}if(i&2){let e=u();f("disabled",!e.isPromptSelected)}}function SXe(i,n){if(i&1){let e=L();m(0,"button",28),D(1,"translate"),k("click",function(){y(e);let r=u();return w(r.handleClose())}),g()}i&2&&Q("label",N(1,1,"GLOBALS.MSG_BUTTONS.STOP"))}var wK=(()=>{class i extends Gt{constructor(e,t,r,o,s,a,l,c,d,h,_){super(e,t,r,h,o,s),this.appDialogPanelsService=e,this.appOptionsService=t,this.itemSelectedService=r,this.store=o,this.router=s,this.translate=a,this.fwcEventService=l,this.utilService=c,this.aiAssistantChatService=d,this.cd=h,this.fb=_,this.replay="",this.responses=[],this.loadingData=!1,this.firstAction=!0,this.selectedPrompt=null,this.customPrompt=null,this.messages=[],this.definedPrompts=[{id:0,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.PLACEHOLDER"),content:"",difficultyLevel:null,createdAt:null,config:null,isActive:!1},{id:1,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.0"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.0"),difficultyLevel:"beginner",createdAt:new Date,config:{temperature:1,maxTokens:1e3},isActive:!0},{id:2,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.1"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.1"),difficultyLevel:"intermediate",createdAt:new Date,config:{temperature:.9,maxTokens:900},isActive:!0},{id:3,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.2"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.2"),difficultyLevel:"intermediate",createdAt:new Date,config:{temperature:.8,maxTokens:800},isActive:!0},{id:4,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.3"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.3"),difficultyLevel:"advanced",createdAt:new Date,config:{temperature:.7,maxTokens:700},isActive:!0},{id:5,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.4"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.4"),difficultyLevel:"intermediate",createdAt:new Date,config:{temperature:.9,maxTokens:850},isActive:!0},{id:6,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.5"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.5"),difficultyLevel:"advanced",createdAt:new Date,config:{temperature:.8,maxTokens:750},isActive:!0},{id:7,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.6"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.6"),difficultyLevel:"advanced",createdAt:new Date,config:{temperature:1,maxTokens:950},isActive:!0},{id:8,title:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.7"),content:this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_CONTENT.7"),difficultyLevel:"beginner",createdAt:new Date,config:{temperature:.8,maxTokens:800},isActive:!0}],Array.isArray(this.definedPrompts)||(this.definedPrompts=[]),this.definedPrompts.length>0&&(this.selectedPrompt=this.definedPrompts[0].title||null),this.formModel=this.fb.group({selectedPrompt:this.fb.control(this.selectedPrompt||null),customPrompt:this.fb.control(null),messages:this.fb.array([]),responses:this.fb.array([])},{validators:this.validatePrompts.bind(this)})}ngOnInit(){super.ngOnInit(),this.formModel.get("selectedPrompt").valueChanges.subscribe(e=>{let t=this.formModel.get("customPrompt");e!==this.selectedPrompt&&(e?t.clearValidators():t.setValidators(Pe.required),t.updateValueAndValidity(),this.selectedPrompt=e)}),this.formModel.get("customPrompt").valueChanges.subscribe(e=>{let t=this.formModel.get("selectedPrompt");e!==this.customPrompt&&(e?t.clearValidators():t.setValidators(Pe.required),t.updateValueAndValidity(),this.customPrompt=e)})}validatePrompts(e){let t=e.get("selectedPrompt")?.value,r=e.get("customPrompt")?.value;return!t&&t===this.definedPrompts[0].title&&!r?{promptRequired:!0}:null}get isPromptSelected(){let e=this.formModel.get("selectedPrompt")?.value,t=this.formModel.get("customPrompt")?.value;return!!(e!=this.definedPrompts[0].title||t)}get selectablePrompts(){return[{label:"Select a prompt:",value:"Select a prompt:"},...this.definedPrompts.filter((e,t)=>t!==0).map(e=>({label:e.title,value:e.content}))]}showAIDialog(e){return B(this,null,function*(){let{fwcloud:t,firewallId:r,rulesIds:o,clusterId:s}=e;this.displayDialog=!0,this.responses=[],this.messages=[],this.loadingData=!1,this.fwcloud=t,this.firewallId=r,o&&o.length>0&&(this.rulesIds=[...o]),this.cd.detectChanges(),setTimeout(()=>{this.scrollIntoView()})})}checkPolicyScript(){this.log.startDataLoad(),this.firstAction?this.firstAction=!1:(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.log.scrollToBottom()),this.loadingData=!0;let e=[],t=this.formModel.get("selectedPrompt").value;t&&t!==this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.PLACEHOLDER")&&e.push(t);let r=this.formModel.get("customPrompt").value;r&&(r.split(`
`).forEach(s=>{e.push(s.trim())}),this.formModel.get("customPrompt").setValue(null),this.customPrompt=null);let o=e.join(`
`);this.addMessageToLog(o,Ne.MSG_INFO),this.communicationSubscription=this.utilService.fwcAPICallObservable(this.aiAssistantChatService.checkPolicyScript.bind(this.aiAssistantChatService,this.fwcloud,this.firewallId,o)).subscribe({next:s=>{if(this.responses.push(s.data),this.loadingData=!1,this.messages=[],this.responses=s.data.split(`
`),s.data==="")this.responses=[],this.log.scrollToBottom();else{for(let a of this.responses)this.addMessageToLog(a,Ne.MSG_NOTICE);this.log.scrollToBottom()}this.addMessageToLog(null,Ne.MSG_END),this.log.scrollToBottom(),this.loadingData=!1,setTimeout(()=>{this.scrollIntoView()})},error:s=>B(this,null,function*(){let a;if(typeof s?.error=="string")try{let l=JSON.parse(s.error);l?.data?.message&&(a=l.data.message)}catch{}a=a||s?.error?.data?.message||s?.error?.msg||s?.msg||s?.message||s?.error?.response||"Unknown error",this.responseError=a,this.responses.push(this.responseError),this.messages=[],this.addMessageToLog(this.responseError,Ne.MSG_ERROR),this.addMessageToLog(null,Ne.MSG_END),this.log.scrollToBottom(),this.communicationSubscription&&(this.communicationSubscription.unsubscribe(),this.communicationSubscription=null),this.cd.detectChanges()}),complete:()=>{this.loadingData=!1,this.cd.detectChanges()}})}checkCompiledRules(){this.log.startDataLoad(),this.firstAction?this.firstAction=!1:(this.addMessageToLog("",Ne.MSG_SEPARATOR),this.log.scrollToBottom()),this.loadingData=!0;let e=[],t=this.formModel.get("selectedPrompt").value;t&&t!==this.translate.instant("CONTEXT.AI_ASSISTANT.PROMPTS_LABELS.PLACEHOLDER")&&e.push(t);let r=this.formModel.get("customPrompt").value;r&&(r.split(`
`).forEach(s=>{e.push(s.trim())}),this.formModel.get("customPrompt").setValue(null),this.customPrompt=null);let o=e.join(`
`);this.addMessageToLog(o,Ne.MSG_INFO),this.communicationSubscription=this.utilService.fwcAPICallObservable(this.aiAssistantChatService.checkCompiledRules.bind(this.aiAssistantChatService,this.fwcloud,this.firewallId,o,this.rulesIds)).subscribe({next:s=>{if(this.responses.push(s.data),this.loadingData=!1,this.messages=[],this.responses=s.data.split(`
`),s.data==="")this.responses=[],this.log.scrollToBottom();else{for(let a of this.responses)this.addMessageToLog(a,Ne.MSG_NOTICE);this.log.scrollToBottom()}this.addMessageToLog(null,Ne.MSG_END),this.log.scrollToBottom(),setTimeout(()=>{this.scrollIntoView()})},error:s=>B(this,null,function*(){let a;if(typeof s?.error=="string")try{let l=JSON.parse(s.error);l?.data?.message&&(a=l.data.message)}catch{}a=a||s?.error?.data?.message||s?.error?.msg||s?.msg||s?.message||s?.error?.response||"Unknown error",this.responseError=a,this.responses.push(this.responseError),this.messages=[],this.addMessageToLog(this.responseError,Ne.MSG_ERROR),this.addMessageToLog(null,Ne.MSG_END),this.log.scrollToBottom(),this.loadingData=!1,this.communicationSubscription&&(this.communicationSubscription.unsubscribe(),this.communicationSubscription=null),this.cd.detectChanges()}),complete:()=>{this.loadingData=!1,this.cd.detectChanges()}})}scrollIntoView(){this.lastResponse.nativeElement.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}clear(){let e=this.formModel.get("messages"),t=this.formModel.get("responses");for(;e.length!==0&&t.length!==0;)e.removeAt(0),t.removeAt(0);this.messages=[],this.responses=[],this.log&&this.log.clearMessages(),this.cd.detectChanges()}handleClose(){this.loadingData&&this.communicationSubscription?(this.communicationSubscription.unsubscribe(),this.communicationSubscription=null,this.loadingData=!1,this.hideDialog(),this.displayDialog=!1):(this.hideDialog(),this.displayDialog=!1)}static{this.\u0275fac=function(t){return new(t||i)(S(St),S(wt),S(ht),S(nt),S(ct),S(Ye),S(dn),S(ft),S(Np),S(we),S(qT))}}static{this.\u0275cmp=se({type:i,selectors:[["sts-fwc-ai-assistant"]],viewQuery:function(t,r){if(t&1&&(le(mXe,7),le(pr,5)),t&2){let o;te(o=ie())&&(r.lastResponse=o.first),te(o=ie())&&(r.log=o.first)}},features:[Se],decls:28,vars:21,consts:[["lastResponse",""],["styleClass","dlgFwcDialog fwcObjectDialog",3,"visibleChange","visible","modal","resizable","closable"],["pTemplate","header"],[1,"logger"],["height","350px"],[1,"message-input"],[1,"grid",2,"justify-content","center"],[3,"formGroup"],[1,"col-12"],["formControlName","selectedPrompt","styleClass","fwcGridDropDown","appendTo","body","filter","false","name","selectedPrompt",1,"w-full",3,"options","autoDisplayFirst"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"col-12",2,"margin-top","10px"],[1,"p-inputgroup"],[1,"p-float-label"],["pInputText","","type","text","maxlength","64","formControlName","customPrompt","name","customPrompt",2,"font-family","'Montserrat', sans-serif !important",3,"drop"],["for","customPrompt"],["pButton","","type","button","id","checkCompiledRules","label","Check rules","icon","pi pi-check",1,"p-button-primary","mr-2",3,"disabled"],["pButton","","type","button","id","checkPolicyScript","label","Check policy script","icon","pi pi-check",1,"p-button-primary","mr-2",3,"disabled"],[1,"divLoadTemp",3,"ngStyle"],["type","button","id","clean","pButton","","label","Clear messages","icon","fas fa-trash",1,"p-button-danger",3,"click"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"label"],["type","button","pButton","","icon","pi pi-check","label","Close",1,"p-button-primary",3,"click"],[1,"divFormHeader"],[1,"fwcWhite","fwcIconLeft"],[1,"fa-solid","fa-robot","panel-header-icon"],["pButton","","type","button","id","checkCompiledRules","label","Check rules","icon","pi pi-check",1,"p-button-primary","mr-2",3,"click","disabled"],["pButton","","type","button","id","checkPolicyScript","label","Check policy script","icon","pi pi-check",1,"p-button-primary","mr-2",3,"click","disabled"],["type","button","pButton","","icon","fa fa-xmark",1,"p-button-danger",3,"click","label"]],template:function(t,r){if(t&1){let o=L();m(0,"p-dialog",1),Oe("visibleChange",function(a){return y(o),Re(r.displayDialog,a)||(r.displayDialog=a),w(a)}),v(1,IXe,5,3,"ng-template",2),m(2,"div",3),P(3,"sts-fwc-log",4),g(),m(4,"div",5)(5,"div",6)(6,"form",7),he(7),m(8,"div",8)(9,"p-dropdown",9),v(10,yXe,2,1,"ng-template",10)(11,wXe,3,1,"ng-template",11),g()(),m(12,"div",12)(13,"div",13)(14,"span",14)(15,"input",15),k("drop",function(a){return y(o),w(r.preventDrop(a))}),g(),m(16,"label",16),F(17),D(18,"translate"),g()()()(),fe(),v(19,vXe,1,1,"button",17)(20,bXe,1,1,"button",18),m(21,"div",19),P(22,"p-progressSpinner"),g(),m(23,"button",20,0),k("click",function(){return y(o),w(r.clear())}),g()()()(),m(25,"p-footer"),v(26,SXe,2,3,"button",21),m(27,"button",22),k("click",function(){return y(o),w(r.handleClose())}),g()()()}t&2&&(st(Ae(17,gXe)),Te("visible",r.displayDialog),f("modal",!1)("resizable",!0)("closable",!1),p(6),f("formGroup",r.formModel),p(3),f("options",r.selectablePrompts)("autoDisplayFirst",!1),p(8),J(" ",N(18,15,"CONTEXT.AI_ASSISTANT.CUSTOM_PROMPT")," "),p(2),W(r.rulesIds!=null&&!r.loadingData?19:r.rulesIds==null&&!r.loadingData?20:-1),p(2),f("ngStyle",ne(18,_Xe,r.loadingData?"visible":"hidden")),p(),st(Ae(20,CXe)),p(4),W(r.loadingData?26:-1))},styles:[".p-dropdown.fwcGridDropDown[_ngcontent-%COMP%]{width:100%!important}.message-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:97%;height:100%}.message-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.logger[_ngcontent-%COMP%]{margin-top:.625rem;margin-bottom:.313rem}"]})}}return i})();var Xii=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=Ve({type:i})}static{this.\u0275inj=Me({providers:[Ei,Rf],imports:[it,bp,YT,Pz.forChild(),lO,KP,$P,cO,aO,oo,pO,ro,JP,Za,uO,QP,eg,hO,ZP,OO,Ap,iD,nD,IF,yF,RO,bF,EF,PO,AF,M_,F_,TF,OF,DW,LW,MW,VW,oB,BW,jW,HW,kV.forChild(),it,bp,YT,lO,KP,$P,cO,aO,oo,pO,ro,JP,Za,uO,QP,eg,hO,ZP,OO,Ap,iD,nD,IF,yF,RO,bF,EF,PO,AF,M_,F_,TF,OF]})}}return i})();os(oz,function(){return[Yt,Ee,pt,or,Fw,pr,Fn]},function(){return[gt]});os(lz,function(){return[je,Kn,Li,Pi,zn,Jn,mn,$n,Qn,Ee,pt,rh,cn,gl,Xi,Pa,PW,uh]},function(){return[aw,gt,Sn]});os(cz,function(){return[je,Yt,Ee,pt,rh,PC,NW]},function(){return[sw,gt,Sn]});os(KS,function(){return[Nz]},[]);os(FS,function(){return[De,Kn,Li,Pi,zn,Jn,$n,Qn,Yt,Ee,pt,Xi,mr,Fn,Wh]},function(){return[gt]});os(LS,function(){return[De,Kn,Li,Pi,zn,$n,Qn,Yt,Ee,pt,Xi,Wh]},function(){return[gt]});os(vg,function(){return[De,Kn,Pi,zn,$n,Qn,Yt,Ee,pt,or,mr,pr]},function(){return[gt]});os(eE,function(){return[De,Yt,Ee,pt,gl]},function(){return[gt,Sn]});os(Mz,function(){return[De,Kn,Li,Pi,zn,$n,Qn,Yt,Ee,pt,Qr,mr,Fn,Wh]},function(){return[gt]});os(Vz,function(){return[De,Kn,Li,Pi,zn,$n,Qn,v_,Yt,Ee,pt,Qr,mr,Fn,Wh]},function(){return[gt]});os(bg,function(){return[je,De,Yt,Ee,pt,or,pr]},function(){return[gt]});os(Uz,function(){return[De,Kn,Li,Pi,zn,$n,Qn,v_,Yt,Ee,pt,Qr,mr,Fn,Wh]},function(){return[gt]});os(nE,function(){return[De,Li,Pi,mn,Yt,Ee,pt,or,cn,Xi,sr,Oa,ah,Ra,TC,xg]},function(){return[gt]});os(rE,function(){return[De,Li,Pi,mn,Yt,Ee,pt,or,cn,Xi,sr,Oa,ah,Ra,TC,Tg]},function(){return[gt]});os(Wh,[],function(){return[Sn]});os(wK,function(){return[De,Kn,Li,Pi,zn,Jn,$n,Qn,Yt,As,Ee,pt,or,Xi,mr,pr]},function(){return[gt]});export{Ai as a,Ue as b,kg as c,CE as d,Eo as e,Nu as f,vt as g,ma as h,jK as i,HK as j,K as k,Yn as l,Mg as m,ZK as n,wE as o,Ao as p,vE as q,q as r,Al as s,t$ as t,ef as u,ts as v,SE as w,i$ as x,n$ as y,qc as z,_N as A,s$ as B,a$ as C,Vg as D,OE as E,l$ as F,xo as G,Vu as H,yt as I,Lo as J,RE as K,xt as L,Zt as M,Ce as N,Me as O,Xe as P,de as Q,Je as R,se as S,Ve as T,Et as U,ur as V,bf as W,y as X,w as Y,Rt as Z,bst as _,lt as $,Ur as aa,X as ba,Lt as ca,ic as da,Ze as ea,ai as fa,Sst as ga,an as ha,rs as ia,Ax as ja,Uq as ka,HM as la,p as ma,S as na,Cf as oa,jt as pa,Ro as qa,Gi as ra,Se as sa,tt as ta,v as ua,G as va,f as wa,Wn as xa,Dn as ya,st as za,ce as Aa,va as Ba,W as Ca,Ar as Da,xr as Ea,Tr as Fa,m as Ga,g as Ha,P as Ia,he as Ja,fe as Ka,ue as La,L as Ma,k as Na,u as Oa,$i as Pa,hi as Qa,Q as Ra,jy as Sa,ut as Ta,le as Ua,te as Va,ie as Wa,He as Xa,F as Ya,$ as Za,J as _a,Es as $a,Te as ab,Re as bb,Oe as cb,et as db,Ct as eb,os as fb,Ae as gb,ne as hb,Qe as ib,en as jb,xn as kb,Po as lb,D as mb,N as nb,ei as ob,Ms as pb,Bt as qb,we as rb,Y as sb,We as tb,od as ub,At as vb,je as wb,hn as xb,rt as yb,De as zb,mt as Ab,Kst as Bb,cc as Cb,it as Db,bt as Eb,dw as Fb,Mo as Gb,pd as Hb,ti as Ib,_ee as Jb,oat as Kb,sat as Lb,j4 as Mb,yat as Nb,wat as Ob,_e as Pb,el as Qb,rct as Rb,Tn as Sb,li as Tb,oct as Ub,qt as Vb,Yr as Wb,ci as Xb,tl as Yb,sct as Zb,il as _b,GV as $b,UV as ac,jV as bc,act as cc,fn as dc,Li as ec,Qa as fc,Pe as gc,Pi as hc,zn as ic,rr as jc,HT as kc,ve as lc,mn as mc,Kn as nc,ud as oc,$n as pc,SV as qc,v_ as rc,Qn as sc,uc as tc,wp as uc,vp as vc,KT as wc,$T as xc,Jn as yc,Hr as zc,bp as Ac,YT as Bc,sm as Cc,js as Dc,gd as Ec,Cd as Fc,$ue as Gc,ct as Hc,Rp as Ic,dm as Jc,al as Kc,St as Lc,yv as Mc,S_t as Nc,_c as Oc,O as Pc,M as Qc,Zr as Rc,g2 as Sc,Fi as Tc,_o as Uc,xs as Vc,Id as Wc,Na as Xc,ki as Yc,V as Zc,dv as _c,Or as $c,mi as ad,qe as bd,Xt as cd,ao as dd,Cc as ed,o_t as fd,Ne as gd,rn as hd,sme as id,pm as jd,hh as kd,Pt as ld,fh as md,gr as nd,ri as od,s_t as pd,a_t as qd,l_t as rd,wt as sd,Ts as td,Np as ud,PB as vd,E_ as wd,Wat as xd,DB as yd,ea as zd,j_t as Ad,Sv as Bd,q_t as Cd,ta as Dd,at as Ed,Mf as Fd,Ye as Gd,gt as Hd,kV as Id,Wt as Jd,Am as Kd,Ll as Ld,dn as Md,Dt as Nd,Io as Od,eb as Pd,En as Qd,tb as Rd,Vi as Sd,P2 as Td,lo as Ud,h8 as Vd,xm as Wd,B2 as Xd,l0 as Yd,nb as Zd,Rye as _d,G2 as $d,ob as ae,nt as be,Cn as ce,A8 as de,hwe as ee,vEt as fe,xd as ge,x8 as he,EEt as ie,Ko as je,wwe as ke,vwe as le,bwe as me,Bi as ne,Swe as oe,Awe as pe,eo as qe,on as re,Nwe as se,Mwe as te,P8 as ue,BEt as ve,na as we,Un as xe,ab as ye,Kp as ze,Os as Ae,er as Be,Cr as Ce,ht as De,$p as Ee,DAt as Fe,Uf as Ge,ge as He,Tt as Ie,bi as Je,Jt as Ke,Kt as Le,Ht as Me,Ee as Ne,dt as Oe,ft as Pe,Ei as Qe,j as Re,Nt as Se,nn as Te,ln as Ue,pt as Ve,sO as We,ro as Xe,Ji as Ye,Xi as Ze,Za as _e,P1 as $e,QP as af,On as bf,Hf as cf,Wf as df,nl as ef,D1 as ff,eg as gf,or as hf,aO as if,Ag as jf,Y3t as kf,xS as lf,jc as mf,Yt as nf,lO as of,yPt as pf,GPt as qf,$P as rf,rh as sf,cO as tf,cn as uf,oo as vf,Fw as wf,pO as xf,Ho as yf,rl as zf,Qr as Af,zf as Bf,hd as Cf,fd as Df,hO as Ef,uu as Ff,mr as Gf,Ap as Hf,yO as If,P_ as Jf,xp as Kf,Mw as Lf,Vw as Mf,sr as Nf,ah as Of,OO as Pf,Pa as Qf,Igt as Rf,PO as Sf,RC as Tf,PW as Uf,DW as Vf,FMt as Wf,MW as Xf,uh as Yf,oB as Zf,bu as _f,Kl as $f,Su as ag,ES as bg,Eu as cg,Sn as dg,f4t as eg,S4t as fg,W4t as gg,q4t as hg,mg as ig,gg as jg,Gt as kg,Fn as lg,bo as mg,Gc as ng,pr as og,qW as pg,$r as qg,fo as rg,NBt as sg,DS as tg,Wa as ug,NS as vg,xu as wg,BUt as xg,JF as yg,iz as zg,nz as Ag,F8t as Bg,$8t as Cg,oz as Dg,qF as Eg,lz as Fg,cz as Gg,Pz as Hg,K7t as Ig,Nz as Jg,Mz as Kg,Ou as Lg,Vz as Mg,Ru as Ng,Uz as Og,ui as Pg,hs as Qg,fs as Rg,ms as Sg,rK as Tg,jC as Ug,aK as Vg,Q9 as Wg,GC as Xg,W$t as Yg,Wh as Zg,Yqt as _g,BXt as $g,OZt as ah,GZt as bh,QZt as ch,wK as dh,Xii as eh};
