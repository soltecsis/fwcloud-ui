import{A as Q,Ae as vt,B as K,C as W,Db as ct,De as _,Ge as St,J as A,M as Z,Md as ht,N as l,Nb as ft,O as m,P as d,Pa as ot,Pd as mt,Q as c,R as O,Y as R,Yb as g,Yc as lt,Z as tt,Ze as F,a as w,aa as et,b as G,ba as it,be as Et,bf as Ft,g as z,ie as gt,k as h,ka as rt,ke as b,l as $,lb as st,lf as Tt,me as k,ne as U,o as V,oa as D,oc as at,p as j,pd as ut,pf as It,r as M,ra as E,s as Y,sa as nt,v as J,w as X,we as yt,y as q,yd as dt,zd as pt}from"./chunk-I2GSMN52.js";import{a as C}from"./chunk-GAL4ENT6.js";var _t={provide:at,useExisting:Z(()=>Lt),multi:!0},Ct={pint:/^[\d]*$/,int:/^[-]?[\d]*$/,pnum:/^[\d\.]*$/,money:/^[\d\.\s,]*$/,num:/^[-]?[\d\.]*$/,hex:/^[0-9a-f]*$/i,email:/^[a-z0-9_\.\-@]*$/i,alpha:/^[a-z_]*$/i,alphanum:/^[a-z0-9_]*$/i},L={TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46},wt={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},Lt=(()=>{class e{document;platformId;el;pValidateOnly;set pattern(r){this._pattern=r,r instanceof RegExp?this.regex=r:r&&r in Ct?this.regex=Ct[r]:this.regex=/./}get pattern(){return this._pattern}ngModelChange=new rt;regex=/./;_pattern;isAndroid;lastValue;constructor(r,t,n){this.document=r,this.platformId=t,this.el=n,ft(this.platformId)?this.isAndroid=Ft():this.isAndroid=!1}isNavKeyPress(r){let t=r.keyCode;return t=F().safari&&wt[t]||t,t>=33&&t<=40||t==L.RETURN||t==L.TAB||t==L.ESC}isSpecialKey(r){let t=r.keyCode||r.charCode;return t==9||t==13||t==27||t==16||t==17||t>=18&&t<=20||F().opera&&!r.shiftKey&&(t==8||t>=33&&t<=35||t>=36&&t<=39||t>=44&&t<=45)}getKey(r){let t=r.keyCode||r.charCode;return F().safari&&wt[t]||t}getCharCode(r){return r.charCode||r.keyCode||r.which}findDelta(r,t){let n="";for(let s=0;s<r.length;s++)r.substr(0,s)+r.substr(s+r.length-t.length)===t&&(n=r.substr(s,r.length-t.length));return n}isValidChar(r){return this.regex.test(r)}isValidString(r){for(let t=0;t<r.length;t++)if(!this.isValidChar(r.substr(t,1)))return!1;return!0}onInput(r){if(this.isAndroid&&!this.pValidateOnly){let t=this.el.nativeElement.value,n=this.lastValue||"",s=this.findDelta(t,n),o=this.findDelta(n,t);s.length>1||!s&&!o?this.isValidString(t)||(this.el.nativeElement.value=n,this.ngModelChange.emit(n)):o||this.isValidChar(s)||(this.el.nativeElement.value=n,this.ngModelChange.emit(n)),t=this.el.nativeElement.value,this.isValidString(t)&&(this.lastValue=t)}}onKeyPress(r){if(this.isAndroid||this.pValidateOnly)return;let t=F(),n=this.getKey(r);if(t.mozilla&&(r.ctrlKey||r.altKey))return;if(n==17||n==18||n==13)return;let s=this.getCharCode(r),o=String.fromCharCode(s),f=!0;if(!t.mozilla&&(this.isSpecialKey(r)||!o))return;let u=(this.el.nativeElement.value||"")+o;f=this.regex.test(u),f||r.preventDefault()}onPaste(r){let t=r.clipboardData;if(!t&&this.document.defaultView){let n=this.document.defaultView.clipboardData;n&&(t={getData:s=>n.getData("text")})}if(t){let n=/\{[0-9]+\}/,s=t.getData("text");if(n.test(this.regex.toString())){if(!this.regex.test(s)){r.preventDefault();return}}else for(let o of s.toString())if(!this.regex.test(o)){r.preventDefault();return}}}validate(r){if(this.pValidateOnly){let t=this.el.nativeElement.value;if(t&&!this.regex.test(t))return{validatePattern:!1}}}static \u0275fac=function(t){return new(t||e)(D(R),D(it),D(et))};static \u0275dir=nt({type:e,selectors:[["","pKeyFilter",""]],hostBindings:function(t,n){t&1&&ot("input",function(o){return n.onInput(o)})("keypress",function(o){return n.onKeyPress(o)})("paste",function(o){return n.onPaste(o)})},inputs:{pValidateOnly:[2,"pValidateOnly","pValidateOnly",ct],pattern:[0,"pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[st([_t])]})}return e})(),Fe=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=E({type:e});static \u0275inj=m({})}return e})();var Ht={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},P="__@ngrx/effects_create__";function y(e,i={}){let r=i.functional?e:e(),t=C(C({},Ht),i);return Object.defineProperty(r,P,{value:t}),r}function Bt(e){return Object.getOwnPropertyNames(e).filter(t=>e[t]&&e[t].hasOwnProperty(P)?e[t][P].hasOwnProperty("dispatch"):!1).map(t=>{let n=e[t][P];return C({propertyName:t},n)})}function Nt(e){return Bt(e)}function Ot(e){return Object.getPrototypeOf(e)}function Gt(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Rt(e){return typeof e=="function"}function jt(e){return e.filter(Rt)}function zt(e){return e instanceof d||Rt(e)}function Yt(e,i,r){let t=Ot(e),s=!!t&&t.constructor.name!=="Object"?t.constructor.name:null,o=Nt(e).map(({propertyName:f,dispatch:a,useEffectsErrorHandler:u})=>{let p=typeof e[f]=="function"?e[f]():e[f],I=u?r(p,i):p;return a===!1?I.pipe(X()):I.pipe(W()).pipe(h(Ut=>({effect:e[f],notification:Ut,propertyName:f,sourceName:s,sourceInstance:e})))});return V(...o)}var Jt=10;function Dt(e,i,r=Jt){return e.pipe(M(t=>(i&&i.handleError(t),r<=1?e:Dt(e,i,r-1))))}var v=(()=>{let i=class i extends w{constructor(t){super(),t&&(this.source=t)}lift(t){let n=new i;return n.source=this,n.operator=t,n}};i.\u0275fac=function(n){return new(n||i)(c(gt))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function S(...e){return j(i=>e.some(r=>typeof r=="string"?r===i.type:r.type===i.type))}var bt=new d("@ngrx/effects Internal Root Guard"),x=new d("@ngrx/effects User Provided Effects"),H=new d("@ngrx/effects Internal Root Effects"),xt=new d("@ngrx/effects Internal Root Effects Instances"),Mt=new d("@ngrx/effects Internal Feature Effects"),Pt=new d("@ngrx/effects Internal Feature Effects Instance Groups"),Xt=new d("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Dt}),$t="@ngrx/effects/init",Ve=Et($t);function qt(e,i){if(e.notification.kind==="N"){let r=e.notification.value;!Qt(r)&&i.handleError(new Error(`Effect ${Wt(e)} dispatched an invalid action: ${Zt(r)}`))}}function Qt(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Wt({propertyName:e,sourceInstance:i,sourceName:r}){let t=typeof i[e]=="function";return!!r?`"${r}.${String(e)}${t?"()":""}"`:`"${String(e)}()"`}function Zt(e){try{return JSON.stringify(e)}catch{return e}}var te="ngrxOnIdentifyEffects";function ee(e){return B(e,te)}var ie="ngrxOnRunEffects";function re(e){return B(e,ie)}var ne="ngrxOnInitEffects";function oe(e){return B(e,ne)}function B(e,i){return e&&i in e&&typeof e[i]=="function"}var Vt=(()=>{let i=class i extends G{constructor(t,n){super(),this.errorHandler=t,this.effectsErrorHandler=n}addEffects(t){this.next(t)}toActions(){return this.pipe(K(t=>Gt(t)?Ot(t):t),$(t=>t.pipe(K(se))),$(t=>{let n=t.pipe(Q(o=>ce(this.errorHandler,this.effectsErrorHandler)(o)),h(o=>(qt(o,this.errorHandler),o.notification)),j(o=>o.kind==="N"&&o.value!=null),q()),s=t.pipe(J(1),j(oe),h(o=>o.ngrxOnInitEffects()));return V(n,s)}))}};i.\u0275fac=function(n){return new(n||i)(c(tt),c(Xt))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function se(e){return ee(e)?e.ngrxOnIdentifyEffects():""}function ce(e,i){return r=>{let t=Yt(r,e,i);return re(r)?r.ngrxOnRunEffects(t):t}}var Kt=(()=>{let i=class i{get isStarted(){return!!this.effectsSubscription}constructor(t,n){this.effectSources=t,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};i.\u0275fac=function(n){return new(n||i)(c(Vt),c(b))},i.\u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})(),kt=(()=>{let i=class i{constructor(t,n,s,o,f,a,u){this.sources=t,n.start();for(let p of o)t.addEffects(p);s.dispatch({type:$t})}addEffects(t){this.sources.addEffects(t)}};i.\u0275fac=function(n){return new(n||i)(c(Vt),c(Kt),c(b),c(xt),c(k,8),c(U,8),c(bt,8))},i.\u0275mod=E({type:i}),i.\u0275inj=m({});let e=i;return e})(),fe=(()=>{let i=class i{constructor(t,n,s,o){let f=n.flat();for(let a of f)t.addEffects(a)}};i.\u0275fac=function(n){return new(n||i)(c(kt),c(Pt),c(k,8),c(U,8))},i.\u0275mod=E({type:i}),i.\u0275inj=m({});let e=i;return e})(),Ke=(()=>{let i=class i{static forFeature(...t){let n=t.flat(),s=jt(n);return{ngModule:fe,providers:[s,{provide:Mt,multi:!0,useValue:n},{provide:x,multi:!0,useValue:[]},{provide:Pt,multi:!0,useFactory:At,deps:[Mt,x]}]}}static forRoot(...t){let n=t.flat(),s=jt(n);return{ngModule:kt,providers:[s,{provide:H,useValue:[n]},{provide:bt,useFactory:ae},{provide:x,multi:!0,useValue:[]},{provide:xt,useFactory:At,deps:[H,x]}]}}};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=E({type:i}),i.\u0275inj=m({});let e=i;return e})();function At(e,i){let r=[];for(let t of e)r.push(...t);for(let t of i)r.push(...t);return r.map(t=>zt(t)?O(t):t)}function ae(){let e=O(Kt,{optional:!0,skipSelf:!0}),i=O(H,{self:!0});if(!(i.length===1&&i[0].length===0)&&e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var We=(()=>{let i=class i{constructor(t,n,s,o,f){this.actions$=t,this.fwcPolicyService=n,this.messageService=s,this.translate=o,this.fwcErrorPipe=f,this.$loadPolicyTypes=y(()=>this.actions$.pipe(S(_.loadPolicyTypes),Y(a=>this.fwcPolicyService.getPolicyTypes().pipe(M(u=>(this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(u)}),z({data:[]}))))),h(a=>{let u=a.data,p=u.find(I=>I.id===lt.POLICY_ROUTING);return p&&(p.show_action=0),_.policyTypesLoaded({policyTypes:u})})))}};i.\u0275fac=function(n){return new(n||i)(c(v),c(St),c(Tt),c(mt),c(It))},i.\u0275prov=l({token:i,factory:i.\u0275fac});let e=i;return e})();var ni=(()=>{let i=class i{constructor(t){this.actions$=t,this.$addDialog=y(()=>this.actions$.pipe(S(vt.addDialog),A(n=>{})),{dispatch:!1})}};i.\u0275fac=function(n){return new(n||i)(c(v))},i.\u0275prov=l({token:i,factory:i.\u0275fac});let e=i;return e})();var hi=(()=>{let i=class i{constructor(t,n){this.actions$=t,this._document=n,this.$setTheme=y(()=>this.actions$.pipe(S(yt.setTheme),A(s=>{let o=s.theme==="light"?dt:pt,f=this._document.getElementById("fwcTheme");if(f)f.setAttribute("href",o);else{let a=this._document.createElement("link");a.id="fwcTheme",a.rel="stylesheet",a.href=o,this._document.head.appendChild(a)}localStorage.setItem(ut.LS_UI_THEME,s.theme)})),{dispatch:!1})}};i.\u0275fac=function(n){return new(n||i)(c(v),c(R))},i.\u0275prov=l({token:i,factory:i.\u0275fac});let e=i;return e})();var wi=(()=>{let i=class i{constructor(t){this.fwcUserService=t}getSSEMessages(){let t=this.fwcUserService.getActualFwcUser(),n=`${g.settings.fwcAppURL}/stream`;return new w(s=>(this.eventSource=new EventSource(n,{withCredentials:!0}),this.eventSource.addEventListener("open",o=>{g.log(`SSE connection established to ${n}: `,o)}),this.eventSource.addEventListener("error",o=>(g.log("Error in SSE connection",o),!1)),this.eventSource.addEventListener("message",o=>{g.log("SSE Message",o.data),s.next(o.data)}),()=>{g.log("SSE connection closed"),this.eventSource.close(),this.eventSource=null}))}closeSSEConnection(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)}};i.\u0275fac=function(n){return new(n||i)(c(ht))},i.\u0275prov=l({token:i,factory:i.\u0275fac});let e=i;return e})();export{Fe as a,wi as b,Ke as c,ni as d,We as e,hi as f};
