import"./chunk-GAL4ENT6.js";function Y(t,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(r){if(r!=="default"&&!(r in t)){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}})}),Object.freeze(t)}var j=[0,1,3,7,15,31,63,127,255],U=function(t){this.stream=t,this.bitOffset=0,this.curByte=0,this.hasByte=!1};U.prototype._ensureByte=function(){this.hasByte||(this.curByte=this.stream.readByte(),this.hasByte=!0)},U.prototype.read=function(t){for(var e=0;t>0;){this._ensureByte();var i=8-this.bitOffset;if(t>=i)e<<=i,e|=j[i]&this.curByte,this.hasByte=!1,this.bitOffset=0,t-=i;else{e<<=t;var r=i-t;e|=(this.curByte&j[t]<<r)>>r,this.bitOffset+=t,t=0}}return e},U.prototype.seek=function(t){var e=t%8,i=(t-e)/8;this.bitOffset=e,this.stream.seek(i),this.hasByte=!1},U.prototype.pi=function(){var t,e=new Uint8Array(6);for(t=0;t<e.length;t++)e[t]=this.read(8);return function(i){return Array.prototype.map.call(i,r=>("00"+r.toString(16)).slice(-2)).join("")}(e)};var V=U,E=function(){};E.prototype.readByte=function(){throw Error("abstract method readByte() not implemented")},E.prototype.read=function(t,e,i){for(var r=0;r<i;){var n=this.readByte();if(n<0)return r===0?-1:r;t[e++]=n,r++}return r},E.prototype.seek=function(t){throw Error("abstract method seek() not implemented")},E.prototype.writeByte=function(t){throw Error("abstract method readByte() not implemented")},E.prototype.write=function(t,e,i){var r;for(r=0;r<i;r++)this.writeByte(t[e++]);return i},E.prototype.flush=function(){};var S,q=E,G=(S=new Uint32Array([0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]),function(){var t=4294967295;this.getCRC=function(){return~t>>>0},this.updateCRC=function(e){t=t<<8^S[255&(t>>>24^e)]},this.updateCRCRun=function(e,i){for(;i-- >0;)t=t<<8^S[255&(t>>>24^e)]}}),H=V,k=q,K=G,M=function(t,e){var i,r=t[e];for(i=e;i>0;i--)t[i]=t[i-1];return t[0]=r,r},f={OK:0,LAST_BLOCK:-1,NOT_BZIP_DATA:-2,UNEXPECTED_INPUT_EOF:-3,UNEXPECTED_OUTPUT_EOF:-4,DATA_ERROR:-5,OUT_OF_MEMORY:-6,OBSOLETE_INPUT:-7,END_OF_BLOCK:-8},y={};y[f.LAST_BLOCK]="Bad file checksum",y[f.NOT_BZIP_DATA]="Not bzip data",y[f.UNEXPECTED_INPUT_EOF]="Unexpected input EOF",y[f.UNEXPECTED_OUTPUT_EOF]="Unexpected output EOF",y[f.DATA_ERROR]="Data error",y[f.OUT_OF_MEMORY]="Out of memory",y[f.OBSOLETE_INPUT]="Obsolete (pre 0.9.5) bzip format not supported.";var u=function(t,e){var i=y[t]||"unknown error";e&&(i+=": "+e);var r=new TypeError(i);throw r.errorCode=t,r},R=function(t,e){this.writePos=this.writeCurrent=this.writeCount=0,this._start_bunzip(t,e)};R.prototype._init_block=function(){return this._get_next_block()?(this.blockCRC=new K,!0):(this.writeCount=-1,!1)},R.prototype._start_bunzip=function(t,e){var i=new Uint8Array(4);t.read(i,0,4)===4&&String.fromCharCode(i[0],i[1],i[2])==="BZh"||u(f.NOT_BZIP_DATA,"bad magic");var r=i[3]-48;(r<1||r>9)&&u(f.NOT_BZIP_DATA,"level out of range"),this.reader=new H(t),this.dbufSize=1e5*r,this.nextoutput=0,this.outputStream=e,this.streamCRC=0},R.prototype._get_next_block=function(){var t,e,i,r=this.reader,n=r.pi();if(n==="177245385090")return!1;n!=="314159265359"&&u(f.NOT_BZIP_DATA),this.targetBlockCRC=r.read(32)>>>0,this.streamCRC=(this.targetBlockCRC^(this.streamCRC<<1|this.streamCRC>>>31))>>>0,r.read(1)&&u(f.OBSOLETE_INPUT);var a=r.read(24);a>this.dbufSize&&u(f.DATA_ERROR,"initial position out of bounds");var o=r.read(16),h=new Uint8Array(256),p=0;for(t=0;t<16;t++)if(o&1<<15-t){var z=16*t;for(i=r.read(16),e=0;e<16;e++)i&1<<15-e&&(h[p++]=z+e)}var m=r.read(3);(m<2||m>6)&&u(f.DATA_ERROR);var D=r.read(15);D===0&&u(f.DATA_ERROR);var B=new Uint8Array(256);for(t=0;t<m;t++)B[t]=t;var x=new Uint8Array(D);for(t=0;t<D;t++){for(e=0;r.read(1);e++)e>=m&&u(f.DATA_ERROR);x[t]=M(B,e)}var s,c=p+2,L=[];for(e=0;e<m;e++){var l,d,_=new Uint8Array(c),T=new Uint16Array(21);for(o=r.read(5),t=0;t<c;t++){for(;(o<1||o>20)&&u(f.DATA_ERROR),r.read(1);)r.read(1)?o--:o++;_[t]=o}for(l=d=_[0],t=1;t<c;t++)_[t]>d?d=_[t]:_[t]<l&&(l=_[t]);s={},L.push(s),s.permute=new Uint16Array(258),s.limit=new Uint32Array(22),s.base=new Uint32Array(21),s.minLen=l,s.maxLen=d;var C=0;for(t=l;t<=d;t++)for(T[t]=s.limit[t]=0,o=0;o<c;o++)_[o]===t&&(s.permute[C++]=o);for(t=0;t<c;t++)T[_[t]]++;for(C=o=0,t=l;t<d;t++)C+=T[t],s.limit[t]=C-1,C<<=1,o+=T[t],s.base[t+1]=C-o;s.limit[d+1]=Number.MAX_VALUE,s.limit[d]=C+T[d]-1,s.base[l]=0}var O=new Uint32Array(256);for(t=0;t<256;t++)B[t]=t;var A,w=0,b=0,I=0,v=this.dbuf=new Uint32Array(this.dbufSize);for(c=0;;){for(c--||(c=49,I>=D&&u(f.DATA_ERROR),s=L[x[I++]]),t=s.minLen,e=r.read(t);t>s.maxLen&&u(f.DATA_ERROR),!(e<=s.limit[t]);t++)e=e<<1|r.read(1);((e-=s.base[t])<0||e>=258)&&u(f.DATA_ERROR);var g=s.permute[e];if(g!==0&&g!==1){if(w)for(w=0,b+o>this.dbufSize&&u(f.DATA_ERROR),O[A=h[B[0]]]+=o;o--;)v[b++]=A;if(g>p)break;b>=this.dbufSize&&u(f.DATA_ERROR),O[A=h[A=M(B,t=g-1)]]++,v[b++]=A}else w||(w=1,o=0),o+=g===0?w:2*w,w<<=1}for((a<0||a>=b)&&u(f.DATA_ERROR),e=0,t=0;t<256;t++)i=e+O[t],O[t]=e,e=i;for(t=0;t<b;t++)v[O[A=255&v[t]]]|=t<<8,O[A]++;var P=0,F=0,Z=0;return b&&(F=255&(P=v[a]),P>>=8,Z=-1),this.writePos=P,this.writeCurrent=F,this.writeCount=b,this.writeRun=Z,!0},R.prototype._read_bunzip=function(t,e){var i,r,n;if(this.writeCount<0)return 0;var a=this.dbuf,o=this.writePos,h=this.writeCurrent,p=this.writeCount;this.outputsize;for(var z=this.writeRun;p;){for(p--,r=h,h=255&(o=a[o]),o>>=8,z++==3?(i=h,n=r,h=-1):(i=1,n=h),this.blockCRC.updateCRCRun(n,i);i--;)this.outputStream.writeByte(n),this.nextoutput++;h!=r&&(z=0)}return this.writeCount=p,this.blockCRC.getCRC()!==this.targetBlockCRC&&u(f.DATA_ERROR,"Bad block CRC (got "+this.blockCRC.getCRC().toString(16)+" expected "+this.targetBlockCRC.toString(16)+")"),this.nextoutput};var N=function(t){if("readByte"in t)return t;var e=new k;return e.pos=0,e.readByte=function(){return t[this.pos++]},e.seek=function(i){this.pos=i},e.eof=function(){return this.pos>=t.length},e},X=function(t){var e=new k,i=!0;if(t)if(typeof t=="number")e.buffer=new Uint8Array(t),i=!1;else{if("writeByte"in t)return t;e.buffer=t,i=!1}else e.buffer=new Uint8Array(16384);return e.pos=0,e.writeByte=function(r){if(i&&this.pos>=this.buffer.length){var n=new Uint8Array(2*this.buffer.length);n.set(this.buffer),this.buffer=n}this.buffer[this.pos++]=r},e.getBuffer=function(){if(this.pos!==this.buffer.length){if(!i)throw new TypeError("outputsize does not match decoded input");var r=new Uint8Array(this.pos);r.set(this.buffer.subarray(0,this.pos)),this.buffer=r}return this.buffer},e._coerced=!0,e},J=Y({__proto__:null},[{Bunzip:R,Stream:k,Err:f,decode:function(t,e,i){for(var r=N(t),n=X(e),a=new R(r,n);!("eof"in r)||!r.eof();)if(a._init_block())a._read_bunzip();else{var o=a.reader.read(32)>>>0;if(o!==a.streamCRC&&u(f.DATA_ERROR,"Bad stream CRC (got "+a.streamCRC.toString(16)+" expected "+o.toString(16)+")"),!i||!("eof"in r)||r.eof())break;a._start_bunzip(r,n)}if("getBuffer"in n)return n.getBuffer()},decodeBlock:function(t,e,i){var r=N(t),n=X(i),a=new R(r,n);if(a.reader.seek(e),a._get_next_block()&&(a.blockCRC=new K,a.writeCopies=0,a._read_bunzip()),"getBuffer"in n)return n.getBuffer()},table:function(t,e,i){var r=new k;r.delegate=N(t),r.pos=0,r.readByte=function(){return this.pos++,this.delegate.readByte()},r.delegate.eof&&(r.eof=r.delegate.eof.bind(r.delegate));var n=new k;n.pos=0,n.writeByte=function(){this.pos++};for(var a=new R(r,n),o=a.dbufSize;!("eof"in r)||!r.eof();){var h=8*r.pos+a.reader.bitOffset;if(a.reader.hasByte&&(h-=8),a._init_block()){var p=n.pos;a._read_bunzip(),e(h,n.pos-p)}else{if(a.reader.read(32),!i||!("eof"in r)||r.eof())break;a._start_bunzip(r,n),console.assert(a.dbufSize===o,"shouldn't change block size within multistream file")}}}}]);export{J as i};
