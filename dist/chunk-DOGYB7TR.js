import{$ as te,$d as U,A as k,B as Q,Bb as ae,Bd as ge,Cb as ue,Ge as Te,I as A,L as W,La as se,Le as Me,M as a,Me as y,N as m,Nb as g,O as l,Oc as de,P as o,Pd as ye,Q as j,S as E,T as ee,Wd as ve,Yd as D,_d as K,a as C,b as z,ba as re,bb as ce,ca as ie,da as ne,dc as le,ed as pe,g as Y,ie as Se,j as h,k as P,la as b,me as Fe,n as $,nd as he,o as w,od as me,pe as N,q as R,qb as fe,r as V,ra as oe,se as Ie,tb as O,u as J,v as X,x as Z,z as q,zd as Ee}from"./chunk-G5GIUJ7D.js";import{a as M}from"./chunk-GAL4ENT6.js";var Ne={provide:le,useExisting:W(()=>Be),multi:!0},Ce={pint:/^[\d]*$/,int:/^[-]?[\d]*$/,pnum:/^[\d\.]*$/,money:/^[\d\.\s,]*$/,num:/^[-]?[\d\.]*$/,hex:/^[0-9a-f]*$/i,email:/^[a-z0-9_\.\-@]*$/i,alpha:/^[a-z_]*$/i,alphanum:/^[a-z0-9_]*$/i},B={TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46},we={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},Be=(()=>{class e{document;platformId;el;pValidateOnly;set pattern(r){this._pattern=r,r instanceof RegExp?this.regex=r:r in Ce?this.regex=Ce[r]:this.regex=/./}get pattern(){return this._pattern}ngModelChange=new te;regex=/./;_pattern;isAndroid;lastValue;constructor(r,t,i){this.document=r,this.platformId=t,this.el=i,ue(this.platformId)?this.isAndroid=y.isAndroid():this.isAndroid=!1}isNavKeyPress(r){let t=r.keyCode;return t=y.getBrowser().safari&&we[t]||t,t>=33&&t<=40||t==B.RETURN||t==B.TAB||t==B.ESC}isSpecialKey(r){let t=r.keyCode||r.charCode;return t==9||t==13||t==27||t==16||t==17||t>=18&&t<=20||y.getBrowser().opera&&!r.shiftKey&&(t==8||t>=33&&t<=35||t>=36&&t<=39||t>=44&&t<=45)}getKey(r){let t=r.keyCode||r.charCode;return y.getBrowser().safari&&we[t]||t}getCharCode(r){return r.charCode||r.keyCode||r.which}findDelta(r,t){let i="";for(let n=0;n<r.length;n++)r.substr(0,n)+r.substr(n+r.length-t.length)===t&&(i=r.substr(n,r.length-t.length));return i}isValidChar(r){return this.regex.test(r)}isValidString(r){for(let t=0;t<r.length;t++)if(!this.isValidChar(r.substr(t,1)))return!1;return!0}onInput(r){if(this.isAndroid&&!this.pValidateOnly){let t=this.el.nativeElement.value,i=this.lastValue||"",n=this.findDelta(t,i),c=this.findDelta(i,t);n.length>1||!n&&!c?this.isValidString(t)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)):c||this.isValidChar(n)||(this.el.nativeElement.value=i,this.ngModelChange.emit(i)),t=this.el.nativeElement.value,this.isValidString(t)&&(this.lastValue=t)}}onKeyPress(r){if(this.isAndroid||this.pValidateOnly)return;let t=y.getBrowser(),i=this.getKey(r);if(t.mozilla&&(r.ctrlKey||r.altKey))return;if(i==17||i==18||i==13)return;let n=this.getCharCode(r),c=String.fromCharCode(n),f=!0;if(!t.mozilla&&(this.isSpecialKey(r)||!c))return;let u=this.el.nativeElement.value||"",d=r.currentTarget.selectionStart||0,p=r.currentTarget.selectionEnd||0,T=u.substring(0,d)+c+u.substring(p);f=this.regex.test(T),f||r.preventDefault()}onPaste(r){let t=r.clipboardData||this.document.defaultView.clipboardData.getData("text");if(t){let i=/\{[0-9]+\}/,n=t.getData("text");if(i.test(this.regex.toString())){if(!this.regex.test(n)){r.preventDefault();return}}else for(let c of n.toString())if(!this.regex.test(c)){r.preventDefault();return}}}validate(r){if(this.pValidateOnly){let t=this.el.nativeElement.value;if(t&&!this.regex.test(t))return{validatePattern:!1}}}static \u0275fac=function(t){return new(t||e)(b(O),b(ne),b(ie))};static \u0275dir=ee({type:e,selectors:[["","pKeyFilter",""]],hostAttrs:[1,"p-element"],hostBindings:function(t,i){t&1&&se("input",function(c){return i.onInput(c)})("keypress",function(c){return i.onKeyPress(c)})("paste",function(c){return i.onPaste(c)})},inputs:{pValidateOnly:[2,"pValidateOnly","pValidateOnly",fe],pattern:[0,"pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[ce([Ne]),oe]})}return e})(),It=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=E({type:e});static \u0275inj=m({imports:[ae]})}return e})();var Le={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},x="__@ngrx/effects_create__";function v(e,s={}){let r=s.functional?e:e(),t=M(M({},Le),s);return Object.defineProperty(r,x,{value:t}),r}function He(e){return Object.getOwnPropertyNames(e).filter(t=>e[t]&&e[t].hasOwnProperty(x)?e[t][x].hasOwnProperty("dispatch"):!1).map(t=>{let i=e[t][x];return M({propertyName:t},i)})}function Ge(e){return He(e)}function be(e){return Object.getPrototypeOf(e)}function ze(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Oe(e){return typeof e=="function"}function Re(e){return e.filter(Oe)}function Ye(e){return e instanceof l||Oe(e)}function Je(e,s,r){let t=be(e),n=!!t&&t.constructor.name!=="Object"?t.constructor.name:null,c=Ge(e).map(({propertyName:f,dispatch:u,useEffectsErrorHandler:d})=>{let p=typeof e[f]=="function"?e[f]():e[f],T=d?r(p,s):p;return u===!1?T.pipe(X()):T.pipe(Q()).pipe(h(Ue=>({effect:e[f],notification:Ue,propertyName:f,sourceName:n,sourceInstance:e})))});return $(...c)}var Xe=10;function De(e,s,r=Xe){return e.pipe(R(t=>(s&&s.handleError(t),r<=1?e:De(e,s,r-1))))}var S=(()=>{class e extends C{constructor(r){super(),r&&(this.source=r)}lift(r){let t=new e;return t.source=this,t.operator=r,t}static{this.\u0275fac=function(t){return new(t||e)(o(ve))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function F(...e){return w(s=>e.some(r=>typeof r=="string"?r===s.type:r.type===s.type))}var _e=new l("@ngrx/effects Internal Root Guard"),_=new l("@ngrx/effects User Provided Effects"),L=new l("@ngrx/effects Internal Root Effects"),xe=new l("@ngrx/effects Internal Root Effects Instances"),Ae=new l("@ngrx/effects Internal Feature Effects"),Pe=new l("@ngrx/effects Internal Feature Effects Instance Groups"),Ze=new l("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>De}),$e="@ngrx/effects/init",Ut=ye($e);function qe(e,s){if(e.notification.kind==="N"){let r=e.notification.value;!Qe(r)&&s.handleError(new Error(`Effect ${We(e)} dispatched an invalid action: ${et(r)}`))}}function Qe(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function We({propertyName:e,sourceInstance:s,sourceName:r}){let t=typeof s[e]=="function";return!!r?`"${r}.${String(e)}${t?"()":""}"`:`"${String(e)}()"`}function et(e){try{return JSON.stringify(e)}catch{return e}}var tt="ngrxOnIdentifyEffects";function rt(e){return H(e,tt)}var it="ngrxOnRunEffects";function nt(e){return H(e,it)}var ot="ngrxOnInitEffects";function st(e){return H(e,ot)}function H(e,s){return e&&s in e&&typeof e[s]=="function"}var Ve=(()=>{class e extends z{constructor(r,t){super(),this.errorHandler=r,this.effectsErrorHandler=t}addEffects(r){this.next(r)}toActions(){return this.pipe(k(r=>ze(r)?be(r):r),P(r=>r.pipe(k(ct))),P(r=>{let t=r.pipe(q(n=>ft(this.errorHandler,this.effectsErrorHandler)(n)),h(n=>(qe(n,this.errorHandler),n.notification)),w(n=>n.kind==="N"&&n.value!=null),Z()),i=r.pipe(J(1),w(st),h(n=>n.ngrxOnInitEffects()));return $(t,i)}))}static{this.\u0275fac=function(t){return new(t||e)(o(re),o(Ze))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ct(e){return rt(e)?e.ngrxOnIdentifyEffects():""}function ft(e,s){return r=>{let t=Je(r,e,s);return nt(r)?r.ngrxOnRunEffects(t):t}}var ke=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(r,t){this.effectSources=r,this.store=t,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(t){return new(t||e)(o(Ve),o(D))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Ke=(()=>{class e{constructor(r,t,i,n,c,f,u){this.sources=r,t.start();for(let d of n)r.addEffects(d);i.dispatch({type:$e})}addEffects(r){this.sources.addEffects(r)}static{this.\u0275fac=function(t){return new(t||e)(o(Ve),o(ke),o(D),o(xe),o(K,8),o(U,8),o(_e,8))}}static{this.\u0275mod=E({type:e})}static{this.\u0275inj=m({})}}return e})(),at=(()=>{class e{constructor(r,t,i,n){let c=t.flat();for(let f of c)r.addEffects(f)}static{this.\u0275fac=function(t){return new(t||e)(o(Ke),o(Pe),o(K,8),o(U,8))}}static{this.\u0275mod=E({type:e})}static{this.\u0275inj=m({})}}return e})(),Nt=(()=>{class e{static forFeature(...r){let t=r.flat(),i=Re(t);return{ngModule:at,providers:[i,{provide:Ae,multi:!0,useValue:t},{provide:_,multi:!0,useValue:[]},{provide:Pe,multi:!0,useFactory:je,deps:[Ae,_]}]}}static forRoot(...r){let t=r.flat(),i=Re(t);return{ngModule:Ke,providers:[i,{provide:L,useValue:[t]},{provide:_e,useFactory:ut},{provide:_,multi:!0,useValue:[]},{provide:xe,useFactory:je,deps:[L,_]}]}}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=E({type:e})}static{this.\u0275inj=m({})}}return e})();function je(e,s){let r=[];for(let t of e)r.push(...t);for(let t of s)r.push(...t);return r.map(t=>Ye(t)?j(t):t)}function ut(){let e=j(ke,{optional:!0,skipSelf:!0}),s=j(L,{self:!0});if(!(s.length===1&&s[0].length===0)&&e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var rr=(()=>{class e{constructor(r,t,i,n,c){this.actions$=r,this.fwcPolicyService=t,this.messageService=i,this.translate=n,this.fwcErrorPipe=c,this.$loadPolicyTypes=v(()=>this.actions$.pipe(F(N.loadPolicyTypes),V(f=>this.fwcPolicyService.getPolicyTypes().pipe(R(u=>(this.messageService.add({key:"fwcToastMsgs",severity:"error",summary:this.translate.instant("GLOBALS.MSG_OP_RESULT.ERROR"),detail:this.fwcErrorPipe.transform(u)}),Y({data:[]}))))),h(f=>{let u=f.data,d=u.find(p=>p.id===de.POLICY_ROUTING);return d&&(d.show_action=0),N.policyTypesLoaded({policyTypes:u})})))}static{this.\u0275fac=function(t){return new(t||e)(o(S),o(Ie),o(Te),o(ge),o(Me))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac})}}return e})();var fr=(()=>{class e{constructor(r){this.actions$=r,this.$addDialog=v(()=>this.actions$.pipe(F(Fe.addDialog),A(t=>{})),{dispatch:!1})}static{this.\u0275fac=function(t){return new(t||e)(o(S))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac})}}return e})();var Er=(()=>{class e{constructor(r,t){this.actions$=r,this._document=t,this.$setTheme=v(()=>this.actions$.pipe(F(Se.setTheme),A(i=>{i.theme==="light"?this._document.getElementById("fwcTheme").setAttribute("href",he):this._document.getElementById("fwcTheme").setAttribute("href",me),localStorage.setItem(pe.LS_UI_THEME,i.theme)})),{dispatch:!1})}static{this.\u0275fac=function(t){return new(t||e)(o(S),o(O))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac})}}return e})();var Rr=(()=>{class e{constructor(r){this.fwcUserService=r}getSSEMessages(){let r=this.fwcUserService.getActualFwcUser(),t=`${g.settings.fwcAppURL}/stream`;return new C(i=>(this.eventSource=new EventSource(t,{withCredentials:!0}),this.eventSource.addEventListener("open",n=>{g.log(`SSE connection established to ${t}: `,n)}),this.eventSource.addEventListener("error",n=>(g.log("Error in SSE connection",n),!1)),this.eventSource.addEventListener("message",n=>{g.log("SSE Message",n.data),i.next(n.data)}),()=>{g.log("SSE connection closed"),this.eventSource.close(),this.eventSource=null}))}closeSSEConnection(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)}static{this.\u0275fac=function(t){return new(t||e)(o(Ee))}}static{this.\u0275prov=a({token:e,factory:e.\u0275fac})}}return e})();export{It as a,Rr as b,Nt as c,fr as d,rr as e,Er as f};
